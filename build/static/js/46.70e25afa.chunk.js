(this["webpackJsonpreact-redux-typescript-advance"]=this["webpackJsonpreact-redux-typescript-advance"]||[]).push([[46],{1310:function(e,t,s){"use strict";s.r(t),s.d(t,"Index",(function(){return K}));var n,a=s(18),r=s(5),i=s.n(r),o=s(40),l=s(32),c=s(24),d=s(23),u=s(26),p=s(25),m=s(21),b=s(650),h=s(912),x=(s(1021),s(176)),f=s.n(x),j=s(3),_=s(39),g=s(16),O=s(1),y=["month","agenda"],S=Object(h.b)(f.a),N=function(e){Object(u.a)(s,e);var t=Object(p.a)(s);function s(e){var n;return Object(c.a)(this,s),(n=t.call(this,e)).setLoading=function(e){n.setState({loading:e})},n.loadEvents=function(e){var t=[],s=1;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var r=e[a];for(var i in r.plans)if(Object.prototype.hasOwnProperty.call(r.plans,i)){var o=r.plans[i],l=o.type_key===g.g.APPLICATION?r.session_plan_name+" - Applications":o.type_key===g.g.DOCUMENT_VALIDATION?r.session_plan_name+" - Document validation":o.type_key===g.g.EXAMINATION?r.session_plan_name+" - Examination":o.type_key===g.g.MARKS_PUBLICATION?r.session_plan_name+" - Marks publication":o.type_key===g.g.PLACEMENT_TRANSFER?r.session_plan_name+" - Placement transfer":r.session_plan_name;t.push({id:s,title:l,allDay:!0,start:f()(o.start_date).toDate(),end:f()(o.end_date).toDate()}),s++}}n.setState({events:t}),s=1,t=[]},n.componentDidMount=function(){null===n.props.sessionPlan.allSessionPlans||n.props.sessionPlan.allSessionPlans.length<=0?n.props.GetAllSessionPlans((function(e,t,s){n.setLoading(e),!e&&s&&n.loadEvents(s),!e&&t.length>0&&n.props.PushPopupAlert({title:t,theme:_.a.danger})})):(n.loadEvents(n.props.sessionPlan.allSessionPlans),n.setLoading(!1))},n.state={loading:!0,events:null},n}return Object(d.a)(s,[{key:"render",value:function(){return Object(O.jsx)("section",{className:"my-3",children:this.state.events&&Object(O.jsx)(h.a,{popup:!0,localizer:S,events:this.state.events,defaultDate:new Date,views:y,step:60,showMultiDayTimes:!0,onSelectEvent:function(e){return alert(e.title)},startAccessor:"start",endAccessor:"end",className:"min-h-screen"})})}}]),s}(r.Component),v=i.a.memo(Object(m.b)((function(e){return{sessionPlan:e.sessionPlan}}),{GetAllSessionPlans:b.b,PushPopupAlert:j.Kb})(N)),E=s(4),A=s.n(E),T=s(7),w=s(8),P=s.n(w),C=s(10),I=s(111),k=s(689),R=s(658),D=s(128),L=s(644),M=s(9),q=s(43),F=s(762),V=function(e){Object(u.a)(s,e);var t=Object(p.a)(s);function s(e){var n;return Object(c.a)(this,s),(n=t.call(this,e)).setLoading=function(e){n.setState({loading:e})},n.setCreateSession=function(e){n.setState({createSession:e})},n.setSessionTitle=function(e){n.setState({sessionTitle:e})},n.setViewThisSession=function(e){null===n.state.viewThisSession?n.setState({viewThisSession:e}):n.state.viewThisSession.session_plan_id===e.session_plan_id?n.setState({viewThisSession:null}):n.setState({viewThisSession:e})},n.setActivateSession=function(e){n.setState({activateSession:e})},n.setSessionPeriod=function(e){n.setState({sessionPeriod:e})},n.setFormError=function(e){n.setState({formError:e})},n.componentDidMount=function(){(null===n.props.sessionPlan.planTypes||n.props.sessionPlan.planTypes.length<=0)&&n.props.GetPlansTypes((function(e,t){n.setLoading(e),!e&&t.length>0&&n.props.PushPopupAlert({title:t,theme:_.a.danger})})),null!==n.props.sessionPlan.planTypes&&n.props.sessionPlan.planTypes.length>0&&n.setLoading(!1),(null===n.props.sessionPlan.allSessionPlans||n.props.sessionPlan.allSessionPlans.length<=0)&&n.props.GetAllSessionPlans((function(e,t){n.setLoading(e),!e&&t.length>0&&n.props.PushPopupAlert({title:t,theme:_.a.danger})})),n.state.createSession||n.setCreateSession(n.props.isCreateDefault)},n.handleSessionActivation=function(){var e=Object(T.a)(A.a.mark((function e(t){var s,a;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=t.is_active?"deactivate":"activate",window.confirm("Are you sure you want to ".concat(s," this session?"))){e.next=3;break}return e.abrupt("return",!0);case 3:return n.setState({loadingRequest:t.session_plan_id}),e.prev=4,e.next=7,P.a.put("".concat(M.a.CLAIMING,"/session/active/").concat(t.session_plan_id),{is_active:!t.is_active});case 7:a=e.sent,n.props.GetAllSessionPlans((function(e,t){!e&&t.length>0&&n.props.PushPopupAlert({title:t,theme:_.a.danger})})),n.props.PushPopupAlert({title:"Session ".concat(s,"d successfully"),theme:_.a.info}),console.log("updateSessionPlan: ",a),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(4),console.error({error:Object(q.f)(e.t0)}),n.props.PushPopupAlert({title:Object(q.f)(e.t0),theme:_.a.warning});case 17:n.setState({loadingRequest:""});case 18:case"end":return e.stop()}}),e,null,[[4,13]])})));return function(t){return e.apply(this,arguments)}}(),n.isDateRangeValid=function(e,t,s){return!0},n.currentDate=function(){var e=new Date,t=e.getDate(),s=e.getMonth()+1,n=e.getFullYear(),a=t.toString(),r=s.toString();return t<10&&(a="0"+t),s<10&&(r="0"+s),n+"-"+r+"-"+a},n.setPlansForUpdate=function(e){n.setState({application_start:e.find((function(e){return e.type_key===g.g.APPLICATION}))?e.find((function(e){return e.type_key===g.g.APPLICATION})).start_date:"",application_end:e.find((function(e){return e.type_key===g.g.APPLICATION}))?e.find((function(e){return e.type_key===g.g.APPLICATION})).end_date:"",document_start:e.find((function(e){return e.type_key===g.g.DOCUMENT_VALIDATION}))?e.find((function(e){return e.type_key===g.g.DOCUMENT_VALIDATION})).start_date:"",document_end:e.find((function(e){return e.type_key===g.g.DOCUMENT_VALIDATION}))?e.find((function(e){return e.type_key===g.g.DOCUMENT_VALIDATION})).end_date:"",examination_start:e.find((function(e){return e.type_key===g.g.EXAMINATION}))?e.find((function(e){return e.type_key===g.g.EXAMINATION})).start_date:"",examination_end:e.find((function(e){return e.type_key===g.g.EXAMINATION}))?e.find((function(e){return e.type_key===g.g.EXAMINATION})).end_date:"",publication_start:e.find((function(e){return e.type_key===g.g.MARKS_PUBLICATION}))?e.find((function(e){return e.type_key===g.g.MARKS_PUBLICATION})).start_date:"",publication_end:e.find((function(e){return e.type_key===g.g.MARKS_PUBLICATION}))?e.find((function(e){return e.type_key===g.g.MARKS_PUBLICATION})).end_date:"",placement_start:e.find((function(e){return e.type_key===g.g.PLACEMENT_TRANSFER}))?e.find((function(e){return e.type_key===g.g.PLACEMENT_TRANSFER})).start_date:"",placement_end:e.find((function(e){return e.type_key===g.g.PLACEMENT_TRANSFER}))?e.find((function(e){return e.type_key===g.g.PLACEMENT_TRANSFER})).end_date:""})},n.handleSubmit=function(){var e=Object(T.a)(A.a.mark((function e(t){var s,a,r;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!Object(L.e)(n.state.sessionTitle)){e.next=3;break}return e.abrupt("return",n.setFormError({element:"title",msg:"Please fill the session plan title"}));case 3:if(!Object(L.e)(n.state.sessionPeriod)){e.next=5;break}return e.abrupt("return",n.setFormError({element:"period",msg:"Please fill session plan period"}));case 5:if(!Object(L.e)(n.state.application_start)){e.next=9;break}return e.abrupt("return",n.setFormError({element:"application_period_start",msg:"Application period start date is required"}));case 9:if(n.isDateRangeValid("APPLICATION","START",n.state.application_start)){e.next=11;break}return e.abrupt("return",!1);case 11:if(!Object(L.e)(n.state.application_end)){e.next=15;break}return e.abrupt("return",n.setFormError({element:"application_period_end",msg:"Application period end date is required"}));case 15:if(n.isDateRangeValid("APPLICATION","END",n.state.application_end)){e.next=17;break}return e.abrupt("return",!0);case 17:if(!Object(L.e)(n.state.document_start)){e.next=21;break}return e.abrupt("return",n.setFormError({element:"document_period_start",msg:"Document validation period start date is required"}));case 21:if(n.isDateRangeValid("DOCUMENT","START",n.state.document_start)){e.next=23;break}return e.abrupt("return",!1);case 23:if(!Object(L.e)(n.state.document_end)){e.next=27;break}return e.abrupt("return",n.setFormError({element:"document_period_end",msg:"Document validation period end date is required"}));case 27:if(n.isDateRangeValid("DOCUMENT","END",n.state.document_end)){e.next=29;break}return e.abrupt("return",!0);case 29:if(!Object(L.e)(n.state.examination_start)){e.next=33;break}return e.abrupt("return",n.setFormError({element:"examination_period_start",msg:"Examination period start date is required"}));case 33:if(n.isDateRangeValid("EXAMINATION","START",n.state.examination_start)){e.next=35;break}return e.abrupt("return",!1);case 35:if(!Object(L.e)(n.state.examination_end)){e.next=39;break}return e.abrupt("return",n.setFormError({element:"examination_period_end",msg:"Examination period end date is required"}));case 39:if(n.isDateRangeValid("EXAMINATION","END",n.state.examination_end)){e.next=41;break}return e.abrupt("return",!0);case 41:if(!Object(L.e)(n.state.publication_start)){e.next=45;break}return e.abrupt("return",n.setFormError({element:"publication_period_start",msg:"Marks publication period start date is required"}));case 45:if(n.isDateRangeValid("PUBLICATION","START",n.state.publication_start)){e.next=47;break}return e.abrupt("return",!1);case 47:if(!Object(L.e)(n.state.publication_end)){e.next=51;break}return e.abrupt("return",n.setFormError({element:"publication_period_end",msg:"Marks publication period end date is required"}));case 51:if(n.isDateRangeValid("PUBLICATION","END",n.state.publication_end)){e.next=53;break}return e.abrupt("return",!0);case 53:if(!Object(L.e)(n.state.placement_start)){e.next=57;break}return e.abrupt("return",n.setFormError({element:"placement_period_start",msg:"Placement period start date is required"}));case 57:if(n.isDateRangeValid("PLACEMENT","START",n.state.placement_start)){e.next=59;break}return e.abrupt("return",!1);case 59:if(!Object(L.e)(n.state.placement_end)){e.next=63;break}return e.abrupt("return",n.setFormError({element:"placement_period_end",msg:"Placement period end date is required"}));case 63:if(n.isDateRangeValid("PLACEMENT","END",n.state.placement_end)){e.next=65;break}return e.abrupt("return",!0);case 65:if(s={session_plan_name:n.state.sessionTitle,period:n.state.sessionPeriod,plans:[{type_key:g.g.APPLICATION,type_status:g.j.OPEN,start_date:n.state.application_start,end_date:n.state.application_end},{type_key:g.g.DOCUMENT_VALIDATION,type_status:g.j.OPEN,start_date:n.state.document_start,end_date:n.state.document_end},{type_key:g.g.EXAMINATION,type_status:g.j.OPEN,start_date:n.state.examination_start,end_date:n.state.examination_end},{type_key:g.g.MARKS_PUBLICATION,type_status:g.j.OPEN,start_date:n.state.publication_start,end_date:n.state.publication_end},{type_key:g.g.PLACEMENT_TRANSFER,type_status:g.j.OPEN,start_date:n.state.placement_start,end_date:n.state.placement_end}]},console.log("===================================="),console.log({createFormData:s}),console.log("===================================="),n.setState({loadingRequest:n.state.thisSession?n.state.thisSession.session_plan_id:"true"}),e.prev=70,null===n.state.thisSession){e.next=81;break}return e.next=74,P.a.put("".concat(M.a.CLAIMING,"/session/").concat(n.state.thisSession.session_plan_id),{session_plan_name:n.state.sessionTitle,period:n.state.sessionPeriod,is_active:n.state.thisSession.is_active,plans:[{type_key:g.g.APPLICATION,start_date:n.state.application_start,end_date:n.state.application_end},{type_key:g.g.DOCUMENT_VALIDATION,start_date:n.state.document_start,end_date:n.state.document_end},{type_key:g.g.EXAMINATION,start_date:n.state.examination_start,end_date:n.state.examination_end},{type_key:g.g.MARKS_PUBLICATION,start_date:n.state.publication_start,end_date:n.state.publication_end},{type_key:g.g.PLACEMENT_TRANSFER,start_date:n.state.placement_start,end_date:n.state.placement_end}]});case 74:a=e.sent,n.props.updateSessionPlan(a.data),n.props.PushPopupAlert({title:"Session Plan updated successfully",theme:_.a.info}),n.setState({formError:null,sessionTitle:"",sessionPeriod:"",application_start:"",application_end:"",document_start:"",document_end:"",examination_start:"",examination_end:"",publication_start:"",publication_end:"",placement_start:"",placement_end:"",thisSession:null,createSession:!1}),console.log("updateSessionPlan: ",a),e.next=88;break;case 81:return e.next=83,P.a.post("".concat(M.a.CLAIMING,"/session"),s);case 83:r=e.sent,n.props.createSessionPlan(r.data),n.props.PushPopupAlert({title:"Session plan created successfully",theme:_.a.success}),n.setState({formError:null,sessionTitle:"",sessionPeriod:"",application_start:"",application_end:"",document_start:"",document_end:"",examination_start:"",examination_end:"",publication_start:"",publication_end:"",placement_start:"",placement_end:"",thisSession:null,createSession:!1}),console.log("createPlanType: ",r);case 88:e.next=94;break;case 90:e.prev=90,e.t0=e.catch(70),n.props.PushPopupAlert({title:"".concat(Object(q.f)(e.t0),"! Try again"),theme:_.a.danger}),console.error("Err: ",{error:e.t0});case 94:n.setState({loadingRequest:""});case 95:case"end":return e.stop()}}),e,null,[[70,90]])})));return function(t){return e.apply(this,arguments)}}(),n.state={loading:!1,loadingRequest:"",createSession:!1,activateSession:null,thisSession:null,viewThisSession:null,doAction:null,sessionTitle:"",sessionPeriod:"",application_start:"",application_end:"",document_start:"",document_end:"",examination_start:"",examination_end:"",publication_start:"",publication_end:"",placement_start:"",placement_end:"",formError:null},n}return Object(d.a)(s,[{key:"render",value:function(){var e=this;return Object(O.jsxs)("div",{className:"my-2",children:[Object(O.jsxs)("div",{className:"flex flex-row justify-between items-center bg-gray-100 py-1",children:[this.state.createSession&&Object(O.jsxs)("div",{className:"flex items-center gap-2",children:[Object(O.jsx)("button",{className:"ml-3 bg-gray-50 hover:bg-blue-100 rounded-full px-1 py-1 focus:outline-none ".concat(this.state.loadingRequest.length>0||"cursor-pointer"," animate__animated animate__fadeIn"),disabled:this.state.loadingRequest.length>0,onClick:function(){e.setState({formError:null,sessionTitle:"",sessionPeriod:"",thisSession:null,createSession:!1,application_start:"",document_start:"",examination_start:"",publication_start:"",placement_start:"",application_end:"",document_end:"",examination_end:"",publication_end:"",placement_end:""})},children:Object(O.jsx)(C.f,{className:"w-7 h-7"})}),Object(O.jsx)("div",{className:"font-extrabold text-2xl text-gray-500",children:null!==this.state.thisSession?this.state.thisSession.session_plan_name:"Add New Application Session Plan"})]}),!this.state.createSession&&Object(O.jsx)("div",{className:"text-blue-600 font-extrabold text-xl px-2",children:"Application session plans"}),!1===this.state.loading&&!this.state.createSession&&Object(O.jsx)("div",{onClick:function(){return e.setCreateSession(!0)},className:"btn bg-blue-600 text-white cursor-pointer hover:bg-blue-800",children:"Add new"})]}),!this.state.createSession&&Object(O.jsx)("div",{className:"flex flex-col my-2",children:Object(O.jsxs)("table",{className:"w-full shadow",id:"session_content",children:[Object(O.jsx)("thead",{className:"bg-white border-b-2 border-gray-300 text-gray-600 font-bold text-sm",children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{className:"px-2 py-2",children:"#"}),Object(O.jsx)("td",{className:"px-2 py-2",children:"Session title"}),Object(O.jsx)("td",{className:"px-2 py-2",children:"Period"}),Object(O.jsx)("td",{className:"px-2 py-2",children:"Status"}),this.state.viewThisSession&&Object(O.jsx)("td",{className:"px-2 py-2"}),Object(O.jsx)("td",{className:"px-2 py-2"})]})}),Object(O.jsxs)("tbody",{children:[null===this.props.sessionPlan.allSessionPlans&&Object(O.jsx)(R.a,{cols:5}),null!==this.props.sessionPlan.allSessionPlans&&!this.state.loading&&this.props.sessionPlan.allSessionPlans.length<=0&&Object(O.jsx)("tr",{children:Object(O.jsx)("td",{colSpan:5,className:"px-2 py-2",children:Object(O.jsx)(D.b,{theme:D.a.Dark,value:"No session plan found!",component:Object(O.jsx)("div",{className:"w-full mt-2 flex flex-row items-center justify-center",children:Object(O.jsx)("ul",{className:"text-base py-2 text-blue-600 font-bold flex flex-row gap-2",children:Object(O.jsx)("li",{onClick:function(){return e.setCreateSession(!0)},className:"underline text-blue-600 cursor-pointer",children:"Create new session"})})})})})}),null!==this.props.sessionPlan.allSessionPlans&&!this.state.loading&&this.props.sessionPlan.allSessionPlans.length>0&&this.props.sessionPlan.allSessionPlans.map((function(t,s){return Object(O.jsxs)(r.Fragment,{children:[Object(O.jsxs)("tr",{className:"border-b border-gray-200 hover:bg-gray-100 group cursor-pointer ".concat(e.state.viewThisSession&&e.state.viewThisSession.session_plan_id===t.session_plan_id&&"border-blue-600 bg-blue-200"),onClick:function(){e.state.loadingRequest.length<=0&&e.setViewThisSession(t)},children:[Object(O.jsx)("td",{className:"p-3 text-left whitespace-nowrap",children:s+1}),Object(O.jsx)("td",{className:"p-3 text-left",children:Object(O.jsx)("span",{className:"text-lg",children:Object(L.a)(t.session_plan_name)})}),Object(O.jsx)("td",{className:"p-3 text-left",children:t.period}),Object(O.jsx)("td",{children:t.is_active?Object(O.jsx)("span",{className:"px-2 py-1 font-semibold text-green-700",children:"Active"}):Object(O.jsx)("span",{className:"px-2 py-1 font-semibold text-red-700",children:"Inactive"})}),e.state.viewThisSession&&e.state.viewThisSession.session_plan_id===t.session_plan_id&&Object(O.jsx)("td",{children:Object(O.jsxs)("div",{className:"flex items-center justify-center gap-1",children:[Object(O.jsxs)("div",{className:"relative ".concat(e.state.loadingRequest.length>0||t.is_active?"cursor-not-allowed":"cursor-pointer"),title:t.is_active?"Activate another session to close this one!":"Activation of a session",onClick:function(){return e.state.loadingRequest.length<=0&&!t.is_active&&e.setActivateSession(t)},children:[Object(O.jsx)("span",{className:"block w-14 h-8 bg-gray-100 rounded-full shadow-inner"}),Object(O.jsx)("span",{className:"absolute block w-6 h-6 mt-1 ml-1 rounded-full shadow inset-y-0 left-0 focus-within:shadow-outline transition-transform duration-500 ease-in-out ".concat(t.is_active?"bg-green-500 transform translate-x-full":"bg-red-500")})]}),e.state.loadingRequest===t.session_plan_id&&e.state.doAction&&"ACTIVATED"===e.state.doAction&&Object(O.jsx)(I.c,{className:"animate__animated animate__rotateIn animate__infinite"})]})}),Object(O.jsx)("td",{className:"px-5 text-center",colSpan:e.state.viewThisSession&&e.state.viewThisSession.session_plan_id!==t.session_plan_id?2:0,children:Object(O.jsxs)("div",{className:"flex flex-row items-center gap-2 justify-end",children:[e.state.viewThisSession&&e.state.viewThisSession.session_plan_id===t.session_plan_id&&Object(O.jsx)("div",{className:"flex items-center gap-2",children:Object(O.jsx)("div",{onClick:function(){e.state.loadingRequest.length<=0&&e.setState({thisSession:t,createSession:!0,sessionTitle:t.session_plan_name,sessionPeriod:t.period}),e.setPlansForUpdate(t.plans)},className:"bg-gray-50 hover:bg-blue-200 rounded-full px-1 py-1 ".concat(e.state.loadingRequest.length>0?"cursor-not-allowed":"cursor-pointer"),children:Object(O.jsx)(C.B,{className:"text-3xl text-blue-700"})})}),Object(O.jsx)("div",{onClick:function(){e.state.loadingRequest.length<=0&&e.setViewThisSession(t)},className:"bg-gray-50 group-hover:bg-blue-200 rounded-full px-1 py-1 ".concat(e.state.loadingRequest.length>0?"cursor-not-allowed":"cursor-pointer"),children:e.state.viewThisSession&&e.state.viewThisSession.session_plan_id===t.session_plan_id?Object(O.jsx)(C.E,{className:"text-3xl text-gray-700"}):Object(O.jsx)(C.F,{className:"text-3xl text-gray-700"})})]})})]}),e.state.viewThisSession&&e.state.viewThisSession.session_plan_id===t.session_plan_id&&Object(O.jsx)("tr",{className:"bg-gray-200",children:Object(O.jsx)("td",{colSpan:6,className:"px-3 py-2",children:Object(O.jsx)(F.a,{viewThisSession:e.state.viewThisSession,setViewThisSession:e.setViewThisSession})})})]},s+t.session_plan_id)}))]})]})}),this.state.createSession&&Object(O.jsx)("section",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4",children:Object(O.jsx)("div",{className:"col-span-1 sm:col-span-4 flex flex-col mx-4 my-6",children:Object(O.jsxs)("form",{onSubmit:this.handleSubmit,className:"-mt-2",children:[Object(O.jsxs)("div",{className:"flex flex-col mb-2",children:[Object(O.jsx)("span",{className:"text-sm text-gray-600 font-bold mb-1",children:"Session title"}),Object(O.jsx)("input",{disabled:this.state.loadingRequest.length>0,onChange:function(t){e.setSessionTitle(t.target.value),e.setFormError(null)},type:"text",value:this.state.sessionTitle,className:"input-white border-2 ".concat(null!==this.state.formError&&"title"===this.state.formError.element?"border-red-500":"border-gray-500")}),null!==this.state.formError&&"title"===this.state.formError.element&&Object(O.jsx)("span",{className:"text-red-600 font-bold text-xs",children:this.state.formError.msg})]}),Object(O.jsxs)("div",{className:"flex flex-col mb-2",children:[Object(O.jsx)("span",{className:"text-sm text-gray-600 font-bold mb-1",children:"Session period"}),Object(O.jsx)("input",{disabled:this.state.loadingRequest.length>0,onChange:function(t){e.setSessionPeriod(t.target.value),e.setFormError(null)},type:"text",value:this.state.sessionPeriod,className:"input-white border-2 ".concat(null!==this.state.formError&&"period"===this.state.formError.element?"border-red-500":"border-gray-500")}),null!==this.state.formError&&"period"===this.state.formError.element&&Object(O.jsx)("span",{className:"text-red-600 font-bold text-xs",children:this.state.formError.msg})]}),Object(O.jsxs)("div",{className:"w-full mb-2",children:[Object(O.jsx)("h6",{className:"text-blueGray-400 text-sm mt-3 mb-1 font-bold uppercase",children:"Application Session period"}),Object(O.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 my-1 gap-2",children:[Object(O.jsxs)("div",{className:"w-full",children:[Object(O.jsx)("span",{className:"text-sm text-gray-600 font-bold mb-1",children:"Start"}),Object(O.jsx)("input",{disabled:this.state.loadingRequest.length>0,onChange:function(t){e.setState({application_start:t.target.value}),e.setFormError(null),e.isDateRangeValid("APPLICATION","START",t.target.value)},type:"date",value:this.state.application_start,min:this.state.thisSession?"":this.currentDate(),className:"input-white border-2 ".concat(null!==this.state.formError&&"application_period_start"===this.state.formError.element?"border-red-500":"border-gray-500")}),null!==this.state.formError&&"application_period_start"===this.state.formError.element&&Object(O.jsx)("span",{className:"text-red-600 font-bold text-xs",children:this.state.formError.msg})]}),Object(O.jsxs)("div",{className:"w-full",children:[Object(O.jsx)("span",{className:"text-sm text-gray-600 font-bold mb-1",children:"End"}),Object(O.jsx)("input",{disabled:this.state.loadingRequest.length>0,onChange:function(t){e.setState({application_end:t.target.value}),e.setFormError(null),e.isDateRangeValid("APPLICATION","END",t.target.value)},type:"date",value:this.state.application_end,className:"input-white border-2 ".concat(null!==this.state.formError&&"application_period_end"===this.state.formError.element?"border-red-500":"border-gray-500")}),null!==this.state.formError&&"application_period_end"===this.state.formError.element&&Object(O.jsx)("span",{className:"text-red-600 font-bold text-xs",children:this.state.formError.msg})]})]})]}),Object(O.jsxs)("div",{className:"w-full mb-2",children:[Object(O.jsx)("h6",{className:"text-blueGray-400 text-sm mt-3 mb-1 font-bold uppercase",children:"Document Validation Session period"}),Object(O.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 my-1 gap-2",children:[Object(O.jsxs)("div",{className:"w-full",children:[Object(O.jsxs)("span",{className:"text-sm text-gray-600 font-bold mb-1",children:["Start"," ",null!==this.state.formError&&this.state.formError.element]}),Object(O.jsx)("input",{disabled:this.state.loadingRequest.length>0,onChange:function(t){e.setState({document_start:t.target.value}),e.setFormError(null),e.isDateRangeValid("DOCUMENT","START",t.target.value)},type:"date",value:this.state.document_start,className:"input-white border-2 ".concat(null!==this.state.formError&&"document_period_start"===this.state.formError.element?"border-red-500":"border-gray-500")}),null!==this.state.formError&&"document_period_start"===this.state.formError.element&&Object(O.jsx)("span",{className:"text-red-600 font-bold text-xs",children:this.state.formError.msg})]}),Object(O.jsxs)("div",{className:"w-full",children:[Object(O.jsx)("span",{className:"text-sm text-gray-600 font-bold mb-1",children:"End"}),Object(O.jsx)("input",{disabled:this.state.loadingRequest.length>0,onChange:function(t){e.setState({document_end:t.target.value}),e.setFormError(null),e.isDateRangeValid("DOCUMENT","END",t.target.value)},type:"date",value:this.state.document_end,className:"input-white border-2 ".concat(null!==this.state.formError&&"document_period_end"===this.state.formError.element?"border-red-500":"border-gray-500")}),null!==this.state.formError&&"document_period_end"===this.state.formError.element&&Object(O.jsx)("span",{className:"text-red-600 font-bold text-xs",children:this.state.formError.msg})]})]})]}),Object(O.jsxs)("div",{className:"w-full mb-2",children:[Object(O.jsx)("h6",{className:"text-blueGray-400 text-sm mt-3 mb-1 font-bold uppercase",children:"Examination Session period"}),Object(O.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 my-1 gap-2",children:[Object(O.jsxs)("div",{className:"w-full",children:[Object(O.jsx)("span",{className:"text-sm text-gray-600 font-bold mb-1",children:"Start"}),Object(O.jsx)("input",{disabled:this.state.loadingRequest.length>0,onChange:function(t){e.setState({examination_start:t.target.value}),e.setFormError(null),e.isDateRangeValid("EXAMINATION","START",t.target.value)},type:"date",value:this.state.examination_start,className:"input-white border-2 ".concat(null!==this.state.formError&&"examination_period_start"===this.state.formError.element?"border-red-500":"border-gray-500")}),null!==this.state.formError&&"examination_period_start"===this.state.formError.element&&Object(O.jsx)("span",{className:"text-red-600 font-bold text-xs",children:this.state.formError.msg})]}),Object(O.jsxs)("div",{className:"w-full",children:[Object(O.jsx)("span",{className:"text-sm text-gray-600 font-bold mb-1",children:"End"}),Object(O.jsx)("input",{disabled:this.state.loadingRequest.length>0,onChange:function(t){e.setState({examination_end:t.target.value}),e.setFormError(null),e.isDateRangeValid("EXAMINATION","END",t.target.value)},type:"date",value:this.state.examination_end,className:"input-white border-2 ".concat(null!==this.state.formError&&"examination_period_end"===this.state.formError.element?"border-red-500":"border-gray-500")}),null!==this.state.formError&&"examination_period_end"===this.state.formError.element&&Object(O.jsx)("span",{className:"text-red-600 font-bold text-xs",children:this.state.formError.msg})]})]})]}),Object(O.jsxs)("div",{className:"w-full mb-2",children:[Object(O.jsx)("h6",{className:"text-blueGray-400 text-sm mt-3 mb-1 font-bold uppercase",children:"Marks Publication Session period"}),Object(O.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 my-1 gap-2",children:[Object(O.jsxs)("div",{className:"w-full",children:[Object(O.jsx)("span",{className:"text-sm text-gray-600 font-bold mb-1",children:"Start"}),Object(O.jsx)("input",{disabled:this.state.loadingRequest.length>0,onChange:function(t){e.setState({publication_start:t.target.value}),e.setFormError(null),e.isDateRangeValid("PUBLICATION","START",t.target.value)},type:"date",value:this.state.publication_start,className:"input-white border-2 ".concat(null!==this.state.formError&&"publication_period_start"===this.state.formError.element?"border-red-500":"border-gray-500")}),null!==this.state.formError&&"publication_period_start"===this.state.formError.element&&Object(O.jsx)("span",{className:"text-red-600 font-bold text-xs",children:this.state.formError.msg})]}),Object(O.jsxs)("div",{className:"w-full",children:[Object(O.jsx)("span",{className:"text-sm text-gray-600 font-bold mb-1",children:"End"}),Object(O.jsx)("input",{disabled:this.state.loadingRequest.length>0,onChange:function(t){e.setState({publication_end:t.target.value}),e.setFormError(null),e.isDateRangeValid("PUBLICATION","END",t.target.value)},type:"date",value:this.state.publication_end,className:"input-white border-2 ".concat(null!==this.state.formError&&"publication_period_end"===this.state.formError.element?"border-red-500":"border-gray-500")}),null!==this.state.formError&&"publication_period_end"===this.state.formError.element&&Object(O.jsx)("span",{className:"text-red-600 font-bold text-xs",children:this.state.formError.msg})]})]})]}),Object(O.jsxs)("div",{className:"w-full mb-2",children:[Object(O.jsx)("h6",{className:"text-blueGray-400 text-sm mt-3 mb-1 font-bold uppercase",children:"Placement & Transfer Session period"}),Object(O.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 my-1 gap-2",children:[Object(O.jsxs)("div",{className:"w-full",children:[Object(O.jsx)("span",{className:"text-sm text-gray-600 font-bold mb-1",children:"Start"}),Object(O.jsx)("input",{disabled:this.state.loadingRequest.length>0,onChange:function(t){e.setState({placement_start:t.target.value}),e.setFormError(null),e.isDateRangeValid("PLACEMENT","START",t.target.value)},type:"date",value:this.state.placement_start,className:"input-white border-2 ".concat(null!==this.state.formError&&"placement_period_start"===this.state.formError.element?"border-red-500":"border-gray-500")}),null!==this.state.formError&&"placement_period_start"===this.state.formError.element&&Object(O.jsx)("span",{className:"text-red-600 font-bold text-xs",children:this.state.formError.msg})]}),Object(O.jsxs)("div",{className:"w-full",children:[Object(O.jsx)("span",{className:"text-sm text-gray-600 font-bold mb-1",children:"End"}),Object(O.jsx)("input",{disabled:this.state.loadingRequest.length>0,onChange:function(t){e.setState({placement_end:t.target.value}),e.setFormError(null),e.isDateRangeValid("PLACEMENT","END",t.target.value)},type:"date",value:this.state.placement_end,className:"input-white border-2 ".concat(null!==this.state.formError&&"placement_period_end"===this.state.formError.element?"border-red-500":"border-gray-500")}),null!==this.state.formError&&"placement_period_end"===this.state.formError.element&&Object(O.jsx)("span",{className:"text-red-600 font-bold text-xs",children:this.state.formError.msg})]})]})]}),Object(O.jsxs)("div",{className:"flex flex-row justify-between items-center",children:[Object(O.jsx)("button",{disabled:this.state.loadingRequest.length>0,type:"button",className:"btn bg-gray-500 hover:bg-gray-700 text-white",onClick:function(){e.setState({sessionTitle:e.state.thisSession?e.state.thisSession.session_plan_name:"",sessionPeriod:e.state.thisSession?e.state.thisSession.period:"",formError:null}),e.state.thisSession&&e.setPlansForUpdate(e.state.thisSession.plans),!e.state.thisSession&&e.setState({application_start:"",document_start:"",examination_start:"",publication_start:"",placement_start:"",application_end:"",document_end:"",examination_end:"",publication_end:"",placement_end:""})},children:"Cancel"}),Object(O.jsx)("button",{disabled:this.state.loadingRequest.length>0,type:"submit",className:"btn btn-blue text-white ".concat(this.state.loadingRequest.length>0?"animate__animated animate__flash animate__infinite cursor-wait":""),children:this.state.loadingRequest.length>0?"Please wait...":null!==this.state.thisSession?"Update":"Create"})]})]})})}),null!==this.state.activateSession&&Object(O.jsx)(k.b,{modalType:k.a.OTHER,confirmFun:function(){return e.handleSessionActivation(e.state.activateSession)},setModalAction:function(t){return!t&&e.setActivateSession(null)},description:"Do you really want to activate this session? This process will affect application processes!"})]})}}]),s}(r.Component),G=i.a.memo(Object(m.b)((function(e){return{auth:e.auth,sessionPlan:e.sessionPlan}}),{GetPlansTypes:b.c,setSelectedPlanType:b.l,GetAllSessionPlans:b.b,createSessionPlan:b.f,updateSessionPlan:b.n,sessionActivation:b.k,deleteSessionPlan:b.h,PushPopupAlert:j.Kb})(V)),U=function(e){Object(u.a)(s,e);var t=Object(p.a)(s);function s(e){var n;return Object(c.a)(this,s),(n=t.call(this,e)).setLoading=function(e){n.setState({loading:e})},n.setCreateSession=function(e){n.setState({createSession:e})},n.setSessionTitle=function(e){n.setState({sessionTitle:e})},n.setActivateSession=function(e){n.setState({activateSession:e})},n.setFormError=function(e){n.setState({formError:e})},n.componentDidMount=function(){null===n.props.sessionPlan.academicSessions||n.props.sessionPlan.academicSessions.length<=0?n.props.GetAllAcademicSession((function(e,t){n.setLoading(e),!e&&t.length>0&&n.props.PushPopupAlert({title:t,theme:_.a.danger})})):n.setLoading(!1),n.state.createSession||n.setCreateSession(n.props.isCreateDefault)},n.handleSessionActivation=function(){var e=Object(T.a)(A.a.mark((function e(t){var s,a;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=t.is_active?"deactivate":"activate",n.setState({loadingRequest:t._id}),e.prev=2,e.next=5,P.a.patch("".concat(M.a.PLACEMENT,"/postrequestperiod/openorclose/").concat(t._id),{value:!t.is_active});case 5:a=e.sent,n.props.GetAllAcademicSession((function(e,t){!e&&t.length>0&&n.props.PushPopupAlert({title:t,theme:_.a.danger})})),n.props.PushPopupAlert({title:"Session ".concat(s,"d successfully"),theme:_.a.info}),console.log("updateAcademicSession: ",a),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),console.error({error:Object(q.f)(e.t0)}),n.props.PushPopupAlert({title:Object(q.f)(e.t0),theme:_.a.warning});case 15:n.setState({loadingRequest:""});case 16:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t){return e.apply(this,arguments)}}(),n.handleSubmit=function(){var e=Object(T.a)(A.a.mark((function e(t){var s,a;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!Object(L.e)(n.state.sessionTitle)){e.next=3;break}return e.abrupt("return",n.setFormError({element:"title",msg:"Please fill the session plan title"}));case 3:if(console.log("===================================="),console.log({title:n.state.sessionTitle}),console.log("===================================="),n.setState({loadingRequest:n.state.thisSession?n.state.thisSession._id:"true"}),e.prev=7,null===n.state.thisSession){e.next=21;break}return e.next=11,P.a.patch("".concat(M.a.PLACEMENT,"/postrequestperiod/").concat(n.state.thisSession._id),{title:n.state.sessionTitle});case 11:s=e.sent,console.log("===================================="),console.log({updateAcademicSession:s}),console.log("===================================="),n.props.updateAcademicSession(s.data.data),n.props.PushPopupAlert({title:"Academic session updated successfully",theme:_.a.info}),n.setState({formError:null,sessionTitle:"",thisSession:null,createSession:!1}),console.log("updateAcademicSession: ",s),e.next=28;break;case 21:return e.next=23,P.a.post("".concat(M.a.PLACEMENT,"/postrequestperiod"),{title:n.state.sessionTitle});case 23:a=e.sent,n.props.createAcademicSession(a.data),n.props.PushPopupAlert({title:"Academic session created successfully",theme:_.a.success}),n.setState({formError:null,sessionTitle:""}),console.log("createAcademicSessionType: ",a);case 28:e.next=34;break;case 30:e.prev=30,e.t0=e.catch(7),n.props.PushPopupAlert({title:"".concat(Object(q.f)(e.t0),"! Try again"),theme:_.a.danger}),console.error("Err: ",{error:e.t0});case 34:n.setState({loadingRequest:""});case 35:case"end":return e.stop()}}),e,null,[[7,30]])})));return function(t){return e.apply(this,arguments)}}(),n.state={loading:!1,loadingRequest:"",createSession:!1,activateSession:null,thisSession:null,doAction:null,sessionTitle:"",formError:null},n}return Object(d.a)(s,[{key:"render",value:function(){var e=this;return Object(O.jsxs)("div",{className:"my-2",children:[Object(O.jsxs)("div",{className:"flex flex-row justify-between items-center bg-gray-100 py-1",children:[this.state.createSession&&Object(O.jsxs)("div",{className:"flex items-center gap-2",children:[Object(O.jsx)("button",{className:"ml-3 bg-gray-50 hover:bg-blue-100 rounded-full px-1 py-1 focus:outline-none ".concat(this.state.loadingRequest.length>0||"cursor-pointer"," animate__animated animate__fadeIn"),disabled:this.state.loadingRequest.length>0,onClick:function(){e.setState({formError:null,sessionTitle:"",thisSession:null,createSession:!1})},children:Object(O.jsx)(C.f,{className:"w-7 h-7"})}),Object(O.jsx)("div",{className:"font-extrabold text-2xl text-gray-500",children:null!==this.state.thisSession?"Updating ".concat(this.state.thisSession.title," Session"):"Add New Academic Session"})]}),!this.state.createSession&&Object(O.jsx)("div",{className:"text-blue-600 font-extrabold text-xl px-2",children:"Academic Sessions"}),!1===this.state.loading&&!this.state.createSession&&Object(O.jsx)("div",{onClick:function(){return e.setCreateSession(!0)},className:"btn bg-blue-600 text-white cursor-pointer hover:bg-blue-800",children:"Add new"})]}),!this.state.createSession&&Object(O.jsx)("div",{className:"flex flex-col my-2",children:Object(O.jsxs)("table",{className:"w-full shadow",id:"session_content",children:[Object(O.jsx)("thead",{className:"bg-white border-b-2 border-gray-300 text-gray-600 font-bold text-sm",children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{className:"px-2 py-2",children:"#"}),Object(O.jsx)("td",{className:"px-2 py-2",children:"Session title"}),Object(O.jsx)("td",{className:"px-2 py-2",children:"Status"}),Object(O.jsx)("td",{className:"px-2 py-2"})]})}),Object(O.jsxs)("tbody",{children:[null===this.props.sessionPlan.academicSessions&&Object(O.jsx)(R.a,{cols:4}),null!==this.props.sessionPlan.academicSessions&&!this.state.loading&&this.props.sessionPlan.academicSessions.length<=0&&Object(O.jsx)("tr",{children:Object(O.jsx)("td",{colSpan:4,className:"px-2 py-2",children:Object(O.jsx)(D.b,{theme:D.a.Dark,value:"No academic session found!",component:Object(O.jsx)("div",{className:"w-full mt-2 flex flex-row items-center justify-center",children:Object(O.jsx)("ul",{className:"text-base py-2 text-blue-600 font-bold flex flex-row gap-2",children:Object(O.jsx)("li",{onClick:function(){return e.setCreateSession(!0)},className:"underline text-blue-600 cursor-pointer",children:"Create new session"})})})})})}),null!==this.props.sessionPlan.academicSessions&&!this.state.loading&&this.props.sessionPlan.academicSessions.length>0&&this.props.sessionPlan.academicSessions.map((function(t,s){return Object(O.jsx)(r.Fragment,{children:Object(O.jsxs)("tr",{className:"border-b border-gray-200 hover:bg-gray-100 group",children:[Object(O.jsx)("td",{className:"p-3 text-left whitespace-nowrap",children:s+1}),Object(O.jsx)("td",{className:"p-3 text-left",children:Object(O.jsx)("span",{className:"text-lg",children:Object(L.a)(t.title)})}),Object(O.jsx)("td",{children:t.is_active?Object(O.jsx)("span",{className:"px-2 py-1 font-semibold text-green-700",children:"Active"}):Object(O.jsx)("span",{className:"px-2 py-1 font-semibold text-red-700",children:"Inactive"})}),Object(O.jsx)("td",{children:Object(O.jsxs)("div",{className:"flex items-center justify-center gap-1",children:[Object(O.jsxs)("div",{className:"relative ".concat(e.state.loadingRequest.length>0||t.is_active?"cursor-not-allowed":"cursor-pointer"),title:t.is_active?"Activate another session to close this one!":"Activation of a session",onClick:function(){return e.state.loadingRequest.length<=0&&!t.is_active&&e.setActivateSession(t)},children:[Object(O.jsx)("span",{className:"block w-14 h-8 bg-gray-100 rounded-full shadow-inner"}),Object(O.jsx)("span",{className:"absolute block w-6 h-6 mt-1 ml-1 rounded-full shadow inset-y-0 left-0 focus-within:shadow-outline transition-transform duration-500 ease-in-out ".concat(t.is_active?"bg-green-500 transform translate-x-full":"bg-red-500")})]}),e.state.loadingRequest===t._id&&e.state.doAction&&"ACTIVATED"===e.state.doAction&&Object(O.jsx)(I.c,{className:"animate__animated animate__rotateIn animate__infinite"})]})}),Object(O.jsx)("td",{className:"px-5 text-center",children:Object(O.jsx)("div",{className:"flex flex-row items-center gap-2 justify-end",children:Object(O.jsx)("div",{onClick:function(){e.state.loadingRequest.length<=0&&e.setState({thisSession:t,createSession:!0,sessionTitle:t.title})},className:"bg-gray-50 group-hover:bg-blue-200 rounded-full px-1 py-1 ".concat(e.state.loadingRequest.length>0?"cursor-not-allowed":"cursor-pointer"),children:Object(O.jsx)(C.B,{className:"text-3xl text-blue-700"})})})})]})},s+t._id)}))]})]})}),this.state.createSession&&Object(O.jsx)("section",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4",children:Object(O.jsx)("div",{className:"col-span-1 sm:col-span-4 flex flex-col mx-4 my-6",children:Object(O.jsxs)("form",{onSubmit:this.handleSubmit,className:"-mt-2",children:[Object(O.jsxs)("div",{className:"flex flex-col mb-2",children:[Object(O.jsx)("span",{className:"text-sm text-gray-600 font-bold mb-1",children:"Session title"}),Object(O.jsx)("input",{disabled:this.state.loadingRequest.length>0,onChange:function(t){e.setSessionTitle(t.target.value),e.setFormError(null)},type:"text",value:this.state.sessionTitle,className:"input-white border-2 ".concat(null!==this.state.formError&&"title"===this.state.formError.element?"border-red-500":"border-gray-500")}),null!==this.state.formError&&"title"===this.state.formError.element&&Object(O.jsx)("span",{className:"text-red-600 font-bold text-xs",children:this.state.formError.msg})]}),Object(O.jsxs)("div",{className:"flex flex-row justify-between items-center",children:[Object(O.jsx)("button",{disabled:this.state.loadingRequest.length>0,type:"button",className:"btn bg-gray-500 hover:bg-gray-700 text-white",onClick:function(){e.setState({formError:null,sessionTitle:e.state.thisSession?e.state.thisSession.title:""})},children:"Cancel"}),Object(O.jsx)("button",{disabled:this.state.loadingRequest.length>0,type:"submit",className:"btn btn-blue text-white ".concat(this.state.loadingRequest.length>0?"animate__animated animate__flash animate__infinite cursor-wait":""),children:this.state.loadingRequest.length>0?"Please wait...":null!==this.state.thisSession?"Update":"Create"})]})]})})}),null!==this.state.activateSession&&Object(O.jsx)(k.b,{modalType:k.a.OTHER,confirmFun:function(){return e.handleSessionActivation(e.state.activateSession)},setModalAction:function(t){return!t&&e.setActivateSession(null)},description:"Do you really want to activate this session? This process will affect post requests!"})]})}}]),s}(r.Component),B=i.a.memo(Object(m.b)((function(e){return{auth:e.auth,sessionPlan:e.sessionPlan}}),{GetPlansTypes:b.c,setSelectedPlanType:b.l,GetAllAcademicSession:b.a,createAcademicSession:b.e,updateAcademicSession:b.m,academicSessionActivation:b.d,deleteAcademicSession:b.g,PushPopupAlert:j.Kb})(U));!function(e){e.applicationSession="Application Session",e.academicSession="Academic Session",e.calenderView="Calendar View"}(n||(n={}));var K=function(){var e=Object(l.g)().setting_type,t=Object(r.useState)("calendar"===e?n.calenderView:"academic"===e?n.academicSession:n.applicationSession),s=Object(a.a)(t,2),i=s[0],c=s[1];return Object(O.jsxs)("div",{className:"",children:[Object(O.jsx)("div",{className:"mt-3 rounded flex flex-row justify-between items-center",children:Object(O.jsxs)("div",{className:"flex flex-row items-center gap-3",children:[Object(O.jsx)(o.m,{className:"text-6xl text-blue-600"}),Object(O.jsx)("div",{className:"flex flex-col",children:Object(O.jsx)("span",{className:"text-blue-600 text-2xl font-bold",children:"Session settings"})})]})}),Object(O.jsx)("div",{className:"mt-3 mb-6 flex-col",children:Object(O.jsxs)("div",{className:"bg-white w-full border border-white rounded",children:[Object(O.jsx)("div",{className:"flex flex-row items-center",children:Object.values(n).map((function(e,t){return Object(O.jsx)("div",{onClick:function(){return c(e)},className:"animate__animated ".concat(i===e?"bg-blue-100 border-blue-600 text-blue-600 animate__zoomIn":"bg-white border-white text-gray-600"," hover:bg-blue-100 px-4 py-2 cursor-pointer font-bold border-b-4 hover:border-blue-600 hover:text-blue-600 rounded-t mt-1 mx-1"),children:e},t)}))}),Object(O.jsxs)("div",{className:"=rounded mx-1 mb-1",children:[i===n.applicationSession&&Object(O.jsx)(G,{isCreateDefault:"create-session"===e}),i===n.academicSession&&Object(O.jsx)(B,{isCreateDefault:"create-session"===e}),i===n.calenderView&&Object(O.jsx)(v,{})]})]})})]})}},644:function(e,t,s){"use strict";s.d(t,"e",(function(){return n})),s.d(t,"d",(function(){return a})),s.d(t,"b",(function(){return r})),s.d(t,"c",(function(){return i})),s.d(t,"g",(function(){return o})),s.d(t,"f",(function(){return l})),s.d(t,"a",(function(){return c}));var n=function(e){return null===e||null!==e.match(/^ *$/)},a=function(e,t){return e.filter((function(e){return e.system_user_role_id===t}))[0]},r=function(e,t){return e.find((function(e){return e.education_institute_id===t}))},i=function(e,t){return e.find((function(e){return e.position_id===t}))},o=function(e){var t=e-Math.floor(e);return("0"+(e-=t)).slice(-2)+t.toString().substr(1)},l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,s=new Array(t+1).join("0");return(s+e).slice(-t)},c=function(e){return e.charAt(0).toUpperCase()+e.slice(1)}},650:function(e,t,s){"use strict";s.d(t,"c",(function(){return p})),s.d(t,"l",(function(){return m})),s.d(t,"j",(function(){return b})),s.d(t,"b",(function(){return h})),s.d(t,"f",(function(){return x})),s.d(t,"n",(function(){return f})),s.d(t,"k",(function(){return j})),s.d(t,"h",(function(){return _})),s.d(t,"e",(function(){return g})),s.d(t,"a",(function(){return O})),s.d(t,"m",(function(){return y})),s.d(t,"d",(function(){return S})),s.d(t,"g",(function(){return N})),s.d(t,"i",(function(){return v}));var n=s(4),a=s.n(n),r=s(7),i=s(8),o=s.n(i),l=s(6),c=s(9),d=s(15),u=s(13),p=function(e){return e(!0,""),function(){var t=Object(r.a)(a.a.mark((function t(s){var n,r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,Object(d.b)(),t.next=4,o.a.get("".concat(c.a.CLAIMING,"/session-type"));case 4:n=t.sent,console.log({GET_PLANS_TYPES:n.data}),r=[],200===n.status&&null!==n.data&&n.data.length>0&&(r=n.data),s({type:l.a.GET_PLANS_TYPES,payload:r}),e(!1,""),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(0),console.error({error:Object(u.a)(t.t0)}),e(!1,Object(u.a)(t.t0));case 16:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}()},m=function(e){return console.log({thisType:e}),{type:l.a.SELECT_PLAN_TYPE,payload:e}},b=function(e){return e(!0,""),function(){var t=Object(r.a)(a.a.mark((function t(s){var n,r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,Object(d.b)(),t.next=4,o.a.get("".concat(c.a.CLAIMING,"/session/active/"));case 4:n=t.sent,console.log({GET_ACTIVE_SESSION_PLANS:n.data}),r=void 0,n.data&&void 0!==n.data.is_active&&(r=n.data),console.log({session_plan:n.data}),s({type:l.a.GET_ACTIVE_SESSION_PLANS,payload:r||"none"}),e(!1,"",r||"none"),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(0),console.error({error:Object(u.a)(t.t0)}),e(!1,Object(u.a)(t.t0));case 17:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e){return t.apply(this,arguments)}}()},h=function(e){return e(!0,""),function(){var t=Object(r.a)(a.a.mark((function t(s){var n,r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,Object(d.b)(),t.next=4,o.a.get("".concat(c.a.CLAIMING,"/session/"));case 4:n=t.sent,console.log({GET_ALL_SESSION_PLANS:n.data}),r=[],200===n.status&&null!==n.data&&n.data.length>0&&(r=n.data),s({type:l.a.GET_ALL_SESSION_PLANS,payload:r}),e(!1,"",r),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(0),console.error({error:Object(u.a)(t.t0)}),e(!1,Object(u.a)(t.t0));case 16:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}()},x=function(e){return{type:l.a.CREATE_SESSION_PLAN,payload:e}},f=function(e){return{type:l.a.UPDATE_SESSION_PLAN,payload:e}},j=function(e){return{type:l.a.SESSION_ACTIVATION,payload:e}},_=function(e){return{type:l.a.DELETE_SESSION_PLAN,payload:e}},g=function(e){return{type:l.a.CREATE_ACADEMIC_SESSION,payload:e}},O=function(e){return e(!0,""),function(){var t=Object(r.a)(a.a.mark((function t(s){var n,r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,Object(d.b)(),t.next=4,o.a.get("".concat(c.a.PLACEMENT,"/postrequestperiod/"));case 4:n=t.sent,console.log({GET_ALL_SESSION_PLANS:n.data}),r=[],200===n.status&&null!==n.data&&n.data.length>0&&(r=n.data),console.log("===================================="),console.log({GetAllAcademicSession:n}),console.log("===================================="),s({type:l.a.GET_ALL_ACADEMIC_SESSION,payload:r}),e(!1,"",r),t.next=19;break;case 15:t.prev=15,t.t0=t.catch(0),console.error({error:Object(u.a)(t.t0)}),e(!1,Object(u.a)(t.t0));case 19:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(e){return t.apply(this,arguments)}}()},y=function(e){return{type:l.a.UPDATE_ACADEMIC_SESSION,payload:e}},S=function(e){return{type:l.a.ACADEMIC_SESSION_ACTIVATION,payload:e}},N=function(e){return{type:l.a.DELETE_ACADEMIC_SESSION,payload:e}},v=function(e){return e(!0,""),function(){var t=Object(r.a)(a.a.mark((function t(s){var n,r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,Object(d.b)(),t.next=4,o.a.get("".concat(c.a.PLACEMENT,"/postrequestperiod/one"));case 4:n=t.sent,console.log({GET_ACTIVE_ACADEMIC_SESSION:n.data}),r=void 0,n.data&&(r=n.data),console.log({session_plan:n.data}),s({type:l.a.GET_ACTIVE_ACADEMIC_SESSION,payload:r||"none"}),e(!1,"",r||"none"),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(0),console.error({error:Object(u.a)(t.t0)}),e(!1,Object(u.a)(t.t0));case 17:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e){return t.apply(this,arguments)}}()}},658:function(e,t,s){"use strict";s(5);var n=s(1);t.a=function(e){var t=function(){for(var t=[],s=0;s<e.cols;s++)t.push(s);return t.map((function(e){return Object(n.jsx)("td",{className:"p-3 text-center whitespace-nowrap",children:Object(n.jsx)("div",{className:"w-full h-4 rounded bg-gray-200 animate__animated animate__pulse animate__delay-5s animate__infinite"})},e)}))};return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("tr",{className:"border-b border-gray-200",children:t()},228),Object(n.jsx)("tr",{className:"border-b border-gray-200",children:t()},22648),Object(n.jsx)("tr",{className:"border-b border-gray-200",children:t()},229768)]})}},689:function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));var n,a=s(654),r=s(734),i=s(10),o=s(1);!function(e){e.RESTORE_DELETE="restore_delete",e.DELETE="delete",e.INFO="info",e.OTHER="other"}(n||(n={}));t.b=function(e){return Object(o.jsxs)("div",{className:"min-w-screen h-screen animated fadeIn faster  fixed  left-0 top-0 flex justify-center items-center inset-0 z-50 outline-none focus:outline-none bg-no-repeat bg-center bg-cover",id:"modal-id",children:[Object(o.jsx)("div",{className:"absolute bg-black opacity-80 inset-0 z-0"}),Object(o.jsx)("div",{className:"w-full  max-w-lg p-5 relative mx-auto my-auto rounded-xl shadow-lg bg-white animate__animated animate__zoomIn animate__faster",children:Object(o.jsxs)("div",{className:"",children:[Object(o.jsxs)("div",{className:"text-center p-5 flex-auto justify-center",children:[e.modalType===n.DELETE||e.modalType===n.RESTORE_DELETE&&Object(o.jsx)(a.a,{className:"w-4 h-4 -m-1 flex items-center text-red-500 mx-auto"}),e.modalType===n.DELETE?Object(o.jsx)(i.A,{className:"w-16 h-16 flex items-center text-red-500 mx-auto"}):e.modalType===n.RESTORE_DELETE?Object(o.jsx)(i.Eb,{className:"w-16 h-16 flex items-center text-yellow-800 mx-auto"}):e.modalType===n.INFO?Object(o.jsx)(r.a,{className:"w-16 h-16 flex items-center text-blue-500 mx-auto"}):Object(o.jsx)(r.a,{className:"w-16 h-16 flex items-center text-yellow-500 mx-auto"}),Object(o.jsx)("h2",{className:"text-xl font-bold py-4 ",children:"Are you sure?"}),Object(o.jsx)("p",{className:"text-sm text-gray-500 px-8",children:e.description})]}),Object(o.jsxs)("div",{className:"p-3  mt-2 text-center space-x-4 md:block",children:[Object(o.jsx)("button",{className:"mb-2 md:mb-0 bg-white px-5 py-2 text-sm shadow-sm font-medium tracking-wider border text-gray-600 rounded-full hover:shadow-lg hover:bg-gray-100",onClick:function(){return e.setModalAction(!1)},children:"Cancel"}),Object(o.jsx)("button",{className:"mb-2 md:mb-0 border px-5 py-2 text-sm shadow-sm font-medium tracking-wider text-white rounded-full hover:shadow-lg ".concat(e.modalType===n.DELETE?"border-red-500 hover:bg-red-600 bg-red-500":e.modalType===n.RESTORE_DELETE?"border-yellow-700 hover:bg-yellow-800 bg-yellow-700":e.modalType===n.INFO?"border-blue-500 hover:bg-blue-600 bg-blue-500":"border-yellow-500 hover:bg-yellow-600 bg-yellow-500"),onClick:function(){e.confirmFun(),e.setModalAction(!1)},children:"Confirm"})]})]})})]})}},762:function(e,t,s){"use strict";s.d(t,"b",(function(){return E}));var n=s(4),a=s.n(n),r=s(7),i=s(24),o=s(23),l=s(26),c=s(25),d=s(8),u=s.n(d),p=s(5),m=s.n(p),b=s(111),h=s(21),x=s(3),f=s(650),j=s(16),_=s(39),g=s(644),O=s(9),y=s(43),S=s(1),N=function(e){var t=new Date;return new Date(e.end_date).getTime()>=t.getTime()},v=function(e){return j.k.find((function(t){return t.type_key===e}))},E=function(e,t){if(e.is_active){var s=new Date,n=new Date(t.end_date),a=new Date(t.start_date);if(n.getTime()>=s.getTime()&&a.getTime()<=s.getTime()&&t.type_status!==j.j.CLOSED)return"OPEN";if(a.getTime()>s.getTime()&&t.type_status!==j.j.CLOSED)return"WAITING"}return"CLOSED"},A=function(e){Object(l.a)(s,e);var t=Object(c.a)(s);function s(e){var n;return Object(i.a)(this,s),(n=t.call(this,e)).handlePlanActivation=function(){var e=Object(r.a)(a.a.mark((function e(t,s){var r,i,o,l,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.is_active?"close":"open",window.confirm("Are you sure you want to ".concat(r," this plan?"))){e.next=3;break}return e.abrupt("return",!0);case 3:for(o in N(s)||n.props.PushPopupAlert({title:"Opening/Closing plan which has been expired is not allowed!",theme:_.a.warning}),i={session_plan_name:t.session_plan_name,period:t.period,is_active:t.is_active,plans:[],createdAt:t.createdAt,updatedAt:t.updatedAt,session_plan_id:t.session_plan_id},t.plans)Object.prototype.hasOwnProperty.call(t.plans,o)&&(l=t.plans[o],s.type_key===l.type_key?s.type_status===j.j.OPEN?i.plans.push({type_id:s.type_id,type_title:s.type_title,type_key:s.type_key,type_status:j.j.CLOSED,start_date:s.start_date,end_date:s.end_date,allowed_claim_level:s.allowed_claim_level,_id:s._id,history:s.history}):i.plans.push({type_id:s.type_id,type_title:s.type_title,type_key:s.type_key,type_status:j.j.OPEN,start_date:s.start_date,end_date:s.end_date,allowed_claim_level:s.allowed_claim_level,_id:s._id,history:s.history}):i.plans.push(l));return console.log("===================================="),console.log({newData:i}),console.log("===================================="),n.setState({loadingRequest:s.type_key}),e.prev=10,e.next=13,u.a.put("".concat(O.a.CLAIMING,"/session/").concat(t.session_plan_id),i);case 13:c=e.sent,n.props.updateSessionPlan(c.data),n.props.setViewThisSession(c.data),n.props.PushPopupAlert({title:"Session ".concat(r,"d successfully"),theme:_.a.info}),n.setState({loadingRequest:""}),console.log("updateSessionPlan: ",c),e.next=25;break;case 21:e.prev=21,e.t0=e.catch(10),console.error({error:Object(y.f)(e.t0)}),n.props.PushPopupAlert({title:Object(y.f)(e.t0),theme:_.a.warning});case 25:case"end":return e.stop()}}),e,null,[[10,21]])})));return function(t,s){return e.apply(this,arguments)}}(),n.state={loadingRequest:""},n}return Object(o.a)(s,[{key:"render",value:function(){var e=this;return Object(S.jsxs)("table",{className:"w-full bg-white shadow p-5",id:"session_content",children:[Object(S.jsx)("thead",{className:"bg-white border-b-2 border-gray-300 text-gray-600 font-bold text-sm",children:Object(S.jsxs)("tr",{children:[Object(S.jsx)("td",{className:"p-2",children:"#"}),Object(S.jsx)("td",{className:"p-2",children:"Plan Type"}),Object(S.jsx)("td",{className:"p-2",children:"Start Date"}),Object(S.jsx)("td",{className:"p-2",children:"End date"}),this.props.viewThisSession.is_active&&Object(S.jsx)("td",{className:"p-2",colSpan:2,children:"Status"})]})}),Object(S.jsx)("tbody",{children:this.props.viewThisSession.plans.map((function(t,s){return Object(S.jsxs)("tr",{className:"border-b border-gray-200 hover:bg-gray-100",children:[Object(S.jsx)("td",{className:"p-2 text-left whitespace-nowrap",children:s+1}),Object(S.jsx)("td",{className:"p-2 text-left",children:Object(S.jsx)("span",{className:"text-lg",children:v(t.type_key)&&Object(g.a)(v(t.type_key).type_title)})}),Object(S.jsx)("td",{className:"p-2 text-left",children:Object(y.a)(t.start_date)}),Object(S.jsx)("td",{className:"p-2 text-left",children:Object(y.a)(t.end_date)}),e.props.viewThisSession.is_active&&Object(S.jsx)("td",{children:"OPEN"===E(e.props.viewThisSession,t)?Object(S.jsx)("span",{className:"px-2 py-1 font-semibold text-green-700",children:"Open"}):"WAITING"===E(e.props.viewThisSession,t)?Object(S.jsx)("span",{className:"px-2 py-1 font-semibold text-gray-700",children:"Waiting"}):Object(S.jsx)("span",{className:"px-2 py-1 font-semibold text-red-700",children:"Closed"})}),e.props.viewThisSession.is_active&&Object(S.jsx)("td",{children:N(t)&&Object(S.jsxs)("div",{className:"flex items-center justify-center gap-1",children:[Object(S.jsxs)("div",{className:"relative ".concat(e.state.loadingRequest.length>0?"cursor-not-allowed":"cursor-pointer"),title:t.type_status===j.j.OPEN?"Deactivating session":"Activating session",onClick:function(){return e.state.loadingRequest.length<=0&&e.handlePlanActivation(e.props.viewThisSession,t)},children:[Object(S.jsx)("span",{className:"block w-14 h-8 bg-gray-100 rounded-full shadow-inner"}),Object(S.jsx)("span",{className:"absolute block w-6 h-6 mt-1 ml-1 rounded-full shadow inset-y-0 left-0 focus-within:shadow-outline transition-transform duration-500 ease-in-out ".concat(t.type_status===j.j.CLOSED?"bg-red-500":"bg-green-500 transform translate-x-full")})]}),e.state.loadingRequest===t.type_key&&Object(S.jsx)(b.c,{className:"animate__animated animate__rotateIn animate__infinite"})]})})]},s+t._id)}))})]})}}]),s}(p.Component);t.a=m.a.memo(Object(h.b)(null,{updateSessionPlan:f.n,PushPopupAlert:x.Kb})(A))}}]);
//# sourceMappingURL=46.70e25afa.chunk.js.map