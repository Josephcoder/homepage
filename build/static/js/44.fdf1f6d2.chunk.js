/*! For license information please see 44.fdf1f6d2.chunk.js.LICENSE.txt */
(this["webpackJsonpreact-redux-typescript-advance"]=this["webpackJsonpreact-redux-typescript-advance"]||[]).push([[44],{784:function(e,t,s){"use strict";s.r(t),s.d(t,"ProctoringCenter",(function(){return z}));var a,r=s(18),o=s(19),i=s(21),n=s(20),c=s(66),d=s.n(c),l=s(4),m=s.n(l),p=s(191),x=s(8),b=s(17),u=s(3),j=s(49),h=s(2),_=s(24),g=s(88),O=s(1),v=function(e){var t=e.close,s=e.active_candidate,a=e.room,r=e.exam_start,o=e.leaveRoomHandler,i=e.deleteRoomHandler,n=e.exam_rules,c=e.addMinutesToRoom,d=e.exam_done;return Object(O.jsxs)(l.Fragment,{children:[Object(O.jsx)("div",{className:"fixed bg-black bg-opacity-10  top-0 bottom-0 right-0 left-0 animate__animated animate__fadeIn",onClick:function(){return t(!1)}}),Object(O.jsxs)("div",{className:"fixed w-80 z-50 shadow-lg bg-white rounded top-16 mt-2 right-2 animate__animated animate__zoomIn animate__faster",children:[Object(O.jsxs)("div",{className:"flex items-center border-b",children:[Object(O.jsx)("div",{className:"flex-1 pl-2 text-xl font-bold text-gray-400",children:Object(O.jsx)("h4",{children:"Room details"})}),Object(O.jsx)("div",{className:"",children:Object(O.jsx)("button",{onClick:function(){return t(!1)},className:"p-2 hover:bg-red-700 hover:text-white rounded text-2xl",children:Object(O.jsx)(x.y,{})})})]}),Object(O.jsxs)("div",{className:"p-2 ",children:[Object(O.jsx)("div",{className:"border-separate p-2",children:[{title:"Province",value:a.province_name},{title:"District",value:a.district_name},{title:"Center name",value:a.center_name},{title:"Group",value:a.room_number},{title:"Joined candidates",value:s}].map((function(e,t){var s=e.title,a=e.value;return Object(O.jsxs)("div",{className:"flex",children:[Object(O.jsxs)("span",{className:"text-gray-500",children:[s,": "]}),Object(O.jsxs)("b",{className:"text-right inline-block",children:[" ",a]})]},t)}))}),Object(O.jsxs)("div",{className:"border-separate px-2 pt-2 mt-2 bg-gray-50 border rounded",children:[Object(O.jsx)("h2",{className:"text-xl font-bold border-b",children:"Exam rules"}),[{title:"Leave the browser",value:n.allow_to_leave_browser},{title:"Copy contents",value:n.copy_enabled},{title:"Paste contents",value:n.paste_enabled},{title:"Right click",value:n.right_click_enabled},{title:"Refresh browser",value:n.stop_candidate_when_comeback}].map((function(e,t){var s=e.title,a=e.value;return Object(O.jsxs)("div",{className:"flex items-center border-b p-1",children:[Object(O.jsx)("div",{className:"flex-1 text-sm",children:Object(O.jsxs)("span",{className:"",children:[s,": "]})}),Object(O.jsxs)("div",{className:"text-right inline-block",children:[" ",!0===a?Object(O.jsx)("span",{className:"p-0.5 px-1 text-xs rounded bg-green-100 text-green-700",children:"Enabled"}):Object(O.jsx)("span",{className:"p-0.5 px-1 text-xs rounded bg-red-200 text-red-700",children:"Disabled"})]})]},t)}))]}),Object(O.jsxs)("div",{className:"p-2 flex",children:[Object(O.jsxs)("button",{onClick:function(){return o()},className:"btn bg-red-700 hover:bg-red-800 text-white w-full mr-2",title:"Leave room",children:[Object(O.jsx)(x.cb,{className:"inline-block"})," Leave"]}),!1===r&&s<=1&&Object(O.jsxs)("button",{onClick:function(){return i()},className:"btn bg-gray-500 hover:bg-red-500 text-white w-full",title:"Delete room",children:[Object(O.jsx)(x.C,{className:"inline-block"})," Delete"]}),(!0===r||!0===d)&&Object(O.jsxs)("button",{onClick:function(){return c()},className:"btn bg-yellow-700 hover:bg-yellow-600 text-white w-full",title:"Add minutes to the room",children:[Object(O.jsx)(x.gb,{className:"inline-block"})," Add minutes"]})]})]})]})," "]})},f=function(e){var t=e.course_title,s=e.post_title,a=e.duration,r=e.started_at,o=e.exam_start,i=e.startExamHandler,n=e.stopExamHandler,c=e.focus_mode,m=e.focusToggle,p=e.leaveRoom,b=e.room,u=e.active_candidate,j=e.deleteRoom,h=e.ExamDone,f=e.exam_rules,N=e.exam_done,y=e.addMinutesToRoom,C=Object(l.useState)(!1),w=Object(_.a)(C,2),E=w[0],S=w[1];return Object(O.jsxs)(l.Fragment,{children:[Object(O.jsxs)("div",{className:"".concat(!0===c?"border-blue-500 border-opacity-30 text-white proctoring-evaluator-navigation":"bg-white rounded-t-sm  rounded-md"," py-2 px-3 border-b z-50 grid grid-flow-row md:grid-cols-1 lg:grid-cols-2 transition-all ease-in-out"),children:[Object(O.jsxs)("div",{className:"flex",children:[Object(O.jsx)("button",{onClick:function(){return m()},className:"px-2 ".concat(!0===c?"bg-blue-900 hover:bg-blue-500 ":"bg-blue-100 hover:bg-blue-500 "," mr-2  rounded-md  hover:text-white"),children:!0===c?Object(O.jsxs)(l.Fragment,{children:[Object(O.jsx)(x.O,{className:"text-3xl mx-auto -mb-2"}),Object(O.jsx)("span",{className:"text-xs inline-block pt-1",children:"Un-Focus"})]}):Object(O.jsxs)(l.Fragment,{children:[Object(O.jsx)(x.N,{className:"text-3xl mx-auto -mb-2"}),Object(O.jsx)("span",{className:"text-xs inline-block pt-1",children:"Focus"})]})}),Object(O.jsx)("div",{className:"flex items-center",children:Object(O.jsxs)("div",{className:"",children:[Object(O.jsx)("label",{htmlFor:"",className:"".concat(!0===c?"text-gray-200":""," text-sm m-0"),children:s}),Object(O.jsx)("h3",{className:"text-white- text-lg -mt-2 font-bold",children:t})]})})]}),Object(O.jsx)("div",{className:"text-red lg:pt-0 sm:pt-3 text-right md:text-left lg:text-right",children:Object(O.jsxs)("div",{className:"grid grid-cols-5 gap-4 text-left",children:[Object(O.jsx)("div",{children:!0===o&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("label",{className:"text-gray-400 text-sm",children:"Duration"}),Object(O.jsxs)("h2",{className:"text-xl font-bold",children:[a,"M"]})]})}),Object(O.jsx)("div",{children:!0===o&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("label",{className:"text-gray-400 text-sm",children:"Started at:"}),!0===o&&Object(O.jsx)("h2",{className:"text-xl font-bold",children:d()(r).format("LT")})]})}),Object(O.jsx)("div",{className:"text-3xl -mt-3 ",children:!0===o&&null!==r&&""!==r&&Object(O.jsx)(g.a,{start_time:r,duration_min:a,timeout:function(){return h(!0)},returnString:!1,labels:!0})}),Object(O.jsx)("div",{className:"flex items-center pl-2",children:Object(O.jsx)("button",{onClick:function(){return S(!0)},className:"btn bg-gray-100 text-gray-900 w-full hover:bg-gray-500 hover:text-white",title:"Room details",children:"Room"})}),Object(O.jsx)("div",{className:"flex items-center",children:!1===o?Object(O.jsx)("button",{onClick:function(){return i()},className:"btn bg-green-500 text-white w-full",title:"Start Exam",children:"Start"}):Object(O.jsx)("button",{onClick:function(){return n()},className:"btn bg-red-600 text-white w-full",title:"stop Exam",children:"Stop"})})]})})]}),E&&Object(O.jsx)(v,{close:S,active_candidate:u,room:b,exam_start:o,leaveRoomHandler:p,deleteRoomHandler:j,exam_rules:f,addMinutesToRoom:function(){y(),S(!1)},exam_done:N})]})},N=function(e){var t=e.focus_mode,s=e.candidates,a=s.length,r=s.filter((function(e){return!0===e.active})).length,o=s.filter((function(e){return!0===e.done})).length,i=s.filter((function(e){return!1===e.done&&!0===e.active&&!1===e.stopped&&!1===e.removed})).length,n=s.filter((function(e){return!0===e.removed})).length,c=s.filter((function(e){return!0===e.stopped&&!1===e.done})).length,d=s.filter((function(e){return!1===e.active&&!1===e.done&&!0===e.joined})).length,l=s.filter((function(e){return!1===e.joined})).length;return Object(O.jsx)("div",{className:"grid grid-cols-4 gap-2 p-3 border-separate ".concat(!0===t?"bg-blue-900 text-gray-300":"bg-white  shadow-lg border "," rounded-md my-2 text-center w-90"),children:[{title:"Total",label:"Total candidates",value:a},{title:"Active",label:"Active candidate(s)",value:r},{title:"Done",label:"Candidate(s) who done exam",value:o},{title:"Left",label:"Candidate(s) who left unfinished",value:d},{title:"Removed",label:"Removed candidate(s)",value:n},{title:"Stopped",label:"Stopped candidate(s)",value:c},{title:"Remain",label:"Remain candidate(s)",value:i},{title:"Non Joined",label:"Non joined exam(s)",value:l}].map((function(e,t){var s=e.title,a=e.label,r=e.value;return Object(O.jsxs)("div",{title:a,className:"border rounded-md py-1",children:[Object(O.jsx)("h1",{className:"text-2xl font-bold -mb-1 p-0 ",children:r}),Object(O.jsx)("label",{htmlFor:"",className:"text-sm -mt-2",children:s})]},t)}))})},y=function(e){var t=e.events,s=(e.clickOpen,e.clickHandler,e.candidates),a=e.focus_mode,r=e.loading,o=Object(l.useState)(""),i=Object(_.a)(o,2),n=i[0],c=i[1];return Object(O.jsxs)("div",{className:"mt-2 p-2 ".concat(!0===a?"bg-gray-900 text-white":"bg-gray-50 shadow-sm border"," rounded-md "),children:[Object(O.jsx)("h1",{className:"text-xl",children:"Events"}),!0===r?Object(O.jsx)("div",{className:"p-2",children:Object(O.jsx)("h4",{className:"block animate__animated animate__fadeIn animate__infinite p-3 text-center",children:"Loading events..."})}):Object(O.jsxs)("table",{className:"w-full text-left",children:[Object(O.jsx)("thead",{className:"text-sm text-gray-500",children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{children:"#"}),Object(O.jsx)("th",{children:"username"}),Object(O.jsx)("th",{children:"Event type"}),Object(O.jsx)("th",{children:"Time"})]})}),Object(O.jsx)("tbody",{children:0===t.length?Object(O.jsx)("tr",{children:Object(O.jsxs)("td",{className:"p-3 py-8 text-center",colSpan:4,children:[Object(O.jsx)("h2",{className:"font-bold text-2xl",children:"No events found"}),Object(O.jsx)("h2",{className:"",children:"No event has been committed yet"})]})}):t.map((function(e,t){var a=s.find((function(t){return t.user_id===e.user_id}));return Object(O.jsx)(l.Fragment,{children:n===e.event_id?Object(O.jsx)("tr",{children:Object(O.jsx)("td",{colSpan:4,className:"animate__animated animate__zoomIn animate__faster",children:Object(O.jsxs)("div",{className:"overflow-hidden my-1 rounded border bg-blue-900 bg-opacity-30 border-blue-500",children:[Object(O.jsxs)("div",{className:"px-3  flex items-center bg-blue-900 bg-opacity-30",children:[Object(O.jsxs)("h2",{className:"flex-1 m-0 text-xl py-2 opacity-70",children:["Event ",Object(O.jsx)("b",{children:t+1})," details"]}),Object(O.jsx)("button",{onClick:function(){return c("")},className:"hover:bg-red-600 text-2xl p-1.5 rounded-md",children:Object(O.jsx)(x.y,{})})]}),Object(O.jsxs)("div",{className:"p-2",children:[Object(O.jsxs)("p",{children:[Object(O.jsx)("span",{className:"opacity-70",children:"Event type: "}),Object(O.jsx)("b",{children:e.event_type_id})]}),Object(O.jsxs)("p",{children:[Object(O.jsx)("span",{className:"opacity-70",children:"Time: "}),Object(O.jsx)("b",{children:e.createdAt})]}),Object(O.jsxs)("p",{className:"p-1 m-1 bg-blue-200 bg-opacity-20 px-2 rounded-md",children:[Object(O.jsxs)("span",{className:"opacity-70 block",children:["Description:"," "]}),Object(O.jsx)("b",{children:e.description})]}),void 0!==a&&Object(O.jsxs)("div",{className:"p-1 mt-2 m-1 bg-blue-200 bg-opacity-20 px-2 rounded-md",children:[Object(O.jsxs)("p",{children:[Object(O.jsx)("span",{className:"opacity-70",children:"Names: "}),Object(O.jsxs)("b",{children:[a.fname," ",a.lname]})]}),Object(O.jsxs)("p",{children:[Object(O.jsx)("span",{className:"opacity-70",children:"Email: "}),Object(O.jsx)("b",{children:a.email})]})]})]})]})})}):Object(O.jsxs)("tr",{onClick:function(){return c(e.event_id)},className:"p-2 rounded-md hover:bg-blue-900 bg-opacity-30 cursor-pointer",children:[Object(O.jsx)("td",{className:"px-1 opacity-95",children:t+1}),Object(O.jsx)("td",{className:"text-blue-500 font-bold",children:void 0!==a?Object(O.jsx)("span",{title:(null===a||void 0===a?void 0:a.fname)+" "+(null===a||void 0===a?void 0:a.lname),children:null===a||void 0===a?void 0:a.lname}):Object(O.jsx)("span",{className:"opacity-50",children:"System/Admin"})}),Object(O.jsx)("td",{className:"text-red-400 text-sm pl-1",children:e.event_type_id}),Object(O.jsx)("td",{className:"text-gray-400 pl-1",children:"2min"})]})},t)}))})]})]})},C=void 0;!function(e){e[e.Details=0]="Details",e[e.Events=1]="Events"}(a||(a={}));var w=function(e){var t=e.candidate,s=e.chatHandler,r=e.micHandler,o=e.focusHandler,i=e.stopHandler,n=e.restartHandler,c=e.warnHandler,d=e.closeHandler,m=e.events,p=e.home_proctoring,b=e.exam_started,u=e.focus_mode,j=e.removeInExam,h=Object(l.useState)(a.Details),g=Object(_.a)(h,2),v=g[0],f=g[1];return void 0===t?Object(O.jsxs)("div",{className:"p-4 text-center bg-white",children:[Object(O.jsx)("h1",{className:"text-3xl text-gray-800",children:"Oops!!"}),Object(O.jsxs)("p",{className:"text-3xl text-gray-700",children:["The selected candidate can't be found"," "]})]}):Object(O.jsxs)("div",{className:"p-1",children:[Object(O.jsxs)("div",{className:"p-2 border-rounded ".concat(!0===u?"bg-blue-900 text-white":"bg-gray-500 text-white","  rounded-md flex items-baseline "),children:[Object(O.jsx)("button",{onClick:function(){return d()},className:"p-1 block bg-blue-900 bg-opacity-70 rounded-md mr-2 font-bold text-1xl",children:Object(O.jsx)(x.f,{})}),Object(O.jsx)("h3",{className:"text-center -mt-1 mb-0 pb-0 text-1xl font-bold block text-blue-500--",children:"User details"})]}),Object(O.jsxs)("div",{className:"p-2 text-center",children:[Object(O.jsx)(x.a,{className:"text-9xl text-center mx-auto"}),Object(O.jsxs)("h1",{className:"text-xl  ".concat(!0===u?"text-white":"text-gray-800"," font-bold"),children:[t.fname," ",t.lname]}),Object(O.jsx)("h2",{className:" ".concat(!0===u?"text-gray-400":"text-gray-800","  text-md"),children:t.email}),Object(O.jsxs)("div",{className:"p-1",children:[!0===t.joined&&Object(O.jsx)("span",{className:"inline-block text-sm bg-blue-500 text-white px-1 rounded-md m-0.5",children:"#Joined"}),!0===t.active&&Object(O.jsx)("span",{className:"inline-block text-sm bg-green-500 text-white px-1 rounded-md m-0.5",children:"#Active"}),!0===t.removed&&Object(O.jsx)("span",{className:"inline-block text-sm bg-red-500 text-white  px-1 rounded-md m-0.5",children:"#Removed"}),!0===t.done&&Object(O.jsx)("span",{className:"inline-block text-sm bg-yellow-500 text-white px-1 rounded-md m-0.5",children:"#Done"})]})]}),Object(O.jsx)("div",{className:"my-2 py-1 rounded grid grid-cols-2 gap-1",children:!0===b&&!0===t.active&&Object(O.jsxs)(O.Fragment,{children:[!0===p&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("button",{onClick:r.bind(C,t.user_id),className:"proctoring-action-button",children:[Object(O.jsx)(x.Jb,{className:"text-2xl mx-auto b-0 pb-0"}),Object(O.jsx)("span",{className:"text-md p-0 block -mt-0",children:"Mic"})]}),Object(O.jsxs)("button",{onClick:s.bind(C,t.user_id),className:"proctoring-action-button",children:[Object(O.jsx)(x.q,{className:"text-2xl mx-auto b-0 pb-0"}),Object(O.jsx)("span",{className:"text-md p-0 block -mt-0",children:"Chat"})]}),Object(O.jsxs)("button",{onClick:o.bind(C,t.user_id),className:"proctoring-action-button",children:[Object(O.jsx)(x.N,{className:"text-2xl mx-auto b-0 pb-0"}),Object(O.jsx)("span",{className:"text-md p-0 block -mt-0",children:"Focus"})]})]}),!1===t.done&&Object(O.jsxs)("button",{onClick:i.bind(C,t.user_id),className:"proctoring-action-button",children:[Object(O.jsx)(x.jb,{className:"text-2xl mx-auto b-0 pb-0"}),Object(O.jsx)("span",{className:"text-md p-0 block -mt-0",children:"Stop"})]}),Object(O.jsxs)("button",{onClick:n.bind(C,t.user_id),className:"proctoring-action-button",children:[Object(O.jsx)(x.xb,{className:"text-2xl mx-auto b-0 pb-0"}),Object(O.jsx)("span",{className:"text-md p-0 block -mt-0",children:"Restart"})]}),!1===t.done&&Object(O.jsxs)("button",{title:"give a warning",onClick:function(){return c(t.user_id)},className:"proctoring-action-button",children:[Object(O.jsx)(x.Kb,{className:"text-2xl mx-auto b-0 pb-0"}),Object(O.jsx)("span",{className:"text-md p-0 block -mt-0",children:"Warn"})]}),!1===t.done&&Object(O.jsxs)("button",{title:"Remove into in exam",onClick:function(){return j(t.user_id)},className:"text-center rounded-md p-1 border-2 border-red-600 hover:bg-red-600 text-white  hover:text-white bg-red-500",children:[Object(O.jsx)(x.Kb,{className:"text-2xl mx-auto b-0 pb-0"}),Object(O.jsx)("span",{className:"text-md p-0 block -mt-0",children:"Remove into exam"})]})]})}),Object(O.jsxs)("div",{className:"my-1 bg-blue-900 bg-opacity-40 rounded-md p-1 mt-2 grid grid-cols-2 gap-2 text-sm",children:[Object(O.jsx)("button",{onClick:function(){return f(a.Details)},className:"p-1 rounded-md text-white ".concat(v===a.Details?"bg-blue-600 border-2 border-blue-300":"bg-blue-300"),children:"candidate"}),Object(O.jsx)("button",{onClick:function(){return f(a.Events)},className:"p-1 rounded-md text-white ".concat(v===a.Events?"bg-blue-600 border-2 border-blue-300":"bg-blue-300"),children:"Events"})]}),v===a.Details?Object(O.jsxs)("div",{className:"mt-2 ".concat(!0===u?"text-white":"text-gray-900"," border-blue-400"),children:[Object(O.jsx)("h2",{className:" font-bold text-2xl mb-1 opacity-70 text-center border-b",children:"User information"}),Object(O.jsxs)("div",{className:"p-2 rounded-md border   border-opacity-20",children:[Object(O.jsxs)("div",{className:"border-b  border-opacity-60 py-1 ".concat(!0===u?"border-white":"border-gray-400"),children:[Object(O.jsx)("label",{className:"text-sm m-0 p-0 opacity-70",children:"Username:"}),Object(O.jsx)("h4",{className:"font-bold text-lg p-0 -mt-1",children:t.email})]}),Object(O.jsxs)("div",{className:"border-b  border-opacity-60 py-1 ".concat(!0===u?"border-white":"border-gray-400"),children:[Object(O.jsx)("label",{className:"text-sm m-0 p-0 opacity-70",children:"First name:"}),Object(O.jsx)("h4",{className:"font-bold text-lg p-0 -mt-1",children:t.fname})]}),Object(O.jsxs)("div",{className:"border-b  border-opacity-60 py-1 ".concat(!0===u?"border-white":"border-gray-400"),children:[Object(O.jsx)("label",{className:"text-sm m-0 p-0 opacity-70",children:"Last name:"}),Object(O.jsx)("h4",{className:"font-bold text-lg p-0 -mt-1",children:t.lname})]}),Object(O.jsxs)("div",{className:"border-b  border-opacity-60 py-1 ".concat(!0===u?"border-white":"border-gray-400"),children:[Object(O.jsx)("label",{className:"text-sm m-0 p-0 opacity-70",children:"email:"}),Object(O.jsx)("h4",{className:"font-bold text-lg p-0 -mt-1",children:t.email})]}),Object(O.jsxs)("div",{className:"border-b  border-opacity-60 py-1 ".concat(!0===u?"border-white":"border-gray-400"),children:[Object(O.jsx)("label",{className:"text-sm m-0 p-0 opacity-70",children:"Position:"}),Object(O.jsx)("h4",{className:"font-bold text-lg p-0 -mt-1",children:t.position_title})]}),Object(O.jsxs)("div",{className:"border-b  border-opacity-60 py-1 ".concat(!0===u?"border-white":"border-gray-400"),children:[Object(O.jsx)("label",{className:"text-sm m-0 p-0 opacity-70",children:"Course name:"}),Object(O.jsx)("h4",{className:"font-bold text-lg p-0 -mt-1",children:t.course_name})]})]})]}):Object(O.jsx)(y,{candidates:[t],events:m,focus_mode:u,loading:!1})]})},E=function(e){var t=e.clickHandler,s=e.candidates,a=e.focus_mode,r=e.show_title,o=e.large;return Object(O.jsxs)("div",{className:"mt-2 ".concat(!0===a?"text-white p-2 ":""),children:[!0===r&&Object(O.jsx)("h1",{className:"text-3xl font-bold text-center pb-2 border-b mb-1 border-gray-100",children:"Candidates"}),Object(O.jsxs)("table",{className:"w-full text-left ".concat(!0===a?"":"bg-white rounded-md",'  p-2"'),children:[Object(O.jsx)("thead",{className:"text-sm text-gray-500",children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{}),Object(O.jsx)("th",{}),!0===o&&Object(O.jsx)("th",{}),Object(O.jsx)("th",{})]})}),Object(O.jsx)("tbody",{children:s.map((function(e,s){return Object(O.jsxs)("tr",{className:"group border-b mb-1 ".concat(!0===a?"border-blue-800 border-opacity-60 hover:bg-blue-900":"border-gray-200 border-opacity-60 hover:bg-blue-100","  cursor-pointer"),onClick:t.bind(undefined,e.user_id),children:[Object(O.jsx)("td",{className:"".concat(!0===a?"text-blue-500":"text-gray-400","  w-5 text-left"),children:Object(O.jsx)(x.a,{className:!0===o?"text-3xl":"text-5xl"})}),Object(O.jsxs)("td",{className:"text-gray-400 pl-1 py-1",children:[Object(O.jsxs)("h4",{className:"font-bold ".concat(!0===o?"text-md":"text-lg","  p-0 m-0 ").concat(!0===a?"text-white":"text-gray-900"),children:[e.fname," ",e.lname]}),!1===o&&Object(O.jsx)("p",{className:"text-sm p-0 m-0 -mt-1",children:e.email})]}),!0===o&&Object(O.jsx)("td",{className:"",children:Object(O.jsx)("span",{className:"text-sm p-0 m-0 -mt-1",children:e.email})}),Object(O.jsxs)("td",{className:"text-right group-hover:opacity-100 opacity-40 ".concat(!1===o?"grid grid-cols-2 text-center w-10 pt-2":""," md:w-auto"),children:[!0===e.joined&&Object(O.jsx)("span",{className:"inline-block text-xs bg-blue-300 px-1 rounded-md m-0.5",children:"#Joined"}),!0===e.active&&Object(O.jsx)("span",{className:"inline-block text-xs bg-green-300 px-1 rounded-md m-0.5",children:"#Active"}),!0===e.removed&&Object(O.jsx)("span",{className:"inline-block text-xs bg-red-300 text-white px-1 rounded-md m-0.5",children:"#Removed"}),!0===e.done&&Object(O.jsx)("span",{className:"inline-block text-xs bg-yellow-300 px-1 rounded-md m-0.5",children:"#Done"})]})]},s)}))})]})]})};E.defaultProps={large:!1};var S,k=E,R=void 0,A=function(e){var t=e.candidate,s=e.warningHandler,a=e.stopHandler,r=e.detailsHandler,o=e.continueHandler,i=e.exam_started,n=e.focus_mode,c=e.exam_done,d=e.addMinutes,m=Object(l.useState)(!0),p=Object(_.a)(m,2),b=p[0],j=p[1];return Object(O.jsxs)("div",{className:"".concat(Object(u.s)(null===t||void 0===t?void 0:t.stopped,n,t.done)," text-white    cursor-pointer  p-2 rounded-md transition-all ease-in-out"),onClick:r.bind(R,t.user_id),children:[Object(O.jsxs)("div",{className:"text-center",children:[Object(O.jsx)("span",{className:"text-gray-200",children:"Seat number"}),Object(O.jsx)("h1",{className:"text-5xl font-bold",children:t.seat_number})]}),0!==t.added_minutes&&Object(O.jsxs)("div",{className:"flex items-center text-sm",children:[Object(O.jsx)("div",{className:"",children:Object(O.jsxs)("section",{className:"p-0.5 bg-blue-500 rounded w-",children:[t.added_minutes,"m"]})}),Object(O.jsx)("div",{className:"flex-1"}),Object(O.jsx)("div",{className:" pl-2 font-bold text-center",children:!0===c&&Object(O.jsx)("section",{className:"p-0.5 bg-blue-500 rounded w-auto px-1",children:Object(O.jsx)(g.a,{start_time:t.start_added_time,duration_min:t.added_minutes,timeout:function(){return j(!1)},returnString:!0,labels:!0})})})]}),Object(O.jsxs)("div",{className:"mt-1 border-t border-gray-200 pt-2",children:[Object(O.jsx)("h4",{className:"text-xs text-gray-200",children:"Full names"}),Object(O.jsxs)("h4",{className:"text-sm font-bold",children:[t.fname," ",t.lname]})]}),(!0===i&&!1===c||0!==t.added_minutes&&!1!==b)&&Object(O.jsxs)("div",{className:"mt-2 flex",children:[!1===t.stopped?Object(O.jsxs)("button",{onClick:s.bind(R,t.user_id),className:"px-2 text-sm py-1 rounded-md text-gray-900 bg-yellow-300 flex-1 border border-white",title:"Send a warning",children:[Object(O.jsx)(x.Kb,{className:"inline"})," Warn"]}):Object(O.jsxs)("button",{onClick:o.bind(R,t.user_id),className:"px-2 text-sm py-1 rounded-md text-gray-900 bg-green-400 flex-1",title:"Allow to continue exam",children:[Object(O.jsx)(x.Kb,{className:"inline"})," Continue"]}),Object(O.jsxs)("button",{onClick:a.bind(R,t.user_id),className:"px-2 text-sm py-1 rounded-md text-white- bg-red-700 ml-1 flex-1",title:"Stop candidate",children:[Object(O.jsx)(x.jb,{className:"inline"})," Stop"]})]}),(!0===c||!0===i)&&Object(O.jsxs)("div",{className:"mr-2 mt-2",children:[Object(O.jsxs)("button",{onClick:function(){d(t),j(!0)},className:"px-2 py-1 rounded-md text-sm w-full bg-blue-700 ml-1",title:"Add minutes",children:[Object(O.jsx)(x.mb,{className:"inline"})," Add minutes"]})," "]})]})},T=s(16),F=s(52),D=s(11),H=s(31),M=function(e){Object(i.a)(s,e);var t=Object(n.a)(s);function s(e){var a;return Object(r.a)(this,s),(a=t.call(this,e)).componentDidMount=function(){var e,t=[],s=[],r=[];null===(e=a.props.proctoring.room_groups)||void 0===e||e.forEach((function(e){t.push(e.group_id.toLowerCase()),s=[].concat(Object(D.a)(s),Object(D.a)(e.candidates.map((function(t){return Object(h.a)(Object(h.a)({},t),{},{group_id:e.group_id})}))))})),r=a.props.proctoring.all_candidates.map((function(e){var t=s.find((function(t){return t.user_id===e.user_id}));return void 0===t?Object(h.a)(Object(h.a)({},e),{},{group_id:""}):Object(h.a)(Object(h.a)({},e),{},{group_id:t.group_id})})),a.setState({candidates_in_groups:r.filter((function(e){return""!==e.group_id})),candidate_non_done_exam:r.filter((function(e){return""===e.group_id})),group_list:t})},a.submitHandler=function(e){return e.preventDefault(),0===a.state.group_name.length?a.setState({error:{target:"form",msg:"Please add the group name"}}):0===a.state.selected_list.length?a.setState({error:{target:"form",msg:"You can't create an empty group"}}):!0===a.state.group_list.includes(a.state.group_name.toLowerCase())?a.setState({error:{target:"form",msg:"This name already used on previous group"}}):void a.props.createAttendance({list:a.state.selected_list,name:a.state.group_name})},a.FC_CloseProctoringRoomHandler=function(e){void 0!==e&&!1!==window.confirm("Are you sure you want to set this room to finished status??")&&(a.setState({disabling_room:!0}),a.props.FC_CloseProctoringRoom(e,(function(e,t){!1===e?a.setState({error:{target:"main",msg:t},disabling_room:!1}):a.setState({disabling_room:!1})})))},a.state={loading:!1,create_attendance:!1,selected_list:[],selected_candidate:null,search:"",group_name:"",error:{target:"",msg:""},created_groups:[],candidates_in_groups:[],candidate_non_done_exam:[],disabling_room:!1,group_list:[]},a}return Object(o.a)(s,[{key:"render",value:function(){var e,t=this,s=[];null!==this.props.proctoring.room_groups&&(s=null===(e=this.props.proctoring.room_groups)||void 0===e?void 0:e.filter((function(e){return!1===e.isExpired&&e.exam_id===t.props.proctoring.exam.exam_id})));if(s.length>=1)return Object(O.jsxs)("div",{className:"p-4 bg-white rounded mt-3 mr-2",children:[Object(O.jsxs)("div",{className:" p-2 text-center",children:[Object(O.jsx)("h1",{className:"text-4xl",children:"Some previous room are not closed yet"}),Object(O.jsx)("h3",{className:"text-lg text-gray-700",children:"If you want to create another room, please close all the rooms first"})]}),!0===this.state.disabling_room&&Object(O.jsx)("div",{className:"my-2 bg-green-500 text-white px-2 text-center rounded animate__animated animate__fadeIn animate_infinite cursor-pointer",children:"Updating groups..."}),"main"===this.state.error.target&&Object(O.jsx)("div",{className:"my-2 bg-red-500 text-white px-2 text-center rounded animate__animated animate__zoomIn cursor-pointer",onClick:function(){return t.setState({error:{target:"",msg:""}})},children:this.state.error.msg}),Object(O.jsx)("div",{className:"mt-3",children:Object(O.jsxs)("table",{className:"w-full table table-auto",children:[Object(O.jsx)("thead",{className:"text-left bg-gray-100 text-gray-600",children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{children:"#"}),Object(O.jsx)("th",{children:"Group name"}),Object(O.jsx)("th",{children:"Created time"}),Object(O.jsx)("th",{children:"Total candidates"}),Object(O.jsx)("th",{children:"Course"}),Object(O.jsx)("th",{})]})}),Object(O.jsx)("tbody",{children:s.map((function(e,s){return Object(O.jsxs)("tr",{className:"border-b",children:[Object(O.jsx)("td",{className:"p-3",children:s+1}),Object(O.jsx)("td",{children:Object(O.jsx)("b",{children:e.group_id})}),Object(O.jsx)("td",{children:d()(e.createdAt).format("LLLL")}),Object(O.jsx)("td",{children:e.candidates.length}),Object(O.jsx)("td",{children:t.props.proctoring.exam.course_name}),Object(O.jsx)("td",{className:"text-right",children:Object(O.jsx)("button",{onClick:t.FC_CloseProctoringRoomHandler.bind(t,e._id),className:"p-1 rounded bg-red-400 text-white px-3",children:"Set room to finish"})})]},e._id)}))})]})})]});var a=Object(j.a)(this.state.candidate_non_done_exam,this.state.search,{email:!0,fname:!0,lname:!0});return 0===this.props.proctoring.candidates.length&&!1===this.state.create_attendance?Object(O.jsxs)("div",{className:"mt-4 mx-4",children:[""!==this.props.proctoring.error&&Object(O.jsxs)("div",{className:"p-2 mb-3 bg-red-200 animate__zoomIn animate__faster animate__animated text-red-600 rounded-md flex items-center",children:[Object(O.jsx)(x.F,{className:"text-2xl"}),Object(O.jsx)("p",{className:"m-0 text-xl ml-1.5",children:this.props.proctoring.error})]}),Object(O.jsxs)("div",{className:"p-6 bg-white animate__fadeIn animate__animated mt-4 rounded shadow-md",children:[Object(O.jsx)("h2",{className:"text-3xl font-bold mb-2",children:"Create a group"}),Object(O.jsxs)("p",{className:"text-md text-gray-700 ",children:["To create a group click on ",Object(O.jsx)("b",{children:"create group"})," button and check list of all the candidates and add them to the attendance with the room name"]}),Object(O.jsx)("div",{className:"my-2 border-- w-4/5 py-2",children:[{title:"Province",value:this.props.proctoring.room.province_name},{title:"District",value:this.props.proctoring.room.district_name},{title:"Center name",value:this.props.proctoring.room.center_name},{title:"Room number",value:this.props.proctoring.room.room_number}].map((function(e){return Object(O.jsxs)("section",{className:"border-t py-1",children:[Object(O.jsxs)("span",{children:[e.title,": "]}),Object(O.jsx)("b",{children:e.value})]},e.title)}))}),Object(O.jsx)("button",{className:"p-2 px-3 rounded text-lg mt-2 bg-blue-500 text-white hover:bg-600",onClick:function(){return t.setState({create_attendance:!0})},children:"Create group"})]})]}):Object(O.jsxs)(l.Fragment,{children:[null!==this.state.selected_candidate&&Object(O.jsx)(H.d,{footer:!1,widthSizeClass:H.b.large,title:"User info",theme:H.c.default,displayClose:!0,padding:{title:!0,body:!0,footer:!1},backDrop:!0,backDropClose:!0,close:function(){return t.setState({selected_candidate:null})},children:Object(O.jsx)("div",{className:"p-2",children:[{title:"National Id",value:this.state.selected_candidate.n_id},{title:"First name",value:this.state.selected_candidate.fname},{title:"Last name",value:this.state.selected_candidate.lname},{title:"District",value:this.state.selected_candidate.district},{title:"Phone number",value:this.state.selected_candidate.phone_number},{title:"Course",value:this.state.selected_candidate.course_code+" "+this.state.selected_candidate.course_name},{title:"Email",value:this.state.selected_candidate.email},{title:"Position",value:this.state.selected_candidate.position_title}].map((function(e){return Object(O.jsxs)("section",{className:"border-t py-1",children:[Object(O.jsxs)("span",{children:[e.title,": "]}),Object(O.jsx)("b",{children:e.value})]},e.title)}))})}),Object(O.jsx)("form",{onSubmit:this.submitHandler,children:Object(O.jsxs)("div",{className:"bg-white p-2 mr-2 mt-3 rounded-md animate__animated animate__fadeIn",children:[Object(O.jsxs)("div",{className:" px-2 pb-3 flex items-center",children:[Object(O.jsxs)("div",{className:"flex-1",children:[Object(O.jsx)("h2",{className:"font-bold text-xl",children:"Create a group"}),Object(O.jsx)("p",{className:"text-gray-400 m-0 mt- text-sm",children:"Please create a room by adding the list of the users to the attendee list"})]}),Object(O.jsxs)("div",{className:"",children:[Object(O.jsxs)("div",{className:"flex items-end",children:[Object(O.jsxs)("div",{className:"",children:[Object(O.jsx)("label",{htmlFor:"input-group-name",className:"block text-xs",children:"Group name"}),Object(O.jsx)("input",{type:"text",id:"input-group-name",className:"p-1 px-2 bg-gray-50 rounded-md ".concat("form"===this.state.error.target?"border-red-600":"","  border"),placeholder:"A",maxLength:2,required:!0,value:this.state.group_name,onChange:function(e){return t.setState({group_name:e.target.value.toUpperCase()})}})]}),Object(O.jsx)("div",{className:"flex-1 pl-1",children:Object(O.jsx)("button",{type:"submit",className:"py-1 px-3 text-md hover:bg-green-600 rounded-md bg-green-500 text-white block",children:"Create group"})})]}),"form"===this.state.error.target&&Object(O.jsx)("span",{className:"text-red-500 text-sm",children:this.state.error.msg})]})]}),Object(O.jsxs)("div",{className:"md:flex",children:[0!==this.state.selected_list.length&&this.state.selected_list.length===this.props.proctoring.all_candidates.length?null:Object(O.jsxs)("div",{className:"flex-1 mr-2 mb-8 md:mb-2",children:[Object(O.jsxs)("div",{className:"p-2 flex bg-gray-200 items-center",children:[Object(O.jsx)("h4",{className:"text-xl font-light text-gray-700",children:"All candidates"}),Object(O.jsx)("input",{type:"search",name:"search",id:"",placeholder:"search name",className:"py-1 px-2 flex-1 ml-3 bg-gray-50 border rounded",value:this.state.search,onChange:function(e){return t.setState({search:e.target.value})}})]}),Object(O.jsx)("div",{className:" shadow",children:Object(O.jsxs)("table",{className:"w-full",children:[Object(O.jsx)("thead",{className:"text-left bg-gray-400",children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{className:"text-center",children:"#"}),Object(O.jsx)("th",{children:"Names"}),Object(O.jsx)("th",{children:"Email"}),Object(O.jsx)("th",{className:"text-right",children:Object(O.jsx)("button",{type:"button",className:"p-0.5 px-2 rounded-md hover:bg-blue-700 m-1 inline-block bg-blue-600 text-white text-sm",onClick:function(){return t.setState({selected_list:t.state.candidate_non_done_exam.map((function(e){return e.user_id}))})},children:"Select all"})})]})}),Object(O.jsx)("tbody",{children:0===a.length?Object(O.jsx)("tr",{children:Object(O.jsx)("td",{colSpan:4,children:Object(O.jsxs)("div",{className:"p-2 text-center py-4",children:[Object(O.jsx)(x.S,{className:"text-6xl text-gray-500 mx-auto my-1"}),Object(O.jsxs)("h2",{children:[Object(O.jsx)("b",{children:this.state.search})," can't be found in waiting candidates"]})]})})}):Object(O.jsxs)(O.Fragment,{children:[a.map((function(e,s){return t.state.selected_list.indexOf(e.user_id)>-1?null:Object(O.jsxs)("tr",{className:"border-b group hover:bg-green-50",children:[Object(O.jsxs)("td",{className:"text-gray-400 px-1 text-sm text-center",children:[" ",s+1]}),Object(O.jsxs)("td",{title:"Click to see details",className:"font-bold text-blue-900 hover:underline cursor-pointer",onClick:function(){return t.setState({selected_candidate:e})},children:[e.fname," ",e.lname]}),Object(O.jsx)("td",{className:"text-sm",children:e.email}),Object(O.jsx)("td",{className:"text-right",children:Object(O.jsxs)("button",{type:"button",onClick:function(){return t.setState({selected_list:[].concat(Object(D.a)(t.state.selected_list),[e.user_id]),error:{target:"",msg:""}})},className:"my-1 p-1 px-2 rounded-md group-hover:opacity-95 opacity-5 bg-green-500 text-white text-sm",children:[Object(O.jsx)(x.d,{className:"inline-block mr-1"}),"Add"]})})]},s)})),""===this.state.search&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("tr",{children:Object(O.jsx)("td",{colSpan:5,children:Object(O.jsx)("h4",{className:"text-center text-2xl text-gray-400 p-2 border-b",children:"Candidates who are done the exam"})})}),this.state.candidates_in_groups.map((function(e,s){return t.state.selected_list.indexOf(e.user_id)>-1?null:Object(O.jsxs)("tr",{className:"border-b group  opacity-70 ",children:[Object(O.jsxs)("td",{className:"text-gray-400 px-1 text-sm text-center",children:[" ",s+1]}),Object(O.jsxs)("td",{title:"Click to see details",className:"font-bold text-blue-900 hover:underline cursor-pointer",onClick:function(){return t.setState({selected_candidate:e})},children:[e.fname," ",e.lname]}),Object(O.jsx)("td",{className:"text-sm",children:e.email}),Object(O.jsxs)("td",{className:"",children:["Group: ",Object(O.jsx)("b",{children:e.group_id})]})]},s)}))]})]})})]})})]}),Object(O.jsxs)("div",{className:"flex-1 ml-1 shadow border",children:[Object(O.jsxs)("div",{className:"p-1 bg-green-100 py-1 px-2 flex items-center",children:[Object(O.jsxs)("div",{className:"flex-1",children:[Object(O.jsx)("h2",{className:"font-bold text-green-900 text-2xl",children:"Group"}),Object(O.jsx)("p",{className:"text-green-800 m-0 mt- text-sm",children:"This is the list of the candidate who are allowed to do the exam"})]}),Object(O.jsxs)("div",{className:"",children:[Object(O.jsxs)("h2",{className:"text-xl font-bold -mb-2",children:[Object(O.jsx)("b",{children:this.state.selected_list.length})," of"," ",Object(O.jsx)("b",{children:this.props.proctoring.all_candidates.length})]}),Object(O.jsx)("p",{className:"text-sm",children:"Selected"})]})]}),Object(O.jsx)("div",{className:"",children:Object(O.jsxs)("table",{className:"w-full",children:[Object(O.jsx)("thead",{className:"text-left bg-green-800 text-white",children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{className:"px-2",children:"#"}),Object(O.jsx)("th",{children:"Names"}),Object(O.jsx)("th",{children:"Email"}),Object(O.jsx)("th",{className:"text-right",children:this.state.selected_list.length>=2&&Object(O.jsx)("button",{type:"button",className:"p-0.5 px-2 rounded-md hover:bg-red-700 hover:text-red-100 m-1 inline-block bg-red-200 text-red-800 text-sm",onClick:function(){return t.setState({selected_list:[]})},children:"Remove all"})})]})}),Object(O.jsx)("tbody",{children:0===this.state.selected_list.length?Object(O.jsx)("tr",{children:Object(O.jsx)("td",{colSpan:4,children:Object(O.jsxs)("div",{className:"p-2 text-center py-4",children:[Object(O.jsx)(x.S,{className:"text-6xl text-gray-500 mx-auto my-1"}),Object(O.jsx)("h2",{children:"No candidate found on the attendance"})]})})}):this.state.selected_list.map((function(e,s){var a=t.props.proctoring.all_candidates.find((function(t){return t.user_id===e}));return void 0===a?null:Object(O.jsxs)("tr",{className:"border-b group hover:bg-green-50 animate__animated animate__zoomIn animate__faster",children:[Object(O.jsx)("td",{className:"text-gray-400 pr-1 text-center",children:s+1}),Object(O.jsxs)("td",{title:"Click to see details",className:"font-bold text-blue-900 hover:underline cursor-pointer",onClick:function(){return void 0!==a&&t.setState({selected_candidate:a})},children:[a.fname," ",a.lname]}),Object(O.jsx)("td",{children:a.email}),Object(O.jsx)("td",{className:"text-right",children:Object(O.jsx)("button",{type:"button",onClick:function(){return t.setState({selected_list:t.state.selected_list.filter((function(t){return t!==e}))})},className:"my-1 p-1 px-2 rounded-md group-hover:opacity-95 opacity-5 bg-red-500 text-white text-sm",children:"Remove"})})]},s)}))})]})})]})]})]})})]})}}]),s}(m.a.Component),I=Object(b.b)((function(e){return{auth:e.auth,proctoring:e.proctoring}}),{FC_CloseProctoringRoom:u.y})(M),L=void 0,P=function(e){var t=e.close,s=e.candidate,a=e.addMinutesHandler,r=e.reset_added_minutes,o=Object(l.useState)(1),i=Object(_.a)(o,2),n=i[0],c=i[1],d=Object(l.useState)(""),m=Object(_.a)(d,2),p=m[0],b=m[1],u=Object(l.useState)({target:"",msg:""}),j=Object(_.a)(u,2),h=j[0],g=j[1];return Object(O.jsxs)(l.Fragment,{children:[Object(O.jsx)("div",{className:"fixed bg-black bg-opacity-10 top-0 bottom-0 right-0 left-0 animate__animated animate__fadeIn",onClick:function(){return t(!1)}}),Object(O.jsxs)("div",{className:"fixed w-80 shadow-lg bg-white rounded top-16 mt-2 right-2 animate__animated animate__zoomIn animate__faster",children:[Object(O.jsxs)("div",{className:"flex items-center border-b",children:[Object(O.jsx)("div",{className:"flex-1 pl-2 text-xl font-bold text-gray-400",children:Object(O.jsx)("h4",{children:"Room details"})}),Object(O.jsx)("div",{className:"",children:Object(O.jsx)("button",{onClick:function(){return t(!1)},className:"p-2 hover:bg-red-700 hover:text-white rounded text-2xl",children:Object(O.jsx)(x.y,{})})})]}),Object(O.jsxs)("div",{className:"p-2 ",children:[null!==s?Object(O.jsx)("div",{className:"border-separate p-2",children:[{title:"Names",value:(null===s||void 0===s?void 0:s.fname)+" "+(null===s||void 0===s?void 0:s.lname)},{title:"Email",value:null===s||void 0===s?void 0:s.email},{title:"Seat",value:null===s||void 0===s?void 0:s.seat_number}].map((function(e,t){var s=e.title,a=e.value;return Object(O.jsxs)("div",{className:"flex",children:[Object(O.jsxs)("span",{className:"text-gray-500",children:[s,": "]}),Object(O.jsxs)("b",{className:"text-right inline-block",children:[" ",a]})]},t)}))}):Object(O.jsxs)("div",{className:"p-2 flex items-center bg-gray-100 border mb-3 cursor-pointer hover:bg-green-100 rounded-md",children:[Object(O.jsx)("div",{className:"p-1",children:!0===r?Object(O.jsx)(x.r,{className:"text-3xl text-green-500"}):Object(O.jsx)(x.s,{className:"text-3xl text-gray-500"})}),Object(O.jsx)("div",{className:"flex-1 p-1",children:Object(O.jsx)("p",{className:"".concat(!0===r?"":"text-gray-600"),children:!0===r?"All the candidate will lose the minutes you added on them":"All the candidate will keep the minutes you added on them"})})]}),Object(O.jsxs)("div",{className:"p-2 text-center pt-1 bg-gray-100 mx-2 rounded",children:[Object(O.jsx)("p",{className:"m-0 text-sm text-gray-500",children:"Minutes"}),Object(O.jsxs)("div",{className:"flex",children:[Object(O.jsx)("button",{className:"text-3xl px-4 hover:bg-blue-200 hover:text-blue-900 rounded",onClick:c.bind(L,n-1),children:"-"}),Object(O.jsx)("input",{type:"number",className:"flex-1 text-4xl text-center font-bold bg-transparent text-blue-700",min:1,max:10,value:n,onChange:function(e){return c(+e.target.value)}}),Object(O.jsx)("button",{className:"text-3xl px-4 hover:bg-blue-200 hover:text-blue-900 rounded",onClick:c.bind(L,n+1),children:"+"})]}),"minutes"===h.target&&Object(O.jsx)("span",{className:"text-red-500 text-sm",children:h.msg})]}),Object(O.jsxs)("div",{className:"p-2",children:[Object(O.jsx)("label",{htmlFor:"minutes-reason",children:"Reason"}),Object(O.jsx)("textarea",{id:"minutes-reason",className:"w-full bg-gray-100 rounded border-2 ".concat("reason"===h.target?"border-red-500":"border-blue-500"," p-1"),rows:3,value:p,onChange:function(e){return b(e.target.value)}}),"reason"===h.target&&Object(O.jsx)("span",{className:"text-red-500 text-sm",children:h.msg})]}),Object(O.jsx)("div",{className:"p-2 mx-1",children:Object(O.jsxs)("button",{className:"btn bg-blue-500 text-white w-full hover:bg-blue-600",onClick:function(){return n<2?g({target:"minutes",msg:"Minimum is 2m"}):p.length<=3?g({target:"reason",msg:"Reason must me up to 4 characters"}):(a(n,p),void t())},children:[Object(O.jsx)(x.c,{className:"inline-block text-2xl"})," Add minutes"]})})]})]})," "]})};!function(e){e[e.Candidates=0]="Candidates",e[e.Events=1]="Events"}(S||(S={}));var V=function(e){Object(i.a)(s,e);var t=Object(n.a)(s);function s(e){var a;return Object(r.a)(this,s),(a=t.call(this,e)).myPeer=void 0,a.componentDidMount=function(){var e=a.props.proctoring.exam,t=e.room_id,s=e.course_id,r=e.position_id,o=e.exam_id;a.props.proctoring.candidates.length<=0&&a.props.FC_GetProctoringRoom({room_id:t,course_id:s,position_id:r,session_id:a.props.auth.application_session._id},(function(e,t){!0===e?(a.setState({loading_room:!1}),a.props.socket.socket.emit(T.b.GET_ROOM_INFO_SERVER,a.props.proctoring.room.room_id,(function(e){!0===e.error?a.props.FC_RoomNotFoundOnline(e.msg):(console.log("*********************************************************************"),console.log({online_exam:e.data.exam_id,redux_exam:o}),e.data.exam_id===o?(a.props.FC_RoomDetailsOnline(e.data),a.startListeningToEvents()):a.setState({loading_room:!1,error:{target:"wrong-room",msg:"Exams does not match the active group"}}))}))):a.setState({loading_room:!1,error:{target:"all",msg:t}})}))},a.startListeningToEvents=function(){var e;a.props.socket.socket.emit(T.b.JOIN_ROOM,{room_id:a.props.proctoring.room.room_id,user_id:a.props.auth.user.user_id,peer_id:"",supper:!0,exam_id:a.props.proctoring.exam.exam_id},(function(e){a.props.socket.socket.on(T.b.NEW_USER_JOINED_CLIENT,(function(e){a.props.FC_SetOneActiveCandidate({user_id:e.user_id,stopped:e.stopped,done:e.done})})),a.props.socket.socket.on(T.b.TIME_OUT_CLIENT,(function(e){a.props.FC_CandidateTimeOut(e)})),a.props.socket.socket.on(T.b.USER_DISCONNECTED,(function(e){var t;a.props.FC_CandidateOffline(e),a.props.FC_SaveEvent({application_session_id:null===(t=a.props.auth.application_session)||void 0===t?void 0:t._id,description:"Leave the room",done_by:"System",event_type_id:T.b.CANDIDATE_LEFT_EXAM_EVENT,exam_id:a.props.proctoring.exam.exam_id,position_id:a.props.proctoring.exam.position_id,room_id:a.props.proctoring.room.room_id,time:(new Date).toString(),user_id:e,group_id:a.props.proctoring.room.group_id},(function(e,t){!1===e&&a.setState({error:{target:"main",msg:t}})}))})),a.props.socket.socket.on(T.b.EXAM_DONE_CLIENT,(function(e){return a.props.FC_CandidateDoneExamCenter(e)})),a.props.socket.socket.on(T.b.CAND_EXAM_EVENT_CLIENT,(function(e){return a.props.FC_CandidateExamEvent(e)}))})),a.props.FC_LoadRoomEvents({application_session_id:null===(e=a.props.auth.application_session)||void 0===e?void 0:e._id,exam_id:a.props.proctoring.exam.exam_id,room_id:a.props.proctoring.room.room_id,group_id:a.props.proctoring.room.group_id},(function(e,t){!0===e?a.setState({events_loading:!1}):a.setState({events_loading:!1,error:{target:"main",msg:t}})}))},a.leaveRoom=function(){a.props.socket.socket.off(T.b.USER_CONNECTED),a.props.socket.socket.off(T.b.USER_DISCONNECTED),a.props.socket.socket.off(T.b.CAND_EXAM_EVENT_CLIENT),a.props.FC_ClearExamToRoomProctoring()},a.startCenterProctoring=function(){},a.blank=function(e){return console.log("clicked")},a.ActiveSIdeTabHandler=function(e){return a.setState({active_side_tab:e})},a.SelectCandidateHandler=function(e){return a.setState({selected_candidate:e})},a.startExamHandler=function(){if(a.props.proctoring.candidates.filter((function(e){return!0===e.active})).length<=0)return window.alert("You can't start exam without any active candidate");var e;window.confirm("Are you sure you want to start the exam??")&&(a.props.socket.socket.emit(T.b.START_EXAM_SERVER,{room_id:a.props.proctoring.room.room_id,data:"start exam",description:"The exam started on this room",msg:"The exam started on this room",duration:a.props.proctoring.exam.duration},(function(e){var t=e.start_time,s=e.duration;a.props.FC_ExamStartStop(!0,t,s)})),a.props.FC_SaveEvent({application_session_id:null===(e=a.props.auth.application_session)||void 0===e?void 0:e._id,description:"The exam started on this room",done_by:"Administrator",event_type_id:"EXAM STARTED",exam_id:a.props.proctoring.exam.exam_id,position_id:a.props.proctoring.exam.position_id,room_id:a.props.proctoring.room.room_id,time:(new Date).toString(),user_id:a.props.auth.user.user_id,group_id:a.props.proctoring.room.group_id},(function(e,t){!1===e&&a.setState({error:{target:"main",msg:t}})})))},a.stopExamHandler=function(){var e;window.confirm("Are you sure you want to stop the exam??")&&(a.props.socket.socket.emit(T.b.STOP_EXAM_SERVER,{room_id:a.props.proctoring.room.room_id,description:"Exam stopped on this room"}),a.props.FC_ExamStartStop(!1),a.props.FC_SaveEvent({application_session_id:null===(e=a.props.auth.application_session)||void 0===e?void 0:e._id,description:"Exam stopped on this room",done_by:"Supervisor",event_type_id:"EXAM_STOPPED",exam_id:a.props.proctoring.exam.exam_id,position_id:a.props.proctoring.exam.position_id,room_id:a.props.proctoring.room.room_id,time:(new Date).toString(),user_id:a.props.auth.user.user_id,group_id:a.props.proctoring.room.group_id},(function(e,t){!1===e&&a.setState({error:{target:"main",msg:t}})})))},a.continueHandler=function(e){var t;window.confirm("Alre you sure you want to give this candidate the permition to continue the exam??")&&(a.props.FC_ContinueExam(e),a.props.socket.socket.emit(T.b.CAND_CONTINUE_EXAM_SERVER,{room_id:a.props.proctoring.room.room_id,user_id:e,description:"Allowed a candidate to continue exam"}),a.props.FC_SaveEvent({application_session_id:null===(t=a.props.auth.application_session)||void 0===t?void 0:t._id,description:"Allowed a candidate to continue exam",done_by:"Supervisor",event_type_id:T.b.CAND_CONTINUE_EXAM_CLIENT,exam_id:a.props.proctoring.exam.exam_id,position_id:a.props.proctoring.exam.position_id,room_id:a.props.proctoring.room.room_id,time:(new Date).toString(),user_id:e,group_id:a.props.proctoring.room.group_id},(function(e,t,s){!1===e&&a.setState({error:{target:"main",msg:t}})})))},a.stopCandidateHandler=function(e){var t,s=window.prompt("If you want to stop the candidate add the reason");null!==s&&(a.props.socket.socket.emit(T.b.CAND_STOP_EXAM_SERVER,{room_id:a.props.proctoring.room.room_id,user_id:e,msg:s,description:"STOP: ".concat(s),done_by:"Supervisor",event_type_id:T.b.CAND_STOP_EXAM_CLIENT}),a.props.FC_StopCandidate(e),a.props.FC_SaveEvent({application_session_id:null===(t=a.props.auth.application_session)||void 0===t?void 0:t._id,description:"STOP: ".concat(s),done_by:"Supervisor",event_type_id:T.b.CAND_STOP_EXAM_CLIENT,exam_id:a.props.proctoring.exam.exam_id,position_id:a.props.proctoring.exam.position_id,room_id:a.props.proctoring.room.room_id,time:(new Date).toString(),user_id:e,group_id:a.props.proctoring.room.group_id},(function(e,t){!1===e&&a.setState({error:{target:"main",msg:t}})})))},a.ejectCandidateHandler=function(e){var t,s=window.prompt("If you want to remove the candidate add the reason");null!==s&&(a.props.socket.socket.emit(T.b.CAND_REMOVE_EXAM_SERVER,{room_id:a.props.proctoring.room.room_id,user_id:e,msg:s,description:"REMOVED: ".concat(s),done_by:"Supervisor"}),a.props.FC_SaveEvent({application_session_id:null===(t=a.props.auth.application_session)||void 0===t?void 0:t._id,description:"REMOVED: ".concat(s),done_by:"Supervisor",event_type_id:T.b.CAND_REMOVE_EXAM_CLIENT,exam_id:a.props.proctoring.exam.exam_id,position_id:a.props.proctoring.exam.position_id,room_id:a.props.proctoring.room.room_id,time:(new Date).toString(),user_id:e,group_id:a.props.proctoring.room.group_id},(function(t,s){!1===t?a.setState({error:{target:"main",msg:s}}):a.props.FC_CandidateRemoveExam(e)})))},a.warnCandidateHandler=function(e){var t,s=window.prompt("If you want to warn this candidate, add the reason");null!==s&&(a.props.socket.socket.emit(T.b.CAND_WARNING_EXAM_SERVER,{room_id:a.props.proctoring.room.room_id,user_id:e,msg:"WARNING: ".concat(s),description:"WARNING: ".concat(s)}),a.props.FC_SaveEvent({application_session_id:null===(t=a.props.auth.application_session)||void 0===t?void 0:t._id,description:"WARNING: ".concat(s),done_by:"Supervisor",event_type_id:T.b.CAND_WARNING_EXAM_SERVER,exam_id:a.props.proctoring.exam.exam_id,position_id:a.props.proctoring.exam.position_id,room_id:a.props.proctoring.room.room_id,time:(new Date).toString(),user_id:e,group_id:a.props.proctoring.room.group_id},(function(e,t){!1===e&&a.setState({error:{target:"main",msg:t}})})))},a.restartCandidateHandler=function(e){var t,s=window.prompt("Restart this candidate's exam, reason");null!==s&&(console.log("RESTART EXAM CANDIDATE"),a.props.socket.socket.emit(T.b.CAND_RESTART_EXAM_SERVER,{room_id:a.props.proctoring.room.room_id,user_id:e,msg:"RESTART: ".concat(s),description:"RESTART: ".concat(s)}),a.props.FC_SaveEvent({application_session_id:null===(t=a.props.auth.application_session)||void 0===t?void 0:t._id,description:"RESTART: ".concat(s),done_by:"Supervisor",event_type_id:T.b.CAND_RESTART_EXAM_SERVER,exam_id:a.props.proctoring.exam.exam_id,position_id:a.props.proctoring.exam.position_id,room_id:a.props.proctoring.room.room_id,time:(new Date).toString(),user_id:e,group_id:a.props.proctoring.room.group_id},(function(e,t){!1===e&&a.setState({error:{target:"main",msg:t}})})))},a.focusToggle=function(){return a.setState((function(e){return{focus_mode:!e.focus_mode}}))},a.createAttendance=function(e){var t=e.name,s=e.list;a.props.socket.socket.emit(T.b.CREATE_ROOM_SERVER,{candidates:s,room_id:a.props.proctoring.room.room_id,user_id:a.props.auth.user.user_id,group_id:t,stop_candidate_when_comeback:a.props.proctoring.exam_rules.stop_candidate_when_comeback,exam_id:a.props.proctoring.exam.exam_id},(function(e){!1===e.error?(a.props.FC_RoomDetailsOnline(e.data),a.startListeningToEvents(),a.props.FC_CreateProctoringRoom({candidates:e.data.candidates.filter((function(e){return e.user_id!==a.props.auth.user.user_id})).map((function(e){return{user_id:e.user_id,seat_number:e.seat_number}})),application_session_id:a.props.auth.application_session._id,exam_id:e.data.exam_id,group_id:e.data.group_id,room_id:e.data.room_id,course_id:a.props.proctoring.exam.course_id},(function(e,t){!1===e&&a.setState({error:{msg:t,target:"main"}})}))):a.props.FC_RoomNotFoundOnline(e.msg)}))},a.deleteRoomHandler=function(){if(a.props.proctoring.candidates.filter((function(e){return!0===e.active})).length>=1)return window.alert("You can't delete the group while some candidates are already joined.");var e=window.prompt("Are you sure you want to delete this group??");null!==e&&a.props.socket.socket.emit(T.b.DELETE_ROOM_SERVER,{room_id:a.props.proctoring.room.room_id},(function(t){var s;!0===t?(a.leaveRoom(),a.props.FC_SaveEvent({application_session_id:null===(s=a.props.auth.application_session)||void 0===s?void 0:s._id,description:"ROOM DELETED: ".concat(e),done_by:"Supervisor",event_type_id:"DELETE GROUP ".concat(a.props.proctoring.room.room_number),exam_id:a.props.proctoring.exam.exam_id,position_id:a.props.proctoring.exam.position_id,room_id:a.props.proctoring.room.room_id,time:(new Date).toString(),user_id:a.props.auth.user.user_id,group_id:a.props.proctoring.room.group_id},(function(e,t){!1===e&&a.setState({error:{target:"main",msg:t}})}))):a.setState({error:{target:"main",msg:"Failed to delete the group"}})}))},a.addMinutesModal=function(e){return a.setState({add_minutes:Object(h.a)(Object(h.a)({},a.state.add_minutes),{},{candidate:e,minutes:0,room:!1})})},a.addMinutesHandler=function(e,t){!0===a.state.add_minutes.room&&null===a.state.add_minutes.candidate?a.addMinutesToTheRoom(e,t):a.addMinutesToCandidate(e,t)},a.addMinutesToCandidate=function(e,t){var s;if(window.confirm("Are you sure you want to add ".concat(e," to ").concat(null===(s=a.state.add_minutes.candidate)||void 0===s?void 0:s.fname,"?"))){var r,o,i,n,c,d;if(void 0===(null===(r=a.state.add_minutes.candidate)||void 0===r?void 0:r.user_id))return;!0===a.props.proctoring.exam.exam_done?(d=(new Date).toString(),c=e):(d=null===a.props.proctoring.exam.start_time?"":a.props.proctoring.exam.start_time,c=a.props.proctoring.exam.duration+e);var l={application_session_id:null===(o=a.props.auth.application_session)||void 0===o?void 0:o._id,description:"Added ".concat(e,"min"),done_by:"Supervisor",event_type_id:T.c.ADD_TIME,exam_id:a.props.proctoring.exam.exam_id,position_id:a.props.proctoring.exam.position_id,room_id:a.props.proctoring.room.room_id,time:(new Date).toString(),user_id:null===(i=a.state.add_minutes.candidate)||void 0===i?void 0:i.user_id,group_id:a.props.proctoring.room.group_id};a.props.socket.socket.emit(T.b.ADD_TIME_TO_CANDIDATE_SERVER,{start_time:d,duration:c,minutes:e},l),a.props.FC_AddMinutesToCandidate({user_id:null===(n=a.state.add_minutes.candidate)||void 0===n?void 0:n.user_id,duration:c,start_time:d}),a.props.FC_SaveEvent(l,(function(e,t){!1===e&&a.setState({error:{target:"main",msg:t}})}))}},a.addMinutesToTheRoom=function(e,t){window.confirm("Are you sure you want to add ".concat(e," to the whole room ").concat(!0===a.state.add_minutes.reset_added_minutes&&"And ignore the minutes you added to some candidates?","?"))&&a.props.proctoring.candidates.forEach((function(t){var s,r,o;!0===a.props.proctoring.exam.exam_done?(o=(new Date).toString(),r=!0===a.state.add_minutes.reset_added_minutes?e:e+t.added_minutes):(o=null===a.props.proctoring.exam.start_time?"":a.props.proctoring.exam.start_time,r=!0===a.state.add_minutes.reset_added_minutes?a.props.proctoring.exam.duration+e:a.props.proctoring.exam.duration+e+t.added_minutes);var i={application_session_id:null===(s=a.props.auth.application_session)||void 0===s?void 0:s._id,description:"Added ".concat(e,"min"),done_by:"Supervisor",event_type_id:T.c.ADD_TIME,exam_id:a.props.proctoring.exam.exam_id,position_id:a.props.proctoring.exam.position_id,room_id:a.props.proctoring.room.room_id,time:(new Date).toString(),user_id:null===t||void 0===t?void 0:t.user_id,group_id:a.props.proctoring.room.group_id};a.props.socket.socket.emit(T.b.ADD_TIME_TO_CANDIDATE_SERVER,{start_time:o,duration:r,minutes:e},i),a.props.FC_SaveEvent(i,(function(e,t){!1===e&&a.setState({error:{target:"main",msg:t}})}))}))},a.addMinutesToRoomModal=function(){return a.setState({add_minutes:Object(h.a)(Object(h.a)({},a.state.add_minutes),{},{candidate:null,minutes:0,room:!0})})},a.reset_added_minutesHandler=function(){a.setState({add_minutes:Object(h.a)(Object(h.a)({},a.state.add_minutes),{},{reset_added_minutes:!a.state.add_minutes.reset_added_minutes})})},a.backToProctoringCenter=function(){return a.props.FC_ClearProctoring()},a.state={room_found:!1,focus_mode:!1,loading_room:!0,loading:!1,events:[],active_side_tab:S.Events,selected_candidate:null,online_room:!1,online_candidates:[],start_exam:!1,error:{msg:"",target:""},events_loading:!0,start_time:"",duration:0,add_minutes:{candidate:null,minutes:0,room:!1,reset_added_minutes:!0}},a}return Object(o.a)(s,[{key:"render",value:function(){var e=this;if("wrong-room"===this.state.error.target)return Object(O.jsxs)("div",{className:"text-center p-8 mx-2 rounded bg-white m-6 animate__animated animate__zoomIn animate__faster",children:[Object(O.jsx)("h1",{className:"font-bold text-3xl text-red-800",children:this.state.error.msg}),Object(O.jsxs)("p",{className:"text-gray-600",children:["The you created a group which is doing another exam ",Object(O.jsx)("br",{})," Please go back the the created room"]}),Object(O.jsx)("button",{className:"btn bg-blue-500 p-2 px-3 text-white rounded hover:bg-blue-600 mt-3",onClick:this.backToProctoringCenter.bind(this),children:"Back to exams list"})]});var t=this.props.proctoring.candidates.filter((function(e){return!0===e.active&&!1===e.done})),s=this.props.proctoring.candidates.filter((function(e){return!1===e.active||!0===e.done}));if(!0===this.props.proctoring.room_not_found)return Object(O.jsx)(I,{createAttendance:this.createAttendance});var a=this.props.proctoring.candidates.filter((function(e){return!0===e.active})).length;return Object(O.jsxs)("div",{className:"".concat(!1===this.state.focus_mode?" p-1 ":"fixed right-0 left-0 bottom-0 top-0 z-50 overflow-y-auto"," transition-all ease-in-out"),children:[(null!==this.state.add_minutes.candidate&&!1===this.state.add_minutes.room||!0===this.state.add_minutes.room&&null===this.state.add_minutes.candidate)&&0===this.state.add_minutes.minutes&&Object(O.jsx)(P,{candidate:this.state.add_minutes.candidate,close:function(){return e.setState({add_minutes:Object(h.a)(Object(h.a)({},e.state.add_minutes),{},{candidate:null,minutes:0,room:!1})})},addMinutesHandler:this.addMinutesHandler,reset_added_minutes:this.state.add_minutes.reset_added_minutes,reset_added_minutesHandler:this.reset_added_minutesHandler}),"main"===this.state.error.target&&Object(O.jsx)("div",{className:"animate__animated animate__slideInDown p-2 rounded-md animate__faster text-center text-sm bg-red-200 text-red-900",onClick:function(){return e.setState({error:{target:"",msg:""}})},children:this.state.error.msg}),Object(O.jsx)(f,{focusToggle:this.focusToggle,focus_mode:this.state.focus_mode,course_title:this.props.proctoring.exam.course_name,post_title:this.props.proctoring.exam.position_title,duration:this.props.proctoring.exam.duration,started_at:this.props.proctoring.exam.start_time,exam_start:this.props.proctoring.exam.start_exam,startExamHandler:this.startExamHandler,stopExamHandler:this.stopExamHandler,leaveRoom:this.leaveRoom,room:this.props.proctoring.room,active_candidate:a,deleteRoom:this.deleteRoomHandler,ExamDone:this.props.FC_ExamDone,exam_rules:this.props.proctoring.exam_rules,exam_done:this.props.proctoring.exam.exam_done,addMinutesToRoom:this.addMinutesToRoomModal}),Object(O.jsx)("div",{className:"".concat(!0===this.state.focus_mode?"proctoring-body-contents text-white":"","  h-screen"),children:Object(O.jsxs)("div",{className:"lg:flex",children:[Object(O.jsx)("div",{className:"flex-1 pt-3 lg:h-screen overflow-y-auto",children:!1===this.props.proctoring.candidate_loaded?Object(O.jsxs)("div",{className:"p-8 text-center animate__animated animate__zoomIn",children:[Object(O.jsx)(F.a,{}),Object(O.jsx)("h2",{className:"text-xl font-bold text-gray-400",children:"Loading room details..."})]}):Object(O.jsxs)("div",{className:"animate__animated animate__zoomI",children:[Object(O.jsxs)("div",{className:"".concat(!0===this.state.focus_mode?"bg-blue-900 bg-opacity-30":"bg-gray-100"," rounded-md mb-4"),children:[Object(O.jsxs)("h3",{className:"text-2xl font-bold  pt-1.5 pb-1 px-2 rounded flex items-center ".concat(!0===this.state.focus_mode?"text-blue-100 bg-blue-900":"text-white bg-gray-500"," pb-1 mb-1"),children:[Object(O.jsx)("span",{className:"flex-1",children:"Active candidates "}),Object(O.jsx)("span",{className:"inline-block mr-1 p-0.5 bg-green-700 text-white text-md py-0 px-2 rounded-full",children:t.length})]}),0===t.length?Object(O.jsxs)("div",{className:"py-8 text-center w-full",children:[Object(O.jsx)(x.S,{className:"inline-block text-6xl"}),Object(O.jsx)("h3",{className:"text-center text-2xl font-bold",children:"No active candidates"}),Object(O.jsx)("h3",{className:"text-center text-gray-500",children:"Active candidate is any candidate who is online and still doing the exam"})]}):Object(O.jsx)("div",{className:"grid grid-flow-row sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-4 2xl:grid-cols-5 gap-4 p-2",children:t.map((function(t,s){return Object(O.jsx)(A,{focus_mode:e.state.focus_mode,candidate:t,stopHandler:e.stopCandidateHandler,warningHandler:e.warnCandidateHandler,detailsHandler:e.SelectCandidateHandler,continueHandler:e.continueHandler,exam_started:e.props.proctoring.exam.start_exam,exam_done:e.props.proctoring.exam.exam_done,addMinutes:e.addMinutesModal,duration:e.props.proctoring.exam.duration},s)}))})]}),0!==s.length&&Object(O.jsxs)("div",{className:"".concat(!0===this.state.focus_mode?"bg-blue-900 bg-opacity-30":"bg-gray-100"," rounded-md"),children:[Object(O.jsxs)("h3",{className:"text-2xl font-bold  pt-1.5 pb-1 px-2 rounded flex items-center ".concat(!0===this.state.focus_mode?"text-blue-100 bg-blue-900":"text-white bg-gray-500"," pb-1 mb-1"),children:[Object(O.jsx)("span",{className:"flex-1",children:"Others candidates "}),Object(O.jsx)("span",{className:"inline-block mr-1 p-0.5 bg-green-700 text-white text-md py-0 px-2 rounded-full",children:s.length})]}),Object(O.jsx)("div",{className:"mt-3 mx-2 pb-2",children:Object(O.jsx)(k,{candidates:s,clickHandler:this.SelectCandidateHandler,show_title:!1,focus_mode:this.state.focus_mode,large:!0})})]})]})}),Object(O.jsxs)("div",{className:"".concat(!0===this.state.focus_mode?"proctoring-side-section border-blue-500  border-opacity-30":"lg:bg-gray-100 "," p-2  lg:w-2/6 transition-all ease-in-out  lg:h-screen overflow-y-auto lg:ml-2 lg:border-l "),children:[" ",(!0===this.props.proctoring.exam.start_exam||!0===this.props.proctoring.exam.exam_done)&&Object(O.jsx)(N,{focus_mode:this.state.focus_mode,candidates:this.props.proctoring.candidates}),null===this.state.selected_candidate?Object(O.jsxs)(m.a.Fragment,{children:[Object(O.jsxs)("div",{className:"my-2 p-1 rounded-md bg-blue-800 bg-opacity-60 grid grid-col-2 grid-flow-col gap-1",children:[Object(O.jsx)("button",{onClick:this.ActiveSIdeTabHandler.bind(this,S.Events),className:"btn rounded-md bg-blue-700 text-blue-100 ".concat(this.state.active_side_tab===S.Events?"border-2 border-blue-400":"bg-blue-800 bg-opacity-60"),children:"Event list"}),Object(O.jsx)("button",{onClick:this.ActiveSIdeTabHandler.bind(this,S.Candidates),className:"btn rounded-md bg-blue-700 text-blue-100 ".concat(this.state.active_side_tab===S.Candidates?"border-2 border-blue-400":"bg-blue-800 bg-opacity-60"),children:"Candidates"})]}),this.state.active_side_tab===S.Events?Object(O.jsx)(y,{candidates:this.props.proctoring.candidates,events:this.props.proctoring.events,focus_mode:this.state.focus_mode,loading:!1}):Object(O.jsx)(k,{candidates:this.props.proctoring.candidates,clickHandler:this.SelectCandidateHandler,focus_mode:this.state.focus_mode,show_title:!1,large:!1})]}):Object(O.jsx)(w,{candidate:this.props.proctoring.candidates.find((function(t){return t.user_id===e.state.selected_candidate})),events:this.props.proctoring.events.filter((function(t){return t.user_id===e.state.selected_candidate})),removeInExam:this.ejectCandidateHandler,chatHandler:this.blank,micHandler:this.blank,focusHandler:this.blank,stopHandler:this.stopCandidateHandler,restartHandler:this.restartCandidateHandler,warnHandler:this.warnCandidateHandler,closeHandler:function(){return e.SelectCandidateHandler(null)},home_proctoring:!1,exam_started:this.props.proctoring.exam.start_exam,focus_mode:this.state.focus_mode})]})]})})]})}}]),s}(m.a.Component),X=Object(b.b)((function(e){return{socket:e.socket,auth:e.auth,proctoring:e.proctoring}}),{FC_GetProctoringRoom:u.K,FC_SetActiveCandidates:u.cb,FC_SetOneActiveCandidate:u.db,FC_CandidateOffline:u.p,FC_ExamStartStop:u.E,FC_ContinueExam:u.z,FC_StopCandidate:u.eb,FC_CandidateExamEvent:u.o,FC_ClearExamToRoomProctoring:u.w,FC_SaveEvent:u.bb,FC_LoadRoomEvents:u.P,FC_CandidateRemoveExam:u.q,FC_RoomNotFoundOnline:u.ab,FC_RoomDetailsOnline:u.Z,FC_CandidateDoneExamCenter:u.m,FC_ExamDone:u.D,FC_CandidateTimeOut:u.r,FC_AddMinutesToCandidate:u.i,FC_CreateProctoringRoom:u.A,FC_ClearProctoring:u.x})(V),U=function(e){Object(i.a)(s,e);var t=Object(n.a)(s);function s(e){var a;return Object(r.a)(this,s),(a=t.call(this,e)).componentDidMount=function(){a.props.auth.user_access.room_id.length>=3&&""===a.props.proctoring.room.room_id&&(a.setState({loading_room_details:!0}),a.props.FC_RoomDetails(a.props.auth.user_access.room_id,(function(e,t){var s;!0===e?(a.setState({loading_room_details:!1}),void 0!==a.props.auth.application_session._id&&""!==a.props.auth.application_session._id?(a.setState({get_exams_list:!1}),a.props.FC_ExamsDetailsData(null===(s=a.props.auth.application_session)||void 0===s?void 0:s._id,(function(e,t){!1===e?a.setState({exams_error:!0,exams_error_msg:t,get_exams_list:!1}):a.setState({get_exams_list:!1})}))):a.setState({error:!0,errorMsg:"No application session found"})):a.setState({error:!0,errorMsg:t,loading_room_details:!1})})))},a.state={error:!1,errorMsg:"",exams_error:!1,exams_error_msg:"",search_text:"",loading_room_details:!1,get_exams_list:!1},a}return Object(o.a)(s,[{key:"render",value:function(){var e=this;if(!0===this.state.error)return Object(O.jsx)("div",{className:"mt-4",children:Object(O.jsxs)("div",{className:"p-5 bg-red-100 rounded-md mx-auto text-center text-red-900 animate__animated animate__bounceIn",children:[Object(O.jsx)("h1",{className:"text-3xl font-bold",children:"Failed do load data"}),Object(O.jsx)("p",{children:this.state.errorMsg})]})});if(!1===this.state.error&&!1===this.props.proctoring.room.loaded)return Object(O.jsx)("div",{className:"m-5 text-center",children:Object(O.jsx)("h5",{className:"text-gray-400 animate__animated animate__fadeIn animate__infinite text-xl",children:"Loading room details"})});var t=this.props.proctoring.room,s=t.room_number,a=t.center_name,r=t.district_name,o=t.province_name;if(""!==this.props.proctoring.exam.course_id&&""!==this.props.proctoring.exam.position_id)return Object(O.jsx)(X,{});var i=Object(j.a)(this.props.proctoring.room_exams,this.state.search_text,{course_id:!0,course_name:!0,course_code:!0});return Object(O.jsx)(l.Fragment,{children:Object(O.jsxs)("div",{className:"mr-2",children:[Object(O.jsxs)("div",{className:"p-5 bg-white rounded-b-md ",children:[Object(O.jsx)("h2",{className:"text-2xl text-gray-600 font-bold text-center border-b pb-2",children:"Room details"}),Object(O.jsxs)("div",{className:"flex flex-col md:flex-row",children:[Object(O.jsxs)("div",{className:"flex flex-1 items-center",children:[Object(O.jsx)("div",{className:"p-4",children:Object(O.jsx)(x.Z,{className:"text-4xl"})}),Object(O.jsxs)("div",{className:"p-2 pt-3 flex-1",children:[Object(O.jsxs)("div",{className:"mb-1",children:[Object(O.jsx)("span",{className:"text-gray-400",children:"Province:"})," ",Object(O.jsxs)("b",{children:[" ",o]})]}),Object(O.jsxs)("div",{className:"mb-1",children:[Object(O.jsx)("span",{className:"text-gray-400",children:"District:"})," ",Object(O.jsxs)("b",{children:[" ",r]})]})]})]}),Object(O.jsxs)("div",{className:"flex flex-1 items-center",children:[Object(O.jsx)("div",{className:"p-4",children:Object(O.jsx)(p.j,{className:"text-4xl"})}),Object(O.jsxs)("div",{className:"p-2 flex-1",children:[Object(O.jsxs)("div",{className:"mb-1",children:[Object(O.jsx)("span",{className:"text-gray-400",children:"Center name:"})," ",Object(O.jsxs)("b",{children:[" ",a]})]}),Object(O.jsxs)("div",{className:"mb-1",children:[Object(O.jsx)("span",{className:"text-gray-400",children:"Room Number:"})," ",Object(O.jsxs)("b",{children:[" ",s]})]})]})]})]})," "]}),!0===this.state.loading_room_details&&Object(O.jsx)("div",{className:"p-2 rounded-md text-center bg-blue-400 text-white animate__fadeIn animate__animated animate__infinite my-2",children:"Loading room details..."}),!0===this.state.get_exams_list&&Object(O.jsx)("div",{className:"p-2 rounded-md text-center bg-blue-400 text-white animate__fadeIn animate__animated animate__infinite my-2",children:"Loading exams..."}),Object(O.jsx)("h2",{className:"mt-5 text-2xl font-bold text-gray-500",children:"Exams on this room"}),Object(O.jsx)("div",{className:"mt-2 p-2 bg-white rounded-md",children:this.props.proctoring.room_exams.length<=0?Object(O.jsx)("div",{className:"p-5 text-center",children:"No exams assigned to this room"}):Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("div",{className:"pt-1 pb-3",children:Object(O.jsx)("input",{type:"search",onChange:function(t){return e.setState({search_text:t.target.value})},value:this.state.search_text,className:"input bg-gray-100 p-1",placeholder:"Search"})}),Object(O.jsxs)("table",{className:"w-full text-left",children:[Object(O.jsx)("thead",{className:"bg-gray-100 rounded-md",children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{className:"p-2",children:"#"}),Object(O.jsx)("th",{className:"p-2",children:"Course"}),Object(O.jsx)("th",{className:"p-2",children:"Position"}),Object(O.jsx)("th",{className:"p-2",children:"Code"}),Object(O.jsx)("th",{className:"p-2",children:"Date"}),Object(O.jsx)("th",{className:"p-2"})]})}),Object(O.jsxs)("tbody",{children:[0===i.length&&Object(O.jsx)("tr",{children:Object(O.jsx)("td",{colSpan:7,className:"py-6 text-center",children:Object(O.jsx)("h2",{className:"text-3xl text-gray-500",children:"No data found"})})}),i.map((function(t,s){var a=e.props.proctoring.exams_list.exams.find((function(e){return e.course===t.course_id}));return void 0===a?null:Object(O.jsxs)("tr",{className:"p-2 border-t group hover:bg-blue-50",children:[Object(O.jsx)("td",{className:"p-2 text-gray-400",children:s+1}),Object(O.jsx)("td",{className:"p-2 font-bold",children:t.course_name}),Object(O.jsx)("td",{className:"p-2",children:Object(O.jsx)("span",{className:"p-1 text-sm bg-yellow-100 font-bold text-yellow-900 rounded",children:t.position_title})}),Object(O.jsx)("td",{className:"p-2",children:t.course_code}),Object(O.jsx)("td",{className:"p-2 text-sm",children:!1===e.state.error&&!1===e.props.proctoring.exams_list.loaded?Object(O.jsx)("span",{className:"text-blue-500 animate__animated animate__fadeIn animate__infinite",children:"Loading..."}):void 0===a?"Not found":d()(a.exam_date).format("LLLL")}),Object(O.jsx)("td",{className:"p-2 text-right",children:void 0!==a&&void 0!==a&&Object(O.jsxs)(l.Fragment,{children:[t.course_id===e.props.proctoring.exam.course_id&&t.position_id===e.props.proctoring.exam.position_id&&Object(O.jsx)("button",{className:" group-hover:bg-red-500 py-1 px-3 rounded text-red-500 group-hover:text-white bg-red-100",onClick:function(){return window.confirm("Are you sure you want to exist the room")&&e.props.FC_ClearExamToRoomProctoring()},children:"Leave Room"}),""===e.props.proctoring.exam.room_id&&Object(O.jsx)("button",{onClick:function(){void 0!==a&&void 0!==a&&null!==t&&void 0!==t&&(e.props.FC_LoadExamToRoomProctoring({video_support:!1,start_exam:!1,start_time:null===a||void 0===a?void 0:a.start_time,end_time:"",exam_done:!1,period_id:e.props.auth.application_session._id,exam_status:null===a||void 0===a?void 0:a.exam_status,exam_date:null===a||void 0===a?void 0:a.exam_date,duration:null===a||void 0===a?void 0:a.duration,position_id:t.position_id,position_title:t.position_title,course_id:t.course_id,course_code:t.course_code,course_name:t.course_name,room_id:e.props.proctoring.room.room_id,exam_id:a.id}),e.props.FC_AddRules(a.rules))},className:" group-hover:bg-blue-500 py-1 px-3 rounded text-blue-500 group-hover:text-white bg-blue-100",children:"Open"})]})})]},s)}))]})]})]})})]})})}}]),s}(m.a.Component),z=Object(b.b)((function(e){return{auth:e.auth,proctoring:e.proctoring}}),{FC_RoomDetails:u.X,FC_ExamsDetailsData:u.F,FC_LoadExamToRoomProctoring:u.O,FC_ClearExamToRoomProctoring:u.w,FC_AddRules:u.j})(U)}}]);
//# sourceMappingURL=44.fdf1f6d2.chunk.js.map