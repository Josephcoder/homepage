(this["webpackJsonpreact-redux-typescript-advance"]=this["webpackJsonpreact-redux-typescript-advance"]||[]).push([[41],{1332:function(t,e,n){"use strict";n.r(e),n.d(e,"AdminDashboard",(function(){return k}));var i=n(25),s=n(24),o=n(27),a=n(26),c=n(4),r=n.n(c),l=n(71),d=n(67),u=n(23),p=n(3),h=n(205),b=n(203),j=n(685),x=n(21),f=n(32),g=n(14),m=n(28),O=n(683),_=n(122),y=n(49),v=n(51),C=n(12),S=n(724),P=n(1),N=function(t){return Object(P.jsxs)("div",{className:"grid lg:grid-cols-4 md:grid-cols-3 sm:grid-cols-2 grid-cols-1 gap-4 items-center mx-auto",children:[Object(P.jsx)(S.a,{title:"Applicants",icon:y.s,iconColor:"blue",count:t.applicants}),Object(P.jsx)(S.a,{title:"Positions",icon:v.k,iconColor:"gray",count:t.positions,countOver:t.allPositions}),Object(P.jsx)(S.a,{title:"Applications",icon:C.O,iconColor:"indigo",count:t.applications}),Object(P.jsx)(S.a,{title:"Remaining",icon:_.e,iconColor:"yellow",count:t.applications-(t.shortlisted+t.rejected)}),Object(P.jsx)(S.a,{title:"Shortlisted",icon:C.t,iconColor:"green",count:t.shortlisted}),Object(P.jsx)(S.a,{title:"Rejected",icon:C.B,iconColor:"red",count:t.rejected})]})},w=r.a.memo(N),A=n(217),E=r.a.memo(Object(u.b)((function(t){return{auth:t.auth}}),{GetApplicationPerPeriod:A.b,PushPopupAlert:p.Ub})((function(t){return Object(P.jsxs)("div",{className:"mt-3 rounded flex flex-col md:flex-row md:justify-between items-start",children:[Object(P.jsxs)("div",{className:"flex flex-row items-center gap-3 mb-2",children:[Object(P.jsx)(_.b,{className:"text-6xl text-blue-600 hidden md:block"}),Object(P.jsx)("div",{className:"flex flex-col",children:Object(P.jsx)("span",{className:"text-blue-600 text-3xl font-bold",children:t.reportTitle})})]}),Object(P.jsxs)("section",{className:"w-full md:w-auto my-2 md:my-0",children:[Object(P.jsx)("section",{children:!1===Object(m.d)(t.auth.education_institution_id)&&t.education_categories&&t.education_categories.length>0&&Object(P.jsx)("div",{className:"flex items-start md:items-center justify-start md:justify-end gap-2",children:t.education_categories.map((function(e,n){return Object(P.jsx)("div",{onClick:function(){!t.loading&&!t.loadingEducation&&t.setThisEducation(e),!t.loading&&!t.loadingEducation&&t.FC_OnInstitutionChanged(e.education_institute_id)},className:"w-auto ".concat(t.loading||t.loadingEducation?"cursor-not-allowed":"cursor-pointer"," ").concat(t.thisEducation&&e.education_institute_id===t.thisEducation.education_institute_id?"bg-blue-500 text-white font-bold":"bg-gray-100 text-blue-800"," mb-1 hover:font-bold py-1 hover:bg-blue-400 hover:text-white --font-bold  px-2 rounded-md flex items-center animate__animated animate__zoomIn"),children:Object(P.jsxs)("div",{className:"flex-1",children:[Object(P.jsx)(C.o,{className:"inline-block mr-1 text-xs"}),Object(P.jsx)("span",{children:e.education_category_title})]})},n+e.education_institute_id)}))})}),Object(P.jsx)("div",{className:"mb-2",children:Object(P.jsx)("select",{className:"bg-white text-gray-600 border border-gray-400 rounded p-2 focus:outline-none ".concat((t.loadingApplications||null===t.application_sessions)&&"cursor-wait"),value:t.thisPeriod,disabled:t.loading||t.loadingApplications||t.loadingEducation||null===t.application_sessions,onChange:function(e){t.setThisPeriod(e.target.value),t.setLoadingApplications(!0),t.FC_OnSessionChanged(e.target.value)},children:t.application_sessions&&t.application_sessions.map((function(t,e){return Object(P.jsx)("option",{value:t._id,children:t.session_plan_name},t._id+e)}))})})]})]})}))),T=function(t){Object(o.a)(n,t);var e=Object(a.a)(n);function n(t){var s;return Object(i.a)(this,n),(s=e.call(this,t)).setLoading=function(t){s.setState({loading:t})},s.setLoadingEducation=function(t){s.setState({loadingEducation:t})},s.setLoadingApplications=function(t){s.setState({loadingApplications:t})},s.setThisEducation=function(t){s.setState({thisEducation:t})},s.setThisPeriod=function(t){s.setState({thisPeriod:t})},s.FC_OnInstitutionChanged=function(t){s.props.FC_GetPositionsByInstitution(t,(function(t,e){s.setLoading(t),console.log({status:t,msg:e}),e.length&&s.props.PushPopupAlert({title:e,theme:x.a.danger})})),s.props.FC_GetAllSessionByInstitution(t,(function(t,e,n){if(s.setLoading(t),!t&&(Object(f.f)(e)||s.props.PushPopupAlert({title:e,theme:x.a.warning}),n&&n.length>0)){var i=n.find((function(t){return t.is_active}));i?(s.setThisPeriod(i._id),s.FC_OnSessionChanged(i._id)):(s.setThisPeriod(n[0]._id),s.FC_OnSessionChanged(n[0]._id))}}))},s.FC_OnSessionChanged=function(t){Object(p.U)(t,(function(t,e,n){s.setLoadingEducation(t),s.setState({applicationsCounts:n}),!t&&e.length>0&&s.props.PushPopupAlert({title:Object(g.a)(e),theme:x.a.danger})}))},s.componentDidMount=function(){if(null===s.props.education_categories||s.props.education_categories.length)s.props.loadEducationCategories((function(t,e){if(s.setLoading(t),!t&&e&&e.length>0)if(!1===Object(m.d)(s.props.auth.education_institution_id))s.setThisEducation(e[0]),s.FC_OnInstitutionChanged(e[0].education_institute_id);else{var n=e.find((function(t){return t.education_institute_id===s.props.auth.education_institution_id}));s.setThisEducation(n||e[0]),s.FC_OnInstitutionChanged(s.props.auth.education_institution_id)}}));else if(null===s.state.thisEducation)if(!1===Object(m.d)(s.props.auth.education_institution_id))s.setThisEducation(s.props.education_categories[0]),s.FC_OnInstitutionChanged(s.props.education_categories[0].education_institute_id);else{s.FC_OnInstitutionChanged(s.props.auth.education_institution_id);var t=s.props.education_categories.find((function(t){return t.education_institute_id===s.props.auth.education_institution_id}));s.setThisEducation(t||s.props.education_categories[0])}},s.setSortOrder=function(t){s.setState({sortOrder:t})},s.setSortProperty=function(t){s.setState({sortProperty:t})},s.setIsSorted=function(t){s.setState({isSorted:t})},s.setSort=function(t){s.state.sortProperty===t&&"ASC"===s.state.sortOrder?s.setSortOrder("DESC"):s.setSortOrder("ASC"),s.setSortProperty(t),s.setIsSorted(!0)},s.FC_PositionCount=function(t,e){var n={data:[],positions:0,rejected:0,shortlisted:0,labels:[]},i=function(i){var s=e.totalApplicationOnPosition.find((function(e){return e._id===t[i].position_id})),o=e.totalRejectedApplicationApplication.find((function(e){return e._id===t[i].position_id})),a=e.totalShortListedApplication.find((function(e){return e._id===t[i].position_id}));n.data.push({_id:t[i].position_id,position_name:t[i].position_title,applications:s?s.total:0,rejected:o?o.total:0,shortlisted:a?a.total:0}),n.labels.push(t[i].position_title),n.positions+=s&&s.total>0?1:0,n.shortlisted+=a?a.total:0,n.rejected+=o?o.total:0};for(var s in t)i(s);return n},s.state={loading:!0,loadingEducation:!0,loadingApplications:!1,thisEducation:null,thisPeriod:"",chooseSession:!0,applicationsCounts:null,sortProperty:"",isSorted:!1,sortOrder:"ASC",displayTabs:"table"},s}return Object(s.a)(n,[{key:"render",value:function(){var t=this;if(null===this.props.application_sessions||null===this.props.education_categories||null===this.state.applicationsCounts||null===this.props.systemPositions||this.state.loading||this.state.loadingEducation)return Object(P.jsx)("div",{className:"text-center mt-7 font-bold text-4xl text-gray-400 animate-pulse",children:"Loading Data..."});if(0===this.props.application_sessions.length)return Object(P.jsx)(O.a,{});var e=this.FC_PositionCount(this.props.systemPositions,this.state.applicationsCounts);return Object(P.jsxs)("div",{children:[Object(P.jsx)(E,{education_categories:this.props.education_categories,loading:this.state.loading,loadingApplications:this.state.loadingApplications,loadingEducation:this.state.loadingEducation,thisEducation:this.state.thisEducation,setThisEducation:this.setThisEducation,thisPeriod:this.state.thisPeriod,setThisPeriod:this.setThisPeriod,application_sessions:this.props.application_sessions,setLoadingApplications:this.setLoadingApplications,reportTitle:"Application Dashboard",allEducation:!1,FC_OnInstitutionChanged:this.FC_OnInstitutionChanged,FC_OnSessionChanged:this.FC_OnSessionChanged}),Object(P.jsx)(w,{applicants:this.state.applicationsCounts.totalApplicants,applications:this.state.applicationsCounts.totalApplications,shortlisted:e.shortlisted,rejected:e.rejected,positions:e.positions,allPositions:this.props.systemPositions.length}),Object(P.jsx)("div",{className:"my-8",children:"table"===this.state.displayTabs&&Object(P.jsxs)("table",{className:"w-full shadow",id:"report_content",children:[Object(P.jsx)("thead",{className:"bg-white border-b-2 border-gray-300 text-gray-600 font-bold text-sm",children:Object(P.jsxs)("tr",{children:[Object(P.jsx)("td",{className:"px-2 py-2",children:"#"}),Object(P.jsx)("td",{className:"px-2 py-2 cursor-pointer",onClick:function(){return t.setSort("position_name")},children:Object(P.jsxs)("div",{className:"flex items-center gap-1",children:["Position ",Object(P.jsx)(l.k,{})]})}),Object(P.jsx)("td",{className:"px-2 py-2 cursor-pointer",onClick:function(){return t.setSort("applications")},children:Object(P.jsxs)("div",{className:"flex items-center gap-1",children:["Application ",Object(P.jsx)(l.k,{})]})}),Object(P.jsx)("td",{className:"px-2 py-2 cursor-pointer",onClick:function(){return t.setSort("shortlisted")},children:Object(P.jsxs)("div",{className:"flex items-center gap-1",children:["Shortlisted ",Object(P.jsx)(l.k,{})]})}),Object(P.jsx)("td",{className:"px-2 py-2 cursor-pointer",onClick:function(){return t.setSort("rejected")},children:Object(P.jsxs)("div",{className:"flex items-center gap-1",children:["Rejected ",Object(P.jsx)(l.k,{})]})})]})}),Object(P.jsx)("tbody",{children:0===e.data.length?Object(P.jsx)("tr",{children:Object(P.jsx)("td",{colSpan:5,className:"px-2 py-2",children:Object(P.jsxs)("div",{className:"flex flex-col text-gray-400 items-center justify-center bg-gray-100 rounded py-10",children:[Object(P.jsx)(d.c,{className:"text-8xl text-gray-400 mb-2 animate__animated animate__shakeX"}),Object(P.jsx)("span",{className:"text-sm font-bold",children:"No result found! Please try to search again"}),Object(P.jsx)("div",{className:"w-full mt-2 flex flex-row items-center justify-center",children:Object(P.jsx)("ul",{className:"text-sm py-2 text-blue-600 font-bold flex flex-row gap-2",children:Object(P.jsx)("li",{className:"underline text-gray-500 cursor-pointer",children:"Filter by session"})})})]})})}):Object(m.r)(this.state.isSorted,e.data,this.state.sortProperty,this.state.sortOrder).map((function(t,e){return Object(P.jsxs)("tr",{className:"".concat(e%2!==0?"bg-gray-100":"bg-white"," hover:bg-blue-100 hover:text-blue-700 border-b hover:border-blue-500 text-base text-gray-600 border-gray-300"),children:[Object(P.jsx)("td",{className:"px-2 py-2",children:e+1}),Object(P.jsx)("td",{className:"px-2 py-2",children:t.position_name}),Object(P.jsx)("td",{className:"px-2 py-2",children:t.applications}),Object(P.jsx)("td",{className:"px-2 py-2",children:t.shortlisted}),Object(P.jsx)("td",{className:"px-2 py-2",children:t.rejected})]},e+t._id)}))})]})})]})}}]),n}(c.Component),k=Object(u.b)((function(t){var e=t.auth,n=t.locations,i=t.schoolLevels,s=t.dashboard,o=t.course,a=t.system_settings,c=t.sessionPlan;return{auth:e,locations:n.roomLocation,education_categories:i.education_categories,dashboard:s,course:o,systemPositions:a.systemPositions,application_sessions:c.allSessionPlans}}),{getAllRoom:h.q,loadEducationCategories:p.Mc,FC_GetPositionsByInstitution:j.a,FC_GetAllSessionByInstitution:b.b,GetApplicationPerPeriod:p.Mb,loadCourses:p.Kc,PushPopupAlert:p.Ub})(T)},683:function(t,e,n){"use strict";var i=n(4),s=n.n(i),o=n(51),a=n(1),c=function(t){t.title;var e=t.description,n=void 0===e?"Please Wait for the system to publish the sessions or contact the administrator":e,i=t.content,s=void 0===i?void 0:i;return Object(a.jsx)("div",{className:"w-full my-5",children:Object(a.jsxs)("section",{className:"py-10 flex flex-col items-center rounded border border-gray-300 bg-white text-2xl font-medium text-yellow-800 animate__animated animate__pulse",children:[Object(a.jsxs)("div",{className:"flex flex-col items-center",children:[Object(a.jsx)(o.q,{className:"w-32 h-32"}),n]}),s&&s,!1]})})};e.a=s.a.memo(c)},685:function(t,e,n){"use strict";n.d(e,"f",(function(){return h})),n.d(e,"d",(function(){return b})),n.d(e,"b",(function(){return j})),n.d(e,"e",(function(){return x})),n.d(e,"c",(function(){return f})),n.d(e,"g",(function(){return g})),n.d(e,"a",(function(){return m}));var i=n(5),s=n.n(i),o=n(7),a=n(10),c=n.n(a),r=n(6),l=n(8),d=n(16),u=n(14),p="".concat(l.a.AUTH,"/auth/user/access"),h=function(t){return function(){var e=Object(o.a)(s.a.mark((function e(n){var i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(!0,""),e.prev=1,Object(d.b)(),e.next=5,c.a.get("".concat(l.a.AUTH,"/system/setting"));case 5:i=e.sent,console.log("=================getSystemSettings==================="),console.log(i),console.log("=================getSystemSettings==================="),n({type:r.a.GET_SYSTEM_SETTINGS,payload:i.data}),t(!1,""),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),console.log({code_error:e.t0}),t(!1,Object(u.a)(e.t0));case 17:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}()},b=function(t){return function(){var e=Object(o.a)(s.a.mark((function e(n){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n({type:r.a.DISABLE_SYSTEM_SETTINGS,payload:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},j=function(t){return function(){var e=Object(o.a)(s.a.mark((function e(n){var i,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(!0,""),e.prev=1,Object(d.b)(),e.next=5,c.a.get("".concat(p,"/roleaccess"));case 5:i=e.sent,o=i.data.map((function(t){return{id:t.id,task:t.title,key:t.key,permitted:t.permitted}})),n({type:r.a.GET_TASK_ACCESS,payload:o}),t(!1,"",o),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),console.log({code_error:e.t0}),t(!1,Object(u.a)(e.t0));case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}()},x=function(t){return function(){var e=Object(o.a)(s.a.mark((function e(n){var i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(!0,""),e.prev=1,Object(d.b)(),e.next=5,c.a.get("".concat(l.a.APPLICATION,"/position"));case 5:i=e.sent,n({type:r.a.GET_POSTIONS,payload:i.data}),t(!1,""),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),console.log({code_error:e.t0}),t(!1,Object(u.a)(e.t0));case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}()},f=function(t){return console.log({deletePosition:t}),function(){var e=Object(o.a)(s.a.mark((function e(n){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n({type:r.a.DELETE_POSITION,payload:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},g=function(t){return function(){var e=Object(o.a)(s.a.mark((function e(n){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n({type:r.a.PUBLISH_POSITION,payload:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},m=function(t,e){return function(){var n=Object(o.a)(s.a.mark((function n(i){var o;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e(!0,""),n.prev=1,Object(d.b)(),n.next=5,c.a.get("".concat(l.a.APPLICATION,"/position/instituteposition/").concat(t));case 5:o=n.sent,i({type:r.a.GET_POSTIONS,payload:o.data}),e(!1,"",o.data),n.next=14;break;case 10:n.prev=10,n.t0=n.catch(1),console.log({code_error:n.t0}),e(!1,Object(u.a)(n.t0));case 14:case"end":return n.stop()}}),n,null,[[1,10]])})));return function(t){return n.apply(this,arguments)}}()}},724:function(t,e,n){"use strict";var i=n(4),s=n.n(i),o=n(49),a=n(32),c=n(28),r=n(1),l=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{title:"",icon:o.s,iconColor:"indigo",count:0,countOver:void 0},e=t.icon;return Object(r.jsxs)("div",{className:"flex items-center px-6 py-4 bg-white w-full rounded-md space-x-2 mb-2 lg:mb-0 shadow-md",children:[Object(r.jsx)("div",{className:"p-3 rounded-full bg-".concat(t.iconColor,"-200 bg-opacity-75"),children:Object(r.jsx)(e,{className:"h-8 w-8 text-".concat(t.iconColor,"-600")})}),Object(r.jsxs)("div",{children:[Object(r.jsxs)("h1",{className:"text-3xl font-semibold text-gray-700",children:[t.count<1e3?Object(a.g)(t.count):Object(c.h)(t.count)," ",t.countOver&&"/ "+Object(a.g)(t.countOver)]}),Object(r.jsx)("span",{className:"text-gray-500 text-lg",children:t.title})]})]})};e.a=s.a.memo(l)}}]);
//# sourceMappingURL=41.6e23e144.chunk.js.map