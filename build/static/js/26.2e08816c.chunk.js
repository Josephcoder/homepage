(this["webpackJsonpreact-redux-typescript-advance"]=this["webpackJsonpreact-redux-typescript-advance"]||[]).push([[26,1,51],{196:function(e,t,s){"use strict";s.d(t,"b",(function(){return r})),s.d(t,"f",(function(){return n})),s.d(t,"e",(function(){return c})),s.d(t,"c",(function(){return i})),s.d(t,"d",(function(){return a})),s.d(t,"h",(function(){return o})),s.d(t,"g",(function(){return l})),s.d(t,"a",(function(){return d}));var r=[{school_id:"32762426329",school_title:"G.S. De Gitega",district_id:"234242",number_of_females:10,number_of_males:12},{school_id:"32762426329",school_title:"G.S. De Gitega",district_id:"7322342684"},{school_id:"32762426329",school_title:"Rucee De Kigali",district_id:"234242",number_of_females:10,number_of_males:12},{school_id:"32762426329",school_title:"G.S. De Gitega",district_id:"73232432684",number_of_females:10,number_of_males:12}],n=function(e){return null===e||null!==e.match(/^ *$/)},c=function(e,t){return e.filter((function(e){return e.system_user_role_id===t}))[0]},i=function(e,t){return e.find((function(e){return e.education_institute_id===t}))},a=function(e,t){return console.log({positions:e,position_id:t,data:e.filter((function(e){return e.position_id===t}))[0]}),e.find((function(e){return e.position_id===t}))},o=function(e){var t=e-Math.floor(e);return("0"+(e-=t)).slice(-2)+t.toString().substr(1)},l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,s=new Array(t+1).join("0");return(s+e).slice(-t)},d=function(e){return e.charAt(0).toUpperCase()+e.slice(1)}},198:function(e,t,s){"use strict";s.d(t,"d",(function(){return m})),s.d(t,"b",(function(){return f})),s.d(t,"f",(function(){return b})),s.d(t,"a",(function(){return p})),s.d(t,"c",(function(){return h})),s.d(t,"e",(function(){return x})),s.d(t,"g",(function(){return j}));var r,n=s(5),c=s.n(n),i=s(7),a=s(8),o=s.n(a),l=s(6),d=s(9),u=s(13);!function(e){e.waiting="waiting",e.approved="approved",e.rejected="rejected"}(r||(r={}));var m=function(){return function(){var e=Object(i.a)(c.a.mark((function e(t){var s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,Object(u.b)(),e.next=4,o.a.get("".concat(d.a.AUTH,"/users?page=1&limit=500"));case 4:s=e.sent,console.log({users_response:s}),t({type:l.a.FETCH_USERS_ACCESS,payload:s.data.users}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error({user_error:e.t0});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()},f=function(e){return console.log({data:e}),function(){var t=Object(i.a)(c.a.mark((function t(s){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s({type:l.a.BLOCK_USER_TO_SYSTEM,payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},b=function(e){return function(){var t=Object(i.a)(c.a.mark((function t(s){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s({type:l.a.UNBLOCK_USER_TO_SYSTEM,payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},p=function(e){return console.log({data:e}),function(){var t=Object(i.a)(c.a.mark((function t(s){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s({type:l.a.ASSIGN_ROLE_TO_USER,payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},h=function(e){return function(){var t=Object(i.a)(c.a.mark((function t(s){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s({type:l.a.CUSTOMIZE_USER_ACCESS,payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},x=function(e){return function(){var t=Object(i.a)(c.a.mark((function t(s){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s({type:l.a.RESET_USER_ACCESS,payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},j=function(e){return console.log({data:e}),function(){var t=Object(i.a)(c.a.mark((function t(s){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s({type:l.a.VERIFY_ALL_DOCUMENT,payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},199:function(e,t,s){"use strict";var r=s(14),n=s(4),c=s(84),i=s(10),a=s(1);t.a=function(e){var t,s,o=e.rows,l=e.columns,d=e.hideColumns,u=void 0!==d&&d,m=e.pagination,f=void 0!==m&&m,b=e.search,p=void 0!==b&&b,h=e.tableSize,x=void 0===h?"w-full":h,j=e.tableClass,g=e.tableId,_=void 0===g?"myTable":g,v=e.rounded,O=void 0!==v&&v,y=e.searchBG,N=void 0===y?"bg-gray-200":y,w=e.thColor,C=void 0===w?"blue":w,R=e.loading,S=void 0!==R&&R;_="myTable"===_?function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t="",s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=s.length,n=0;n<e;n++)t+=s.charAt(Math.floor(Math.random()*r));return t}():_;var E=Object(n.useState)(0),k=Object(r.a)(E,2),I=k[0],T=k[1],D=Object(n.useState)(1),L=Object(r.a)(D,2),A=L[0],P=L[1],U=Object(n.useState)(1),F=Object(r.a)(U,2),q=F[0],M=F[1],B=Object(n.useState)(),z=Object(r.a)(B,2),G=z[0],H=z[1],Y=Object(n.useState)(10),V=Object(r.a)(Y,2),W=V[0],K=V[1],X=Object(n.useState)(0),J=Object(r.a)(X,2),Z=J[0],Q=J[1],$=Object(n.useState)(0),ee=Object(r.a)($,2),te=ee[0],se=ee[1];Object(n.useEffect)((function(){f&&re()}));var re=function(){t=document.getElementById(_),s=t.getElementsByTagName("tr"),T(s.length),P(Math.ceil(I/W)),Q((q-1)*W),se(Math.min(Z+W-1,I-1));var e=Array.from(Array(A+1-1).keys()).map((function(e){return 1+e}));G&&e.length===G.length||H(e);for(var r=0;r<s.length;r++)s[r].style.display=r>=Z&&r<=te?"":"none"};return Object(a.jsxs)("div",{className:"".concat(x),children:[p&&Object(a.jsx)("div",{className:"".concat(N," w-full mb-2"),children:p&&Object(a.jsxs)("div",{className:"bg-white rounded flex items-center w-full p-2 border-2 border-gray-500",children:[Object(a.jsx)(i.Cb,{className:"h-5 w-5 fill-current text-gray-400"}),Object(a.jsx)("input",{type:"search",placeholder:"search",onChange:function(e){return function(e,s){var r,n,c,i,a;for("field"===s&&"all"===e&&(e=""),r=e.toLowerCase(),n=(t=document.getElementById(_)).getElementsByTagName("tr"),i=0;i<n.length;i++)for(a=0;a<l.length;a++)if(c=n[i].getElementsByTagName("td")[a]){if((c.textContent||c.innerText).toLowerCase().indexOf(r)>-1){n[i].style.display="";break}n[i].style.display="none"}}(e.target.value)},className:"w-full h-6 pl-4 text-sm outline-none focus:outline-none bg-white",disabled:S}),f&&Object(a.jsx)("div",{className:"select",children:Object(a.jsxs)("select",{className:"text-base outline-none focus:outline-none bg-white",onChange:function(e){return K(Number(e.target.value))},disabled:S,children:[Object(a.jsx)("option",{value:"10",children:"10"}),Object(a.jsx)("option",{value:"25",children:"25"}),Object(a.jsx)("option",{value:"50",children:"50"}),Object(a.jsx)("option",{value:"100",children:"100"})]})})]})}),Object(a.jsxs)("table",{className:j||"w-full shadow ".concat(O&&"sm:rounded-lg"," table-auto order-table"),id:_,children:[!u&&Object(a.jsx)("thead",{className:"bg-white border-b-2 border-gray-300 text-gray-600 font-bold text-base",children:Object(a.jsx)("tr",{className:"text-left tracking-wide bg-".concat(C,"-100 border-b-2 border-").concat(C,"-500 text-").concat(C,"-600"),children:l.map((function(e,t){return Object(a.jsx)("th",{className:"".concat(e.padding," text-").concat(e.alignText," px-3 py-2 ").concat(e.isSortAllowed&&"cursor-pointer"),onClick:function(){return e.isSortAllowed&&function(e){var t,s,r,n,c,i,a,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"asc",d=0;if(r=!0,t=document.getElementById(e))for(;r;){for(r=!1,s=t.rows,n=1;n<s.length-1;n++)if(a=!1,c=s[n].getElementsByTagName("TD")[o],i=s[n+1].getElementsByTagName("TD")[o],"asc"===l&&c&&i){if(c.innerHTML.toLowerCase()>i.innerHTML.toLowerCase()){a=!0;break}}else if("desc"===l&&c&&i&&c.innerHTML.toLowerCase()<i.innerHTML.toLowerCase()){a=!0;break}a&&s[n].parentNode?(s[n].parentNode.insertBefore(s[n+1],s[n]),r=!0,d++):0===d&&"asc"===l&&(l="desc",r=!0)}}(_,t)},children:Object(a.jsxs)("div",{className:"flex items-center gap-1",children:[e.columnTitle,e.isSortAllowed&&Object(a.jsx)(c.i,{})]})},t)}))})}),Object(a.jsx)("tbody",{id:"table-data",className:"bg-white text-black text-base",children:o()})]}),f&&Object(a.jsxs)("div",{className:"sm:flex-1 sm:flex sm:items-center sm:justify-between mt-4 work-sans",children:[Object(a.jsx)("div",{children:Object(a.jsxs)("span",{className:"text-xs xs:text-sm text-gray-900",children:["Showing 1 to ",W," of ",I-1," Entries"]})}),Object(a.jsx)("div",{children:Object(a.jsxs)("nav",{className:"inline-flex shadow-sm",children:[Object(a.jsx)("div",{children:Object(a.jsx)("button",{type:"button",className:"inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 text-sm font-medium text-gray-500 ".concat(1!==q&&"bg-white"),"aria-label":"Previous",disabled:1===q||S,onClick:function(){return M(q-1)},children:Object(a.jsx)(i.hb,{className:"h-5 w-5"})})}),Object(a.jsx)("div",{children:G&&G.map((function(e,t){return Object(a.jsx)("button",{className:"-ml-px inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium text-gray-700 ".concat(e!==q?"bg-white":"bg-gray-100 cursor-default"),disabled:e===q||S,onClick:function(){return M(e)},children:e},t)}))}),Object(a.jsx)("div",{children:Object(a.jsx)("button",{type:"button",className:"inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 text-sm leading-5 font-medium text-gray-500 ".concat(q!==A&&"bg-white"),"aria-label":"Next",disabled:q===A||S,onClick:function(){return M(q+1)},children:Object(a.jsx)(i.ib,{className:"h-5 w-5"})})})]})})]})]})}},200:function(e,t,s){"use strict";s.d(t,"b",(function(){return b})),s.d(t,"a",(function(){return p})),s.d(t,"d",(function(){return h})),s.d(t,"c",(function(){return x}));var r=s(20),n=s(19),c=s(22),i=s(21),a=s(4),o=s.n(a),l=s(17),d=s(3),u=s(10),m=s(1),f=function(e){Object(c.a)(s,e);var t=Object(i.a)(s);function s(e){var n;return Object(r.a)(this,s),(n=t.call(this,e)).componentDidMount=function(){return n.props.PageHasSubNav(!0)},n.componentWillUnmount=function(){return n.props.PageHasSubNav(!1)},n.state={loading:!1},n}return Object(n.a)(s,[{key:"render",value:function(){if(!1===this.props.auth.isAuthenticated)return null;var e=this.props.system.navigation;return Object(m.jsx)("div",{className:"fixed w-48 p-1 pr-2 pl-6 text-gray-700 bg-white ".concat(!0===e?"lg:left-16  left-16":" -left-72 lg:left-16","  top-0 bottom-0 pt-20 z-30 shadow-lg  transition-all duration-500 ease-in-out overflow-y-auto"),children:this.props.children})}}]),s}(o.a.Component),b=Object(l.b)((function(e){return{auth:e.auth,system:e.system}}),{NavToogle:d.rb,PageHasSubNav:d.sb})(f),p=function(e){var t=e.title,s=void 0===t?"":t,r=e.icon,n=void 0===r?u.m:r,c=e.active,i=void 0!==c&&c,a=e.count,o=void 0===a?0:a,l=n;return Object(m.jsxs)("section",{className:"".concat(!0===i?"bg-blue-500 text-white font-bold":"bg-blue-100 text-blue-800"," mb-1 hover:font-bold py-1 hover:bg-blue-400 hover:text-white --font-bold  px-2 rounded-md flex cursor-pointer items-center"),children:[Object(m.jsxs)("section",{className:"flex-1",children:[Object(m.jsx)(l,{className:"inline-block mr-1 text-xs"}),Object(m.jsx)("span",{children:s})]}),o>0?Object(m.jsx)("span",{className:"px-0.5 my-1 text-xs bg-blue-600 text-white rounded-full",children:o}):null]})},h=function(e){var t=e.children;return Object(m.jsx)("div",{className:"ml-3 overflow-y-auto border-l-2 border-blue-200 -mt-1 pt-2 mb-2 pl-1 cursor-pointer",children:t})},x=function(e){var t=e.title,s=void 0===t?"":t,r=e.icon,n=void 0===r?u.m:r,c=e.active,i=void 0!==c&&c,a=e.count,o=void 0===a?0:a,l=n;return Object(m.jsxs)("div",{className:"animate__animated animate__zoomIn animate__faster ".concat(!0===i?"bg-blue-500 text-white font-bold":" text-blue-800"," text-blue-800 bg-blue-200 rounded-md px-1 mb-1 flex items-center py-1 font-bold"),children:[Object(m.jsx)(l,{className:"inline-block mr-0.1 text-xs ".concat(!0===i?"text-white":"")}),Object(m.jsx)("span",{className:"inline-block pl-1 ".concat(!0===i?"text-white":""),children:s}),o>=1?Object(m.jsx)("span",{className:"text-sm fint-bold ".concat(!0===i?"text-white":""),children:o}):null]})}},211:function(e,t,s){"use strict";s.d(t,"p",(function(){return u})),s.d(t,"c",(function(){return m})),s.d(t,"m",(function(){return f})),s.d(t,"h",(function(){return b})),s.d(t,"b",(function(){return p})),s.d(t,"l",(function(){return h})),s.d(t,"g",(function(){return x})),s.d(t,"e",(function(){return j})),s.d(t,"o",(function(){return g})),s.d(t,"j",(function(){return _})),s.d(t,"a",(function(){return v})),s.d(t,"k",(function(){return O})),s.d(t,"f",(function(){return y})),s.d(t,"d",(function(){return N})),s.d(t,"n",(function(){return w})),s.d(t,"i",(function(){return C}));var r=s(5),n=s.n(r),c=s(7),i=s(8),a=s.n(i),o=s(6),l=s(9),d=s(12),u=function(e){return function(){var t=Object(c.a)(n.a.mark((function t(s){var r;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(!0,""),t.prev=1,t.next=4,a.a.get("".concat(l.a.APPLICATION,"/roomlocation"));case 4:r=t.sent,s({type:o.a.GET_ALL_ROOM,payload:r.data}),console.log("===================================="),console.log({res:r.data}),console.log("===================================="),e(!1,"",r.data),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(1),console.error("Err: ",t.t0),e(!1,Object(d.a)(t.t0));case 16:case"end":return t.stop()}}),t,null,[[1,12]])})));return function(e){return t.apply(this,arguments)}}()},m=function(e){return function(){var t=Object(c.a)(n.a.mark((function t(s){return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s({type:o.a.CREATE_PROVINCE,payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},f=function(e){return console.log({data:e}),function(){var t=Object(c.a)(n.a.mark((function t(s){return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s({type:o.a.UPDATE_PROVINCE,payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},b=function(e){return function(){var t=Object(c.a)(n.a.mark((function t(s){return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s({type:o.a.DELETE_PROVINCE,payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},p=function(e){return function(){var t=Object(c.a)(n.a.mark((function t(s){return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s({type:o.a.CREATE_DISTRICT,payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},h=function(e){return console.log({data:e}),function(){var t=Object(c.a)(n.a.mark((function t(s){return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s({type:o.a.UPDATE_DISTRICT,payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},x=function(e){return console.log({data:e}),function(){var t=Object(c.a)(n.a.mark((function t(s){return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s({type:o.a.DELETE_DISTRICT,payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},j=function(e){return function(){var t=Object(c.a)(n.a.mark((function t(s){return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s({type:o.a.CREATE_SECTOR,payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},g=function(e){return function(){var t=Object(c.a)(n.a.mark((function t(s){return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s({type:o.a.UPDATE_SECTOR,payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},_=function(e){return console.log({data:e}),function(){var t=Object(c.a)(n.a.mark((function t(s){return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s({type:o.a.DELETE_SECTOR,payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},v=function(e){return console.log({data:e}),function(){var t=Object(c.a)(n.a.mark((function t(s){return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s({type:o.a.CREATE_CENTER,payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},O=function(e){return console.log({data:e}),function(){var t=Object(c.a)(n.a.mark((function t(s){return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s({type:o.a.UPDATE_CENTER,payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},y=function(e){return function(){var t=Object(c.a)(n.a.mark((function t(s){return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s({type:o.a.DELETE_CENTER,payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},N=function(e){return console.log({data:e}),function(){var t=Object(c.a)(n.a.mark((function t(s){return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s({type:o.a.CREATE_ROOM,payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},w=function(e){return function(){var t=Object(c.a)(n.a.mark((function t(s){return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s({type:o.a.UPDATE_ROOM,payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},C=function(e){return console.log({delete_room:e}),function(){var t=Object(c.a)(n.a.mark((function t(s){return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s({type:o.a.DELETE_ROOM,payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},217:function(e,t,s){"use strict";s(4);var r=s(250),n=s(251),c=s(29),i=s(1);t.a=function(e){var t=e.fileData,s=e.fileName,a=e.btnName,o=void 0===a?"Excel":a,l=e.className,d=void 0===l?"flex items-center gap-1 px-4 py-1 rounded text-green-700 bg-white border hover:text-white hover:bg-green-700 border-green-700 font-bold":l,u=e.showIcon,m=void 0===u||u;return Object(i.jsxs)("button",{onClick:function(e){return function(e,t){var s={Sheets:{data:n.utils.json_to_sheet(e)},SheetNames:["data"]},c=n.write(s,{bookType:"xlsx",type:"array"}),i=new Blob([c],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});r.saveAs(i,t+".xlsx")}(t,s)},className:d,children:[m&&Object(i.jsx)(c.k,{}),o]})}},219:function(e,t,s){"use strict";s.d(t,"a",(function(){return d}));var r=s(5),n=s.n(r),c=s(7),i=s(229),a=s(41),o=s.p+"static/media/mineduc.11a9ae1c.png";s(249);var l=function(e){var t=e.internal.getNumberOfPages();e.setFont("helvetica","italic"),e.setFontSize(8);for(var s=1;s<=t;s++)e.setPage(s),e.text("Page "+String(s)+" of "+String(t),e.internal.pageSize.width/2,297,{align:"center"})},d=function(){var e=Object(c.a)(n.a.mark((function e(t,s,r){var c,d,u,m,f,b,p,h;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r(!0),c=t.orientation?t.orientation:"p",d=20,20,185,(u=new i.default(c,"mm","a4")).setTextColor(95,95,95),u.setFontSize(28),u.addImage(o,"png",20,20,10,10),u.text("MINEDUC",32,28.5,void 0,"left"),u.setFontSize(26),u.text(t.title,u.internal.pageSize.getWidth()/2,42.7,void 0,"center"),u.setFontSize(20),u.text(t.institute,u.internal.pageSize.getWidth()/2,53.7,void 0,"center"),m=u.splitTextToSize(t.subject,145),u.setFontSize(16),f=63,u.setTextColor(95,95,95),u.text("".concat(t.subjectTitle,": "),d,f),b=u.getTextWidth("".concat(t.subjectTitle,": ")),u.setTextColor(38,38,38),p=0;p<m.length;p++)f>280&&(f=10,u.addPage()),u.text(m[p],d+b,f),f+=7;return u.setTextColor(95,95,95),u.text("Period: ",d,f+3),b=u.getTextWidth("Period: "),u.setTextColor(38,38,38),u.text(t.period,d+b,f+3),u.autoTable({html:s,startY:85,margin:{horizontal:20},cellPadding:3,rowHeight:20,bodyStyles:{valign:"top"},columnStyles:{email:{cellWidth:"wrap"}},theme:"striped",tableWidth:!0}),u.setFontSize(12),h=u.lastAutoTable.finalY,u.text("Reported by: ".concat(t.doneBy),d,h+15),u.text("Report downloaded on "+Object(a.a)((new Date).toString()),d,h+23),l(u),e.next=35,u.save("".concat(t.title+": "+t.subject+": "+t.period,".pdf"),{returnPromise:!0}).then(r(!1));case 35:case"end":return e.stop()}}),e)})));return function(t,s,r){return e.apply(this,arguments)}}()},223:function(e,t,s){"use strict";s(4);var r=s(1);t.a=function(e){var t=function(){for(var t=[],s=0;s<e.cols;s++)t.push(s);return t.map((function(e){return Object(r.jsx)("td",{className:"p-3 text-center whitespace-nowrap",children:Object(r.jsx)("div",{className:"w-full h-4 rounded bg-gray-200 animate__animated animate__pulse animate__delay-5s animate__infinite"})},e)}))};return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("tr",{className:"border-b border-gray-200",children:t()},228),Object(r.jsx)("tr",{className:"border-b border-gray-200",children:t()},22648),Object(r.jsx)("tr",{className:"border-b border-gray-200",children:t()},229768)]})}},230:function(e,t){},231:function(e,t,s){"use strict";s.r(t),s.d(t,"UserAccess",(function(){return _}));var r=s(5),n=s.n(r),c=s(7),i=s(14),a=s(8),o=s.n(a),l=s(4),d=s(84),u=s(10),m=s(248),f=s(220),b=s(17),p=s(198),h=s(199),x=s(9),j=s(12),g=s(1),_=Object(b.b)(null,{customizeUserAccess:p.c})((function(e){var t=e.userInfo,s=e.customizeUserAccess,r=e.setFeedBack,a=(e.feedBack,e.setUserAccess),b=e.userAccess,p=e.currentAccess,_=e.setCurrentAccess,v=Object(l.useState)(!0),O=Object(i.a)(v,2),y=O[0],N=O[1],w=Object(l.useState)(!1),C=Object(i.a)(w,2),R=C[0],S=C[1],E=Object(l.useState)(!1),k=Object(i.a)(E,2),I=k[0],T=k[1],D=Object(l.useState)(!1),L=Object(i.a)(D,2),A=L[0],P=L[1],U=Object(l.useState)(!1),F=Object(i.a)(U,2),q=F[0],M=F[1],B=Object(l.useState)(!1),z=Object(i.a)(B,2),G=z[0],H=z[1],Y=function(e,t){if(e&&t&&t.length>0){var s=[],r=function(r){if(Object.prototype.hasOwnProperty.call(e,r)){var n=t.find((function(t){return t.id===e[r].id}));n?s.push(n):s.push(e[r])}};for(var n in e)r(n);a(s)}};Object(l.useEffect)((function(){t&&t.custome_access&&t.default_access&&function(e,t){if(e&&t&&t.length>0){for(var s=[],r=function(){var e=Object(i.a)(c[n],2),r=e[0],a=e[1],o=t.find((function(e){return e.id===a.id}));o?s.push(o):s.push(a),console.log(r)},n=0,c=Object.entries(e);n<c.length;n++)r();a(s)}}(t.default_access.access,t.custome_access.access)}),[t,a]),Object(l.useEffect)((function(){t&&!t.custome_access&&t.default_access&&a(t.default_access.access),N(!1)}),[t,a]);var V=function(){var e=Object(c.a)(n.a.mark((function e(c){var i,a,l;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.preventDefault(),S(!0),r({type:"",message:""}),i=null,i=t.custome_access,a=-1,e.prev=6,i&&p?(a=i.access.findIndex((function(e){return e.id===p.id})))>=0?(i.access[a].permitted.create=I,i.access[a].permitted.view=A,i.access[a].permitted.update=q,i.access[a].permitted.delete=G):i.access.push({id:p.id,task:p.task,key:p.key,permitted:{create:I,view:A,update:q,delete:G}}):p&&(i={access:[{id:p.id,task:p.task,key:p.key,permitted:{create:I,view:A,update:q,delete:G}}],user_id:t.user_id,custome_user_access_id:""}),!i){e.next=19;break}if(null===t.custome_access){e.next=15;break}return e.next=12,o.a.patch("".concat(x.a.AUTH,"/custaccess"),{access:i.access,user_id:t.user_id});case 12:l=e.sent,e.next=18;break;case 15:return e.next=17,o.a.post("".concat(x.a.AUTH,"/custaccess"),{access:i.access,user_id:t.user_id});case 17:l=e.sent;case 18:l&&(i.custome_user_access_id=l.data.data.custome_user_access_id,console.log({task:i}),console.log(l.data.data),s(i),i&&t.default_access&&Y(t.default_access.access,i.access),r({type:"success",message:"Reseting User Access complete successfully"}),i=null,_(null),T(!1),P(!1),M(!1),H(!1));case 19:e.next=25;break;case 21:e.prev=21,e.t0=e.catch(6),console.error({customize_access:e.t0}),r({type:"danger",message:Object(j.a)(e.t0)});case 25:S(!1);case 26:case"end":return e.stop()}}),e,null,[[6,21]])})));return function(t){return e.apply(this,arguments)}}();return!0===y||null===t?Object(g.jsx)("div",{className:"text-center mt-7 font-bold text-4xl text-gray-400 animate-pulse",children:"Loading User Access..."}):y?Object(g.jsx)("div",{className:"text-center mt-7 font-bold text-4xl text-gray-400 animate-pulse",children:"Loading..."}):Object(g.jsx)(l.Fragment,{children:Object(g.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mx-1 my-2",children:[Object(g.jsxs)("div",{className:"col-span-1 md:col-span-3 bg-white w-full overflow-x-auto border rounded text-center p-2 ".concat(p?"hidden md:block":""),children:[Object(g.jsx)("span",{className:"text-gray-600 mt-2 font-semibold text-2xl",children:"Settings"}),!y&&Object(g.jsx)("div",{className:"overflow-x-auto w-full",children:Object(g.jsx)(h.a,{columns:[{columnTitle:"Access Name",alignText:"left",padding:"p-3"},{columnTitle:"Create",alignText:"left"},{columnTitle:"View",alignText:"left"},{columnTitle:"Update",alignText:"left"},{columnTitle:"Delete",alignText:"left"}],rows:function(){return b?b.map((function(e,t){return Object(g.jsxs)("tr",{className:"text-left border-b border-gray-200 cursor-pointer hover:bg-gray-100 ".concat(p&&p.id===e.id&&"bg-gray-200 border my-3 hover:bg-gray-100"),onClick:function(){return p&&p.id===e.id?(_(null),T(!1),P(!1),M(!1),H(!1)):(_(e),T(e.permitted.create),P(e.permitted.view),M(e.permitted.update),H(e.permitted.delete))},children:[Object(g.jsx)("td",{className:"px-2 py-1",children:Object(g.jsx)("label",{className:"inline-flex items-center",children:Object(g.jsx)("span",{className:"text-gray-900 capitalize text-xl font-normal cursor-pointer",children:e.task})})}),Object(g.jsx)("td",{children:Object(g.jsxs)("div",{className:"inline-flex items-center text-xl ".concat(e.permitted.create?"text-green-700":"text-red-700"),children:[e.permitted.create?Object(g.jsx)(f.a,{}):Object(g.jsx)(u.O,{}),e.permitted.create?" Yes":"No"]})}),Object(g.jsx)("td",{children:Object(g.jsxs)("div",{className:"inline-flex items-center text-xl ".concat(e.permitted.view?"text-green-700":"text-red-700"),children:[e.permitted.view?Object(g.jsx)(f.a,{}):Object(g.jsx)(u.O,{}),e.permitted.view?" Yes":"No"]})}),Object(g.jsx)("td",{children:Object(g.jsxs)("div",{className:"inline-flex items-center text-xl ".concat(e.permitted.update?"text-green-700":"text-red-700"),children:[e.permitted.update?Object(g.jsx)(f.a,{}):Object(g.jsx)(u.O,{}),e.permitted.update?" Yes":"No"]})}),Object(g.jsx)("td",{children:Object(g.jsxs)("div",{className:"inline-flex items-center text-xl ".concat(e.permitted.delete?"text-green-700":"text-red-700"),children:[e.permitted.delete?Object(g.jsx)(f.a,{}):Object(g.jsx)(u.O,{}),e.permitted.delete?" Yes":"No"]})})]},t+e.id)})):[Object(g.jsx)("tr",{children:Object(g.jsx)("td",{children:"No data"})},46)]},pagination:!1,search:!0,searchBG:"bg-gray-50",thColor:"gray"})})]}),Object(g.jsx)("div",{className:"col-span-1 md:col-span-2",children:p?Object(g.jsxs)("div",{className:"",children:[Object(g.jsx)("h1",{className:"text-2xl md:text-3xl font-semibold text-center my-2 text-gray-900",children:"Customize User Access"}),Object(g.jsx)("div",{className:"flex justify-center mb-3",children:Object(g.jsxs)("h2",{className:"text-2xl font-semibold text-center text-gray-600 flex flex-row items-center",children:[Object(g.jsx)(d.h,{className:"w-7 h-7"}),p.task]})}),Object(g.jsx)("div",{className:"flex flex-col px-2 md:px-1",children:Object(g.jsxs)("form",{className:"flex flex-col items-center",onSubmit:function(e){return V(e)},children:[Object(g.jsxs)("div",{className:"inline-flex gap-2 items-center",children:[Object(g.jsx)(m.a,{className:"w-7 h-7 text-gray-600"}),Object(g.jsxs)("div",{className:"flex flex-col",children:[Object(g.jsx)("h3",{className:"font-semibold text-xl",children:"Create"}),Object(g.jsx)("span",{className:"text-gray-600 text-sm md:pr-1",children:"This permission gives the user the ability to create"})]}),Object(g.jsx)("input",{type:"checkbox",className:"form-checkbox h-7 w-7 text-teal-600",onChange:function(){return T(!I)},checked:I,disabled:R})]}),Object(g.jsxs)("div",{className:"inline-flex gap-2 items-center",children:[Object(g.jsx)(u.wb,{className:"w-7 h-7 text-gray-600"}),Object(g.jsxs)("div",{className:"flex flex-col",children:[Object(g.jsx)("h3",{className:"font-semibold text-xl",children:"View"}),Object(g.jsx)("span",{className:"text-gray-600 text-sm md:pr-4",children:"This permission gives the user the ability to view"})]}),Object(g.jsx)("input",{type:"checkbox",className:"form-checkbox h-7 w-7 text-teal-600",onChange:function(){return P(!A)},checked:A,disabled:R})]}),Object(g.jsxs)("div",{className:"inline-flex gap-2 items-center",children:[Object(g.jsx)(u.D,{className:"w-7 h-7 text-gray-600"}),Object(g.jsxs)("div",{className:"flex flex-col",children:[Object(g.jsx)("h3",{className:"font-semibold text-xl",children:"Update"}),Object(g.jsx)("span",{className:"text-gray-600 text-sm",children:"This permission gives the user the ability to update"})]}),Object(g.jsx)("input",{type:"checkbox",className:"form-checkbox h-7 w-7 text-teal-600",onChange:function(){return M(!q)},checked:q,disabled:R})]}),Object(g.jsxs)("div",{className:"inline-flex gap-2 items-center",children:[Object(g.jsx)(u.B,{className:"w-7 h-7 text-gray-600"}),Object(g.jsxs)("div",{className:"flex flex-col",children:[Object(g.jsx)("h3",{className:"font-semibold text-xl",children:"Delete"}),Object(g.jsx)("span",{className:"text-gray-600 text-sm md:pr-1",children:"This permission gives the user the ability to delete"})]}),Object(g.jsx)("input",{type:"checkbox",className:"form-checkbox h-7 w-7 text-teal-600",onChange:function(){return H(!G)},checked:G,disabled:R})]}),Object(g.jsxs)("div",{className:"flex items-center justify-center w-full py-3 gap-2",children:[Object(g.jsx)("button",{className:"btn bg-gray-500 hover:bg-gray-700 focus:outline-none text-white",disabled:R,onClick:function(){_(null),T(!1),P(!1),M(!1),H(!1)},children:"Cancel"}),Object(g.jsx)("button",{className:"btn btn-blue",disabled:R,children:R?"Processing..":"Save Change"})]})]})})]}):Object(g.jsxs)("div",{className:"w-full hidden md:flex flex-col items-center text-gray-600 gap-1 py-3",children:[Object(g.jsx)(u.Eb,{className:"w-20 h-20"}),Object(g.jsx)("span",{className:"text-8 md:text-12",children:"Choose Access to Customize"})]})})]})})}))},234:function(e,t,s){"use strict";s.d(t,"a",(function(){return L}));var r,n=s(5),c=s.n(n),i=s(7),a=s(14),o=s(4),l=s(10),d=s(199),u=s(196),m=s(17),f=s.p+"static/media/blank_profile.c3f94521.png",b=s(231),p=s(20),h=s(19),x=s(22),j=s(21),g=s(8),_=s.n(g),v=s(220),O=s(3),y=s(198),N=s(27),w=s(28),C=s(9),R=s(12),S=s(33),E=s(1),k=function(e){var t=Object(o.useState)(""),s=Object(a.a)(t,2),r=s[0],n=s[1];return Object(E.jsxs)("section",{className:"border-2 rounded border-gray-400",children:[Object(E.jsxs)("div",{className:"flex items-center w-full my-1",children:[Object(E.jsx)(l.Cb,{className:"w-6 h-6 absolute ml-2"}),Object(E.jsx)("input",{type:"text",placeholder:"Search",className:"focus:border-2 h-7 ml-1 pl-9 mr-2 bg-gray-100 focus:border-gray-700 w-full rounded",onChange:function(e){return n(e.target.value)},value:r,disabled:!(Object(S.a)(e.roleList,r).length>0)}),Object(E.jsx)("button",{className:"bg-red-200 text-red-700 py-1 px-2 mr-1 rounded text-sm focus:outline-none",type:"button",onClick:function(){e.setChooseRole(!1)},children:"Close"})]}),Object(E.jsx)("div",{className:"w-full h-52 mt-2 overflow-y-auto divide-y divide-gray-300",children:Object(S.a)(e.roleList,r).length>0?Object(S.a)(e.roleList,r).map((function(t,s){return Object(E.jsx)("section",{children:Object(E.jsxs)("div",{className:"group flex items-center justify-between my-1 hover:bg-gray-100",children:[Object(E.jsx)("div",{className:"p-1 w-full mr-2 cursor-pointer",onClick:function(){e.setChooseRole(!1),!e.loadindRequest&&e.handleSelectRole(t.system_user_role_id)},children:Object(E.jsx)("p",{className:"text-sm font-medium text-black",children:Object(u.a)(t.role)})}),Object(E.jsx)("button",{type:"button",className:"bg-blue-200 group-hover:bg-blue-300 text-blue-700 group-hover:text-blue-800 py-1 px-2 mr-1 rounded text-sm",children:"Choose"})]})},s+t.role)})):Object(E.jsx)("div",{className:"text-center p-3",children:Object(E.jsx)("p",{className:"text-base font-medium text-black",children:"No role available"})})})]})},I=function(e){Object(x.a)(s,e);var t=Object(j.a)(s);function s(e){var r;return Object(p.a)(this,s),(r=t.call(this,e)).setRoleId=function(e){r.setState({roleId:e})},r.setSelectedRole=function(e){r.setState({selectedRole:e})},r.setProvinceId=function(e){r.setState({provinceId:e})},r.setDistrictId=function(e){r.setState({districtId:e})},r.setCenterId=function(e){r.setState({centerId:e})},r.setRoomId=function(e){r.setState({roomId:e})},r.setLoadingForm=function(e){r.setState({loadingForm:e})},r.setSchoolId=function(e){r.setState({schoolId:e})},r.setLoading=function(e){r.setState({loading:e})},r.setInstituteId=function(e){r.setState({instituteId:e})},r.setFormError=function(e){r.setState({formError:e})},r.setLoadingRequest=function(e){r.setState({loadingRequest:e})},r.setChooseRole=function(e){r.setState({chooseRole:e})},r.setDefaultState=function(e,t){var s,n;if(t.district_required&&r.props.roomList)(n=r.distinctDistrict(r.props.roomList).find((function(t){return t._id===e.district_id})))&&r.setProvinceId(n.province_id),n&&r.setDistrictId(e.district_id),r.setLoadingForm(!1);else if(t.room_required&&r.props.roomList)(s=L(r.props.roomList).find((function(t){return t.room_id===e.room_id})))&&r.setProvinceId(s.province_id),s&&r.setDistrictId(s.district_id),s&&r.setCenterId(s.center_id),r.setRoomId(e.room_id),r.setLoadingForm(!1);else if(t.school_required&&r.props.roomList&&r.props.schoolList){var c=r.props.schoolList.find((function(t){return t._id===e.school_id}));c?((s=L(r.props.roomList).find((function(e){return e.district_id===(null===c||void 0===c?void 0:c.district_id)})))&&r.setProvinceId(s.province_id),s&&r.setDistrictId(s.district_id),r.setSchoolId(e.school_id),r.setLoadingForm(!1)):r.setLoadingForm(!1)}else r.setLoadingForm(!1)},r.componentDidMount=function(){if(r.props.roleList.length){if(r.props.userInfo.default_access&&r.state.loadingForm){if(!r.state.roleId.length){var e=r.props.roleList.find((function(e){return e.system_user_role_id===r.props.userInfo.default_access.system_user_role_id}));e&&(r.setRoleId(r.props.userInfo.default_access.system_user_role_id),r.setSelectedRole(e),r.setDefaultState(r.props.userInfo.default_access,e))}console.log("===================================="),console.log({vvvvv:r.props.userInfo.default_access}),console.log("====================================")}r.state.selectedRole&&r.props.userInfo.default_access&&r.setDefaultState(r.props.userInfo.default_access,r.state.selectedRole),r.setLoading(!1)}},r.handleSelectRole=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"SELECT";if(r.props.roleList){var s=r.props.roleList.find((function(t){return t.system_user_role_id===e}));s&&(r.setRoleId(e),r.setSelectedRole(s),r.state.formError&&"role_id"===r.state.formError.element&&r.setFormError(null),"SELECT"===t&&(r.setProvinceId(""),r.setDistrictId(""),r.setSchoolId(""),r.setCenterId(""),r.setRoomId(""),r.setInstituteId("")))}},r.tableData=function(){return r.state.roleId.length>0&&null===r.state.selectedRole&&r.props.roleList&&r.handleSelectRole(r.state.roleId,"DEFAULT"),r.state.selectedRole?r.state.selectedRole.access.map((function(e,t){return Object(E.jsxs)("tr",{className:"text-left border-b border-gray-200 hover:bg-gray-100",children:[Object(E.jsx)("td",{className:"px-2 py-1",children:Object(E.jsx)("label",{className:"inline-flex items-center",children:Object(E.jsx)("span",{className:"text-gray-900 capitalize text-xl font-normal cursor-pointer",children:e.task})})}),Object(E.jsx)("td",{children:Object(E.jsxs)("div",{className:"inline-flex items-center text-xl ".concat(e.permitted.create?"text-green-700":"text-red-700"),children:[e.permitted.create?Object(E.jsx)(v.a,{}):Object(E.jsx)(l.O,{}),e.permitted.create?" Yes":"No"]})}),Object(E.jsx)("td",{children:Object(E.jsxs)("div",{className:"inline-flex items-center text-xl ".concat(e.permitted.view?"text-green-700":"text-red-700"),children:[e.permitted.view?Object(E.jsx)(v.a,{}):Object(E.jsx)(l.O,{}),e.permitted.view?" Yes":"No"]})}),Object(E.jsx)("td",{children:Object(E.jsxs)("div",{className:"inline-flex items-center text-xl ".concat(e.permitted.update?"text-green-700":"text-red-700"),children:[e.permitted.update?Object(E.jsx)(v.a,{}):Object(E.jsx)(l.O,{}),e.permitted.update?" Yes":"No"]})}),Object(E.jsx)("td",{children:Object(E.jsxs)("div",{className:"inline-flex items-center text-xl ".concat(e.permitted.delete?"text-green-700":"text-red-700"),children:[e.permitted.delete?Object(E.jsx)(v.a,{}):Object(E.jsx)(l.O,{}),e.permitted.delete?" Yes":"No"]})})]},t+e.id)})):[Object(E.jsx)("tr",{children:Object(E.jsx)("td",{colSpan:5,className:"text-center px-2 py-2",children:"No Default Access Available on this Role."})},"55re")]},r.assignRoleToUser=function(){var e=Object(i.a)(c.a.mark((function e(t){var s,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),window.confirm("Are sure you want to change user role?")){e.next=3;break}return e.abrupt("return",!1);case 3:if(r.state.selectedRole){e.next=5;break}return e.abrupt("return",r.setFormError({element:"role_id",msg:"User role is required!"}));case 5:if(!0!==r.state.selectedRole.room_required||!Object(u.f)(r.state.provinceId)){e.next=7;break}return e.abrupt("return",r.setFormError({element:"province_id",msg:"Province is required!"}));case 7:if(!0!==r.state.selectedRole.education_institution_required||!Object(u.f)(r.state.instituteId)){e.next=9;break}return e.abrupt("return",r.setFormError({element:"institute_id",msg:"Institute is required on this role!"}));case 9:if(!0!==r.state.selectedRole.room_required&&!0!==r.state.selectedRole.district_required||!Object(u.f)(r.state.districtId)){e.next=11;break}return e.abrupt("return",r.setFormError({element:"district_id",msg:"District is required!"}));case 11:if(!0!==r.state.selectedRole.school_required||!Object(u.f)(r.state.schoolId)){e.next=13;break}return e.abrupt("return",r.setFormError({element:"school_id",msg:"School is required!"}));case 13:if(!0!==r.state.selectedRole.room_required||!Object(u.f)(r.state.centerId)){e.next=15;break}return e.abrupt("return",r.setFormError({element:"center_id",msg:"Center is required!"}));case 15:if(!0!==r.state.selectedRole.room_required||!Object(u.f)(r.state.roomId)){e.next=17;break}return e.abrupt("return",r.setFormError({element:"room_id",msg:"Room is required!"}));case 17:return r.setLoadingRequest(!0),s={user_id:r.props.userInfo.user_id,data:{system_user_role_id:r.state.roleId,status:1,role:r.state.selectedRole.role,access:r.state.selectedRole.access,school_id:r.state.selectedRole.school_required?r.state.schoolId:"",district_id:r.state.selectedRole.district_required?r.state.districtId:"",room_id:r.state.selectedRole.room_required?r.state.roomId:"",education_institution_id:r.state.selectedRole.education_institution_required?r.state.instituteId:""}},e.prev=19,e.next=22,_.a.post("".concat(C.a.AUTH,"/addroletouser"),{user_id:r.props.userInfo.user_id,system_user_role_id:r.state.roleId,status:1,role:r.state.selectedRole.role,access:!0,school_id:!0===r.state.selectedRole.school_required?r.state.schoolId:"",district_id:!0===r.state.selectedRole.district_required?r.state.districtId:"",room_id:!0===r.state.selectedRole.room_required?r.state.roomId:"",education_institution_id:r.state.selectedRole.education_institution_required?r.state.instituteId:""});case 22:(n=e.sent)&&(console.log("===================================="),console.log({assignRoleToUser:n}),console.log("===================================="),r.props.assignRoleToUserAccess(s),r.setLoadingRequest(!1),r.props.setChangeRole(!1),r.props.PushPopupAlert({title:"Assigning Role to User completed successfully",theme:w.a.success})),e.next=30;break;case 26:e.prev=26,e.t0=e.catch(19),console.log({role_error:e.t0}),r.props.PushPopupAlert({title:Object(R.a)(e.t0),theme:w.a.danger});case 30:case"end":return e.stop()}}),e,null,[[19,26]])})));return function(t){return e.apply(this,arguments)}}(),r.distinctDistrict=function(e,t){var s=[],r=[];if(t)r=e.find((function(e){return e._id===t}))&&e.find((function(e){return e._id===t})).districts?e.find((function(e){return e._id===t})).districts:[];else for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n))for(var c in e[n].districts)Object.prototype.hasOwnProperty.call(e[n].districts,c)&&(s.includes(e[n].districts[c]._id)||(s.push(e[n].districts[c]._id),r.push(e[n].districts[c])));return r},r.distinctCenter=function(e,t){var s=[],r=[];return L(e).forEach((function(e){s.includes(e.center_id)||e.district_id!==t||(s.push(e.center_id),r.push(e))})),r},r.distinctRoom=function(e,t){var s=[],r=[];return L(e).forEach((function(e){s.includes(e.room_id)||e.center_id!==t||(s.push(e.room_id),r.push(e))})),r},r.state={loading:!0,loadingForm:!0,loadingRequest:!1,roleId:"",provinceId:"",districtId:"",schoolId:"",roomId:"",instituteId:"",centerId:"",selectedRole:null,formError:null,chooseRole:!1},r}return Object(h.a)(s,[{key:"render",value:function(){var e,t=this;return!0===this.state.loading||this.state.loadingForm||null===this.props.userInfo.default_access||0===this.state.roleId.length||null===this.state.selectedRole?Object(E.jsx)("div",{className:"text-center py-7 font-bold text-3xl text-gray-400 animate-pulse",children:"Loading..."}):Object(E.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 py-2 md:py-4 px-2 md:px-0",children:[Object(E.jsx)("div",{className:"col-span-1 bg-white w-full overflow-x-auto border rounded",children:Object(E.jsxs)("div",{className:"px-6 md:px-12 py-5 bg-white mx-auto rounded-2xl w-100",children:[Object(E.jsx)("h3",{className:"font-semibold text-2xl text-gray-800 mb-4",children:"Change User Role"}),this.state.loadingForm?Object(E.jsx)(N.a,{}):Object(E.jsx)("form",{onSubmit:function(e){return t.assignRoleToUser(e)},children:Object(E.jsxs)("div",{className:"space-y-5",children:[Object(E.jsxs)("div",{className:"space-y-2",children:[Object(E.jsx)("label",{className:"text-sm font-medium text-gray-700 tracking-wide",children:"User Role"}),!this.state.chooseRole&&Object(E.jsx)("div",{className:"w-full text-base bg-white text-grey-darker cursor-pointer border-2 px-4 py-3 rounded focus:outline-none focus:bg-gray-100 ".concat(this.state.formError&&"role_id"===this.state.formError.element?"border-red-500":"border-gray-400"),onClick:function(){!t.state.loadingRequest&&t.setChooseRole(!0),!t.state.loadingRequest&&t.setFormError(null)},children:this.state.selectedRole?this.state.selectedRole.role:"Select role"}),this.state.chooseRole&&Object(E.jsx)(k,{setChooseRole:this.setChooseRole,handleSelectRole:this.handleSelectRole,roleList:this.props.roleList,loadindRequest:this.state.loadingRequest}),this.state.formError&&"role_id"===this.state.formError.element&&Object(E.jsx)("span",{className:"text-red-500",children:this.state.formError.msg})]}),this.state.selectedRole&&this.state.selectedRole.education_institution_required&&Object(E.jsxs)("div",{className:"space-y-2",children:[Object(E.jsx)("label",{className:"mb-5 text-sm font-medium text-gray-700 tracking-wide",children:"Institute"}),Object(E.jsxs)("select",{className:"block w-full text-base bg-white text-grey-darker border-2 rounded px-4 py-3 md:w-full focus:outline-none focus:bg-gray-100 ".concat(this.state.formError&&"institute_id"===this.state.formError.element?"border-red-500":"border-gray-400"),onChange:function(e){t.setInstituteId(e.target.value),t.setProvinceId(""),t.setDistrictId(""),t.setSchoolId(""),t.setCenterId(""),t.setRoomId(""),t.state.formError&&"institute_id"===t.state.formError.element&&t.setFormError(null)},disabled:this.state.loadingRequest,value:this.state.instituteId,children:[Object(E.jsx)("option",{value:"",children:"Select institute"}),this.props.schoolLevels.education_categories&&this.props.schoolLevels.education_categories.length>0?this.props.schoolLevels.education_categories.map((function(e){return Object(E.jsx)("option",{value:e.education_institute_id,children:e.education_category_title},e.education_institute_id)})):Object(E.jsx)("option",{value:"",disabled:!0,children:"No institute available"})]}),this.state.formError&&"institute_id"===this.state.formError.element&&Object(E.jsx)("span",{className:"text-red-500",children:this.state.formError.msg})]}),this.state.selectedRole&&this.state.selectedRole.room_required&&Object(E.jsxs)("div",{className:"space-y-2",children:[Object(E.jsx)("label",{className:"mb-5 text-sm font-medium text-gray-700 tracking-wide",children:"Province"}),Object(E.jsxs)("select",{className:"block w-full text-base bg-white text-grey-darker border-2 rounded px-4 py-3 md:w-full focus:outline-none focus:bg-gray-100 ".concat(this.state.formError&&"province_id"===this.state.formError.element?"border-red-500":"border-gray-400"),onChange:function(e){t.setProvinceId(e.target.value),t.state.formError&&"province_id"===t.state.formError.element&&t.setFormError(null),t.setDistrictId(""),t.setSchoolId(""),t.setCenterId(""),t.setRoomId("")},value:this.state.provinceId,disabled:this.state.loadingRequest,children:[Object(E.jsx)("option",{value:"",children:"Select province"}),this.props.roomList&&this.props.roomList.map((function(e){return Object(E.jsx)("option",{value:e._id,children:e.province_name},e._id)}))]}),this.state.formError&&"province_id"===this.state.formError.element&&Object(E.jsx)("span",{className:"text-red-500",children:this.state.formError.msg})]}),this.state.selectedRole&&(this.state.selectedRole.district_required||this.state.selectedRole.room_required)&&Object(E.jsxs)("div",{className:"space-y-2",children:[Object(E.jsx)("label",{className:"mb-5 text-sm font-medium text-gray-700 tracking-wide",children:"District"}),Object(E.jsxs)("select",{className:"block w-full text-base bg-white text-grey-darker border-2 rounded px-4 py-3 md:w-full focus:outline-none focus:bg-gray-100 ".concat(this.state.formError&&"district_id"===this.state.formError.element?"border-red-500":"border-gray-400"),onChange:function(e){t.setDistrictId(e.target.value),t.state.formError&&"district_id"===t.state.formError.element&&t.setFormError(null),t.setSchoolId(""),t.setCenterId(""),t.setRoomId("")},value:this.state.districtId,disabled:this.state.loadingRequest,children:[Object(E.jsx)("option",{value:"",children:"Select district"}),this.props.roomList&&this.distinctDistrict(this.props.roomList,Object(u.f)(this.state.provinceId)?void 0:this.state.provinceId).length>0?this.distinctDistrict(this.props.roomList,Object(u.f)(this.state.provinceId)?void 0:this.state.provinceId).map((function(e){return Object(E.jsx)("option",{value:e._id,children:e.district_name},e._id)})):Object(E.jsx)("option",{value:"",disabled:!0,children:"No district found"})]}),this.state.formError&&"district_id"===this.state.formError.element&&Object(E.jsx)("span",{className:"text-red-500",children:this.state.formError.msg})]}),this.state.selectedRole&&this.state.selectedRole.school_required&&Object(E.jsxs)("div",{className:"space-y-2",children:[Object(E.jsx)("label",{className:"mb-5 text-sm font-medium text-gray-700 tracking-wide",children:"School"}),Object(E.jsxs)("select",{className:"block w-full text-base bg-white text-grey-darker border-2 rounded px-4 py-3 md:w-full focus:outline-none focus:bg-gray-100 ".concat(this.state.formError&&"school_id"===this.state.formError.element?"border-red-500":"border-gray-400"),onChange:function(e){t.setSchoolId(e.target.value),t.state.formError&&"school_id"===t.state.formError.element&&t.setFormError(null),t.setCenterId(""),t.setRoomId("")},disabled:this.state.loadingRequest,value:this.state.schoolId,children:[Object(E.jsx)("option",{value:"",children:"Selected school"}),this.props.schoolList&&this.props.schoolList.map((function(e){return Object(E.jsx)("option",{value:e._id,children:e.school_name},e._id)}))]}),this.state.formError&&"school_id"===this.state.formError.element&&Object(E.jsx)("span",{className:"text-red-500",children:this.state.formError.msg})]}),this.state.selectedRole&&this.state.selectedRole.room_required&&Object(E.jsxs)("div",{className:"space-y-2",children:[Object(E.jsx)("label",{className:"mb-5 text-sm font-medium text-gray-700 tracking-wide",children:"Center"}),Object(E.jsxs)("select",{className:"block w-full text-base bg-white text-grey-darker border-2 rounded px-4 py-3 md:w-full focus:outline-none focus:bg-gray-100 ".concat(this.state.formError&&"center_id"===this.state.formError.element?"border-red-500":"border-gray-400"),onChange:function(e){t.setCenterId(e.target.value),t.state.formError&&"center_id"===t.state.formError.element&&t.setFormError(null),t.setRoomId("")},disabled:this.state.loadingRequest,value:this.state.centerId,children:[Object(E.jsx)("option",{value:"",children:"Select center"}),this.state.districtId&&this.state.districtId.length>0&&this.props.roomList&&this.distinctCenter(this.props.roomList,this.state.districtId).length>0?this.distinctCenter(this.props.roomList,this.state.districtId).map((function(e,t){return Object(E.jsx)("option",{value:e.center_id,children:e.center_name},e.center_id+t)})):Object(E.jsx)("option",{value:"",disabled:!0,children:"No center found"})]}),this.state.formError&&"center_id"===this.state.formError.element&&Object(E.jsx)("span",{className:"text-red-500",children:this.state.formError.msg})]}),this.state.selectedRole&&this.state.selectedRole.room_required&&Object(E.jsxs)("div",{className:"space-y-2",children:[Object(E.jsx)("label",{className:"mb-5 text-sm font-medium text-gray-700 tracking-wide",children:"Room"}),Object(E.jsxs)("select",{className:"block w-full text-base bg-white text-grey-darker border-2 rounded px-4 py-3 md:w-full focus:outline-none focus:bg-gray-100 ".concat(this.state.formError&&"room_id"===this.state.formError.element?"border-red-500":"border-gray-400"),onChange:function(e){t.setRoomId(e.target.value),t.state.formError&&"room_id"===t.state.formError.element&&t.setFormError(null)},disabled:this.state.loadingRequest,value:this.state.roomId,children:[Object(E.jsx)("option",{value:"",children:"Select room"}),!Object(u.f)(this.state.centerId)&&this.props.roomList&&this.distinctRoom(this.props.roomList,this.state.centerId).length>0?this.distinctRoom(this.props.roomList,this.state.centerId).map((function(e,t){return Object(E.jsx)("option",{value:e.room_id,className:"".concat("0"===e.room_name?"hidden":"block"),children:e.room_name},e.room_id+t)})):Object(E.jsx)("option",{value:"",disabled:!0,children:"No room found"})]}),this.state.formError&&"room_id"===this.state.formError.element&&Object(E.jsx)("span",{className:"text-red-500",children:this.state.formError.msg})]}),Object(E.jsxs)("div",{className:"flex justify-between 2xl:justify-start gap-2",children:[Object(E.jsx)("button",{className:"btn bg-gray-500 text-gray-50 focus:outline-none",onClick:function(){t.props.setChangeRole(!1),t.setFormError(null),t.setProvinceId(""),t.setDistrictId(""),t.setSchoolId(""),t.setCenterId(""),t.setRoomId("")},disabled:this.state.loadingRequest,children:"Back"}),Object(E.jsx)("button",{className:"btn btn-blue focus:outline-none",disabled:this.state.loadingRequest,children:this.state.loadingRequest?"Loading...":"Save Change"})]})]})})]})}),Object(E.jsxs)("div",{className:"cols-span-1 md:col-span-2 bg-white w-full border rounded text-center p-2 hidden md:block",children:[Object(E.jsx)("div",{className:"my-4",children:Object(E.jsxs)("span",{className:"text-gray-600 font-semibold text-2xl",children:[null===(e=this.state.selectedRole)||void 0===e?void 0:e.role,"'s Default Access"]})}),!this.state.loading&&Object(E.jsx)("div",{className:"overflow-x-auto w-full",children:Object(E.jsx)(d.a,{columns:[{columnTitle:"Access Name",alignText:"left",padding:"p-3"},{columnTitle:"Create",alignText:"left"},{columnTitle:"View",alignText:"left"},{columnTitle:"Update",alignText:"left"},{columnTitle:"Delete",alignText:"left"}],rows:this.tableData,pagination:!1,search:!1,searchBG:"bg-gray-50",thColor:"gray",tableId:"defaultAccess"})})]})]})}}]),s}(o.Component),T=Object(m.b)((function(e){return{schoolLevels:e.schoolLevels}}),{assignRoleToUserAccess:y.a,PushPopupAlert:O.tb})(I),D=s(75);!function(e){e.View_User="View User Info",e.Add_Access="Add Access To User",e.Update_Access="Update User Access",e.Close_Modal="Close Modal"}(r||(r={}));var L=function(e){var t=[];for(var s in e){var r=e[s].districts;for(var n in r){var c=r[n].centers;for(var i in c){var a=c[i].rooms;for(var o in a)t.push({province_id:e[s]._id,province_name:e[s].province_name,district_id:r[n]._id,district_name:r[n].district_name,center_id:c[i]._id,center_name:c[i].center_name,room_id:a[o]._id,room_name:a[o].room_number.toString(),capacity:a[o].capacity,occupied:a[o].occupied})}}}return t};t.b=Object(m.b)((function(e){return{schoolLevels:e.schoolLevels}}),{blockUserToSystem:y.b,unBlockUserToSystem:y.f,resetUserAccess:y.e})((function(e){var t,s,r,n=e.users,m=e.roleList,p=(e.userTypes,e.district),h=e.loadingUser,x=e.schoolLevels,j=e.setLoadingUser,g=e.blockUserToSystem,v=e.unBlockUserToSystem,O=e.manageUser,y=e.setManageUser,w=e.changeRole,S=e.setChangeRole,k=e.feedBack,I=e.setFeedBack,A=e.resetUserAccess,P=Object(o.useState)(""),U=Object(a.a)(P,2),F=U[0],q=U[1],M=Object(o.useState)(!1),B=Object(a.a)(M,2),z=B[0],G=B[1],H=Object(o.useState)(null),Y=Object(a.a)(H,2),V=Y[0],W=Y[1],K=Object(o.useState)(null),X=Object(a.a)(K,2),J=X[0],Z=X[1],Q=Object(o.useState)(null),$=Object(a.a)(Q,2),ee=$[0],te=$[1],se=Object(o.useState)(null),re=Object(a.a)(se,2),ne=re[0],ce=re[1],ie=Object(o.useState)(null),ae=Object(a.a)(ie,2),oe=ae[0],le=ae[1],de=Object(o.useState)(null),ue=Object(a.a)(de,2),me=ue[0],fe=ue[1];Object(o.useEffect)((function(){var e=function(){var e=Object(i.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return I({type:"",message:""}),j(!0),e.prev=2,e.next=5,_.a.get("".concat(C.a.APPLICATION,"/schools"));case 5:t=e.sent,Z(t.data),j(!1),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),I({type:"danger",message:Object(R.a)(e.t0)});case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(){return e.apply(this,arguments)}}(),t=function(){var e=Object(i.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return I({type:"",message:""}),j(!0),e.prev=2,e.next=5,_.a.get("".concat(C.a.APPLICATION,"/roomlocation"));case 5:t=e.sent,te(t.data),ce(L(t.data)),j(!1),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),I({type:"danger",message:Object(R.a)(e.t0)});case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(){return e.apply(this,arguments)}}();e(),t()}),[I,j]);var be=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"block";if(I({type:"",message:""}),e||I({type:"warning",message:"User Access is required doesn't exist"}),G(!0),!window.confirm("Are sure you want to ".concat(t," this user?")))return G(!1);"block"===t?g(e):v(e),I({type:"success",message:"User has been ".concat("block"===t?"block":"unblock","ed!")}),G(!1),e=""},pe=function(){var e=Object(i.a)(c.a.mark((function e(t){var s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(I({type:"",message:""}),t||I({type:"warning",message:"User Access is required doesn't exist"}),window.confirm("Are sure you want to reset to default access?")){e.next=4;break}return e.abrupt("return",G(!1));case 4:return G(!0),W("RESET"),e.prev=6,e.next=9,_.a.delete("".concat(C.a.AUTH,"/custaccess/user/").concat(t));case 9:e.sent&&A(t),(s=n.filter((function(e){return e.user_id===t}))[0]).default_access&&le(s.default_access.access),I({type:"success",message:"Reseting User Access complete successfully"}),fe(null),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(6),console.error({reseting_user_access:e.t0}),I({type:"danger",message:Object(R.a)(e.t0)});case 21:G(!1),W(null),t="";case 24:case"end":return e.stop()}}),e,null,[[6,17]])})));return function(t){return e.apply(this,arguments)}}(),he=function(e,t){var s=[],r=[];if(t)r=e.find((function(e){return e._id===t}))&&e.find((function(e){return e._id===t})).districts?e.find((function(e){return e._id===t})).districts:[];else for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n))for(var c in e[n].districts)Object.prototype.hasOwnProperty.call(e[n].districts,c)&&(s.includes(e[n].districts[c]._id)||(s.push(e[n].districts[c]._id),r.push(e[n].districts[c])));return r};return Object(E.jsxs)(o.Fragment,{children:[k&&""!==k.type&&Object(E.jsxs)("div",{className:"alert-".concat(k.type," flex flex-row items-center relative"),children:[Object(E.jsx)("span",{className:"absolute top-0 bottom-0 right-0 px-4 py-3",children:Object(E.jsx)(l.y,{className:"h-5 w-5 text-gray-700 hover:font-bold",title:"Close",onClick:function(){return I({type:"",message:""})}})}),Object(E.jsx)(l.F,{className:"h-10 w-10"}),Object(E.jsxs)("div",{className:"alert-content ml-4",children:[Object(E.jsx)("div",{className:"alert-title font-semibold text-lg",children:"success"===k.type?"Success":"Error"}),Object(E.jsx)("div",{className:"alert-description text-sm",children:k.message})]})]}),!O&&Object(E.jsx)("div",{className:"grid md:grid-cols-5 gap-2 mb-5",children:Object(E.jsxs)("div",{className:"md:col-span-5 rounded",children:[Object(E.jsx)("div",{className:"my-2 flex sm:flex-row flex-col justify-between",children:Object(E.jsx)("div",{className:"flex flex-col md:flex-row gap-1 items-center mx-1.5"})}),n&&Object(E.jsx)(d.a,{columns:[{columnTitle:"#",alignText:"left",padding:"p-3"},{columnTitle:"Names",alignText:"left",padding:"p-3"},{columnTitle:"Email",alignText:"left",padding:"p-3"},{columnTitle:"Gender",alignText:"left",padding:"p-3"},{columnTitle:"Role",alignText:"left",padding:"p-3"},{columnTitle:"",alignText:"left",padding:"p-3"}],rows:function(){if(!0===h)return[Object(E.jsx)("tr",{className:"border-b border-gray-200 hover:bg-gray-100",children:Object(E.jsx)("td",{className:"p-3 text-center",colSpan:8,children:Object(E.jsx)(N.a,{})})},1)];var e=n;return e.length<=0?[Object(E.jsx)("tr",{className:"border-b border-gray-200 hover:bg-gray-100",children:Object(E.jsx)("td",{className:"p-3 text-center",colSpan:8,children:"No Data Found"})},1)]:e.map((function(e,t){var s,r;return Object(E.jsxs)("tr",{className:"border-b border-gray-200 hover:bg-gray-100 group cursor-pointer",onClick:function(){y(e),q(e.user_id)},children:[Object(E.jsx)("td",{className:"p-3 text-left whitespace-nowrap",children:t+1}),Object(E.jsx)("td",{className:"p-3 text-left",children:Object(E.jsx)("span",{children:e.user_info&&e.user_info.fname+" "+e.user_info.lname})}),Object(E.jsx)("td",{className:"p-3 text-left",children:e.email}),Object(E.jsx)("td",{className:"p-3 text-left",children:e.user_info&&"M"===e.user_info.sex?"Male":"Female"}),Object(E.jsx)("td",{className:"p-3 text-left text-blue-700 text-base font-medium",children:e.default_access&&e.default_access.system_user_role_id&&e.default_access.system_user_role_id&&Object(E.jsx)("span",{className:"px-2 py-1 font-semibold rounded text-blue-700 bg-blue-100 dark:bg-blue-700 dark:text-blue-100",children:(null===(s=Object(u.e)(m,e.default_access.system_user_role_id))||void 0===s?void 0:s.role)&&Object(u.a)(null===(r=Object(u.e)(m,e.default_access.system_user_role_id))||void 0===r?void 0:r.role)})}),Object(E.jsx)("td",{className:"px-3 text-center",children:Object(E.jsx)("button",{className:"btn bg-gray-200 group-hover:bg-blue-700 group-hover:text-white focus:outline-none",title:"Manage User Access",onClick:function(){y(e),q(e.user_id)},children:"Manage"})})]},t)}))},pagination:!0,search:!0,thColor:"gray",loading:h})]})}),O&&Object(E.jsxs)("div",{className:"bg-gray-100 h-100",children:[k&&""!==k.type&&Object(E.jsxs)("div",{className:"alert-".concat(k.type," flex flex-row items-center relative mb-4"),children:[Object(E.jsx)("span",{className:"absolute top-0 bottom-0 right-0 px-4 py-3",children:Object(E.jsx)(l.y,{className:"h-5 w-5 text-gray-700 hover:font-bold",title:"Close",onClick:function(){return I({type:"",message:""})}})}),Object(E.jsx)(l.F,{className:"h-10 w-10"}),Object(E.jsxs)("div",{className:"alert-content ml-4",children:[Object(E.jsx)("div",{className:"alert-title font-semibold text-lg",children:"success"===k.type?"Success":"Error"}),Object(E.jsx)("div",{className:"alert-description text-sm",children:k.message})]})]}),Object(E.jsxs)("div",{className:"bg-white border-b border-t px-4 py-2 flex flex-col md:flex-row items-center gap-x-14",children:[n.find((function(e){return e.user_id===F}))?Object(E.jsxs)("div",{className:"flex flex-col md:flex-row md:items-start items-center w-full gap-3",children:[Object(E.jsx)("img",{src:"pic"!==n.find((function(e){return e.user_id===F})).user_info.photo?n.find((function(e){return e.user_id===F})).user_info.photo:f,alt:"",className:"rounded-full w-32 h-32"}),Object(E.jsxs)("div",{className:"flex flex-col gap-1 items-start w-full",children:[Object(E.jsx)("span",{className:"text-2xl font-semibold",children:n.find((function(e){return e.user_id===F})).user_info.fname+" "+n.find((function(e){return e.user_id===F})).user_info.lname}),Object(E.jsxs)("div",{className:"flex items-center",children:[Object(E.jsx)(l.ab,{className:"w-5 h-5"}),Object(E.jsx)("span",{className:"text-lg font-medium",children:n.find((function(e){return e.user_id===F})).default_access&&Object(u.e)(m,n.find((function(e){return e.user_id===F})).default_access.system_user_role_id).role})]}),Object(E.jsxs)("div",{className:"flex items-center gap-1",children:[Object(E.jsx)("span",{className:"text-gray-500",children:"Level:"}),Object(E.jsx)("span",{className:"text-base font-medium",children:n.find((function(e){return e.user_id===F})).default_access&&Object(u.e)(m,n.find((function(e){return e.user_id===F})).default_access.system_user_role_id).district_required?"District":n.find((function(e){return e.user_id===F})).default_access&&Object(u.e)(m,n.find((function(e){return e.user_id===F})).default_access.system_user_role_id).school_required?"School":n.find((function(e){return e.user_id===F})).default_access&&Object(u.e)(m,n.find((function(e){return e.user_id===F})).default_access.system_user_role_id).room_required?"Room":n.find((function(e){return e.user_id===F})).default_access&&Object(u.e)(m,n.find((function(e){return e.user_id===F})).default_access.system_user_role_id).education_institution_required?"Institute":"-"})]}),n.find((function(e){return e.user_id===F})).default_access&&Object(u.e)(m,n.find((function(e){return e.user_id===F})).default_access.system_user_role_id).education_institution_required?Object(E.jsxs)("div",{className:"flex items-center gap-1",children:[Object(E.jsx)("span",{className:"text-gray-500",children:"Institute:"}),Object(E.jsx)("span",{className:"text-base font-medium",children:n.find((function(e){return e.user_id===F})).default_access&&x.education_categories&&Object(u.c)(x.education_categories,n.find((function(e){return e.user_id===F})).default_access.education_institution_id)?Object(u.c)(x.education_categories,n.find((function(e){return e.user_id===F})).default_access.education_institution_id).education_category_title:"Unknown Institute"})]}):n.find((function(e){return e.user_id===F})).default_access&&Object(u.e)(m,n.find((function(e){return e.user_id===F})).default_access.system_user_role_id).district_required?Object(E.jsxs)("div",{className:"flex items-center gap-1",children:[Object(E.jsx)("span",{className:"text-gray-500",children:"District:"}),Object(E.jsx)("span",{className:"text-base font-medium",children:n.find((function(e){return e.user_id===F})).default_access&&ee&&he(ee).find((function(e){return e._id===n.find((function(e){return e.user_id===F})).default_access.district_id}))&&he(ee).find((function(e){return e._id===n.find((function(e){return e.user_id===F})).default_access.district_id})).district_name})]}):n.find((function(e){return e.user_id===F})).default_access&&Object(u.e)(m,n.find((function(e){return e.user_id===F})).default_access.system_user_role_id).school_required?Object(E.jsxs)("div",{className:"flex items-center gap-1",children:[Object(E.jsx)("span",{className:"text-gray-500",children:"School:"}),Object(E.jsx)("span",{className:"text-base font-medium",children:J&&J.find((function(e){var t;return e._id===(null===(t=n.find((function(e){return e.user_id===F})).default_access)||void 0===t?void 0:t.school_id)}))?J.find((function(e){var t;return e._id===(null===(t=n.find((function(e){return e.user_id===F})).default_access)||void 0===t?void 0:t.school_id)})).school_name:"Unknown school"})]}):n.find((function(e){return e.user_id===F})).default_access&&Object(u.e)(m,n.find((function(e){return e.user_id===F})).default_access.system_user_role_id).room_required&&Object(E.jsxs)("div",{className:"flex items-center gap-1",children:[Object(E.jsx)(l.Z,{className:"text-gray-500"}),ne&&Object(E.jsx)("span",{className:"text-base font-medium",children:(null===(t=ne.find((function(e){var t;return e.room_id===(null===(t=n.find((function(e){return e.user_id===F})).default_access)||void 0===t?void 0:t.room_id)})))||void 0===t?void 0:t.district_name)+" - "+(null===(s=ne.find((function(e){var t;return e.room_id===(null===(t=n.find((function(e){return e.user_id===F})).default_access)||void 0===t?void 0:t.room_id)})))||void 0===s?void 0:s.center_name)+" - Room "+(null===(r=ne.find((function(e){var t;return e.room_id===(null===(t=n.find((function(e){return e.user_id===F})).default_access)||void 0===t?void 0:t.room_id)})))||void 0===r?void 0:r.room_name)})]})]})]},n.find((function(e){return e.user_id===F})).user_id):Object(E.jsx)(D.b,{theme:D.a.Dark,value:"User info not found"}),n.find((function(e){return e.user_id===F}))&&Object(E.jsxs)("div",{className:"flex flex-col w-full",children:[Object(E.jsxs)("div",{className:"flex items-center gap-1",children:[Object(E.jsx)("span",{className:"text-gray-500",children:"NID:"}),Object(E.jsx)("span",{className:"text-base font-medium",children:n.find((function(e){return e.user_id===F})).n_id})]}),Object(E.jsxs)("div",{className:"flex items-center gap-1",children:[Object(E.jsx)("span",{className:"text-gray-500",children:"Email:"}),Object(E.jsx)("span",{className:"text-base font-medium",children:n.find((function(e){return e.user_id===F})).email})]}),Object(E.jsxs)("div",{className:"flex items-center gap-1",children:[Object(E.jsx)("span",{className:"text-gray-500",children:"Phone:"}),Object(E.jsx)("span",{className:"text-base font-medium",children:n.find((function(e){return e.user_id===F})).phone_number})]}),Object(E.jsxs)("div",{className:"flex items-center gap-1",children:[Object(E.jsx)("span",{className:"text-gray-500",children:"Status:"}),Object(E.jsx)("span",{className:"text-base font-medium",children:!1===n.find((function(e){return e.user_id===F})).is_active?"Blocked":"Active"})]}),Object(E.jsxs)("div",{className:"flex items-center gap-1",children:[n.find((function(e){return e.user_id===F})).custome_access&&Object(E.jsxs)("button",{className:"px-2 py-1 font-semibold text-gray-50 inline-flex items-center rounded ".concat(V&&"RESET"===V?"cursor-wait bg-gray-400":"bg-gray-600"),onClick:function(){return pe(n.find((function(e){return e.user_id===F})).user_id)},disabled:z,children:[Object(E.jsx)(l.ab,{className:"w-4 h-4 fill-current"}),Object(E.jsx)("span",{children:V&&"RESET"===V?"Reseting...":"Reset Access"})]}),!w&&Object(E.jsxs)("button",{className:"bg-yellow-300 hover:bg-yellow-400 px-2 py-1 font-semibold text-black inline-flex items-center rounded",onClick:function(){return S(!0)},children:[Object(E.jsx)(l.ab,{className:"w-4 h-4 fill-current"}),Object(E.jsx)("span",{children:"Change Role"})]}),n.find((function(e){return e.user_id===F})).is_active?Object(E.jsxs)("button",{className:"px-2 py-1 font-semibold hidden text-gray-100 inline-flex items-center rounded ".concat(V&&"STATUS"===V?"cursor-wait bg-red-500":"bg-red-700"),onClick:function(){return!z&&O&&be(n.find((function(e){return e.user_id===F})).user_id)},disabled:z,children:[Object(E.jsx)(l.ab,{className:"w-4 h-4 fill-current"}),Object(E.jsx)("span",{children:V&&"RESET"===V?"Loading...":"Activate"})]}):Object(E.jsxs)("button",{className:"px-2 py-1 font-semibold hidden text-gray-100 inline-flex items-center rounded ".concat(V&&"STATUS"===V?"cursor-wait bg-yellow-500":"bg-yellow-700"),onClick:function(){return!z&&O&&be(n.find((function(e){return e.user_id===F})).user_id)},disabled:z,children:[Object(E.jsx)(l.ab,{className:"w-4 h-4 fill-current"}),Object(E.jsx)("span",{children:V&&"RESET"===V?"Loading...":"Re-Activate"})]})]})]},n.find((function(e){return e.user_id===F})).user_id)]}),O&&w?Object(E.jsx)(T,{userInfo:O,roleList:m,district:p,setFeedBack:I,schoolList:J,roomList:ee,setChangeRole:S}):Object(E.jsx)(b.UserAccess,{userInfo:n.filter((function(e){return e.user_id===F}))[0],manageUserId:F,feedBack:k,setFeedBack:I,setUserAccess:le,userAccess:oe,setCurrentAccess:fe,currentAccess:me})]})]})}))},252:function(e,t){},253:function(e,t){},450:function(e,t,s){"use strict";var r,n;s.d(t,"a",(function(){return r})),s.d(t,"b",(function(){return n})),function(e){e.INVIGILATOR="room_id",e.HEAD_TEACHER="school_id",e.DIRECTOR_OF_EDUCATION="district_id",e.INSTITUTE="education_institution_id"}(r||(r={})),function(e){e.first_name="first_name",e.last_name="last_name",e.email="email",e.phone_number="phone_number",e.gender="gender",e.national_id="national_id",e.province_name="province_name",e.district_name="district_name",e.center_name="center_name",e.room_name="room_name"}(n||(n={}))},856:function(e,t,s){"use strict";s.r(t),s.d(t,"Invigilator",(function(){return P}));var r=s(5),n=s.n(r),c=s(7),i=s(20),a=s(19),o=s(22),l=s(21),d=s(8),u=s.n(d),m=s(4),f=s(84),b=s(208),p=s(59),h=s(10),x=s(17),j=s(3),g=s(211),_=s(219),v=s(223),O=s(23),y=s(200),N=s(28),w=s(450),C=s(196),R=s(9),S=s(12),E=s(217),k=s(41),I=s(234),T=s(1),D=function(e){var t=function(t){var s=[],r=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&("province"!==e.locationType||r.includes(t[n].province_id)?"district"!==e.locationType||r.includes(t[n].district_id)?"center"!==e.locationType||r.includes(t[n].center_id)||(r.push(t[n].center_id),s.push(t[n])):(r.push(t[n].district_id),s.push(t[n])):(r.push(t[n].province_id),s.push(t[n])));return r=[],s};return Object(T.jsx)("section",{className:"".concat(e.isModal?"":"border-2 rounded border-gray-400 shadow-md"),children:Object(T.jsxs)("div",{className:"w-full h-52 mt-2 ".concat(e.isModal?"px-2":""," overflow-y-auto divide-y divide-gray-300 ").concat(e.bgWhite&&"bg-white"),children:[Object(T.jsx)("section",{children:Object(T.jsxs)("div",{className:"group flex items-center justify-between my-1 ".concat("all"===e.selectedLocation?"cursor-default bg-blue-50 hover:bg-blue-100":"hover:bg-blue-100"),children:[Object(T.jsx)("div",{className:"p-1 w-full mr-2 ".concat("all"===e.selectedLocation?"cursor-default":"cursor-pointer"),onClick:function(){e.setChooseLocation(null),!e.loadindRequest&&"all"!==e.selectedLocation&&e.setSelectedLocation("all")},children:Object(T.jsxs)("p",{className:"text-sm font-medium text-black",children:["All ",e.locationType]})}),Object(T.jsx)("button",{type:"button",className:"bg-blue-200 group-hover:bg-blue-300 text-blue-700 group-hover:text-blue-800 p-1 mr-1 rounded text-sm",children:"Choose"})]})}),t(e.locationList).length>0?t(e.locationList).map((function(t,s){return Object(T.jsx)("section",{children:Object(T.jsxs)("div",{className:"group flex items-center justify-between my-1 hover:bg-gray-100",children:[Object(T.jsx)("div",{className:"p-1 w-full mr-2 cursor-pointer",onClick:function(){e.setChooseLocation(null),!e.loadindRequest&&e.setSelectedLocation(t)},children:Object(T.jsx)("p",{className:"text-sm font-medium text-black",children:Object(C.a)("province"===e.locationType?t.province_name:"district"===e.locationType?t.district_name:t.center_name)})}),Object(T.jsx)("button",{type:"button",className:"bg-blue-200 group-hover:bg-blue-300 text-blue-700 group-hover:text-blue-800 p-1 mr-1 rounded text-sm",children:"Choose"})]})},s+t.center_id)})):Object(T.jsx)("div",{className:"text-center p-3",children:Object(T.jsx)("p",{className:"text-base font-medium text-black",children:"No district available"})})]})})},L=[{key:w.b.province_name,title:"Province name",status:!0},{key:w.b.district_name,title:"District name",status:!0},{key:w.b.center_name,title:"Center name",status:!0},{key:w.b.first_name,title:"First name",status:!0},{key:w.b.last_name,title:"Last name",status:!0},{key:w.b.national_id,title:"National ID",status:!0},{key:w.b.gender,title:"Gender",status:!0},{key:w.b.email,title:"Email",status:!0},{key:w.b.phone_number,title:"Phone",status:!0}],A=function(e){Object(o.a)(s,e);var t=Object(l.a)(s);function s(e){var r;return Object(i.a)(this,s),(r=t.call(this,e)).setLoading=function(e){r.setState({loading:e})},r.setSelectAll=function(e){r.setState({selectAll:e})},r.setReportTitle=function(e){r.setState({reportTitle:e})},r.setFormError=function(e){r.setState({formError:e})},r.loadInvigilator=Object(c.a)(n.a.mark((function e(){var t;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.a.get("".concat(R.a.AUTH,"/userbytype/").concat(w.a.INVIGILATOR));case 3:t=e.sent,console.log("===================================="),console.log({reportMainData:t.data}),console.log("===================================="),r.setState({reportMainData:t.data}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.error({reportMainData_error:e.t0}),r.props.PushPopupAlert({title:Object(S.a)(e.t0),theme:N.a.danger});case 14:case"end":return e.stop()}}),e,null,[[0,10]])}))),r.setSortOrder=function(e){r.setState({sortOrder:e})},r.setSortProperty=function(e){r.setState({sortProperty:e})},r.setIsSorted=function(e){r.setState({isSorted:e})},r.setSort=function(e){r.state.sortProperty===e&&"ASC"===r.state.sortOrder?r.setSortOrder("DESC"):r.setSortOrder("ASC"),r.setSortProperty(e),r.setIsSorted(!0)},r.setGenerateReportModal=function(e){r.setState({generateReportModal:e})},r.componentDidMount=function(){null===r.state.reportMainData&&r.loadInvigilator(),r.state.loading&&r.props.getAllRoom((function(e,t,s){r.setLoading(e),e||Object(C.f)(t)||r.props.PushPopupAlert({title:t,theme:N.a.warning})}))},r.showProvince=function(e){var t=e+" province";return e.toLocaleLowerCase().includes("kigali")&&(t=e+" city"),t},r.updateContentToPrint=function(){var e="Room with invigilator report";if("all"!==r.state.selectedCenter?e="Room with invigilator in "+r.showProvince(r.state.selectedCenter.province_name)+" - "+r.state.selectedCenter.district_name+" district - "+r.state.selectedCenter.center_name+" report":"all"!==r.state.selectedDistrict?e="Room with invigilator in "+r.showProvince(r.state.selectedDistrict.province_name)+" - "+r.state.selectedDistrict.district_name+" district report":"all"!==r.state.selectedProvince&&(e="Room with invigilator in "+r.showProvince(r.state.selectedProvince.province_name)+" report"),r.setReportTitle(e),r.state.reportMainData){var t=r.getNeededData(Object(I.a)(r.props.locations),r.state.reportMainData);t=r.FC_FilterReportData(t,r.state.selectedProvince,r.state.selectedDistrict,r.state.selectedCenter);var s=[],n=1;for(var c in t)if(Object.prototype.hasOwnProperty.call(t,c)){var i=null;if(i={no:n,province_name:t[c].province_name,district_name:t[c].district_name,center_name:t[c].center_name,room_name:t[c].room_name,first_name:t[c].first_name?t[c].first_name:"",last_name:t[c].last_name?t[c].last_name:"",gender:t[c].gender?t[c].gender:"",national_id:t[c].national_id?t[c].national_id:"",phone_number:t[c].phone_number?t[c].phone_number:"",email:t[c].email?t[c].email:""},r.state.reportContentExport)for(var a in r.state.reportContentExport)Object.prototype.hasOwnProperty.call(r.state.reportContentExport,a)&&!r.state.reportContentExport[a].status&&i&&delete i[r.state.reportContentExport[a].key];i&&s.push(i),n++}r.setState({centerToPrint:s}),s=[],n=1}},r.updateReportContent=function(e){if(r.state.reportContentExport){var t=r.state.reportContentExport.findIndex((function(t){return t.key===e})),s=r.state.reportContentExport;s[t].status=!s[t].status,r.setState({reportContentExport:s}),s.find((function(e){return!1===e.status}))?r.setSelectAll(!1):r.setSelectAll(!0),r.updateContentToPrint()}},r.isChangeAllowed=function(e){return e!==w.b.center_name&&e!==w.b.district_name&&e!==w.b.room_name&&e!==w.b.first_name&&e!==w.b.last_name&&e!==w.b.national_id&&e!==w.b.province_name},r.resetReportContent=function(e){var t=r.state.reportContentExport;if(t){for(var s in t)r.isChangeAllowed(t[s].key)&&(t[s].status=!e);r.setState({reportContentExport:t}),r.setSelectAll(!e),r.updateContentToPrint()}},r.setDownloading=function(e){r.setState({downloading:e})},r.FC_GeneratePDF=function(){if(!document.querySelectorAll("#report_content tbody tr").length)return r.props.PushPopupAlert({title:"Can't generate Report of empty Data",theme:N.a.warning}),!1;var e=document.getElementById("report_content"),t="All Room";"all"!==r.state.selectedCenter?t="Room in "+r.state.selectedCenter.province_name+" province - "+r.state.selectedCenter.district_name+" district - "+r.state.selectedCenter.center_name+" district report":"all"!==r.state.selectedDistrict?t="Room in "+r.state.selectedDistrict.province_name+" province - "+r.state.selectedDistrict.district_name+" district report":"all"!==r.state.selectedProvince&&(t="Room in "+r.state.selectedProvince.province_name+" district report");var s={doneBy:r.props.auth.user.fname+" "+r.props.auth.user.lname,title:"Room Report",subjectTitle:"Room with invigilator",subject:t,period:"-",footer:"Online Recruitment",institute:"All institute"};e&&Object(_.a)(s,e,r.setDownloading)},r.searchData=function(e,t){return void 0===t||""===t?e:e.filter((function(e){var s;for(var r in e)if(s=!1,"center_name"!==r&&"room_name"!==r&&"district_name"!==r&&"province_name"!==r&&"gender"!==r&&"first_name"!==r&&"last_name"!==r&&"national_id"!==r||e[r]&&(s=e[r].toString().toLowerCase().indexOf(t.toLowerCase())>-1),s)break;return s}))},r.setChooseLocation=function(e){r.setState({chooseLocation:e})},r.setSelectedProvince=function(e){r.setState({selectedProvince:e,selectedDistrict:"all",selectedCenter:"all"})},r.setSelectedDistrict=function(e){r.setState({selectedDistrict:e,selectedCenter:"all"})},r.setSelectedCenter=function(e){r.setState({selectedCenter:e})},r.getNeededData=function(e,t){var s=[],r=[],n=function(n){if(Object.prototype.hasOwnProperty.call(e,n)&&!Object(C.f)(e[n].room_id)&&!r.includes(e[n].room_id)){r.push(e[n].room_id);var c=t?t.find((function(t){return t.roles_to_users.room_id===e[n].room_id})):void 0;s.push({_id:e[n].room_id,role_id:c?c.roles_to_users.room_id:null,role_name:c?e[n].room_name:null,role_key:w.a.INVIGILATOR,national_id:c?c.n_id:null,phone_number:c?c.phone_number:null,email:c?c.email:null,first_name:c?c.user_info.fname:null,last_name:c?c.user_info.lname:null,gender:c?c.user_info.sex:null,photo:c?c.user_info.photo:null,province_id:e[n].province_id,province_name:e[n].province_name,district_id:e[n].district_id,district_name:e[n].district_name,center_id:e[n].center_id,center_name:e[n].center_name,room_id:e[n].room_id,room_name:e[n].room_name,school_id:"",school_name:""})}};for(var c in e)n(c);return s},r.FC_FilterReportData=function(e,t,s,r){var n=e;return"all"!==t&&(n=n.filter((function(e){return e.province_id===t.province_id}))),"all"!==s&&(n=n.filter((function(e){return e.district_id===s.district_id}))),"all"!==r&&(n=n.filter((function(e){return e.center_id===r.center_id}))),n},r.state={loading:!0,selectAll:!0,reportMainData:null,reportContentExport:L,reportTitle:"",centerToPrint:null,sortProperty:"",isSorted:!1,sortOrder:"ASC",searchInput:"",generateReportModal:null,formError:null,selectedProvince:"all",chooseLocation:null,selectedDistrict:"all",selectedCenter:"all",downloading:!1},r}return Object(a.a)(s,[{key:"render",value:function(){var e=this;return Object(T.jsxs)("div",{children:[Object(T.jsxs)(y.b,{children:[Object(T.jsxs)("div",{className:"",children:[Object(T.jsx)("div",{className:"text-gray-600 text-sm mb-2",children:"Province:"}),this.state.reportMainData&&Object(T.jsxs)("div",{onClick:function(){return e.setChooseLocation("province")},className:"font-bold bg-blue-50 border border-blue-200 rounded py-2 cursor-pointer text-xs px-2 hover:underline justify-between text-blue-600  mb-4 w-full flex flex-row items-center animate__animated animate__zoomIn",children:["all"!==this.state.selectedProvince?"".concat(this.state.selectedProvince.province_name):"All province",Object(T.jsx)(b.c,{className:"text-lg text-blue-600"})]})]}),"all"!==this.state.selectedProvince&&Object(T.jsxs)("div",{className:"",children:[Object(T.jsx)("div",{className:"text-gray-600 text-sm mb-2",children:"District:"}),this.state.reportMainData&&Object(T.jsxs)("div",{onClick:function(){return e.setChooseLocation("district")},className:"font-bold bg-blue-50 border border-blue-200 rounded py-2 cursor-pointer text-xs px-2 hover:underline justify-between text-blue-600  mb-4 w-full flex flex-row items-center animate__animated animate__zoomIn",children:["all"!==this.state.selectedDistrict?"".concat(this.state.selectedDistrict.district_name):"All district",Object(T.jsx)(b.c,{className:"text-lg text-blue-600"})]})]}),"all"!==this.state.selectedDistrict&&Object(T.jsxs)("div",{className:"",children:[Object(T.jsx)("div",{className:"text-gray-600 text-sm mb-2",children:"Center:"}),this.state.reportMainData&&Object(T.jsxs)("div",{onClick:function(){return e.setChooseLocation("center")},className:"font-bold bg-blue-50 border border-blue-200 rounded py-2 cursor-pointer text-xs px-2 hover:underline justify-between text-blue-600  mb-4 w-full flex flex-row items-center animate__animated animate__zoomIn",children:["all"!==this.state.selectedCenter?"".concat(this.state.selectedCenter.center_name):"All center",Object(T.jsx)(b.c,{className:"text-lg text-blue-600"})]})]})]}),Object(T.jsxs)("section",{children:[Object(T.jsxs)("div",{className:"grid md:grid-cols-12",children:[Object(T.jsx)("div",{className:"col-span-8",children:Object(T.jsx)("div",{className:"mt-4 mx-4 flex flex-col gap-1",children:Object(T.jsx)("span",{className:"text-3xl font-bold text-gray-700",children:"Room with invigilator report"})})}),Object(T.jsx)("div",{className:"col-span-4",children:Object(T.jsx)("div",{className:"float-right mt-2",children:this.state.reportMainData&&this.state.reportMainData.length>0&&Object(T.jsxs)("div",{className:"flex flex-row items-center justify-end font-bold mb-2",children:[Object(T.jsx)(f.e,{className:"text-2xl text-gray-500"}),Object(T.jsx)("span",{className:"text-gray-500",children:"Export as"}),Object(T.jsx)("button",{className:"px-4 py-1 ml-1 rounded bg-white border hover:text-blue-600 font-bold hover:bg-blue-50 border-gray-200",disabled:!this.state.reportMainData,onClick:function(){e.updateContentToPrint(),e.setGenerateReportModal({reportType:"EXCEL",status:!0})},children:"EXCEL"}),Object(T.jsx)("button",{className:"px-4 py-1 ml-1 rounded bg-white border hover:text-blue-600 font-bold hover:bg-blue-50 border-gray-200 ".concat(this.state.downloading&&"cursor-wait"),onClick:function(){return e.FC_GeneratePDF()},disabled:!(this.state.reportMainData&&!this.state.downloading),children:"PDF"})]})})})]}),Object(T.jsxs)("div",{className:"bg-white my-4",children:[Object(T.jsx)("div",{className:"w-full px-2 py-2",children:Object(T.jsx)("input",{onChange:function(t){return e.setState({searchInput:t.target.value})},type:"text",value:this.state.searchInput,placeholder:"Search...",className:"w-full bg-gray-100 py-2 px-3 rounded focus:border-gray-800",disabled:null===this.state.reportMainData||this.FC_FilterReportData(this.getNeededData(Object(I.a)(this.props.locations),this.state.reportMainData),this.state.selectedProvince,this.state.selectedDistrict,this.state.selectedCenter).length<=0})}),Object(T.jsxs)("table",{className:"w-full shadow",id:"report_content",children:[Object(T.jsx)("thead",{className:"bg-white border-b-2 border-gray-300 text-gray-600 font-bold text-sm",children:Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{className:"px-2 py-2",children:"#"}),Object(T.jsx)("td",{className:"px-2 py-2 cursor-pointer",onClick:function(){return e.setSort("province_name")},children:Object(T.jsxs)("div",{className:"flex items-center gap-1",children:["Province ",Object(T.jsx)(f.i,{})]})}),Object(T.jsx)("td",{className:"px-2 py-2 cursor-pointer",onClick:function(){return e.setSort("district_name")},children:Object(T.jsxs)("div",{className:"flex items-center gap-1",children:["District ",Object(T.jsx)(f.i,{})]})}),Object(T.jsx)("td",{className:"px-2 py-2 cursor-pointer",onClick:function(){return e.setSort("center_name")},children:Object(T.jsxs)("div",{className:"flex items-center gap-1",children:["Center ",Object(T.jsx)(f.i,{})]})}),Object(T.jsx)("td",{className:"px-2 py-2 cursor-pointer",onClick:function(){return e.setSort("room_name")},children:Object(T.jsxs)("div",{className:"flex items-center gap-1",children:["Room number ",Object(T.jsx)(f.i,{})]})}),Object(T.jsx)("td",{className:"px-2 py-2 cursor-pointer",onClick:function(){return e.setSort("fname")},children:Object(T.jsxs)("div",{className:"flex items-center gap-1",children:["Invigilator ",Object(T.jsx)(f.i,{})]})})]})}),Object(T.jsx)("tbody",{children:null===this.state.reportMainData?Object(T.jsx)(v.a,{cols:7}):0===this.searchData(this.FC_FilterReportData(this.getNeededData(Object(I.a)(this.props.locations),this.state.reportMainData),this.state.selectedProvince,this.state.selectedDistrict,this.state.selectedCenter),this.state.searchInput).length?Object(T.jsx)("tr",{children:Object(T.jsx)("td",{colSpan:7,className:"px-2 py-2",children:Object(T.jsxs)("div",{className:"flex flex-col text-gray-400 items-center justify-center bg-gray-100 rounded py-10",children:[Object(T.jsx)(p.c,{className:"text-8xl text-gray-400 mb-2 animate__animated animate__shakeX"}),Object(T.jsxs)("span",{className:"text-sm font-bold",children:["No result found!"," ",this.state.searchInput.length>0&&"Please try to search again"]}),("all"!==this.state.selectedProvince||"all"!==this.state.selectedDistrict||"all"!==this.state.selectedCenter)&&Object(T.jsx)("div",{className:"w-full mt-2 flex flex-row items-center justify-center",children:Object(T.jsxs)("ul",{className:"text-sm py-2 text-blue-600 font-bold flex flex-row gap-2",children:["all"!==this.state.selectedProvince&&Object(T.jsx)("li",{onClick:function(){return e.setChooseLocation("province")},className:"underline text-gray-500 cursor-pointer",children:"Please try another province!"}),"all"!==this.state.selectedDistrict&&Object(T.jsx)("li",{onClick:function(){return e.setChooseLocation("district")},className:"underline text-gray-500 cursor-pointer",children:"Please try another district!"}),"all"!==this.state.selectedCenter&&Object(T.jsx)("li",{onClick:function(){return e.setChooseLocation("center")},className:"underline text-gray-500 cursor-pointer",children:"Please try another center!"})]})})]})})}):Object(k.n)(this.state.isSorted,this.searchData(this.FC_FilterReportData(this.getNeededData(Object(I.a)(this.props.locations),this.state.reportMainData),this.state.selectedProvince,this.state.selectedDistrict,this.state.selectedCenter),this.state.searchInput),this.state.sortProperty,this.state.sortOrder).map((function(e,t){return Object(T.jsxs)("tr",{className:"hover:bg-blue-100 hover:text-blue-700 border-b hover:border-blue-500 text-sm ".concat(e.n_id?"text-gray-600 border-gray-300 bg-white":"border-yellow-500 text-gray-700 bg-gray-50"),children:[Object(T.jsx)("td",{className:"px-2 py-2",children:t+1}),Object(T.jsx)("td",{className:"px-2 py-2",children:e.province_name}),Object(T.jsx)("td",{className:"px-2 py-2",children:e.district_name}),Object(T.jsx)("td",{className:"px-2 py-2",children:e.center_name}),Object(T.jsx)("td",{className:"px-2 py-2",children:e.room_name}),Object(T.jsx)("td",{className:"px-2 py-2",children:e.fname?e.fname+" "+e.lname:"-"})]},t+1)}))})]})]})]}),this.state.chooseLocation&&Object(T.jsx)(O.d,{title:Object(T.jsxs)("div",{className:"flex flex-row gap-4 items-center",children:[Object(T.jsx)(h.Y,{className:"text-5xl text-blue-600"}),Object(T.jsxs)("span",{className:"flex flex-col",children:["Filter by ",Object(C.a)(this.state.chooseLocation)]})]}),backDrop:!0,theme:O.c.default,close:function(){return e.setChooseLocation(null)},backDropClose:!0,widthSizeClass:O.b.small,displayClose:!0,padding:{title:!0},children:Object(T.jsx)(D,{setChooseLocation:this.setChooseLocation,locationList:Object(I.a)(this.props.locations),setSelectedLocation:"province"===this.state.chooseLocation?this.setSelectedProvince:"district"===this.state.chooseLocation?this.setSelectedDistrict:this.setSelectedCenter,loadindRequest:this.state.loading,selectedLocation:"province"===this.state.chooseLocation?this.state.selectedProvince:"district"===this.state.chooseLocation?this.state.selectedDistrict:this.state.selectedCenter,locationType:this.state.chooseLocation,isModal:!0})}),null!==this.state.generateReportModal&&this.state.reportContentExport&&!0===this.state.generateReportModal.status&&Object(T.jsx)(O.d,{title:Object(T.jsx)("div",{className:"flex flex-row gap-4 items-center",children:Object(T.jsxs)("div",{className:"flex flex-col",children:[Object(T.jsx)("span",{className:"font-bold text-2xl text-gray-500",children:"Generating Report contents"}),Object(T.jsxs)("span",{className:"text-sm text-blue-600 font-normal",children:["Generating ",this.state.generateReportModal.reportType," ","Report"]})]})}),backDrop:!0,theme:O.c.default,close:function(){return e.setGenerateReportModal(null)},backDropClose:!1,widthSizeClass:O.b.medium,displayClose:!0,padding:{title:!0},children:Object(T.jsxs)("div",{className:"px-6",children:[Object(T.jsxs)("div",{className:"my-2 text-base text-gray-700 sm:text-lg",children:[Object(T.jsxs)("div",{className:"flex flex-col",children:[Object(T.jsx)("label",{children:"Title"}),Object(T.jsx)("input",{type:"text",className:"text-left input-white w-20 inline-block ".concat(this.state.formError&&"report_title"===this.state.formError.element?"border-red-500":"border-gray-500"," border-2"),placeholder:"Sub Category Title",value:this.state.reportTitle,onChange:function(t){e.setFormError(null),e.setReportTitle(t.target.value)},disabled:!this.state.reportMainData}),this.state.formError&&"report_title"===this.state.formError.element&&Object(T.jsx)("span",{className:"text-red-500",children:this.state.formError.msg})]}),Object(T.jsxs)("div",{className:"flex flex-col mt-2",children:[Object(T.jsx)("label",{children:"Report content"}),Object(T.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 items-center gap-2 mt-2",children:this.state.reportContentExport.map((function(t,s){return Object(T.jsxs)("div",{className:"flex items-center gap-1 ".concat(e.isChangeAllowed(t.key)?"cursor-pointer":"cursor-not-allowed"),onClick:function(){return e.isChangeAllowed(t.key)&&e.updateReportContent(t.key)},title:e.isChangeAllowed(t.key)?"":"Required for every report!",children:[t.status?Object(T.jsx)(h.r,{className:"w-6 h-6 text-blue-700"}):Object(T.jsx)(h.s,{className:"w-6 h-6"}),Object(T.jsx)("span",{children:t.title})]},s)}))}),this.state.formError&&"report_content"===this.state.formError.element&&Object(T.jsx)("span",{className:"text-red-500",children:this.state.formError.msg})]})]}),Object(T.jsxs)("div",{className:"flex justify-between mb-2 mt-4",children:[Object(T.jsxs)("div",{className:"flex items-center gap-1 cursor-pointer",onClick:function(){return e.resetReportContent(e.state.selectAll)},children:[this.state.selectAll?Object(T.jsx)(h.r,{className:"w-6 h-6 text-blue-700"}):Object(T.jsx)(h.s,{className:"w-6 h-6"}),Object(T.jsx)("span",{children:"Select all"})]}),this.state.centerToPrint&&this.state.reportMainData&&Object(T.jsx)(E.a,{fileData:this.state.centerToPrint,fileName:this.state.reportTitle,btnName:"Generate"})]})]})})]})}}]),s}(m.Component),P=Object(x.b)((function(e){return{auth:e.auth,locations:e.locations.roomLocation}}),{getAllRoom:g.p,PushPopupAlert:j.tb})(A)}}]);
//# sourceMappingURL=26.2e08816c.chunk.js.map