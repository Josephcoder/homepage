(this["webpackJsonpreact-redux-typescript-advance"]=this["webpackJsonpreact-redux-typescript-advance"]||[]).push([[45],{200:function(t,e,n){"use strict";n.d(e,"b",(function(){return f})),n.d(e,"a",(function(){return b})),n.d(e,"d",(function(){return m})),n.d(e,"c",(function(){return x}));var s=n(20),r=n(19),o=n(22),c=n(21),i=n(4),a=n.n(i),l=n(17),d=n(3),u=n(10),h=n(1),p=function(t){Object(o.a)(n,t);var e=Object(c.a)(n);function n(t){var r;return Object(s.a)(this,n),(r=e.call(this,t)).componentDidMount=function(){return r.props.PageHasSubNav(!0)},r.componentWillUnmount=function(){return r.props.PageHasSubNav(!1)},r.state={loading:!1},r}return Object(r.a)(n,[{key:"render",value:function(){if(!1===this.props.auth.isAuthenticated)return null;var t=this.props.system.navigation;return Object(h.jsx)("div",{className:"fixed w-48 p-1 pr-2 pl-6 text-gray-700 bg-white ".concat(!0===t?"lg:left-16  left-16":" -left-72 lg:left-16","  top-0 bottom-0 pt-20 z-30 shadow-lg  transition-all duration-500 ease-in-out overflow-y-auto"),children:this.props.children})}}]),n}(a.a.Component),f=Object(l.b)((function(t){return{auth:t.auth,system:t.system}}),{NavToogle:d.rb,PageHasSubNav:d.sb})(p),b=function(t){var e=t.title,n=void 0===e?"":e,s=t.icon,r=void 0===s?u.m:s,o=t.active,c=void 0!==o&&o,i=t.count,a=void 0===i?0:i,l=r;return Object(h.jsxs)("section",{className:"".concat(!0===c?"bg-blue-500 text-white font-bold":"bg-blue-100 text-blue-800"," mb-1 hover:font-bold py-1 hover:bg-blue-400 hover:text-white --font-bold  px-2 rounded-md flex cursor-pointer items-center"),children:[Object(h.jsxs)("section",{className:"flex-1",children:[Object(h.jsx)(l,{className:"inline-block mr-1 text-xs"}),Object(h.jsx)("span",{children:n})]}),a>0?Object(h.jsx)("span",{className:"px-0.5 my-1 text-xs bg-blue-600 text-white rounded-full",children:a}):null]})},m=function(t){var e=t.children;return Object(h.jsx)("div",{className:"ml-3 overflow-y-auto border-l-2 border-blue-200 -mt-1 pt-2 mb-2 pl-1 cursor-pointer",children:e})},x=function(t){var e=t.title,n=void 0===e?"":e,s=t.icon,r=void 0===s?u.m:s,o=t.active,c=void 0!==o&&o,i=t.count,a=void 0===i?0:i,l=r;return Object(h.jsxs)("div",{className:"animate__animated animate__zoomIn animate__faster ".concat(!0===c?"bg-blue-500 text-white font-bold":" text-blue-800"," text-blue-800 bg-blue-200 rounded-md px-1 mb-1 flex items-center py-1 font-bold"),children:[Object(h.jsx)(l,{className:"inline-block mr-0.1 text-xs ".concat(!0===c?"text-white":"")}),Object(h.jsx)("span",{className:"inline-block pl-1 ".concat(!0===c?"text-white":""),children:n}),a>=1?Object(h.jsx)("span",{className:"text-sm fint-bold ".concat(!0===c?"text-white":""),children:a}):null]})}},211:function(t,e,n){"use strict";n.d(e,"p",(function(){return u})),n.d(e,"c",(function(){return h})),n.d(e,"m",(function(){return p})),n.d(e,"h",(function(){return f})),n.d(e,"b",(function(){return b})),n.d(e,"l",(function(){return m})),n.d(e,"g",(function(){return x})),n.d(e,"e",(function(){return j})),n.d(e,"o",(function(){return g})),n.d(e,"j",(function(){return v})),n.d(e,"a",(function(){return _})),n.d(e,"k",(function(){return O})),n.d(e,"f",(function(){return y})),n.d(e,"d",(function(){return S})),n.d(e,"n",(function(){return N})),n.d(e,"i",(function(){return E}));var s=n(5),r=n.n(s),o=n(7),c=n(8),i=n.n(c),a=n(6),l=n(9),d=n(12),u=function(t){return function(){var e=Object(o.a)(r.a.mark((function e(n){var s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(!0,""),e.prev=1,e.next=4,i.a.get("".concat(l.a.APPLICATION,"/roomlocation"));case 4:s=e.sent,n({type:a.a.GET_ALL_ROOM,payload:s.data}),console.log("===================================="),console.log({res:s.data}),console.log("===================================="),t(!1,"",s.data),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),console.error("Err: ",e.t0),t(!1,Object(d.a)(e.t0));case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}()},h=function(t){return function(){var e=Object(o.a)(r.a.mark((function e(n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n({type:a.a.CREATE_PROVINCE,payload:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},p=function(t){return console.log({data:t}),function(){var e=Object(o.a)(r.a.mark((function e(n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n({type:a.a.UPDATE_PROVINCE,payload:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},f=function(t){return function(){var e=Object(o.a)(r.a.mark((function e(n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n({type:a.a.DELETE_PROVINCE,payload:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},b=function(t){return function(){var e=Object(o.a)(r.a.mark((function e(n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n({type:a.a.CREATE_DISTRICT,payload:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},m=function(t){return console.log({data:t}),function(){var e=Object(o.a)(r.a.mark((function e(n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n({type:a.a.UPDATE_DISTRICT,payload:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},x=function(t){return console.log({data:t}),function(){var e=Object(o.a)(r.a.mark((function e(n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n({type:a.a.DELETE_DISTRICT,payload:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},j=function(t){return function(){var e=Object(o.a)(r.a.mark((function e(n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n({type:a.a.CREATE_SECTOR,payload:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},g=function(t){return function(){var e=Object(o.a)(r.a.mark((function e(n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n({type:a.a.UPDATE_SECTOR,payload:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},v=function(t){return console.log({data:t}),function(){var e=Object(o.a)(r.a.mark((function e(n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n({type:a.a.DELETE_SECTOR,payload:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},_=function(t){return console.log({data:t}),function(){var e=Object(o.a)(r.a.mark((function e(n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n({type:a.a.CREATE_CENTER,payload:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},O=function(t){return console.log({data:t}),function(){var e=Object(o.a)(r.a.mark((function e(n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n({type:a.a.UPDATE_CENTER,payload:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},y=function(t){return function(){var e=Object(o.a)(r.a.mark((function e(n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n({type:a.a.DELETE_CENTER,payload:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},S=function(t){return console.log({data:t}),function(){var e=Object(o.a)(r.a.mark((function e(n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n({type:a.a.CREATE_ROOM,payload:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},N=function(t){return function(){var e=Object(o.a)(r.a.mark((function e(n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n({type:a.a.UPDATE_ROOM,payload:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},E=function(t){return console.log({delete_room:t}),function(){var e=Object(o.a)(r.a.mark((function e(n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n({type:a.a.DELETE_ROOM,payload:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},270:function(t,e,n){"use strict";n.d(e,"h",(function(){return u})),n.d(e,"a",(function(){return h})),n.d(e,"i",(function(){return p})),n.d(e,"c",(function(){return f})),n.d(e,"e",(function(){return b})),n.d(e,"g",(function(){return m})),n.d(e,"b",(function(){return x})),n.d(e,"j",(function(){return j})),n.d(e,"d",(function(){return g})),n.d(e,"f",(function(){return v}));var s=n(5),r=n.n(s),o=n(7),c=n(6),i=(n(196),n(13),n(8)),a=n.n(i),l=n(9),d=n(12),u=function(t){return function(){var e=Object(o.a)(r.a.mark((function e(n){var s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(!0,""),e.prev=1,e.next=4,a.a.get("".concat(l.a.APPLICATION,"/schools"));case 4:s=e.sent,n({type:c.a.GET_SCHOOLS,payload:s.data}),t(!1,"",s.data),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.log("Err: ",e.t0),t(!1,Object(d.a)(e.t0));case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},h=function(t){return console.log({schools:t}),function(){var e=Object(o.a)(r.a.mark((function e(n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n({type:c.a.CREATE_SCHOOL,payload:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},p=function(t){return function(){var e=Object(o.a)(r.a.mark((function e(n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n({type:c.a.UPDATE_SCHOOL,payload:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},f=function(t){return function(){var e=Object(o.a)(r.a.mark((function e(n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n({type:c.a.DELETE_SCHOOL,payload:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},b=function(t,e){return function(){var n=Object(o.a)(r.a.mark((function n(s){var o;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e(!0,""),n.prev=1,n.next=4,a.a.get("".concat(l.a.PLACEMENT,"/requestpost/school/").concat(t));case 4:o=n.sent,console.log({schoolPosts:o.data}),s({type:c.a.FETCH_SCHOOL_POSTS,payload:o.data}),e(!1,""),n.next=14;break;case 10:n.prev=10,n.t0=n.catch(1),console.log("Err: ",n.t0),e(!1,Object(d.a)(n.t0));case 14:case"end":return n.stop()}}),n,null,[[1,10]])})));return function(t){return n.apply(this,arguments)}}()},m=function(t,e){return function(){var n=Object(o.a)(r.a.mark((function n(s){var o;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e(!0,""),n.prev=1,n.next=4,a.a.get("".concat(l.a.PLACEMENT,"/placedcandidate/school/").concat(t));case 4:o=n.sent,console.log({getSchoolPlacement:o.data}),s({type:c.a.GET_SCHOOL_PLACEMENT,payload:o.data}),e(!1,"",o.data),n.next=14;break;case 10:n.prev=10,n.t0=n.catch(1),console.log("Err: ",n.t0),e(!1,Object(d.a)(n.t0));case 14:case"end":return n.stop()}}),n,null,[[1,10]])})));return function(t){return n.apply(this,arguments)}}()},x=function(t){return function(){var e=Object(o.a)(r.a.mark((function e(n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n({type:c.a.CREATE_SCHOOL_POST,payload:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},j=function(t,e){return console.log({TYPE:t,data:e}),function(){var n=Object(o.a)(r.a.mark((function n(s){return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:s({type:c.a.UPDATE_SCHOOL_POST,payload:{TYPE:t,data:e}});case 1:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}()},g=function(t,e){return function(){var n=Object(o.a)(r.a.mark((function n(s){var o;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e(!0,""),n.prev=1,n.next=4,a.a.get("".concat(l.a.PLACEMENT,"/requestpost/district/").concat(t));case 4:o=n.sent,console.log({districtPosts:o}),s({type:c.a.FETCH_DISTRICT_POSTS,payload:o.data}),e(!1,""),n.next=14;break;case 10:n.prev=10,n.t0=n.catch(1),console.log("Err: ",n.t0),e(!1,Object(d.a)(n.t0));case 14:case"end":return n.stop()}}),n,null,[[1,10]])})));return function(t){return n.apply(this,arguments)}}()},v=function(t,e){return function(){var n=Object(o.a)(r.a.mark((function n(s){var o;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e(!0,""),n.prev=1,n.next=4,a.a.get("".concat(l.a.PLACEMENT,"/placedcandidate/district/").concat(t));case 4:o=n.sent,console.log("===================================="),console.log({getDistrictPlacement:o.data}),console.log("===================================="),s({type:c.a.GET_DISTRICT_PLACEMENT,payload:o.data}),e(!1,"",o.data),n.next=16;break;case 12:n.prev=12,n.t0=n.catch(1),console.log("Err: ",n.t0),e(!1,Object(d.a)(n.t0));case 16:case"end":return n.stop()}}),n,null,[[1,12]])})));return function(t){return n.apply(this,arguments)}}()}},510:function(t,e,n){"use strict";n.r(e),n.d(e,"LocationsSectorInArray",(function(){return I})),n.d(e,"getSchoolById",(function(){return T})),n.d(e,"Schools",(function(){return k}));var s=n(5),r=n.n(s),o=n(7),c=n(20),i=n(19),a=n(22),l=n(21),d=n(8),u=n.n(d),h=n(4),p=n.n(h),f=n(87),b=n(84),m=n(45),x=n(10),j=n(17),g=n(3),v=n(211),_=n(270),O=n(23),y=n(200),S=n(28),N=n(196),E=n(9),w=n(12),C=n(1),I=function(t){var e=[];for(var n in t){var s=t[n].districts;for(var r in s){var o=s[r].sectors;for(var c in o)e.push({province_id:t[n]._id,province_name:t[n].province_name,province_code:t[n].province_code,district_id:s[r]._id,district_name:s[r].district_name,district_code:s[r].district_code,sector_id:o[c].sector_id,sector_name:o[c].sector_name,sector_code:o[c].sector_code})}}return e},T=function(t,e){return t.find((function(t){return t._id===e}))},R=function(t){Object(a.a)(n,t);var e=Object(l.a)(n);function n(t){var s;return Object(c.a)(this,n),(s=e.call(this,t)).setLoading=function(t){s.setState({loading:t})},s.setLoadingSchool=function(t){s.setState({loadingSchool:t})},s.setLoadingRequest=function(t){s.setState({loadingRequest:t})},s.setError=function(t){s.setState({error:t})},s.componentDidMount=function(){!s.props.allRoom.length&&s.state.loading?s.props.getAllRoom((function(t,e){s.setLoading(t),!t&&e.length>0&&console.error(e)})):s.state.loading&&s.setLoading(!1),null!==s.props.education_categories&&0!==s.props.education_categories.length||s.props.loadEducationCategories(s.setLoading),!s.props.schools.length&&s.state.loadingSchool?s.props.getSchools((function(t,e,n){console.log(t,e),s.setLoadingSchool(t),t||(e.length>0&&console.error({loadingCandidatesError:e}),n&&s.setState({schoolList:n}))})):s.setLoadingSchool(!1)},s.handleSubmit=function(){var t=Object(o.a)(r.a.mark((function t(e){var n,o;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.preventDefault(),!Object(N.f)(s.state.schoolName)){t.next=3;break}return t.abrupt("return",s.setError({element:"school_name",msg:"School name is required"}));case 3:if(!(s.state.schoolCode<=0)){t.next=5;break}return t.abrupt("return",s.setError({element:"school_code",msg:"Invalid school code, School code less than 0"}));case 5:if(!Object(N.f)(s.state.instituteId)){t.next=7;break}return t.abrupt("return",s.setError({element:"edication_id",msg:"Education Institute is required"}));case 7:if(!Object(N.f)(s.state.districtId)){t.next=9;break}return t.abrupt("return",s.setError({element:"districtId_id",msg:"District is required"}));case 9:if(!Object(N.f)(s.state.sectorId)){t.next=11;break}return t.abrupt("return",s.setError({element:"sector_id",msg:"Sector is required"}));case 11:if(n=s.getSectors().find((function(t){return t.sector_id===s.state.sectorId}))){t.next=14;break}return t.abrupt("return",s.setError({element:"sector_id",msg:"Unknown selected sector"}));case 14:if(s.setLoadingRequest(!0),t.prev=15,"CREATE"!==s.state.modalState){t.next=23;break}return t.next=19,u.a.post("".concat(E.a.APPLICATION,"/schools"),{school_name:s.state.schoolName,school_code:s.state.schoolCode,district_id:s.state.districtId,sector_id:s.state.sectorId,sector_code:n.sector_code,education_category_id:s.state.instituteId});case 19:(o=t.sent).data&&(console.log({res:o}),s.props.createSchool({_id:o.data.data.shool_id,status:o.data.data.status,school_name:o.data.data.school_name,school_code:o.data.data.school_code,sector_code:o.data.data.sector_code,district_id:o.data.data.district_id,sector_id:o.data.data.sector_id,education_category_id:o.data.data.education_category_id}),s.props.PushPopupAlert({title:"New School created successfully",theme:S.a.success}),s.setLoadingRequest(!1),s.setState({schoolName:"",schoolCode:0,districtId:"",sectorId:"",instituteId:"",provinceId:"",thisSchool:null,modalState:""})),t.next=28;break;case 23:if(!s.state.thisSchool||"UPDATE"!==s.state.modalState){t.next=28;break}return t.next=26,u.a.patch("".concat(E.a.APPLICATION,"/schools"),{school_id:s.state.thisSchool._id,school_name:s.state.schoolName,school_code:s.state.schoolCode,district_id:s.state.districtId,sector_id:s.state.sectorId,sector_code:n.sector_code,education_category_id:s.state.instituteId});case 26:(o=t.sent).data&&(console.log({res:o}),s.props.updateSchool({_id:s.state.thisSchool._id,status:!0,sector_code:n.sector_code,school_name:s.state.schoolName,school_code:s.state.schoolCode,district_id:s.state.districtId,sector_id:s.state.sectorId,education_category_id:s.state.instituteId}),s.props.PushPopupAlert({title:"School updated successfully",theme:S.a.success}),s.setLoadingRequest(!1),s.setState({schoolName:"",schoolCode:0,districtId:"",sectorId:"",instituteId:"",provinceId:"",thisSchool:null,modalState:""}));case 28:t.next=35;break;case 30:t.prev=30,t.t0=t.catch(15),console.log({doc_category_error:t.t0}),s.props.PushPopupAlert({title:Object(w.a)(t.t0),theme:S.a.danger}),s.setLoadingRequest(!1);case 35:case"end":return t.stop()}}),t,null,[[15,30]])})));return function(e){return t.apply(this,arguments)}}(),s.handleDelete=function(){var t=Object(o.a)(r.a.mark((function t(e){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.confirm("Are you sure do you want to delete this room?")){t.next=14;break}return s.setLoadingRequest(!0),t.prev=2,t.next=5,u.a.delete("".concat(E.a.APPLICATION,"/schools/").concat(e));case 5:(n=t.sent).data&&(console.log({res:n}),s.props.deleteSchool(e),s.props.PushPopupAlert({title:"School deleted successfully",theme:S.a.success})),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(2),console.log({province_error:t.t0}),s.props.PushPopupAlert({title:Object(w.a)(t.t0),theme:S.a.danger});case 13:s.setLoadingRequest(!1);case 14:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e){return t.apply(this,arguments)}}(),s.filterSchools=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=[];"INSTITUTE"===t&&(r=s.state.thisDistrict&&!n?"ALL"===e?s.props.schools.filter((function(t){return t.district_id===s.state.thisDistrict._id})):s.props.schools.filter((function(t){return t.education_category_id===e&&t.district_id===s.state.thisDistrict._id})):"ALL"===e?s.props.schools:s.props.schools.filter((function(t){return t.education_category_id===e}))),"DISTRICT"===t&&(r=s.state.thisEdication?"ALL"===e?s.props.schools.filter((function(t){return t.education_category_id===s.state.thisEdication.education_institute_id})):s.props.schools.filter((function(t){return t.district_id===e&&t.education_category_id===s.state.thisEdication.education_institute_id})):"ALL"===e?s.props.schools:s.props.schools.filter((function(t){return t.district_id===e}))),s.setState({schoolList:r})},s.countSchool=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"DEFAULT",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ALL",n=0;return"DEFAULT"===t?n=s.state.schoolList.length:"EDUCATION"===t?n=s.state.schoolList.filter((function(t){return t.education_category_id===e})).length:"DISTRICT"===t&&(n=s.state.schoolList.filter((function(t){return t.district_id===e})).length),Object(N.h)(n)},s.getProvinceByCode=function(t){return s.props.allRoom.find((function(e){return e.province_code===t}))},s.getDistrictByCode=function(t,e){var n=s.props.allRoom.find((function(e){return e.province_code===t}));return n?n.districts.find((function(t){return t.district_code===e})):void 0},s.getSectorByCode=function(t,e,n){var r=s.props.allRoom.find((function(e){return e.province_code===t}));if(r&&r.districts){var o=r.districts.find((function(t){return t.district_code===e}));return o&&o.sectors?o.sectors.find((function(t){return t.sector_code===n})):void 0}},s.getSectors=function(){var t=s.props.allRoom.find((function(t){return t._id===s.state.provinceId}));if(t&&t.districts.length>0){var e=t.districts.find((function(t){return t._id===s.state.districtId}));if(e)return e.sectors}return null},s.state={loading:!0,loadingSchool:!0,loadingRequest:!1,districtFilterStatus:!1,edicationCategoryFilterStatus:!1,provinceFilterStatus:!1,thisEdication:null,thisProvince:null,thisDistrict:null,district:[],schoolList:s.props.schools,modalState:"",error:null,schoolName:"",schoolCode:0,thisSchool:null,instituteId:"",provinceId:"",districtId:"",sectorId:""},s}return Object(i.a)(n,[{key:"render",value:function(){var t=this;return this.state.loadingSchool||this.state.loading?Object(C.jsx)("div",{className:"text-center mt-7 font-bold text-4xl text-gray-400 animate-pulse",children:"Loading schools..."}):Object(C.jsxs)(p.a.Fragment,{children:[Object(C.jsx)(y.b,{children:this.state.loading?Object(C.jsxs)("section",{className:"animate-pulse",children:[Object(C.jsx)("div",{className:"bg-gray-400 font-bold mb-2 h-7 px-2 rounded-md cursor-wait"}),Object(C.jsx)("div",{className:"bg-gray-400 font-bold mb-2 h-7 px-2 rounded-md cursor-wait"}),Object(C.jsx)("div",{className:"bg-gray-400 font-bold mb-2 h-7 px-2 rounded-md cursor-wait"})]}):Object(C.jsxs)(p.a.Fragment,{children:[Object(C.jsx)("span",{className:"font-semibold text-lg text-gray-500",children:"Filter by Institute"}),Object(C.jsx)("section",{className:"mt-2 ".concat(this.state.loadingRequest&&"cursor-pointer"),onClick:function(){return!t.state.loadingRequest&&t.setState({edicationCategoryFilterStatus:!t.state.edicationCategoryFilterStatus})},children:Object(C.jsx)(y.a,{title:this.state.thisEdication?this.state.thisEdication.education_category_title:"Choose Education Institute",active:!(!this.state.edicationCategoryFilterStatus&&null===this.state.thisEdication)})}),this.state.edicationCategoryFilterStatus&&this.props.education_categories&&this.props.education_categories.length>0&&Object(C.jsx)(y.d,{children:this.props.education_categories&&this.props.education_categories.map((function(e,n){return Object(C.jsx)("section",{onClick:function(){return!t.state.loadingRequest&&(t.setState({thisEdication:e,edicationCategoryFilterStatus:!1}),t.filterSchools("INSTITUTE",e.education_institute_id))},children:Object(C.jsx)(y.c,{title:e.education_category_title,icon:x.V,active:!!t.state.thisEdication&&e.education_institute_id===t.state.thisEdication.education_institute_id})},e.education_institute_id+n)}))}),Object(C.jsxs)("section",{children:[Object(C.jsx)("span",{className:"font-semibold text-lg text-gray-500",children:"Filter by District"}),Object(C.jsx)("section",{className:"mt-2",onClick:function(){return!t.state.loadingRequest&&t.setState({provinceFilterStatus:!t.state.provinceFilterStatus,edicationCategoryFilterStatus:!1,districtFilterStatus:!1})},children:Object(C.jsx)(y.a,{title:this.state.thisProvince?this.state.thisProvince.province_name:"Choose Province",active:!(!this.state.provinceFilterStatus&&null===this.state.thisProvince)})})]}),this.state.provinceFilterStatus&&this.props.allRoom&&this.props.allRoom.length>0&&Object(C.jsx)(y.d,{children:this.props.allRoom&&this.props.allRoom.map((function(e,n){return Object(C.jsx)("section",{onClick:function(){return!t.state.loadingRequest&&(t.setState({provinceFilterStatus:!1,thisProvince:e,thisDistrict:null}),t.state.thisEdication&&t.filterSchools("INSTITUTE",t.state.thisEdication.education_institute_id,!0))},children:Object(C.jsx)(y.c,{title:e.province_name,icon:x.V,active:!!t.state.thisProvince&&e._id===t.state.thisProvince._id})},e._id+n)}))}),this.state.thisProvince&&Object(C.jsx)("section",{className:"mt-2",onClick:function(){return!t.state.loadingRequest&&t.setState({edicationCategoryFilterStatus:!1,provinceFilterStatus:!1,districtFilterStatus:!t.state.districtFilterStatus})},children:Object(C.jsx)(y.a,{title:this.state.thisDistrict?this.state.thisDistrict.district_name:"Choose District",active:!(!this.state.districtFilterStatus&&null===this.state.thisDistrict)})}),this.state.districtFilterStatus&&this.state.thisProvince&&this.state.thisProvince.districts.length>0&&Object(C.jsx)(y.d,{children:this.state.thisProvince&&this.state.thisProvince.districts.map((function(e,n){return Object(C.jsx)("section",{onClick:function(){return!t.state.loadingRequest&&(t.setState({thisDistrict:e,districtFilterStatus:!1}),t.filterSchools("DISTRICT",e._id))},children:Object(C.jsx)(y.c,{title:e.district_name,icon:x.V,active:!!t.state.thisDistrict&&e._id===t.state.thisDistrict._id})},e._id+n)}))})]})}),Object(C.jsxs)("div",{className:"w-full my-5 px-1",children:[Object(C.jsx)("div",{className:"flex items-start justify-between",children:Object(C.jsxs)("div",{className:"flex flex-row items-center",children:[Object(C.jsx)(b.b,{className:"text-blue-500 w-28 h-28"}),console.log({LocationsSectorInArray:I(this.props.allRoom)}),console.log({allRoom:this.props.allRoom}),Object(C.jsxs)("div",{className:"flex flex-col",children:[Object(C.jsx)("h1",{className:"text-3xl font-semibold",children:"Schools Management"}),Object(C.jsxs)("div",{className:"flex flex-row items-center mx-2 md:gap-3 gap-2",children:[Object(C.jsxs)("div",{className:"flex flex-col mt-1",children:[Object(C.jsx)("span",{className:"text-gray-600 text-base",children:"All School(s)"}),Object(C.jsx)("span",{className:"text-gray-600 text-2xl font-bold",children:this.countSchool()})]}),this.props.education_categories&&this.props.education_categories.length>0&&this.props.education_categories.map((function(e,n){return Object(C.jsxs)("div",{className:"flex flex-col mt-1",children:[Object(C.jsx)("span",{className:"text-gray-600 text-base",children:e.education_category_title}),Object(C.jsx)("span",{className:"text-gray-600 text-2xl font-bold",children:t.countSchool("EDUCATION",e.education_institute_id)})]},n+e.education_institute_id)}))]})]})]})}),Object(C.jsxs)("div",{className:"md:w-98 bg-white mx-auto md:p-2",children:[Object(C.jsxs)("div",{className:"flex items-start justify-between",children:[Object(C.jsxs)("div",{children:[this.state.thisEdication&&Object(C.jsxs)("div",{className:"flex",children:[Object(C.jsxs)("div",{className:"flex items-center gap-1 mx-1",children:[Object(C.jsx)(x.J,{className:"text-gray-600"}),Object(C.jsx)("span",{className:"font-semibold text-gray-500",children:"Institute:"}),Object(C.jsx)("span",{className:"font-semibold text-blue-700",children:this.state.thisEdication.education_category_title})]}),Object(C.jsx)(m.b,{className:"cursor-pointer rounded-full hover:bg-red-500 hover:text-white",onClick:function(){return!t.state.loading&&(t.setState({thisEdication:null}),t.filterSchools("INSTITUTE","ALL"))},title:"Clean Education Institute filter"})]}),this.state.thisProvince&&Object(C.jsxs)("div",{className:"flex",children:[Object(C.jsxs)("div",{className:"flex items-center gap-1 mx-1",children:[Object(C.jsx)(x.J,{className:"text-gray-600"}),Object(C.jsx)("span",{className:"font-semibold text-gray-500",children:"Location:"}),Object(C.jsx)("span",{className:"font-semibold ".concat(this.state.thisDistrict?"text-black cursor-pointer":"text-blue-700"),children:this.state.thisProvince.province_name}),this.state.thisDistrict&&Object(C.jsxs)("div",{className:"flex items-center",children:[Object(C.jsx)(f.d,{}),Object(C.jsx)("span",{className:"text-blue-700 font-semibold",children:this.state.thisDistrict.district_name})]})]}),Object(C.jsx)(m.b,{className:"cursor-pointer rounded-full hover:bg-red-500 hover:text-white",onClick:function(){return!t.state.loading&&(t.setState({thisDistrict:null,thisProvince:null}),t.filterSchools("DISTRICT","ALL"))},title:"Clean location filter"})]})]}),!1]}),Object(C.jsx)("div",{className:"rounded border border-gray-100 my-1 shadow-sm animate__animated animate__fadeIn",children:Object(C.jsxs)("table",{className:"w-full z-0",children:[Object(C.jsx)("thead",{className:"bg-gray-50",children:Object(C.jsxs)("tr",{className:"text-left",children:[Object(C.jsx)("th",{className:"px-3 py-3",children:"#"}),Object(C.jsx)("th",{children:"School code"}),Object(C.jsx)("th",{children:"School name"}),Object(C.jsx)("th",{children:"Institute"}),Object(C.jsx)("th",{children:"Province"}),Object(C.jsx)("th",{children:"District"}),Object(C.jsx)("th",{children:"Status"})]})}),Object(C.jsxs)("tbody",{className:"text-sm",children:[!this.state.schoolList.length&&Object(C.jsx)("tr",{className:"border-b border-gray-200 hover:bg-gray-100",children:Object(C.jsx)("td",{className:"p-3 text-center",colSpan:8,children:"No School Found"})},1),this.state.schoolList.length>0&&!this.state.loading&&this.state.schoolList.map((function(e,n){return Object(C.jsxs)("tr",{className:"border-b border-gray-200 hover:bg-gray-100",children:[Object(C.jsx)("td",{className:"p-3 text-left whitespace-nowrap",children:n+1}),Object(C.jsx)("td",{className:"p-3 text-left",children:e.school_code}),Object(C.jsx)("td",{className:"p-3 text-left",children:e.school_name}),Object(C.jsx)("td",{className:"py-3 px-3 text-left",children:t.props.education_categories&&t.props.education_categories.filter((function(t){return t.education_institute_id===e.education_category_id})).length>0?t.props.education_categories.filter((function(t){return t.education_institute_id===e.education_category_id}))[0].education_category_title:"No Institute"}),Object(C.jsx)("td",{className:"py-3 px-3 text-left",children:t.getProvinceByCode(e.province_code)?t.getProvinceByCode(e.province_code).province_name:"No province "}),Object(C.jsx)("td",{className:"py-3 px-3 text-left",children:t.getDistrictByCode(e.province_code,e.district_code)?t.getDistrictByCode(e.province_code,e.district_code).district_name:"No district"}),Object(C.jsx)("td",{className:"px-3",children:Object(C.jsxs)("div",{className:"flex items-center gap-2 float-right",children:[Object(C.jsxs)("button",{className:"bg-blue-600 text-white font-bold py-1 px-2 flex items-center rounded focus:outline-none ".concat(t.state.loadingRequest?"cursor-not-allowed":null),title:"Edit School",disabled:t.state.loadingRequest,onClick:function(){t.setState({modalState:"UPDATE",thisSchool:e,schoolName:e.school_name,schoolCode:e.school_code,instituteId:e.education_category_id,districtId:e.district_id,sectorId:e.sector_id,provinceId:t.props.allRoom.find((function(t){return t.districts.find((function(t){return t._id===e.district_id}))}))?t.props.allRoom.find((function(t){return t.districts.find((function(t){return t._id===e.district_id}))}))._id:""})},children:[Object(C.jsx)(x.fb,{className:"w-4 h-4"}),"Edit"]}),Object(C.jsxs)("button",{className:"bg-red-700 text-white font-bold py-1 px-2 flex items-center rounded focus:outline-none ".concat(t.state.loadingRequest?"cursor-not-allowed":null),title:"Delete",disabled:t.state.loadingRequest,onClick:function(){return t.handleDelete(e._id)},children:[Object(C.jsx)(x.fb,{className:"w-4 h-4"}),"Delete"]})]})})]},n+e._id)}))]})]})})]})]}),this.state.modalState&&Object(C.jsx)(O.d,{backDrop:!0,theme:O.c.default,close:function(){return t.setState({modalState:"",thisSchool:null,schoolName:"",instituteId:"",districtId:"",provinceId:""})},displayClose:!0,backDropClose:!1,title:Object(C.jsxs)("div",{className:"text-gray-600 font-bold text-3xl md:ml-4 inline-flex items-center gap-2",children:[Object(C.jsx)(b.b,{className:"w-11 h-11 text-gray-500 hover:bg-gray-500 hover:text-gray-50 rounded-full p-0 foucs:outline-none"}),"CREATE"===this.state.modalState?"CREATE ":"UPDATE "," ","SCHOOL"]}),widthSizeClass:O.b.medium,padding:{title:!0,body:!1,footer:!1},children:Object(C.jsx)("div",{className:"mx-8 mb-8",children:Object(C.jsxs)("form",{onSubmit:function(e){return t.handleSubmit(e)},children:[Object(C.jsxs)("div",{className:"py-4 text-base leading-6 space-y-4 text-gray-700 sm:text-lg sm:leading-7",children:[Object(C.jsxs)("div",{className:"flex flex-col",children:[Object(C.jsx)("label",{children:"School name"}),Object(C.jsx)("input",{type:"text",className:"text-left input-white w-20 inline-block border-2 ".concat(this.state.error&&"school_name"===this.state.error.element?"border-red-700":"border-gray-500"),placeholder:"School name",value:this.state.schoolName,onChange:function(e){t.setError(null),t.setState({schoolName:e.target.value})},disabled:this.state.loadingRequest}),this.state.error&&"school_name"===this.state.error.element&&Object(C.jsx)("span",{className:"text-red-700",children:this.state.error.msg})]}),Object(C.jsxs)("div",{className:"flex flex-col",children:[Object(C.jsx)("label",{children:"School code"}),Object(C.jsx)("input",{type:"number",className:"text-left input-white w-20 inline-block border-2 ".concat(this.state.error&&"school_code"===this.state.error.element?"border-red-700":"border-gray-500"),placeholder:"School code",value:this.state.schoolCode,onChange:function(e){t.setError(null),t.setState({schoolCode:Number(e.target.value)})},disabled:this.state.loadingRequest}),this.state.error&&"school_code"===this.state.error.element&&Object(C.jsx)("span",{className:"text-red-700",children:this.state.error.msg})]}),Object(C.jsxs)("div",{className:"flex flex-col",children:[Object(C.jsx)("label",{children:"Institutes"}),Object(C.jsxs)("select",{className:"text-left input-white w-full block border-2 py-3 px-4 pr-8 ".concat(this.state.error&&"edication_id"===this.state.error.element?"border-red-700":"border-gray-500"),value:this.state.instituteId,onChange:function(e){return t.setState({instituteId:e.target.value})},disabled:this.state.loadingRequest,children:[Object(C.jsx)("option",{value:"",disabled:!0,children:"Choose Institute"}),this.props.education_categories&&this.props.education_categories.map((function(t,e){return Object(C.jsx)("option",{value:t.education_institute_id,children:t.education_category_title},e+t.education_institute_id)}))]}),this.state.error&&"edication_id"===this.state.error.element&&Object(C.jsx)("span",{className:"text-red-700",children:this.state.error.msg})]}),Object(C.jsxs)("div",{className:"flex flex-col",children:[Object(C.jsx)("label",{children:"Province"}),Object(C.jsxs)("select",{className:"text-left input-white w-20 inline-block border-2 border-gray-500",value:this.state.provinceId,onChange:function(e){return t.setState({provinceId:e.target.value})},disabled:this.state.loadingRequest,children:[Object(C.jsx)("option",{value:"",disabled:!0,children:"Choose province"}),this.props.allRoom&&this.props.allRoom.map((function(t,e){return Object(C.jsx)("option",{value:t._id,children:t.province_name},e+t._id)}))]})]}),this.state.provinceId.length>0&&Object(C.jsxs)("div",{className:"flex flex-col",children:[Object(C.jsx)("label",{children:"Sector"}),Object(C.jsxs)("select",{className:"text-left input-white w-20 inline-block border-2 ".concat(this.state.error&&"districtId_id"===this.state.error.element?"border-red-700":"border-gray-500"),value:this.state.districtId,onChange:function(e){return t.setState({districtId:e.target.value})},disabled:this.state.loadingRequest,children:[Object(C.jsx)("option",{value:"",disabled:!0,children:"Choose district"}),this.props.allRoom&&this.props.allRoom.filter((function(e){return e._id===t.state.provinceId}))[0].districts.length>0?this.props.allRoom.filter((function(e){return e._id===t.state.provinceId}))[0].districts.map((function(t,e){return Object(C.jsx)("option",{value:t._id,children:t.district_name},e+t._id)})):Object(C.jsx)("option",{disabled:!0,children:"No District Found"},702)]}),this.state.error&&"districtId_id"===this.state.error.element&&Object(C.jsx)("span",{className:"text-red-700",children:this.state.error.msg})]}),this.state.provinceId.length>0&&Object(C.jsxs)("div",{className:"flex flex-col",children:[Object(C.jsx)("label",{children:"Sector"}),Object(C.jsxs)("select",{className:"text-left input-white w-20 inline-block border-2 ".concat(this.state.error&&"sector_id"===this.state.error.element?"border-red-700":"border-gray-500"),value:this.state.sectorId,onChange:function(e){return t.setState({sectorId:e.target.value})},disabled:this.state.loadingRequest,children:[Object(C.jsx)("option",{value:"",disabled:!0,children:"Choose sector"}),this.props.allRoom&&this.getSectors()?this.getSectors().map((function(t,e){return Object(C.jsx)("option",{value:t.sector_id,children:t.sector_name},e+t.sector_id)})):Object(C.jsx)("option",{disabled:!0,children:"No Sector Found"},702)]}),this.state.error&&"sector_id"===this.state.error.element&&Object(C.jsx)("span",{className:"text-red-700",children:this.state.error.msg})]})]}),Object(C.jsxs)("div",{className:"pt-4 flex justify-between",children:[Object(C.jsx)("button",{onClick:function(){return t.setState({modalState:"",thisSchool:null,schoolName:"",instituteId:"",districtId:"",provinceId:""})},className:"btn bg-gray-400 text-white hover:bg-gray-600 focus:outline-none",type:"button",disabled:this.state.loadingRequest,children:"Exit"}),Object(C.jsx)("button",{className:"btn bg-primary text-white hover:bg-blue-600 focus:outline-none ".concat(this.state.loadingRequest?"animate-pulse":null),type:"submit",disabled:this.state.loadingRequest,children:this.state.loadingRequest?"Loading...":"Save"})]})]})})})]})}}]),n}(h.Component),k=Object(j.b)((function(t){var e=t.auth,n=t.schools,s=t.schoolLevels,r=t.locations;return{auth:e,schools:n.schools,education_categories:s.education_categories,allRoom:r.roomLocation}}),{createSchool:_.a,getSchools:_.h,updateSchool:_.i,getAllRoom:v.p,deleteSchool:_.c,loadEducationCategories:g.Zb,PushPopupAlert:g.tb})(R)}}]);
//# sourceMappingURL=45.e28706d2.chunk.js.map