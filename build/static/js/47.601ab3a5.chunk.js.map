{"version":3,"sources":["actions/users.ts","containers/UserManagement/UserAccess.tsx"],"names":["documentValidationStatus","url","API","AUTH","userPageLimit","fetchUserAccess","page","callback","dispatch","a","setAxiosToken","axios","get","res","console","log","type","ActionTypes","FETCH_USERS_ACCESS","payload","users","data","next","previous","total_users","error","user_error","errorToText","blockUserToSystem","user_id","BLOCK_USER_TO_SYSTEM","id","unBlockUserToSystem","UNBLOCK_USER_TO_SYSTEM","assignRoleToUserAccess","ASSIGN_ROLE_TO_USER","customizeUserAccess","CUSTOMIZE_USER_ACCESS","resetUserAccess","RESET_USER_ACCESS","_UserAccess","props","setViewPermission","value","setState","viewPermission","setLoadindRequest","loadindRequest","setCreatePermission","createPermission","setUpdatePermission","updatePermission","setDeletePermission","deletePermission","setLoadind","loading","overrideUserAccess","default_access","custome_access","length","overideAccess","key","Object","prototype","hasOwnProperty","call","findCustom","find","custom","push","setUserAccess","componentDidMount","userInfo","access","tableData","userAccess","map","i","className","currentAccess","onClick","setCurrentAccess","permitted","create","view","update","delete","task","Math","random","handleCustomization","e","preventDefault","index","findIndex","state","custome_user_access_id","patch","USER","post","currentPage","PushPopupAlert","title","theme","PopupAlertTheme","info","customize_access","danger","undefined","this","to","columns","columnTitle","alignText","padding","rows","pagination","search","searchBG","thColor","onSubmit","onChange","checked","disabled","Component","UserAccess","React","memo","connect"],"mappings":"2YAsEYA,E,sEA1DNC,EAAG,UAAMC,IAAIC,KAAV,SACIC,EAAwB,I,SAyDzBJ,K,kBAAAA,E,oBAAAA,E,qBAAAA,M,KAwCL,IAAMK,EAAkB,SAC7BC,EACAC,GAOA,OADAA,GAAYA,GAAS,EAAM,GAAI,MAC/B,uCAAO,WAAOC,GAAP,eAAAC,EAAA,sEAEHC,cAFG,SAGeC,IAAMC,IAAN,UACbX,EADa,sBACIK,EADJ,kBACkBF,IAJjC,OAGGS,EAHH,OAMHC,QAAQC,IAAI,wCACZD,QAAQC,IAAI,CAAEV,gBAAiBQ,IAC/BC,QAAQC,IAAI,wCACZP,EAA2B,CACzBQ,KAAMC,IAAYC,mBAClBC,QAAS,CACPC,MAAO,CAAC,CAAEC,KAAMR,EAAIQ,KAAKD,MAAQd,KAAMA,IACvCgB,KAAMT,EAAIQ,KAAKC,KACfC,SAAUV,EAAIQ,KAAKE,SACnBC,YAAaX,EAAIQ,KAAKG,eAG1BjB,GAAYA,GAAS,EAAO,GAAIM,EAAIQ,KAAKD,OAlBtC,kDAoBHN,QAAQW,MAAM,CAAEC,WAAW,EAAD,KAC1BnB,GAAYA,GAAS,EAAOoB,YAAY,EAAD,IAAS,MArB7C,0DAAP,uDA0BWC,EAAoB,SAACC,EAAiBvB,GACjD,8CAAO,WAAOE,GAAP,SAAAC,EAAA,sDACLD,EAA4B,CAC1BQ,KAAMC,IAAYa,qBAClBX,QAAS,CAAEY,GAAIF,EAASvB,UAHrB,2CAAP,uDAQW0B,EAAsB,SAACH,EAAiBvB,GACnD,8CAAO,WAAOE,GAAP,SAAAC,EAAA,sDACLD,EAA4B,CAC1BQ,KAAMC,IAAYgB,uBAClBd,QAAS,CAAEY,GAAIF,EAASvB,UAHrB,2CAAP,uDAQW4B,EAAyB,SACpCb,EACAf,GAEA,8CAAO,WAAOE,GAAP,SAAAC,EAAA,sDACLD,EAAiC,CAC/BQ,KAAMC,IAAYkB,oBAClBhB,QAAS,CAAEE,OAAMf,UAHd,2CAAP,uDAQW8B,EAAsB,SACjCf,EACAf,GAEA,8CAAO,WAAOE,GAAP,SAAAC,EAAA,sDACLD,EAAoC,CAClCQ,KAAMC,IAAYoB,sBAClBlB,QAAS,CAAEE,OAAMf,UAHd,2CAAP,uDAQWgC,EAAkB,SAACjB,EAAcf,GAC5C,8CAAO,WAAOE,GAAP,SAAAC,EAAA,sDACLD,EAAgC,CAC9BQ,KAAMC,IAAYsB,kBAClBpB,QAAS,CAAEU,QAASR,EAAMf,UAHvB,2CAAP,wD,wRCxIIkC,E,kDACJ,WAAYC,GAAkB,IAAD,8BAC3B,cAAMA,IAcRC,kBAAoB,SAACC,GACnB,EAAKC,SAAS,CAAEC,eAAgBF,KAhBL,EAmB7BG,kBAAoB,SAACH,GACnB,EAAKC,SAAS,CAAEG,eAAgBJ,KApBL,EAuB7BK,oBAAsB,SAACL,GACrB,EAAKC,SAAS,CAAEK,iBAAkBN,KAxBP,EA2B7BO,oBAAsB,SAACP,GACrB,EAAKC,SAAS,CAAEO,iBAAkBR,KA5BP,EA+B7BS,oBAAsB,SAACT,GACrB,EAAKC,SAAS,CAAES,iBAAkBV,KAhCP,EAmC7BW,WAAa,SAACX,GACZ,EAAKC,SAAS,CAAEW,QAASZ,KApCE,EAuC7Ba,mBAAqB,SACnBC,EACAC,GAEA,GAAID,GAAkBC,GAAkBA,EAAeC,OAAS,EAAG,CACjE,IAAIC,EAAuC,GADsB,WAEtDC,GACT,GAAIC,OAAOC,UAAUC,eAAeC,KAAKR,EAAgBI,GAAM,CAC7D,IAAMK,EAAaR,EAAeS,MAChC,SAACC,GAAD,OAAYA,EAAOrC,KAAO0B,EAAeI,GAAK9B,MAE5CmC,EACFN,EAAcS,KAAKH,GAEnBN,EAAcS,KAAKZ,EAAeI,MARxC,IAAK,IAAMA,KAAOJ,EAAiB,EAAxBI,GAYX,EAAKpB,MAAM6B,cAAcV,KAzDA,EA6D7BW,kBAAoB,WACd,EAAK9B,MAAM+B,UAAY,EAAK/B,MAAM+B,SAASd,gBAC7C,EAAKjB,MAAM+B,SAASf,gBAClB,EAAKD,mBACH,EAAKf,MAAM+B,SAASf,eAAegB,OACnC,EAAKhC,MAAM+B,SAASd,eAAee,QAEvC,EAAKnB,YAAW,KAEhB,EAAKb,MAAM+B,UACT,EAAK/B,MAAM+B,SAASf,gBACpB,EAAKhB,MAAM6B,cAAc,EAAK7B,MAAM+B,SAASf,eAAegB,QAC9D,EAAKnB,YAAW,KAzES,EA6E7BoB,UAAY,WACV,OAAK,EAAKjC,MAAMkC,WAMT,EAAKlC,MAAMkC,WAAWC,KAAI,SAACH,EAA6BI,GAA9B,OAC/B,qBAEEC,UAAS,8EACP,EAAKrC,MAAMsC,eACX,EAAKtC,MAAMsC,cAAchD,KAAO0C,EAAO1C,IACvC,6CAEFiD,QAAS,kBACP,EAAKvC,MAAMsC,eAAiB,EAAKtC,MAAMsC,cAAchD,KAAO0C,EAAO1C,IAC9D,EAAKU,MAAMwC,iBAAiB,MAC7B,EAAKjC,qBAAoB,GACzB,EAAKN,mBAAkB,GACvB,EAAKQ,qBAAoB,GACzB,EAAKE,qBAAoB,KACxB,EAAKX,MAAMwC,iBAAiBR,GAC7B,EAAKzB,oBAAoByB,EAAOS,UAAUC,QAC1C,EAAKzC,kBAAkB+B,EAAOS,UAAUE,MACxC,EAAKlC,oBAAoBuB,EAAOS,UAAUG,QAC1C,EAAKjC,oBAAoBqB,EAAOS,UAAUI,UAlBlD,UAqBE,oBAAIR,UAAU,YAAd,SACE,uBAAOA,UAAU,2BAAjB,SAaE,sBAAMA,UAAU,8DAAhB,SACGL,EAAOc,WAId,6BACE,sBACET,UAAS,2CACPL,EAAOS,UAAUC,OAAS,iBAAmB,gBAFjD,UAKGV,EAAOS,UAAUC,OAAS,cAAC,IAAD,IAAqB,cAAC,IAAD,IAC/CV,EAAOS,UAAUC,OAAS,OAAS,UAGxC,6BACE,sBACEL,UAAS,2CACPL,EAAOS,UAAUE,KAAO,iBAAmB,gBAF/C,UAKGX,EAAOS,UAAUE,KAAO,cAAC,IAAD,IAAqB,cAAC,IAAD,IAC7CX,EAAOS,UAAUE,KAAO,OAAS,UAGtC,6BACE,sBACEN,UAAS,2CACPL,EAAOS,UAAUG,OAAS,iBAAmB,gBAFjD,UAKGZ,EAAOS,UAAUG,OAAS,cAAC,IAAD,IAAqB,cAAC,IAAD,IAC/CZ,EAAOS,UAAUG,OAAS,OAAS,UAGxC,6BACE,sBACEP,UAAS,2CACPL,EAAOS,UAAUI,OAAS,iBAAmB,gBAFjD,UAKGb,EAAOS,UAAUI,OAAS,cAAC,IAAD,IAAqB,cAAC,IAAD,IAC/Cb,EAAOS,UAAUI,OAAS,OAAS,YA5EnCT,EAAIJ,EAAO1C,GAAKyD,KAAKC,aAPrB,CACL,6BACE,0CADOD,KAAKC,YAhFS,EAyK7BC,oBAzK6B,uCAyKP,WAAOC,GAAP,mBAAAlF,EAAA,yDACpBkF,EAAEC,kBACE,EAAKnD,MAAM+B,SAFK,oBAGlB,EAAK1B,mBAAkB,GACnByC,EAA2C,KAC/CA,EAAO,EAAK9C,MAAM+B,SAASd,eACvBmC,GAAS,EANK,SASZN,GAAQ,EAAK9C,MAAMsC,eACrBc,EAAQN,EAAKd,OAAOqB,WAClB,SAACrB,GAAD,OAAYA,EAAO1C,KAAO,EAAKU,MAAMsC,cAAehD,QAEzC,GACXwD,EAAKd,OAAOoB,GAAOX,UAAUC,OAAS,EAAKY,MAAM9C,iBACjDsC,EAAKd,OAAOoB,GAAOX,UAAUE,KAAO,EAAKW,MAAMlD,eAC/C0C,EAAKd,OAAOoB,GAAOX,UAAUG,OAAS,EAAKU,MAAM5C,iBACjDoC,EAAKd,OAAOoB,GAAOX,UAAUI,OAAS,EAAKS,MAAM1C,kBAEjDkC,EAAKd,OAAOJ,KAAK,CACftC,GAAI,EAAKU,MAAMsC,cAAchD,GAC7BwD,KAAM,EAAK9C,MAAMsC,cAAcQ,KAC/B1B,IAAK,EAAKpB,MAAMsC,cAAclB,IAC9BqB,UAAW,CACTC,OAAQ,EAAKY,MAAM9C,iBACnBmC,KAAM,EAAKW,MAAMlD,eACjBwC,OAAQ,EAAKU,MAAM5C,iBACnBmC,OAAQ,EAAKS,MAAM1C,oBAIhB,EAAKZ,MAAMsC,gBACpBQ,EAAO,CACLd,OAAQ,CACN,CACE1C,GAAI,EAAKU,MAAMsC,cAAchD,GAC7BwD,KAAM,EAAK9C,MAAMsC,cAAcQ,KAC/B1B,IAAK,EAAKpB,MAAMsC,cAAclB,IAC9BqB,UAAW,CACTC,OAAQ,EAAKY,MAAM9C,iBACnBmC,KAAM,EAAKW,MAAMlD,eACjBwC,OAAQ,EAAKU,MAAM5C,iBACnBmC,OAAQ,EAAKS,MAAM1C,oBAIzBxB,QAAS,EAAKY,MAAM+B,SAAS3C,QAC7BmE,uBAAwB,MAIxBT,EAnDY,oBAqD6B,OAAvC,EAAK9C,MAAM+B,SAASd,eArDV,kCAsDA/C,IAAMsF,MAAN,UACP/F,IAAIgG,KADG,kBAEV,CACEzB,OAAQc,EAAKd,OACb5C,QAAS,EAAKY,MAAM+B,SAAS3C,UA1DrB,QAsDZhB,EAtDY,gDA8DAF,IAAMwF,KAAN,UACPjG,IAAIgG,KADG,kBAEV,CACEzB,OAAQc,EAAKd,OACb5C,QAAS,EAAKY,MAAM+B,SAAS3C,UAlErB,QA8DZhB,EA9DY,eAuEVA,IACF0E,EAAKS,uBAAyBnF,EAAIQ,KAAKA,KAAK2E,uBAE5C,EAAKvD,MAAML,oBAAoBmD,EAAM,EAAK9C,MAAM2D,aAChDb,GACE,EAAK9C,MAAM+B,SAASf,gBACpB,EAAKD,mBACH,EAAKf,MAAM+B,SAASf,eAAegB,OACnCc,EAAKd,QAET,EAAKhC,MAAM4D,eAAe,CACxBC,MAAM,8CACNC,MAAOC,IAAgBC,OAGzBlB,EAAO,KACP,EAAK9C,MAAMwC,iBAAiB,MAC5B,EAAKjC,qBAAoB,GACzB,EAAKN,mBAAkB,GACvB,EAAKQ,qBAAoB,GACzB,EAAKE,qBAAoB,IA3Fb,0DA+FhBtC,QAAQW,MAAM,CAAEiF,iBAAiB,EAAD,KAChC,EAAKjE,MAAM4D,eAAe,CACxBC,MAAO3E,YAAY,EAAD,IAClB4E,MAAOC,IAAgBG,SAlGT,QAqGlB,EAAK7D,mBAAkB,GArGL,0DAzKO,sDAG3B,EAAKiD,MAAQ,CACXxC,SAAS,EACTR,gBAAgB,EAGhBE,kBAAkB,EAClBJ,gBAAgB,EAChBM,kBAAkB,EAClBE,kBAAkB,GAXO,E,0CAkR7B,WAAU,IAAD,OACP,YAA4BuD,IAAxBC,KAAKpE,MAAM+B,SACN,cAAC,IAAD,CAAUsC,GAAG,WAGlBD,KAAKd,MAAMxC,SAAmC,OAAxBsD,KAAKpE,MAAM+B,SAEjC,qBAAKM,UAAU,kEAAf,oCAOF,8BACE,sBAAKA,UAAU,kDAAf,UACE,sBACEA,UAAS,kGACP+B,KAAKpE,MAAMsC,cAAgB,kBAAoB,IAFnD,UAKE,sBAAMD,UAAU,4CAAhB,uBAGE+B,KAAKd,MAAMxC,SACX,qBAAKuB,UAAU,yBAAf,SACE,cAAC,IAAD,CACEiC,QAAS,CACP,CACEC,YAAa,cACbC,UAAW,OACXC,QAAS,OAEX,CAAEF,YAAa,SAAUC,UAAW,QACpC,CAAED,YAAa,OAAQC,UAAW,QAClC,CAAED,YAAa,SAAUC,UAAW,QACpC,CAAED,YAAa,SAAUC,UAAW,SAEtCE,KAAMN,KAAKnC,UACX0C,YAAY,EACZC,QAAQ,EACRC,SAAS,aACTC,QAAQ,cAKhB,qBAAKzC,UAAS,2BAAd,SACI+B,KAAKpE,MAAMsC,cAQX,sBAAKD,UAAS,GAAd,UACE,oBAAIA,UAAU,oEAAd,mCAGA,qBAAKA,UAAU,2BAAf,SACE,qBAAIA,UAAU,8EAAd,UACE,cAAC,IAAD,CAAiBA,UAAU,YAC1B+B,KAAKpE,MAAMsC,cAAcQ,UAI9B,qBAAKT,UAAU,6BAAf,SACE,uBACEA,UAAU,6BACV0C,SAAU,SAAC7B,GAAD,OAAO,EAAKD,oBAAoBC,IAF5C,UAIE,sBAAKb,UAAU,iCAAf,UACE,cAAC,IAAD,CAAWA,UAAU,0BACrB,sBAAKA,UAAU,gBAAf,UACE,oBAAIA,UAAU,wBAAd,oBACA,sBAAMA,UAAU,gCAAhB,qEAIF,uBACE9D,KAAK,WACL8D,UAAU,sCACV2C,SAAU,kBACR,EAAKzE,qBAAqB,EAAK+C,MAAM9C,mBAEvCyE,QAASb,KAAKd,MAAM9C,iBACpB0E,SAAUd,KAAKd,MAAMhD,oBAGzB,sBAAK+B,UAAU,iCAAf,UACE,cAAC,KAAD,CAAgBA,UAAU,0BAC1B,sBAAKA,UAAU,gBAAf,UACE,oBAAIA,UAAU,wBAAd,kBACA,sBAAMA,UAAU,gCAAhB,mEAIF,uBACE9D,KAAK,WACL8D,UAAU,sCACV2C,SAAU,kBACR,EAAK/E,mBAAmB,EAAKqD,MAAMlD,iBAErC6E,QAASb,KAAKd,MAAMlD,eACpB8E,SAAUd,KAAKd,MAAMhD,oBAGzB,sBAAK+B,UAAU,iCAAf,UACE,cAAC,IAAD,CAAQA,UAAU,0BAClB,sBAAKA,UAAU,gBAAf,UACE,oBAAIA,UAAU,wBAAd,oBACA,sBAAMA,UAAU,wBAAhB,qEAIF,uBACE9D,KAAK,WACL8D,UAAU,sCACV2C,SAAU,kBACR,EAAKvE,qBAAqB,EAAK6C,MAAM5C,mBAEvCuE,QAASb,KAAKd,MAAM5C,iBACpBwE,SAAUd,KAAKd,MAAMhD,oBAGzB,sBAAK+B,UAAU,iCAAf,UACE,cAAC,IAAD,CAAUA,UAAU,0BACpB,sBAAKA,UAAU,gBAAf,UACE,oBAAIA,UAAU,wBAAd,oBACA,sBAAMA,UAAU,gCAAhB,qEAIF,uBACE9D,KAAK,WACL8D,UAAU,sCACV2C,SAAU,kBACR,EAAKrE,qBAAqB,EAAK2C,MAAM1C,mBAEvCqE,QAASb,KAAKd,MAAM1C,iBACpBsE,SAAUd,KAAKd,MAAMhD,oBAIzB,sBAAK+B,UAAU,qDAAf,UAEE,wBACEA,UAAU,kEACV6C,SAAUd,KAAKd,MAAMhD,eACrBiC,QAAS,WACP,EAAKvC,MAAMwC,iBAAiB,MAC5B,EAAKjC,qBAAoB,GACzB,EAAKN,mBAAkB,GACvB,EAAKQ,qBAAoB,GACzB,EAAKE,qBAAoB,IAR7B,oBAaA,wBACE0B,UAAU,eACV6C,SAAUd,KAAKd,MAAMhD,eAFvB,SAII8D,KAAKd,MAAMhD,eAET,eADA,2BApHd,sBAAK+B,UAAU,uEAAf,UACE,cAAC,KAAD,CAAYA,UAAU,cACtB,sBAAMA,UAAU,oBAAhB,sD,GAtUU8C,aAucbC,EAAaC,IAAMC,KAC9BC,YAAQ,KAAM,CACZ5F,wBACAiE,qBAFF2B,CAGGxF","file":"static/js/47.601ab3a5.chunk.js","sourcesContent":["import axios from \"axios\";\nimport { Dispatch } from \"redux\";\nimport { ActionTypes } from \"./types\";\nimport {\n  AssignRoleToUserActionInterface,\n  CustomeAccessInterface,\n  UserInterface,\n} from \"../shared/interfaces\";\nimport { API } from \"../utils/api\";\nimport { setAxiosToken } from \"../utils/AxiosToken\";\nimport { errorToText } from \"../utils/errors\";\n\nconst url = `${API.AUTH}/auth`;\nexport const userPageLimit: number = 30;\n\n/**\n * * ****************************** INTERFACES *****************************\n */\n\nexport interface FetchUsersAction {\n  type: ActionTypes.FETCH_USERS_ACCESS;\n  payload: UserAccessInterface;\n}\n\nexport interface BlockUserToSystem {\n  type: ActionTypes.BLOCK_USER_TO_SYSTEM | ActionTypes.UNBLOCK_USER_TO_SYSTEM;\n  payload: { id: string; page: number };\n}\n\nexport interface AssignRoleToUserAction {\n  type: ActionTypes.ASSIGN_ROLE_TO_USER;\n  payload: { data: AssignRoleToUserActionInterface; page: number };\n}\n\nexport interface CustomizeUserAccessAction {\n  type: ActionTypes.CUSTOMIZE_USER_ACCESS;\n  payload: { data: CustomeAccessInterface; page: number };\n}\n\nexport interface ResetUserAccessAction {\n  type: ActionTypes.RESET_USER_ACCESS;\n  payload: { user_id: string; page: number };\n}\n\nexport type fetchUserAccessInterface = {\n  users: UserInterface[] | null;\n  next: {\n    page: number;\n    limit: number;\n  } | null;\n  previous: {\n    page: number;\n    limit: number;\n  } | null;\n  total_users: number;\n};\n\nexport type UserAccessInterface = {\n  users: { data: UserInterface[]; page: number }[] | null;\n  next: {\n    page: number;\n    limit: number;\n  } | null;\n  previous: {\n    page: number;\n    limit: number;\n  } | null;\n  total_users: number;\n};\n\nexport enum documentValidationStatus {\n  waiting = \"waiting\",\n  approved = \"approved\",\n  rejected = \"rejected\",\n}\n\nexport interface VerifyDocumentInterface {\n  user_id: string;\n  doc_id: string;\n  validation_status: \"waiting\" | \"approved\" | \"rejected\";\n  validated_by: {\n    user_id: string;\n    comment: string;\n    validation_status: \"waiting\" | \"approved\" | \"rejected\";\n    date?: string;\n  };\n  in_education: boolean;\n  disability: boolean;\n  expiration_date: string;\n}\n\nexport type AccessUserActionType =\n  | FetchUsersAction\n  | BlockUserToSystem\n  | AssignRoleToUserAction\n  | CustomizeUserAccessAction\n  | ResetUserAccessAction;\n\n/**\n * * ****************************** ACTIONS *****************************\n */\n\nexport type FT_FetchUserAccess = (\n  page: number,\n  callBack?: (\n    status: boolean,\n    msg: string,\n    data: UserInterface[] | null\n  ) => void\n) => void;\nexport const fetchUserAccess = (\n  page: number,\n  callback?: (\n    status: boolean,\n    msg: string,\n    data: UserInterface[] | null\n  ) => void\n) => {\n  callback && callback(true, \"\", null);\n  return async (dispatch: Dispatch) => {\n    try {\n      setAxiosToken();\n      const res = await axios.get<fetchUserAccessInterface>(\n        `${url}/user?page=${page}&limit=${userPageLimit}`\n      );\n      console.log(\"====================================\");\n      console.log({ fetchUserAccess: res });\n      console.log(\"====================================\");\n      dispatch<FetchUsersAction>({\n        type: ActionTypes.FETCH_USERS_ACCESS,\n        payload: {\n          users: [{ data: res.data.users!, page: page }],\n          next: res.data.next,\n          previous: res.data.previous,\n          total_users: res.data.total_users,\n        },\n      });\n      callback && callback(false, \"\", res.data.users);\n    } catch (error) {\n      console.error({ user_error: error });\n      callback && callback(false, errorToText(error), null);\n    }\n  };\n};\n\nexport const blockUserToSystem = (user_id: string, page: number) => {\n  return async (dispatch: Dispatch) => {\n    dispatch<BlockUserToSystem>({\n      type: ActionTypes.BLOCK_USER_TO_SYSTEM,\n      payload: { id: user_id, page },\n    });\n  };\n};\n\nexport const unBlockUserToSystem = (user_id: string, page: number) => {\n  return async (dispatch: Dispatch) => {\n    dispatch<BlockUserToSystem>({\n      type: ActionTypes.UNBLOCK_USER_TO_SYSTEM,\n      payload: { id: user_id, page },\n    });\n  };\n};\n\nexport const assignRoleToUserAccess = (\n  data: AssignRoleToUserActionInterface,\n  page: number\n) => {\n  return async (dispatch: Dispatch) => {\n    dispatch<AssignRoleToUserAction>({\n      type: ActionTypes.ASSIGN_ROLE_TO_USER,\n      payload: { data, page },\n    });\n  };\n};\n\nexport const customizeUserAccess = (\n  data: CustomeAccessInterface,\n  page: number\n) => {\n  return async (dispatch: Dispatch) => {\n    dispatch<CustomizeUserAccessAction>({\n      type: ActionTypes.CUSTOMIZE_USER_ACCESS,\n      payload: { data, page },\n    });\n  };\n};\n\nexport const resetUserAccess = (data: string, page: number) => {\n  return async (dispatch: Dispatch) => {\n    dispatch<ResetUserAccessAction>({\n      type: ActionTypes.RESET_USER_ACCESS,\n      payload: { user_id: data, page },\n    });\n  };\n};\n","import axios from \"axios\";\nimport React, { Component } from \"react\";\nimport { BiRightArrowAlt } from \"react-icons/bi\";\nimport {\n  MdDelete,\n  MdEdit,\n  MdHighlightOff,\n  MdRemoveRedEye,\n  MdSettings,\n} from \"react-icons/md\";\nimport { SiAddthis } from \"react-icons/si\";\nimport { TiInputChecked } from \"react-icons/ti\";\nimport { connect } from \"react-redux\";\nimport { Redirect } from \"react-router-dom\";\nimport { PushPopupAlert } from \"../../actions\";\nimport { customizeUserAccess } from \"../../actions/users\";\nimport { PopupAlertData } from \"../../components/Alert/Popup\";\nimport Table from \"../../components/Table/Table\";\nimport { PopupAlertTheme } from \"../../interfaces/popupAlert\";\nimport {\n  UserInterface,\n  AccessTaskInterface,\n  CustomeAccessInterface,\n} from \"../../shared/interfaces\";\nimport { API } from \"../../utils/api\";\nimport { errorToText } from \"../../utils/errors\";\n\ninterface AppProps {\n  userInfo: UserInterface | undefined;\n  manageUserId: string;\n  setUserAccess: (value: AccessTaskInterface[] | null) => void;\n  userAccess: AccessTaskInterface[] | null;\n  setCurrentAccess: (value: AccessTaskInterface | null) => void;\n  currentAccess: AccessTaskInterface | null;\n  currentPage: number;\n\n  // REDUX ==============\n  PushPopupAlert: (alert: PopupAlertData) => void;\n  customizeUserAccess: Function;\n}\n\ninterface AppStates {\n  loading: boolean;\n  loadindRequest: boolean;\n  // currentAccess:AccessTaskInterface | null;\n  // userAccess:AccessTaskInterface[] | null;\n  createPermission: boolean;\n  viewPermission: boolean;\n  updatePermission: boolean;\n  deletePermission: boolean;\n}\n\nclass _UserAccess extends Component<AppProps, AppStates> {\n  constructor(props: AppProps) {\n    super(props);\n\n    this.state = {\n      loading: true,\n      loadindRequest: false,\n      // currentAccess:null,\n      // userAccess:null,\n      createPermission: false,\n      viewPermission: false,\n      updatePermission: false,\n      deletePermission: false,\n    };\n  }\n\n  setViewPermission = (value: boolean) => {\n    this.setState({ viewPermission: value });\n  };\n\n  setLoadindRequest = (value: boolean) => {\n    this.setState({ loadindRequest: value });\n  };\n\n  setCreatePermission = (value: boolean) => {\n    this.setState({ createPermission: value });\n  };\n\n  setUpdatePermission = (value: boolean) => {\n    this.setState({ updatePermission: value });\n  };\n\n  setDeletePermission = (value: boolean) => {\n    this.setState({ deletePermission: value });\n  };\n\n  setLoadind = (value: boolean) => {\n    this.setState({ loading: value });\n  };\n\n  overrideUserAccess = (\n    default_access: AccessTaskInterface[],\n    custome_access: AccessTaskInterface[]\n  ) => {\n    if (default_access && custome_access && custome_access.length > 0) {\n      let overideAccess: AccessTaskInterface[] = [];\n      for (const key in default_access) {\n        if (Object.prototype.hasOwnProperty.call(default_access, key)) {\n          const findCustom = custome_access.find(\n            (custom) => custom.id === default_access[key].id\n          );\n          if (findCustom) {\n            overideAccess.push(findCustom);\n          } else {\n            overideAccess.push(default_access[key]);\n          }\n        }\n      }\n      this.props.setUserAccess(overideAccess);\n    }\n  };\n\n  componentDidMount = () => {\n    if (this.props.userInfo && this.props.userInfo.custome_access) {\n      this.props.userInfo.default_access &&\n        this.overrideUserAccess(\n          this.props.userInfo.default_access.access,\n          this.props.userInfo.custome_access.access\n        );\n      this.setLoadind(false);\n    } else {\n      this.props.userInfo &&\n        this.props.userInfo.default_access &&\n        this.props.setUserAccess(this.props.userInfo.default_access.access);\n      this.setLoadind(false);\n    }\n  };\n\n  tableData = (): JSX.Element[] => {\n    if (!this.props.userAccess)\n      return [\n        <tr key={Math.random()}>\n          <td>No data</td>\n        </tr>,\n      ];\n    return this.props.userAccess.map((access: AccessTaskInterface, i) => (\n      <tr\n        key={i + access.id + Math.random()}\n        className={`text-left border-b border-gray-200 cursor-pointer hover:bg-gray-100 ${\n          this.props.currentAccess &&\n          this.props.currentAccess.id === access.id &&\n          \"bg-gray-200 border my-3 hover:bg-gray-100\"\n        }`}\n        onClick={() =>\n          this.props.currentAccess && this.props.currentAccess.id === access.id\n            ? (this.props.setCurrentAccess(null),\n              this.setCreatePermission(false),\n              this.setViewPermission(false),\n              this.setUpdatePermission(false),\n              this.setDeletePermission(false))\n            : (this.props.setCurrentAccess(access),\n              this.setCreatePermission(access.permitted.create),\n              this.setViewPermission(access.permitted.view),\n              this.setUpdatePermission(access.permitted.update),\n              this.setDeletePermission(access.permitted.delete))\n        }\n      >\n        <td className=\"px-2 py-1\">\n          <label className=\"inline-flex items-center\">\n            {/* <input\n              type=\"radio\"\n              name=\"taskAccess\"\n              value={access.id}\n              className=\"form-radio h-4 w-4 text-gray-600\"\n              onChange={() => {\n                currentAccess\n                  ? this.setState({ currentAccess: null })\n                  : this.setState({ currentAccess: access });\n              }}\n              checked={currentAccess ? true : false}\n            /> */}\n            <span className=\"text-gray-900 capitalize text-xl font-normal cursor-pointer\">\n              {access.task}\n            </span>\n          </label>\n        </td>\n        <td>\n          <div\n            className={`inline-flex items-center text-xl ${\n              access.permitted.create ? \"text-green-700\" : \"text-red-700\"\n            }`}\n          >\n            {access.permitted.create ? <TiInputChecked /> : <MdHighlightOff />}\n            {access.permitted.create ? \" Yes\" : \"No\"}\n          </div>\n        </td>\n        <td>\n          <div\n            className={`inline-flex items-center text-xl ${\n              access.permitted.view ? \"text-green-700\" : \"text-red-700\"\n            }`}\n          >\n            {access.permitted.view ? <TiInputChecked /> : <MdHighlightOff />}\n            {access.permitted.view ? \" Yes\" : \"No\"}\n          </div>\n        </td>\n        <td>\n          <div\n            className={`inline-flex items-center text-xl ${\n              access.permitted.update ? \"text-green-700\" : \"text-red-700\"\n            }`}\n          >\n            {access.permitted.update ? <TiInputChecked /> : <MdHighlightOff />}\n            {access.permitted.update ? \" Yes\" : \"No\"}\n          </div>\n        </td>\n        <td>\n          <div\n            className={`inline-flex items-center text-xl ${\n              access.permitted.delete ? \"text-green-700\" : \"text-red-700\"\n            }`}\n          >\n            {access.permitted.delete ? <TiInputChecked /> : <MdHighlightOff />}\n            {access.permitted.delete ? \" Yes\" : \"No\"}\n          </div>\n        </td>\n      </tr>\n    ));\n  };\n\n  handleCustomization = async (e: React.FormEvent<HTMLFormElement>) => {\n    e.preventDefault();\n    if (this.props.userInfo) {\n      this.setLoadindRequest(true);\n      let task: [] | CustomeAccessInterface | null = null;\n      task = this.props.userInfo.custome_access;\n      let index = -1;\n\n      try {\n        if (task && this.props.currentAccess) {\n          index = task.access.findIndex(\n            (access) => access.id === this.props.currentAccess!.id\n          );\n          if (index >= 0) {\n            task.access[index].permitted.create = this.state.createPermission;\n            task.access[index].permitted.view = this.state.viewPermission;\n            task.access[index].permitted.update = this.state.updatePermission;\n            task.access[index].permitted.delete = this.state.deletePermission;\n          } else {\n            task.access.push({\n              id: this.props.currentAccess.id,\n              task: this.props.currentAccess.task,\n              key: this.props.currentAccess.key,\n              permitted: {\n                create: this.state.createPermission,\n                view: this.state.viewPermission,\n                update: this.state.updatePermission,\n                delete: this.state.deletePermission,\n              },\n            });\n          }\n        } else if (this.props.currentAccess) {\n          task = {\n            access: [\n              {\n                id: this.props.currentAccess.id,\n                task: this.props.currentAccess.task,\n                key: this.props.currentAccess.key,\n                permitted: {\n                  create: this.state.createPermission,\n                  view: this.state.viewPermission,\n                  update: this.state.updatePermission,\n                  delete: this.state.deletePermission,\n                },\n              },\n            ],\n            user_id: this.props.userInfo.user_id,\n            custome_user_access_id: \"\",\n          };\n        }\n\n        if (task) {\n          let res;\n          if (this.props.userInfo.custome_access !== null) {\n            res = await axios.patch<{ data: CustomeAccessInterface }>(\n              `${API.USER}/access/custom`,\n              {\n                access: task.access,\n                user_id: this.props.userInfo.user_id,\n              }\n            );\n          } else {\n            res = await axios.post<{ data: CustomeAccessInterface }>(\n              `${API.USER}/access/custom`,\n              {\n                access: task.access,\n                user_id: this.props.userInfo.user_id,\n              }\n            );\n          }\n\n          if (res) {\n            task.custome_user_access_id = res.data.data.custome_user_access_id;\n\n            this.props.customizeUserAccess(task, this.props.currentPage);\n            task &&\n              this.props.userInfo.default_access &&\n              this.overrideUserAccess(\n                this.props.userInfo.default_access.access,\n                task.access\n              );\n            this.props.PushPopupAlert({\n              title: `Resetting User Access complete successfully`,\n              theme: PopupAlertTheme.info,\n            });\n\n            task = null;\n            this.props.setCurrentAccess(null);\n            this.setCreatePermission(false);\n            this.setViewPermission(false);\n            this.setUpdatePermission(false);\n            this.setDeletePermission(false);\n          }\n        }\n      } catch (error) {\n        console.error({ customize_access: error });\n        this.props.PushPopupAlert({\n          title: errorToText(error),\n          theme: PopupAlertTheme.danger,\n        });\n      }\n      this.setLoadindRequest(false);\n    }\n  };\n\n  render() {\n    if (this.props.userInfo === undefined) {\n      return <Redirect to=\"/users\" />;\n    }\n\n    if (this.state.loading || this.props.userInfo === null) {\n      return (\n        <div className=\"text-center py-7 font-bold text-4xl text-gray-400 animate-pulse\">\n          Loading User Access...\n        </div>\n      );\n    }\n\n    return (\n      <div>\n        <div className=\"grid grid-cols-1 md:grid-cols-5 gap-4 mx-1 my-2\">\n          <div\n            className={`col-span-1 md:col-span-3 bg-white w-full overflow-x-auto border rounded text-center p-2 ${\n              this.props.currentAccess ? \"hidden md:block\" : \"\"\n            }`}\n          >\n            <span className=\"text-gray-600 mt-2 font-semibold text-2xl\">\n              Settings\n            </span>\n            {!this.state.loading && (\n              <div className=\"overflow-x-auto w-full\">\n                <Table\n                  columns={[\n                    {\n                      columnTitle: \"Access Name\",\n                      alignText: \"left\",\n                      padding: \"p-3\",\n                    },\n                    { columnTitle: \"Create\", alignText: \"left\" },\n                    { columnTitle: \"View\", alignText: \"left\" },\n                    { columnTitle: \"Update\", alignText: \"left\" },\n                    { columnTitle: \"Delete\", alignText: \"left\" },\n                  ]}\n                  rows={this.tableData}\n                  pagination={false}\n                  search={true}\n                  searchBG=\"bg-gray-50\"\n                  thColor=\"gray\"\n                />\n              </div>\n            )}\n          </div>\n          <div className={`col-span-1 md:col-span-2`}>\n            {!this.props.currentAccess ? (\n              <div className=\"w-full hidden md:flex flex-col items-center text-gray-600 gap-1 py-3\">\n                <MdSettings className=\"w-20 h-20\" />\n                <span className=\"text-8 md:text-12\">\n                  Choose Access to Customize\n                </span>\n              </div>\n            ) : (\n              <div className={``}>\n                <h1 className=\"text-2xl md:text-3xl font-semibold text-center my-2 text-gray-900\">\n                  Customize User Access\n                </h1>\n                <div className=\"flex justify-center mb-3\">\n                  <h2 className=\"text-2xl font-semibold text-center text-gray-600 flex flex-row items-center\">\n                    <BiRightArrowAlt className=\"w-7 h-7\" />\n                    {this.props.currentAccess.task}\n                  </h2>\n                </div>\n\n                <div className=\"flex flex-col px-2 md:px-1\">\n                  <form\n                    className=\"flex flex-col items-center\"\n                    onSubmit={(e) => this.handleCustomization(e)}\n                  >\n                    <div className=\"inline-flex gap-2 items-center\">\n                      <SiAddthis className=\"w-7 h-7 text-gray-600\" />\n                      <div className=\"flex flex-col\">\n                        <h3 className=\"font-semibold text-xl\">Create</h3>\n                        <span className=\"text-gray-600 text-sm md:pr-1\">\n                          This permission gives the user the ability to create\n                        </span>\n                      </div>\n                      <input\n                        type=\"checkbox\"\n                        className=\"form-checkbox h-7 w-7 text-teal-600\"\n                        onChange={() =>\n                          this.setCreatePermission(!this.state.createPermission)\n                        }\n                        checked={this.state.createPermission}\n                        disabled={this.state.loadindRequest}\n                      />\n                    </div>\n                    <div className=\"inline-flex gap-2 items-center\">\n                      <MdRemoveRedEye className=\"w-7 h-7 text-gray-600\" />\n                      <div className=\"flex flex-col\">\n                        <h3 className=\"font-semibold text-xl\">View</h3>\n                        <span className=\"text-gray-600 text-sm md:pr-4\">\n                          This permission gives the user the ability to view\n                        </span>\n                      </div>\n                      <input\n                        type=\"checkbox\"\n                        className=\"form-checkbox h-7 w-7 text-teal-600\"\n                        onChange={() =>\n                          this.setViewPermission(!this.state.viewPermission)\n                        }\n                        checked={this.state.viewPermission}\n                        disabled={this.state.loadindRequest}\n                      />\n                    </div>\n                    <div className=\"inline-flex gap-2 items-center\">\n                      <MdEdit className=\"w-7 h-7 text-gray-600\" />\n                      <div className=\"flex flex-col\">\n                        <h3 className=\"font-semibold text-xl\">Update</h3>\n                        <span className=\"text-gray-600 text-sm\">\n                          This permission gives the user the ability to update\n                        </span>\n                      </div>\n                      <input\n                        type=\"checkbox\"\n                        className=\"form-checkbox h-7 w-7 text-teal-600\"\n                        onChange={() =>\n                          this.setUpdatePermission(!this.state.updatePermission)\n                        }\n                        checked={this.state.updatePermission}\n                        disabled={this.state.loadindRequest}\n                      />\n                    </div>\n                    <div className=\"inline-flex gap-2 items-center\">\n                      <MdDelete className=\"w-7 h-7 text-gray-600\" />\n                      <div className=\"flex flex-col\">\n                        <h3 className=\"font-semibold text-xl\">Delete</h3>\n                        <span className=\"text-gray-600 text-sm md:pr-1\">\n                          This permission gives the user the ability to delete\n                        </span>\n                      </div>\n                      <input\n                        type=\"checkbox\"\n                        className=\"form-checkbox h-7 w-7 text-teal-600\"\n                        onChange={() =>\n                          this.setDeletePermission(!this.state.deletePermission)\n                        }\n                        checked={this.state.deletePermission}\n                        disabled={this.state.loadindRequest}\n                      />\n                    </div>\n\n                    <div className=\"flex items-center justify-center w-full py-3 gap-2\">\n                      {/* <button className=\"btn btn-secondary bg-red-600\">Back</button> */}\n                      <button\n                        className=\"btn bg-gray-500 hover:bg-gray-700 focus:outline-none text-white\"\n                        disabled={this.state.loadindRequest}\n                        onClick={() => {\n                          this.props.setCurrentAccess(null);\n                          this.setCreatePermission(false);\n                          this.setViewPermission(false);\n                          this.setUpdatePermission(false);\n                          this.setDeletePermission(false);\n                        }}\n                      >\n                        Cancel\n                      </button>\n                      <button\n                        className=\"btn btn-blue\"\n                        disabled={this.state.loadindRequest}\n                      >\n                        {!this.state.loadindRequest\n                          ? \"Save Change\"\n                          : \"Processing..\"}\n                      </button>\n                    </div>\n                  </form>\n                </div>\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport const UserAccess = React.memo(\n  connect(null, {\n    customizeUserAccess,\n    PushPopupAlert,\n  })(_UserAccess)\n);\n"],"sourceRoot":""}