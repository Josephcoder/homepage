/*! For license information please see 43.d2363193.chunk.js.LICENSE.txt */
(this["webpackJsonpreact-redux-typescript-advance"]=this["webpackJsonpreact-redux-typescript-advance"]||[]).push([[43],{1311:function(e,t,s){"use strict";s.r(t),s.d(t,"ProctoringCenter",(function(){return oe}));var o,r=s(2),i=s(18),n=s(25),a=s(24),c=s(27),d=s(26),l=s(126),m=s.n(l),p=s(4),b=s.n(p),u=s(66),x=s(12),j=s(23),h=s(3),_=s(28),g=s(48),O=s(11),v=s(17),f=s(1),N=function(e){var t=e.close,s=e.active_candidate,o=e.room,r=e.exam_start,i=e.leaveRoomHandler,n=e.deleteRoomHandler,a=e.exam_rules,c=e.addMinutesToRoom,d=e.exam_done;return Object(f.jsxs)(p.Fragment,{children:[Object(f.jsx)("div",{className:"fixed bg-black bg-opacity-10  top-0 bottom-0 right-0 left-0 animate__animated animate__fadeIn",onClick:function(){return t(!1)}}),Object(f.jsxs)("div",{className:"fixed w-80 z-50 shadow-lg bg-white rounded top-16 mt-2 right-2 animate__animated animate__zoomIn animate__faster",children:[Object(f.jsxs)("div",{className:"flex items-center border-b",children:[Object(f.jsx)("div",{className:"flex-1 pl-2 text-xl font-bold text-gray-400",children:Object(f.jsx)("h4",{children:"Room details"})}),Object(f.jsx)("div",{className:"",children:Object(f.jsx)("button",{onClick:function(){return t(!1)},className:"p-2 hover:bg-red-700 hover:text-white rounded text-2xl",children:Object(f.jsx)(x.y,{})})})]}),Object(f.jsxs)("div",{className:"p-2 ",children:[Object(f.jsx)("div",{className:"border-separate p-2",children:[{title:"Province",value:o.province_name},{title:"District",value:o.district_name},{title:"Center name",value:o.center_name},{title:"Group",value:o.room_number},{title:"Joined candidates",value:s}].map((function(e,t){var s=e.title,o=e.value;return Object(f.jsxs)("div",{className:"flex",children:[Object(f.jsxs)("span",{className:"text-gray-500",children:[s,": "]}),Object(f.jsxs)("b",{className:"text-right inline-block",children:[" ",o]})]},t)}))}),Object(f.jsxs)("div",{className:"border-separate px-2 pt-2 mt-2 bg-gray-50 border rounded",children:[Object(f.jsx)("h2",{className:"text-xl font-bold border-b",children:"Exam rules"}),[{title:"Leave the browser",value:a.allow_to_leave_browser},{title:"Copy contents",value:a.copy_enabled},{title:"Paste contents",value:a.paste_enabled},{title:"Right click",value:a.right_click_enabled},{title:"Refresh browser",value:a.stop_candidate_when_comeback}].map((function(e,t){var s=e.title,o=e.value;return Object(f.jsxs)("div",{className:"flex items-center border-b p-1",children:[Object(f.jsx)("div",{className:"flex-1 text-sm",children:Object(f.jsxs)("span",{className:"",children:[s,": "]})}),Object(f.jsxs)("div",{className:"text-right inline-block",children:[" ",!0===o?Object(f.jsx)("span",{className:"p-0.5 px-1 text-xs rounded bg-green-100 text-green-700",children:"Enabled"}):Object(f.jsx)("span",{className:"p-0.5 px-1 text-xs rounded bg-red-200 text-red-700",children:"Disabled"})]})]},t)}))]}),Object(f.jsxs)("div",{className:"p-2 flex",children:[Object(f.jsxs)("button",{onClick:function(){return i()},className:"btn bg-red-700 hover:bg-red-800 text-white w-full mr-2",title:"Leave room",children:[Object(f.jsx)(x.ab,{className:"inline-block"})," Leave"]}),!1===r&&s<=1&&Object(f.jsxs)("button",{onClick:function(){return n()},className:"btn bg-gray-500 hover:bg-red-500 text-white w-full",title:"Close session",children:[Object(f.jsx)(x.D,{className:"inline-block"})," Close session"]}),(!0===r||!0===d)&&Object(f.jsxs)("button",{onClick:function(){return c()},className:"btn bg-yellow-700 hover:bg-yellow-600 text-white w-full",title:"Add minutes to the room",children:[Object(f.jsx)(x.gb,{className:"inline-block"})," Add minutes"]})]})]})]})," "]})},y=s(805),C=function(e){var t=e.course_title,s=e.post_title,o=e.duration,r=e.started_at,i=e.exam_start,n=e.startExamHandler,a=e.stopExamHandler,c=e.focus_mode,d=e.focusToggle,l=e.leaveRoom,b=e.room,u=e.active_candidate,j=e.deleteRoom,h=e.ExamDone,_=e.exam_rules,g=e.exam_done,O=e.addMinutesToRoom,C=Object(p.useState)(!1),S=Object(v.a)(C,2),w=S[0],k=S[1];return Object(f.jsxs)(p.Fragment,{children:[Object(f.jsxs)("div",{className:"".concat(!0===c?"border-blue-500 border-opacity-30 text-white proctoring-evaluator-navigation":"bg-white rounded-t-sm  rounded-md"," py-2 px-3 border-b z-50 grid grid-flow-row md:grid-cols-1 lg:grid-cols-2 transition-all ease-in-out"),children:[Object(f.jsxs)("div",{className:"flex",children:[Object(f.jsx)("button",{onClick:function(){return d()},className:"px-2 ".concat(!0===c?"bg-blue-900 hover:bg-blue-500 ":"bg-blue-100 hover:bg-blue-500 "," mr-2  rounded-md  hover:text-white"),children:!0===c?Object(f.jsxs)(p.Fragment,{children:[Object(f.jsx)(x.N,{className:"text-3xl mx-auto -mb-2"}),Object(f.jsx)("span",{className:"text-xs inline-block pt-1",children:"Un-Focus"})]}):Object(f.jsxs)(p.Fragment,{children:[Object(f.jsx)(x.M,{className:"text-3xl mx-auto -mb-2"}),Object(f.jsx)("span",{className:"text-xs inline-block pt-1",children:"Focus"})]})}),Object(f.jsx)("div",{className:"flex items-center",children:Object(f.jsxs)("div",{className:"",children:[Object(f.jsx)("label",{htmlFor:"",className:"".concat(!0===c?"text-gray-200":""," text-sm m-0"),children:s}),Object(f.jsx)("h3",{className:"text-white- text-lg -mt-2 font-bold",children:t})]})})]}),Object(f.jsx)("div",{className:"text-red lg:pt-0 sm:pt-3 text-right md:text-left lg:text-right",children:Object(f.jsxs)("div",{className:"grid grid-cols-5 gap-4 text-left",children:[Object(f.jsx)("div",{children:!0===i&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("label",{className:"text-gray-400 text-sm",children:"Duration"}),Object(f.jsxs)("h2",{className:"text-xl font-bold",children:[o,"M"]})]})}),Object(f.jsx)("div",{children:!0===i&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("label",{className:"text-gray-400 text-sm",children:"Started at:"}),!0===i&&Object(f.jsx)("h2",{className:"text-xl font-bold",children:m()(r).format("LT")})]})}),Object(f.jsx)("div",{className:"text-3xl -mt-3 ",children:!0===i&&null!==r&&""!==r&&Object(f.jsx)(f.Fragment,{children:Object(f.jsx)(y.a,{room_id:b.room_id,timeout:function(){return h(!0)},returnString:!1,labels:!0})})}),Object(f.jsx)("div",{className:"flex items-center pl-2",children:Object(f.jsx)("button",{onClick:function(){return k(!0)},className:"btn bg-gray-100 text-gray-900 w-full hover:bg-gray-500 hover:text-white",title:"Room details",children:"Room"})}),Object(f.jsx)("div",{className:"flex items-center",children:!1===i?Object(f.jsx)("button",{onClick:function(){return n()},className:"btn bg-green-500 text-white w-full",title:"Start Exam",children:"Start"}):Object(f.jsx)("button",{onClick:function(){return a()},className:"btn bg-red-600 text-white w-full",title:"stop Exam",children:"Stop"})})]})})]}),w&&Object(f.jsx)(N,{close:k,active_candidate:u,room:b,exam_start:i,leaveRoomHandler:l,deleteRoomHandler:j,exam_rules:_,addMinutesToRoom:function(){O(),k(!1)},exam_done:g})]})},S=function(e){var t=e.focus_mode,s=e.candidates,o=s.length,r=s.filter((function(e){return!0===e.active})).length,i=s.filter((function(e){return!0===e.done})).length,n=s.filter((function(e){return!1===e.done&&!0===e.active&&!1===e.stopped&&!1===e.removed})).length,a=s.filter((function(e){return!0===e.removed})).length,c=s.filter((function(e){return!0===e.stopped&&!1===e.done})).length,d=s.filter((function(e){return!1===e.active&&!1===e.done&&!0===e.joined})).length,l=s.filter((function(e){return!1===e.joined})).length;return Object(f.jsx)("div",{className:"grid grid-cols-4 gap-2 p-3 border-separate ".concat(!0===t?"bg-blue-900 text-gray-300":"bg-white  shadow-lg border "," rounded-md my-2 text-center w-90"),children:[{title:"Total",label:"Total candidates",value:o},{title:"Active",label:"Active candidate(s)",value:r},{title:"Done",label:"Candidate(s) who done exam",value:i},{title:"Left",label:"Candidate(s) who left unfinished",value:d},{title:"Removed",label:"Removed candidate(s)",value:a},{title:"Stopped",label:"Stopped candidate(s)",value:c},{title:"Remain",label:"Remain candidate(s)",value:n},{title:"Non Joined",label:"Non joined exam(s)",value:l}].map((function(e,t){var s=e.title,o=e.label,r=e.value;return Object(f.jsxs)("div",{title:o,className:"border rounded-md py-1",children:[Object(f.jsx)("h1",{className:"text-2xl font-bold -mb-1 p-0 ",children:r}),Object(f.jsx)("label",{htmlFor:"",className:"text-sm -mt-2",children:s})]},t)}))})},w=function(e){var t=e.events,s=(e.clickOpen,e.clickHandler,e.candidates),o=e.focus_mode,r=e.loading,i=Object(p.useState)(""),n=Object(v.a)(i,2),a=n[0],c=n[1];return Object(f.jsxs)("div",{className:"mt-2 p-2 ".concat(!0===o?"bg-gray-900 text-white":"bg-gray-50 shadow-sm border"," rounded-md "),children:[Object(f.jsx)("h1",{className:"text-xl",children:"Events"}),!0===r?Object(f.jsx)("div",{className:"p-2",children:Object(f.jsx)("h4",{className:"block animate__animated animate__fadeIn animate__infinite p-3 text-center",children:"Loading events..."})}):0===t.length?Object(f.jsxs)("div",{className:"p-3 py-8 text-center",children:[Object(f.jsx)("h2",{className:"font-bold text-2xl",children:"No events found"}),Object(f.jsx)("h2",{className:"",children:"No event has been committed yet"})]}):t.map((function(e,t){var o=s.find((function(t){return t.user_id===e.user_id}));return Object(f.jsx)(p.Fragment,{children:a===e.event_id?Object(f.jsx)("div",{className:"animate__animated animate__zoomIn animate__faster",children:Object(f.jsxs)("div",{className:"overflow-hidden my-1 rounded border bg-blue-900 bg-opacity-30 border-blue-500",children:[Object(f.jsxs)("div",{className:"px-3  flex items-center bg-blue-900 bg-opacity-30",children:[Object(f.jsxs)("h2",{className:"flex-1 m-0 text-xl py-2 opacity-70",children:["Event ",Object(f.jsx)("b",{children:t+1})," details"]}),Object(f.jsx)("button",{onClick:function(){return c("")},className:"hover:bg-red-600 text-2xl p-1.5 rounded-md",children:Object(f.jsx)(x.y,{})})]}),Object(f.jsxs)("div",{className:"p-2",children:[Object(f.jsxs)("p",{children:[Object(f.jsx)("span",{className:"opacity-70",children:"Event type: "}),Object(f.jsx)("b",{children:e.event_type_id})]}),Object(f.jsxs)("p",{children:[Object(f.jsx)("span",{className:"opacity-70",children:"Time: "}),Object(f.jsx)("b",{children:e.createdAt})]}),Object(f.jsxs)("p",{className:"p-1 m-1 bg-blue-200 bg-opacity-20 px-2 rounded-md",children:[Object(f.jsx)("span",{className:"opacity-70 block",children:"Description: "}),Object(f.jsx)("b",{children:e.description})]}),void 0!==o&&Object(f.jsxs)("div",{className:"p-1 mt-2 m-1 bg-blue-200 bg-opacity-20 px-2 rounded-md",children:[Object(f.jsxs)("p",{children:[Object(f.jsx)("span",{className:"opacity-70",children:"Names: "}),Object(f.jsxs)("b",{children:[o.fname," ",o.lname]})]}),Object(f.jsxs)("p",{children:[Object(f.jsx)("span",{className:"opacity-70",children:"Email: "}),Object(f.jsx)("b",{children:o.email})]})]})]})]})}):Object(f.jsxs)("div",{onClick:function(){return c(e.event_id)},className:"p-1 border-t border-blue-400 border-opacity-25 hover:bg-blue-900 bg-opacity-30 cursor-pointer",children:[Object(f.jsxs)("div",{className:"flex items-center",children:[Object(f.jsx)("div",{className:"flex-1",children:Object(f.jsx)("h4",{children:void 0!==o?Object(f.jsx)("span",{title:(null===o||void 0===o?void 0:o.fname)+" "+(null===o||void 0===o?void 0:o.lname),children:null===o||void 0===o?void 0:o.lname}):Object(f.jsx)("span",{className:"opacity-50",children:"System/Admin"})})}),Object(f.jsx)("div",{className:"",children:Object(f.jsx)("span",{className:"text-sm  text-blue-400",children:m()(e.time+" +0000","YYYY-MM-DD HH:mm:ss Z").fromNow()})})]}),Object(f.jsx)("p",{className:"text-red-400 text-sm font-bold",children:e.event_type_id})]})},t)}))]})},k=function(e){var t=e.title,s=e.stop,o=e.only,r=e.add,i=e.name,n=e.icon,a=e.sub_title,c=n;return Object(f.jsxs)("div",{className:" hover-child border border-white border-opacity-40 bg-opacity-90 bg-blue-900 w-52 z-50 p-2 rounded -mt-2",children:[Object(f.jsx)(c,{className:"text-4xl mb-4 block mx-auto"}),Object(f.jsx)("button",{onClick:s,className:"px-0.5 py-1 hover:bg-red-600 text-center text-sm mb-2 border border-red-300 rounded-md  w-full block bg-red-600 bg-opacity-80",children:Object(f.jsxs)("span",{children:["Stop ",t," to ",Object(f.jsx)("b",{children:i})]})}),Object(f.jsx)("button",{onClick:o,className:"px-0.5 py-1 hover:bg-green-600 text-center text-sm mb-2 border border-green-300 rounded-md  w-full block bg-green-600 bg-opacity-80",children:Object(f.jsxs)("span",{children:[t," ",Object(f.jsx)("b",{children:i})," only"]})}),Object(f.jsx)("button",{onClick:r,className:"px-0.5 hover:bg-blue-600 py-1 text-center text-sm border border-blue-300 rounded-md  w-full block bg-blue-800",children:Object(f.jsxs)("span",{children:["Add ",Object(f.jsx)("b",{children:i})," to ",a]})})]})},E=void 0;!function(e){e[e.Details=0]="Details",e[e.Events=1]="Events"}(o||(o={}));var R=function(e){var t=e.candidate,s=e.focusHandler,r=e.stopHandler,i=e.restartHandler,n=e.warnHandler,a=e.closeHandler,c=e.events,d=e.homeProctoring,l=e.exam_started,m=e.focus_mode,b=e.removeInExam,u=e.micAdd,j=e.micStop,h=e.micOnly,_=e.soundAdd,g=e.soundStop,O=e.soundOnly,N=e.resetDevice,y=(e.setAiProctoring,e.continueHandler),C=Object(p.useState)(o.Details),S=Object(v.a)(C,2),R=S[0],A=S[1];return void 0===t?Object(f.jsxs)("div",{className:"p-4 text-center bg-white",children:[Object(f.jsx)("h1",{className:"text-3xl text-gray-800",children:"Oops!!"}),Object(f.jsxs)("p",{className:"text-3xl text-gray-700",children:["The selected candidate can't be found"," "]})]}):Object(f.jsxs)("div",{className:"p-1",children:[Object(f.jsxs)("div",{className:"p-2 border-rounded ".concat(!0===m?"bg-blue-900 text-white":"bg-gray-500 text-white","  rounded-md flex items-baseline "),children:[Object(f.jsx)("button",{onClick:function(){return a()},className:"p-1 block bg-blue-900 bg-opacity-70 rounded-md mr-2 font-bold text-1xl",children:Object(f.jsx)(x.f,{})}),Object(f.jsx)("h3",{className:"text-center -mt-1 mb-0 pb-0 text-1xl font-bold block text-blue-500--",children:"User details"})]}),Object(f.jsxs)("div",{className:"p-2 text-center",children:[Object(f.jsx)(x.a,{className:"text-9xl text-center mx-auto"}),Object(f.jsxs)("h1",{className:"text-xl  ".concat(!0===m?"text-white":"text-gray-800"," font-bold"),children:[t.fname," ",t.lname]}),Object(f.jsx)("h2",{className:" ".concat(!0===m?"text-gray-400":"text-gray-800","  text-md"),children:t.email}),Object(f.jsxs)("div",{className:"p-1",children:[!0===t.joined&&Object(f.jsx)("span",{className:"inline-block text-sm bg-blue-500 text-white px-1 rounded-md m-0.5",children:"#Joined"}),!0===t.active&&Object(f.jsx)("span",{className:"inline-block text-sm bg-green-500 text-white px-1 rounded-md m-0.5",children:"#Active"}),!0===t.removed&&Object(f.jsx)("span",{className:"inline-block text-sm bg-red-500 text-white  px-1 rounded-md m-0.5",children:"#Removed"}),!0===t.done&&Object(f.jsx)("span",{className:"inline-block text-sm bg-yellow-500 text-white px-1 rounded-md m-0.5",children:"#Done"})]})]}),Object(f.jsxs)("div",{className:"my-2 py-1 rounded grid grid-cols-3 gap-1",children:[!1===t.done&&Object(f.jsxs)("button",{title:"Clear device",onClick:function(){return N(t.user_id)},className:"proctoring-action-button",children:[Object(f.jsx)(x.zb,{className:"text-2xl mx-auto b-0 pb-0"}),Object(f.jsx)("span",{className:"text-sm p-0 block -mt-0",children:"Reset device"})]}),!0===l&&!0===t.active&&Object(f.jsxs)(f.Fragment,{children:[!0===d&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("div",{className:"inline-block hover-parent",children:[Object(f.jsxs)("button",{className:"proctoring-action-button w-full",children:[!0===t.mic?Object(f.jsx)(x.rb,{className:"text-red-400 text-2xl mx-auto b-0 pb-0"}):Object(f.jsx)(x.eb,{className:"text-gray-100 text-2xl mx-auto b-0 pb-0"}),Object(f.jsx)("span",{className:"text-sm p-0 block -mt-0",children:"Speak"})]}),Object(f.jsx)(k,{add:u.bind(E,t.user_id),stop:j.bind(E,t.user_id),only:h.bind(E,t.user_id),icon:!0===t.mic?x.rb:x.eb,name:t.lname,sub_title:"speakers",title:"speak"})]}),Object(f.jsxs)("div",{className:"inline-block hover-parent",children:[Object(f.jsxs)("button",{className:"proctoring-action-button w-full",children:[!0===t.audio?Object(f.jsx)(x.Yb,{className:"text-green-400 text-2xl mx-auto b-0 pb-0"}):Object(f.jsx)(x.Xb,{className:"text-gray-100 text-2xl mx-auto b-0 pb-0"}),Object(f.jsx)("span",{className:"text-sm p-0 block -mt-0",children:"Listen"})]}),Object(f.jsx)(k,{add:_.bind(E,t.user_id),stop:g.bind(E,t.user_id),only:O.bind(E,t.user_id),icon:!0===t.audio?x.Yb:x.Xb,name:t.lname,sub_title:"listeners",title:"listen"})]}),Object(f.jsxs)("button",{onClick:s.bind(E,t.user_id),className:"proctoring-action-button",children:[Object(f.jsx)(x.M,{className:"text-2xl mx-auto b-0 pb-0"}),Object(f.jsx)("span",{className:"text-sm p-0 block -mt-0",children:"Focus"})]})]}),!1===t.done&&Object(f.jsx)(f.Fragment,{children:!0===t.stopped?Object(f.jsxs)("button",{onClick:y.bind(E,t.user_id),className:"text-center rounded-md p-1 border-2 border-yellow-600 hover:bg-yellow-600 text-black  bg-yellow-500",title:"Continue exam",children:[Object(f.jsx)(x.Ab,{className:"text-2xl mx-auto b-0 pb-0"}),Object(f.jsx)("span",{className:"text-sm p-0 block font-bold -mt-0",children:"Continue"})]}):Object(f.jsxs)("button",{onClick:r.bind(E,t.user_id),className:"proctoring-action-button hover:bg-red-400 hover:text-white",children:[Object(f.jsx)(x.jb,{className:"text-2xl mx-auto b-0 pb-0"}),Object(f.jsx)("span",{className:"text-sm p-0 block  font-bold -mt-0",children:"Stop"})]})}),Object(f.jsxs)("button",{onClick:i.bind(E,t.user_id),className:"proctoring-action-button",children:[Object(f.jsx)(x.Gb,{className:"text-2xl mx-auto b-0 pb-0"}),Object(f.jsx)("span",{className:"text-sm p-0 block -mt-0",children:"Restart"})]}),!1===t.done&&Object(f.jsxs)("button",{title:"give a warning",onClick:function(){return n(t.user_id)},className:"proctoring-action-button",children:[Object(f.jsx)(x.Zb,{className:"text-2xl mx-auto b-0 pb-0"}),Object(f.jsx)("span",{className:"text-sm p-0 block -mt-0",children:"Warn"})]}),!1===t.done&&Object(f.jsxs)("button",{title:"Remove in exam",onClick:function(){return b(t.user_id)},className:"text-center rounded-md p-1 border-2 border-red-600 hover:bg-red-600 text-red-900 hover:text-white  hover:text-bg-red-500 bg-red-300",children:[Object(f.jsx)(x.Zb,{className:"text-2xl mx-auto b-0 pb-0"}),Object(f.jsx)("span",{className:"text-sm p-0 block -mt-0",children:"Remove in exam"})]})]})]}),Object(f.jsxs)("div",{className:"my-1 bg-blue-900 bg-opacity-40 rounded-md p-1 mt-2 grid grid-cols-2 gap-2 text-sm",children:[Object(f.jsx)("button",{onClick:function(){return A(o.Details)},className:"p-1 rounded-md text-white ".concat(R===o.Details?"bg-blue-600 border-2 border-blue-300":"bg-blue-300"),children:"candidate"}),Object(f.jsx)("button",{onClick:function(){return A(o.Events)},className:"p-1 rounded-md text-white ".concat(R===o.Events?"bg-blue-600 border-2 border-blue-300":"bg-blue-300"),children:"Events"})]}),R===o.Details?Object(f.jsxs)("div",{className:"mt-2 ".concat(!0===m?"text-white":"text-gray-900"," border-blue-400"),children:[Object(f.jsx)("h2",{className:" font-bold text-2xl mb-1 opacity-70 text-center border-b",children:"User information"}),Object(f.jsxs)("div",{className:"p-2 rounded-md border   border-opacity-20",children:[Object(f.jsxs)("div",{className:"border-b  border-opacity-60 py-1 ".concat(!0===m?"border-white":"border-gray-400"),children:[Object(f.jsx)("label",{className:"text-sm m-0 p-0 opacity-70",children:"Username:"}),Object(f.jsx)("h4",{className:"font-bold text-lg p-0 -mt-1",children:t.email})]}),Object(f.jsxs)("div",{className:"border-b  border-opacity-60 py-1 ".concat(!0===m?"border-white":"border-gray-400"),children:[Object(f.jsx)("label",{className:"text-sm m-0 p-0 opacity-70",children:"First name:"}),Object(f.jsx)("h4",{className:"font-bold text-lg p-0 -mt-1",children:t.fname})]}),Object(f.jsxs)("div",{className:"border-b  border-opacity-60 py-1 ".concat(!0===m?"border-white":"border-gray-400"),children:[Object(f.jsx)("label",{className:"text-sm m-0 p-0 opacity-70",children:"Last name:"}),Object(f.jsx)("h4",{className:"font-bold text-lg p-0 -mt-1",children:t.lname})]}),Object(f.jsxs)("div",{className:"border-b  border-opacity-60 py-1 ".concat(!0===m?"border-white":"border-gray-400"),children:[Object(f.jsx)("label",{className:"text-sm m-0 p-0 opacity-70",children:"email:"}),Object(f.jsx)("h4",{className:"font-bold text-lg p-0 -mt-1",children:t.email})]}),Object(f.jsxs)("div",{className:"border-b  border-opacity-60 py-1 ".concat(!0===m?"border-white":"border-gray-400"),children:[Object(f.jsx)("label",{className:"text-sm m-0 p-0 opacity-70",children:"Position:"}),Object(f.jsx)("h4",{className:"font-bold text-lg p-0 -mt-1",children:t.position_title})]}),Object(f.jsxs)("div",{className:"border-b  border-opacity-60 py-1 ".concat(!0===m?"border-white":"border-gray-400"),children:[Object(f.jsx)("label",{className:"text-sm m-0 p-0 opacity-70",children:"Course name:"}),Object(f.jsx)("h4",{className:"font-bold text-lg p-0 -mt-1",children:t.course_name})]})]})]}):Object(f.jsx)(w,{candidates:[t],events:c,focus_mode:m,loading:!1})]})},A=function(e){var t=e.clickHandler,s=e.candidates,o=e.focus_mode,r=e.show_title,i=e.large;return Object(f.jsxs)("div",{className:"mt-2 ".concat(!0===o?"text-white p-2 ":""),children:[!0===r&&Object(f.jsx)("h1",{className:"text-3xl font-bold text-center pb-2 border-b mb-1 border-gray-100",children:"Candidates"}),Object(f.jsxs)("table",{className:"w-full text-left ".concat(!0===o?"":"bg-white rounded-md",'  p-2"'),children:[Object(f.jsx)("thead",{className:"text-sm text-gray-500",children:Object(f.jsxs)("tr",{children:[Object(f.jsx)("th",{}),Object(f.jsx)("th",{}),!0===i&&Object(f.jsx)("th",{}),Object(f.jsx)("th",{})]})}),Object(f.jsx)("tbody",{children:s.map((function(e,s){return Object(f.jsxs)("tr",{className:"group border-b mb-1 ".concat(!0===o?"border-blue-800 border-opacity-60 hover:bg-blue-900":"border-gray-200 border-opacity-60 hover:bg-blue-100","  cursor-pointer"),onClick:t.bind(undefined,e.user_id),children:[Object(f.jsx)("td",{className:"".concat(!0===o?"text-blue-500":"text-gray-400","  w-5 text-left"),children:Object(f.jsx)(x.a,{className:!0===i?"text-3xl":"text-5xl"})}),Object(f.jsxs)("td",{className:"text-gray-400 pl-1 py-1",children:[Object(f.jsxs)("h4",{className:"font-bold ".concat(!0===i?"text-md":"text-lg","  p-0 m-0 ").concat(!0===o?"text-white":"text-gray-900"),children:[e.fname," ",e.lname]}),!1===i&&Object(f.jsx)("p",{className:"text-sm p-0 m-0 -mt-1",children:e.email})]}),!0===i&&Object(f.jsx)("td",{className:"",children:Object(f.jsx)("span",{className:"text-sm p-0 m-0 -mt-1",children:e.email})}),Object(f.jsxs)("td",{className:"text-right group-hover:opacity-100 opacity-40 ".concat(!1===i?"grid grid-cols-2 text-center w-10 pt-2":""," md:w-auto"),children:[!0===e.joined&&Object(f.jsx)("span",{className:"inline-block text-xs bg-blue-300 px-1 rounded-md m-0.5",children:"#Joined"}),!0===e.active&&Object(f.jsx)("span",{className:"inline-block text-xs bg-green-300 px-1 rounded-md m-0.5",children:"#Active"}),!0===e.removed&&Object(f.jsx)("span",{className:"inline-block text-xs bg-red-300 text-white px-1 rounded-md m-0.5",children:"#Removed"}),!0===e.done&&Object(f.jsx)("span",{className:"inline-block text-xs bg-yellow-300 px-1 rounded-md m-0.5",children:"#Done"})]})]},s)}))})]})]})};A.defaultProps={large:!1};var T,F=A,D=s(142),M=void 0,I=function(e){var t=e.candidate,s=e.warningHandler,o=e.stopHandler,r=e.detailsHandler,i=e.continueHandler,n=e.exam_started,a=e.focus_mode,c=e.exam_done,d=e.addMinutes,l=Object(p.useState)(!0),m=Object(v.a)(l,2),b=m[0],u=m[1];return Object(f.jsxs)("div",{className:"".concat(Object(h.y)(null===t||void 0===t?void 0:t.stopped,a,t.done)," text-white    cursor-pointer  p-2 rounded-md transition-all ease-in-out"),onClick:r.bind(M,t.user_id),children:[Object(f.jsxs)("div",{className:"text-center",children:[Object(f.jsx)("span",{className:"text-gray-200",children:"Seat number"}),Object(f.jsx)("h1",{className:"text-5xl font-bold",children:t.seat_number})]}),0!==t.added_minutes&&Object(f.jsxs)("div",{className:"flex items-center text-sm",children:[Object(f.jsx)("div",{className:"",children:Object(f.jsxs)("section",{className:"p-0.5 bg-blue-500 rounded w-",children:[t.added_minutes,"m"]})}),Object(f.jsx)("div",{className:"flex-1"}),Object(f.jsx)("div",{className:" pl-2 font-bold text-center",children:!0===c&&Object(f.jsx)("section",{className:"p-0.5 bg-blue-500 rounded w-auto px-1",children:Object(f.jsx)(D.a,{start_time:t.start_added_time,duration_min:t.added_minutes,timeout:function(){return u(!1)},returnString:!0,labels:!0})})})]}),Object(f.jsxs)("div",{className:"mt-1 border-t border-gray-200 pt-2",children:[Object(f.jsx)("h4",{className:"text-xs text-gray-200",children:"Full names"}),Object(f.jsxs)("h4",{className:"text-sm font-bold",children:[t.fname," ",t.lname]})]}),(!0===n&&!1===c||0!==t.added_minutes&&!1!==b)&&Object(f.jsxs)("div",{className:"mt-2 flex",children:[!1===t.stopped?Object(f.jsxs)("button",{onClick:s.bind(M,t.user_id),className:"px-2 text-sm py-1 rounded-md text-gray-900 bg-yellow-300 flex-1 border border-white",title:"Send a warning",children:[Object(f.jsx)(x.Zb,{className:"inline"})," Warn"]}):Object(f.jsxs)("button",{onClick:i.bind(M,t.user_id),className:"px-2 text-sm py-1 rounded-md text-gray-900 bg-green-400 flex-1",title:"Allow to continue exam",children:[Object(f.jsx)(x.Zb,{className:"inline"})," Continue"]}),Object(f.jsxs)("button",{onClick:o.bind(M,t.user_id),className:"px-2 text-sm py-1 rounded-md text-white- bg-red-700 ml-1 flex-1",title:"Stop candidate",children:[Object(f.jsx)(x.jb,{className:"inline"})," Stop"]})]}),(!0===c||!0===n)&&Object(f.jsxs)("div",{className:"mr-2 mt-2",children:[Object(f.jsxs)("button",{onClick:function(){d(t),u(!0)},className:"px-2 py-1 rounded-md text-sm w-full bg-blue-700 ml-1",title:"Add minutes",children:[Object(f.jsx)(x.tb,{className:"inline"})," Add minutes"]})," "]})]})},H=s(9),P=s(108),L=s(19),U=function(e){Object(c.a)(s,e);var t=Object(d.a)(s);function s(e){var o;return Object(n.a)(this,s),(o=t.call(this,e)).componentDidMount=function(){var e,t=[],s=[],i=[];null===(e=o.props.proctoring.room_groups)||void 0===e||e.forEach((function(e){t.push(e.group_id.toLowerCase()),s=[].concat(Object(O.a)(s),Object(O.a)(e.candidates.map((function(t){return Object(r.a)(Object(r.a)({},t),{},{group_id:e.group_id})}))))})),i=o.props.proctoring.all_candidates.map((function(e){var t=s.find((function(t){return t.user_id===e.user_id}));return void 0===t?Object(r.a)(Object(r.a)({},e),{},{group_id:""}):Object(r.a)(Object(r.a)({},e),{},{group_id:t.group_id})})),o.setState({candidates_in_groups:i.filter((function(e){return""!==e.group_id})),candidate_non_done_exam:i.filter((function(e){return""===e.group_id})),group_list:t})},o.submitHandler=function(e){return e.preventDefault(),0===o.state.group_name.length?o.setState({error:{target:"form",msg:"Please add the group name"}}):0===o.state.selected_list.length?o.setState({error:{target:"form",msg:"You can't create an empty group"}}):!0===o.state.group_list.includes(o.state.group_name.toLowerCase())?o.setState({error:{target:"form",msg:"This name already used on previous group"}}):void o.props.createAttendance({list:o.state.selected_list,name:o.state.group_name},!0)},o.FC_CloseProctoringRoomHandler=function(e){void 0!==e&&!1!==window.confirm("Are you sure you want to set this room to finished status??")&&(o.setState({disabling_room:!0}),o.props.FC_CloseProctoringRoom(e,[],(function(e,t){!1===e?o.setState({error:{target:"main",msg:t},disabling_room:!1}):o.setState({disabling_room:!1})})))},o.state={loading:!1,create_attendance:!1,selected_list:[],selected_candidate:null,search:"",group_name:"",error:{target:"",msg:""},created_groups:[],candidates_in_groups:[],candidate_non_done_exam:[],disabling_room:!1,group_list:[]},o}return Object(a.a)(s,[{key:"render",value:function(){var e,t=this,s=[];null!==this.props.proctoring.room_groups&&(s=null===(e=this.props.proctoring.room_groups)||void 0===e?void 0:e.filter((function(e){return!1===e.isExpired&&e.exam_id===t.props.proctoring.exam.exam_id})));if(s.length>=1)return Object(f.jsxs)("div",{className:"p-4 bg-white rounded mt-3 mr-2",children:[Object(f.jsx)("button",{className:"py-1 px-2 bg-blue-300 rounded-md text-white",onClick:function(){return t.props.FC_ClearProctoring()},children:"back"}),Object(f.jsxs)("div",{className:" p-2 text-center",children:[Object(f.jsx)("h1",{className:"text-4xl",children:"Some previous room are not closed yet"}),Object(f.jsx)("h3",{className:"text-lg text-gray-700",children:"If you want to create another room, please close all the rooms first"})]}),!0===this.state.disabling_room&&Object(f.jsx)("div",{className:"my-2 bg-blue-500 text-white px-2 text-center rounded animate__animated animate__fadeIn animate_infinite cursor-pointer",children:"Updating groups..."}),"main"===this.state.error.target&&Object(f.jsx)("div",{className:"my-2 bg-red-500 text-white px-2 text-center rounded animate__animated animate__zoomIn cursor-pointer",onClick:function(){return t.setState({error:{target:"",msg:""}})},children:this.state.error.msg}),Object(f.jsx)("div",{className:"mt-3",children:Object(f.jsxs)("table",{className:"w-full table table-auto",children:[Object(f.jsx)("thead",{className:"text-left bg-gray-100 text-gray-600",children:Object(f.jsxs)("tr",{children:[Object(f.jsx)("th",{children:"#"}),Object(f.jsx)("th",{children:"Group name"}),Object(f.jsx)("th",{children:"Created time"}),Object(f.jsx)("th",{children:"Total candidates"}),Object(f.jsx)("th",{children:"Course"}),Object(f.jsx)("th",{})]})}),Object(f.jsx)("tbody",{children:s.map((function(e,s){return Object(f.jsxs)("tr",{className:"border-b",children:[Object(f.jsx)("td",{className:"p-3",children:s+1}),Object(f.jsx)("td",{children:Object(f.jsx)("b",{children:e.group_id})}),Object(f.jsx)("td",{children:m()(e.createdAt).format("LLLL")}),Object(f.jsx)("td",{children:e.candidates.length}),Object(f.jsx)("td",{children:t.props.proctoring.exam.course_name}),Object(f.jsxs)("td",{className:"text-right",children:[Object(f.jsxs)("button",{onClick:function(s){window.confirm("Are you sure you want to re0create the group?? this is only used once some candidates have not done the exam")&&t.props.createAttendance({list:e.candidates.map((function(e){return e.user_id})),name:e.group_id},!1)},className:"p-1 rounded bg-blue-400 mr-2 text-white px-3",children:["Backup ",Object(f.jsx)("b",{children:e.group_id})," group"]}),Object(f.jsxs)("button",{onClick:t.FC_CloseProctoringRoomHandler.bind(t,e._id),className:"p-1 rounded bg-red-400 text-white px-3",children:["Close ",Object(f.jsx)("b",{children:e.group_id})," group"]})]})]},e._id)}))})]})})]});var o=Object(g.a)(this.state.candidate_non_done_exam,this.state.search,{email:!0,fname:!0,lname:!0});return 0===this.props.proctoring.candidates.length&&!1===this.state.create_attendance?Object(f.jsxs)("div",{className:"mt-4 mx-4",children:[""!==this.props.proctoring.error&&Object(f.jsxs)("div",{className:"p-2 mb-3 bg-yellow-300 animate__zoomIn animate__faster animate__animated text-black rounded-md flex items-center",children:[Object(f.jsx)(x.F,{className:"text-2xl"}),Object(f.jsx)("p",{className:"m-0 text-xl ml-1.5",children:this.props.proctoring.error})]}),Object(f.jsxs)("div",{className:"p-6 bg-white animate__fadeIn animate__animated mt-4 rounded shadow-md",children:[Object(f.jsx)("h2",{className:"text-3xl font-bold mb-2",children:"Create a group"}),Object(f.jsxs)("p",{className:"text-md text-gray-700 ",children:["To create a group click on ",Object(f.jsx)("b",{children:"create group"})," button and check list of all the candidates and add them to the attendance with the room name"]}),Object(f.jsx)("div",{className:"my-2 border-- w-4/5 py-2",children:[{title:"Province",value:this.props.proctoring.room.province_name},{title:"District",value:this.props.proctoring.room.district_name},{title:"Center name",value:this.props.proctoring.room.center_name},{title:"Room number",value:this.props.proctoring.room.room_number}].map((function(e){return Object(f.jsxs)("section",{className:"border-t py-1",children:[Object(f.jsxs)("span",{children:[e.title,": "]}),Object(f.jsx)("b",{children:e.value})]},e.title)}))}),Object(f.jsxs)("div",{className:"",children:[Object(f.jsx)("button",{className:"p-2 px-3 rounded text-lg mt-2 bg-red-500 text-white hover:bg-600",onClick:function(){return t.props.FC_ClearProctoring()},children:"Cancel"})," ",Object(f.jsx)("button",{className:"p-2 px-3 rounded text-lg mt-2 bg-blue-500 text-white hover:bg-600",onClick:function(){return t.setState({create_attendance:!0})},children:"Create group"})]})]})]}):Object(f.jsxs)(p.Fragment,{children:[null!==this.state.selected_candidate&&Object(f.jsx)(L.d,{footer:!1,widthSizeClass:L.b.large,title:"User info",theme:L.c.default,displayClose:!0,padding:{title:!0,body:!0,footer:!1},backDrop:!0,backDropClose:!0,close:function(){return t.setState({selected_candidate:null})},children:Object(f.jsx)("div",{className:"p-2",children:[{title:"National Id",value:this.state.selected_candidate.n_id},{title:"First name",value:this.state.selected_candidate.fname},{title:"Last name",value:this.state.selected_candidate.lname},{title:"District",value:this.state.selected_candidate.district},{title:"Phone number",value:this.state.selected_candidate.phone_number},{title:"Course",value:this.state.selected_candidate.course_code+" "+this.state.selected_candidate.course_name},{title:"Email",value:this.state.selected_candidate.email},{title:"Position",value:this.state.selected_candidate.position_title}].map((function(e){return Object(f.jsxs)("section",{className:"border-t py-1",children:[Object(f.jsxs)("span",{children:[e.title,": "]}),Object(f.jsx)("b",{children:e.value})]},e.title)}))})}),Object(f.jsx)("form",{onSubmit:this.submitHandler,children:Object(f.jsxs)("div",{className:"bg-white p-2 mr-2 mt-3 rounded-md animate__animated animate__fadeIn",children:[Object(f.jsxs)("div",{className:" px-2 pb-3 flex items-center",children:[Object(f.jsxs)("div",{className:"flex-1",children:[Object(f.jsxs)("div",{className:"flex",children:[Object(f.jsxs)("button",{className:"text-sm mr-2 hover:text-white hover:bg-blue-600 rounded-md px-1 text-blue-500",onClick:function(){return t.props.FC_ClearProctoring()},children:[Object(f.jsx)(x.U,{className:"inline-block "})," Back"]}),Object(f.jsx)("h2",{className:"font-bold text-xl",children:"Create a group"})]}),Object(f.jsx)("p",{className:"text-gray-400 m-0 mt- text-sm",children:"Please create a room by adding the list of the users to the attendee list"})]}),Object(f.jsxs)("div",{className:"",children:[Object(f.jsxs)("div",{className:"flex items-end",children:[Object(f.jsxs)("div",{className:"",children:[Object(f.jsx)("label",{htmlFor:"input-group-name",className:"block text-xs",children:"Group name"}),Object(f.jsx)("input",{type:"text",id:"input-group-name",className:"p-1 px-2 bg-gray-50 rounded-md ".concat("form"===this.state.error.target?"border-red-600":"","  border"),placeholder:"A",maxLength:2,required:!0,value:this.state.group_name,onChange:function(e){return t.setState({group_name:e.target.value.toUpperCase()})}})]}),Object(f.jsx)("div",{className:"flex-1 pl-1",children:Object(f.jsx)("button",{type:"submit",className:"py-1 px-3 text-md hover:bg-blue-600 rounded-md bg-blue-500 text-white block",children:"Create group"})})]}),"form"===this.state.error.target&&Object(f.jsx)("span",{className:"text-red-500 text-sm",children:this.state.error.msg})]})]}),Object(f.jsxs)("div",{className:"md:flex",children:[0!==this.state.selected_list.length&&this.state.selected_list.length===this.props.proctoring.all_candidates.length?null:Object(f.jsxs)("div",{className:"flex-1 mr-2 mb-8 md:mb-2",children:[Object(f.jsxs)("div",{className:"p-2 flex bg-gray-200 items-center",children:[Object(f.jsx)("h4",{className:"text-xl font-light text-gray-700",children:"All candidates"}),Object(f.jsx)("input",{type:"search",name:"search",id:"",placeholder:"search name",className:"py-1 px-2 flex-1 ml-3 bg-gray-50 border rounded",value:this.state.search,onChange:function(e){return t.setState({search:e.target.value})}})]}),Object(f.jsx)("div",{className:" shadow",children:Object(f.jsxs)("table",{className:"w-full",children:[Object(f.jsx)("thead",{className:"text-left bg-gray-400",children:Object(f.jsxs)("tr",{children:[Object(f.jsx)("th",{className:"text-center",children:"#"}),Object(f.jsx)("th",{children:"Names"}),Object(f.jsx)("th",{children:"Email"}),Object(f.jsx)("th",{className:"text-right",children:Object(f.jsx)("button",{type:"button",className:"p-0.5 px-2 rounded-md hover:bg-blue-700 m-1 inline-block bg-blue-600 text-white text-sm",onClick:function(){return t.setState({selected_list:t.state.candidate_non_done_exam.map((function(e){return e.user_id}))})},children:"Select all"})})]})}),Object(f.jsx)("tbody",{children:0===o.length?Object(f.jsx)("tr",{children:Object(f.jsx)("td",{colSpan:4,children:Object(f.jsxs)("div",{className:"p-2 text-center py-4",children:[Object(f.jsx)(x.R,{className:"text-6xl text-gray-500 mx-auto my-1"}),Object(f.jsxs)("h2",{children:[Object(f.jsx)("b",{children:this.state.search})," can't be found in waiting candidates"]})]})})}):Object(f.jsxs)(f.Fragment,{children:[o.map((function(e,s){return t.state.selected_list.indexOf(e.user_id)>-1?null:Object(f.jsxs)("tr",{className:"border-b group hover:bg-blue-50",children:[Object(f.jsxs)("td",{className:"text-gray-400 px-1 text-sm text-center",children:[" ",s+1]}),Object(f.jsxs)("td",{title:"Click to see details",className:"font-bold text-blue-900 hover:underline cursor-pointer",onClick:function(){return t.setState({selected_candidate:e})},children:[e.fname," ",e.lname]}),Object(f.jsx)("td",{className:"text-sm",children:e.email}),Object(f.jsx)("td",{className:"text-right",children:Object(f.jsxs)("button",{type:"button",onClick:function(){return t.setState({selected_list:[].concat(Object(O.a)(t.state.selected_list),[e.user_id]),error:{target:"",msg:""}})},className:"my-1 p-1 px-2 rounded-md group-hover:opacity-95 opacity-5 bg-blue-500 text-white text-sm",children:[Object(f.jsx)(x.d,{className:"inline-block mr-1"}),"Add"]})})]},s)})),""===this.state.search&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("tr",{children:Object(f.jsx)("td",{colSpan:5,children:Object(f.jsx)("h4",{className:"text-center text-2xl text-gray-400 p-2 border-b",children:"Candidates who are done the exam"})})}),this.state.candidates_in_groups.map((function(e,s){return t.state.selected_list.indexOf(e.user_id)>-1?null:Object(f.jsxs)("tr",{className:"border-b group  opacity-70 ",children:[Object(f.jsxs)("td",{className:"text-gray-400 px-1 text-sm text-center",children:[" ",s+1]}),Object(f.jsxs)("td",{title:"Click to see details",className:"font-bold text-blue-900 hover:underline cursor-pointer",onClick:function(){return t.setState({selected_candidate:e})},children:[e.fname," ",e.lname]}),Object(f.jsx)("td",{className:"text-sm",children:e.email}),Object(f.jsxs)("td",{className:"",children:["Group: ",Object(f.jsx)("b",{children:e.group_id})]})]},s)}))]})]})})]})})]}),Object(f.jsxs)("div",{className:"flex-1 ml-1 shadow border",children:[Object(f.jsxs)("div",{className:"p-1 bg-blue-100 py-1 px-2 flex items-center",children:[Object(f.jsxs)("div",{className:"flex-1",children:[Object(f.jsx)("h2",{className:"font-bold text-blue-900 text-2xl",children:"Group"}),Object(f.jsx)("p",{className:"text-blue-800 m-0 mt- text-sm",children:"This is the list of the candidate who are allowed to do the exam"})]}),Object(f.jsxs)("div",{className:"",children:[Object(f.jsxs)("h2",{className:"text-xl font-bold -mb-2",children:[Object(f.jsx)("b",{children:this.state.selected_list.length})," of"," ",Object(f.jsx)("b",{children:this.props.proctoring.all_candidates.length})]}),Object(f.jsx)("p",{className:"text-sm",children:"Selected"})]})]}),Object(f.jsx)("div",{className:"",children:Object(f.jsxs)("table",{className:"w-full",children:[Object(f.jsx)("thead",{className:"text-left bg-blue-800 text-white",children:Object(f.jsxs)("tr",{children:[Object(f.jsx)("th",{className:"px-2",children:"#"}),Object(f.jsx)("th",{children:"Names"}),Object(f.jsx)("th",{children:"Email"}),Object(f.jsx)("th",{className:"text-right",children:this.state.selected_list.length>=2&&Object(f.jsx)("button",{type:"button",className:"p-0.5 px-2 rounded-md hover:bg-red-700 hover:text-red-100 m-1 inline-block bg-red-200 text-red-800 text-sm",onClick:function(){return t.setState({selected_list:[]})},children:"Remove all"})})]})}),Object(f.jsx)("tbody",{children:0===this.state.selected_list.length?Object(f.jsx)("tr",{children:Object(f.jsx)("td",{colSpan:4,children:Object(f.jsxs)("div",{className:"p-2 text-center py-4",children:[Object(f.jsx)(x.R,{className:"text-6xl text-gray-500 mx-auto my-1"}),Object(f.jsx)("h2",{children:"No candidate found on the attendance"})]})})}):this.state.selected_list.map((function(e,s){var o=t.props.proctoring.all_candidates.find((function(t){return t.user_id===e}));return void 0===o?null:Object(f.jsxs)("tr",{className:"border-b group hover:bg-blue-50 animate__animated animate__zoomIn animate__faster",children:[Object(f.jsx)("td",{className:"text-gray-400 pr-1 text-center",children:s+1}),Object(f.jsxs)("td",{title:"Click to see details",className:"font-bold text-blue-900 hover:underline cursor-pointer",onClick:function(){return void 0!==o&&t.setState({selected_candidate:o})},children:[o.fname," ",o.lname]}),Object(f.jsx)("td",{children:o.email}),Object(f.jsx)("td",{className:"text-right",children:Object(f.jsx)("button",{type:"button",onClick:function(){return t.setState({selected_list:t.state.selected_list.filter((function(t){return t!==e}))})},className:"my-1 p-1 px-2 rounded-md group-hover:opacity-95 opacity-5 bg-red-500 text-white text-sm",children:"Remove"})})]},s)}))})]})})]})]})]})})]})}}]),s}(b.a.Component),V=Object(j.b)((function(e){return{auth:e.auth,proctoring:e.proctoring}}),{FC_CloseProctoringRoom:h.F,FC_ClearProctoring:h.E})(U),z=void 0,G=function(e){var t=e.close,s=e.candidate,o=e.addMinutesHandler,r=e.reset_added_minutes,i=Object(p.useState)(1),n=Object(v.a)(i,2),a=n[0],c=n[1],d=Object(p.useState)(""),l=Object(v.a)(d,2),m=l[0],b=l[1],u=Object(p.useState)({target:"",msg:""}),j=Object(v.a)(u,2),h=j[0],_=j[1];return Object(f.jsxs)(p.Fragment,{children:[Object(f.jsx)("div",{className:"fixed bg-black bg-opacity-10 top-0 bottom-0 right-0 left-0 animate__animated animate__fadeIn",onClick:function(){return t(!1)}}),Object(f.jsxs)("div",{className:"fixed w-80 shadow-lg bg-white rounded top-16 mt-2 right-2 animate__animated animate__zoomIn animate__faster",children:[Object(f.jsxs)("div",{className:"flex items-center border-b",children:[Object(f.jsx)("div",{className:"flex-1 pl-2 text-xl font-bold text-gray-400",children:Object(f.jsx)("h4",{children:"Room details"})}),Object(f.jsx)("div",{className:"",children:Object(f.jsx)("button",{onClick:function(){return t(!1)},className:"p-2 hover:bg-red-700 hover:text-white rounded text-2xl",children:Object(f.jsx)(x.y,{})})})]}),Object(f.jsxs)("div",{className:"p-2 ",children:[null!==s?Object(f.jsx)("div",{className:"border-separate p-2",children:[{title:"Names",value:(null===s||void 0===s?void 0:s.fname)+" "+(null===s||void 0===s?void 0:s.lname)},{title:"Email",value:null===s||void 0===s?void 0:s.email},{title:"Seat",value:null===s||void 0===s?void 0:s.seat_number}].map((function(e,t){var s=e.title,o=e.value;return Object(f.jsxs)("div",{className:"flex",children:[Object(f.jsxs)("span",{className:"text-gray-500",children:[s,": "]}),Object(f.jsxs)("b",{className:"text-right inline-block",children:[" ",o]})]},t)}))}):Object(f.jsxs)("div",{className:"p-2 flex items-center bg-gray-100 border mb-3 cursor-pointer hover:bg-green-100 rounded-md",children:[Object(f.jsx)("div",{className:"p-1",children:!0===r?Object(f.jsx)(x.r,{className:"text-3xl text-green-500"}):Object(f.jsx)(x.s,{className:"text-3xl text-gray-500"})}),Object(f.jsx)("div",{className:"flex-1 p-1",children:Object(f.jsx)("p",{className:"".concat(!0===r?"":"text-gray-600"),children:!0===r?"All the candidate will lose the minutes you added on them":"All the candidate will keep the minutes you added on them"})})]}),Object(f.jsxs)("div",{className:"p-2 text-center pt-1 bg-gray-100 mx-2 rounded",children:[Object(f.jsx)("p",{className:"m-0 text-sm text-gray-500",children:"Minutes"}),Object(f.jsxs)("div",{className:"flex",children:[Object(f.jsx)("button",{className:"text-3xl px-4 hover:bg-blue-200 hover:text-blue-900 rounded",onClick:c.bind(z,a-1),children:"-"}),Object(f.jsx)("input",{type:"number",className:"flex-1 text-4xl text-center font-bold bg-transparent text-blue-700",min:1,max:10,value:a,onChange:function(e){return c(+e.target.value)}}),Object(f.jsx)("button",{className:"text-3xl px-4 hover:bg-blue-200 hover:text-blue-900 rounded",onClick:c.bind(z,a+1),children:"+"})]}),"minutes"===h.target&&Object(f.jsx)("span",{className:"text-red-500 text-sm",children:h.msg})]}),Object(f.jsxs)("div",{className:"p-2",children:[Object(f.jsx)("label",{htmlFor:"minutes-reason",children:"Reason"}),Object(f.jsx)("textarea",{id:"minutes-reason",className:"w-full bg-gray-100 rounded border-2 ".concat("reason"===h.target?"border-red-500":"border-blue-500"," p-1"),rows:3,value:m,onChange:function(e){return b(e.target.value)}}),"reason"===h.target&&Object(f.jsx)("span",{className:"text-red-500 text-sm",children:h.msg})]}),Object(f.jsx)("div",{className:"p-2 mx-1",children:Object(f.jsxs)("button",{className:"btn bg-blue-500 text-white w-full hover:bg-blue-600",onClick:function(){return a<2?_({target:"minutes",msg:"Minimum is 2m"}):m.length<=3?_({target:"reason",msg:"Reason must me up to 4 characters"}):(o(a,m),void t())},children:[Object(f.jsx)(x.c,{className:"inline-block text-2xl"})," Add minutes"]})})]})]})," "]})},X=s(335),Y=void 0,W={width:"100%",height:"10rem",minWidth:"100%",minHeight:"100%",objectFit:"cover",objectPosition:"top"},J=function(e){var t=e.localStream,s=e.candidate,o=e.micAdd,r=e.micStop,i=e.micOnly,n=e.soundAdd,a=e.soundStop,c=e.soundOnly,d=e.open,l=e.focus,m=b.a.useRef(null);Object(p.useEffect)((function(){if(t){var e=m.current;null!==e&&(e.srcObject=t,e.onloadedmetadata=function(){e.play()})}}),[t]);var u=s.user_id,j=Object(_.o)(s.lname,11);return Object(f.jsxs)("div",{className:"group  border-2 ".concat(!0===s.stopped?"border-red-300 bg-red-300":"border-blue-400 bg-blue-400","  h-52 relative rounded-md"),title:"".concat(s.fname," ").concat(s.lname),children:[Object(f.jsx)("video",{style:W,className:"w-full  h-52 z-10",ref:m,autoPlay:!0,muted:!s.audio}),!0===s.hand&&Object(f.jsx)("div",{className:"absolute top-0 left-0 z-50 bg-black bg-opacity-40 rounded-tl-sm rounded-br-2xl p-1",children:Object(f.jsx)(x.l,{className:"text-2xl text-yellow-300",stroke:"red"})}),Object(f.jsx)("div",{className:"absolute top-1 right-1 z-50 ",children:Object(f.jsx)("button",{onClick:l.bind(Y,u),title:"Focus on user",className:"inline-block text-xl ml-1 p-0.5 text-white bg-black bg-opacity-60 rounded-lg  hover:bg-blue-800",children:Object(f.jsx)(x.nb,{})})}),Object(f.jsxs)("div",{className:"w-full flex items-center px-1 -mt-10 absolute",children:[Object(f.jsx)("div",{className:"flex-1",children:Object(f.jsx)("button",{onClick:d.bind(Y,u),className:"p-0.5 px-2 rounded-xl bg-black bg-opacity-50 inline-block text-white hover:bg-blue-800",children:Object(f.jsx)("h2",{className:"font-bold",children:j})})}),Object(f.jsxs)("div",{className:"text-right",children:[Object(f.jsxs)("div",{className:"inline-block hover-parent z-50",children:[Object(f.jsx)("button",{className:"inline-block text-2xl ml-1 p-1 text-white bg-black bg-opacity-60 rounded-lg hover:bg-blue-900",children:!0===s.mic?Object(f.jsx)(x.rb,{className:"text-red-400"}):Object(f.jsx)(x.eb,{className:"text-gray-100"})}),Object(f.jsx)(k,{add:o.bind(Y,u),stop:r.bind(Y,u),only:i.bind(Y,u),icon:!0===s.mic?x.rb:x.eb,name:j,sub_title:"speakers",title:"speak"})]}),Object(f.jsxs)("div",{className:"inline-block hover-parent z-50",children:[Object(f.jsx)("button",{className:"inline-block text-2xl ml-1 p-1 text-white bg-black bg-opacity-60 rounded-lg  hover:bg-blue-900",children:!0===s.audio?Object(f.jsx)(x.Yb,{className:"text-green-400"}):Object(f.jsx)(x.Xb,{className:"text-gray-100"})}),Object(f.jsx)(k,{add:n.bind(Y,u),stop:a.bind(Y,u),only:c.bind(Y,u),icon:!0===s.audio?x.Yb:x.Xb,name:j,sub_title:"listeners",title:"listen"})]})]})]})]})},Z=function(e){var t=e.title,s=e.icon,o=e.active,r=e.accent,i=e.click,n=e.disabled,a=e.description,c=s;return Object(f.jsxs)("button",{onClick:i,disabled:n,className:"flex text-xs items-center p-1 mx-0.5 px-2 rounded-full ".concat(!0===o?"bg-".concat(r,"-600 text-white"):""," border border-").concat(r,"-300 hover:bg-").concat(r,"-700 hover:text-white text-").concat(r,"-300"),title:a,children:[Object(f.jsx)(c,{className:"text-xl "}),Object(f.jsx)("span",{className:"opacity-80",children:t})]})},B=function(e){var t=e.sound_text,s=e.speaker_text,o=e.speakToAll,r=e.stopSpeaking,i=e.listenAll,n=e.stopListening;return Object(f.jsxs)("div",{className:"flex p-1 bg-blue-900 mb-2 sticky bg-opacity-50 border-b border-blue-500",children:[Object(f.jsxs)("div",{className:"flex-1",children:[Object(f.jsxs)("h6",{className:"text-xs text-blue-200",children:["Audio"," ",Object(f.jsx)("span",{className:"font-light opacity-40",children:"(what they listen)"})]}),Object(f.jsxs)("div",{className:"mt-1 flex items-center",children:[Object(f.jsx)(Z,{title:"Speak to all",description:"Speak to all candidates",accent:"green",icon:x.db,click:o,active:!1,disabled:!1}),Object(f.jsx)(Z,{title:"",description:"Stop speaking to all candidates",accent:"red",icon:x.eb,click:r,active:!1,disabled:!1}),Object(f.jsx)("p",{className:"px-1 text-white",children:t})]})]}),Object(f.jsxs)("div",{className:"flex-1 text-right",children:[Object(f.jsxs)("h6",{className:"text-xs text-blue-200",children:["Speaker"," ",Object(f.jsx)("span",{className:"font-light opacity-40",children:"(what you listen)"})]}),Object(f.jsxs)("div",{className:"mt-1 flex items-center flex-row-reverse",children:[Object(f.jsx)(Z,{title:"listen all",description:"listen all candidates",accent:"green",icon:x.Yb,click:i,active:!1,disabled:!1}),Object(f.jsx)(Z,{title:"",description:"Stop listening to all candidate",accent:"red",icon:x.Xb,click:n,active:!1,disabled:!1}),Object(f.jsx)("p",{className:"px-1 text-white",children:s})]})]})]})},K=void 0,q={width:"100%",height:"10rem",minWidth:"100%",minHeight:"100%",objectFit:"cover",objectPosition:"top"},Q=function(e){var t=e.localStream,s=e.candidate,o=e.micAdd,r=e.micStop,i=e.micOnly,n=e.soundAdd,a=e.soundStop,c=e.soundOnly,d=e.open,l=e.focus,m=b.a.useRef(null);Object(p.useEffect)((function(){if(t){var e=m.current;null!==e&&(e.srcObject=t,e.onloadedmetadata=function(){e.play()})}}),[t]);var u=s.user_id,j=Object(_.o)(s.lname,20);return Object(f.jsxs)("div",{className:" bg-blue-300 border-2 border-blue-300 h-64 relative rounded-md",title:"".concat(s.fname," ").concat(s.lname),children:[Object(f.jsx)("video",{style:q,className:"w-full  h-64 z-10",ref:m,autoPlay:!0,muted:!s.audio}),!0===s.hand&&Object(f.jsx)("div",{className:"absolute top-0 right-0 z-50 bg-black bg-opacity-40 rounded-tr-sm rounded-bl-2xl p-1",children:Object(f.jsx)(x.l,{className:"text-2xl text-yellow-300",stroke:"red"})}),Object(f.jsxs)("div",{className:"w-full flex items-center px-1 -mt-10 absolute",children:[Object(f.jsx)("div",{className:"flex-1",children:Object(f.jsx)("button",{onClick:d.bind(K,u),className:"p-0.5 px-2 rounded-xl bg-black bg-opacity-50 inline-block text-white hover:bg-blue-800",children:Object(f.jsx)("h2",{className:"font-bold",children:j})})}),Object(f.jsxs)("div",{className:"text-right",children:[Object(f.jsxs)("div",{className:"inline-block hover-parent z-50",children:[Object(f.jsx)("button",{className:"inline-block text-2xl ml-1 p-1 text-white bg-black bg-opacity-60 rounded-lg hover:bg-blue-900",children:!0===s.mic?Object(f.jsx)(x.rb,{className:"text-red-400"}):Object(f.jsx)(x.eb,{className:"text-gray-100"})}),Object(f.jsx)(k,{add:o.bind(K,u),stop:r.bind(K,u),only:i.bind(K,u),icon:!0===s.mic?x.rb:x.eb,name:j,sub_title:"speakers",title:"speak"})]}),Object(f.jsxs)("div",{className:"inline-block hover-parent z-50",children:[Object(f.jsx)("button",{className:"inline-block text-2xl ml-1 p-1 text-white bg-black bg-opacity-60 rounded-lg  hover:bg-blue-900",children:!0===s.audio?Object(f.jsx)(x.Yb,{className:"text-green-400"}):Object(f.jsx)(x.Xb,{className:"text-gray-100"})}),Object(f.jsx)(k,{add:n.bind(K,u),stop:a.bind(K,u),only:c.bind(K,u),icon:!0===s.audio?x.Yb:x.Xb,name:j,sub_title:"listeners",title:"listen"})]}),Object(f.jsx)("button",{onClick:l.bind(K,u),title:"Focus on user",className:"inline-block text-2xl ml-1 p-1 text-white bg-black bg-opacity-60 rounded-lg  hover:bg-blue-800",children:Object(f.jsx)(x.nb,{})})]})]})]})},$=s(924);!function(e){e[e.Candidates=0]="Candidates",e[e.Events=1]="Events"}(T||(T={}));var ee=function(e){Object(c.a)(s,e);var t=Object(d.a)(s);function s(e){var o;return Object(n.a)(this,s),(o=t.call(this,e)).myPeer=void 0,o.componentDidMount=function(){!0===o.props.homeProctoring?(o.setState({focus_mode:!0}),o.props.FC_AddMyStream(o.props.socket.socket.id,(function(e){X.b((function(e){o.props.FC_AddPeerId(e),console.log({connectWithMyPeer:e,peer_id:o.props.proctoring.my_stream.peer_id,stream_id:o.props.proctoring.my_stream.stream_id,socket_data:o.props.proctoring.my_stream.socket_id}),o.startProctoringOperations()}),(function(e){return o.props.FC_AddUserStream(e)}),e)}))):o.startProctoringOperations()},o.startProctoringOperations=function(){var e=o.props.proctoring.exam,t=e.room_id,s=e.course_id,r=e.position_id,i=e.exam_id;o.props.proctoring.candidates.length<=0&&null!==o.props.auth.application_session&&void 0!==o.props.auth.application_session._id&&o.props.FC_GetProctoringRoom({room_id:t,course_id:s,position_id:r,session_id:o.props.auth.application_session._id},(function(e,t){!0===e?(o.setState({loading_room:!1}),o.props.socket.socket.emit(H.e.GET_ROOM_INFO_SERVER,o.props.proctoring.room.room_id,(function(e){!0===e.error?o.props.FC_RoomNotFoundOnline(e.msg):e.data.exam_id===i?(o.props.FC_RoomDetailsOnline(e.data),o.startListeningToEvents()):o.setState({loading_room:!1,error:{target:"wrong-room",msg:"Exams does not match the active group"}})}))):o.setState({loading_room:!1,error:{target:"all",msg:t}})}))},o.componentWillUnmount=function(){o.props.socket.socket.off(H.e.NEW_USER_JOINED_CLIENT),o.props.socket.socket.off(H.e.TIME_OUT_CLIENT),o.props.socket.socket.off(H.e.USER_DISCONNECTED),o.props.socket.socket.off(H.e.EXAM_DONE_CLIENT),o.props.socket.socket.off(H.e.CAND_EXAM_EVENT_CLIENT)},o.closeGroupHandler=function(e,t){o.props.FC_CloseProctoringRoom(e,t,(function(e,t){}))},o.startListeningToEvents=function(){var e,t,s,r=o.props.proctoring.my_stream,i=r.peer_id,n=r.socket_id,a=r.stream_id;(console.log({exam_id:o.props.proctoring.exam.exam_id}),o.props.socket.socket.emit(H.e.JOIN_ROOM,{room_id:o.props.proctoring.room.room_id,user_id:o.props.auth.user.user_id,supper:!0,exam_id:o.props.proctoring.exam.exam_id,socket_id:n,stream_id:a,peer_id:i},(function(e){if(!0===e.error)return o.setState({error:{target:"main",msg:e.msg}});o.props.proctoring.candidates.forEach((function(e){!0===e.active&&""!==e.peer_id&&""!==e.peer_id&&(console.log("older user joined video call",e.user_id),console.log(e.peer_id),X.a(e.peer_id,o.props.proctoring.my_stream.stream,(function(e){console.log("USER STREAM RECEIVED"),o.props.FC_AddUserStream(e)})))})),o.props.socket.socket.on(H.e.NEW_USER_JOINED_CLIENT,(function(e){o.props.FC_SetOneActiveCandidate(e),!0===o.props.homeProctoring&&(console.log("new user joined"),console.log(e.peer_id),X.a(e.peer_id,o.props.proctoring.my_stream.stream,(function(e){console.log("USER STREAM RECEIVED"),o.props.FC_AddUserStream(e)})))})),o.props.socket.socket.on(H.e.TIME_OUT_CLIENT,(function(e){o.props.FC_CandidateTimeOut(e)})),o.props.socket.socket.on(H.e.USER_DISCONNECTED,(function(e){var t;!0===o.props.proctoring.exam.start_exam&&(o.props.FC_CandidateOffline(e),o.props.FC_SaveEvent({application_session_id:null===(t=o.props.auth.application_session)||void 0===t?void 0:t._id,description:"Leave the room",done_by:"System",event_type_id:H.e.CANDIDATE_LEFT_EXAM_EVENT,exam_id:o.props.proctoring.exam.exam_id,position_id:o.props.proctoring.exam.position_id,room_id:o.props.proctoring.room.room_id,time:(new Date).toString(),user_id:e,group_id:o.props.proctoring.room.group_id},(function(e,t){!1===e&&o.setState({error:{target:"main",msg:t}})})))})),o.props.socket.socket.on(H.e.EXAM_DONE_CLIENT,(function(e){return o.props.FC_CandidateDoneExamCenter(e)})),o.props.socket.socket.on(H.e.HOME_PROCTORING__SET_HAND,(function(e){console.log("Rize hand"),o.props.FC_CandidateHandSupervisor(e)})),o.props.socket.socket.on(H.e.CAND_EXAM_EVENT_CLIENT,(function(e){return o.props.FC_CandidateExamEvent(e)}))})),o.props.socket.socket.on(H.e.USER_USING_MORE_ACCOUNTS,(function(e){var t,s=o.props.proctoring.candidates.find((function(t){return t.user_id===e}));void 0!==s&&o.setState({popups:[].concat(Object(O.a)(o.state.popups),[{id:Object($.a)(),icon:x.Qb,time:(new Date).toString(),title:"The candidate is trying to login with multiple devices or tabs",user_id:e,type:H.e.USER_USING_MORE_ACCOUNTS,username:s.lname}])}),o.props.FC_SaveEvent({application_session_id:null===(t=o.props.auth.application_session)||void 0===t?void 0:t._id,description:"The candidate is trying to login with multiple devices or tabs",done_by:"System",event_type_id:H.e.USER_USING_MORE_ACCOUNTS,exam_id:o.props.proctoring.exam.exam_id,position_id:o.props.proctoring.exam.position_id,room_id:o.props.proctoring.room.room_id,time:(new Date).toString(),user_id:e,group_id:o.props.proctoring.room.group_id},(function(e,t){!1===e&&o.setState({error:{target:"main",msg:t}})}))})),o.props.socket.socket.on(H.e.USER_USING_MORE_DEVICES,(function(e){var t,s=o.props.proctoring.candidates.find((function(t){return t.user_id===e}));void 0!==s&&o.setState({popups:[].concat(Object(O.a)(o.state.popups),[{id:Object($.a)(),icon:x.z,time:(new Date).toString(),title:"The candidate is using another device/browser to login",user_id:e,type:H.e.USER_USING_MORE_ACCOUNTS,username:s.lname}])}),o.props.FC_SaveEvent({application_session_id:null===(t=o.props.auth.application_session)||void 0===t?void 0:t._id,description:"The candidate is trying to login with multiple devices or tabs",done_by:"System",event_type_id:H.e.USER_USING_MORE_ACCOUNTS,exam_id:o.props.proctoring.exam.exam_id,position_id:o.props.proctoring.exam.position_id,room_id:o.props.proctoring.room.room_id,time:(new Date).toString(),user_id:e,group_id:o.props.proctoring.room.group_id},(function(e,t){!1===e&&o.setState({error:{target:"main",msg:t}})}))})),null!==(null===(e=o.props.auth.application_session)||void 0===e?void 0:e._id)&&void 0!==(null===(t=o.props.auth.application_session)||void 0===t?void 0:t._id))&&o.props.FC_LoadRoomEvents({application_session_id:null===(s=o.props.auth.application_session)||void 0===s?void 0:s._id,exam_id:o.props.proctoring.exam.exam_id,room_id:o.props.proctoring.room.room_id,group_id:o.props.proctoring.room.group_id},(function(e,t){!0===e?o.setState({events_loading:!1}):o.setState({events_loading:!1,error:{target:"main",msg:t}})}))},o.leaveRoom=function(){o.props.socket.socket.off(H.e.USER_CONNECTED),o.props.socket.socket.off(H.e.USER_DISCONNECTED),o.props.socket.socket.off(H.e.CAND_EXAM_EVENT_CLIENT),o.props.FC_ClearExamToRoomProctoring()},o.removePopup=function(e){return o.setState({popups:o.state.popups.filter((function(t){return t.id!==e}))})},o.blank=function(e){return console.log("clicked")},o.ActiveSIdeTabHandler=function(e){return o.setState({active_side_tab:e})},o.SelectCandidateHandler=function(e){return o.setState({selected_candidate:e})},o.startExamHandler=function(){if(o.props.proctoring.candidates.filter((function(e){return!0===e.active})).length<=0)return window.alert("You can't start exam without any active candidate");var e;window.confirm("Are you sure you want to start the exam??")&&(o.props.socket.socket.emit(H.e.START_EXAM_SERVER,{room_id:o.props.proctoring.room.room_id,data:"start exam",description:"The exam started on this room",msg:"The exam started on this room",duration:o.props.proctoring.exam.duration},(function(e){var t=e.start_time,s=e.duration;e.end_time,e.fixed_duration;o.props.FC_ExamStartStop(!0,t,s)})),o.props.FC_SaveEvent({application_session_id:null===(e=o.props.auth.application_session)||void 0===e?void 0:e._id,description:"The exam started on this room",done_by:"Administrator",event_type_id:"EXAM STARTED",exam_id:o.props.proctoring.exam.exam_id,position_id:o.props.proctoring.exam.position_id,room_id:o.props.proctoring.room.room_id,time:(new Date).toString(),user_id:o.props.auth.user.user_id,group_id:o.props.proctoring.room.group_id},(function(e,t){!1===e&&o.setState({error:{target:"main",msg:t}})})))},o.stopExamHandler=function(){if(window.confirm("Are you sure you want to stop the exam??")){var e;if(o.props.socket.socket.emit(H.e.STOP_EXAM_SERVER,{room_id:o.props.proctoring.room.room_id,description:"Exam stopped on this room"}),o.props.FC_ExamStartStop(!1),null!==o.props.proctoring.room_groups){var t,s=null===(t=o.props.proctoring.room_groups)||void 0===t?void 0:t.find((function(e){return e.group_id===o.props.proctoring.room.group_id}));void 0!==s&&void 0!==(null===s||void 0===s?void 0:s._id)&&o.closeGroupHandler(null===s||void 0===s?void 0:s._id,o.props.proctoring.candidates.filter((function(e){return!1===e.joined})).map((function(e){return e.user_id})))}o.props.FC_SaveEvent({application_session_id:null===(e=o.props.auth.application_session)||void 0===e?void 0:e._id,description:"Exam stopped on this room",done_by:"Supervisor",event_type_id:"EXAM_STOPPED",exam_id:o.props.proctoring.exam.exam_id,position_id:o.props.proctoring.exam.position_id,room_id:o.props.proctoring.room.room_id,time:(new Date).toString(),user_id:o.props.auth.user.user_id,group_id:o.props.proctoring.room.group_id},(function(e,t){!1===e&&o.setState({error:{target:"main",msg:t}})}))}},o.continueHandler=function(e){var t;window.confirm("Alre you sure you want to give this candidate the permition to continue the exam??")&&(o.props.FC_ContinueExam(e),o.props.socket.socket.emit(H.e.CAND_CONTINUE_EXAM_SERVER,{room_id:o.props.proctoring.room.room_id,user_id:e,description:"Allowed a candidate to continue exam"}),o.props.FC_SaveEvent({application_session_id:null===(t=o.props.auth.application_session)||void 0===t?void 0:t._id,description:"Allowed a candidate to continue exam",done_by:"Supervisor",event_type_id:H.e.CAND_CONTINUE_EXAM_CLIENT,exam_id:o.props.proctoring.exam.exam_id,position_id:o.props.proctoring.exam.position_id,room_id:o.props.proctoring.room.room_id,time:(new Date).toString(),user_id:e,group_id:o.props.proctoring.room.group_id},(function(e,t,s){!1===e&&o.setState({error:{target:"main",msg:t}})})))},o.stopCandidateHandler=function(e){var t,s=window.prompt("If you want to stop the candidate add the reason");null!==s&&(o.props.socket.socket.emit(H.e.CAND_STOP_EXAM_SERVER,{room_id:o.props.proctoring.room.room_id,user_id:e,msg:s,description:"STOP: ".concat(s),done_by:"Supervisor",event_type_id:H.e.CAND_STOP_EXAM_CLIENT}),o.props.FC_StopCandidate(e),o.props.FC_SaveEvent({application_session_id:null===(t=o.props.auth.application_session)||void 0===t?void 0:t._id,description:"STOP: ".concat(s),done_by:"Supervisor",event_type_id:H.e.CAND_STOP_EXAM_CLIENT,exam_id:o.props.proctoring.exam.exam_id,position_id:o.props.proctoring.exam.position_id,room_id:o.props.proctoring.room.room_id,time:(new Date).toString(),user_id:e,group_id:o.props.proctoring.room.group_id},(function(e,t){!1===e&&o.setState({error:{target:"main",msg:t}})})))},o.ejectCandidateHandler=function(e){var t,s=window.prompt("If you want to remove the candidate add the reason");null!==s&&(o.props.socket.socket.emit(H.e.CAND_REMOVE_EXAM_SERVER,{room_id:o.props.proctoring.room.room_id,user_id:e,msg:s,description:"REMOVED: ".concat(s),done_by:"Supervisor"}),o.props.FC_SaveEvent({application_session_id:null===(t=o.props.auth.application_session)||void 0===t?void 0:t._id,description:"REMOVED: ".concat(s),done_by:"Supervisor",event_type_id:H.e.CAND_REMOVE_EXAM_CLIENT,exam_id:o.props.proctoring.exam.exam_id,position_id:o.props.proctoring.exam.position_id,room_id:o.props.proctoring.room.room_id,time:(new Date).toString(),user_id:e,group_id:o.props.proctoring.room.group_id},(function(t,s){!1===t?o.setState({error:{target:"main",msg:s}}):o.props.FC_CandidateRemoveExam(e)})))},o.warnCandidateHandler=function(e){var t,s=window.prompt("If you want to warn this candidate, add the reason");null!==s&&(o.props.socket.socket.emit(H.e.CAND_WARNING_EXAM_SERVER,{room_id:o.props.proctoring.room.room_id,user_id:e,msg:"WARNING: ".concat(s),description:"WARNING: ".concat(s)}),o.props.FC_SaveEvent({application_session_id:null===(t=o.props.auth.application_session)||void 0===t?void 0:t._id,description:"WARNING: ".concat(s),done_by:"Supervisor",event_type_id:H.e.CAND_WARNING_EXAM_SERVER,exam_id:o.props.proctoring.exam.exam_id,position_id:o.props.proctoring.exam.position_id,room_id:o.props.proctoring.room.room_id,time:(new Date).toString(),user_id:e,group_id:o.props.proctoring.room.group_id},(function(e,t){!1===e&&o.setState({error:{target:"main",msg:t}})})))},o.restartCandidateHandler=function(e){var t,s=window.prompt("Restart this candidate's exam, reason");null!==s&&(console.log("RESTART EXAM CANDIDATE"),o.props.socket.socket.emit(H.e.CAND_RESTART_EXAM_SERVER,{room_id:o.props.proctoring.room.room_id,user_id:e,msg:"RESTART: ".concat(s),description:"RESTART: ".concat(s)}),o.props.FC_SaveEvent({application_session_id:null===(t=o.props.auth.application_session)||void 0===t?void 0:t._id,description:"RESTART: ".concat(s),done_by:"Supervisor",event_type_id:H.e.CAND_RESTART_EXAM_SERVER,exam_id:o.props.proctoring.exam.exam_id,position_id:o.props.proctoring.exam.position_id,room_id:o.props.proctoring.room.room_id,time:(new Date).toString(),user_id:e,group_id:o.props.proctoring.room.group_id},(function(e,t){!1===e&&o.setState({error:{target:"main",msg:t}})})))},o.focusToggle=function(){return o.setState((function(e){return{focus_mode:!e.focus_mode}}))},o.createAttendance=function(e){var t=e.name,s=e.list,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];o.props.socket.socket.emit(H.e.CREATE_ROOM_SERVER,{candidates:s,room_id:o.props.proctoring.room.room_id,user_id:o.props.auth.user.user_id,group_id:t,stop_candidate_when_comeback:o.props.proctoring.exam_rules.stop_candidate_when_comeback,exam_id:o.props.proctoring.exam.exam_id,duration:o.props.proctoring.exam.duration,center_id:o.props.proctoring.room.center_id,district_id:o.props.proctoring.room.district_id},(function(e){var t,s;!1===e.error?(o.props.FC_RoomDetailsOnline(e.data),o.startListeningToEvents(),!0===r&&null!==(null===(t=o.props.auth.application_session)||void 0===t?void 0:t._id)&&void 0!==(null===(s=o.props.auth.application_session)||void 0===s?void 0:s._id)&&o.props.FC_CreateProctoringRoom({candidates:e.data.candidates.filter((function(e){return e.user_id!==o.props.auth.user.user_id})).map((function(e){return{user_id:e.user_id,seat_number:e.seat_number}})),application_session_id:o.props.auth.application_session._id,exam_id:e.data.exam_id,group_id:e.data.group_id,room_id:e.data.room_id,course_id:o.props.proctoring.exam.course_id},(function(e,t){!1===e&&o.setState({error:{msg:t,target:"main"}})}))):o.props.FC_RoomNotFoundOnline(e.msg)}))},o.deleteRoomHandler=function(){if(o.props.proctoring.candidates.filter((function(e){return!0===e.active})).length>=1)return window.alert("You can't delete the group while some candidates are already joined.");var e=window.prompt("Are you sure you want to delete this group??");null!==e&&o.props.socket.socket.emit(H.e.DELETE_ROOM_SERVER,{room_id:o.props.proctoring.room.room_id},(function(t){var s;!0===t?(o.leaveRoom(),o.props.FC_SaveEvent({application_session_id:null===(s=o.props.auth.application_session)||void 0===s?void 0:s._id,description:"ROOM DELETED: ".concat(e),done_by:"Supervisor",event_type_id:"DELETE GROUP ".concat(o.props.proctoring.room.room_number),exam_id:o.props.proctoring.exam.exam_id,position_id:o.props.proctoring.exam.position_id,room_id:o.props.proctoring.room.room_id,time:(new Date).toString(),user_id:o.props.auth.user.user_id,group_id:o.props.proctoring.room.group_id},(function(e,t){!1===e&&o.setState({error:{target:"main",msg:t}})}))):o.setState({error:{target:"main",msg:"Failed to delete the group"}})}))},o.addMinutesModal=function(e){return o.setState({add_minutes:Object(r.a)(Object(r.a)({},o.state.add_minutes),{},{candidate:e,minutes:0,room:!1})})},o.addMinutesHandler=function(e,t){!0===o.state.add_minutes.room&&null===o.state.add_minutes.candidate?o.addMinutesToTheRoom(e,t):o.addMinutesToCandidate(e,t)},o.addMinutesToCandidate=function(e,t){var s;if(window.confirm("Are you sure you want to add ".concat(e," to ").concat(null===(s=o.state.add_minutes.candidate)||void 0===s?void 0:s.fname,"?"))){var r,i,n,a,c,d;if(void 0===(null===(r=o.state.add_minutes.candidate)||void 0===r?void 0:r.user_id))return;!0===o.props.proctoring.exam.exam_done?(d=(new Date).toString(),c=e):(d=null===o.props.proctoring.exam.start_time?"":o.props.proctoring.exam.start_time,c=o.props.proctoring.exam.duration+e);var l={application_session_id:null===(i=o.props.auth.application_session)||void 0===i?void 0:i._id,description:"Added ".concat(e,"min"),done_by:"Supervisor",event_type_id:H.f.ADD_TIME,exam_id:o.props.proctoring.exam.exam_id,position_id:o.props.proctoring.exam.position_id,room_id:o.props.proctoring.room.room_id,time:(new Date).toString(),user_id:null===(n=o.state.add_minutes.candidate)||void 0===n?void 0:n.user_id,group_id:o.props.proctoring.room.group_id};o.props.socket.socket.emit(H.e.ADD_TIME_TO_CANDIDATE_SERVER,{start_time:d,duration:c,minutes:e},l),o.props.FC_AddMinutesToCandidate({user_id:null===(a=o.state.add_minutes.candidate)||void 0===a?void 0:a.user_id,duration:c,start_time:d}),o.props.FC_SaveEvent(l,(function(e,t){!1===e&&o.setState({error:{target:"main",msg:t}})}))}},o.addMinutesToTheRoom=function(e,t){window.confirm("Are you sure you want to add ".concat(e," to the whole room ").concat(!0===o.state.add_minutes.reset_added_minutes&&"And ignore the minutes you added to some candidates?","?"))&&o.props.proctoring.candidates.forEach((function(t){var s,r,i;!0===o.props.proctoring.exam.exam_done?(i=(new Date).toString(),r=!0===o.state.add_minutes.reset_added_minutes?e:e+t.added_minutes):(i=null===o.props.proctoring.exam.start_time?"":o.props.proctoring.exam.start_time,r=!0===o.state.add_minutes.reset_added_minutes?o.props.proctoring.exam.duration+e:o.props.proctoring.exam.duration+e+t.added_minutes);var n={application_session_id:null===(s=o.props.auth.application_session)||void 0===s?void 0:s._id,description:"Added ".concat(e,"min"),done_by:"Supervisor",event_type_id:H.f.ADD_TIME,exam_id:o.props.proctoring.exam.exam_id,position_id:o.props.proctoring.exam.position_id,room_id:o.props.proctoring.room.room_id,time:(new Date).toString(),user_id:null===t||void 0===t?void 0:t.user_id,group_id:o.props.proctoring.room.group_id};o.props.socket.socket.emit(H.e.ADD_TIME_TO_CANDIDATE_SERVER,{start_time:i,duration:r,minutes:e},n),o.props.FC_SaveEvent(n,(function(e,t){!1===e&&o.setState({error:{target:"main",msg:t}})}))}))},o.addMinutesToRoomModal=function(){return o.setState({add_minutes:Object(r.a)(Object(r.a)({},o.state.add_minutes),{},{candidate:null,minutes:0,room:!0})})},o.reset_added_minutesHandler=function(){o.setState({add_minutes:Object(r.a)(Object(r.a)({},o.state.add_minutes),{},{reset_added_minutes:!o.state.add_minutes.reset_added_minutes})})},o.backToProctoringCenter=function(){return o.props.FC_ClearProctoring()},o.micAdd=function(e){o.props.FC_AddMic(e),o.props.socket.socket.emit(H.e.HOME_PROCTORING__ADD_MIC,{room_id:o.props.proctoring.room.room_id,user_id:e})},o.micStop=function(e){o.props.FC_StopMic(e),o.props.socket.socket.emit(H.e.HOME_PROCTORING__STOP_MIC,{room_id:o.props.proctoring.room.room_id,user_id:e})},o.micOnly=function(e){o.props.FC_MicOnly(e),o.props.socket.socket.emit(H.e.HOME_PROCTORING__MIC_ONLY,{room_id:o.props.proctoring.room.room_id,user_id:e})},o.soundAdd=o.props.FC_AddSound,o.soundStop=o.props.FC_StopSound,o.soundOnly=o.props.FC_SoundOnly,o.focus=o.props.FC_FocusOnUser,o.speakToAll=function(){o.props.FC_SpeakToAll(),o.props.socket.socket.emit(H.e.HOME_PROCTORING__SPEAK_TO_ALL,o.props.proctoring.room.room_id)},o.stopSpeaking=function(){o.props.FC_StopSpeakToAll(),o.props.socket.socket.emit(H.e.HOME_PROCTORING__STOP_SPEAK_TO_ALL,o.props.proctoring.room.room_id)},o.listenAll=o.props.FC_ListenAll,o.stopListening=o.props.FC_StopListenAll,o.resetDevice=function(e){var t;window.confirm("Are you sure you want to reset the device")&&(o.props.socket.socket.emit(H.e.RESET_USER_DEVICE,{room_id:o.props.proctoring.room.room_id,user_id:e}),o.props.FC_SaveEvent({application_session_id:null===(t=o.props.auth.application_session)||void 0===t?void 0:t._id,description:"Supervisor reset the device of the candidate",done_by:"Supervisor",event_type_id:H.e.RESET_USER_DEVICE,exam_id:o.props.proctoring.exam.exam_id,position_id:o.props.proctoring.exam.position_id,room_id:o.props.proctoring.room.room_id,time:(new Date).toString(),user_id:e,group_id:o.props.proctoring.room.group_id},(function(e,t){!1===e&&o.setState({error:{target:"main",msg:"failed to save event"}})})))},o.setAiProctoring=function(e,t){var s;window.confirm("Are you sure you want to reset the device")&&(o.props.socket.socket.emit(H.e.RESET_USER_DEVICE,{room_id:o.props.proctoring.room.room_id,user_id:e}),o.props.FC_SaveEvent({application_session_id:null===(s=o.props.auth.application_session)||void 0===s?void 0:s._id,description:"Supervisor reset the device of the candidate",done_by:"Supervisor",event_type_id:H.e.RESET_USER_DEVICE,exam_id:o.props.proctoring.exam.exam_id,position_id:o.props.proctoring.exam.position_id,room_id:o.props.proctoring.room.room_id,time:(new Date).toString(),user_id:e,group_id:o.props.proctoring.room.group_id},(function(e,t){!1===e&&o.setState({error:{target:"main",msg:"failed to save event"}})})))},o.state={room_found:!1,focus_mode:!1,loading_room:!0,loading:!1,events:[],active_side_tab:T.Events,selected_candidate:null,online_room:!1,online_candidates:[],start_exam:!1,error:{msg:"",target:""},events_loading:!0,start_time:"",duration:0,add_minutes:{candidate:null,minutes:0,room:!1,reset_added_minutes:!0},popups:[]},o}return Object(a.a)(s,[{key:"render",value:function(){var e=this;if("wrong-room"===this.state.error.target)return Object(f.jsxs)("div",{className:"text-center p-8 mx-2 rounded bg-white m-6 animate__animated animate__zoomIn animate__faster",children:[Object(f.jsx)("h1",{className:"font-bold text-3xl text-red-800",children:this.state.error.msg}),Object(f.jsxs)("p",{className:"text-gray-600",children:["The you created a group which is doing another exam ",Object(f.jsx)("br",{})," Please go back the the created room"]}),Object(f.jsx)("button",{className:"btn bg-blue-500 p-2 px-3 text-white rounded hover:bg-blue-600 mt-3",onClick:this.backToProctoringCenter.bind(this),children:"Back to exams list"})]});var t=this.props.proctoring.candidates.filter((function(e){return!0===e.active&&!1===e.done})),s=this.props.proctoring.candidates.filter((function(e){return!1===e.active||!0===e.done}));if(!0===this.props.proctoring.room_not_found)return Object(f.jsx)(V,{createAttendance:this.createAttendance});var o=this.props.proctoring.candidates.filter((function(e){return!0===e.active})).length,i=this.props.proctoring.candidates.filter((function(e){return!0===e.active&&!0===e.mic})).length,n=this.props.proctoring.candidates.filter((function(e){return!0===e.active&&!0===e.audio})).length,a=0===i?"No one listening":i===o?"Speaking to the room":"Speaking to ".concat(i," candidates"),c=0===n?"Muted":n===o?"Listening to the room":"Listening to ".concat(n," candidates");return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("div",{className:"".concat(!1===this.state.focus_mode?" p-1 ":"fixed right-0 left-0 bottom-0 top-0 z-50 overflow-y-auto"," transition-all ease-in-out"),children:[(null!==this.state.add_minutes.candidate&&!1===this.state.add_minutes.room||!0===this.state.add_minutes.room&&null===this.state.add_minutes.candidate)&&0===this.state.add_minutes.minutes&&Object(f.jsx)(G,{candidate:this.state.add_minutes.candidate,close:function(){return e.setState({add_minutes:Object(r.a)(Object(r.a)({},e.state.add_minutes),{},{candidate:null,minutes:0,room:!1})})},addMinutesHandler:this.addMinutesHandler,reset_added_minutes:this.state.add_minutes.reset_added_minutes,reset_added_minutesHandler:this.reset_added_minutesHandler}),"main"===this.state.error.target&&Object(f.jsx)("div",{className:"animate__animated animate__slideInDown p-2 rounded-md animate__faster text-center text-sm bg-red-200 text-red-900",onClick:function(){return e.setState({error:{target:"",msg:""}})},children:this.state.error.msg}),Object(f.jsx)(C,{focusToggle:this.focusToggle,focus_mode:this.state.focus_mode,course_title:this.props.proctoring.exam.course_name,post_title:this.props.proctoring.exam.position_title,duration:this.props.proctoring.exam.duration,started_at:this.props.proctoring.exam.start_time,exam_start:this.props.proctoring.exam.start_exam,startExamHandler:this.startExamHandler,stopExamHandler:this.stopExamHandler,leaveRoom:this.leaveRoom,room:this.props.proctoring.room,active_candidate:o,deleteRoom:this.deleteRoomHandler,ExamDone:this.props.FC_ExamDone,exam_rules:this.props.proctoring.exam_rules,exam_done:this.props.proctoring.exam.exam_done,addMinutesToRoom:this.addMinutesToRoomModal}),Object(f.jsx)("div",{className:"".concat(!0===this.state.focus_mode?"proctoring-body-contents text-white":"","  h-screen"),children:Object(f.jsxs)("div",{className:"lg:flex",children:[Object(f.jsxs)("div",{className:"flex-1 ".concat(!0===this.props.homeProctoring?"":"pt-3"," lg:h-screen \n              \n              ").concat(!0===this.state.focus_mode?"lg:ml-2":""),children:[!0===this.props.homeProctoring&&Object(f.jsx)(B,{sound_text:a,speaker_text:c,speakToAll:this.speakToAll,stopSpeaking:this.stopSpeaking,listenAll:this.listenAll,stopListening:this.stopListening}),Object(f.jsx)("div",{className:"flex-1  overflow-y-auto",children:!1===this.props.proctoring.candidate_loaded?Object(f.jsxs)("div",{className:"p-8 text-center animate__animated animate__zoomIn",children:[Object(f.jsx)(P.a,{}),Object(f.jsx)("h2",{className:"text-xl font-bold text-gray-400",children:"Loading room details..."})]}):Object(f.jsxs)("div",{className:"animate__animated animate__zoomI",children:[Object(f.jsxs)("div",{className:"".concat(!0===this.state.focus_mode?"bg-blue-900 bg-opacity-30":"bg-gray-100"," rounded-md mb-4"),children:[Object(f.jsxs)("h3",{className:"text-2xl font-bold  pt-1.5 pb-1 px-2 rounded flex items-center ".concat(!0===this.state.focus_mode?"text-blue-100 bg-blue-900":"text-white bg-gray-500"," pb-1 mb-1"),children:[Object(f.jsx)("span",{className:"flex-1",children:"Active candidates "}),Object(f.jsx)("span",{className:"inline-block mr-1 p-0.5 bg-green-700 text-white text-md py-0 px-2 rounded-full",children:t.length})]}),0===t.length?Object(f.jsxs)("div",{className:"py-8 text-center w-full",children:[Object(f.jsx)(x.R,{className:"inline-block text-6xl"}),Object(f.jsx)("h3",{className:"text-center text-2xl font-bold",children:"No active candidates"}),Object(f.jsx)("h3",{className:"text-center text-gray-500",children:"Active candidate is any candidate who is online and still doing the exam"})]}):Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("div",{className:"grid grid-flow-row sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-2 2xl:grid-cols-2",children:this.props.proctoring.focus.map((function(t){var s=e.props.proctoring.candidates.find((function(e){return e.user_id===t&&!0===e.active}));if(void 0===s)return Object(f.jsx)("div",{children:"cand not found"});var o=e.props.proctoring.streams.find((function(e){return e.id===(null===s||void 0===s?void 0:s.stream_id)}));return void 0===s?Object(f.jsx)("div",{children:"Stream does not found"}):Object(f.jsx)(Q,{localStream:o,candidate:s,micAdd:e.micAdd,micStop:e.micStop,micOnly:e.micOnly,soundAdd:e.soundAdd,soundStop:e.soundStop,soundOnly:e.soundOnly,open:e.SelectCandidateHandler,focus:e.focus,focusCandidates:e.props.proctoring.focus},s.user_id)}))}),Object(f.jsx)("div",{className:"grid grid-flow-row sm:grid-cols-2 \n                          ".concat(!0===this.props.homeProctoring?"md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-4 2xl:grid-cols-5":"md:grid-cols-3 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-4"," gap-4 p-2"),children:t.map((function(t,s){if(!0===e.props.homeProctoring){var o=e.props.proctoring.streams.find((function(e){return e.id===t.stream_id}));return e.props.proctoring.focus.indexOf(t.user_id)>=0?null:void 0===o?Object(f.jsx)("div",{className:"w-full h-full items-center text-center",children:Object(f.jsx)("p",{children:"Failed to load the stream"})}):Object(f.jsx)(J,{localStream:o,candidate:t,micAdd:e.micAdd,micStop:e.micStop,micOnly:e.micOnly,soundAdd:e.soundAdd,soundStop:e.soundStop,soundOnly:e.soundOnly,open:e.SelectCandidateHandler,focus:e.focus},s)}return Object(f.jsx)(I,{focus_mode:e.state.focus_mode,candidate:t,stopHandler:e.stopCandidateHandler,warningHandler:e.warnCandidateHandler,detailsHandler:e.SelectCandidateHandler,continueHandler:e.continueHandler,exam_started:e.props.proctoring.exam.start_exam,exam_done:e.props.proctoring.exam.exam_done,addMinutes:e.addMinutesModal,duration:e.props.proctoring.exam.duration},s)}))})]})]}),0!==s.length&&Object(f.jsxs)("div",{className:"".concat(!0===this.state.focus_mode?"bg-blue-900 bg-opacity-30":"bg-gray-100"," rounded-md"),children:[Object(f.jsxs)("h3",{className:"text-2xl font-bold  pt-1.5 pb-1 px-2 rounded flex items-center ".concat(!0===this.state.focus_mode?"text-blue-100 bg-blue-900":"text-white bg-gray-500"," pb-1 mb-1"),children:[Object(f.jsx)("span",{className:"flex-1",children:"Others candidates "}),Object(f.jsx)("span",{className:"inline-block mr-1 p-0.5 bg-green-700 text-white text-md py-0 px-2 rounded-full",children:s.length})]}),Object(f.jsx)("div",{className:"mt-3 mx-2 pb-2",children:Object(f.jsx)(F,{candidates:s,clickHandler:this.SelectCandidateHandler,show_title:!1,focus_mode:this.state.focus_mode,large:!0})})]})]})})]}),Object(f.jsxs)("div",{className:"".concat(!0===this.state.focus_mode?"proctoring-side-section border-blue-500  border-opacity-30":"lg:bg-gray-100 "," p-2  transition-all ease-in-out  lg:h-screen overflow-y-auto lg:ml-2 lg:border-l "),children:[" ",(!0===this.props.proctoring.exam.start_exam||!0===this.props.proctoring.exam.exam_done)&&Object(f.jsx)(S,{focus_mode:this.state.focus_mode,candidates:this.props.proctoring.candidates}),null===this.state.selected_candidate?Object(f.jsxs)(b.a.Fragment,{children:[Object(f.jsxs)("div",{className:"my-2 p-1 rounded-md bg-blue-800 bg-opacity-60 grid grid-col-2 grid-flow-col gap-1",children:[Object(f.jsx)("button",{onClick:this.ActiveSIdeTabHandler.bind(this,T.Events),className:"btn rounded-md bg-blue-700 text-blue-100 ".concat(this.state.active_side_tab===T.Events?"border-2 border-blue-400":"bg-blue-800 bg-opacity-60"),children:"Event list"}),Object(f.jsx)("button",{onClick:this.ActiveSIdeTabHandler.bind(this,T.Candidates),className:"btn rounded-md bg-blue-700 text-blue-100 ".concat(this.state.active_side_tab===T.Candidates?"border-2 border-blue-400":"bg-blue-800 bg-opacity-60"),children:"Candidates"})]}),this.state.active_side_tab===T.Events?Object(f.jsx)(w,{candidates:this.props.proctoring.candidates,events:this.props.proctoring.events,focus_mode:this.state.focus_mode,loading:!1}):Object(f.jsx)(F,{candidates:this.props.proctoring.candidates,clickHandler:this.SelectCandidateHandler,focus_mode:this.state.focus_mode,show_title:!1,large:!1})]}):Object(f.jsx)(R,{candidate:this.props.proctoring.candidates.find((function(t){return t.user_id===e.state.selected_candidate})),events:this.props.proctoring.events.filter((function(t){return t.user_id===e.state.selected_candidate})),removeInExam:this.ejectCandidateHandler,homeProctoring:this.props.homeProctoring,micAdd:this.micAdd,micStop:this.micStop,micOnly:this.micOnly,soundAdd:this.soundAdd,soundStop:this.soundStop,soundOnly:this.soundOnly,focusHandler:this.focus,stopHandler:this.stopCandidateHandler,restartHandler:this.restartCandidateHandler,warnHandler:this.warnCandidateHandler,closeHandler:function(){return e.SelectCandidateHandler(null)},exam_started:this.props.proctoring.exam.start_exam,focus_mode:this.state.focus_mode,continueHandler:this.continueHandler,resetDevice:this.resetDevice,setAiProctoring:this.setAiProctoring})]})]})})]}),Object(f.jsx)("div",{className:"fixed bottom-0 right-6 z-50",children:this.state.popups.map((function(t){var s=t.icon;return Object(f.jsxs)("div",{className:"my-2 bg-red-800  w-80 border border-red-400 text-white flex rounded-lg ",children:[Object(f.jsxs)("div",{className:"p-2 flex-1 flex items-center cursor-pointer",onClick:function(){e.SelectCandidateHandler(t.user_id),e.removePopup(t.id)},children:[Object(f.jsx)("div",{className:"mr-2",children:Object(f.jsx)(s,{className:"text-4xl text-red-300"})}),Object(f.jsxs)("div",{className:"flex-1",children:[Object(f.jsx)("p",{className:"text-xs text-red-100 font-bold",children:t.type}),Object(f.jsx)("h3",{className:"text-sm my-0.5 font-bold ",children:t.username}),Object(f.jsx)("p",{className:"text-xs font-light text-gray-300",children:t.title})]})]}),Object(f.jsx)("button",{className:"hover:bg-red-300 h-auto rounded-r px-1",onClick:e.removePopup.bind(e,t.id),children:Object(f.jsx)(x.ob,{className:"text-4xl"})})]},t.id)}))})]})}}]),s}(b.a.Component),te=Object(j.b)((function(e){return{socket:e.socket,auth:e.auth,proctoring:e.proctoring}}),{FC_GetProctoringRoom:h.V,FC_SetActiveCandidates:h.ub,FC_SetOneActiveCandidate:h.wb,FC_CandidateOffline:h.v,FC_ExamStartStop:h.L,FC_ContinueExam:h.G,FC_StopCandidate:h.zb,FC_CandidateExamEvent:h.t,FC_ClearExamToRoomProctoring:h.D,FC_SaveEvent:h.tb,FC_LoadRoomEvents:h.cb,FC_CandidateRemoveExam:h.w,FC_RoomNotFoundOnline:h.sb,FC_RoomDetailsOnline:h.rb,FC_CandidateDoneExamCenter:h.r,FC_ExamDone:h.K,FC_CandidateTimeOut:h.x,FC_AddMinutesToCandidate:h.j,FC_CreateProctoringRoom:h.H,FC_ClearProctoring:h.E,FC_CloseProctoringRoom:h.F,FC_AddUserStream:h.p,FC_AddMyStream:h.k,FC_AddPeerId:h.l,FC_SpeakToAll:h.yb,FC_StopSpeakToAll:h.Db,FC_ListenAll:h.Z,FC_StopListenAll:h.Ab,FC_AddMic:h.i,FC_StopMic:h.Bb,FC_MicOnly:h.lb,FC_AddSound:h.n,FC_StopSound:h.Cb,FC_FocusOnUser:h.N,FC_SoundOnly:h.xb,FC_CandidateHandSupervisor:h.u})(ee),se=function(e){Object(c.a)(s,e);var t=Object(d.a)(s);function s(e){var o;return Object(n.a)(this,s),(o=t.call(this,e)).componentDidMount=function(){var e,t;o.props.auth.user_access.room_id.length>=3&&(""===o.props.proctoring.room.room_id&&void 0!==(null===(e=o.props.auth.application_session)||void 0===e?void 0:e._id)&&(o.setState({loading_room_details:!0}),o.props.FC_RoomDetails(o.props.auth.user_access.room_id,null===(t=o.props.auth.application_session)||void 0===t?void 0:t._id,(function(e,t){var s,r;!0===e?(o.setState({loading_room_details:!1}),void 0!==(null===(s=o.props.auth.application_session)||void 0===s?void 0:s._id)&&""!==o.props.auth.application_session._id?(o.setState({get_exams_list:!1}),o.props.FC_ExamsDetailsData(null===(r=o.props.auth.application_session)||void 0===r?void 0:r._id,(function(e,t){!1===e?o.setState({exams_error:!0,exams_error_msg:t,get_exams_list:!1}):o.setState({get_exams_list:!1})}))):o.setState({error:!0,errorMsg:"No application session found"})):o.setState({error:!0,errorMsg:t,loading_room_details:!1})}))))},o.state={error:!1,errorMsg:"",exams_error:!1,exams_error_msg:"",search_text:"",loading_room_details:!1,get_exams_list:!1},o}return Object(a.a)(s,[{key:"render",value:function(){var e=this;if(!0===this.state.error)return Object(f.jsx)("div",{className:"mt-4",children:Object(f.jsxs)("div",{className:"p-5 bg-red-100 rounded-md mx-auto text-center text-red-900 animate__animated animate__bounceIn",children:[Object(f.jsx)("h1",{className:"text-3xl font-bold",children:"Failed do load data"}),Object(f.jsx)("p",{children:this.state.errorMsg})]})});if(!1===this.state.error&&!1===this.props.proctoring.room.loaded)return Object(f.jsx)("div",{className:"m-5 text-center",children:Object(f.jsx)("h5",{className:"text-gray-400 animate__animated animate__fadeIn animate__infinite text-xl",children:"Loading room details"})});if(""!==this.props.proctoring.exam.course_id&&""!==this.props.proctoring.exam.position_id)return Object(f.jsx)(te,{homeProctoring:!1});var t,s=this.props.proctoring.room,o=s.room_number,n=s.center_name,a=s.district_name,c=s.province_name,d=[],l=this.props.proctoring.room_exams,b=Object(i.a)(l);try{var j=function(){var s=t.value,o=e.props.proctoring.exams_list.exams.find((function(e){return e.course===s.course_id}));if(void 0===o)return"continue";d.push(Object(r.a)(Object(r.a)(Object(r.a)({},o),s),{},{done_today:Object(_.m)(o.exam_date)}))};for(b.s();!(t=b.n()).done;)j()}catch(O){b.e(O)}finally{b.f()}var h=Object(g.a)(d,this.state.search_text,{course_id:!0,course_name:!0,course_code:!0});return Object(f.jsxs)(p.Fragment,{children:[Object(f.jsxs)("div",{className:"mr-2",children:[Object(f.jsxs)("div",{className:"p-5 bg-white rounded-b-md ",children:[Object(f.jsx)("h2",{className:"text-2xl text-gray-600 font-bold text-center border-b pb-2",children:"Room details"}),Object(f.jsxs)("div",{className:"flex flex-col md:flex-row",children:[Object(f.jsxs)("div",{className:"flex flex-1 items-center",children:[Object(f.jsx)("div",{className:"p-4",children:Object(f.jsx)(x.Y,{className:"text-4xl"})}),Object(f.jsxs)("div",{className:"p-2 pt-3 flex-1",children:[Object(f.jsxs)("div",{className:"mb-1",children:[Object(f.jsx)("span",{className:"text-gray-400",children:"Province:"})," ",Object(f.jsxs)("b",{children:[" ",c]})]}),Object(f.jsxs)("div",{className:"mb-1",children:[Object(f.jsx)("span",{className:"text-gray-400",children:"District:"})," ",Object(f.jsxs)("b",{children:[" ",a]})]})]})]}),Object(f.jsxs)("div",{className:"flex flex-1 items-center",children:[Object(f.jsx)("div",{className:"p-4",children:Object(f.jsx)(u.m,{className:"text-4xl"})}),Object(f.jsxs)("div",{className:"p-2 flex-1",children:[Object(f.jsxs)("div",{className:"mb-1",children:[Object(f.jsx)("span",{className:"text-gray-400",children:"Center name:"})," ",Object(f.jsxs)("b",{children:[" ",n]})]}),Object(f.jsxs)("div",{className:"mb-1",children:[Object(f.jsx)("span",{className:"text-gray-400",children:"Room Number:"})," ",Object(f.jsxs)("b",{children:[" ",o]})]})]})]})]})," "]}),!0===this.state.loading_room_details&&Object(f.jsx)("div",{className:"p-2 rounded-md text-center bg-blue-400 text-white animate__fadeIn animate__animated animate__infinite my-2",children:"Loading room details..."}),!0===this.state.get_exams_list&&Object(f.jsx)("div",{className:"p-2 rounded-md text-center bg-blue-400 text-white animate__fadeIn animate__animated animate__infinite my-2",children:"Loading exams..."}),Object(f.jsx)("h2",{className:"mt-5 text-2xl font-bold text-gray-500",children:"Active exams"}),Object(f.jsx)("div",{className:"mt-2 p-2 bg-white rounded-md",children:this.props.proctoring.room_exams.length<=0?Object(f.jsx)("div",{className:"p-5 text-center",children:"No exams assigned to this room"}):Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("div",{className:"pt-1 pb-3",children:Object(f.jsx)("input",{type:"search",onChange:function(t){return e.setState({search_text:t.target.value})},value:this.state.search_text,className:"input bg-gray-100 p-1",placeholder:"Search"})}),Object(f.jsxs)("table",{className:"w-full text-left",children:[Object(f.jsx)("thead",{className:"bg-gray-100 rounded-md",children:Object(f.jsxs)("tr",{children:[Object(f.jsx)("th",{className:"p-2",children:"#"}),Object(f.jsx)("th",{className:"p-2",children:"Course"}),Object(f.jsx)("th",{className:"p-2",children:"Position"}),Object(f.jsx)("th",{className:"p-2",children:"Code"}),Object(f.jsx)("th",{className:"p-2",children:"Date"}),Object(f.jsx)("th",{className:"p-2"})]})}),Object(f.jsxs)("tbody",{children:[0===h.length&&Object(f.jsx)("tr",{children:Object(f.jsx)("td",{colSpan:7,className:"py-6 text-center",children:Object(f.jsx)("h2",{className:"text-3xl text-gray-500",children:"No data found"})})}),h.filter((function(e){return!0===e.done_today})).map((function(t,s){return Object(f.jsxs)("tr",{className:"p-2 border-t group hover:bg-blue-50",children:[Object(f.jsx)("td",{className:"p-2 text-gray-400",children:s+1}),Object(f.jsx)("td",{className:"p-2 font-bold",children:t.course_name}),Object(f.jsx)("td",{className:"p-2",children:Object(f.jsx)("span",{className:"p-1 text-sm bg-yellow-100 font-bold text-yellow-900 rounded",children:t.position_title})}),Object(f.jsx)("td",{className:"p-2",children:t.course_code}),Object(f.jsx)("td",{className:"p-2 text-sm",children:!1===e.state.error&&!1===e.props.proctoring.exams_list.loaded?Object(f.jsx)("span",{className:"text-blue-500 animate__animated animate__fadeIn animate__infinite",children:"Loading..."}):m()(t.exam_date).format("LLLL")}),Object(f.jsx)("td",{className:"p-2 text-right",children:Object(f.jsxs)(p.Fragment,{children:[t.course_id===e.props.proctoring.exam.course_id&&t.position_id===e.props.proctoring.exam.position_id&&Object(f.jsx)("button",{className:" group-hover:bg-red-500 py-1 px-3 rounded text-red-500 group-hover:text-white bg-red-100",onClick:function(){return window.confirm("Are you sure you want to exist the room")&&e.props.FC_ClearExamToRoomProctoring()},children:"Leave Room"}),""===e.props.proctoring.exam.room_id&&Object(f.jsx)("button",{onClick:function(){var s;e.props.FC_LoadExamToRoomProctoring({video_support:!1,start_exam:!1,start_time:null===t||void 0===t?void 0:t.start_time,end_time:"",exam_done:!1,period_id:null===(s=e.props.auth.application_session)||void 0===s?void 0:s._id,exam_status:null===t||void 0===t?void 0:t.exam_status,exam_date:null===t||void 0===t?void 0:t.exam_date,duration:null===t||void 0===t?void 0:t.duration,position_id:t.position_id,position_title:t.position_title,course_id:t.course_id,course_code:t.course_code,course_name:t.course_name,room_id:e.props.proctoring.room.room_id,exam_id:t.id}),e.props.FC_AddRules(t.rules)},className:" group-hover:bg-blue-500 py-1 px-3 rounded text-blue-500 group-hover:text-white bg-blue-100",children:"Open"})]})})]},s)}))]})]})]})})]}),Object(f.jsx)("h2",{className:"mt-5 text-2xl font-bold text-gray-500",children:"Others exams on this room"}),Object(f.jsx)("div",{className:"p-2 bg-white mt-2 rounded-md",children:Object(f.jsxs)("table",{className:"w-full text-left",children:[Object(f.jsx)("thead",{className:"bg-gray-100 rounded-md",children:Object(f.jsxs)("tr",{children:[Object(f.jsx)("th",{className:"p-2",children:"#"}),Object(f.jsx)("th",{className:"p-2",children:"Course"}),Object(f.jsx)("th",{className:"p-2",children:"Position"}),Object(f.jsx)("th",{className:"p-2",children:"Code"}),Object(f.jsx)("th",{className:"p-2",children:"Date"}),Object(f.jsx)("th",{className:"p-2"})]})}),Object(f.jsxs)("tbody",{children:[0===h.length&&Object(f.jsx)("tr",{children:Object(f.jsx)("td",{colSpan:7,className:"py-6 text-center",children:Object(f.jsx)("h2",{className:"text-3xl text-gray-500",children:"No data found"})})}),h.filter((function(e){return!1===e.done_today})).map((function(t,s){return Object(f.jsxs)("tr",{className:"p-2 border-t  hover:bg-blue-50-",children:[Object(f.jsx)("td",{className:"p-2 text-gray-400",children:s+1}),Object(f.jsx)("td",{className:"p-2 font-bold",children:t.course_name}),Object(f.jsx)("td",{className:"p-2",children:Object(f.jsx)("span",{className:"p-1 text-sm bg-yellow-100 font-bold text-yellow-900 rounded",children:t.position_title})}),Object(f.jsx)("td",{className:"p-2",children:t.course_code}),Object(f.jsx)("td",{className:"p-2 text-sm",children:!1===e.state.error&&!1===e.props.proctoring.exams_list.loaded?Object(f.jsx)("span",{className:"text-blue-500 animate__animated animate__fadeIn animate__infinite",children:"Loading..."}):m()(t.exam_date).format("LLLL")}),Object(f.jsx)("td",{className:"p-2 text-right",children:t.exam_status})]},s)}))]})]})})]})}}]),s}(b.a.Component),oe=Object(j.b)((function(e){return{auth:e.auth,proctoring:e.proctoring}}),{FC_RoomDetails:h.pb,FC_ExamsDetailsData:h.M,FC_LoadExamToRoomProctoring:h.bb,FC_ClearExamToRoomProctoring:h.D,FC_AddRules:h.m})(se)},805:function(e,t,s){"use strict";s.d(t,"a",(function(){return x}));var o=s(25),r=s(24),i=s(27),n=s(26),a=s(79),c=s.n(a),d=s(4),l=s.n(d),m=s(23),p=s(9),b=s(1);c.a.tz.add("Kigali/Africa|PST PDT|80 70|0101|1Lzm0 1zb0 Op0");var u=function(e){Object(i.a)(s,e);var t=Object(n.a)(s);function s(e){var r;return Object(o.a)(this,s),(r=t.call(this,e)).interval=void 0,r.timeOutCounter=function(){r.interval=setInterval((function(){r.setCountdowm(),(r.state.hours<0||r.state.mins<0||r.state.secs<0)&&(r.props.timeout(),clearInterval(r.interval),r.setState({days:0,hours:0,mins:0,secs:0}))}),1e3)},r.state={loading:!1,days:0,hours:0,mins:0,secs:0,start_time:null,duration:0,stop_time:null,error:!1},r}return Object(r.a)(s,[{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){e.startOnlineTimer()}),1e3),this.props.socket.socket.on(p.e.ADD_TIME_TO_CANDIDATE_CLIENT,(function(t,s){s.user_id===e.props.auth.user.user_id&&e.startOnlineTimer()}))}},{key:"startOnlineTimer",value:function(){var e=this;this.props.socket.socket.emit(p.e.GET_ROOM_TIME,{user_id:this.props.auth.user.user_id,room_id:this.props.room_id},(function(t){if(null===t)return e.setState({error:!0});if(console.log({TimerCountDownResult:t}),0===t.remaining_minutes)return e.setState({days:0,hours:0,mins:0,secs:0});var s=c()().add(t.remaining_minutes,"minutes");console.log({examStopTime:s}),e.setState({stop_time:s}),e.setCountdowm(),e.timeOutCounter()}))}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"formatStyle",value:function(e){return e<=9?"0".concat(e):e+""}},{key:"setCountdowm",value:function(){var e=c()(this.state.stop_time),t=c()(),s=Object(a.duration)(e.diff(t)),o=Math.floor(s.asDays()),r=s.hours(),i=s.minutes(),n=s.seconds();this.setState({days:o,hours:r,mins:i,secs:n})}},{key:"render",value:function(){return!0===this.state.error?null:void 0===this.props.returnString||!1===this.props.returnString?Object(b.jsxs)("div",{className:"flex items-center",children:[void 0!==this.props.days&&!1!==this.props.days&&Object(b.jsxs)("div",{className:"m-0 p-0",children:[void 0!==this.props.labels&&!1!==this.props.labels&&Object(b.jsx)("span",{className:"m-0 text-xs opacity-80",children:"Days"}),Object(b.jsxs)("p",{className:"m-0  timer-count-down -mt-2",children:[this.formatStyle(this.state.days),void 0===this.props.separator?":":this.props.separator]})]}),Object(b.jsxs)("div",{children:[void 0!==this.props.labels&&!1!==this.props.labels&&Object(b.jsx)("span",{className:"m-0 text-xs opacity-80",children:"Hours"}),Object(b.jsxs)("p",{className:"m-0  timer-count-down -mt-2",children:[this.formatStyle(this.state.hours),void 0===this.props.separator?":":this.props.separator]})]}),Object(b.jsxs)("div",{children:[void 0!==this.props.labels&&!1!==this.props.labels&&Object(b.jsx)("span",{className:"m-0 text-xs opacity-80",children:"Min"}),Object(b.jsxs)("p",{className:"m-0  timer-count-down -mt-2",children:[this.formatStyle(this.state.mins),void 0===this.props.separator?":":this.props.separator]})]}),Object(b.jsxs)("div",{children:[void 0!==this.props.labels&&!1!==this.props.labels&&Object(b.jsx)("span",{className:"m-0 text-xs opacity-80",children:"Sec"}),Object(b.jsx)("p",{className:"m-0  timer-count-down -mt-2",children:this.formatStyle(this.state.secs)})]})]}):Object(b.jsxs)("span",{className:"timer-count-down",children:[(void 0!==this.props.days||!1!==this.props.days)&&Object(b.jsxs)("span",{children:[this.formatStyle(this.state.days),void 0===this.props.separator?":":this.props.separator]}),Object(b.jsx)("span",{children:this.formatStyle(this.state.hours)}),void 0===this.props.separator?":":this.props.separator,Object(b.jsx)("span",{children:this.formatStyle(this.state.mins)}),void 0===this.props.separator?":":this.props.separator,Object(b.jsx)("span",{children:this.formatStyle(this.state.secs)})]})}}]),s}(l.a.Component),x=Object(m.b)((function(e){return{auth:e.auth,socket:e.socket,proctoring:e.proctoring}}),{})(u)},924:function(e,t,s){"use strict";var o,r=new Uint8Array(16);function i(){if(!o&&!(o="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return o(r)}var n=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var a=function(e){return"string"===typeof e&&n.test(e)},c=[],d=0;d<256;++d)c.push((d+256).toString(16).substr(1));var l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=(c[e[t+0]]+c[e[t+1]]+c[e[t+2]]+c[e[t+3]]+"-"+c[e[t+4]]+c[e[t+5]]+"-"+c[e[t+6]]+c[e[t+7]]+"-"+c[e[t+8]]+c[e[t+9]]+"-"+c[e[t+10]]+c[e[t+11]]+c[e[t+12]]+c[e[t+13]]+c[e[t+14]]+c[e[t+15]]).toLowerCase();if(!a(s))throw TypeError("Stringified UUID is invalid");return s};t.a=function(e,t,s){var o=(e=e||{}).random||(e.rng||i)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t){s=s||0;for(var r=0;r<16;++r)t[s+r]=o[r];return t}return l(o)}}}]);
//# sourceMappingURL=43.d2363193.chunk.js.map