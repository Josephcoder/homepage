(this["webpackJsonpreact-redux-typescript-advance"]=this["webpackJsonpreact-redux-typescript-advance"]||[]).push([[47],{199:function(e,t,s){"use strict";var c=s(14),a=s(4),l=s(85),r=s(10),n=s(1);t.a=function(e){var t,s,o=e.tableId&&"myTable"!==e.tableId?e.tableId:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t="",s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",c=s.length,a=0;a<e;a++)t+=s.charAt(Math.floor(Math.random()*c));return t}(),i=Object(a.useState)(0),d=Object(c.a)(i,2),u=d[0],m=d[1],x=Object(a.useState)(1),b=Object(c.a)(x,2),j=b[0],h=b[1],p=Object(a.useState)(1),f=Object(c.a)(p,2),g=f[0],O=f[1],N=Object(a.useState)(),v=Object(c.a)(N,2),y=v[0],R=v[1],w=Object(a.useState)(10),T=Object(c.a)(w,2),_=T[0],k=T[1],S=Object(a.useState)(0),A=Object(c.a)(S,2),C=A[0],q=A[1],E=Object(a.useState)(0),M=Object(c.a)(E,2),I=M[0],B=M[1];Object(a.useEffect)((function(){e.pagination&&L()}));var L=function(){t=document.getElementById(o),s=t.getElementsByTagName("tr"),m(s.length),h(Math.ceil(u/_)),q((g-1)*_),B(Math.min(C+_-1,u-1));var e=Array.from(Array(j+1-1).keys()).map((function(e){return 1+e}));y&&e.length===y.length||R(e);for(var c=0;c<s.length;c++)s[c].style.display=c>=C&&c<=I?"":"none"};return Object(n.jsxs)("div",{className:"".concat(e.tableSize," overflow-x-auto"),children:[e.search&&Object(n.jsx)("div",{className:"".concat(e.searchBG," w-full mb-2"),children:e.search&&Object(n.jsxs)("div",{className:"bg-white rounded flex items-center w-full p-2 border-2 border-gray-500",children:[Object(n.jsx)(r.zb,{className:"h-5 w-5 fill-current text-gray-400"}),Object(n.jsx)("input",{type:"search",placeholder:"search",onChange:function(s){return function(s,c){var a,l,r,n,i;for("field"===c&&"all"===s&&(s=""),a=s.toLowerCase(),l=(t=document.getElementById(o)).getElementsByTagName("tr"),n=0;n<l.length;n++)for(i=0;i<e.columns.length;i++)if(r=l[n].getElementsByTagName("td")[i]){if((r.textContent||r.innerText).toLowerCase().indexOf(a)>-1){l[n].style.display="";break}l[n].style.display="none"}}(s.target.value)},className:"w-full h-6 pl-4 text-sm outline-none focus:outline-none bg-white",disabled:e.loading}),e.pagination&&Object(n.jsx)("div",{className:"select",children:Object(n.jsxs)("select",{className:"text-base outline-none focus:outline-none bg-white",onChange:function(e){return k(Number(e.target.value))},disabled:e.loading,children:[Object(n.jsx)("option",{value:"10",children:"10"}),Object(n.jsx)("option",{value:"25",children:"25"}),Object(n.jsx)("option",{value:"50",children:"50"}),Object(n.jsx)("option",{value:"100",children:"100"})]})})]})}),Object(n.jsxs)("div",{className:"overflow-x-auto w-full",children:[Object(n.jsxs)("table",{className:e.tableClass?e.tableClass:"w-full shadow ".concat(e.rounded&&"sm:rounded-lg"," table-auto order-table"),id:o,children:[!e.hideColumns&&Object(n.jsx)("thead",{className:"bg-white border-b-2 border-gray-300 text-gray-600 font-bold text-base",children:Object(n.jsx)("tr",{className:"text-left tracking-wide bg-".concat(e.thColor,"-100 border-b-2 border-").concat(e.thColor,"-500 text-").concat(e.thColor,"-600"),children:e.columns.map((function(e,t){return Object(n.jsx)("th",{className:"".concat(e.padding," text-").concat(e.alignText," px-3 py-2 ").concat(e.isSortAllowed&&"cursor-pointer"),onClick:function(){return e.isSortAllowed&&function(e){var t,s,c,a,l,r,n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"asc",d=0;if(c=!0,t=document.getElementById(e))for(;c;){for(c=!1,s=t.rows,a=1;a<s.length-1;a++)if(n=!1,l=s[a].getElementsByTagName("TD")[o],r=s[a+1].getElementsByTagName("TD")[o],"asc"===i&&l&&r){if(l.innerHTML.toLowerCase()>r.innerHTML.toLowerCase()){n=!0;break}}else if("desc"===i&&l&&r&&l.innerHTML.toLowerCase()<r.innerHTML.toLowerCase()){n=!0;break}n&&s[a].parentNode?(s[a].parentNode.insertBefore(s[a+1],s[a]),c=!0,d++):0===d&&"asc"===i&&(i="desc",c=!0)}}(o,t)},children:Object(n.jsxs)("div",{className:"flex items-center gap-1",children:[e.columnTitle,e.isSortAllowed&&Object(n.jsx)(l.i,{})]})},t)}))})}),Object(n.jsx)("tbody",{id:"table-data",className:"bg-white text-black text-base",children:e.rows()})]}),e.pagination&&Object(n.jsxs)("div",{className:"sm:flex-1 sm:flex sm:items-center sm:justify-between mt-4 work-sans",children:[Object(n.jsx)("div",{children:Object(n.jsxs)("span",{className:"text-xs xs:text-sm text-gray-900",children:["Showing 1 to ",_," of ",u-1," Entries"]})}),Object(n.jsx)("div",{children:Object(n.jsxs)("nav",{className:"inline-flex shadow-sm",children:[Object(n.jsx)("div",{children:Object(n.jsx)("button",{type:"button",className:"inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 text-sm font-medium text-gray-500 ".concat(1!==g&&"bg-white"),"aria-label":"Previous",disabled:1===g||e.loading,onClick:function(){return O(g-1)},children:Object(n.jsx)(r.fb,{className:"h-5 w-5"})})}),Object(n.jsx)("div",{children:y&&y.map((function(t,s){return Object(n.jsx)("button",{className:"-ml-px inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium text-gray-700 ".concat(t!==g?"bg-white":"bg-gray-100 cursor-default"),disabled:t===g||e.loading,onClick:function(){return O(t)},children:t},s)}))}),Object(n.jsx)("div",{children:Object(n.jsx)("button",{type:"button",className:"inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 text-sm leading-5 font-medium text-gray-500 ".concat(g!==j&&"bg-white"),"aria-label":"Next",disabled:g===j||e.loading,onClick:function(){return O(g+1)},children:Object(n.jsx)(r.gb,{className:"h-5 w-5"})})})]})})]})]})]})}},200:function(e,t,s){"use strict";s.d(t,"b",(function(){return b})),s.d(t,"a",(function(){return j}));var c=s(21),a=s(20),l=s(23),r=s(22),n=s(4),o=s.n(n),i=s(17),d=s(3),u=s(10),m=s(1),x=function(e){Object(l.a)(s,e);var t=Object(r.a)(s);function s(e){var a;return Object(c.a)(this,s),(a=t.call(this,e)).componentDidMount=function(){return a.props.PageHasSubNav(!0)},a.componentWillUnmount=function(){return a.props.PageHasSubNav(!1)},a.state={loading:!1},a}return Object(a.a)(s,[{key:"render",value:function(){if(!1===this.props.auth.isAuthenticated)return null;var e=this.props.system.navigation;return Object(m.jsx)("div",{className:"fixed w-48 p-1 pr-2 pl-6 text-gray-700 bg-white ".concat(!0===e?"lg:left-16  left-16":" -left-72 lg:left-16","  top-0 bottom-0 pt-20 z-30 shadow-lg  transition-all duration-500 ease-in-out overflow-y-auto"),children:this.props.children})}}]),s}(o.a.Component),b=Object(i.b)((function(e){return{auth:e.auth,system:e.system}}),{NavToogle:d.rb,PageHasSubNav:d.sb})(x),j=function(e){var t=e.title,s=void 0===t?"":t,c=e.icon,a=void 0===c?u.m:c,l=e.active,r=void 0!==l&&l,n=e.count,o=void 0===n?0:n,i=a;return Object(m.jsxs)("section",{className:"".concat(!0===r?"bg-blue-500 text-white font-bold":"bg-blue-100 text-blue-800"," mb-1 hover:font-bold py-1 hover:bg-blue-400 hover:text-white --font-bold  px-2 rounded-md flex cursor-pointer items-center"),children:[Object(m.jsxs)("section",{className:"flex-1",children:[Object(m.jsx)(i,{className:"inline-block mr-1 text-xs"}),Object(m.jsx)("span",{children:s})]}),o>0?Object(m.jsx)("span",{className:"px-0.5 my-1 text-xs bg-blue-600 text-white rounded-full",children:o}):null]})}},208:function(e,t,s){"use strict";s.d(t,"e",(function(){return m})),s.d(t,"c",(function(){return x})),s.d(t,"a",(function(){return b})),s.d(t,"d",(function(){return j})),s.d(t,"b",(function(){return h})),s.d(t,"f",(function(){return p}));var c=s(5),a=s.n(c),l=s(7),r=s(8),n=s.n(r),o=s(6),i=s(9),d=s(13),u=s(12),m=function(e){return function(){var t=Object(l.a)(a.a.mark((function t(s){var c;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(!0,""),t.prev=1,Object(d.b)(),t.next=5,n.a.get("".concat(i.a.AUTH,"/settings"));case 5:c=t.sent,s({type:o.a.GET_SYSTEM_SETTINGS,payload:c.data}),e(!1,""),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(1),console.log({code_error:t.t0}),e(!1,Object(u.a)(t.t0));case 14:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}()},x=function(e){return function(){var t=Object(l.a)(a.a.mark((function t(s){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s({type:o.a.DISABLE_SYSTEM_SETTINGS,payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},b=function(e){return function(){var t=Object(l.a)(a.a.mark((function t(s){var c,l;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(!0,""),t.prev=1,Object(d.b)(),t.next=5,n.a.get("".concat(i.a.AUTH,"/allroleaccess"));case 5:c=t.sent,l=c.data.map((function(e){return{id:e.id,task:e.title,key:e.key,permitted:e.permitted}})),s({type:o.a.GET_TASK_ACCESS,payload:l}),e(!1,"",l),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(1),console.log({code_error:t.t0}),e(!1,Object(u.a)(t.t0));case 15:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e){return t.apply(this,arguments)}}()},j=function(e){return function(){var t=Object(l.a)(a.a.mark((function t(s){var c;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(!0,""),t.prev=1,Object(d.b)(),t.next=5,n.a.get("".concat(i.a.APPLICATION,"/position"));case 5:c=t.sent,s({type:o.a.GET_POSTIONS,payload:c.data}),e(!1,""),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(1),console.log({code_error:t.t0}),e(!1,Object(u.a)(t.t0));case 14:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}()},h=function(e){return console.log({deletePosition:e}),function(){var t=Object(l.a)(a.a.mark((function t(s){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s({type:o.a.DELETE_POSITION,payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},p=function(e){return function(){var t=Object(l.a)(a.a.mark((function t(s){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s({type:o.a.PUBLISH_POSITION,payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},862:function(e,t,s){"use strict";s.r(t),s.d(t,"AccessManagement",(function(){return D}));var c,a=s(14),l=s(4),r=s(10),n=s(17),o=s(11),i=s(5),d=s.n(i),u=s(7),m=s(21),x=s(20),b=s(23),j=s(22),h=s(8),p=s.n(h),f=s(229),g=s(3),O=s(208),N=s(27),v=s(19),y=s(199),R=s(30),w=s(196),T=s(9),_=s(12),k=s(1),S=function(e){var t=e.handleSubmit,s=e.setRoleTitle,c=e.roleTitle,a=e.roleRequirement,l=e.setRequirement,r=e.error,n=e.setError;return Object(k.jsx)("div",{children:Object(k.jsxs)("form",{className:"max-w-xl mx-auto",onSubmit:function(e){return t(e,1)},children:[Object(k.jsx)("h1",{className:"text-3xl font-semibold mt-3 mb-5 text-center",children:"Basic Information"}),Object(k.jsx)("div",{className:"-mx-3 md:flex mb-6",children:Object(k.jsxs)("div",{className:"md:w-full px-3",children:[Object(k.jsx)("label",{htmlFor:"role-title",className:"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2",children:"Role"}),Object(k.jsx)("input",{type:"text",className:"text-left input-white w-20 inline-block border-2 ".concat("role-title"===r.element?"border-red-500":"border-gray-500"),value:c,placeholder:"Role title",onChange:function(e){s(e.target.value),n({element:"",msg:""})}}),Object(k.jsx)("p",{className:"text-red-700 mt-1 ml-1 text-sm italic ".concat("role-title"!==r.element&&"hidden"),children:r.msg})]})}),Object(k.jsxs)("div",{className:"flex flex-col mb-5",children:[Object(k.jsx)("label",{children:"Field"}),Object(k.jsx)("span",{className:"text-gray-500 text-sm",children:"Required Field for this role"}),Object(k.jsxs)("div",{className:"grid grid-flow-row grid-cols-3 sm:grid-cols-4 md:grid-cols-5 grid-rows- gap-4",children:[Object(k.jsxs)("label",{className:"inline-flex items-center mt-3",children:[Object(k.jsx)("input",{type:"radio",name:"field",className:"form-radio h-5 w-5 text-gray-600",onChange:function(){return l("institute")},checked:"institute"===a}),Object(k.jsx)("span",{className:"ml-2 text-gray-700",children:"Institue"})]}),Object(k.jsxs)("label",{className:"inline-flex items-center mt-3",children:[Object(k.jsx)("input",{type:"radio",name:"field",className:"form-radio h-5 w-5 text-gray-600",onChange:function(){return l("district")},checked:"district"===a}),Object(k.jsx)("span",{className:"ml-2 text-gray-700",children:"District"})]}),Object(k.jsxs)("label",{className:"inline-flex items-center mt-3",children:[Object(k.jsx)("input",{type:"radio",name:"field",className:"form-radio h-5 w-5 text-gray-600",onChange:function(){return l("school")},checked:"school"===a}),Object(k.jsx)("span",{className:"ml-2 text-gray-700",children:"School"})]}),Object(k.jsxs)("label",{className:"inline-flex items-center mt-3",children:[Object(k.jsx)("input",{type:"radio",name:"field",className:"form-radio h-5 w-5 text-gray-600",onChange:function(){return l("room")},checked:"room"===a}),Object(k.jsx)("span",{className:"ml-2 text-gray-700",children:"Room"})]}),Object(k.jsxs)("label",{className:"inline-flex items-center mt-3",children:[Object(k.jsx)("input",{type:"radio",name:"field",className:"form-radio h-5 w-5 text-gray-600",onChange:function(){l("none"),n({element:"",msg:""})},checked:"none"===a}),Object(k.jsx)("span",{className:"ml-2 text-gray-700",children:"None of the above"})]})]}),Object(k.jsx)("p",{className:"text-red-700 mt-1 ml-1 text-xs italic ".concat("role-field"!==r.element&&"hidden"),children:r.msg})]}),Object(k.jsx)("div",{className:"flex justify-end gap-5 mt-4",children:Object(k.jsx)("button",{className:"btn bg-primary text-white hover:bg-blue-600 focus:outline-none",type:"submit",children:"Save & Continue"})})]})})},A=s(268),C=s(55),q=(C.a.do_exam,C.a.APPLICATION_OVERRIDE,C.a.CLAIM_VALIDATION,C.a.DOCUMENT_CHECKING,C.a.LOCATION_MANAGEMENT,C.a.POST_APPROVAL,C.a.POST_REQUEST,C.a.PREPARE_EXAM,C.a.PROCTORING_ROOM,C.a.QUESTION_BANK,C.a.SCHOOL_MANAGEMENT,C.a.SYSTEM_SETTINGS,C.a.USER_MANAGEMENT,C.a.admin,function(e){var t=function(t,s,c){var a=e.accessToRole;switch(s){case"create":a[t].permitted.create=c;break;case"view":a[t].permitted.view=c;break;case"update":a[t].permitted.update=c;break;default:a[t].permitted.delete=c}e.setAccessToRole(a)};return Object(k.jsx)("div",{children:Object(k.jsx)("form",{className:"max-w-xl mx-auto",onSubmit:function(t){return e.handleSubmit(t,2)},children:Object(k.jsxs)("div",{className:"mb-5",children:[Object(k.jsxs)("div",{className:"mb-5 mt-3",children:[Object(k.jsx)("h1",{className:"text-3xl font-semibold text-center",children:"Access Permissions Settings"}),Object(k.jsxs)("div",{className:"flex items-center gap-2 mt-1 justify-center",children:[Object(k.jsx)(r.g,{className:"w-6 h-6"}),Object(k.jsx)("h1",{className:"text-xl font-semibold text-gray-600 text-center",children:e.roleTitle})]})]}),Object(k.jsx)("div",{className:"md:flex mb-3",children:Object(k.jsxs)("div",{className:"grid grid-cols-2 grid-rows-2 gap-4",children:[Object(k.jsxs)("div",{className:"inline-flex gap-2 items-center",children:[Object(k.jsx)(A.a,{className:"w-12 h-12 text-gray-600"}),Object(k.jsxs)("div",{className:"flex flex-col",children:[Object(k.jsx)("h3",{className:"font-semibold text-xl",children:"Create"}),Object(k.jsx)("span",{className:"text-gray-600 text-sm md:pr-1",children:"This permission gives the user the ability to create"})]})]}),Object(k.jsxs)("div",{className:"inline-flex gap-2 items-center",children:[Object(k.jsx)(r.tb,{className:"w-12 h-12 text-gray-600"}),Object(k.jsxs)("div",{className:"flex flex-col",children:[Object(k.jsx)("h3",{className:"font-semibold text-xl",children:"View"}),Object(k.jsx)("span",{className:"text-gray-600 text-sm md:pr-1",children:"This permission gives the user the ability to view"})]})]}),Object(k.jsxs)("div",{className:"inline-flex gap-2 items-center",children:[Object(k.jsx)(r.D,{className:"w-12 h-12 text-gray-600"}),Object(k.jsxs)("div",{className:"flex flex-col",children:[Object(k.jsx)("h3",{className:"font-semibold text-xl",children:"Update"}),Object(k.jsx)("span",{className:"text-gray-600 text-sm md:pr-1",children:"This permission gives the user the ability to update"})]})]}),Object(k.jsxs)("div",{className:"inline-flex gap-2 items-center",children:[Object(k.jsx)(r.B,{className:"w-12 h-12 text-gray-600"}),Object(k.jsxs)("div",{className:"flex flex-col",children:[Object(k.jsx)("h3",{className:"font-semibold text-xl",children:"Delete"}),Object(k.jsx)("span",{className:"text-gray-600 text-sm md:pr-1",children:"This permission gives the user the ability to delete"})]})]})]})}),Object(k.jsx)("p",{className:"text-red-700 mt-1 ml-1 text-base italic ".concat("role-access"!==e.error.element&&"hidden"),children:e.error.msg}),Object(k.jsx)(y.a,{columns:[{columnTitle:"Access Name",alignText:"left",padding:"p-3"},{columnTitle:"Create",alignText:"left"},{columnTitle:"View",alignText:"left"},{columnTitle:"Update",alignText:"left"},{columnTitle:"Delete",alignText:"left"}],rows:function(){return e.accessToRole.map((function(s,c){return Object(k.jsxs)("tr",{className:"accordion border-b border-grey-light hover:bg-gray-100",children:[Object(k.jsx)("td",{className:"text-gray-800 text-base font-medium text-left px-3",children:s.task}),Object(k.jsx)("td",{className:"py-1 px-3",children:Object(k.jsx)("input",{type:"checkbox",className:"form-checkbox h-5 w-5 text-gray-600",onChange:function(){t(c,"create",!s.permitted.create),e.setError({element:"",msg:""})},checked:s.permitted.create})}),Object(k.jsx)("td",{className:"py-1 px-3",children:Object(k.jsx)("input",{type:"checkbox",className:"form-checkbox h-5 w-5 text-gray-600",onChange:function(){t(c,"view",!s.permitted.view),e.setError({element:"",msg:""})},checked:s.permitted.view})}),Object(k.jsx)("td",{className:"py-1 px-3",children:Object(k.jsx)("input",{type:"checkbox",className:"form-checkbox h-5 w-5 text-gray-600",onChange:function(){t(c,"update",!s.permitted.update),e.setError({element:"",msg:""})},checked:s.permitted.update})}),Object(k.jsx)("td",{className:"py-1 px-3",children:Object(k.jsx)("input",{type:"checkbox",className:"form-checkbox h-5 w-5 text-gray-600",onChange:function(){t(c,"delete",!s.permitted.delete),e.setError({element:"",msg:""})},checked:s.permitted.delete})})]},s.id+c)}))},pagination:!1,search:!0,thColor:"gray"}),Object(k.jsx)("div",{className:"flex justify-end gap-5 mt-4",children:Object(k.jsx)("button",{className:"btn bg-primary text-white hover:bg-blue-600 focus:outline-none",type:"submit",disabled:e.loadingRequest,children:!0===e.loadingRequest?"Saving...":"Complete"})})]})})})});!function(e){e[e.Add_Role_Access=0]="Add_Role_Access",e[e.Update_Role_Access=1]="Update_Role_Access",e[e.Close_Modal=2]="Close_Modal"}(c||(c={}));var E,M=function(e){Object(b.a)(s,e);var t=Object(j.a)(s);function s(e){var a;return Object(m.a)(this,s),(a=t.call(this,e)).setViewRole=function(e){a.setState({viewRole:e})},a.setLoadingRequest=function(e){a.setState({loadingRequest:e})},a.setLoading=function(e){a.setState({loading:e})},a.setRoleId=function(e){a.setState({roleId:e})},a.setRoleTitle=function(e){a.setState({roleTitle:e})},a.setRequirement=function(e){a.setState({roleRequirement:e})},a.setStepStatus=function(e){a.setState({stepsStatus:e})},a.setAccessToRole=function(e){a.setState({accessToRole:e})},a.setOpenModal=function(e){a.setState({openModal:e})},a.setError=function(e){a.setState({error:e})},a.setFeedBack=function(e){a.setState({feedBack:e})},a.setRoleSelected=function(e){a.setState({roleSelected:e})},a.whichLevel=function(e){return e.district_required?"District":e.room_required?"Room":e.school_required?"School":e.education_institution_required?"Institute":"None"},a.userRows=function(){var e=a.loadCurrentRoles(a.props.access.accessRoles).map((function(e,t){return Object(k.jsxs)("tr",{className:"accordion border-b border-grey-light hover:bg-gray-100 group ".concat(a.state.roleId===e.system_user_role_id&&"bg-gray-100"),children:[Object(k.jsx)("td",{className:"px-3 py-3 text-left",children:t+1}),Object(k.jsx)("td",{className:"text-gray-800 text-base font-medium text-left px-3",children:e.role}),Object(k.jsx)("td",{className:"text-gray-800 text-base text-left px-3",children:a.whichLevel(e)}),Object(k.jsx)("td",{className:"text-right",children:Object(k.jsxs)("div",{className:"inline-flex",children:[Object(k.jsxs)("button",{className:"btn bg-gray-300 text-gray-900 group-hover:bg-gray-600 group-hover:text-white inline-flex mr-1 focus:outline-none",onClick:function(){a.setViewRole(!0),a.setRoleId(e.system_user_role_id),a.setRoleSelected(e),a.setRoleTitle(e.role),a.setRequirement(e.district_required?"district":e.school_required?"school":e.room_required?"room":"none"),a.setAccessToRole(a.CustomizeAccess(e.access))},disabled:a.state.roleId===e.system_user_role_id,children:[Object(k.jsx)(f.b,{className:"h-5 w-5 mr-1"}),Object(k.jsx)("span",{children:"Access"})]}),Object(k.jsxs)("button",{className:"btn bg-blue-500 text-white hover:bg-blue-700 inline-flex mr-1 focus:outline-none",onClick:function(){a.setRoleId(e.system_user_role_id),a.setRoleTitle(e.role),a.setFeedBack({type:"",message:""}),a.setOpenModal(c.Update_Role_Access),a.setAccessToRole(a.CustomizeAccess(e.access))},disabled:a.state.roleId===e.system_user_role_id&&a.state.openModal!==c.Close_Modal,children:[Object(k.jsx)(r.D,{className:"h-5 w-5 mr-1"}),Object(k.jsx)("span",{children:"Edit"})]})]})})]},t)}));return e.length>=1?e:Object(k.jsx)("tr",{className:"accordion border-b border-grey-light hover:bg-gray-100",children:Object(k.jsx)("td",{className:"text-gray-500 text-sm font-medium text-center px-3",colSpan:3,children:"No Data Found"})})},a.typeRows=function(){var e=a.props.access.accessRoles.filter((function(e){return e.system_user_role_id===a.state.roleId}))[0].access.map((function(e,t){return Object(k.jsxs)("tr",{className:"accordion border-b border-grey-light hover:bg-gray-100",children:[Object(k.jsx)("td",{className:"text-gray-800 text-xl font-medium text-left px-3 py-2",children:e.task}),Object(k.jsx)("td",{className:"px-2",children:Object(k.jsxs)("div",{className:"inline-flex items-center text-xl ".concat(e.permitted.create?"text-green-700":"text-red-700"),children:[e.permitted.create?Object(k.jsx)(f.a,{}):Object(k.jsx)(r.O,{}),e.permitted.create?" Yes":"No"]})}),Object(k.jsx)("td",{className:"px-2",children:Object(k.jsxs)("div",{className:"inline-flex items-center text-xl ".concat(e.permitted.view?"text-green-700":"text-red-700"),children:[e.permitted.view?Object(k.jsx)(f.a,{}):Object(k.jsx)(r.O,{}),e.permitted.view?" Yes":"No"]})}),Object(k.jsx)("td",{className:"px-2",children:Object(k.jsxs)("div",{className:"inline-flex items-center text-xl ".concat(e.permitted.update?"text-green-700":"text-red-700"),children:[e.permitted.update?Object(k.jsx)(f.a,{}):Object(k.jsx)(r.O,{}),e.permitted.update?" Yes":"No"]})}),Object(k.jsx)("td",{className:"px-2",children:Object(k.jsxs)("div",{className:"inline-flex items-center text-xl ".concat(e.permitted.delete?"text-green-700":"text-red-700"),children:[e.permitted.delete?Object(k.jsx)(f.a,{}):Object(k.jsx)(r.O,{}),e.permitted.delete?" Yes":"No"]})})]},t)}));return e.length>=1?e:Object(k.jsx)("tr",{className:"accordion border-b border-grey-light hover:bg-gray-100",children:Object(k.jsx)("td",{className:"text-gray-500 text-sm font-medium text-center px-3",colSpan:4,children:"No Tasks assigned to this Role"})})},a.CustomizeAccess=function(e){if(!a.props.accessTasks)return[];var t,s=[];return a.props.accessTasks.forEach((function(c,a){(t=e.find((function(e){return e.key===c.key})))?s.push(t):s.push(c)})),s},a.componentDidMount=function(){(a.state.loading||null===a.props.accessTasks)&&a.props.GetTaskAccess((function(e,t){a.setLoading(e),e||Object(w.f)(t)||a.props.PushPopupAlert({title:t,theme:R.a.danger})}))},a.handleSteps=function(e){if(2===e){if(!a.state.roleTitle.length)return a.setError({element:"role-title",msg:"Role Title is required"});a.state.roleRequirement.length||a.setRequirement("none"),a.setStepStatus({stepOne:!0,stepTwo:!1})}else a.setStepStatus({stepOne:!1,stepTwo:!1})},a.handleSubmit=function(){var e=Object(u.a)(d.a.mark((function e(t,s){var l,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a.setFeedBack({type:"",message:""}),a.setError({element:"",msg:""}),a.setLoadingRequest(!0),1!==s){e.next=9;break}if(a.state.roleTitle.length){e.next=7;break}return e.abrupt("return",a.setError({element:"role-title",msg:"Role Title is required"}));case 7:a.state.roleRequirement.length||a.setRequirement("none"),a.setStepStatus({stepOne:!0,stepTwo:!1});case 9:if(2!==s){e.next=37;break}if(!a.state.accessToRole||a.state.accessToRole.some((function(e){return!0===e.permitted.create||!0===e.permitted.view||!0===e.permitted.update||!0===e.permitted.delete}))){e.next=12;break}return e.abrupt("return",a.setError({element:"role-access",msg:"At least one permission is required"}));case 12:if(e.prev=12,a.state.openModal!==c.Add_Role_Access){e.next=23;break}return e.next=16,p.a.post("".concat(T.a.AUTH,"/role"),{role:a.state.roleTitle,status:!0,district_required:"district"===a.state.roleRequirement,school_required:"school"===a.state.roleRequirement,room_required:"room"===a.state.roleRequirement,education_institution_required:"institute"===a.state.roleRequirement,access:a.state.accessToRole});case 16:(l=e.sent)&&a.props.createAccessRoles(l.data.data),a.setLoadingRequest(!1),a.cleanAndCloseModal(),a.setFeedBack({type:"success",message:"Role has been successfully created."}),e.next=31;break;case 23:return e.next=25,p.a.patch("".concat(T.a.AUTH,"/role"),{role:a.state.roleTitle,status:!0,district_required:"district"===a.state.roleRequirement,school_required:"school"===a.state.roleRequirement,room_required:"room"===a.state.roleRequirement,access:a.state.accessToRole,system_user_role_id:a.state.roleId});case 25:r=e.sent,console.log(r.data),r&&a.props.updateAccessRoles(r.data.data),a.setLoadingRequest(!1),a.cleanAndCloseModal(),a.setFeedBack({type:"success",message:"Role has been successfully updated."});case 31:e.next=37;break;case 33:e.prev=33,e.t0=e.catch(12),console.log({role_error:e.t0}),a.setFeedBack({type:"danger",message:Object(_.a)(e.t0)});case 37:a.setLoadingRequest(!1);case 38:case"end":return e.stop()}}),e,null,[[12,33]])})));return function(t,s){return e.apply(this,arguments)}}(),a.loadCurrentRoles=function(e){return"all"!==a.props.filterStatus?e.filter((function(e){return e.status===a.props.filterStatus})):e},a.changeViewRole=function(e){var t=a.props.access.accessRoles.filter((function(t){return t.system_user_role_id===e}))[0];a.setViewRole(!0),a.setRoleId(t.system_user_role_id),a.setRoleSelected(t),a.setRoleTitle(t.role),a.setRequirement(t.district_required?"district":t.school_required?"school":t.room_required?"room":"none"),a.setAccessToRole(a.CustomizeAccess(t.access))},a.cleanAndCloseModal=function(){a.setStepStatus({stepOne:!1,stepTwo:!1}),a.state.openModal!==c.Update_Role_Access&&(a.setRequirement("none"),a.setRoleTitle(""),a.setRoleId("")),a.setLoadingRequest(!1),a.setFeedBack({type:"",message:""}),a.props.accessTasks?a.setAccessToRole(Object(o.a)(a.props.accessTasks)):a.setAccessToRole([]),a.setRoleSelected(null),a.setError({element:"",msg:""}),a.state.openModal===c.Update_Role_Access&&a.setOpenModal(c.Close_Modal)},a.assignAccess=function(){},a.state={roleId:"",roleTitle:"",roleRequirement:"none",stepsStatus:{stepOne:!1,stepTwo:!1},accessToRole:[],openModal:c.Close_Modal,error:{element:"",msg:""},feedBack:{type:"",message:""},loadingRequest:!1,loading:!0,viewRole:!1,roleSelected:null},a}return Object(x.a)(s,[{key:"render",value:function(){var e,t,s,a=this;return null===this.props.accessTasks||this.state.loading?Object(k.jsx)(N.a,{}):Object(k.jsxs)("div",{className:"w-full",children:[this.state.feedBack&&""!==this.state.feedBack.type&&this.state.openModal===c.Close_Modal&&Object(k.jsx)("div",{className:"w-full overflow-x-hidden",children:Object(k.jsxs)("div",{className:"alert-".concat(this.state.feedBack.type," flex flex-row items-center relative my-2 animate__animated animate__fadeInRight"),children:[Object(k.jsx)("span",{className:"absolute top-0 bottom-0 right-0 px-4 py-3",children:Object(k.jsx)(r.y,{className:"h-5 w-5 text-gray-700 hover:font-bold",title:"Close",onClick:function(){return a.setFeedBack({type:"",message:""})}})}),Object(k.jsx)(r.F,{className:"h-10 w-10"}),Object(k.jsxs)("div",{className:"alert-content ml-4",children:[Object(k.jsx)("div",{className:"alert-title font-semibold text-lg",children:"success"===this.state.feedBack.type?"Success":"Error"}),Object(k.jsx)("div",{className:"alert-description text-sm",children:this.state.feedBack.message})]})]})}),Object(k.jsxs)("div",{className:"w-full bg-white text-right p-2 border border-gray-300 rounded mb-10",children:[Object(k.jsx)("button",{className:"btn btn-blue ".concat(this.state.loadingRequest&&"cursor-wait"),onClick:function(){a.setOpenModal(c.Add_Role_Access),a.props.accessTasks&&a.setAccessToRole(Object(o.a)(a.props.accessTasks)),a.setRoleId(""),a.setRoleTitle(""),a.setRequirement("none")},disabled:this.state.loadingRequest||null===this.props.accessTasks,children:"New Role"}),Object(k.jsx)("div",{className:"overflow-x-auto w-full mt-2",children:Object(k.jsx)(y.a,{columns:[{columnTitle:"#",alignText:"left"},{columnTitle:"User Roles",alignText:"left"},{columnTitle:"Level",alignText:"left"},{columnTitle:"",alignText:"center"}],rows:this.userRows,pagination:!0,search:!0,searchBG:"bg-white",thColor:"blue"})})]}),this.state.openModal!==c.Close_Modal&&Object(k.jsx)(v.d,{backDrop:!0,theme:v.c.default,close:function(){a.cleanAndCloseModal(),a.setOpenModal(c.Close_Modal)},displayClose:!0,backDropClose:!1,title:Object(k.jsxs)("div",{className:"bg-white text-gray-500 font-bold text-2xl",children:[this.state.openModal===c.Add_Role_Access?"Create New ":"Update ","Role"]}),widthSizeClass:v.b.extraLarge,padding:{title:!0,body:!1,footer:!1},children:Object(k.jsxs)("div",{className:"h-full bg-gray-100 py-1",children:[this.state.feedBack&&""!==this.state.feedBack.type&&Object(k.jsxs)("div",{className:"alert-".concat(this.state.feedBack.type," flex flex-row items-center relative mx-3"),children:[Object(k.jsx)("span",{className:"absolute top-0 bottom-0 right-0 px-4 py-3",children:Object(k.jsx)(r.y,{className:"h-5 w-5 text-gray-700 hover:font-bold",title:"Close",onClick:function(){return a.setFeedBack({type:"",message:""})}})}),Object(k.jsx)(r.F,{className:"h-10 w-10"}),Object(k.jsxs)("div",{className:"alert-content ml-4",children:[Object(k.jsx)("div",{className:"alert-title font-semibold text-lg",children:"success"===this.state.feedBack.type?"Success":"Error"}),Object(k.jsx)("div",{className:"alert-description text-sm",children:this.state.feedBack.message})]})]}),Object(k.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 justify-between gap-3",children:[Object(k.jsxs)("div",{className:"bg-white shadow my-3 ml-3 py-2 rounded",children:[Object(k.jsxs)("div",{className:"flex row items-center p-3 mb-2 gap-2 cursor-pointer ".concat(this.state.stepsStatus.stepOne?"text-gray-800 bg-gray-100":"text-blue-800 bg-blue-100 border-blue-800 border-l-4"),onClick:function(){return a.state.stepsStatus.stepOne&&a.handleSteps(1)},children:[Object(k.jsx)("div",{className:"w-10 h-10 bg-white border-2 border-gary-200 rounded-full text-lg text-white flex items-center",children:Object(k.jsx)("span",{className:"text-grey-darker text-center w-full text-gray-700",children:"1"})}),Object(k.jsxs)("div",{className:"flex flex-col font-semibold text-xl",children:["Basic Information",Object(k.jsx)("span",{className:"font-normal text-sm",children:"Input Role Title & a required field"})]})]}),Object(k.jsxs)("div",{className:"flex row items-center p-3 mb-2 gap-2 cursor-pointer ".concat(this.state.stepsStatus.stepOne&&!this.state.stepsStatus.stepTwo?"text-blue-800 bg-blue-100 border-blue-800 border-l-4":"text-gray-800 bg-gray-100"),onClick:function(){return!a.state.stepsStatus.stepOne&&!a.state.stepsStatus.stepTwo&&a.handleSteps(2)},children:[Object(k.jsx)("div",{className:"w-10 h-10 bg-white border-2 border-gary-200 rounded-full text-lg text-white flex items-center",children:Object(k.jsx)("span",{className:"text-grey-darker text-center w-full text-gray-700",children:"2"})}),Object(k.jsxs)("div",{className:"flex flex-col font-semibold text-xl",children:["Access Permission",Object(k.jsx)("span",{className:"font-normal text-sm",children:"Give permission to new role"})]})]})]}),console.log({__fff:this.props.accessTasks,___jjj:this.state.accessToRole}),Object(k.jsx)("div",{className:"md:col-span-2 col-span-1 bg-white shadow my-3 mr-3 py-2 rounded",children:this.state.stepsStatus.stepOne?this.state.accessToRole&&Object(k.jsx)(q,{handleSubmit:this.handleSubmit,roleTitle:this.state.roleTitle,setAccessToRole:this.setAccessToRole,accessToRole:this.state.accessToRole,error:this.state.error,setError:this.setError,loadingRequest:this.state.loadingRequest}):Object(k.jsx)(S,{handleSubmit:this.handleSubmit,setRoleTitle:this.setRoleTitle,roleTitle:this.state.roleTitle,setOpenModal:this.setOpenModal,setRequirement:this.setRequirement,roleRequirement:this.state.roleRequirement,error:this.state.error,setError:this.setError})})]})]})}),this.state.viewRole&&Object(k.jsx)(v.d,{backDrop:!0,theme:v.c.default,close:function(){a.setViewRole(!1),a.setRoleId(""),a.setRoleSelected(null),a.setRoleTitle(""),a.setRequirement("none"),a.setAccessToRole([])},displayClose:!0,backDropClose:!1,title:Object(k.jsxs)("div",{className:"bg-white text-gray-500 font-bold text-2xl",children:[this.state.roleTitle," Role"]}),widthSizeClass:v.b.large,padding:{title:!0,body:!1,footer:!1},children:Object(k.jsxs)("div",{className:"h-full bg-gray-100 py-1 px-2",children:[Object(k.jsxs)("div",{className:"my-3 flex justify-between items-start",children:[Object(k.jsxs)("div",{children:[Object(k.jsx)("div",{className:"flex flex-col",children:Object(k.jsxs)("select",{className:"rounded px-2 py-2 w-full bg-white focus:outline-none border-gray-400 border-2",onChange:function(e){return a.changeViewRole(e.target.value)},value:this.state.roleId,disabled:this.state.loadingRequest,children:[Object(k.jsx)("option",{value:"",children:"Document Category"}),this.loadCurrentRoles(this.props.access.accessRoles).map((function(e,t){return Object(k.jsx)("option",{value:e.system_user_role_id,children:e.role},t+e.system_user_role_id)}))]})}),(null===(e=this.state.roleSelected)||void 0===e?void 0:e.district_required)&&Object(k.jsxs)("div",{className:"flex items-center text-lg gap-1 mt-1",children:[Object(k.jsx)("span",{className:"text-gray-600",children:"Level: "}),Object(k.jsx)("h1",{className:"font-semibold text-gray-900",children:"District"})]}),(null===(t=this.state.roleSelected)||void 0===t?void 0:t.school_required)&&Object(k.jsxs)("div",{className:"flex items-center text-lg gap-1 mt-1",children:[Object(k.jsx)("span",{className:"text-gray-600",children:"Level: "}),Object(k.jsx)("h1",{className:"font-semibold text-gray-900",children:"School"})]}),(null===(s=this.state.roleSelected)||void 0===s?void 0:s.room_required)&&Object(k.jsxs)("div",{className:"flex items-center text-lg gap-1 mt-1",children:[Object(k.jsx)("span",{className:"text-gray-600",children:"Level: "}),Object(k.jsx)("h1",{className:"font-semibold text-gray-900",children:"Room"})]})]}),Object(k.jsxs)("button",{className:"btn bg-blue-500 text-white hover:bg-blue-700 inline-flex mr-1",onClick:function(){a.setOpenModal(c.Update_Role_Access),a.setViewRole(!1),a.setStepStatus({stepOne:!0,stepTwo:!1})},disabled:this.state.openModal!==c.Close_Modal,children:[Object(k.jsx)(r.D,{className:"h-5 w-5 mr-1"}),Object(k.jsx)("span",{children:"Edit"})]})]}),Object(k.jsx)(y.a,{columns:[{columnTitle:"Access Name",alignText:"left",padding:"p-3"},{columnTitle:"Create",alignText:"left"},{columnTitle:"View",alignText:"left"},{columnTitle:"Update",alignText:"left"},{columnTitle:"Delete",alignText:"left"}],rows:this.typeRows,pagination:!1,search:!0,searchBG:"bg-gray-100",thColor:"gray",tableId:"tableAccessForm"})]})})]})}}]),s}(l.Component),I=Object(n.b)((function(e){return{access:e.access,accessTasks:e.system_settings.accessTasks}}),{GetTaskAccess:O.a,createAccessRoles:g.Ib,updateAccessRoles:g.Ic,PushPopupAlert:g.tb})(M),B=s(71),L=s(200);!function(e){e.All_Roles="All Roles",e.Active_Roles="Active Roles",e.Blocked_Roles="Blocked Roles"}(E||(E={}));var D=Object(n.b)((function(e){return{access:e.access}}),{fetchAccessRoles:B.b})((function(e){var t=Object(l.useState)({allRole:0,activeRole:0,blockedRole:0}),s=Object(a.a)(t,2),c=s[0],n=s[1],o=Object(l.useState)(E.All_Roles),i=Object(a.a)(o,2),d=i[0],u=i[1],m=Object(l.useState)(),x=Object(a.a)(m,2),b=x[0],j=x[1],h=Object(l.useState)(!0),p=Object(a.a)(h,2),f=p[0],g=p[1];Object(l.useEffect)((function(){!e.access.accessRoles.length&&f&&(console.log(e.access.accessRoles),e.fetchAccessRoles()),e.access.accessRoles.length&&(n({allRole:e.access.accessRoles.length,activeRole:e.access.accessRoles.filter((function(e){return e.status})).length,blockedRole:e.access.accessRoles.filter((function(e){return!e.status})).length}),g(!1))}),[f,e,e.access.accessRoles]);return!0===f?Object(k.jsx)("div",{className:"text-center mt-7 font-bold text-4xl text-gray-400 animate-pulse",children:"Loading roles..."}):Object(k.jsxs)(l.Fragment,{children:[Object(k.jsxs)(L.b,{children:[Object(k.jsx)("span",{className:"text-sm mt-2",children:"Filter by Status"}),Object(k.jsx)("section",{className:"mt-1",onClick:function(){return u(E.All_Roles)},children:Object(k.jsx)(L.a,{title:"All Role",count:c.allRole,active:d===E.All_Roles})}),Object(k.jsx)("section",{className:"mt-1",onClick:function(){return u(E.Active_Roles)},children:Object(k.jsx)(L.a,{title:"Active Role",count:c.activeRole,active:d===E.Active_Roles})}),Object(k.jsx)("section",{className:"mt-1",onClick:function(){return u(E.Blocked_Roles)},children:Object(k.jsx)(L.a,{title:"Disabled Role",count:c.blockedRole,active:d===E.Blocked_Roles})})]}),Object(k.jsx)("div",{className:"w-full my-5 px-1",children:Object(k.jsxs)("div",{className:"flex flex-row items-center",children:[Object(k.jsx)(r.Z,{className:"text-blue-700 w-28 h-28"}),Object(k.jsxs)("div",{className:"flex flex-col",children:[Object(k.jsx)("h1",{className:"text-3xl font-semibold",children:"System Roles Management"}),Object(k.jsxs)("div",{className:"flex flex-row items-center mx-2 md:gap-3 gap-2",children:[Object(k.jsxs)("div",{className:"flex flex-col mt-1",children:[Object(k.jsx)("span",{className:"text-gray-600 text-base",children:"All Role(s)"}),Object(k.jsx)("span",{className:"text-gray-600 text-3xl font-bold",children:Object(w.h)(c.allRole)})]}),d!==E.Blocked_Roles&&Object(k.jsxs)("div",{className:"flex flex-col mt-1",children:[Object(k.jsx)("span",{className:"text-gray-600 text-base",children:"Active Role(s)"}),Object(k.jsx)("span",{className:"text-gray-600 text-3xl font-bold",children:Object(w.h)(c.activeRole)})]}),d!==E.Active_Roles&&Object(k.jsxs)("div",{className:"flex flex-col mt-1",children:[Object(k.jsx)("span",{className:"text-gray-600 text-base",children:"Blocked Role(s)"}),Object(k.jsx)("span",{className:"text-gray-600 text-3xl font-bold",children:Object(w.h)(c.blockedRole)})]})]})]})]})}),b&&""!==b.type&&Object(k.jsxs)("div",{className:"alert-".concat(b.type," flex flex-row items-center relative my-2"),children:[Object(k.jsx)("span",{className:"absolute top-0 bottom-0 right-0 px-4 py-3",children:Object(k.jsx)(r.y,{className:"h-5 w-5 text-gray-700 hover:font-bold",title:"Close",onClick:function(){return j({type:"",message:""})}})}),Object(k.jsx)(r.F,{className:"h-10 w-10"}),Object(k.jsxs)("div",{className:"alert-content ml-4",children:[Object(k.jsx)("div",{className:"alert-title font-semibold text-lg",children:"success"===b.type?"Success":"Error"}),Object(k.jsx)("div",{className:"alert-description text-sm",children:b.message})]})]}),Object(k.jsx)("div",{className:"p-2 overflow-x-auto",children:d===E.Blocked_Roles?Object(k.jsx)(I,{filterStatus:!1}):d===E.Active_Roles?Object(k.jsx)(I,{filterStatus:!0}):Object(k.jsx)(I,{filterStatus:"all"})})]})}))}}]);
//# sourceMappingURL=47.11c22969.chunk.js.map