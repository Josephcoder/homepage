(this["webpackJsonpreact-redux-typescript-advance"]=this["webpackJsonpreact-redux-typescript-advance"]||[]).push([[45],{199:function(e,t,s){"use strict";s.d(t,"b",(function(){return p})),s.d(t,"g",(function(){return m})),s.d(t,"e",(function(){return b})),s.d(t,"a",(function(){return h})),s.d(t,"c",(function(){return _})),s.d(t,"h",(function(){return x})),s.d(t,"f",(function(){return j})),s.d(t,"d",(function(){return f}));var a=s(5),n=s.n(a),r=s(7),i=s(9),o=s.n(i),l=s(6),c=s(10),d=s(12),u=s(13),p=function(e){return e(!0,""),function(){var t=Object(r.a)(n.a.mark((function t(s){var a,r;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,Object(d.b)(),t.next=4,o.a.get("".concat(c.a.CLAIMING,"/session-type"));case 4:a=t.sent,console.log({GET_PLANS_TYPES:a.data}),r=[],200===a.status&&null!==a.data&&a.data.length>0&&(r=a.data),s({type:l.a.GET_PLANS_TYPES,payload:r}),e(!1,""),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(0),console.error({error:Object(u.a)(t.t0)}),e(!1,Object(u.a)(t.t0));case 16:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}()},m=function(e){return console.log({thisType:e}),{type:l.a.SELECT_PLAN_TYPE,payload:e}},b=function(e){return e(!0,""),function(){var t=Object(r.a)(n.a.mark((function t(s){var a,r;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,Object(d.b)(),t.next=4,o.a.get("".concat(c.a.CLAIMING,"/session/active/"));case 4:a=t.sent,console.log({GET_ACTIVE_SESSION_PLANS:a.data}),r=void 0,a.data&&void 0!==a.data.is_active&&(r=a.data),console.log({session_plan:a.data}),s({type:l.a.GET_ACTIVE_SESSION_PLANS,payload:r||"none"}),e(!1,"",r||"none"),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(0),console.error({error:Object(u.a)(t.t0)}),e(!1,Object(u.a)(t.t0));case 17:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e){return t.apply(this,arguments)}}()},h=function(e){return e(!0,""),function(){var t=Object(r.a)(n.a.mark((function t(s){var a,r;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,Object(d.b)(),t.next=4,o.a.get("".concat(c.a.CLAIMING,"/session/"));case 4:a=t.sent,console.log({GET_ALL_SESSION_PLANS:a.data}),r=[],200===a.status&&null!==a.data&&a.data.length>0&&(r=a.data),s({type:l.a.GET_ALL_SESSION_PLANS,payload:r}),e(!1,"",r),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(0),console.error({error:Object(u.a)(t.t0)}),e(!1,Object(u.a)(t.t0));case 16:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}()},_=function(e){return{type:l.a.CREATE_SESSION_PLAN,payload:e}},x=function(e){return{type:l.a.UPDATE_SESSION_PLAN,payload:e}},j=function(e){return{type:l.a.SESSION_ACTIVATION,payload:e}},f=function(e){return{type:l.a.DELETE_SESSION_PLAN,payload:e}}},286:function(e,t,s){"use strict";s.d(t,"b",(function(){return S}));var a=s(5),n=s.n(a),r=s(7),i=s(19),o=s(18),l=s(21),c=s(20),d=s(9),u=s.n(d),p=s(4),m=s(265),b=s(17),h=s(3),_=s(199),x=s(15),j=s(25),f=s(189),g=s(10),O=s(48),y=s(1),N=function(e){var t=new Date;return new Date(e.end_date).getTime()>=t.getTime()},v=function(e){return x.k.find((function(t){return t.type_key===e}))},S=function(e,t){if(e.is_active){var s=new Date,a=new Date(t.end_date),n=new Date(t.start_date);if(a.getTime()>=s.getTime()&&n.getTime()<=s.getTime()&&t.type_status!==x.j.CLOSED)return"OPEN";if(n.getTime()>s.getTime()&&t.type_status!==x.j.CLOSED)return"WAITING"}return"CLOSED"},E=function(e){Object(l.a)(s,e);var t=Object(c.a)(s);function s(e){var a;return Object(i.a)(this,s),(a=t.call(this,e)).handlePlanActivation=function(){var e=Object(r.a)(n.a.mark((function e(t,s){var r,i,o,l,c;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.is_active?"close":"open",window.confirm("Are you sure you want to ".concat(r," this plan?"))){e.next=3;break}return e.abrupt("return",!0);case 3:for(o in N(s)||a.props.PushPopupAlert({title:"Opening/Closing plan which has been expired is not allowed!",theme:j.a.warning}),i={session_plan_name:t.session_plan_name,period:t.period,is_active:t.is_active,plans:[],createdAt:t.createdAt,updatedAt:t.updatedAt,session_plan_id:t.session_plan_id},t.plans)Object.prototype.hasOwnProperty.call(t.plans,o)&&(l=t.plans[o],s.type_key===l.type_key?s.type_status===x.j.OPEN?i.plans.push({type_id:s.type_id,type_title:s.type_title,type_key:s.type_key,type_status:x.j.CLOSED,start_date:s.start_date,end_date:s.end_date,allowed_claim_level:s.allowed_claim_level,_id:s._id,history:s.history}):i.plans.push({type_id:s.type_id,type_title:s.type_title,type_key:s.type_key,type_status:x.j.OPEN,start_date:s.start_date,end_date:s.end_date,allowed_claim_level:s.allowed_claim_level,_id:s._id,history:s.history}):i.plans.push(l));return console.log("===================================="),console.log({newData:i}),console.log("===================================="),a.setState({loadingRequest:s.type_key}),e.prev=10,e.next=13,u.a.put("".concat(g.a.CLAIMING,"/session/").concat(t.session_plan_id),i);case 13:c=e.sent,a.props.updateSessionPlan(c.data),a.props.setViewThisSession(c.data),a.props.PushPopupAlert({title:"Session ".concat(r,"d successfully"),theme:j.a.info}),a.setState({loadingRequest:""}),console.log("updateSessionPlan: ",c),e.next=25;break;case 21:e.prev=21,e.t0=e.catch(10),console.error({error:Object(O.e)(e.t0)}),a.props.PushPopupAlert({title:Object(O.e)(e.t0),theme:j.a.warning});case 25:case"end":return e.stop()}}),e,null,[[10,21]])})));return function(t,s){return e.apply(this,arguments)}}(),a.state={loadingRequest:""},a}return Object(o.a)(s,[{key:"render",value:function(){var e=this;return Object(y.jsxs)("table",{className:"w-full bg-white shadow p-5",id:"session_content",children:[Object(y.jsx)("thead",{className:"bg-white border-b-2 border-gray-300 text-gray-600 font-bold text-sm",children:Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{className:"p-2",children:"#"}),Object(y.jsx)("td",{className:"p-2",children:"Plan Type"}),Object(y.jsx)("td",{className:"p-2",children:"Start Date"}),Object(y.jsx)("td",{className:"p-2",children:"End date"}),this.props.viewThisSession.is_active&&Object(y.jsx)("td",{className:"p-2",colSpan:2,children:"Status"})]})}),Object(y.jsx)("tbody",{children:this.props.viewThisSession.plans.map((function(t,s){return Object(y.jsxs)("tr",{className:"border-b border-gray-200 hover:bg-gray-100",children:[Object(y.jsx)("td",{className:"p-2 text-left whitespace-nowrap",children:s+1}),Object(y.jsx)("td",{className:"p-2 text-left",children:Object(y.jsx)("span",{className:"text-lg",children:v(t.type_key)&&Object(f.a)(v(t.type_key).type_title)})}),Object(y.jsx)("td",{className:"p-2 text-left",children:Object(O.a)(t.start_date)}),Object(y.jsx)("td",{className:"p-2 text-left",children:Object(O.a)(t.end_date)}),e.props.viewThisSession.is_active&&Object(y.jsx)("td",{children:"OPEN"===S(e.props.viewThisSession,t)?Object(y.jsx)("span",{className:"px-2 py-1 font-semibold text-green-700",children:"Open"}):"WAITING"===S(e.props.viewThisSession,t)?Object(y.jsx)("span",{className:"px-2 py-1 font-semibold text-gray-700",children:"Waiting"}):Object(y.jsx)("span",{className:"px-2 py-1 font-semibold text-red-700",children:"Closed"})}),e.props.viewThisSession.is_active&&Object(y.jsx)("td",{children:N(t)&&Object(y.jsxs)("div",{className:"flex items-center justify-center gap-1",children:[Object(y.jsxs)("div",{className:"relative ".concat(e.state.loadingRequest.length>0?"cursor-not-allowed":"cursor-pointer"),title:t.type_status===x.j.OPEN?"Deactivating session":"Activating session",onClick:function(){return e.state.loadingRequest.length<=0&&e.handlePlanActivation(e.props.viewThisSession,t)},children:[Object(y.jsx)("span",{className:"block w-14 h-8 bg-gray-100 rounded-full shadow-inner"}),Object(y.jsx)("span",{className:"absolute block w-6 h-6 mt-1 ml-1 rounded-full shadow inset-y-0 left-0 focus-within:shadow-outline transition-transform duration-500 ease-in-out ".concat(t.type_status===x.j.CLOSED?"bg-red-500":"bg-green-500 transform translate-x-full")})]}),e.state.loadingRequest===t.type_key&&Object(y.jsx)(m.b,{className:"animate__animated animate__rotateIn animate__infinite"})]})})]},s+t._id)}))})]})}}]),s}(p.Component);t.a=Object(b.b)(null,{updateSessionPlan:_.h,PushPopupAlert:h.ob})(E)},406:function(e,t,s){"use strict";s(4);var a=s(1);t.a=function(e){var t=function(){for(var t=[],s=0;s<e.cols;s++)t.push(s);return t.map((function(e){return Object(a.jsx)("td",{className:"p-3 text-center whitespace-nowrap",children:Object(a.jsx)("div",{className:"w-full h-4 rounded bg-gray-200 animate__animated animate__pulse animate__delay-5s animate__infinite"})},e)}))};return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("tr",{className:"border-b border-gray-200",children:t()},228),Object(a.jsx)("tr",{className:"border-b border-gray-200",children:t()},22648),Object(a.jsx)("tr",{className:"border-b border-gray-200",children:t()},229768)]})}},835:function(e,t,s){"use strict";s.r(t),s.d(t,"Index",(function(){return G}));var a,n=s(23),r=s(4),i=s(26),o=s(24),l=s(19),c=s(18),d=s(21),u=s(20),p=s(17),m=s(199),b=s(549),h=(s(554),s(67)),_=s.n(h),x=s(3),j=s(25),f=s(15),g=s(1),O=["month","agenda"],y=Object(b.b)(_.a),N=function(e){Object(d.a)(s,e);var t=Object(u.a)(s);function s(e){var a;return Object(l.a)(this,s),(a=t.call(this,e)).setLoading=function(e){a.setState({loading:e})},a.loadEvents=function(e){var t=[],s=1;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=e[n];for(var i in r.plans)if(Object.prototype.hasOwnProperty.call(r.plans,i)){var o=r.plans[i],l=o.type_key===f.g.APPLICATION?r.session_plan_name+" - Applications":o.type_key===f.g.DOCUMENT_VALIDATION?r.session_plan_name+" - Document validation":o.type_key===f.g.EXAMINATION?r.session_plan_name+" - Examination":o.type_key===f.g.MARKS_PUBLICATION?r.session_plan_name+" - Marks publication":o.type_key===f.g.PLACEMENT_TRANSFER?r.session_plan_name+" - Placement transfer":r.session_plan_name;t.push({id:s,title:l,allDay:!0,start:_()(o.start_date).toDate(),end:_()(o.end_date).toDate()}),s++}}a.setState({events:t}),s=1,t=[]},a.componentDidMount=function(){null===a.props.sessionPlan.allSessionPlans||a.props.sessionPlan.allSessionPlans.length<=0?a.props.GetAllSessionPlans((function(e,t,s){a.setLoading(e),!e&&s&&a.loadEvents(s),!e&&t.length>0&&a.props.PushPopupAlert({title:t,theme:j.a.danger})})):(a.loadEvents(a.props.sessionPlan.allSessionPlans),a.setLoading(!1))},a.state={loading:!0,events:null},a}return Object(c.a)(s,[{key:"render",value:function(){return Object(g.jsx)("section",{className:"my-3",children:this.state.events&&Object(g.jsx)(b.a,{popup:!0,localizer:y,events:this.state.events,defaultDate:new Date,views:O,step:60,showMultiDayTimes:!0,onSelectEvent:function(e){return alert(e.title)},startAccessor:"start",endAccessor:"end",className:"min-h-screen"})})}}]),s}(r.Component),v=Object(p.b)((function(e){return{sessionPlan:e.sessionPlan}}),{GetAllSessionPlans:m.a,PushPopupAlert:x.ob})(N),S=s(5),E=s.n(S),P=s(7),A=s(9),T=s.n(A),w=s(50),I=s(8),k=s(265),C=s(406),R=s(71),D=s(189),L=s(10),M=s(48),q=s(286),V=function(e){Object(d.a)(s,e);var t=Object(u.a)(s);function s(e){var a;return Object(l.a)(this,s),(a=t.call(this,e)).setLoading=function(e){a.setState({loading:e})},a.setCreateSession=function(e){a.setState({createSession:e})},a.setSessionTitle=function(e){a.setState({sessionTitle:e})},a.setViewThisSession=function(e){null===a.state.viewThisSession?a.setState({viewThisSession:e}):a.state.viewThisSession.session_plan_id===e.session_plan_id?a.setState({viewThisSession:null}):a.setState({viewThisSession:e})},a.setSessionPeriod=function(e){a.setState({sessionPeriod:e})},a.setFormError=function(e){a.setState({formError:e})},a.componentDidMount=function(){(null===a.props.sessionPlan.planTypes||a.props.sessionPlan.planTypes.length<=0)&&a.props.GetPlansTypes((function(e,t){a.setLoading(e),!e&&t.length>0&&a.props.PushPopupAlert({title:t,theme:j.a.danger})})),null!==a.props.sessionPlan.planTypes&&a.props.sessionPlan.planTypes.length>0&&a.setLoading(!1),(null===a.props.sessionPlan.allSessionPlans||a.props.sessionPlan.allSessionPlans.length<=0)&&a.props.GetAllSessionPlans((function(e,t){a.setLoading(e),!e&&t.length>0&&a.props.PushPopupAlert({title:t,theme:j.a.danger})})),a.state.createSession||a.setCreateSession(a.props.isCreateDefault)},a.handleSessionActivation=function(){var e=Object(P.a)(E.a.mark((function e(t){var s,n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=t.is_active?"deactivate":"activate",window.confirm("Are you sure you want to ".concat(s," this session?"))){e.next=3;break}return e.abrupt("return",!0);case 3:return a.setState({loadingRequest:t.session_plan_id}),e.prev=4,e.next=7,T.a.put("".concat(L.a.CLAIMING,"/session/active/").concat(t.session_plan_id),{is_active:!t.is_active});case 7:n=e.sent,a.props.GetAllSessionPlans((function(e,t){!e&&t.length>0&&a.props.PushPopupAlert({title:t,theme:j.a.danger})})),a.props.PushPopupAlert({title:"Session ".concat(s,"d successfully"),theme:j.a.info}),console.log("updateSessionPlan: ",n),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(4),console.error({error:Object(M.e)(e.t0)}),a.props.PushPopupAlert({title:Object(M.e)(e.t0),theme:j.a.warning});case 17:a.setState({loadingRequest:""});case 18:case"end":return e.stop()}}),e,null,[[4,13]])})));return function(t){return e.apply(this,arguments)}}(),a.isDateRangeValid=function(e,t,s){return!0},a.currentDate=function(){var e=new Date,t=e.getDate(),s=e.getMonth()+1,a=e.getFullYear(),n=t.toString(),r=s.toString();return t<10&&(n="0"+t),s<10&&(r="0"+s),a+"-"+r+"-"+n},a.setPlansForUpdate=function(e){a.setState({application_start:e.find((function(e){return e.type_key===f.g.APPLICATION}))?e.find((function(e){return e.type_key===f.g.APPLICATION})).start_date:"",application_end:e.find((function(e){return e.type_key===f.g.APPLICATION}))?e.find((function(e){return e.type_key===f.g.APPLICATION})).end_date:"",document_start:e.find((function(e){return e.type_key===f.g.DOCUMENT_VALIDATION}))?e.find((function(e){return e.type_key===f.g.DOCUMENT_VALIDATION})).start_date:"",document_end:e.find((function(e){return e.type_key===f.g.DOCUMENT_VALIDATION}))?e.find((function(e){return e.type_key===f.g.DOCUMENT_VALIDATION})).end_date:"",examination_start:e.find((function(e){return e.type_key===f.g.EXAMINATION}))?e.find((function(e){return e.type_key===f.g.EXAMINATION})).start_date:"",examination_end:e.find((function(e){return e.type_key===f.g.EXAMINATION}))?e.find((function(e){return e.type_key===f.g.EXAMINATION})).end_date:"",publication_start:e.find((function(e){return e.type_key===f.g.MARKS_PUBLICATION}))?e.find((function(e){return e.type_key===f.g.MARKS_PUBLICATION})).start_date:"",publication_end:e.find((function(e){return e.type_key===f.g.MARKS_PUBLICATION}))?e.find((function(e){return e.type_key===f.g.MARKS_PUBLICATION})).end_date:"",placement_start:e.find((function(e){return e.type_key===f.g.PLACEMENT_TRANSFER}))?e.find((function(e){return e.type_key===f.g.PLACEMENT_TRANSFER})).start_date:"",placement_end:e.find((function(e){return e.type_key===f.g.PLACEMENT_TRANSFER}))?e.find((function(e){return e.type_key===f.g.PLACEMENT_TRANSFER})).end_date:""})},a.handleSubmit=function(){var e=Object(P.a)(E.a.mark((function e(t){var s,n,r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!Object(D.g)(a.state.sessionTitle)){e.next=3;break}return e.abrupt("return",a.setFormError({element:"title",msg:"Please fill the session plan title"}));case 3:if(!Object(D.g)(a.state.sessionPeriod)){e.next=5;break}return e.abrupt("return",a.setFormError({element:"period",msg:"Please fill session plan period"}));case 5:if(!Object(D.g)(a.state.application_start)){e.next=9;break}return e.abrupt("return",a.setFormError({element:"application_period_start",msg:"Application period start date is required"}));case 9:if(a.isDateRangeValid("APPLICATION","START",a.state.application_start)){e.next=11;break}return e.abrupt("return",!1);case 11:if(!Object(D.g)(a.state.application_end)){e.next=15;break}return e.abrupt("return",a.setFormError({element:"application_period_end",msg:"Application period end date is required"}));case 15:if(a.isDateRangeValid("APPLICATION","END",a.state.application_end)){e.next=17;break}return e.abrupt("return",!0);case 17:if(!Object(D.g)(a.state.document_start)){e.next=21;break}return e.abrupt("return",a.setFormError({element:"document_period_start",msg:"Document validation period start date is required"}));case 21:if(a.isDateRangeValid("DOCUMENT","START",a.state.document_start)){e.next=23;break}return e.abrupt("return",!1);case 23:if(!Object(D.g)(a.state.document_end)){e.next=27;break}return e.abrupt("return",a.setFormError({element:"document_period_end",msg:"Document validation period end date is required"}));case 27:if(a.isDateRangeValid("DOCUMENT","END",a.state.document_end)){e.next=29;break}return e.abrupt("return",!0);case 29:if(!Object(D.g)(a.state.examination_start)){e.next=33;break}return e.abrupt("return",a.setFormError({element:"examination_period_start",msg:"Examination period start date is required"}));case 33:if(a.isDateRangeValid("EXAMINATION","START",a.state.examination_start)){e.next=35;break}return e.abrupt("return",!1);case 35:if(!Object(D.g)(a.state.examination_end)){e.next=39;break}return e.abrupt("return",a.setFormError({element:"examination_period_end",msg:"Examination period end date is required"}));case 39:if(a.isDateRangeValid("EXAMINATION","END",a.state.examination_end)){e.next=41;break}return e.abrupt("return",!0);case 41:if(!Object(D.g)(a.state.publication_start)){e.next=45;break}return e.abrupt("return",a.setFormError({element:"publication_period_start",msg:"Marks publication period start date is required"}));case 45:if(a.isDateRangeValid("PUBLICATION","START",a.state.publication_start)){e.next=47;break}return e.abrupt("return",!1);case 47:if(!Object(D.g)(a.state.publication_end)){e.next=51;break}return e.abrupt("return",a.setFormError({element:"publication_period_end",msg:"Marks publication period end date is required"}));case 51:if(a.isDateRangeValid("PUBLICATION","END",a.state.publication_end)){e.next=53;break}return e.abrupt("return",!0);case 53:if(!Object(D.g)(a.state.placement_start)){e.next=57;break}return e.abrupt("return",a.setFormError({element:"placement_period_start",msg:"Placement period start date is required"}));case 57:if(a.isDateRangeValid("PLACEMENT","START",a.state.placement_start)){e.next=59;break}return e.abrupt("return",!1);case 59:if(!Object(D.g)(a.state.placement_end)){e.next=63;break}return e.abrupt("return",a.setFormError({element:"placement_period_end",msg:"Placement period end date is required"}));case 63:if(a.isDateRangeValid("PLACEMENT","END",a.state.placement_end)){e.next=65;break}return e.abrupt("return",!0);case 65:if(s={session_plan_name:a.state.sessionTitle,period:a.state.sessionPeriod,plans:[{type_key:f.g.APPLICATION,type_status:f.j.OPEN,start_date:a.state.application_start,end_date:a.state.application_end},{type_key:f.g.DOCUMENT_VALIDATION,type_status:f.j.OPEN,start_date:a.state.document_start,end_date:a.state.document_end},{type_key:f.g.EXAMINATION,type_status:f.j.OPEN,start_date:a.state.examination_start,end_date:a.state.examination_end},{type_key:f.g.MARKS_PUBLICATION,type_status:f.j.OPEN,start_date:a.state.publication_start,end_date:a.state.publication_end},{type_key:f.g.PLACEMENT_TRANSFER,type_status:f.j.OPEN,start_date:a.state.placement_start,end_date:a.state.placement_end}]},a.setState({loadingRequest:a.state.thisSession?a.state.thisSession.session_plan_id:"true"}),e.prev=67,null===a.state.thisSession){e.next=78;break}return e.next=71,T.a.put("".concat(L.a.CLAIMING,"/session/").concat(a.state.thisSession.session_plan_id),{session_plan_name:a.state.sessionTitle,period:a.state.sessionPeriod,is_active:a.state.thisSession.is_active,plans:[{type_key:f.g.APPLICATION,start_date:a.state.application_start,end_date:a.state.application_end},{type_key:f.g.DOCUMENT_VALIDATION,start_date:a.state.document_start,end_date:a.state.document_end},{type_key:f.g.EXAMINATION,start_date:a.state.examination_start,end_date:a.state.examination_end},{type_key:f.g.MARKS_PUBLICATION,start_date:a.state.publication_start,end_date:a.state.publication_end},{type_key:f.g.PLACEMENT_TRANSFER,start_date:a.state.placement_start,end_date:a.state.placement_end}]});case 71:n=e.sent,a.props.updateSessionPlan(n.data),a.props.PushPopupAlert({title:"Session Plan updated successfully",theme:j.a.info}),a.setState({formError:null,sessionTitle:"",sessionPeriod:"",application_start:"",application_end:"",document_start:"",document_end:"",examination_start:"",examination_end:"",publication_start:"",publication_end:"",placement_start:"",placement_end:"",thisSession:null,createSession:!1}),console.log("updateSessionPlan: ",n),e.next=85;break;case 78:return e.next=80,T.a.post("".concat(L.a.CLAIMING,"/session"),s);case 80:r=e.sent,a.props.createSessionPlan(r.data),a.props.PushPopupAlert({title:"Session plan created successfully",theme:j.a.success}),a.setState({formError:null,sessionTitle:"",sessionPeriod:"",application_start:"",application_end:"",document_start:"",document_end:"",examination_start:"",examination_end:"",publication_start:"",publication_end:"",placement_start:"",placement_end:"",thisSession:null,createSession:!1}),console.log("createPlanType: ",r);case 85:e.next=91;break;case 87:e.prev=87,e.t0=e.catch(67),a.props.PushPopupAlert({title:"".concat(Object(M.e)(e.t0),"! Try again"),theme:j.a.danger}),console.error("Err: ",{error:e.t0});case 91:a.setState({loadingRequest:""});case 92:case"end":return e.stop()}}),e,null,[[67,87]])})));return function(t){return e.apply(this,arguments)}}(),a.state={loading:!1,loadingRequest:"",createSession:!1,thisSession:null,viewThisSession:null,doAction:null,sessionTitle:"",sessionPeriod:"",application_start:"",application_end:"",document_start:"",document_end:"",examination_start:"",examination_end:"",publication_start:"",publication_end:"",placement_start:"",placement_end:"",formError:null},a}return Object(c.a)(s,[{key:"render",value:function(){var e=this;return Object(g.jsxs)("div",{className:"my-2",children:[Object(g.jsxs)("div",{className:"flex flex-row justify-between items-center bg-gray-100 py-1",children:[this.state.createSession&&Object(g.jsxs)("div",{className:"flex items-center gap-2",children:[Object(g.jsx)("button",{className:"ml-3 bg-gray-50 hover:bg-blue-100 rounded-full px-1 py-1 focus:outline-none ".concat(this.state.loadingRequest.length>0||"cursor-pointer"," animate__animated animate__fadeIn"),disabled:this.state.loadingRequest.length>0,onClick:function(){e.setState({formError:null,sessionTitle:"",sessionPeriod:"",thisSession:null,createSession:!1,application_start:"",document_start:"",examination_start:"",publication_start:"",placement_start:"",application_end:"",document_end:"",examination_end:"",publication_end:"",placement_end:""})},children:Object(g.jsx)(I.f,{className:"w-7 h-7"})}),Object(g.jsx)("div",{className:"font-extrabold text-2xl text-gray-500",children:null!==this.state.thisSession?this.state.thisSession.session_plan_name:"Add New Session Plan"})]}),!this.state.createSession&&Object(g.jsx)("div",{className:"text-blue-600 font-extrabold text-xl px-2",children:"Session plans"}),!1===this.state.loading&&!this.state.createSession&&Object(g.jsx)("div",{onClick:function(){return e.setCreateSession(!0)},className:"btn bg-blue-600 text-white cursor-pointer hover:bg-blue-800",children:"Add new"})]}),!this.state.createSession&&Object(g.jsx)("div",{className:"flex flex-col my-2",children:Object(g.jsxs)("table",{className:"w-full shadow",id:"session_content",children:[Object(g.jsx)("thead",{className:"bg-white border-b-2 border-gray-300 text-gray-600 font-bold text-sm",children:Object(g.jsxs)("tr",{children:[Object(g.jsx)("td",{className:"px-2 py-2",children:"#"}),Object(g.jsx)("td",{className:"px-2 py-2",children:"Session title"}),Object(g.jsx)("td",{className:"px-2 py-2",children:"Period"}),Object(g.jsx)("td",{className:"px-2 py-2",children:"Status"}),this.state.viewThisSession&&Object(g.jsx)("td",{className:"px-2 py-2"}),Object(g.jsx)("td",{className:"px-2 py-2"})]})}),Object(g.jsxs)("tbody",{children:[null===this.props.sessionPlan.allSessionPlans&&Object(g.jsx)(C.a,{cols:5}),null!==this.props.sessionPlan.allSessionPlans&&!this.state.loading&&this.props.sessionPlan.allSessionPlans.length<=0&&Object(g.jsx)("tr",{children:Object(g.jsx)("td",{colSpan:5,className:"px-2 py-2",children:Object(g.jsx)(R.b,{theme:R.a.Dark,value:"No session plan found!",component:Object(g.jsx)("div",{className:"w-full mt-2 flex flex-row items-center justify-center",children:Object(g.jsx)("ul",{className:"text-base py-2 text-blue-600 font-bold flex flex-row gap-2",children:Object(g.jsx)("li",{onClick:function(){return e.setCreateSession(!0)},className:"underline text-blue-600 cursor-pointer",children:"Create new session"})})})})})}),null!==this.props.sessionPlan.allSessionPlans&&!this.state.loading&&this.props.sessionPlan.allSessionPlans.length>0&&this.props.sessionPlan.allSessionPlans.map((function(t,s){return Object(g.jsxs)(r.Fragment,{children:[Object(g.jsxs)("tr",{className:"border-b border-gray-200 hover:bg-gray-100 group cursor-pointer ".concat(e.state.viewThisSession&&e.state.viewThisSession.session_plan_id===t.session_plan_id&&"border-blue-600 bg-blue-200"),onClick:function(){e.state.loadingRequest.length<=0&&e.setViewThisSession(t)},children:[Object(g.jsx)("td",{className:"p-3 text-left whitespace-nowrap",children:s+1}),Object(g.jsx)("td",{className:"p-3 text-left",children:Object(g.jsx)("span",{className:"text-lg",children:Object(D.a)(t.session_plan_name)})}),Object(g.jsx)("td",{className:"p-3 text-left",children:t.period}),Object(g.jsx)("td",{children:t.is_active?Object(g.jsx)("span",{className:"px-2 py-1 font-semibold text-green-700",children:"Active"}):Object(g.jsx)("span",{className:"px-2 py-1 font-semibold text-red-700",children:"Inactive"})}),e.state.viewThisSession&&e.state.viewThisSession.session_plan_id===t.session_plan_id&&Object(g.jsx)("td",{children:Object(g.jsxs)("div",{className:"flex items-center justify-center gap-1",children:[Object(g.jsxs)("div",{className:"relative ".concat(e.state.loadingRequest.length>0||t.is_active?"cursor-not-allowed":"cursor-pointer"),title:t.is_active?"Activate another session to close this one!":"Activation of a session",onClick:function(){return e.state.loadingRequest.length<=0&&!t.is_active&&e.handleSessionActivation(t)},children:[Object(g.jsx)("span",{className:"block w-14 h-8 bg-gray-100 rounded-full shadow-inner"}),Object(g.jsx)("span",{className:"absolute block w-6 h-6 mt-1 ml-1 rounded-full shadow inset-y-0 left-0 focus-within:shadow-outline transition-transform duration-500 ease-in-out ".concat(t.is_active?"bg-green-500 transform translate-x-full":"bg-red-500")})]}),e.state.loadingRequest===t.session_plan_id&&e.state.doAction&&"ACTIVATED"===e.state.doAction&&Object(g.jsx)(k.b,{className:"animate__animated animate__rotateIn animate__infinite"})]})}),Object(g.jsx)("td",{className:"px-5 text-center",colSpan:e.state.viewThisSession&&e.state.viewThisSession.session_plan_id!==t.session_plan_id?2:0,children:Object(g.jsxs)("div",{className:"flex flex-row items-center gap-2 justify-end",children:[e.state.viewThisSession&&e.state.viewThisSession.session_plan_id===t.session_plan_id&&Object(g.jsxs)("div",{className:"flex items-center gap-2",children:[Object(g.jsx)("div",{onClick:function(){e.state.loadingRequest.length<=0&&e.setState({thisSession:t,createSession:!0,sessionTitle:t.session_plan_name,sessionPeriod:t.period}),e.setPlansForUpdate(t.plans)},className:"bg-gray-50 hover:bg-blue-200 rounded-full px-1 py-1 ".concat(e.state.loadingRequest.length>0?"cursor-not-allowed":"cursor-pointer"),children:Object(g.jsx)(I.E,{className:"text-3xl text-blue-700"})}),Object(g.jsxs)("div",{className:"bg-gray-50 hover:bg-red-200 flex items-center rounded-full px-1 py-1 ".concat(e.state.loadingRequest.length>0?"cursor-not-allowed":"cursor-pointer"),children:[Object(g.jsx)(w.n,{className:"text-3xl text-yellow-700"}),e.state.loadingRequest===t.session_plan_id&&e.state.doAction&&"DELETE"===e.state.doAction&&Object(g.jsx)(k.b,{className:"animate__animated animate__rotateIn animate__infinite"})]})]}),Object(g.jsx)("div",{onClick:function(){e.state.loadingRequest.length<=0&&e.setViewThisSession(t)},className:"bg-gray-50 group-hover:bg-blue-200 rounded-full px-1 py-1 ".concat(e.state.loadingRequest.length>0?"cursor-not-allowed":"cursor-pointer"),children:e.state.viewThisSession&&e.state.viewThisSession.session_plan_id===t.session_plan_id?Object(g.jsx)(I.H,{className:"text-3xl text-gray-700"}):Object(g.jsx)(I.I,{className:"text-3xl text-gray-700"})})]})})]}),e.state.viewThisSession&&e.state.viewThisSession.session_plan_id===t.session_plan_id&&Object(g.jsx)("tr",{className:"bg-gray-200",children:Object(g.jsx)("td",{colSpan:6,className:"px-3 py-2",children:Object(g.jsx)(q.a,{viewThisSession:e.state.viewThisSession,setViewThisSession:e.setViewThisSession})})})]},s+t.session_plan_id)}))]})]})}),this.state.createSession&&Object(g.jsx)("section",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4",children:Object(g.jsx)("div",{className:"col-span-1 sm:col-span-4 flex flex-col mx-4 my-6",children:Object(g.jsxs)("form",{onSubmit:this.handleSubmit,className:"-mt-2",children:[Object(g.jsxs)("div",{className:"flex flex-col mb-2",children:[Object(g.jsx)("span",{className:"text-sm text-gray-600 font-bold mb-1",children:"Session title"}),Object(g.jsx)("input",{disabled:this.state.loadingRequest.length>0,onChange:function(t){e.setSessionTitle(t.target.value),e.setFormError(null)},type:"text",value:this.state.sessionTitle,className:"input-white border-2 ".concat(null!==this.state.formError&&"title"===this.state.formError.element?"border-red-500":"border-gray-500")}),null!==this.state.formError&&"title"===this.state.formError.element&&Object(g.jsx)("span",{className:"text-red-600 font-bold text-xs",children:this.state.formError.msg})]}),Object(g.jsxs)("div",{className:"flex flex-col mb-2",children:[Object(g.jsx)("span",{className:"text-sm text-gray-600 font-bold mb-1",children:"Session period"}),Object(g.jsx)("input",{disabled:this.state.loadingRequest.length>0,onChange:function(t){e.setSessionPeriod(t.target.value),e.setFormError(null)},type:"text",value:this.state.sessionPeriod,className:"input-white border-2 ".concat(null!==this.state.formError&&"period"===this.state.formError.element?"border-red-500":"border-gray-500")}),null!==this.state.formError&&"period"===this.state.formError.element&&Object(g.jsx)("span",{className:"text-red-600 font-bold text-xs",children:this.state.formError.msg})]}),Object(g.jsxs)("div",{className:"w-full mb-2",children:[Object(g.jsx)("h6",{className:"text-blueGray-400 text-sm mt-3 mb-1 font-bold uppercase",children:"Application Session period"}),Object(g.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 my-1 gap-2",children:[Object(g.jsxs)("div",{className:"w-full",children:[Object(g.jsx)("span",{className:"text-sm text-gray-600 font-bold mb-1",children:"Start"}),Object(g.jsx)("input",{disabled:this.state.loadingRequest.length>0,onChange:function(t){e.setState({application_start:t.target.value}),e.setFormError(null),e.isDateRangeValid("APPLICATION","START",t.target.value)},type:"date",value:this.state.application_start,min:this.state.thisSession?"":this.currentDate(),className:"input-white border-2 ".concat(null!==this.state.formError&&"application_period_start"===this.state.formError.element?"border-red-500":"border-gray-500")}),null!==this.state.formError&&"application_period_start"===this.state.formError.element&&Object(g.jsx)("span",{className:"text-red-600 font-bold text-xs",children:this.state.formError.msg})]}),Object(g.jsxs)("div",{className:"w-full",children:[Object(g.jsx)("span",{className:"text-sm text-gray-600 font-bold mb-1",children:"End"}),Object(g.jsx)("input",{disabled:this.state.loadingRequest.length>0,onChange:function(t){e.setState({application_end:t.target.value}),e.setFormError(null),e.isDateRangeValid("APPLICATION","END",t.target.value)},type:"date",value:this.state.application_end,className:"input-white border-2 ".concat(null!==this.state.formError&&"application_period_end"===this.state.formError.element?"border-red-500":"border-gray-500")}),null!==this.state.formError&&"application_period_end"===this.state.formError.element&&Object(g.jsx)("span",{className:"text-red-600 font-bold text-xs",children:this.state.formError.msg})]})]})]}),Object(g.jsxs)("div",{className:"w-full mb-2",children:[Object(g.jsx)("h6",{className:"text-blueGray-400 text-sm mt-3 mb-1 font-bold uppercase",children:"Document Validation Session period"}),Object(g.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 my-1 gap-2",children:[Object(g.jsxs)("div",{className:"w-full",children:[Object(g.jsxs)("span",{className:"text-sm text-gray-600 font-bold mb-1",children:["Start"," ",null!==this.state.formError&&this.state.formError.element]}),Object(g.jsx)("input",{disabled:this.state.loadingRequest.length>0,onChange:function(t){e.setState({document_start:t.target.value}),e.setFormError(null),e.isDateRangeValid("DOCUMENT","START",t.target.value)},type:"date",value:this.state.document_start,className:"input-white border-2 ".concat(null!==this.state.formError&&"document_period_start"===this.state.formError.element?"border-red-500":"border-gray-500")}),null!==this.state.formError&&"document_period_start"===this.state.formError.element&&Object(g.jsx)("span",{className:"text-red-600 font-bold text-xs",children:this.state.formError.msg})]}),Object(g.jsxs)("div",{className:"w-full",children:[Object(g.jsx)("span",{className:"text-sm text-gray-600 font-bold mb-1",children:"End"}),Object(g.jsx)("input",{disabled:this.state.loadingRequest.length>0,onChange:function(t){e.setState({document_end:t.target.value}),e.setFormError(null),e.isDateRangeValid("DOCUMENT","END",t.target.value)},type:"date",value:this.state.document_end,className:"input-white border-2 ".concat(null!==this.state.formError&&"document_period_end"===this.state.formError.element?"border-red-500":"border-gray-500")}),null!==this.state.formError&&"document_period_end"===this.state.formError.element&&Object(g.jsx)("span",{className:"text-red-600 font-bold text-xs",children:this.state.formError.msg})]})]})]}),Object(g.jsxs)("div",{className:"w-full mb-2",children:[Object(g.jsx)("h6",{className:"text-blueGray-400 text-sm mt-3 mb-1 font-bold uppercase",children:"Examination Session period"}),Object(g.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 my-1 gap-2",children:[Object(g.jsxs)("div",{className:"w-full",children:[Object(g.jsx)("span",{className:"text-sm text-gray-600 font-bold mb-1",children:"Start"}),Object(g.jsx)("input",{disabled:this.state.loadingRequest.length>0,onChange:function(t){e.setState({examination_start:t.target.value}),e.setFormError(null),e.isDateRangeValid("EXAMINATION","START",t.target.value)},type:"date",value:this.state.examination_start,className:"input-white border-2 ".concat(null!==this.state.formError&&"examination_period_start"===this.state.formError.element?"border-red-500":"border-gray-500")}),null!==this.state.formError&&"examination_period_start"===this.state.formError.element&&Object(g.jsx)("span",{className:"text-red-600 font-bold text-xs",children:this.state.formError.msg})]}),Object(g.jsxs)("div",{className:"w-full",children:[Object(g.jsx)("span",{className:"text-sm text-gray-600 font-bold mb-1",children:"End"}),Object(g.jsx)("input",{disabled:this.state.loadingRequest.length>0,onChange:function(t){e.setState({examination_end:t.target.value}),e.setFormError(null),e.isDateRangeValid("EXAMINATION","END",t.target.value)},type:"date",value:this.state.examination_end,className:"input-white border-2 ".concat(null!==this.state.formError&&"examination_period_end"===this.state.formError.element?"border-red-500":"border-gray-500")}),null!==this.state.formError&&"examination_period_end"===this.state.formError.element&&Object(g.jsx)("span",{className:"text-red-600 font-bold text-xs",children:this.state.formError.msg})]})]})]}),Object(g.jsxs)("div",{className:"w-full mb-2",children:[Object(g.jsx)("h6",{className:"text-blueGray-400 text-sm mt-3 mb-1 font-bold uppercase",children:"Marks Publication Session period"}),Object(g.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 my-1 gap-2",children:[Object(g.jsxs)("div",{className:"w-full",children:[Object(g.jsx)("span",{className:"text-sm text-gray-600 font-bold mb-1",children:"Start"}),Object(g.jsx)("input",{disabled:this.state.loadingRequest.length>0,onChange:function(t){e.setState({publication_start:t.target.value}),e.setFormError(null),e.isDateRangeValid("PUBLICATION","START",t.target.value)},type:"date",value:this.state.publication_start,className:"input-white border-2 ".concat(null!==this.state.formError&&"publication_period_start"===this.state.formError.element?"border-red-500":"border-gray-500")}),null!==this.state.formError&&"publication_period_start"===this.state.formError.element&&Object(g.jsx)("span",{className:"text-red-600 font-bold text-xs",children:this.state.formError.msg})]}),Object(g.jsxs)("div",{className:"w-full",children:[Object(g.jsx)("span",{className:"text-sm text-gray-600 font-bold mb-1",children:"End"}),Object(g.jsx)("input",{disabled:this.state.loadingRequest.length>0,onChange:function(t){e.setState({publication_end:t.target.value}),e.setFormError(null),e.isDateRangeValid("PUBLICATION","END",t.target.value)},type:"date",value:this.state.publication_end,className:"input-white border-2 ".concat(null!==this.state.formError&&"publication_period_end"===this.state.formError.element?"border-red-500":"border-gray-500")}),null!==this.state.formError&&"publication_period_end"===this.state.formError.element&&Object(g.jsx)("span",{className:"text-red-600 font-bold text-xs",children:this.state.formError.msg})]})]})]}),Object(g.jsxs)("div",{className:"w-full mb-2",children:[Object(g.jsx)("h6",{className:"text-blueGray-400 text-sm mt-3 mb-1 font-bold uppercase",children:"Placement & Transfer Session period"}),Object(g.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 my-1 gap-2",children:[Object(g.jsxs)("div",{className:"w-full",children:[Object(g.jsx)("span",{className:"text-sm text-gray-600 font-bold mb-1",children:"Start"}),Object(g.jsx)("input",{disabled:this.state.loadingRequest.length>0,onChange:function(t){e.setState({placement_start:t.target.value}),e.setFormError(null),e.isDateRangeValid("PLACEMENT","START",t.target.value)},type:"date",value:this.state.placement_start,className:"input-white border-2 ".concat(null!==this.state.formError&&"placement_period_start"===this.state.formError.element?"border-red-500":"border-gray-500")}),null!==this.state.formError&&"placement_period_start"===this.state.formError.element&&Object(g.jsx)("span",{className:"text-red-600 font-bold text-xs",children:this.state.formError.msg})]}),Object(g.jsxs)("div",{className:"w-full",children:[Object(g.jsx)("span",{className:"text-sm text-gray-600 font-bold mb-1",children:"End"}),Object(g.jsx)("input",{disabled:this.state.loadingRequest.length>0,onChange:function(t){e.setState({placement_end:t.target.value}),e.setFormError(null),e.isDateRangeValid("PLACEMENT","END",t.target.value)},type:"date",value:this.state.placement_end,className:"input-white border-2 ".concat(null!==this.state.formError&&"placement_period_end"===this.state.formError.element?"border-red-500":"border-gray-500")}),null!==this.state.formError&&"placement_period_end"===this.state.formError.element&&Object(g.jsx)("span",{className:"text-red-600 font-bold text-xs",children:this.state.formError.msg})]})]})]}),Object(g.jsxs)("div",{className:"flex flex-row justify-between items-center",children:[Object(g.jsx)("button",{disabled:this.state.loadingRequest.length>0,type:"button",className:"btn bg-gray-500 hover:bg-gray-700 text-white",onClick:function(){e.setState({formError:null,sessionTitle:"",sessionPeriod:"",thisSession:null,createSession:!1,application_start:"",document_start:"",examination_start:"",publication_start:"",placement_start:"",application_end:"",document_end:"",examination_end:"",publication_end:"",placement_end:""})},children:"Close"}),Object(g.jsx)("button",{disabled:this.state.loadingRequest.length>0,type:"submit",className:"btn btn-blue text-white ".concat(this.state.loadingRequest.length>0?"animate__animated animate__flash animate__infinite cursor-wait":""),children:this.state.loadingRequest.length>0?"Please wait...":null!==this.state.thisSession?"Update":"Create"})]})]})})})]})}}]),s}(r.Component),F=Object(p.b)((function(e){return{auth:e.auth,sessionPlan:e.sessionPlan}}),{GetPlansTypes:m.b,setSelectedPlanType:m.g,GetAllSessionPlans:m.a,createSessionPlan:m.c,updateSessionPlan:m.h,sessionActivation:m.f,deleteSessionPlan:m.d,PushPopupAlert:x.ob})(V);!function(e){e.sessionPlan="Session Plans",e.calenderView="Calendar View"}(a||(a={}));var G=function(){var e=Object(o.g)().setting_type,t=Object(r.useState)("calendar"===e?a.calenderView:a.sessionPlan),s=Object(n.a)(t,2),l=s[0],c=s[1];return Object(g.jsxs)("div",{className:"",children:[Object(g.jsx)("div",{className:"mt-3 rounded flex flex-row justify-between items-center",children:Object(g.jsxs)("div",{className:"flex flex-row items-center gap-3",children:[Object(g.jsx)(i.n,{className:"text-6xl text-blue-600"}),Object(g.jsx)("div",{className:"flex flex-col",children:Object(g.jsx)("span",{className:"text-blue-600 text-2xl font-bold",children:"Session settings"})})]})}),Object(g.jsx)("div",{className:"mt-3 mb-6 flex-col",children:Object(g.jsxs)("div",{className:"bg-white w-full border border-white rounded",children:[Object(g.jsx)("div",{className:"flex flex-row items-center",children:Object.values(a).map((function(e,t){return Object(g.jsx)("div",{onClick:function(){return c(e)},className:"animate__animated ".concat(l===e?"bg-blue-100 border-blue-600 text-blue-600 animate__zoomIn":"bg-white border-white text-gray-600"," hover:bg-blue-100 px-4 py-2 cursor-pointer font-bold border-b-4 hover:border-blue-600 hover:text-blue-600 rounded-t mt-1 mx-1"),children:e},t)}))}),Object(g.jsxs)("div",{className:"=rounded mx-1 mb-1",children:[l===a.sessionPlan&&Object(g.jsx)(F,{isCreateDefault:"create-session"===e}),l===a.calenderView&&Object(g.jsx)(v,{})]})]})})]})}}}]);
//# sourceMappingURL=45.53db92fc.chunk.js.map