(this["webpackJsonpreact-redux-typescript-advance"]=this["webpackJsonpreact-redux-typescript-advance"]||[]).push([[33],{1314:function(e,t,s){"use strict";s.r(t),s.d(t,"DocumentValidation",(function(){return Re}));var a,i=s(25),n=s(24),o=s(27),c=s(26),r=s(4),l=s.n(r),d=s(12),u=s(34),p=s(23),m=s(40),h=s(708),b=s(28),g=s(5),x=s.n(g),j=s(7),f=s(11),_=s(10),y=s.n(_),O=s(203),v=s(68),N=s(3),w=s(82),D=s(6),C=s(8),I=s(16),T=s(14),S=s(690),k=s(19),P=s(9),A=s(21),E=s(32),R=s(694),L=s(714),F=s(17),V=s(49),M=s(688),U=s(1),B=function(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"default",a=[];for(var i in t){var n=t[i].details;for(var o in n){var c=t[i].details[o],r=c.validated_by?{user_id:c.validated_by.user_id,comment:c.validated_by.commet,validation_status:c.validated_by.validation_status,date:c.validated_by.date}:null;null!==c.files&&c.files.length>0&&"default"===s&&"waiting"===c.validation_status&&t[i]._id?a.push({user_id:t[i]._id,n_id:t[i].n_id,fname:t[i].user_info.fname,lname:t[i].user_info.lname,phone_number:t[i].phone_number,district:t[i].user_info.district,email:t[i].email,main_doc_title:Object(h.b)(e,c).main,category_id:c.category_id,sub_category_id:c.sub_category_id,category_subcategory_data:c.category_subcategory_data,title:c.title,description:c.description,files:c.files,start_year:c.start_year,end_year:c.end_year,school:c.school.title,details_email:c.email,names:c.names,details_phone_number:c.phone_number,company:c.company,year:c.year,doc_id:c.doc_id,validation_status:c.validation_status,validated_by:r,approved:c.approved}):null!==c.files&&c.files.length>0&&"all"===s&&t[i]._id&&a.push({user_id:t[i]._id,names:t[i].user_info.fname+" "+t[i].user_info.lname,n_id:t[i].n_id?t[i].n_id:"",fname:t[i].user_info.fname,lname:t[i].user_info.lname,phone_number:t[i].phone_number,district:t[i].user_info.district,email:t[i].email,main_doc_title:Object(h.b)(e,c).main,category_id:c.category_id,sub_category_id:c.sub_category_id,category_subcategory_data:c.category_subcategory_data,title:c.title,description:c.description,files:c.files,start_year:c.start_year,end_year:c.end_year,school:c.school.title,details_email:c.email,details_phone_number:c.phone_number,company:c.company,year:c.year,doc_id:c.doc_id,validation_status:c.validation_status,validated_by:r,approved:c.approved})}}return a},q=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"all",a=e;return"all"===t||Object(E.f)(t)?a=e:"all"===t||"all"===s||Object(E.f)(s)?"all"!==t&&(a=e.filter((function(e){return e.category_id===t}))):a=e.filter((function(e){return e.category_id===t&&e.sub_category_id===s})),a},H=l.a.memo(Object(p.b)((function(e){return{socket:e.socket}}))((function(e){var t,s,a=Object(r.useState)(""),i=Object(F.a)(a,2),n=i[0],o=i[1],c=function(t){e.socket.socket.emit(P.e.DOCUMENT_VALIDATION_SERVER,t)},l=B(e.documentCategories,e.candidateList).filter((function(t){return!1===e.openedDocument.includes(t.doc_id)}));return Object(U.jsxs)("div",{children:[Object(U.jsx)("div",{className:"w-full py-2",children:Object(U.jsx)("input",{onChange:function(e){return o(e.target.value)},type:"text",value:n,placeholder:"Search...",className:"w-full bg-gray-100 py-2 px-3 rounded focus:border-gray-800",disabled:e.loadingCandidates||!e.candidateList.length})}),Object(U.jsxs)("table",{className:"w-full shadow",id:"report_content",children:[Object(U.jsx)("thead",{className:"bg-blue-50 border-b-2 border-gray-300 text-gray-600 font-bold text-sm",children:Object(U.jsxs)("tr",{children:[Object(U.jsx)("td",{className:"px-3 py-2",children:"#"}),Object(U.jsx)("td",{className:"px-3 py-2",children:"Names"}),Object(U.jsx)("td",{className:"px-3 py-2",children:"National ID"}),Object(U.jsx)("td",{className:"px-3 py-2",children:"Document"}),Object(U.jsx)("td",{className:"px-3 py-2",children:"Status"}),Object(U.jsx)("td",{className:"px-3 py-2"})]})}),Object(U.jsx)("tbody",{children:e.loadingCandidates?Object(U.jsx)(M.a,{cols:6}):0===l.length||0===q(l,e.filterByCategoryId,e.filterBySubCategoryId).length?Object(U.jsx)("tr",{children:Object(U.jsx)("td",{colSpan:6,className:"px-2 py-2",children:Object(U.jsxs)("div",{className:"flex flex-col text-gray-400 items-center justify-center bg-gray-100 rounded py-10",children:[Object(U.jsx)(v.c,{className:"text-8xl text-gray-400 mb-2 animate__animated animate__shakeX"}),Object(U.jsx)("span",{className:"text-sm font-bold",children:"No result found! Please try to search again"})]})})}):(t=q(l,e.filterByCategoryId,e.filterBySubCategoryId),s=n,void 0===s||""===s?t:t.filter((function(e){var t;for(var a in e)if(t=!1,"n_id"!==a&&"fname"!==a&&"lname"!==a&&"phone_number"!==a&&"district"!==a&&"email"!==a&&"main_doc_title"!==a&&"title"!==a&&"names"!==a&&"validation_status"!==a||e[a]&&(t=e[a].toString().toLowerCase().indexOf(s.toLowerCase())>-1),t)break;return t}))).map((function(t,s){return Object(U.jsxs)("tr",{className:"border-b border-gray-200 cursor-pointer group hover:bg-gray-100",onClick:function(){e.setViewDoc(!0),e.setDocumentId(t.doc_id),e.setCandidateId(t.user_id),e.setDocument_index(s),e.setLoadingImage(!0),c({data:t,currentPage:e.currentPage,actionType:"all-opened",previous:null})},children:[Object(U.jsx)("td",{className:"p-3 text-left whitespace-nowrap",children:s+1}),Object(U.jsx)("td",{className:"p-3 text-left",children:Object(U.jsx)("span",{children:t.fname+" "+t.lname})}),Object(U.jsx)("td",{className:"p-3 text-left",children:Object(U.jsx)("span",{children:t.n_id})}),Object(U.jsx)("td",{className:"py-3 px-3 text-left font-medium text-lg",children:t.main_doc_title}),Object(U.jsx)("td",{className:"py-3 px-3 text-left",children:Object(U.jsx)("span",{className:"text-sm font-medium bg-yellow-800 py-1 px-2 rounded text-yellow-100 align-middle",children:"waiting"===t.validation_status?"Pending":t.validation_status})}),Object(U.jsx)("td",{className:"text-right",children:Object(U.jsxs)("button",{className:"bg-blue-500 group-hover:bg-blue-600 text-blue-50 font-bold py-1 px-1 inline-flex rounded focus:outline-none",title:"View documents",disabled:e.loadingRequest,onClick:function(){e.setViewDoc(!0),e.setDocumentId(t.doc_id),e.setCandidateId(t.user_id),c({data:t,currentPage:e.currentPage,actionType:"all-opened",previous:null})},children:[Object(U.jsx)(V.h,{className:"w-5 h-5"}),"View doc"]})})]},Math.random())}))})]})]})}))),G=s(124),J=s(72),z=s(125),Y=s(819),X=s(67),W=s(210),K=s(684),Q=s(66),Z=function(e){Object(o.a)(s,e);var t=Object(c.a)(s);function s(){return Object(i.a)(this,s),t.apply(this,arguments)}return Object(n.a)(s,[{key:"render",value:function(){var e=this;return Object(U.jsx)("div",{className:"flex flex-row md:flex-row justify-end w-full items-center gap-2 overflow-x-auto",children:("waiting"===this.props.docStatus||!0===this.props.change_decision)&&Object(U.jsxs)("div",{className:"flex items-center gap-2 px-2",children:[Object(U.jsxs)("button",{className:"px-4 py-2 font-semibold text-red-50 rounded inline-flex items-center space-x-2 focus:outline-none ".concat(this.props.loading||this.props.loadingImage?"bg-red-300 cursor-wait":"bg-red-800"),onClick:function(){e.props.setActionTaken("rejection"),e.props.setResponse("rejected"),e.props.setChangeDecision&&e.props.setChangeDecision(!1)},children:[Object(U.jsx)(d.o,{className:"w-5 h-5"}),Object(U.jsx)("span",{children:"Reject"})]}),Object(U.jsxs)("button",{className:"px-4 py-2 font-semibold text-blue-50 rounded inline-flex items-center space-x-2 focus:outline-none ".concat(this.props.loading||this.props.loadingImage?"bg-blue-400 cursor-wait":"bg-blue-700"),onClick:function(){e.props.setActionTaken("approval"),e.props.setResponse("approved"),e.props.setChangeDecision&&e.props.setChangeDecision(!1)},children:[Object(U.jsx)(Q.i,{className:"w-5 h-5"}),Object(U.jsx)("span",{children:"Approve"})]})]})})}}]),s}(r.Component),$=l.a.memo(Z),ee=function(e){Object(o.a)(s,e);var t=Object(c.a)(s);function s(){return Object(i.a)(this,s),t.apply(this,arguments)}return Object(n.a)(s,[{key:"render",value:function(){var e=this;return Object(U.jsxs)("div",{className:"flex flex-col md:flex-col items-end gap-1 w-full overflow-x-auto border-t-2 pt-3",children:[Object(U.jsxs)("div",{className:"flex gap-2 w-full px-2",children:[Object(U.jsx)("span",{className:"text-gray-500 italic",children:"Decision:"}),Object(U.jsx)("span",{className:"".concat("approval"===this.props.actionTaken?"text-blue-700":"text-red-800"," text-xl font-medium"),children:"approval"===this.props.actionTaken?"Approved":"Rejected"})]}),"approval"===this.props.actionTaken&&!this.props.in_education&&Object(U.jsxs)("div",{className:"w-full px-2 mb-1 flex gap-2 items-center",children:[Object(U.jsx)("span",{className:"text-gray-500 italic",children:"Is Document for teaching:"}),Object(U.jsx)("div",{className:this.props.loadingRequest?"cursor-default":"cursor-pointer",onClick:function(){!e.props.loadingRequest&&!e.props.isTeachingDocument&&e.props.setHasDisabilityDocument(!1),!e.props.loadingRequest&&e.props.setIsTeachingDocument(!e.props.isTeachingDocument)},children:this.props.isTeachingDocument?Object(U.jsx)(v.f,{className:"text-blue-600 w-8"}):Object(U.jsx)(v.g,{className:"text-gray-600 w-8"})})]}),"approval"===this.props.actionTaken&&!this.props.disability&&Object(U.jsxs)("div",{className:"w-full px-2 mb-1 flex gap-2 items-center",children:[Object(U.jsx)("span",{className:"text-gray-500 italic",children:"Is Document for disability:"}),Object(U.jsx)("div",{className:this.props.loadingRequest?"cursor-default":"cursor-pointer",onClick:function(){!e.props.loadingRequest&&!e.props.hasDisabilityDocument&&e.props.setIsTeachingDocument(!1),!e.props.loadingRequest&&e.props.setHasDisabilityDocument(!e.props.hasDisabilityDocument)},children:this.props.hasDisabilityDocument?Object(U.jsx)(v.f,{className:"text-blue-600 w-8"}):Object(U.jsx)(v.g,{className:"text-gray-600 w-8"})})]}),this.props.expiration&&Object(U.jsxs)("div",{className:"w-full",children:[Object(U.jsxs)("div",{className:"w-full px-2 mb-1 flex gap-2 items-center",children:[Object(U.jsx)("span",{className:"text-gray-500 italic",children:"Expiration date:"}),Object(U.jsx)("input",{type:"date",placeholder:"expiration date",className:"border border-".concat("expiration"===this.props.error.element?"red":"gray","-400 rounded px-3 py-1 focus:outline-none"),style:{resize:"none"},value:this.props.expiration_date,onChange:function(t){e.props.setExpirationDate(t.target.value),e.props.setError({element:"",msg:""})},disabled:this.props.loadingRequest})]}),"expiration"===this.props.error.element&&Object(U.jsx)("p",{className:"text-red-800",children:this.props.error.msg})]}),Object(U.jsxs)("div",{className:"w-full px-2",children:[Object(U.jsx)("textarea",{placeholder:"Comment for the ".concat(this.props.actionTaken),cols:50,rows:3,className:"border border-".concat("comment"===this.props.error.element?"red":"gray","-400 rounded px-3 py-1 w-full focus:outline-none"),style:{resize:"none"},value:this.props.responseMsg,onChange:function(t){e.props.setResponseMsg(t.target.value),e.props.setError({element:"",msg:""})},disabled:this.props.loadingRequest}),"comment"===this.props.error.element&&Object(U.jsx)("p",{className:"text-red-800",children:this.props.error.msg})]}),Object(U.jsxs)("div",{className:"flex flex-row gap-1 max-w-full px-2",children:[Object(U.jsxs)("button",{className:"bg-gray-800 px-4 py-2 font-semibold rounded text-white inline-flex items-center space-x-2 focus:outline-none",onClick:function(){e.props.setResponseMsg(""),e.props.setActionTaken(""),e.props.setError({element:"",msg:""})},disabled:this.props.loadingRequest,children:[Object(U.jsx)(u.b,{className:"w-5 h-5"}),Object(U.jsx)("span",{children:"Back"})]}),Object(U.jsx)("button",{className:"bg-blue-700 px-4 py-2 font-semibold rounded text-white focus:outline-none",disabled:this.props.loadingRequest,onClick:function(){return window.confirm("Are you sure you want to ".concat(e.props.actionTaken," this document?"))&&e.props.handleVerify()},children:this.props.loadingRequest?Object(U.jsx)("div",{className:"",children:"Loading..."}):Object(U.jsxs)("div",{className:"inline-flex items-center space-x-2 gap-1",children:[Object(U.jsx)(Q.i,{className:"w-5 h-5"}),Object(U.jsx)("span",{children:"Confirm"})]})})]})]})}}]),s}(r.Component),te=l.a.memo(ee),se=function(e){Object(o.a)(s,e);var t=Object(c.a)(s);function s(e){var a;return Object(i.a)(this,s),(a=t.call(this,e)).getCandidateFileByIndex=function(e,t,s,a,i,n,o){if(e.details.length<=0)return s(!1),a(""),i(""),n(null),o(!1),!1;var c=e.details.filter((function(e){return"waiting"===e.validation_status&&e.files}));return c.length<=0?(s(!1),a(""),i(""),n(null),o(!1),!1):c.length-1<t?(s(!0),a(c[0].doc_id),i(e.user_id),n(0),o(!0),!0):(s(!0),a(c[t].doc_id),i(e.user_id),n(t),o(!0),!0)},a.getDocumentFileByIndex=function(e,t,s,i,n,o,c){var r,l=0;if(e.length<=0)return a.FC_cleanToClose(),!1;if(e.length-1<t){for(l=0,r=!1;!1===r&&e.length-1>=l;){if(void 0!==e[l]&&!Object(E.f)(e[l].files)&&!1===r){a.FC_SocketServeAction({data:e[l],currentPage:a.props.currentPage,actionType:"all-opened",previous:a.props.doc.doc_id}),s(!0),i(e[l].doc_id),n(e[l].user_id),o(l),c(!0),r=!0;break}l++}return r||a.FC_cleanToClose(),!0}if(void 0===e[t]||Object(E.f)(e[t].files)){for(l=0,r=!1;!r&&e.length-1>=l;){if(void 0!==e[l]&&!Object(E.f)(e[l].files)&&!r){a.FC_SocketServeAction({data:e[l],currentPage:a.props.currentPage,actionType:"all-opened",previous:a.props.doc.doc_id}),s(!0),i(e[l].doc_id),n(e[l].user_id),o(l),c(!0),r=!0;break}l++}return r||a.FC_cleanToClose(),!0}return a.FC_SocketServeAction({data:e[t],currentPage:a.props.currentPage,actionType:"all-opened",previous:a.props.doc.doc_id}),s(!0),i(e[t].doc_id),n(e[t].user_id),o(t),c(!0),!0},a.setSetFullscreen=function(e){a.setState({isFullscreen:e})},a.handleFullScreen=function(){a.state.isFullscreen?(Object(b.i)("doc-img","CLOSE"),a.setSetFullscreen(!1)):(a.setSetFullscreen(!0),Object(b.i)("doc-img","OPEN"))},a.FC_cleanToClose=function(){a.props.setViewDoc(!1),a.props.setDocumentId(""),a.props.setIsTeachingDocument(!1),a.props.setCandidateId(""),a.props.setDocument_index(null),a.props.setLoadingImage(!1)},a.handleNextPrev=function(e){var t=B(a.props.documentCategories,a.props.candidateList).filter((function(e){return!a.props.openedDocuments.includes(e.doc_id)})),s=a.props.document_index;"NEXT"===e&&a.props.document_index<=t.length-1&&(s=a.props.document_index+1,a.getDocumentFileByIndex(t,s,a.props.setViewDoc,a.props.setDocumentId,a.props.setCandidateId,a.props.setDocument_index,a.props.setLoadingImage)),"PREV"===e&&a.props.document_index>0&&(s=a.props.document_index-1,a.getDocumentFileByIndex(t,s,a.props.setViewDoc,a.props.setDocumentId,a.props.setCandidateId,a.props.setDocument_index,a.props.setLoadingImage)),a.props.setIsTeachingDocument(!1)},a.isNextAllowed=function(){var e=B(a.props.documentCategories,a.props.candidateList).filter((function(e){return!a.props.openedDocuments.includes(e.doc_id)}));if(e.filter((function(e){return"waiting"===e.validation_status})).length<=1)return!1;if(a.props.document_index<=e.length-1){if(e[a.props.document_index+1]&&"waiting"===e[a.props.document_index+1].validation_status)return!0;if(e[a.props.document_index]&&"waiting"===e[a.props.document_index].validation_status)return!0}return!1},a.isPrevAllowed=function(){if(a.props.document_index>0)return!0;var e=B(a.props.documentCategories,a.props.candidateList).filter((function(e){return!a.props.openedDocuments.includes(e.doc_id)}));return void 0!==e[a.props.document_index-1]&&!Object(E.f)(e[a.props.document_index-1].files)},a.FC_SocketServeAction=function(e){a.props.socket.socket.emit(P.e.DOCUMENT_VALIDATION_SERVER,e)},a.state={isFullscreen:!1,failedToLoadFile:!1},a}return Object(n.a)(s,[{key:"render",value:function(){var e=this,t=this.props.documentCategories.documentCategory?this.props.documentCategories.documentCategory.find((function(t){return t.user_detail_category_id===e.props.doc.category_id})):void 0,s=!(!t||!t.fields.find((function(e){return e===R.b.expiration_date})));return Object(U.jsxs)("div",{className:"bg-gray-50 h-full md:h-screen grid grid-cols-1 md:grid-cols-3",children:[this.props.doc.files.length>0&&this.props.loadingImage&&Object(U.jsx)("div",{className:"col-span-2 max-h-full md:max-h-screen overflow-y-auto relative group",children:Object(U.jsxs)("div",{className:"relative",children:[!1===this.state.failedToLoadFile?Object(U.jsx)("div",{className:"w-full mx-auto mt-5 px-4",children:Object(U.jsx)("div",{className:"animate-pulse flex space-x-4",children:Object(U.jsx)("div",{className:"flex-1 space-y-4 py-4",children:Object(U.jsx)("div",{className:"bg-gray-300 rounded h-72 flex items-center justify-center",children:Object(U.jsxs)("h1",{className:"text-5xl text-gray-500 font-bold",children:["Loading"," ",Object(b.l)(Object(b.j)(this.props.doc.files))?"image":"pdf","..."]})})})})}):Object(U.jsx)("div",{className:"px-3",children:Object(U.jsx)(K.a,{title:"Error",description:Object(b.l)(Object(b.j)(this.props.doc.files))?"Failed to load image":"Failed to load pdf"})}),Object(U.jsx)("div",{className:"flex items-center justify-between absolute top-0 w-max px-2 py-2",children:Object(U.jsx)("button",{className:"flex items-center bg-gray-100 justify-center h-10 w-10 rounded-full shadow-md opacity-4 cursor-pointer",onClick:function(){e.FC_cleanToClose(),e.FC_SocketServeAction({data:e.props.doc,currentPage:e.props.currentPage,actionType:"all-closed",previous:null})},disabled:this.props.loadingRequest,children:Object(U.jsx)(X.g,{className:"h-6 w-6 text-gray-500 group-hover:text-gray-800"})})})]})}),Object(U.jsxs)("div",{className:"col-span-2 h-auto md:max-h-screen overflow-y-auto relative bg-gray-200 group ".concat(this.props.loadingImage&&"hidden"),children:[Object(U.jsx)("div",{children:this.props.doc.files.length>0?Object(b.l)(Object(b.j)(this.props.doc.files))?Object(U.jsx)("div",{className:"relative",children:Object(U.jsx)("img",{src:C.a.AUTH_FILES+this.props.doc.files,alt:"",className:"w-full md:w-auto h-auto md:max-h-screen mx-auto ".concat(this.props.loadingImage&&"hidden"),id:"doc-img",onLoad:function(){return e.props.setLoadingImage(!1)},onError:function(){return e.setState({failedToLoadFile:!0})},onDoubleClick:function(){return e.handleFullScreen()}})}):Object(U.jsx)(W.a,{file_url:C.a.AUTH_FILES+this.props.doc.files,class_name:"w-full h-screen md:max-h-screen mx-auto ".concat(this.props.loadingImage&&"hidden"),frame_title:"application PDF file view",setLoadingFile:this.props.setLoadingImage,setLoadingError:function(t){return e.setState({failedToLoadFile:t})}}):Object(U.jsxs)("div",{className:"text-center text-red-400 py-8 animate__animated animate__fadeIn",children:[Object(U.jsx)(z.f,{className:"mx-auto w-40 h-40"}),Object(U.jsx)("span",{className:"font-semibold text-4xl",children:"No Files Provided"})]})}),Object(U.jsxs)("div",{className:"flex items-center justify-between absolute top-0 ".concat(Object(b.l)(Object(b.j)(this.props.doc.files))?"w-full":"w-max"," px-2 py-2"),children:[Object(U.jsx)("button",{className:"flex items-center bg-gray-100 justify-center h-10 w-10 rounded-full shadow-md opacity-4 cursor-pointer",onClick:function(){e.FC_cleanToClose(),e.FC_SocketServeAction({data:e.props.doc,currentPage:e.props.currentPage,actionType:"all-closed",previous:null})},disabled:this.props.loadingRequest||this.props.loadingImage,children:Object(U.jsx)(X.g,{className:"h-6 w-6 text-gray-500 group-hover:text-gray-800"})}),this.props.doc.files.length>0&&Object(b.l)(Object(b.j)(this.props.doc.files))&&Object(U.jsxs)("div",{className:"flex items-center gap-2 opacity-0 group-hover:opacity-100",children:[Object(U.jsx)("button",{className:"flex items-center bg-gray-100 justify-center h-10 w-10 rounded-full shadow-md opacity-4 cursor-pointer hover:bg-blue-50",onClick:function(){return Object(b.t)("doc-img","IN")},children:Object(U.jsx)(J.l,{className:"h-6 w-6 text-gray-500"})}),Object(U.jsx)("button",{className:"flex items-center bg-gray-100 justify-center h-10 w-10 rounded-full shadow-md opacity-4 cursor-pointer hover:bg-blue-50",onClick:function(){return Object(b.t)("doc-img","OUT")},children:Object(U.jsx)(J.m,{className:"h-6 w-6 text-gray-500"})}),Object(U.jsx)("div",{className:"flex items-center bg-gray-100 justify-center h-10 w-10 rounded-full shadow-md opacity-4 cursor-pointer hover:bg-blue-50",onClick:function(){return Object(b.i)("doc-img","OPEN")},children:Object(U.jsx)(G.h,{className:"h-6 w-6 text-gray-500"})})]})]}),Object(U.jsxs)("div",{className:"absolute align-middle top-1/2 w-full flex ".concat(this.isPrevAllowed()?"justify-between":"justify-end"," z-20 opacity-0 group-hover:opacity-100 px-2"),children:[this.isPrevAllowed()&&Object(U.jsx)("button",{className:"inline-block bg-gray-100 cursor-pointer shadow-md rounded-full p-2 hover:bg-blue-50",onClick:function(){return e.handleNextPrev("PREV")},disabled:this.props.loadingRequest||this.props.loadingImage,children:Object(U.jsx)(Y.b,{className:"h-8 w-8 text-gray-500"})}),this.isNextAllowed()&&Object(U.jsx)("button",{className:"inline-block bg-gray-100 cursor-pointer shadow-md rounded-full p-2 hover:bg-blue-50",onClick:function(){return e.handleNextPrev("NEXT",e.props.doc.validation_status)},disabled:this.props.loadingRequest||this.props.loadingImage,children:Object(U.jsx)(Y.a,{className:"h-8 w-8 text-gray-500"})})]})]}),Object(U.jsx)("section",{className:"relative",children:Object(U.jsxs)("div",{className:"w-full flex md:flex-col flex-col justify-between items-start gap-2",children:[Object(U.jsx)("div",{className:"flex items-center gap-4 w-full",children:Object(U.jsxs)("section",{className:"p-3 w-full",children:[Object(U.jsxs)("div",{className:"flex items-center gap-2 border-b-2 my-2 py-1",children:[Object(U.jsx)(v.d,{className:"text-blue-600 text-xl"}),Object(U.jsx)("h2",{className:"uppercase tracking-wide text-xl font-semibold text-gray-700",children:"Document validation"})]}),Object(U.jsxs)("div",{className:"flex flex-row items-start justify-left gap-2 mb-2",children:[Object(U.jsx)("span",{className:"text-gray-500 italic",children:"Doc Title: "}),Object(U.jsx)("span",{className:"font-bold text-2xl",children:Object(h.b)(this.props.documentCategories,this.props.doc).main})]}),this.props.candidate.user_info.photo&&Object(U.jsx)("div",{className:"",children:Object(U.jsx)("img",{src:Object(b.c)(this.props.candidate.user_info.photo),className:"w-auto object-center object-cover h-28 rounded-lg border-2 border-gray-300",alt:""})}),Object(U.jsxs)("div",{className:"flex flex-row items-center justify-left gap-2 mb-2",children:[Object(U.jsx)("span",{className:"text-gray-500 italic",children:"Names: "}),Object(U.jsx)("span",{className:"font-medium text-lg",children:this.props.candidate.user_info.fname+" "+this.props.candidate.user_info.lname})]}),Object(U.jsxs)("section",{className:"animate__animated animate__fadeIn",children:[Object(U.jsxs)("div",{className:"flex flex-row items-center justify-left gap-2 mb-2",children:[Object(U.jsx)("span",{className:"text-gray-500 italic",children:"National ID: "}),Object(U.jsx)("span",{className:"font-medium text-lg",children:this.props.candidate.n_id})]}),Object(U.jsxs)("div",{className:"flex flex-row items-center justify-left gap-2 mb-2",children:[Object(U.jsx)("span",{className:"text-gray-500 italic",children:"Phone: "}),Object(U.jsx)("span",{className:"font-medium text-lg",children:this.props.candidate.phone_number})]}),Object(U.jsxs)("div",{className:"flex flex-row items-center justify-left gap-2 mb-2",children:[Object(U.jsx)("span",{className:"text-gray-500 italic",children:"Email: "}),Object(U.jsx)("span",{className:"font-medium text-lg",children:this.props.candidate.email})]}),Object(U.jsxs)("div",{className:"flex flex-row items-center justify-left gap-2 mb-2",children:[Object(U.jsx)("span",{className:"text-gray-500 italic",children:"District: "}),Object(U.jsx)("span",{className:"font-medium text-lg",children:this.props.candidate.user_info.district})]})]}),Object(U.jsxs)("div",{className:"flex items-center gap-1",children:[Object(U.jsx)("span",{className:"text-gray-500 italic",children:"Status:"}),Object(U.jsx)("span",{className:"text-".concat("waiting"===this.props.doc.validation_status?"yellow":"approved"===this.props.doc.validation_status?"blue":"gray","-700 font-semibold text-lg"),children:"waiting"===this.props.doc.validation_status?"Pending":"approved"===this.props.doc.validation_status?"Approved":"Rejected"})]})]})}),this.props.doc.files&&(this.props.actionTaken?Object(U.jsx)(te,{disability:!!this.props.candidate.disability&&this.props.candidate.disability,in_education:!!this.props.candidate.in_education&&this.props.candidate.in_education,expiration:s,setActionTaken:this.props.setActionTaken,actionTaken:this.props.actionTaken,setResponseMsg:this.props.setResponseMsg,responseMsg:this.props.responseMsg,loadingRequest:this.props.loadingRequest,handleVerify:this.props.handleVerify,error:this.props.error,setError:this.props.setError,isTeachingDocument:this.props.isTeachingDocument,setIsTeachingDocument:this.props.setIsTeachingDocument,hasDisabilityDocument:this.props.hasDisabilityDocument,setHasDisabilityDocument:this.props.setHasDisabilityDocument,expiration_date:this.props.expiration_date,setExpirationDate:this.props.setExpirationDate}):Object(U.jsx)($,{docStatus:this.props.doc.validation_status,setActionTaken:this.props.setActionTaken,loading:this.props.loadingRequest,loadingImage:this.props.loadingImage,setResponse:this.props.setResponse}))]})})]})}}]),s}(r.Component),ae=l.a.memo(Object(p.b)((function(e){return{documentCategories:e.document,socket:e.socket}}))(se)),ie=function(e,t){var s=e.findIndex((function(e){return e.page===t}));if(s>=0){var a=[];return e[s].data.forEach((function(e){var t=e;t.user_id=e._id,a.push(t)})),a}},ne=function(e){Object(o.a)(s,e);var t=Object(c.a)(s);function s(e){var a;return Object(i.a)(this,s),(a=t.call(this,e)).setLoadingUsers=function(e){a.setState({loadingUsers:e})},a.setLoading=function(e){a.setState({loading:e})},a.setLoadingImage=function(e){a.setState({loadingImage:e})},a.setCurrentPage=function(e){a.setState({currentPage:e})},a.setLastLoadedPage=function(e){a.setState({lastLoadedPage:e})},a.setDocument_index=function(e){a.setState({document_index:e})},a.setDocumentId=function(e){a.setState({document_id:e})},a.setCandidateId=function(e){a.setState({candidate_id:e})},a.setViewDoc=function(e){a.setState({viewDoc:e})},a.setResponseMsg=function(e){a.setState({responseMsg:e})},a.setResponse=function(e){a.setState({response:e,isTeachingDocument:!1})},a.setError=function(e){a.setState({error:e})},a.setActionTaken=function(e){a.setState({actionTaken:e})},a.setIsTeachingDocument=function(e){a.setState({isTeachingDocument:e})},a.setHasDisabilityDocument=function(e){a.setState({hasDisabilityDocument:e})},a.setViewCandidate=function(e){a.setState({viewCandidate:e})},a.componentDidMount=function(){(null===a.props.documentReducer.documentCategory||a.props.documentReducer.documentCategory.length<=0)&&a.props.getDocumentCategory(),(null===a.props.documentReducer.documentSubCategory||a.props.documentReducer.documentSubCategory.length<=0)&&a.props.getDocumentSubCategory(),(null===a.props.documentReducer.documentFields||a.props.documentReducer.documentFields.length<=0)&&a.props.getDocumentFields(),a.props.userDocuments.users?(a.setLoadingUsers(!1),a.setLoading(!1)):a.props.getCandidateDocuments(1,(function(e,t,s){a.setLoadingUsers(e),a.setLoading(e),e||(Object(E.f)(t)||a.props.PushPopupAlert({title:t,theme:A.a.danger}),s&&(a.setLoadingUsers(!1),a.setLoading(!1),console.log("===================================="),console.log({setLoadingUsers:e}),console.log("====================================")))})),a.props.socket.socket.on(P.e.DOCUMENT_VALIDATION_CLIENT,(function(e){console.log("=================DOCUMENT_VALIDATION_CLIENT==================="),console.log({data:e}),console.log("=================DOCUMENT_VALIDATION_CLIENT===================");var t=Object(f.a)(a.state.openedDocument);if("all-opened"===e.actionType)null!==e.previous&&(t=t.filter((function(t){return t!==e.previous}))),t.push(e.data.doc_id),console.log("=================DOCUMENT_VALIDATION_CLIENT==================="),console.log({data:e,opened_document:t,orginal:a.state.openedDocument}),console.log("=================DOCUMENT_VALIDATION_CLIENT===================");else if("all-closed"===e.actionType)t=t.filter((function(t){return t!==e.data.doc_id}));else if("all-validated"===e.actionType){var s=e.data;a.props.allVerifyDocument(s,a.state.currentPage),t.push(e.data.doc_id)}a.setState({openedDocument:t})}))},a.componentWillUnmount=function(){a.props.socket.socket.off(P.e.DOCUMENT_VALIDATION_CLIENT)},a.FC_SocketServeAction=function(e){a.props.socket.socket.emit(P.e.DOCUMENT_VALIDATION_SERVER,e)},a.reloadUsers=function(e){a.state.lastLoadedPage.includes(e)||a.props.getCandidateDocuments(e,(function(t,s,i){a.setLoadingUsers(t),t||(Object(E.f)(s)||a.props.PushPopupAlert({title:s,theme:A.a.danger}),i&&(a.setLastLoadedPage([].concat(Object(f.a)(a.state.lastLoadedPage),[e])),a.setLoadingUsers(!1),console.log("===================================="),console.log({setLoadingUsers:t}),console.log("====================================")))}))},a.generatePages=function(e){var t=Math.ceil(e/S.h),s=Array.from(Array(t+1-1).keys()).map((function(e){return 1+e})).slice(0,5);t>4&&a.state.currentPage>2&&(s=t-a.state.currentPage>1?[a.state.currentPage-2,a.state.currentPage-1,a.state.currentPage,a.state.currentPage+1,a.state.currentPage+2]:t-a.state.currentPage===1?[a.state.currentPage-3,a.state.currentPage-2,a.state.currentPage-1,a.state.currentPage,a.state.currentPage+1]:[a.state.currentPage-4,a.state.currentPage-3,a.state.currentPage-2,a.state.currentPage-1,a.state.currentPage]);var i=!1,n=!1,o=!1,c=!1;return t>1&&1!==a.state.currentPage&&(o=!0),t>1&&a.state.currentPage!==t&&(c=!0),t>3&&a.state.currentPage>3&&(i=!0),t>3&&a.state.currentPage!==t&&t-a.state.currentPage>2&&(n=!0),Object(U.jsxs)("div",{className:"flex text-gray-700",children:[i&&Object(U.jsx)("button",{className:"h-12 w-12 ml-1 flex justify-center items-center rounded-full bg-gray-100 hover:bg-gray-200 cursor-pointer",onClick:function(){return a.setCurrentPage(1)},children:Object(U.jsx)(O.e,{className:"w-6 h-6"})}),o&&Object(U.jsx)("button",{className:"h-12 w-12 ml-1 flex justify-center items-center rounded-full bg-gray-100 hover:bg-gray-200",onClick:function(){return a.setCurrentPage(a.state.currentPage-1)},children:Object(U.jsx)(O.g,{className:"w-6 h-6"})}),Object(U.jsx)("div",{className:"flex h-12 font-medium rounded-full mx-1 bg-gray-100",children:s.map((function(e,t){return Object(U.jsx)("button",{className:"w-12 md:flex justify-center items-center gap-2 rounded-full ".concat(a.state.currentPage===e?"bg-gray-600 hover:bg-gray-500 text-white cursor-auto":"hover:bg-gray-200"),disabled:a.state.currentPage===e,onClick:function(){a.setCurrentPage(e),a.reloadUsers(e)},children:e},t)}))}),c&&Object(U.jsx)("button",{className:"h-12 w-12 mr-1 flex justify-center items-center rounded-full bg-gray-100 hover:bg-gray-200 cursor-pointer",onClick:function(){a.setCurrentPage(a.state.currentPage+1),a.reloadUsers(a.state.currentPage+1)},children:Object(U.jsx)(O.h,{className:"w-6 h-6"})}),n&&Object(U.jsx)("button",{className:"h-12 w-12 mr-1 flex justify-center items-center rounded-full bg-gray-100 hover:bg-gray-200 cursor-pointer",onClick:function(){a.setCurrentPage(t),a.reloadUsers(t)},children:Object(U.jsx)(O.f,{className:"w-6 h-6"})})]})},a.getDocByDocId=function(e,t,s){var a,i=e.find((function(e){return e.user_id===t}));return i&&(a=i.details.find((function(e){return e.doc_id===s}))),{user:i,doc:a}},a.FC_shortListing=function(){var e=Object(j.a)(x.a.mark((function e(t){var s,i;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(s=a.props.userDocuments.users&&ie(a.props.userDocuments.users,a.state.currentPage)&&Object(L.c)(ie(a.props.userDocuments.users,a.state.currentPage),t))){e.next=15;break}return e.prev=2,e.next=5,y.a.patch("".concat(C.a.APPLICATION,"/apply/doccheckshortlist/").concat(t),{email:s.email,phone_number:s.phone_number});case 5:i=e.sent,console.log({FC_shortListing:i}),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),console.error({error:e.t0}),a.props.PushPopupAlert({title:Object(T.a)(e.t0),theme:A.a.danger});case 13:e.next=16;break;case 15:console.error("Candidate not found with this Id: ".concat(t));case 16:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),a.handleVerify=Object(j.a)(x.a.mark((function e(){var t,s,i;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a.state.candidate_id.length>0&&a.state.document_id.length>0&&a.state.response)){e.next=19;break}if("rejected"!==a.state.response||a.state.responseMsg.length){e.next=3;break}return e.abrupt("return",a.setState({error:{element:"comment",msg:"Reason of rejection is required"},loadingRequest:!1}));case 3:return a.setState({loadingRequest:!0}),t=a.getDocByDocId(ie(a.props.userDocuments.users,a.state.currentPage),a.state.candidate_id,a.state.document_id).user,s={user_id:a.state.candidate_id,doc_id:a.state.document_id,validation_status:"approved"===a.state.response?R.a.APPROVED:R.a.REJECTED,validated_by:{user_id:a.props.auth.user.user_id,comment:a.state.responseMsg,validation_status:"approved"===a.state.response?R.a.APPROVED:R.a.REJECTED},in_education:a.state.isTeachingDocument?a.state.isTeachingDocument:t.in_education,disability:a.state.hasDisabilityDocument?a.state.hasDisabilityDocument:t.disability,expiration_date:a.state.expiration_date},i={user_id:a.state.candidate_id,doc_id:a.state.document_id,validation_status:"approved"===a.state.response?R.a.APPROVED:R.a.REJECTED,validated_by:{user_id:a.props.auth.user.user_id,comment:a.state.responseMsg,validation_status:"approved"===a.state.response?R.a.APPROVED:R.a.REJECTED,date:""},in_education:a.state.isTeachingDocument?a.state.isTeachingDocument:t.in_education,disability:a.state.hasDisabilityDocument?a.state.hasDisabilityDocument:t.disability,expiration_date:a.state.expiration_date},e.prev=7,e.next=10,y.a.post("".concat(C.a.USER,"/docs/validateuserdoc"),s);case 10:e.sent&&(a.props.allVerifyDocument(i,a.state.currentPage),a.FC_SocketServeAction({data:i,currentPage:a.state.currentPage,actionType:"all-validated",previous:null}),a.FC_shortListing(a.state.candidate_id),a.props.PushPopupAlert({title:"Document ".concat(a.state.response," successful"),theme:A.a.success}),a.setState({response:"approved",responseMsg:"",actionTaken:"",hasDisabilityDocument:!1,isTeachingDocument:!1})),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(7),console.error(e.t0),a.props.PushPopupAlert({title:Object(T.a)(e.t0),theme:A.a.danger});case 18:a.setState({loadingRequest:!1});case 19:case"end":return e.stop()}}),e,null,[[7,14]])}))),a.state={loadingUsers:!0,loading:!0,loadingRequest:!1,loadingImage:!0,currentPage:1,lastLoadedPage:[1],viewCandidate:!1,viewDoc:!1,filterByCategory:"",filterByCategoryId:"",filterBySubCategory:"",filterBySubCategoryId:"",responseMsg:"",response:"approved",document_id:"",candidate_id:"",error:{element:"",msg:""},document_index:null,isTeachingDocument:!1,hasDisabilityDocument:!1,actionTaken:"",expiration_date:"",openedDocument:[]},a}return Object(n.a)(s,[{key:"render",value:function(){var e=this;return!0===this.state.loading||null===this.props.userDocuments.users?Object(U.jsx)("div",{className:"text-center mt-7 font-bold text-4xl text-gray-400 animate-pulse",children:"Loading documents..."}):Object(U.jsxs)("div",{className:"w-full my-5",children:[Object(U.jsx)("div",{className:"my-2 mx-2 rounded flex flex-row justify-between items-center",children:Object(U.jsxs)("div",{className:"flex flex-row items-center gap-3",children:[Object(U.jsx)(v.d,{className:"text-6xl text-blue-600"}),Object(U.jsx)("div",{className:"flex flex-col",children:Object(U.jsx)("span",{className:"text-blue-600 text-3xl font-bold",children:"Document validation - All candidate(s)"})})]})}),Object(U.jsx)("div",{className:"bg-white shadow rounded border border-gray-2 p-2 w-full overflow-x-auto",children:!this.state.viewCandidate&&Object(U.jsxs)("section",{className:"",children:[Object(U.jsx)(H,{loadingCandidates:this.state.loadingUsers,loadingRequest:this.state.loadingRequest,filterByCategoryId:this.state.filterByCategoryId,filterBySubCategoryId:this.state.filterBySubCategoryId,candidateList:ie(this.props.userDocuments.users,this.state.currentPage),documentCategories:this.props.documentReducer,setDocumentId:this.setDocumentId,setCandidateId:this.setCandidateId,setLoadingImage:this.setLoadingImage,setViewDoc:this.setViewDoc,setDocument_index:this.setDocument_index,currentPage:this.state.currentPage,openedDocument:this.state.openedDocument}),!this.state.loadingUsers&&Object(U.jsx)("div",{className:"flex flex-col items-center my-3",children:this.props.userDocuments.total_users&&this.generatePages(this.props.userDocuments.total_users)})]})}),this.state.viewDoc&&null!==this.state.document_index&&ie(this.props.userDocuments.users,this.state.currentPage)&&this.getDocByDocId(ie(this.props.userDocuments.users,this.state.currentPage),this.state.candidate_id,this.state.document_id).doc&&this.getDocByDocId(ie(this.props.userDocuments.users,this.state.currentPage),this.state.candidate_id,this.state.document_id).user&&Object(U.jsx)(k.d,{backDrop:!0,theme:k.c.default,close:function(){},displayClose:!1,backDropClose:!1,title:"",widthSizeClass:k.b.maxWidth,padding:{title:!1,body:!1,footer:!1},children:Object(U.jsx)(ae,{error:this.state.error,doc:this.getDocByDocId(ie(this.props.userDocuments.users,this.state.currentPage),this.state.candidate_id,this.state.document_id).doc,candidate:this.getDocByDocId(ie(this.props.userDocuments.users,this.state.currentPage),this.state.candidate_id,this.state.document_id).user,responseMsg:this.state.responseMsg,loadingRequest:this.state.loadingRequest,setResponseMsg:this.setResponseMsg,setResponse:this.setResponse,handleVerify:this.handleVerify,setViewCandidate:this.setViewCandidate,setError:this.setError,setViewDoc:this.setViewDoc,setCandidateId:this.setCandidateId,setDocumentId:this.setDocumentId,actionTaken:this.state.actionTaken,setActionTaken:this.setActionTaken,document_index:this.state.document_index,setDocument_index:this.setDocument_index,candidateList:ie(this.props.userDocuments.users,this.state.currentPage),isTeachingDocument:this.state.isTeachingDocument,setIsTeachingDocument:this.setIsTeachingDocument,hasDisabilityDocument:this.state.hasDisabilityDocument,setHasDisabilityDocument:this.setHasDisabilityDocument,loadingImage:this.state.loadingImage,setLoadingImage:this.setLoadingImage,expiration_date:this.state.expiration_date,setExpirationDate:function(t){return e.setState({expiration_date:t})},currentPage:this.state.currentPage,openedDocuments:this.state.openedDocument})})]})}}]),s}(r.Component),oe=l.a.memo(Object(p.b)((function(e){return{auth:e.auth,userDocuments:e.userDocuments,documentReducer:e.document,socket:e.socket}}),{allVerifyDocument:function(e,t){return function(s){s({type:D.a.ALL_VERIFY_DOCUMENT,payload:{data:e,page:t}})}},getCandidateDocuments:function(e,t){return t&&t(!0,""),function(){var s=Object(j.a)(x.a.mark((function s(a){var i;return x.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,Object(I.b)(),s.next=4,y.a.get("".concat(C.a.USER,"/docs/remainingdocs?page=").concat(e,"&limit=").concat(S.h));case 4:i=s.sent,console.log({getCandidateDocuments:i}),a({type:D.a.GET_CANDIDATE_DOCUMENTS,payload:{users:[{data:i.data.users,page:e}],next:i.data.next,previous:i.data.previous,total_users:i.data.total_users}}),t&&t(!1,"",i.data.users),s.next=14;break;case 10:s.prev=10,s.t0=s.catch(0),console.error({user_error:s.t0}),t&&t(!1,Object(T.a)(s.t0));case 14:case"end":return s.stop()}}),s,null,[[0,10]])})));return function(e){return s.apply(this,arguments)}}()},getDocumentCategory:w.i,getDocumentSubCategory:w.k,getDocumentFields:w.j,PushPopupAlert:N.Rb})(ne)),ce=s(205),re=s(686),le=s(92),de=s(30),ue=s(821),pe=function(e){Object(o.a)(s,e);var t=Object(c.a)(s);function s(e){var a;return Object(i.a)(this,s),(a=t.call(this,e)).setLoading=function(e){a.setState({loading:e})},a.setTabsController=function(e){a.setState({tabsController:e})},a.setFilterByCategory=function(e){a.setState({filterByCategory:e})},a.setFilterBySubCategory=function(e){a.setState({filterBySubCategory:e})},a.setNotVerified=function(e){a.setState({notVerified:e})},a.componentDidMount=function(){!a.props.documentCategories.documentFields&&a.state.loading&&(a.props.getDocumentFields(),a.setLoading(!1)),a.props.documentCategories.documentFields&&a.state.loading&&a.setLoading(!1)},a.filterDocuments=function(e,t,s){return t.length>0&&s.length>0?e.filter((function(e){return e.sub_category_id===s&&e.category_id===t})):t.length>0?e.filter((function(e){return e.category_id===t})):e},a.state={loading:!0,tabsController:"waiting",filterByCategory:a.props.filterByCategoryId,filterBySubCategory:a.props.filterBySubCategoryId,notVerified:!1},a}return Object(n.a)(s,[{key:"render",value:function(){var e=this;return Object(U.jsxs)("div",{className:"w-full flex bg-gray-100 h-full flex-col md:flex-row md:items-start",children:[Object(U.jsxs)("section",{className:"bg-white h-full w-1/6 p-2 m-3 border border-gray-200 rounded",children:[this.state.notVerified&&Object(U.jsxs)("section",{className:"".concat("all"===this.state.filterByCategory||Object(E.f)(this.state.filterByCategory)?"bg-blue-500 text-white font-bold":"bg-blue-100 text-blue-800"," mb-1 hover:font-bold py-1 hover:bg-blue-400 hover:text-white --font-bold  px-2 rounded-md flex cursor-pointer items-center animate__animated animate__fadeIn"),onClick:function(){e.setFilterByCategory(""),e.setFilterBySubCategory("")},children:[Object(U.jsxs)("section",{className:"flex-1",children:[Object(U.jsx)(d.n,{className:"inline-block mr-1 text-xs"}),Object(U.jsx)("span",{children:"All"})]}),Object(U.jsx)("span",{className:"px-0.5 my-1 text-xs bg-blue-600 text-white rounded-full",children:this.props.candidate&&Object(h.c)(this.filterDocuments(this.props.candidate.details,this.props.filterByCategoryId,this.props.filterBySubCategoryId),"waiting")})]}),this.props.documentCategories.documentCategory&&this.props.documentCategories.documentCategory.map((function(t,s){return Object(U.jsx)(r.Fragment,{children:Object(h.d)(e.props.candidate.details,"docCategory",t.user_detail_category_id)>0&&Object(U.jsxs)("section",{children:[!e.state.notVerified&&e.setNotVerified(!0),Object(U.jsxs)("section",{className:"".concat(e.state.filterByCategory===t.user_detail_category_id?"bg-blue-500 text-white font-bold":"bg-blue-100 text-blue-800"," mb-1 hover:font-bold py-1 hover:bg-blue-400 hover:text-white --font-bold  px-2 rounded-md flex cursor-pointer items-center animate__animated animate__fadeIn"),onClick:function(){e.setFilterByCategory(t.user_detail_category_id),e.setFilterBySubCategory("")},children:[Object(U.jsxs)("section",{className:"flex-1",children:[Object(U.jsx)(d.n,{className:"inline-block mr-1 text-xs"}),Object(U.jsx)("span",{children:t.title})]}),Object(U.jsx)("span",{className:"px-0.5 my-1 text-xs bg-blue-600 text-white rounded-full",children:Object(h.d)(e.props.candidate.details,"docCategory",t.user_detail_category_id)})]}),e.state.filterByCategory===t.user_detail_category_id&&e.props.documentCategories.documentSubCategory&&e.props.documentCategories.documentSubCategory.filter((function(e){return e.category_id===t.user_detail_category_id})).map((function(t,s){return Object(h.d)(e.props.candidate.details,"docSubCategory",t.user_detail_subcategory_id)>0&&Object(U.jsx)("div",{className:"ml-3 border-l-2 border-blue-200 -mt-1 pt-2 mb-2 pl-1",children:Object(U.jsxs)("div",{className:"animate__animated animate__fadeIn animate__faster ".concat(e.state.filterBySubCategory===t.user_detail_subcategory_id?"bg-blue-500 text-white font-bold":" text-blue-800"," bg-blue-200 rounded-md px-1 mb-1 flex items-center py-1 font-bold"),onClick:function(){e.setFilterBySubCategory(t.user_detail_subcategory_id)},children:[Object(U.jsxs)("section",{className:"flex-1",children:[Object(U.jsx)(d.n,{className:"inline-block mr-0.1 text-xs ".concat(e.state.filterBySubCategory===t.user_detail_subcategory_id?"text-white":"")}),Object(U.jsx)("span",{children:t.title})]}),Object(U.jsx)("span",{className:"px-0.5 my-1 text-xs bg-blue-600 text-white rounded-full",children:Object(h.d)(e.props.candidate.details,"docSubCategory",t.user_detail_subcategory_id)})]})},s+t.user_detail_subcategory_id)}))]})},s+t.user_detail_category_id)})),!this.state.notVerified&&Object(U.jsx)("section",{className:"bg-blue-100 text-blue-800 mb-1 hover:font-bold py-1 hover:bg-blue-400 hover:text-white --font-bold  px-2 rounded-md flex cursor-pointer items-center animate__animated animate__fadeIn",children:Object(U.jsxs)("section",{className:"flex-1",children:[Object(U.jsx)(d.n,{className:"inline-block mr-1 text-xs"}),Object(U.jsx)("span",{children:"All Are Verified"})]})})]}),Object(U.jsxs)("section",{className:"w-5/6 h-full my-3 mr-3",children:[Object(U.jsxs)("div",{className:"w-full bg-white flex items-center justify-evenly border border-gray-200 rounded",children:[Object(U.jsx)("section",{className:"cursor-pointer",onClick:function(){return e.setTabsController("waiting")},children:Object(U.jsxs)("div",{className:"flex items-center py-4 px-2 text-yellow-800 gap-1 ".concat("waiting"===this.state.tabsController&&"border-b-4 border-yellow-800"," animate__animated animate__pulse"),children:[Object(U.jsx)(d.R,{className:"w-6 h-6"}),Object(U.jsx)("span",{children:"Pending"}),Object(U.jsxs)("span",{children:["(",this.props.candidate&&Object(h.c)(this.filterDocuments(this.props.candidate.details,this.props.filterByCategoryId,this.props.filterBySubCategoryId),"waiting"),")"]})]})}),Object(U.jsx)("section",{className:"cursor-pointer",onClick:function(){return e.setTabsController("rejected")},children:Object(U.jsxs)("div",{className:"flex items-center py-4 px-2 text-gray-700 gap-1 ".concat("rejected"===this.state.tabsController&&"border-b-4 border-gray-700"," animate__animated animate__pulse"),children:[Object(U.jsx)(d.Fb,{className:"w-6 h-6"}),Object(U.jsx)("span",{children:"Rejected"}),Object(U.jsxs)("span",{children:["(",this.props.candidate&&Object(h.c)(this.filterDocuments(this.props.candidate.details,this.props.filterByCategoryId,this.props.filterBySubCategoryId),"rejected"),")"]})]})}),Object(U.jsx)("section",{className:"cursor-pointer",onClick:function(){return e.setTabsController("approved")},children:Object(U.jsxs)("div",{className:"flex items-center py-4 px-2 text-blue-700 gap-1 ".concat("approved"===this.state.tabsController&&" border-b-4 border-blue-700"," animate__animated animate__pulse"),children:[Object(U.jsx)(Q.i,{className:"w-6 h-6"}),Object(U.jsx)("span",{children:"Approved"}),Object(U.jsxs)("span",{children:["(",this.props.candidate&&Object(h.c)(this.filterDocuments(this.props.candidate.details,this.props.filterByCategoryId,this.props.filterBySubCategoryId),"approved"),")"]})]})})]}),Object(U.jsx)("section",{className:"w-full h-full my-3",children:this.props.candidate&&this.filterDocuments(this.props.candidate.details,this.state.filterByCategory,this.state.filterBySubCategory).filter((function(t){return t.validation_status===e.state.tabsController&&t.files.length>0})).length>0?Object(U.jsx)("section",{className:"animate__animated animate__fadeIn animate__faster",children:this.state.loading?Object(U.jsx)(ue.a,{}):this.filterDocuments(this.props.candidate.details,this.state.filterByCategory,this.state.filterBySubCategory).filter((function(t){return t.validation_status===e.state.tabsController&&t.files.length>0})).map((function(t,s){return Object(U.jsxs)("div",{className:"bg-white border border-gray-200 hover:border-blue-500 cursor-pointer rounded mb-3 p-4 flex justify-between items-start animate__animated animate__fadeIn group",onClick:function(){e.props.setViewDoc(!0),e.props.setDocumentId(t.doc_id),e.props.setDocument_index(s),e.props.setCandidateId(e.props.candidate._id)},children:[Object(U.jsxs)("div",{children:[Object(U.jsx)("h2",{className:"text-balck font-semibold text-xl",children:Object(h.b)(e.props.documentCategories,t).main}),Object(U.jsxs)("div",{className:"flex items-center gap-2",children:[Object(U.jsx)("span",{className:"text-gray-500 italic",children:"Status:"}),Object(U.jsx)("span",{className:"text-".concat("waiting"===t.validation_status?"yellow":"approved"===t.validation_status?"blue":"gray","-800"),children:"waiting"===t.validation_status?"Pending":"approved"===t.validation_status?"Approved":"Rejected"})]})]}),Object(U.jsxs)("button",{className:"bg-blue-500 p-2 text-white flex rounded items-center space-x-2 focus:outline-none group-hover:bg-blue-600",children:[Object(U.jsx)(V.h,{className:"w-5 h-5"}),"View doc"]})]},s+t.doc_id+Math.random())}))}):Object(U.jsxs)("div",{className:"bg-white border border-gray-200 rounded mb-3 p-4 text-gray-400 text-center animate__animated animate__pulse",children:[Object(U.jsx)(v.c,{className:"w-28 h-28 mx-auto mb-3"}),Object(U.jsx)("span",{className:"text-2xl font-mono font-semibold tracking-tighter",children:"No Data Found"})]})})]})]})}}]),s}(r.Component),me=l.a.memo(Object(p.b)((function(e){return{documentCategories:e.document}}),{getDocumentCategory:w.i,getDocumentSubCategory:w.k,getDocumentFields:w.j})(pe)),he=s(123),be=function(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"default",a=[];for(var i in t){var n=t[i].details;for(var o in n){var c=t[i].details[o];null!==c.files&&c.files.length>0&&"default"===s&&"waiting"===c.validation_status?a.push({user_id:t[i]._id,n_id:t[i].n_id,fname:t[i].user_info.fname,lname:t[i].user_info.lname,phone_number:t[i].phone_number,district:t[i].user_info.district,email:t[i].email,main_doc_title:Object(h.b)(e,c).main,category_id:c.category_id,sub_category_id:c.sub_category_id,category_subcategory_data:c.category_subcategory_data,title:c.title,description:c.description,files:c.files,start_year:c.start_year,end_year:c.end_year,school:c.school,details_email:c.email,names:c.names,details_phone_number:c.phone_number,company:c.company,year:c.year,doc_id:c.doc_id,validation_status:c.validation_status,validated_by:c.validated_by,doc_history_status:c.doc_history_status,get_in_date:c.get_in_date,approved:c.approved,exams:t[i].exams}):null!==c.files&&c.files.length>0&&"all"===s&&a.push({user_id:t[i]._id,names:t[i].user_info.fname+" "+t[i].user_info.lname,n_id:t[i].n_id,fname:t[i].user_info.fname,lname:t[i].user_info.lname,phone_number:t[i].phone_number,district:t[i].user_info.district,email:t[i].email,main_doc_title:Object(h.b)(e,c).main,category_id:c.category_id,sub_category_id:c.sub_category_id,category_subcategory_data:c.category_subcategory_data,title:c.title,description:c.description,files:c.files,start_year:c.start_year,end_year:c.end_year,school:c.school,details_email:c.email,details_phone_number:c.phone_number,company:c.company,year:c.year,doc_id:c.doc_id,validation_status:c.validation_status,validated_by:c.validated_by,doc_history_status:c.doc_history_status,get_in_date:c.get_in_date,approved:c.approved,exams:t[i].exams})}}return a},ge=l.a.memo(Object(p.b)((function(e){return{socket:e.socket}}))((function(e){var t=be(e.documentCategories,e.candidateList).filter((function(t){return!1===e.openedDocument.includes(t.doc_id)})),s=function(t){e.socket.socket.emit(P.e.DOCUMENT_VALIDATION_SERVER,t)};return Object(U.jsx)("div",{children:Object(U.jsx)(he.a,{columns:[{columnTitle:"#",alignText:"left",padding:"p-3"},{columnTitle:"Names",alignText:"left",padding:"p-3"},{columnTitle:"National ID",alignText:"left",padding:"p-3"},{columnTitle:"Document",alignText:"left",padding:"p-3"},{columnTitle:"Status",alignText:"left",padding:"p-3"},{columnTitle:"",alignText:"left",padding:"p-3"}],rows:function(){return void 0===e.selected_position||null===e.selected_position||void 0===e.selected_district||Object(E.f)(e.selected_district)?[Object(U.jsx)("tr",{children:Object(U.jsx)("td",{colSpan:6,className:"px-2 py-2",children:Object(U.jsxs)("div",{className:"flex flex-col text-gray-400 items-center justify-center bg-gray-100 rounded py-10",children:[Object(U.jsx)(v.c,{className:"text-8xl text-gray-400 mb-2 animate__animated animate__shakeX"}),Object(U.jsx)("span",{className:"text-sm font-bold",children:"Position & District are required to get data!"}),Object(U.jsx)("div",{className:"w-full mt-2 flex flex-row items-center justify-center",children:Object(U.jsxs)("ul",{className:"text-sm py-2 text-blue-600 font-bold flex flex-row gap-2",children:[void 0===e.selected_position||null===e.selected_position&&Object(U.jsx)("li",{className:"text-gray-600",children:"Please select position!"}),void 0===e.selected_district||Object(E.f)(e.selected_district)&&Object(U.jsx)("li",{className:"text-gray-600",children:"Please select district!"})]})})]})})},Math.random())]:e.loadingCandidates?[Object(U.jsxs)("tr",{className:"border-b border-gray-200",children:[Object(U.jsx)("td",{className:"p-3 text-center whitespace-nowrap",children:Object(U.jsx)("div",{className:"w-full h-4 rounded bg-gray-200 animate__animated animate__pulse animate__delay-5s animate__infinite"})}),Object(U.jsx)("td",{className:"p-3 text-center whitespace-nowrap",children:Object(U.jsx)("div",{className:"w-full h-4 rounded bg-gray-200 animate__animated animate__pulse animate__delay-5s animate__infinite"})}),Object(U.jsx)("td",{className:"p-3 text-center whitespace-nowrap",children:Object(U.jsx)("div",{className:"w-full h-4 rounded bg-gray-200 animate__animated animate__pulse animate__delay-5s animate__infinite"})}),Object(U.jsx)("td",{className:"p-3 text-center whitespace-nowrap",children:Object(U.jsx)("div",{className:"w-full h-4 rounded bg-gray-200 animate__animated animate__pulse animate__delay-5s animate__infinite"})}),Object(U.jsx)("td",{className:"p-3 text-center whitespace-nowrap",colSpan:2,children:Object(U.jsx)("div",{className:"w-full h-4 rounded bg-gray-200 animate__animated animate__pulse animate__delay-5s animate__infinite"})})]},Math.random()+Date()),Object(U.jsxs)("tr",{className:"border-b border-gray-200",children:[Object(U.jsx)("td",{className:"p-3 text-center whitespace-nowrap",children:Object(U.jsx)("div",{className:"w-full h-4 rounded bg-gray-200 animate__animated animate__pulse animate__delay-5s animate__infinite"})}),Object(U.jsx)("td",{className:"p-3 text-center whitespace-nowrap",children:Object(U.jsx)("div",{className:"w-full h-4 rounded bg-gray-200 animate__animated animate__pulse animate__delay-5s animate__infinite"})}),Object(U.jsx)("td",{className:"p-3 text-center whitespace-nowrap",children:Object(U.jsx)("div",{className:"w-full h-4 rounded bg-gray-200 animate__animated animate__pulse animate__delay-5s animate__infinite"})}),Object(U.jsx)("td",{className:"p-3 text-center whitespace-nowrap",children:Object(U.jsx)("div",{className:"w-full h-4 rounded bg-gray-200 animate__animated animate__pulse animate__delay-5s animate__infinite"})}),Object(U.jsx)("td",{className:"p-3 text-center whitespace-nowrap",colSpan:2,children:Object(U.jsx)("div",{className:"w-full h-4 rounded bg-gray-200 animate__animated animate__pulse animate__delay-5s animate__infinite"})})]},Math.random()+Date()),Object(U.jsxs)("tr",{className:"border-b border-gray-200",children:[Object(U.jsx)("td",{className:"p-3 text-center whitespace-nowrap",children:Object(U.jsx)("div",{className:"w-full h-4 rounded bg-gray-200 animate__animated animate__pulse animate__delay-5s animate__infinite"})}),Object(U.jsx)("td",{className:"p-3 text-center whitespace-nowrap",children:Object(U.jsx)("div",{className:"w-full h-4 rounded bg-gray-200 animate__animated animate__pulse animate__delay-5s animate__infinite"})}),Object(U.jsx)("td",{className:"p-3 text-center whitespace-nowrap",children:Object(U.jsx)("div",{className:"w-full h-4 rounded bg-gray-200 animate__animated animate__pulse animate__delay-5s animate__infinite"})}),Object(U.jsx)("td",{className:"p-3 text-center whitespace-nowrap",children:Object(U.jsx)("div",{className:"w-full h-4 rounded bg-gray-200 animate__animated animate__pulse animate__delay-5s animate__infinite"})}),Object(U.jsx)("td",{className:"p-3 text-center whitespace-nowrap",colSpan:2,children:Object(U.jsx)("div",{className:"w-full h-4 rounded bg-gray-200 animate__animated animate__pulse animate__delay-5s animate__infinite"})})]},Math.random()+Date()),Object(U.jsxs)("tr",{className:"border-b border-gray-200",children:[Object(U.jsx)("td",{className:"p-3 text-center whitespace-nowrap",children:Object(U.jsx)("div",{className:"w-full h-4 rounded bg-gray-200 animate__animated animate__pulse animate__delay-5s animate__infinite"})}),Object(U.jsx)("td",{className:"p-3 text-center whitespace-nowrap",children:Object(U.jsx)("div",{className:"w-full h-4 rounded bg-gray-200 animate__animated animate__pulse animate__delay-5s animate__infinite"})}),Object(U.jsx)("td",{className:"p-3 text-center whitespace-nowrap",children:Object(U.jsx)("div",{className:"w-full h-4 rounded bg-gray-200 animate__animated animate__pulse animate__delay-5s animate__infinite"})}),Object(U.jsx)("td",{className:"p-3 text-center whitespace-nowrap",children:Object(U.jsx)("div",{className:"w-full h-4 rounded bg-gray-200 animate__animated animate__pulse animate__delay-5s animate__infinite"})}),Object(U.jsx)("td",{className:"p-3 text-center whitespace-nowrap",colSpan:2,children:Object(U.jsx)("div",{className:"w-full h-4 rounded bg-gray-200 animate__animated animate__pulse animate__delay-5s animate__infinite"})})]},Math.random()+Date()),Object(U.jsxs)("tr",{className:"border-b border-gray-200",children:[Object(U.jsx)("td",{className:"p-3 text-center whitespace-nowrap",children:Object(U.jsx)("div",{className:"w-full h-4 rounded bg-gray-200 animate__animated animate__pulse animate__delay-5s animate__infinite"})}),Object(U.jsx)("td",{className:"p-3 text-center whitespace-nowrap",children:Object(U.jsx)("div",{className:"w-full h-4 rounded bg-gray-200 animate__animated animate__pulse animate__delay-5s animate__infinite"})}),Object(U.jsx)("td",{className:"p-3 text-center whitespace-nowrap",children:Object(U.jsx)("div",{className:"w-full h-4 rounded bg-gray-200 animate__animated animate__pulse animate__delay-5s animate__infinite"})}),Object(U.jsx)("td",{className:"p-3 text-center whitespace-nowrap",children:Object(U.jsx)("div",{className:"w-full h-4 rounded bg-gray-200 animate__animated animate__pulse animate__delay-5s animate__infinite"})}),Object(U.jsx)("td",{className:"p-3 text-center whitespace-nowrap",colSpan:2,children:Object(U.jsx)("div",{className:"w-full h-4 rounded bg-gray-200 animate__animated animate__pulse animate__delay-5s animate__infinite"})})]},Math.random()+Date())]:null!==e.candidateList&&!e.candidateList.length||!t.length?[Object(U.jsx)("tr",{className:"border-b border-gray-200",children:Object(U.jsx)("td",{className:"p-3 text-center whitespace-nowrap",colSpan:6,children:"No Data Found"})},Math.random()+Date())]:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"all",a=e;return"all"===t||Object(E.f)(t)?a=e:"all"===t||"all"===s||Object(E.f)(s)?"all"!==t&&(a=e.filter((function(e){return e.category_id===t}))):a=e.filter((function(e){return e.category_id===t&&e.sub_category_id===s})),a}(t,e.filterByCategoryId,e.filterBySubCategoryId).map((function(t,a){return Object(U.jsxs)("tr",{className:"border-b border-gray-200 cursor-pointer group hover:bg-gray-100",onClick:function(){e.setViewDoc(!0),e.setDocumentId(t.doc_id),e.setCandidateId(t.user_id),e.setDocument_index(a),e.setLoadingImage(!0),s({data:t,currentPage:1,actionType:"application-opened",previous:null})},children:[Object(U.jsx)("td",{className:"p-3 text-left whitespace-nowrap",children:a+1}),Object(U.jsx)("td",{className:"p-3 text-left",children:Object(U.jsx)("span",{children:t.fname+" "+t.lname})}),Object(U.jsx)("td",{className:"p-3 text-left",children:Object(U.jsx)("span",{children:t.n_id})}),Object(U.jsx)("td",{className:"py-3 px-3 text-left font-medium text-lg",children:t.main_doc_title}),Object(U.jsx)("td",{className:"py-3 px-5 text-left",children:Object(U.jsx)("span",{className:"text-sm font-medium bg-yellow-800 py-1 px-2 rounded text-yellow-100 align-middle",children:"waiting"===t.validation_status?"Pending":t.validation_status})}),Object(U.jsx)("td",{className:"text-right",children:Object(U.jsxs)("button",{className:"bg-blue-500 group-hover:bg-blue-600 text-blue-50 font-bold py-1 px-1 inline-flex rounded focus:outline-none",title:"View documents",disabled:e.loadingRequest,onClick:function(){e.setViewDoc(!0),e.setDocumentId(t.doc_id),e.setCandidateId(t.user_id)},children:[Object(U.jsx)(V.h,{className:"w-5 h-5"}),"View doc"]})})]},t.doc_id+a+Math.random())}))},pagination:!0,search:!1,thColor:"gray",loading:e.loadingCandidates})})}))),xe=function(e){var t=Object(r.useState)(e.time),s=Object(F.a)(t,2),a=s[0],i=s[1];return Object(r.useEffect)((function(){var e=setInterval((function(){a>0&&i(a-1),0===a&&clearInterval(e)}),1e3);return function(){clearInterval(e)}})),Object(U.jsx)(U.Fragment,{children:0===a?null:Object(U.jsxs)("button",{className:"flex items-center gap-2 bg-green-600 hover:bg-green-700 focus:outline-none rounded p-2 text-white font-semibold ".concat(e.className),onClick:function(){return e.onClick()},children:[Object(U.jsx)("div",{className:"rounded-full bg-white text-green-600 p-1 w-8 h-8",children:Object(U.jsx)("h1",{children:a<10?"0".concat(a):a})}),e.title]})})},je=l.a.memo(xe),fe=function(e){Object(o.a)(s,e);var t=Object(c.a)(s);function s(e){var n;return Object(i.a)(this,s),(n=t.call(this,e)).setSetFullscreen=function(e){n.setState({isFullscreen:e})},n.handleFullScreen=function(){n.state.isFullscreen?(Object(b.i)("doc-img","CLOSE"),n.setSetFullscreen(!1)):(n.setSetFullscreen(!0),Object(b.i)("doc-img","OPEN"))},n.getDocumentFileByIndex=function(e,t,s,a,i,o,c){var r,l=0;if(e.length<=0)return n.FC_cleanToClose(),!1;if(e.length-1<t){for(l=0,r=!1;!r&&e.length-1>=l;)void 0===e[l]||Object(E.f)(e[l].files)||r||(n.FC_SocketServeAction({data:e[l],currentPage:1,actionType:"application-opened",previous:n.props.doc.doc_id}),s(!0),a(e[l].doc_id),i(e[l].user_id),o(l),c(!0),n.props.setIsTeachingDocument(!1),n.props.setActionTaken(""),n.props.setResponseMsg(""),n.props.setHasDisabilityDocument(!1),n.props.setExpirationDate(""),r=!0),l++;return r||n.FC_cleanToClose(),!0}if(void 0===e[t]||Object(E.f)(e[t].files)){for(l=0,r=!1;!r&&e.length-1>=l;)void 0===e[l]||Object(E.f)(e[l].files)||r||(n.FC_SocketServeAction({data:e[l],currentPage:1,actionType:"application-opened",previous:n.props.doc.doc_id}),s(!0),a(e[l].doc_id),i(e[l].user_id),o(l),c(!0),n.props.setIsTeachingDocument(!1),n.props.setActionTaken(""),n.props.setResponseMsg(""),n.props.setHasDisabilityDocument(!1),n.props.setExpirationDate(""),r=!0),l++;return r||n.FC_cleanToClose(),!0}return n.FC_SocketServeAction({data:e[t],currentPage:1,actionType:"application-opened",previous:n.props.doc.doc_id}),s(!0),a(e[t].doc_id),i(e[t].user_id),o(t),c(!0),n.props.setIsTeachingDocument(!1),n.props.setActionTaken(""),n.props.setResponseMsg(""),n.props.setHasDisabilityDocument(!1),n.props.setExpirationDate(""),!0},n.handleNextPrev=function(e){var t=n.props.candidate.details.filter((function(e){return"waiting"===e.validation_status&&e.files&&e.files.length})),s=n.props.selectedSetting&&n.props.selectedSetting===a.documents?be(n.props.documentCategories,n.props.candidateList):t;s=s.filter((function(e){return!n.props.openedDocuments.includes(e.doc_id)}));var i=n.props.document_index;"NEXT"===e&&n.props.document_index<=s.length-1&&(i=n.props.document_index+1,n.props.selectedSetting&&n.props.selectedSetting===a.documents&&n.getDocumentFileByIndex(s,i,n.props.setViewDoc,n.props.setDocumentId,n.props.setCandidateId,n.props.setDocument_index,n.props.setLoadingImage)),"PREV"===e&&n.props.document_index>0&&(i=n.props.document_index-1,n.props.selectedSetting&&n.props.selectedSetting===a.documents&&n.getDocumentFileByIndex(s,i,n.props.setViewDoc,n.props.setDocumentId,n.props.setCandidateId,n.props.setDocument_index,n.props.setLoadingImage)),n.props.setIsTeachingDocument(!1)},n.isNextAllowed=function(){if(n.props.selectedSetting&&n.props.selectedSetting===a.documents){var e=be(n.props.documentCategories,n.props.candidateList);if(e.filter((function(e){return"waiting"===e.validation_status})).length<=1)return!1;if(!(n.props.document_index<=e.length-1))return!1;if(e[n.props.document_index+1]&&"waiting"===e[n.props.document_index+1].validation_status)return!0;if(e[n.props.document_index]&&"waiting"===e[n.props.document_index].validation_status)return!0}return!1},n.isPrevAllowed=function(){if(n.props.document_index>0)return!0;if(n.props.selectedSetting&&n.props.selectedSetting===a.documents){var e=be(n.props.documentCategories,n.props.candidateList);return void 0!==e[n.props.document_index-1]&&!Object(E.f)(e[n.props.document_index-1].files)}return!1},n.FC_SocketServeAction=function(e){n.props.socket.socket.emit(P.e.DOCUMENT_VALIDATION_SERVER,e)},n.FC_cleanToClose=function(){n.props.setViewDoc(!1),n.props.setDocumentId(""),n.props.setCandidateId(""),n.props.setDocument_index(null),n.props.setLoadingImage(!1),n.props.setViewCandidate(!1),n.props.setIsTeachingDocument(!1),n.props.setActionTaken(""),n.props.setResponseMsg(""),n.props.setHasDisabilityDocument(!1),n.props.setExpirationDate("")},n.state={isFullscreen:!1,failedToLoadFile:!1,change_decision:!1},n}return Object(n.a)(s,[{key:"render",value:function(){var e=this,t=this.props.documentCategories.documentCategory?this.props.documentCategories.documentCategory.find((function(t){return t.user_detail_category_id===e.props.doc.category_id})):void 0,s=!(!t||!t.fields.find((function(e){return e===R.b.expiration_date})));return Object(U.jsxs)("div",{className:"bg-gray-50 h-full md:h-screen grid grid-cols-1 md:grid-cols-3",children:[this.props.doc.files.length>0&&this.props.loadingImage&&Object(U.jsx)("div",{className:"col-span-2 max-h-full md:max-h-screen overflow-y-auto relative group",children:Object(U.jsxs)("div",{className:"relative",children:[!1===this.state.failedToLoadFile?Object(U.jsx)("div",{className:"w-full mx-auto mt-5 px-4",children:Object(U.jsx)("div",{className:"animate-pulse flex space-x-4",children:Object(U.jsx)("div",{className:"flex-1 space-y-4 py-4",children:Object(U.jsx)("div",{className:"bg-gray-300 rounded h-72 flex items-center justify-center",children:Object(U.jsxs)("h1",{className:"text-5xl text-gray-500 font-bold",children:["Loading"," ",Object(b.l)(Object(b.j)(this.props.doc.files))?"image":"pdf","..."]})})})})}):Object(U.jsx)("div",{className:"px-3",children:Object(U.jsx)(K.a,{title:"Error",description:Object(b.l)(Object(b.j)(this.props.doc.files))?"Failed to load image":"Failed to load pdf"})}),Object(U.jsx)("div",{className:"flex items-center justify-between absolute top-0 w-max px-2 py-2",children:Object(U.jsx)("button",{className:"flex items-center bg-gray-100 justify-center h-10 w-10 rounded-full shadow-md opacity-4 cursor-pointer",onClick:function(){e.FC_cleanToClose(),e.FC_SocketServeAction({data:e.props.doc,currentPage:1,actionType:"application-closed",previous:null})},disabled:this.props.loadingRequest,children:Object(U.jsx)(X.g,{className:"h-6 w-6 text-gray-500 group-hover:text-gray-800"})})})]})}),Object(U.jsxs)("div",{className:"col-span-2 h-auto md:max-h-screen overflow-y-auto relative bg-gray-200 group ".concat(this.props.loadingImage&&"hidden"),children:[this.props.doc.files.length>0?Object(b.l)(Object(b.j)(this.props.doc.files))?Object(U.jsx)("div",{className:"relative",children:Object(U.jsx)("img",{src:C.a.AUTH_FILES+this.props.doc.files,alt:"",className:"w-full md:w-auto h-auto md:max-h-screen mx-auto ".concat(this.props.loadingImage&&"hidden"),id:"doc-img",onLoad:function(){return e.props.setLoadingImage(!1)},onError:function(){return e.setState({failedToLoadFile:!0})},onDoubleClick:function(){return e.handleFullScreen()}})}):Object(U.jsx)(W.a,{file_url:C.a.AUTH_FILES+this.props.doc.files,class_name:"w-full h-screen md:max-h-screen mx-auto ".concat(this.props.loadingImage&&"hidden"),frame_title:"application PDF file view",setLoadingFile:this.props.setLoadingImage,setLoadingError:function(t){return e.setState({failedToLoadFile:t})}}):Object(U.jsxs)("div",{className:"text-center text-red-400 py-8 animate__animated animate__fadeIn",children:[Object(U.jsx)(z.f,{className:"mx-auto w-40 h-40"}),Object(U.jsx)("span",{className:"font-semibold text-4xl",children:"No Files Provided"})]}),Object(U.jsxs)("div",{className:"flex items-center justify-between absolute top-0 ".concat(Object(b.l)(Object(b.j)(this.props.doc.files))?"w-full":"w-max"," px-2 py-2"),children:[Object(U.jsx)("button",{className:"flex items-center bg-gray-100 justify-center h-10 w-10 rounded-full shadow-md opacity-4 cursor-pointer",onClick:function(){e.FC_cleanToClose(),e.FC_SocketServeAction({data:e.props.doc,currentPage:1,actionType:"application-closed",previous:null})},disabled:this.props.loadingRequest||this.props.loadingImage,children:Object(U.jsx)(X.g,{className:"h-6 w-6 text-gray-500 group-hover:text-gray-800"})}),this.props.doc.files.length>0&&Object(b.l)(Object(b.j)(this.props.doc.files))&&Object(U.jsxs)("div",{className:"flex items-center gap-2 opacity-0 group-hover:opacity-100",children:[Object(U.jsx)("button",{className:"flex items-center bg-gray-100 justify-center h-10 w-10 rounded-full shadow-md opacity-4 cursor-pointer hover:bg-blue-50",onClick:function(){return Object(b.t)("doc-img","IN")},children:Object(U.jsx)(J.l,{className:"h-6 w-6 text-gray-500"})}),Object(U.jsx)("button",{className:"flex items-center bg-gray-100 justify-center h-10 w-10 rounded-full shadow-md opacity-4 cursor-pointer hover:bg-blue-50",onClick:function(){return Object(b.t)("doc-img","OUT")},children:Object(U.jsx)(J.m,{className:"h-6 w-6 text-gray-500"})}),Object(U.jsx)("div",{className:"flex items-center bg-gray-100 justify-center h-10 w-10 rounded-full shadow-md opacity-4 cursor-pointer hover:bg-blue-50",onClick:function(){return Object(b.i)("doc-img","OPEN")},children:Object(U.jsx)(G.h,{className:"h-6 w-6 text-gray-500"})})]})]}),Object(U.jsxs)("div",{className:"absolute align-middle top-1/2 w-full flex ".concat(this.isPrevAllowed()?"justify-between":"justify-end"," z-20 opacity-0 group-hover:opacity-100 px-2"),children:[this.isPrevAllowed()&&Object(U.jsx)("button",{className:"inline-block bg-gray-100 cursor-pointer shadow-md rounded-full p-2 hover:bg-blue-50",onClick:function(){return e.handleNextPrev("PREV")},disabled:this.props.loadingRequest||this.props.loadingImage,children:Object(U.jsx)(Y.b,{className:"h-8 w-8 text-gray-500"})}),this.isNextAllowed()&&Object(U.jsx)("button",{className:"inline-block bg-gray-100 cursor-pointer shadow-md rounded-full p-2 hover:bg-blue-50",onClick:function(){return e.handleNextPrev("NEXT",e.props.doc.validation_status)},disabled:this.props.loadingRequest||this.props.loadingImage,children:Object(U.jsx)(Y.a,{className:"h-8 w-8 text-gray-500"})})]})]}),Object(U.jsx)("section",{className:"relative",children:Object(U.jsxs)("div",{className:"w-full flex md:flex-col flex-col justify-between items-start gap-2",children:[Object(U.jsx)("div",{className:"flex items-center gap-4 w-full",children:Object(U.jsxs)("section",{className:"p-3 w-full",children:[Object(U.jsxs)("div",{className:"flex items-center gap-2 border-b-2 my-2 py-1",children:[Object(U.jsx)(v.d,{className:"text-blue-600 text-xl"}),Object(U.jsx)("h2",{className:"uppercase tracking-wide text-xl font-semibold text-gray-700",children:"Document validation"})]}),Object(U.jsxs)("div",{className:"flex flex-row items-start justify-left gap-2 mb-2",children:[Object(U.jsx)("span",{className:"text-gray-500 italic mt-1",children:"Doc Title: "}),Object(U.jsx)("span",{className:"font-bold text-2xl",children:Object(h.b)(this.props.documentCategories,this.props.doc).main})]}),Object(U.jsx)("div",{className:"w-auto",children:Object(U.jsx)("img",{src:Object(b.c)(this.props.candidate.user_info.photo),className:"w-auto object-center object-cover h-28 rounded-lg border-2 border-gray-300",alt:""})}),Object(U.jsxs)("div",{className:"flex flex-row items-center justify-left gap-2 mb-2",children:[Object(U.jsx)("span",{className:"text-gray-500 italic",children:"Names: "}),Object(U.jsx)("span",{className:"font-medium text-lg",children:this.props.candidate.user_info.fname+" "+this.props.candidate.user_info.lname})]}),Object(U.jsxs)("section",{className:"animate__animated animate__fadeIn",children:[Object(U.jsxs)("div",{className:"flex flex-row items-center justify-left gap-2 mb-2",children:[Object(U.jsx)("span",{className:"text-gray-500 italic",children:"National ID: "}),Object(U.jsx)("span",{className:"font-medium text-lg",children:this.props.candidate.n_id})]}),Object(U.jsxs)("div",{className:"flex flex-row items-center justify-left gap-2 mb-2",children:[Object(U.jsx)("span",{className:"text-gray-500 italic",children:"Phone: "}),Object(U.jsx)("span",{className:"font-medium text-lg",children:this.props.candidate.phone_number})]}),Object(U.jsxs)("div",{className:"flex flex-row items-center justify-left gap-2 mb-2",children:[Object(U.jsx)("span",{className:"text-gray-500 italic",children:"Email: "}),Object(U.jsx)("span",{className:"font-medium text-lg",children:this.props.candidate.email})]}),Object(U.jsxs)("div",{className:"flex flex-row items-center justify-left gap-2 mb-2",children:[Object(U.jsx)("span",{className:"text-gray-500 italic",children:"District: "}),Object(U.jsx)("span",{className:"font-medium text-lg",children:this.props.candidate.user_info.district})]})]}),Object(U.jsxs)("div",{className:"flex items-center gap-1",children:[Object(U.jsx)("span",{className:"text-gray-500 italic",children:"Status:"}),Object(U.jsx)("span",{className:"text-".concat("waiting"===this.props.doc.validation_status?"yellow":"approved"===this.props.doc.validation_status?"blue":"gray","-700 font-semibold text-lg"),children:"waiting"===this.props.doc.validation_status?"Pending":"approved"===this.props.doc.validation_status?"Approved":"Rejected"})]})]})}),!this.props.actionTaken&&!0===this.props.undo_decision&&!1===this.state.change_decision&&"waiting"!==this.props.doc.validation_status&&Object(U.jsx)("div",{className:"flex w-full justify-end px-2",children:Object(U.jsx)(je,{title:"Change decision",className:"",time:20,onClick:function(){e.setState({change_decision:!0})}})}),this.props.doc.files&&(0===this.props.actionTaken.length?Object(U.jsx)($,{docStatus:this.props.doc.validation_status,setActionTaken:this.props.setActionTaken,loading:this.props.loadingRequest,setResponse:this.props.setResponse,loadingImage:this.props.loadingImage,change_decision:this.state.change_decision,setChangeDecision:function(t){return e.setState({change_decision:t})}}):Object(U.jsx)(te,{expiration:s,disability:!!this.props.candidate.disability&&this.props.candidate.disability,in_education:!!this.props.candidate.in_education&&this.props.candidate.in_education,setActionTaken:this.props.setActionTaken,actionTaken:this.props.actionTaken,setResponseMsg:this.props.setResponseMsg,responseMsg:this.props.responseMsg,loadingRequest:this.props.loadingRequest,handleVerify:this.props.handleVerify,error:this.props.error,setError:this.props.setError,isTeachingDocument:this.props.isTeachingDocument,setIsTeachingDocument:this.props.setIsTeachingDocument,hasDisabilityDocument:this.props.hasDisabilityDocument,setHasDisabilityDocument:this.props.setHasDisabilityDocument,expiration_date:this.props.expiration_date,setExpirationDate:this.props.setExpirationDate}))]})})]})}}]),s}(r.Component),_e=l.a.memo(Object(p.b)((function(e){return{documentCategories:e.document,socket:e.socket}}))(fe)),ye=s(48);!function(e){e.names="names",e.documents="documents"}(a||(a={}));var Oe,ve=function(e){Object(o.a)(s,e);var t=Object(c.a)(s);function s(e){var n;return Object(i.a)(this,s),(n=t.call(this,e)).setLoading=function(e){n.setState({loading:e})},n.setLoadingImage=function(e){n.setState({loadingImage:e})},n.setLoadingCandidates=function(e){n.setState({loadingCandidates:e})},n.setThisDistrict=function(e){n.setState({thisDistrict:e})},n.setThisCenter=function(e){n.setState({thisCenter:e})},n.setThisRoom=function(e){n.setState({thisRoom:e})},n.setFilterByCategory=function(e){n.setState({filterByCategory:e})},n.setFilterByCategoryId=function(e){n.setState({filterByCategoryId:e})},n.setFilterBySubCategory=function(e){n.setState({filterBySubCategory:e})},n.setFilterBySubCategoryId=function(e){n.setState({filterBySubCategoryId:e})},n.setCandidateId=function(e){n.setState({candidate_id:e})},n.setViewDoc=function(e){n.setState({viewDoc:e})},n.setViewCandidate=function(e){n.setState({viewCandidate:e})},n.setDocument_index=function(e){n.setState({document_index:e})},n.setDocumentId=function(e){n.setState({document_id:e})},n.setResponseMsg=function(e){n.setState({responseMsg:e})},n.setResponse=function(e){n.setState({response:e,isTeachingDocument:!1})},n.setError=function(e){n.setState({error:e})},n.setActionTaken=function(e){n.setState({actionTaken:e})},n.setIsTeachingDocument=function(e){n.setState({isTeachingDocument:e})},n.setHasDisabilityDocument=function(e){n.setState({hasDisabilityDocument:e})},n.loadDistrict=function(){var e=Object(j.a)(x.a.mark((function e(t){var s;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(!0,""),e.prev=1,e.next=4,y.a.get("".concat(C.a.APPLICATION,"/district"));case 4:s=e.sent,n.setState({district:s.data}),t(!1,""),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.error({code_error:Object(T.a)(e.t0)}),t(!1,Object(T.a)(e.t0));case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),n.loadDefaultData=function(e,t,s){if(!e&&Object(E.f)(t)){n.setLoading(!0);for(var a=[],i=(s?s.filter((function(e){return e.details.length>0})):[]).filter((function(e){return e.details.filter((function(e){return!1===Object(E.f)(e.files)}))})),o=[],c=0;c<i.length;c++)a.includes(i[c].email)||(a.push(i[c].email),o.push(i[c]));if(n.setState({candidateList:o,roomTables:Object(L.a)(n.props.locations)}),!n.state.distinctDistricts||!n.state.distinctDistricts.length){var r,l=[],d=[],u=Object(L.a)(n.props.locations).length;for(r=0;r<u;r++)l.includes(Object(L.a)(n.props.locations)[r].district_id)||(l.push(Object(L.a)(n.props.locations)[r].district_id),d.push(Object(L.a)(n.props.locations)[r]));n.setState({distinctDistricts:d})}n.setLoading(!1)}},n.FC_LoadCandidatesPositionDistrict=function(e,t){n.props.auth.application_session&&n.props.FC_GetCandidatesByPosition(e,t,n.props.auth.application_session._id,(function(e,t,s){console.log("=================getCandidatesInInstitute==================="),console.log({data:s}),console.log("=================getCandidatesInInstitute==================="),n.setLoadingCandidates(e),!e&&t.length>0&&(console.error({loadingCandidatesError:t}),n.props.PushPopupAlert({title:t,theme:A.a.danger}),n.setLoadingCandidates(!1)),n.loadDefaultData(e,t,s)}))},n.componentDidMount=function(){!0===Object(b.d)(n.props.auth.education_institution_id)&&((null===n.props.documentReducer.documentCategory||n.props.documentReducer.documentCategory.length<=0)&&Object(h.f)(n.props.auth.application_session)&&n.props.getDocumentCategory(),(null===n.props.documentReducer.documentSubCategory||n.props.documentReducer.documentSubCategory.length<=0)&&Object(h.f)(n.props.auth.application_session)&&n.props.getDocumentSubCategory(),(null===n.props.documentReducer.documentFields||n.props.documentReducer.documentFields.length<=0)&&Object(h.f)(n.props.auth.application_session)&&n.props.getDocumentFields(),(!n.state.district||n.state.district.length<=0)&&Object(h.f)(n.props.auth.application_session)&&n.loadDistrict((function(e,t){n.setLoading(e),e||t.length>0&&n.props.PushPopupAlert({title:t,theme:A.a.danger})})),null!==n.props.positions&&0!==n.props.positions.length||n.props.FC_GetPositionsByInstitution(n.props.auth.education_institution_id,(function(e,t){n.setLoading(e),console.log({status:e,msg:t}),t.length?n.props.PushPopupAlert({title:t,theme:A.a.danger}):!1===e&&n.setState({selectPosition:!0})})),n.props.socket.socket.on(P.e.DOCUMENT_VALIDATION_CLIENT,(function(e){console.log("=================DOCUMENT_VALIDATION_CLIENT==================="),console.log({data:e}),console.log("=================DOCUMENT_VALIDATION_CLIENT===================");var t=Object(f.a)(n.state.openedDocument);if("application-opened"===e.actionType)null!==e.previous&&(t=t.filter((function(t){return t!==e.previous}))),t.push(e.data.doc_id),console.log("=================DOCUMENT_VALIDATION_CLIENT==================="),console.log({data:e,opened_document:t,orginal:n.state.openedDocument}),console.log("=================DOCUMENT_VALIDATION_CLIENT===================");else if("application-closed"===e.actionType)t=t.filter((function(t){return t!==e.data.doc_id}));else if("application-validated"===e.actionType){var s=e.data;n.props.verifyDocument(s),t.push(e.data.doc_id)}n.setState({openedDocument:t})})))},n.componentWillUnmount=function(){n.props.socket.socket.off(P.e.DOCUMENT_VALIDATION_CLIENT)},n.FC_SocketServeAction=function(e){n.props.socket.socket.emit(P.e.DOCUMENT_VALIDATION_SERVER,e)},n.countById=function(e,t,s){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"waiting",i=e,o=0;if("docCategory"===t)if("all"===s){i=e.filter((function(e){return e.details.length>0&&e.details.filter((function(e){return e.files&&e.files.length>0&&e.validation_status===a}))})),o=0;for(var c=0;c<i.length;c++)for(var r=0;r<i[c].details.length;r++)o+=i[c].details[r].files&&i[c].details[r].files.length>0&&i[c].details[r].validation_status===a?1:0}else for(i=e.filter((function(e){return e.details.length>0&&e.details.filter((function(e){return e.category_id===s&&e.files&&e.files.length>0&&e.validation_status===a}))})),o=0,c=0;c<i.length;c++)for(r=0;r<i[c].details.length;r++)o+=i[c].details[r].category_id===s&&i[c].details[r].files&&i[c].details[r].files.length>0&&i[c].details[r].validation_status===a?1:0;else if("docSubCategory"===t){i=e.filter((function(e){return e.details.filter((function(e){return e.sub_category_id===s&&e.files&&e.files.length>0&&e.validation_status===a}))})),o=0;for(var l=0;l<i.length;l++)for(var d=0;d<i[l].details.length;d++)o+=i[l].details[d].sub_category_id===s&&i[l].details[d].files&&i[l].details[d].files.length>0&&i[l].details[d].validation_status===a?1:0}else if("DISTRICT"===t&&n.state.roomTables){var u=[],p=[],m=n.state.roomTables.filter((function(e){return e.district_id===s})).length;for(c=0;c<m;c++)u.includes(n.state.roomTables[c].center_id)||(u.push(n.state.roomTables[c].center_id),p.push(n.state.roomTables[c]));for(i=e.filter((function(e){return e.exams&&e.exams.filter((function(e){return u.includes(e.center_id)}))})),o=0,l=0;l<i.length;l++)for(d=0;d<i[l].details.length;d++)o+=i[l].details[d].files&&i[l].details[d].files.length>0&&i[l].details[d].validation_status===a?1:0}return o},n.FC_shortListing=function(){var e=Object(j.a)(x.a.mark((function e(t){var s,a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(s=Object(h.e)(n.state.candidateList,n.state.candidate_id,"").user)){e.next=15;break}return e.prev=2,e.next=5,y.a.patch("".concat(C.a.APPLICATION,"/apply/doccheckshortlist/").concat(t),{email:s.email,phone_number:s.phone_number});case 5:a=e.sent,console.log("===================================="),console.log({res:a}),console.log("===================================="),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),console.error({error:e.t0}),n.props.PushPopupAlert({title:Object(T.a)(e.t0),theme:A.a.danger});case 15:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t){return e.apply(this,arguments)}}(),n.FC_ValidateCandidateInState=function(e){var t=n.state.candidateList,s=t.findIndex((function(t){return t._id===e.user_id}));if(s>=0){var a=t[s].details.findIndex((function(t){return t.doc_id===e.doc_id}));a>=0&&(t[s].details[a].validation_status=e.validation_status)}n.setState({candidateList:t})},n.handleVerify=Object(j.a)(x.a.mark((function e(){var t,s,a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n.state.candidate_id.length>0&&n.state.document_id.length>0&&n.state.response)){e.next=28;break}if("rejected"!==n.state.response||n.state.responseMsg.length){e.next=3;break}return e.abrupt("return",n.setState({error:{element:"comment",msg:"Reason of rejection is required"},loadingRequest:!1}));case 3:return n.setState({loadingRequest:!0}),t=Object(h.e)(n.state.candidateList,n.state.candidate_id,n.state.document_id).user,s={user_id:n.state.candidate_id,doc_id:n.state.document_id,validation_status:"approved"===n.state.response?R.a.APPROVED:R.a.REJECTED,validated_by:{user_id:n.props.auth.user.user_id,comment:n.state.responseMsg,validation_status:"approved"===n.state.response?R.a.APPROVED:R.a.REJECTED},in_education:n.state.isTeachingDocument?n.state.isTeachingDocument:t.in_education,disability:n.state.hasDisabilityDocument?n.state.hasDisabilityDocument:t.disability,expiration_date:n.state.expiration_date},a={user_id:n.state.candidate_id,doc_id:n.state.document_id,validation_status:"approved"===n.state.response?R.a.APPROVED:R.a.REJECTED,validated_by:{user_id:n.props.auth.user.user_id,comment:n.state.responseMsg,validation_status:"approved"===n.state.response?R.a.APPROVED:R.a.REJECTED,date:""},in_education:n.state.isTeachingDocument?n.state.isTeachingDocument:t.in_education,disability:n.state.hasDisabilityDocument?n.state.hasDisabilityDocument:t.disability,expiration_date:n.state.expiration_date},e.prev=7,e.next=10,y.a.post("".concat(C.a.USER,"/docs/validateuserdoc"),s);case 10:if(!e.sent){e.next=21;break}return e.next=14,n.FC_shortListing(n.state.candidate_id);case 14:n.props.verifyDocument(a),n.FC_SocketServeAction({data:a,currentPage:1,actionType:"application-validated",previous:null}),n.FC_ValidateCandidateInState(a),n.setState({undo_decision:!0}),setTimeout((function(){n.setState({undo_decision:!1}),console.log("Test: ")}),2e4),n.props.PushPopupAlert({title:"Document ".concat(n.state.response," successful"),theme:A.a.success}),n.setState({response:"approved",responseMsg:"",actionTaken:"",hasDisabilityDocument:!1,isTeachingDocument:!1});case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(7),console.error(e.t0),n.props.PushPopupAlert({title:Object(T.a)(e.t0),theme:A.a.danger});case 27:n.setState({loadingRequest:!1});case 28:case"end":return e.stop()}}),e,null,[[7,23]])}))),n.state={loading:!0,loadingCandidates:!0,loadingRequest:!1,loadingImage:!0,viewDoc:!1,viewCandidate:!1,district:null,candidateList:[],selectedSetting:a.documents,roomTables:null,distinctDistricts:null,thisDistrict:null,thisCenter:null,thisRoom:null,settings:[{DocCheckingContentType:a.documents,caption:"View by Document"},{DocCheckingContentType:a.names,caption:"View by Candidate"}],filterByCategory:"",filterByCategoryId:"",filterBySubCategory:"",filterBySubCategoryId:"",responseMsg:"",response:"approved",document_id:"",candidate_id:"",error:{element:"",msg:""},document_index:null,isTeachingDocument:!1,hasDisabilityDocument:!1,actionTaken:"",expiration_date:"",openedDocument:[],selectPosition:!0,searchPositionInput:"",selected_position:null,selected_district:"",undo_decision:!1},n}return Object(n.a)(s,[{key:"render",value:function(){var e=this;if(!1===Object(b.d)(this.props.auth.education_institution_id))return Object(U.jsx)(K.a,{description:"You have no access to this page!"});if(!0===this.state.loading&&Object(h.f)(this.props.auth.application_session))return Object(U.jsx)("div",{className:"text-center mt-7 font-bold text-4xl text-gray-400 animate-pulse",children:"Loading..."});var t=Object(h.e)(this.state.candidateList,this.state.candidate_id,""),s=Object(h.e)(this.state.candidateList,this.state.candidate_id,this.state.document_id),i=this.props.documentReducer.documentSubCategory?this.props.documentReducer.documentSubCategory.filter((function(t){return t.category_id===e.state.filterByCategoryId})):[];return Object(U.jsxs)("div",{className:"w-full my-5",children:[Object(h.f)(this.props.auth.application_session)&&Object(U.jsxs)("div",{className:"flex flex-row items-center gap-4 mb-2",children:[Object(U.jsx)(v.d,{className:"text-blue-700 md:text-5xl text-3xl md:block hidden"}),Object(U.jsx)("div",{className:"w-full",children:Object(U.jsx)("div",{className:"flex justify-between w-full",children:Object(U.jsx)("div",{className:"flex flex-col gap-1 justify-between",children:Object(U.jsx)("h1",{className:"md:text-4xl text-2xl font-semibold text-blue-600",children:"Document validation - Applied candidate(s)"})})})})]}),Object(U.jsxs)("section",{children:[!Object(h.f)(this.props.auth.application_session)&&Object(U.jsxs)("section",{className:"py-10 flex flex-col items-center rounded border border-gray-300 bg-white text-2xl font-medium text-yellow-800 animate__animated animate__pulse",children:[Object(U.jsxs)("div",{className:"flex flex-col items-center",children:[Object(U.jsx)(V.q,{className:"w-32 h-32"}),"Document validation session is closed!"]}),this.props.auth.application_session&&this.props.auth.application_session.plans&&this.props.auth.application_session.plans.find((function(e){return e.type_key===de.d.DOCUMENT_VALIDATION}))&&Object(U.jsxs)("div",{className:"flex flex-row items-center justify-center gap-4 mt-5",children:[Object(U.jsxs)("span",{className:"font-bold text-gray-900 bg-blue-50 rounded-full px-3 py-1",children:["Start date:"," ",Object(b.a)(this.props.auth.application_session.plans.find((function(e){return e.type_key===de.d.DOCUMENT_VALIDATION})).start_date,"DD/MM/YYYY")]}),Object(U.jsxs)("span",{className:"font-bold text-gray-900 bg-blue-50 rounded-full px-3 py-1",children:["Ending date:"," ",Object(b.a)(this.props.auth.application_session.plans.find((function(e){return e.type_key===de.d.DOCUMENT_VALIDATION})).end_date,"DD/MM/YYYY")]})]})]}),Object(h.f)(this.props.auth.application_session)&&Object(U.jsxs)("div",{className:"bg-white shadow rounded border border-gray-2 p-2 w-full overflow-x-auto",children:[this.state.viewCandidate&&Object(U.jsxs)("div",{className:"flex items-center gap-3 mb-2 text-gray-600",children:[Object(U.jsx)("button",{className:"inline-block p-3 transition rounded-full bg-gray-400 ripple hover:bg-gray-600 focus:outline-none",onClick:function(){e.setState({viewCandidate:!1,candidate_id:""})},children:Object(U.jsx)(X.e,{className:"w-6 h-6 text-gray-50"})}),Object(U.jsxs)("div",{className:"flex flex-col",children:[Object(U.jsx)("span",{className:"text-gray-800 font-semibold text-2xl",children:t.user?t.user.user_info.fname+" "+t.user.user_info.lname:"Unknown user"}),Object(U.jsx)("span",{className:"text-gray-600 font-normal text-sm",children:t.user?t.user.email:""})]})]}),!this.state.viewCandidate&&Object(U.jsxs)("section",{className:"",children:[Object(U.jsxs)("div",{className:"flex items-end gap-2",children:[Object(U.jsx)("span",{className:"text-gray-600",children:"Position:"}),Object(U.jsx)("span",{className:"text-gray-700 font-medium text-xl",children:this.state.selected_position?this.state.selected_position.position_title:"Select position"}),Object(U.jsx)("button",{className:"rounded-full px-2 py-1 border-2 border-blue-600 hover:bg-blue-50 focus:outline-none text-xs",onClick:function(){return e.setState({selectPosition:!0})},children:this.state.selected_position?"Change":"Choose"})]}),Object(U.jsxs)("div",{className:"flex items-center gap-2 my-2",children:[Object(U.jsx)("span",{className:"text-gray-600",children:"District:"}),Object(U.jsxs)("select",{className:"bg-white text-grey-darker border-2 border-gray-500 rounded h-10 px-2 focus:outline-none animate__animated animate__fadeIn ".concat((this.state.loading||this.state.loadingRequest)&&"cursor-wait"),onChange:function(t){!Object(E.f)(t.target.value)&&e.setState({selected_district:t.target.value}),!Object(E.f)(t.target.value)&&null!==e.state.selected_position&&e.FC_LoadCandidatesPositionDistrict(e.state.selected_position.position_id,t.target.value)},disabled:this.state.loading||this.state.loadingRequest,value:this.state.selected_district,children:[Object(U.jsx)("option",{value:"",children:"Select district"}),this.state.district&&this.state.district.length>0?this.state.district.map((function(e,t){return Object(U.jsx)("option",{value:e.district_code,children:e.district_name},t+e.district_code+Math.random())})):Object(U.jsx)("option",{value:"",disabled:!0,children:"No District"})]})]}),this.state.selected_position&&this.state.selected_district&&!1===this.state.loadingCandidates&&Object(U.jsx)("div",{className:"mt-8",children:Object(U.jsxs)("section",{className:"w-full flex items-center gap-2",children:[Object(U.jsxs)("div",{className:"flex flex-col mb-3 w-full",children:[Object(U.jsxs)("div",{className:"flex items-center gap-1",children:[Object(U.jsx)(Q.f,{}),Object(U.jsx)("h3",{className:"text-xl",children:"Filter by Category"})]}),Object(U.jsxs)("select",{className:"w-full bg-white text-grey-darker border-2 border-gray-500 rounded h-10 px-2 focus:outline-none animate__animated animate__fadeIn ".concat((this.state.loadingRequest||this.state.loadingCandidates)&&"cursor-wait"),onChange:function(t){return e.setFilterByCategoryId(t.target.value)},disabled:this.state.loadingRequest||this.state.loadingCandidates,value:this.state.filterByCategoryId,children:[Object(U.jsx)("option",{value:"all",children:"All Document type"}),this.props.documentReducer.documentCategory&&this.props.documentReducer.documentCategory.length>0?this.props.documentReducer.documentCategory.map((function(e,t){return Object(U.jsx)("option",{value:e.user_detail_category_id,children:e.title},t+e.user_detail_category_id)})):Object(U.jsx)("option",{value:"",disabled:!0,children:"No Document type"})]})]}),this.props.documentReducer.documentSubCategory&&this.props.documentReducer.documentSubCategory.length&&Object(U.jsxs)("div",{className:"flex flex-col mb-3 w-full",children:[Object(U.jsxs)("div",{className:"flex items-center gap-1",children:[Object(U.jsx)(Q.f,{}),Object(U.jsx)("h3",{className:"text-xl",children:"Filter by Subcategory"})]}),Object(U.jsxs)("select",{className:"w-full bg-white text-grey-darker border-2 border-gray-500 rounded h-10 px-2 focus:outline-none animate__animated animate__fadeIn ".concat(this.state.loadingRequest||this.state.loadingCandidates?"cursor-wait":(this.state.filterByCategoryId.length<=0||"all"===this.state.filterByCategoryId)&&"cursor-not-allowed"),onChange:function(t){return e.setFilterBySubCategoryId(t.target.value)},disabled:this.state.loadingRequest||this.state.loadingCandidates||this.state.filterByCategoryId.length<=0||"all"===this.state.filterByCategoryId,value:this.state.filterBySubCategoryId,children:[Object(U.jsx)("option",{value:"all",children:"All sub category"}),i.map((function(e,t){return Object(U.jsx)("option",{value:e.user_detail_subcategory_id,children:e.title},t+e.user_detail_subcategory_id)}))]})]})]})}),this.state.selectedSetting===a.documents&&Object(U.jsx)(ge,{loadingCandidates:this.state.loadingCandidates,loadingRequest:this.state.loadingRequest,filterByCategoryId:this.state.filterByCategoryId,filterBySubCategoryId:this.state.filterBySubCategoryId,candidateList:this.state.candidateList,countByStatus:h.c,countById:this.countById,documentCategories:this.props.documentReducer,setDocumentId:this.setDocumentId,setCandidateId:this.setCandidateId,setViewDoc:this.setViewDoc,document_id:this.state.document_id,candidate_id:this.state.candidate_id,setDocument_index:this.setDocument_index,setLoadingImage:this.setLoadingImage,selected_position:this.state.selected_position,selected_district:this.state.selected_district,openedDocument:this.state.openedDocument})]}),this.state.viewCandidate&&t.user&&Object(U.jsx)("section",{className:"animate__animated animate__fadeIn",children:Object(U.jsx)(me,{candidate:t.user,candidateCheckData:null,filterByCategoryId:this.state.filterByCategoryId,filterBySubCategoryId:this.state.filterBySubCategoryId,setDocumentId:this.setDocumentId,setCandidateId:this.setCandidateId,setViewDoc:this.setViewDoc,setDocument_index:this.setDocument_index})})]})]}),this.state.viewDoc&&null!==this.state.document_index&&s.doc&&s.user&&Object(U.jsx)(k.d,{backDrop:!0,theme:k.c.default,close:function(){},displayClose:!1,backDropClose:!1,title:"",widthSizeClass:k.b.maxWidth,padding:{title:!1,body:!1,footer:!1},children:Object(U.jsx)(_e,{error:this.state.error,doc:s.doc,candidate:s.user,responseMsg:this.state.responseMsg,loadingRequest:this.state.loadingRequest,setResponseMsg:this.setResponseMsg,setResponse:this.setResponse,handleVerify:this.handleVerify,selectedSetting:this.state.selectedSetting,setViewCandidate:this.setViewCandidate,setError:this.setError,setViewDoc:this.setViewDoc,setCandidateId:this.setCandidateId,setDocumentId:this.setDocumentId,actionTaken:this.state.actionTaken,setActionTaken:this.setActionTaken,document_index:this.state.document_index,setDocument_index:this.setDocument_index,candidateList:this.state.candidateList,isTeachingDocument:this.state.isTeachingDocument,setIsTeachingDocument:this.setIsTeachingDocument,hasDisabilityDocument:this.state.hasDisabilityDocument,setHasDisabilityDocument:this.setHasDisabilityDocument,loadingImage:this.state.loadingImage,setLoadingImage:this.setLoadingImage,expiration_date:this.state.expiration_date,setExpirationDate:function(t){return e.setState({expiration_date:t})},openedDocuments:this.state.openedDocument,undo_decision:this.state.undo_decision})}),Object(h.f)(this.props.auth.application_session)&&!0===this.state.selectPosition&&Object(U.jsx)(k.d,{title:Object(U.jsxs)("div",{className:"flex flex-row gap-4 items-center",children:[Object(U.jsx)(V.k,{className:"text-5xl text-blue-600"}),Object(U.jsx)("div",{className:"flex flex-col",children:Object(U.jsx)("span",{className:"font-bold text-xl text-blue-600",children:"Filter by a position"})})]}),backDrop:!0,theme:k.c.default,close:function(){return e.setState({selectPosition:!1,searchPositionInput:""})},backDropClose:!0,widthSizeClass:k.b.extraLarge,displayClose:!0,padding:{title:!0},children:Object(U.jsx)("div",{className:"px-2 pb-2",children:!0===this.state.selectPosition&&null===this.props.positions?Object(U.jsx)(le.b,{type:le.a.dark}):0===this.props.positions.length?Object(U.jsxs)("div",{className:"flex flex-col text-gray-400 items-center justify-center",children:[Object(U.jsx)(d.Nb,{className:"text-6xl"}),Object(U.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[Object(U.jsx)("span",{children:"No positions found! Please go back!"}),Object(U.jsx)(m.b,{to:"/",className:"btn bg-yellow-100 text-yellow-700 my-4 hover:bg-yellow-200",children:"Go back"})]})]}):Object(U.jsxs)(U.Fragment,{children:[Object(U.jsxs)("div",{className:"flex flex-col",children:[Object(U.jsx)("span",{className:"text-gray-600 text-xs font-bold",children:"Filter by position name"}),Object(U.jsx)("input",{onChange:function(t){return e.setState({searchPositionInput:t.target.value})},type:"text",className:"mb-4 bg-gray-100 px-3 py-2 rounded",placeholder:"Keyword..."})]}),Object(ye.a)(this.props.positions,this.state.searchPositionInput).map((function(t,s){return Object(U.jsx)("div",{onClick:function(){e.setState({selected_position:t,selectPosition:!1,searchPositionInput:""}),!1===Object(E.f)(e.state.selected_district)&&e.FC_LoadCandidatesPositionDistrict(t.position_id,e.state.selected_district)},className:"bg-white cursor-pointer rounded  px-3 py-2 border border-gray-200 hover:border-blue-500 hover:bg-blue-100 mb-2",children:Object(U.jsxs)("div",{className:"grid lg:grid-cols-12",children:[Object(U.jsx)("div",{className:"col-span-12 lg:col-span-10",children:Object(U.jsxs)("div",{className:"flex flex-row items-center gap-3",children:[Object(U.jsx)("div",{children:Object(U.jsx)(X.b,{className:"text-4xl md:text-5xl text-blue-600"})}),Object(U.jsxs)("div",{className:"flex flex-col",children:[Object(U.jsx)("span",{className:"text-xs lg:text-sm font-bold text-gray-700",children:t.position_title}),Object(U.jsxs)("span",{className:"text-xs text-gray-500 italic",children:["School level:"," ",Object(U.jsx)("span",{className:"text-gray-800 font-light",style:{fontStyle:"normal"},children:t.school_level_id.school_level_name})]}),Object(U.jsx)("span",{className:"text-xs font-bold text-blue-600 bg-blue-100 w-max px-3 py-1 rounded-full",children:t.education_institute_id.education_category_title})]})]})}),Object(U.jsx)("div",{className:"col-span-12 lg:col-span-2 hidden lg:block",children:Object(U.jsx)("div",{className:"h-full flex items-center justify-end",children:Object(U.jsx)("div",{className:"btn bg-blue-600 text-white float-right",children:"Choose"})})})]})},s+t.position_id+Math.random())}))]})})})]})}}]),s}(r.Component),Ne=l.a.memo(Object(p.b)((function(e){var t=e.auth,s=e.document,a=e.locations,i=e.socket,n=e.system_settings;return{auth:t,documentReducer:s,locations:a.roomLocation,socket:i,positions:n.systemPositions}}),{getAllRoom:ce.q,verifyDocument:w.o,getDocumentCategory:w.i,getDocumentSubCategory:w.k,getDocumentFields:w.j,FC_GetPositionsByInstitution:re.a,FC_GetCandidatesByPosition:w.a,PushPopupAlert:N.Rb})(ve)),we=function(e){return Object(U.jsxs)("div",{className:"flex flex-col md:flex-col items-end gap-1 w-full overflow-x-auto border-t-2 pt-3",children:[Object(U.jsxs)("div",{className:"flex gap-2 w-full px-2",children:[Object(U.jsx)("span",{className:"text-gray-500 italic",children:"Decision:"}),Object(U.jsx)("span",{className:"".concat("approval"===e.actionTaken?"text-blue-700":"text-red-800"," text-xl font-medium"),children:"approval"===e.actionTaken?"Approved":"Rejected"})]}),"approval"===e.actionTaken&&!e.in_education&&Object(U.jsxs)("div",{className:"w-full px-2 mb-1 flex gap-2 items-center",children:[Object(U.jsx)("span",{className:"text-gray-500 italic",children:"Is Document for teaching:"}),Object(U.jsx)("div",{className:e.loadingRequest?"cursor-default":"cursor-pointer",onClick:function(){!e.loadingRequest&&!e.isTeachingDocument&&e.setHasDisabilityDocument(!1),!e.loadingRequest&&e.setIsTeachingDocument(!e.isTeachingDocument)},children:e.isTeachingDocument?Object(U.jsx)(v.f,{className:"text-blue-600 w-8"}):Object(U.jsx)(v.g,{className:"text-gray-600 w-8"})})]}),"approval"===e.actionTaken&&!e.disability&&Object(U.jsxs)("div",{className:"w-full px-2 mb-1 flex gap-2 items-center",children:[Object(U.jsx)("span",{className:"text-gray-500 italic",children:"Is Document for disability:"}),Object(U.jsx)("div",{className:e.loadingRequest?"cursor-default":"cursor-pointer",onClick:function(){!e.loadingRequest&&!e.hasDisabilityDocument&&e.setIsTeachingDocument(!1),!e.loadingRequest&&e.setHasDisabilityDocument(!e.hasDisabilityDocument)},children:e.hasDisabilityDocument?Object(U.jsx)(v.f,{className:"text-blue-600 w-8"}):Object(U.jsx)(v.g,{className:"text-gray-600 w-8"})})]}),e.expiration&&Object(U.jsxs)("div",{className:"w-full",children:[Object(U.jsxs)("div",{className:"w-full px-2 mb-1 flex gap-2 items-center",children:[Object(U.jsx)("span",{className:"text-gray-500 italic",children:"Expiration date:"}),Object(U.jsx)("input",{type:"date",placeholder:"expiration date",className:"border border-".concat("expiration"===e.error.element?"red":"gray","-400 rounded px-3 py-1 focus:outline-none"),style:{resize:"none"},value:e.expiration_date,onChange:function(t){e.setExpirationDate(t.target.value),e.setError({element:"",msg:""})},disabled:e.loadingRequest})]}),"expiration"===e.error.element&&Object(U.jsx)("p",{className:"text-red-800",children:e.error.msg})]}),Object(U.jsxs)("div",{className:"w-full px-2",children:[Object(U.jsx)("textarea",{placeholder:"Comment for the ".concat(e.actionTaken),cols:50,rows:3,className:"border border-".concat("comment"===e.error.element?"red":"gray","-400 rounded px-3 py-1 w-full focus:outline-none"),style:{resize:"none"},value:e.responseMsg,onChange:function(t){e.setResponseMsg(t.target.value),e.setError({element:"",msg:""})},disabled:e.loadingRequest}),"comment"===e.error.element&&Object(U.jsx)("p",{className:"text-red-800",children:e.error.msg})]}),Object(U.jsxs)("div",{className:"flex flex-row gap-1 max-w-full px-2",children:[Object(U.jsxs)("button",{className:"bg-gray-800 px-4 py-2 font-semibold rounded text-white inline-flex items-center space-x-2 focus:outline-none",onClick:function(){e.setResponseMsg(""),e.setActionTaken(null),e.setError({element:"",msg:""})},disabled:e.loadingRequest,children:[Object(U.jsx)(u.b,{className:"w-5 h-5"}),Object(U.jsx)("span",{children:"Back"})]}),Object(U.jsx)("button",{className:"bg-blue-700 px-4 py-2 font-semibold rounded text-white focus:outline-none",disabled:e.loadingRequest,onClick:function(){return window.confirm("Are you sure you want to ".concat(e.actionTaken," this document?"))&&e.handleVerify()},children:e.loadingRequest?Object(U.jsx)("div",{className:"",children:"Loading..."}):Object(U.jsxs)("div",{className:"inline-flex items-center space-x-2 gap-1",children:[Object(U.jsx)(Q.i,{className:"w-5 h-5"}),Object(U.jsx)("span",{children:"Confirm"})]})})]})]})},De=function(e){var t;return Object(U.jsxs)("div",{className:"w-full flex md:flex-col flex-col justify-between items-start gap-2",children:[Object(U.jsx)("div",{className:"flex items-center gap-4",children:Object(U.jsxs)("section",{className:"p-3 w-full",children:[Object(U.jsxs)("div",{className:"flex items-center gap-2 border-b-2 my-2 py-1",children:[Object(U.jsx)(v.d,{className:"text-blue-600 text-xl"}),Object(U.jsx)("h2",{className:"uppercase tracking-wide text-xl font-semibold text-gray-700",children:"Document Decision Re-Override"})]}),Object(U.jsxs)("div",{className:"flex flex-row items-start justify-left gap-2 mb-2",children:[Object(U.jsx)("span",{className:"text-gray-500 italic mt-1",children:"Doc Title: "}),Object(U.jsx)("span",{className:"font-bold text-2xl",children:e.doc.main_doc_title})]}),Object(U.jsxs)("div",{className:"flex flex-row items-center justify-left gap-2 mb-2",children:[Object(U.jsx)("span",{className:"text-gray-500 italic",children:"Names: "}),Object(U.jsx)("span",{className:"font-medium text-lg",children:e.doc.fname+" "+e.doc.lname})]}),Object(U.jsxs)("section",{className:"animate__animated animate__fadeIn",children:[Object(U.jsxs)("div",{className:"flex flex-row items-center justify-left gap-2 mb-2",children:[Object(U.jsx)("span",{className:"text-gray-500 italic",children:"National ID: "}),Object(U.jsx)("span",{className:"font-medium text-lg",children:e.doc.n_id})]}),Object(U.jsxs)("div",{className:"flex flex-row items-center justify-left gap-2 mb-2",children:[Object(U.jsx)("span",{className:"text-gray-500 italic",children:"Phone: "}),Object(U.jsx)("span",{className:"font-medium text-lg",children:e.doc.phone_number})]}),Object(U.jsxs)("div",{className:"flex flex-row items-center justify-left gap-2 mb-2",children:[Object(U.jsx)("span",{className:"text-gray-500 italic",children:"Email: "}),Object(U.jsx)("span",{className:"font-medium text-lg",children:e.doc.email})]}),Object(U.jsxs)("div",{className:"flex items-center gap-1",children:[Object(U.jsx)("span",{className:"text-gray-500 italic",children:"Status:"}),Object(U.jsx)("span",{className:"text-".concat("waiting"===e.doc.validation_status?"yellow":"approved"===e.doc.validation_status?"blue":"red","-700 font-medium text-lg"),children:"waiting"===e.doc.validation_status?"Pending":"approved"===e.doc.validation_status?"Approved":"Rejected"})]}),e.doc.validated_by&&Object(U.jsxs)("div",{className:"w-full",children:[Object(U.jsx)("span",{className:"text-gray-500 italic",children:"Reason:"}),Object(U.jsx)("p",{className:"text-gray-700 font-medium text-base",children:null===(t=e.doc.validated_by)||void 0===t?void 0:t.comment})]})]})]})}),null===e.actionTaken&&Object(U.jsxs)("div",{className:"flex flex-row md:flex-row justify-between px-3 w-full items-center gap-2 overflow-x-auto",children:[Object(U.jsxs)("div",{className:"flex items-center gap-2 px-2",children:["approved"===e.doc.validation_status&&Object(U.jsxs)("button",{className:"px-4 py-2 font-semibold text-red-50 rounded inline-flex items-center space-x-2 focus:outline-none bg-red-800",onClick:function(){return e.setAction("rejection")},children:[Object(U.jsx)(d.o,{className:"w-5 h-5"}),Object(U.jsx)("span",{children:"Reject"})]}),"rejected"===e.doc.validation_status&&Object(U.jsxs)("button",{className:"px-4 py-2 font-semibold text-blue-50 rounded inline-flex items-center space-x-2 focus:outline-none bg-blue-700",onClick:function(){return e.setAction("approval")},children:[Object(U.jsx)(Q.i,{className:"w-5 h-5"}),Object(U.jsx)("span",{children:"Approve"})]})]}),Object(U.jsxs)("button",{className:"bg-gray-700 px-4 py-2 rounded font-semibold text-white inline-flex items-center space-x-2 focus:outline-none",onClick:function(){return e.setDocId("")},children:[Object(U.jsx)(d.z,{className:"w-5 h-5"}),Object(U.jsx)("span",{children:"Close"})]})]})]})},Ce=function(e){Object(o.a)(s,e);var t=Object(c.a)(s);function s(e){var a;return Object(i.a)(this,s),(a=t.call(this,e)).setSetFullscreen=function(e){a.setState({isFullscreen:e})},a.handleFullScreen=function(){a.state.isFullscreen?(Object(b.i)("doc-img","CLOSE"),a.setSetFullscreen(!1)):(a.setSetFullscreen(!0),Object(b.i)("doc-img","OPEN"))},a.state={isFullscreen:!1,failedToLoadFile:!1,loadingImage:!0,actionTaken:null},a}return Object(n.a)(s,[{key:"render",value:function(){var e=this;return Object(U.jsxs)("div",{className:"bg-gray-50 h-full md:h-screen grid grid-cols-1 md:grid-cols-3",children:[this.props.doc.files.length>0&&this.state.loadingImage&&Object(U.jsx)("div",{className:"col-span-2 max-h-full md:max-h-screen overflow-y-auto relative group",children:Object(U.jsx)("div",{className:"relative",children:!1===this.state.failedToLoadFile?Object(U.jsx)("div",{className:"w-full mx-auto mt-5 px-4",children:Object(U.jsx)("div",{className:"animate-pulse flex space-x-4",children:Object(U.jsx)("div",{className:"flex-1 space-y-4 py-4",children:Object(U.jsx)("div",{className:"bg-gray-300 rounded h-72 flex items-center justify-center",children:Object(U.jsxs)("h1",{className:"text-5xl text-gray-500 font-bold",children:["Loading"," ",Object(b.l)(Object(b.j)(this.props.doc.files))?"image":"pdf","..."]})})})})}):Object(U.jsx)("div",{className:"px-3",children:Object(U.jsx)(K.a,{title:"Error",description:Object(b.l)(Object(b.j)(this.props.doc.files))?"Failed to load image":"Failed to load pdf"})})})}),Object(U.jsxs)("div",{className:"col-span-2 h-auto md:max-h-screen overflow-y-auto relative bg-gray-200 group ".concat(this.state.loadingImage&&"hidden"),children:[this.props.doc.files.length>0?Object(b.l)(Object(b.j)(this.props.doc.files))?Object(U.jsx)("div",{className:"relative",children:Object(U.jsx)("img",{src:C.a.AUTH_FILES+this.props.doc.files,alt:"",className:"w-full md:w-auto h-auto md:max-h-screen mx-auto ".concat(this.state.loadingImage&&"hidden"),id:"doc-img",onLoad:function(){return e.setState({loadingImage:!1})},onError:function(){return e.setState({failedToLoadFile:!0})},onDoubleClick:function(){return e.handleFullScreen()}})}):Object(U.jsx)(W.a,{file_url:C.a.AUTH_FILES+this.props.doc.files,class_name:"w-full h-screen md:max-h-screen mx-auto ".concat(this.state.loadingImage&&"hidden"),frame_title:"application PDF file view",setLoadingFile:function(t){return e.setState({loadingImage:t})},setLoadingError:function(t){return e.setState({failedToLoadFile:t})}}):Object(U.jsxs)("div",{className:"text-center text-red-400 py-8 animate__animated animate__fadeIn",children:[Object(U.jsx)(z.f,{className:"mx-auto w-40 h-40"}),Object(U.jsx)("span",{className:"font-semibold text-4xl",children:"No Files Provided"})]}),Object(U.jsx)("div",{className:"flex items-center justify-between absolute top-0 ".concat(Object(b.l)(Object(b.j)(this.props.doc.files))?"w-full":"w-max"," px-2 py-2"),children:this.props.doc.files.length>0&&Object(b.l)(Object(b.j)(this.props.doc.files))&&Object(U.jsxs)("div",{className:"flex items-center gap-2 opacity-0 group-hover:opacity-100",children:[Object(U.jsx)("button",{className:"flex items-center bg-gray-100 justify-center h-10 w-10 rounded-full shadow-md opacity-4 cursor-pointer hover:bg-blue-50",onClick:function(){return Object(b.t)("doc-img","IN")},children:Object(U.jsx)(J.l,{className:"h-6 w-6 text-gray-500"})}),Object(U.jsx)("button",{className:"flex items-center bg-gray-100 justify-center h-10 w-10 rounded-full shadow-md opacity-4 cursor-pointer hover:bg-blue-50",onClick:function(){return Object(b.t)("doc-img","OUT")},children:Object(U.jsx)(J.m,{className:"h-6 w-6 text-gray-500"})}),Object(U.jsx)("div",{className:"flex items-center bg-gray-100 justify-center h-10 w-10 rounded-full shadow-md opacity-4 cursor-pointer hover:bg-blue-50",onClick:function(){return Object(b.i)("doc-img","OPEN")},children:Object(U.jsx)(G.h,{className:"h-6 w-6 text-gray-500"})})]})})]}),Object(U.jsxs)("div",{children:[this.props.doc.files&&Object(U.jsx)(De,{doc:this.props.doc,setDocId:this.props.setDocId,setAction:this.props.setActionTaken,actionTaken:this.props.actionTaken}),null!==this.props.actionTaken&&Object(U.jsx)(we,{actionTaken:this.props.actionTaken,responseMsg:this.props.responseMsg,loadingRequest:this.props.loadingRequest,error:this.props.error,isTeachingDocument:this.props.isTeachingDocument,setIsTeachingDocument:this.props.setIsTeachingDocument,hasDisabilityDocument:this.props.hasDisabilityDocument,setHasDisabilityDocument:this.props.setHasDisabilityDocument,setActionTaken:this.props.setActionTaken,setResponseMsg:this.props.setResponseMsg,handleVerify:this.props.handleVerify,setError:this.props.setError,expiration_date:this.props.expiration_date,setExpirationDate:this.props.setExpirationDate,disability:!1,in_education:!1,expiration:!1})]})]})}}]),s}(l.a.Component),Ie=s(729),Te=s(33),Se=s(336),ke=s(31),Pe=function(e){Object(o.a)(s,e);var t=Object(c.a)(s);function s(e){var a;return Object(i.a)(this,s),(a=t.call(this,e)).GetCandidateApplications=function(){var e=Object(j.a)(x.a.mark((function e(t){var s;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({loadingApplications:!0}),e.prev=1,e.next=4,y.a.get("".concat(C.a.APPLICATION,"/apply/user/").concat(t));case 4:(s=e.sent)&&(a.setState({candidateApplications:s.data}),null===a.props.positions.positions_list?a.props.loadAllPositions((function(e){a.setState({loadingApplications:e})})):a.setState({loadingApplications:!1})),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(1),alert("Failed to load candidate Applications"),a.setState({candidateApplications:[],loadingApplications:!1}),console.log("Error: ",e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),a.componentDidMount=function(){null===a.props.documentReducer.documentCategory||a.props.documentReducer.documentCategory.length<=0?a.props.getDocumentCategory((function(e){a.setState({loading:e})})):a.setState({loading:!1}),null===a.props.documentReducer.documentSubCategory||a.props.documentReducer.documentSubCategory.length<=0?a.props.getDocumentSubCategory((function(e){a.setState({loading:e})})):a.setState({loading:!1}),null===a.props.documentReducer.documentFields||a.props.documentReducer.documentFields.length<=0?a.props.getDocumentFields((function(e){a.setState({loading:e})})):a.setState({loading:!1})},a.FC_DoSearch=function(e){if(e.preventDefault(),Object(E.f)(a.state.searchFind))return a.setState({searchError:"Required!"});null===a.state.candidateApplications&&null===a.state.viewPositionDetails||a.setState({candidateApplications:null,viewPositionDetails:null}),a.setState({manageUser:null}),Object(S.a)(a.state.searchFind,(function(e,t,s){a.setState({loadingUser:e}),!1===e&&(Object(E.f)(t)?null===s||""===s?a.props.PushPopupAlert({title:"User not found!",theme:A.a.warning}):(console.log("===================--------================="),console.log(s),console.log("===================--------================="),a.setState({manageUser:s}),a.GetCandidateApplications(s.user_id)):a.props.PushPopupAlert({title:t,theme:A.a.danger}))}))},a.FC_DocumentInArray=function(e,t){var s=[],a=t.details;for(var i in a){var n=t.details[i];null!==n.files&&n.files.length>0&&"waiting"!==n.validation_status&&s.push({user_id:t.user_id,n_id:t.n_id?t.n_id:"",fname:t.user_info.fname,lname:t.user_info.lname,phone_number:t.phone_number,district:t.user_info.district,email:t.email,main_doc_title:Object(h.b)(e,n).main,category_id:n.category_id,sub_category_id:n.sub_category_id,category_subcategory_data:n.category_subcategory_data,title:n.title,description:n.description,files:n.files,start_year:n.start_year,end_year:n.end_year,school:n.school.title,details_email:n.email,names:n.names,details_phone_number:n.phone_number,company:n.company,year:n.year,doc_id:n.doc_id,validation_status:n.validation_status,validated_by:n.validated_by?{user_id:n.validated_by.user_id,comment:n.validated_by.comment?n.validated_by.comment:n.validated_by.commet,validation_status:n.validated_by.validation_status,date:n.validated_by.date}:null,doc_history_status:"",get_in_date:"",approved:n.approved,exams:[]})}return s},a.FC_shortListing=Object(j.a)(x.a.mark((function e(){var t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.state.manageUser){e.next=14;break}return e.prev=1,e.next=4,y.a.patch("".concat(C.a.APPLICATION,"/apply/doccheckshortlist/").concat(a.state.manageUser.user_id),{email:a.state.manageUser.email,phone_number:a.state.manageUser.phone_number});case 4:t=e.sent,console.log("================FC_shortListing===================="),console.log({res:t}),console.log("================FC_shortListing===================="),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),console.error({error:e.t0}),a.props.PushPopupAlert({title:Object(T.a)(e.t0),theme:A.a.danger});case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),a.FC_ValidateCandidateInState=function(e){var t=a.state.manageUser;if(t){var s=t.details.findIndex((function(t){return t.doc_id===e.doc_id}));s>=0&&(t.details[s].validation_status=e.validation_status,t.details[s].validated_by={user_id:a.props.auth.user.user_id,commet:e.validated_by.comment,comment:e.validated_by.comment,validation_status:e.validation_status,date:Date()})}a.setState({manageUser:t})},a.handleVerify=Object(j.a)(x.a.mark((function e(){var t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.state.manageUser||Object(E.f)(a.state.doc_id)){e.next=22;break}if(!Object(E.f)(a.state.responseMsg)){e.next=3;break}return e.abrupt("return",a.setState({error:{element:"comment",msg:"Reason of ".concat(a.state.actionTaken," is required")},loadingRequest:!1}));case 3:return a.setState({loadingRequest:!0}),t={user_id:a.state.manageUser.user_id,doc_id:a.state.doc_id,validation_status:"approval"===a.state.actionTaken?R.a.APPROVED:R.a.REJECTED,validated_by:{user_id:a.props.auth.user.user_id,comment:a.state.responseMsg,validation_status:"approval"===a.state.actionTaken?R.a.APPROVED:R.a.REJECTED},in_education:a.state.isTeachingDocument?a.state.isTeachingDocument:a.state.manageUser.in_education,disability:a.state.hasDisabilityDocument?a.state.hasDisabilityDocument:a.state.manageUser.disability,expiration_date:a.state.expiration_date},e.prev=5,e.next=8,y.a.post("".concat(C.a.USER,"/docs/validateuserdoc"),t);case 8:if(!e.sent){e.next=15;break}return e.next=12,a.FC_shortListing();case 12:a.FC_ValidateCandidateInState(t),a.props.PushPopupAlert({title:"Document ".concat("approval"===a.state.actionTaken?"approved":"rejected"," successful"),theme:A.a.success}),a.setState({responseMsg:"",actionTaken:null,hasDisabilityDocument:!1,isTeachingDocument:!1,error:{element:"",msg:""}});case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(5),console.error(e.t0),a.props.PushPopupAlert({title:Object(T.a)(e.t0),theme:A.a.danger});case 21:a.setState({loadingRequest:!1});case 22:case"end":return e.stop()}}),e,null,[[5,17]])}))),a.state={loading:!0,loadingUser:!1,manageUser:null,loadingRequest:!1,searchFind:"",searchError:"",doc_id:"",responseMsg:"",isTeachingDocument:!1,hasDisabilityDocument:!1,error:{element:"",msg:""},actionTaken:null,expiration_date:"",candidateApplications:null,loadingApplications:!1,viewPositionDetails:null},a}return Object(n.a)(s,[{key:"render",value:function(){var e,t,s=this;if(!0===this.state.loading)return Object(U.jsx)("div",{className:"text-center mt-7 font-bold text-4xl text-gray-400 animate-pulse",children:"Loading..."});var a=this.state.manageUser?this.FC_DocumentInArray(this.props.documentReducer,this.state.manageUser):null,i=a?a.find((function(e){return e.doc_id===s.state.doc_id})):void 0,n=this.state.manageUser?this.state.manageUser.details.filter((function(e){return"waiting"===e.validation_status})):[];return i?Object(U.jsx)(Ce,{doc:i,setDocId:function(e){return s.setState({doc_id:e})},responseMsg:this.state.responseMsg,loadingRequest:this.state.loadingRequest,setResponseMsg:function(e){return s.setState({responseMsg:e})},handleVerify:this.handleVerify,setError:function(e){return s.setState({error:e})},actionTaken:this.state.actionTaken,setActionTaken:function(e){return s.setState({actionTaken:e})},error:this.state.error,isTeachingDocument:this.state.isTeachingDocument,setIsTeachingDocument:function(e){return s.setState({isTeachingDocument:e})},hasDisabilityDocument:this.state.hasDisabilityDocument,setHasDisabilityDocument:function(e){return s.setState({hasDisabilityDocument:e})},expiration_date:this.state.expiration_date,setExpirationDate:function(e){return s.setState({expiration_date:e})}}):Object(U.jsx)(r.Fragment,{children:Object(U.jsxs)("div",{className:"w-full my-5",children:[Object(U.jsx)("section",{className:"",children:Object(U.jsxs)("form",{onSubmit:this.FC_DoSearch,className:"w-full mt-8 bg-transparent border-2 mx-auto rounded-md lg:max-w-sm ".concat(Object(E.f)(this.state.searchError)?"border-gray-500 dark:border-gray-700 focus-within:border-gray-400 dark:focus-within:border-gray-400":"border-red-500 dark:border-red-700 focus-within:border-red-400 dark:focus-within:border-red-400"),children:[Object(U.jsxs)("div",{className:"flex flex-col lg:flex-row",children:[Object(U.jsx)("input",{type:"text",placeholder:"Search by NID or Phone or Email",className:"flex-1 h-10 px-4 py-2 m-1 text-gray-700 placeholder-gray-400 bg-transparent border-none appearance-none dark:text-gray-200 focus:outline-none focus:placeholder-transparent focus:ring-0",disabled:this.state.loadingUser||this.state.loadingRequest||this.state.loading,onChange:function(e){return s.setState({searchFind:e.target.value,searchError:""})},value:this.state.searchFind}),Object(U.jsx)("button",{type:"submit",className:"h-10 px-4 py-2 m-1 text-sm text-white transition-colors duration-200 transform bg-gray-500 rounded-md hover:bg-gray-400 focus:outline-none focus:bg-gray-400",disabled:this.state.loadingUser||this.state.loadingRequest||this.state.loading,children:this.state.loadingUser?"Loading":"Search"})]}),!Object(E.f)(this.state.searchError)&&Object(U.jsx)("span",{className:"text-red-500",children:this.state.searchError})]})}),this.state.manageUser&&Object(U.jsxs)("section",{className:"flex items-start mb-4 mt-3 py-3 px-4 rounded bg-white",children:[Object(U.jsx)("div",{className:"w-auto",children:Object(U.jsx)("img",{src:"pic"!==this.state.manageUser.user_info.photo&&void 0!==this.state.manageUser.user_info.photo?Object(b.c)(this.state.manageUser.user_info.photo):Ie.a,className:"w-auto object-center object-cover h-32 rounded-lg",alt:""})}),Object(U.jsxs)("section",{className:"w-full -m-1",children:[Object(U.jsxs)("div",{className:"flex items-center gap-2 px-3",children:[Object(U.jsx)("span",{className:"italic text-gray-600",children:"Names:"}),Object(U.jsx)("span",{className:"text-gray-800 font-bold text-xl",children:this.state.manageUser.user_info.fname+" "+this.state.manageUser.user_info.lname})]}),Object(U.jsxs)("div",{className:"flex items-center gap-2 px-3",children:[Object(U.jsx)("span",{className:"italic text-gray-600",children:"NID:"}),Object(U.jsx)("span",{className:"text-gray-800 font-bold text-xl",children:this.state.manageUser.n_id})]}),Object(U.jsxs)("div",{className:"flex items-center gap-2 px-3",children:[Object(U.jsx)("span",{className:"italic text-gray-600",children:"Sex:"}),Object(U.jsx)("span",{className:"text-gray-800 font-bold text-xl",children:this.state.manageUser.user_info.sex})]}),Object(U.jsxs)("div",{className:"flex items-center gap-2 px-3",children:[Object(U.jsx)("span",{className:"italic text-gray-600",children:"Phone:"}),Object(U.jsx)("span",{className:"text-gray-800 font-bold text-xl",children:this.state.manageUser.phone_number})]}),Object(U.jsxs)("div",{className:"flex items-center gap-2 px-3",children:[Object(U.jsx)("span",{className:"italic text-gray-600",children:"Email:"}),Object(U.jsx)("span",{className:"text-gray-800 font-bold text-xl",children:this.state.manageUser.email})]}),Object(U.jsxs)("span",{className:"rounded bg-green-600 text-white text-lg py-1 px-2 mx-3",children:["Waiting documents: ",n.length]})]})]}),Object(U.jsxs)("section",{className:"mt-3 bg-white rounded border",children:[null===this.state.viewPositionDetails?!1===this.state.loadingApplications&&null!==this.state.candidateApplications&&Object(U.jsxs)("div",{className:"border-b border-gray-400 p-3",children:[Object(U.jsx)("div",{className:"font-light text-4xl",children:"User applications"}),Object(U.jsx)("div",{children:"List of application for the current session"})]}):Object(U.jsxs)("div",{className:"border-b border-gray-400 p-3 flex flex-row items-center gap-3 w-full",children:[Object(U.jsx)("div",{onClick:function(){return s.setState({viewPositionDetails:null})},className:"btn bg-blue-100 rounded cursor-pointer hover:bg-blue-200 hover:text-blue-700",children:"Back to list"}),Object(U.jsxs)("div",{className:"",children:[Object(U.jsx)("div",{className:"font-light text-2xl text-blue-600",children:this.state.viewPositionDetails.position_title}),Object(U.jsx)("div",{className:"font-bold text-yellow-900 underline",children:null===(e=this.state.candidateApplications)||void 0===e||null===(t=e.find((function(e){var t;return e.position.position_id===(null===(t=s.state.viewPositionDetails)||void 0===t?void 0:t.position_id)})))||void 0===t?void 0:t.application_status})]})]}),null===this.state.viewPositionDetails&&null!==this.state.manageUser?Object(U.jsx)("div",{className:"p-3",children:!0===this.state.loadingApplications?Object(U.jsxs)("div",{children:[Object(U.jsx)("div",{className:"mt-2 mx-3",children:"Loading applications"}),Object(U.jsx)(Te.a,{})]}):null===this.state.candidateApplications||0===this.state.candidateApplications.length?Object(U.jsx)("div",{className:"flex items-center justify-center p-4 rounded bg-gray-100 text-center text-2xl font-light",children:"No applications found for this user"}):this.state.candidateApplications.map((function(e,t){return Object(U.jsxs)("div",{className:"bg-white border border-gray-300 rounded-md p-2 px-3 flex flex-row items-center gap-3 mb-3 justify-between group",children:[Object(U.jsxs)("div",{className:"flex flex-row items-center gap-3 ",children:[Object(U.jsx)("div",{children:Object(U.jsx)(ke.e,{className:"text-4xl text-gray-500"})}),Object(U.jsxs)("div",{className:"flex flex-col text-sm",children:[Object(U.jsx)("div",{className:"flex flex-row items-center gap-2",children:Object(U.jsx)("span",{className:"text-xl font-bold text-black",children:e.position.position_title})}),Object(U.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[Object(U.jsx)("span",{className:"text-gray-600",children:"Session:"}),Object(U.jsx)("span",{className:"text-gray-600",children:e.application_session.session_plan_name})]}),Object(U.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[Object(U.jsx)("span",{className:"text-gray-600",children:"Status:"}),Object(U.jsx)("div",{className:"".concat(e.application_status===de.a.Shortlisted?"bg-green-100 border-green-300 text-green-900":"bg-yellow-100 border-yellow-300 text-yellow-900","  px-2 border  rounded-full"),children:Object(U.jsx)("span",{className:"font-extrabold uppercase",children:e.application_status})})]})]})]}),Object(U.jsx)("div",{children:Object(U.jsx)("div",{onClick:function(){var t=null===s.props.positions.positions_list?void 0:s.props.positions.positions_list.find((function(t){return t.position_id===e.position.position_id}));void 0!==t&&s.setState({viewPositionDetails:null===s.props.positions.positions_list?null:t})},className:"btn bg-blue-100 hover:bg-blue-200 rounded text-blue-700 cursor-pointer",children:"Details"})})]},t+1)}))}):null!==this.state.viewPositionDetails&&Object(U.jsx)(Se.a,{positionDetails:this.state.viewPositionDetails,cancel:function(){return s.setState({viewPositionDetails:null})},apply:function(){return s.setState({viewPositionDetails:null})},auth:this.props.auth,showRegister:function(e){throw new Error("Function not implemented.")},hideTools:!0})]}),Object(U.jsx)("section",{className:"bg-white rounded w-full mt-3",children:Object(U.jsxs)("table",{className:"w-full rounded shadow",children:[Object(U.jsx)("thead",{className:"bg-white border-b-2 border-gray-300 text-gray-600 font-bold text-sm",children:Object(U.jsxs)("tr",{children:[Object(U.jsx)("td",{className:"px-2 py-2",children:"#"}),Object(U.jsx)("td",{className:"px-2 py-2",children:"User Document"}),Object(U.jsx)("td",{className:"px-2 py-2",children:"Status"}),Object(U.jsx)("td",{className:"px-2 py-2"})]})}),Object(U.jsxs)("tbody",{children:[this.state.loadingUser&&Object(U.jsx)(M.a,{cols:4}),!1===this.state.loadingUser&&null===a&&Object(U.jsx)("tr",{className:"border-b border-gray-200",children:Object(U.jsx)("td",{colSpan:4,children:Object(U.jsxs)("div",{className:"flex flex-col text-gray-400 items-center justify-center bg-gray-100 rounded py-10",children:[Object(U.jsx)(v.c,{className:"text-8xl text-gray-400 mb-2 animate__animated animate__shakeX"}),Object(U.jsx)("span",{className:"text-base font-bold",children:"No User Details!"}),Object(U.jsx)("div",{className:"w-full mt-2 flex flex-row items-center justify-center",children:Object(U.jsx)("ul",{className:"text-base py-2 text-blue-600 font-bold flex flex-row gap-2",children:Object(U.jsx)("li",{className:"text-gray-600",children:"Find user by National ID or Phone number or Email"})})})]})})}),a&&0===a.length&&Object(U.jsx)("tr",{className:"border-b border-gray-200",children:Object(U.jsx)("td",{colSpan:4,children:Object(U.jsxs)("div",{className:"flex flex-col text-gray-400 items-center justify-center bg-gray-100 rounded py-10",children:[Object(U.jsx)(v.c,{className:"text-8xl text-gray-400 mb-2 animate__animated animate__shakeX"}),Object(U.jsx)("span",{className:"text-base font-bold",children:"User Documents!"}),Object(U.jsx)("div",{className:"w-full mt-2 flex flex-row items-center justify-center",children:Object(U.jsx)("ul",{className:"text-base py-2 text-blue-600 font-bold flex flex-row gap-2",children:Object(U.jsx)("li",{className:"text-gray-600",children:"No approved or rejected documents found for this user!"})})})]})})}),a&&a.length>0&&a.map((function(e,t){return Object(U.jsxs)("tr",{className:"border-b border-gray-200 cursor-pointer group hover:bg-gray-100",onClick:function(){return s.setState({doc_id:e.doc_id})},children:[Object(U.jsx)("td",{className:"p-3 text-left whitespace-nowrap",children:t+1}),Object(U.jsx)("td",{className:"py-3 px-3 text-left font-medium text-lg",children:e.main_doc_title}),Object(U.jsx)("td",{className:"py-3 px-5 text-left",children:Object(U.jsx)("span",{className:"text-sm font-medium py-1 px-2 rounded align-middle ".concat("approved"===e.validation_status?"bg-green-800 text-white":"bg-red-800 text-white"),children:Object(E.a)(e.validation_status)})}),Object(U.jsx)("td",{className:"text-right",children:Object(U.jsxs)("button",{className:"bg-blue-500 group-hover:bg-blue-600 text-blue-50 font-bold py-1 px-1 inline-flex rounded focus:outline-none",title:"View documents",children:[Object(U.jsx)(V.h,{className:"w-5 h-5"}),"View doc"]})})]},e.doc_id+t+Math.random())}))]})]})})]})})}}]),s}(r.Component),Ae=l.a.memo(Object(p.b)((function(e){return{auth:e.auth,documentReducer:e.document,positions:e.positions}}),{getDocumentCategory:w.i,getDocumentSubCategory:w.k,getDocumentFields:w.j,PushPopupAlert:N.Rb,loadAllPositions:N.Bc})(Pe));!function(e){e.CANDIDATES="Document validation all candidates",e.APPLICATION="Document validation applied candidates",e.RE_EVALUATION="Document Re-Validation"}(Oe||(Oe={}));var Ee=function(e){Object(o.a)(s,e);var t=Object(c.a)(s);function s(e){var a;return Object(i.a)(this,s),(a=t.call(this,e)).setLoadingState=function(e){},a.state={loading:!0,pageToLoad:null},a}return Object(n.a)(s,[{key:"componentDidMount",value:function(){this.state.loading&&null===this.state.pageToLoad&&(Object(h.f)(this.props.auth.application_session)&&Object(b.d)(this.props.auth.education_institution_id)?this.setState({loading:!1}):this.setState({loading:!1,pageToLoad:Oe.CANDIDATES}))}},{key:"render",value:function(){var e=this;return this.state.loading?Object(U.jsx)("div",{className:"text-center mt-7 font-bold text-4xl text-gray-400 animate-pulse",children:"Loading..."}):null===this.state.pageToLoad?Object(U.jsxs)("div",{className:"min-w-screen h-screen fixed flex justify-center items-center inset-0 z-50",children:[Object(U.jsx)("div",{className:"absolute bg-black opacity-80 inset-0 z-0"}),Object(U.jsxs)("section",{className:"max-w-3xl p-5 relative mx-auto my-auto rounded-md bg-gray-100 w-full",children:[Object(U.jsxs)("div",{className:"w-full flex flex-row items-center justify-center",children:[Object(U.jsxs)("div",{className:"bg-white rounded-3xl p-2 shadow-sm m-3 cursor-pointer text-center hover:bg-blue-50 border-2 hover:border-blue-500",onClick:function(){return e.setState({pageToLoad:Oe.CANDIDATES})},children:[Object(U.jsx)(u.o,{className:"h-40 text-blue-600 rounded-2xl w-full object-cover"}),Object(U.jsx)("p",{className:"mx-4 text-xl font-semibold text-gray-900 -mt-3",children:"Validate all candidates"})]}),Object(U.jsxs)("div",{className:"bg-white rounded-3xl p-2 shadow-sm m-3 cursor-pointer text-center hover:bg-blue-50 border-2 hover:border-blue-500",onClick:function(){return e.setState({pageToLoad:Oe.APPLICATION})},children:[Object(U.jsx)(d.M,{className:"h-40 text-blue-600 rounded-2xl w-full object-cover"}),Object(U.jsx)("p",{className:"mx-4 text-xl font-semibold text-gray-900 -mt-3",children:"Validate applied candidates"})]}),Object(U.jsxs)("div",{className:"bg-white rounded-3xl p-2 shadow-sm m-3 cursor-pointer text-center hover:bg-blue-50 border-2 hover:border-blue-500",onClick:function(){return e.setState({pageToLoad:Oe.RE_EVALUATION})},children:[Object(U.jsx)(u.p,{className:"h-32 my-4 text-blue-600 rounded-2xl w-full object-cover"}),Object(U.jsx)("p",{className:"mx-4 text-xl font-semibold text-gray-900 -mt-3",children:Oe.RE_EVALUATION})]})]}),Object(U.jsx)("div",{className:"text-center group text-sm -mb-3 mt-1",children:Object(U.jsx)(m.c,{to:"/apps-page",className:"border border-rounded-md rounded bg-gray-100 border-gray-100 group-hover:bg-gray-50 group-hover:border-gray-400 px-2 py-1",children:"Back to App"})})]})]}):this.state.pageToLoad===Oe.APPLICATION?Object(U.jsx)(Ne,{}):this.state.pageToLoad===Oe.RE_EVALUATION?Object(U.jsx)(Ae,{}):Object(U.jsx)(oe,{})}}]),s}(r.Component),Re=Object(p.b)((function(e){return{auth:e.auth}}))(Ee)},684:function(e,t,s){"use strict";var a=s(4),i=s.n(a),n=s(49),o=s(1),c=function(e){e.title;var t=e.description,s=void 0===t?"Please Wait for the system to publish the sessions or contact the administrator":t;return Object(o.jsx)("div",{className:"w-full my-5",children:Object(o.jsxs)("section",{className:"py-10 flex flex-col items-center rounded border border-gray-300 bg-white text-2xl font-medium text-yellow-800 animate__animated animate__pulse",children:[Object(o.jsxs)("div",{className:"flex flex-col items-center",children:[Object(o.jsx)(n.q,{className:"w-32 h-32"}),s]}),!1]})})};t.a=i.a.memo(c)},686:function(e,t,s){"use strict";s.d(t,"f",(function(){return m})),s.d(t,"d",(function(){return h})),s.d(t,"b",(function(){return b})),s.d(t,"e",(function(){return g})),s.d(t,"c",(function(){return x})),s.d(t,"g",(function(){return j})),s.d(t,"a",(function(){return f}));var a=s(5),i=s.n(a),n=s(7),o=s(10),c=s.n(o),r=s(6),l=s(8),d=s(16),u=s(14),p="".concat(l.a.AUTH,"/auth/user/access"),m=function(e){return function(){var t=Object(n.a)(i.a.mark((function t(s){var a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(!0,""),t.prev=1,Object(d.b)(),t.next=5,c.a.get("".concat(l.a.AUTH,"/system/setting"));case 5:a=t.sent,console.log("=================getSystemSettings==================="),console.log(a),console.log("=================getSystemSettings==================="),s({type:r.a.GET_SYSTEM_SETTINGS,payload:a.data}),e(!1,""),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(1),console.log({code_error:t.t0}),e(!1,Object(u.a)(t.t0));case 17:case"end":return t.stop()}}),t,null,[[1,13]])})));return function(e){return t.apply(this,arguments)}}()},h=function(e){return function(){var t=Object(n.a)(i.a.mark((function t(s){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s({type:r.a.DISABLE_SYSTEM_SETTINGS,payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},b=function(e){return function(){var t=Object(n.a)(i.a.mark((function t(s){var a,n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(!0,""),t.prev=1,Object(d.b)(),t.next=5,c.a.get("".concat(p,"/roleaccess"));case 5:a=t.sent,n=a.data.map((function(e){return{id:e.id,task:e.title,key:e.key,permitted:e.permitted}})),s({type:r.a.GET_TASK_ACCESS,payload:n}),e(!1,"",n),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(1),console.log({code_error:t.t0}),e(!1,Object(u.a)(t.t0));case 15:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e){return t.apply(this,arguments)}}()},g=function(e){return function(){var t=Object(n.a)(i.a.mark((function t(s){var a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(!0,""),t.prev=1,Object(d.b)(),t.next=5,c.a.get("".concat(l.a.APPLICATION,"/position"));case 5:a=t.sent,s({type:r.a.GET_POSTIONS,payload:a.data}),e(!1,""),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(1),console.log({code_error:t.t0}),e(!1,Object(u.a)(t.t0));case 14:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}()},x=function(e){return console.log({deletePosition:e}),function(){var t=Object(n.a)(i.a.mark((function t(s){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s({type:r.a.DELETE_POSITION,payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},j=function(e){return function(){var t=Object(n.a)(i.a.mark((function t(s){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s({type:r.a.PUBLISH_POSITION,payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},f=function(e,t){return function(){var s=Object(n.a)(i.a.mark((function s(a){var n;return i.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t(!0,""),s.prev=1,Object(d.b)(),s.next=5,c.a.get("".concat(l.a.APPLICATION,"/position/instituteposition/").concat(e));case 5:n=s.sent,a({type:r.a.GET_POSTIONS,payload:n.data}),t(!1,"",n.data),s.next=14;break;case 10:s.prev=10,s.t0=s.catch(1),console.log({code_error:s.t0}),t(!1,Object(u.a)(s.t0));case 14:case"end":return s.stop()}}),s,null,[[1,10]])})));return function(e){return s.apply(this,arguments)}}()}},688:function(e,t,s){"use strict";s(4);var a=s(1);t.a=function(e){var t=function(){for(var t=[],s=0;s<e.cols;s++)t.push(s);return t.map((function(e){return Object(a.jsx)("td",{className:"p-3 text-center whitespace-nowrap",children:Object(a.jsx)("div",{className:"w-full h-4 rounded bg-gray-200 animate__animated animate__pulse animate__delay-5s animate__infinite"})},e)}))};return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("tr",{className:"border-b border-gray-200",children:t()},Math.random()),Object(a.jsx)("tr",{className:"border-b border-gray-200",children:t()},Math.random()),Object(a.jsx)("tr",{className:"border-b border-gray-200",children:t()},Math.random())]})}},694:function(e,t,s){"use strict";s.d(t,"d",(function(){return a})),s.d(t,"c",(function(){return i})),s.d(t,"b",(function(){return n})),s.d(t,"a",(function(){return o}));var a,i,n,o,c=s(30);!function(e){e.Physical="Physical",e.Virtual="Virtual",e.Default="Default"}(a||(a={})),function(e){e.INITIATED="initiated",e.CONFIRMED="confirmed",e.RECEIVED="received"}(i||(i={})),function(e){e.Title="title",e.Description="description",e.Files="files",e.email="email",e.names="names",e.phone_number="phone_number",e.position="position",e.relation="relation",e.src="src",e.year="year",e.company="company",e.category_subcategory_data="category_subcategory_data",e.others="others",e.start_year="start_year",e.end_year="end_year",e.School="School",e.expiration_date="expiration_date"}(n||(n={})),function(e){e.APPROVED="approved",e.REJECTED="rejected"}(o||(o={}));c.d.APPLICATION,c.d.DOCUMENT_VALIDATION,c.d.EXAMINATION,c.d.MARKS_PUBLICATION,c.d.PLACEMENT_TRANSFER},708:function(e,t,s){"use strict";s.d(t,"b",(function(){return o})),s.d(t,"a",(function(){return c})),s.d(t,"f",(function(){return r})),s.d(t,"e",(function(){return l})),s.d(t,"c",(function(){return d})),s.d(t,"d",(function(){return u}));var a=s(126),i=s.n(a),n=(s(32),s(30)),o=function(e,t){var s="",a="",i="",n="";if(t.sub_category_id&&t.sub_category_id.length>0&&e.documentSubCategory?a=n=e.documentSubCategory.find((function(e){return e.user_detail_subcategory_id===t.sub_category_id}))?e.documentSubCategory.find((function(e){return e.user_detail_subcategory_id===t.sub_category_id})).title:"Unknown qualification":t.category_id.length>0&&e.documentCategory&&(s=n=e.documentCategory.find((function(e){return e.user_detail_category_id===t.category_id}))?e.documentCategory.find((function(e){return e.user_detail_category_id===t.category_id})).title:"Unknown category"),t.category_subcategory_data.length>0&&e.documentFields){var o=e.documentFields.find((function(e){return e._id===t.category_subcategory_data}));n+=" in "+(i=o?o.title:"Unknown filed")}return{category:s,sub_category:a,field:i,main:n}},c=function(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"default",a=[];for(var i in t){var n=t[i].details;for(var c in n){var r=t[i].details[c];null!==r.files&&r.files.length>0&&"default"===s&&"waiting"===r.validation_status?a.push({user_id:t[i]._id,n_id:t[i].n_id,fname:t[i].user_info.fname,lname:t[i].user_info.lname,phone_number:t[i].phone_number,district:t[i].user_info.district,email:t[i].email,main_doc_title:o(e,r).main,category_id:r.category_id,sub_category_id:r.sub_category_id,category_subcategory_data:r.category_subcategory_data,title:r.title,description:r.description,files:r.files,start_year:r.start_year,end_year:r.end_year,school:r.school,details_email:r.email,names:r.names,details_phone_number:r.phone_number,company:r.company,year:r.year,doc_id:r.doc_id,validation_status:r.validation_status,validated_by:r.validated_by,doc_history_status:r.doc_history_status,get_in_date:r.get_in_date,approved:r.approved,exams:t[i].exams}):null!==r.files&&r.files.length>0&&"all"===s&&a.push({user_id:t[i]._id,names:t[i].user_info.fname+" "+t[i].user_info.lname,n_id:t[i].n_id,fname:t[i].user_info.fname,lname:t[i].user_info.lname,phone_number:t[i].phone_number,district:t[i].user_info.district,email:t[i].email,main_doc_title:o(e,r).main,category_id:r.category_id,sub_category_id:r.sub_category_id,category_subcategory_data:r.category_subcategory_data,title:r.title,description:r.description,files:r.files,start_year:r.start_year,end_year:r.end_year,school:r.school,details_email:r.email,details_phone_number:r.phone_number,company:r.company,year:r.year,doc_id:r.doc_id,validation_status:r.validation_status,validated_by:r.validated_by,doc_history_status:r.doc_history_status,get_in_date:r.get_in_date,approved:r.approved,exams:t[i].exams})}}return a},r=function(e){if(e&&e.plans){var t=e.plans.find((function(e){return e.type_key===n.d.DOCUMENT_VALIDATION}));if(t){var s=i()(),a=i()(t.start_date),o=i()(t.end_date);if(a.diff(s,"days")<=0&&o.diff(s,"days")>=0&&t.type_status===n.e.OPEN)return!0}}return!1},l=function(e,t,s){var a,i=e.find((function(e){return e._id===t}));return i&&(a=i.details.find((function(e){return e.doc_id===s}))),{user:i,doc:a}},d=function(e,t){return e.filter((function(e){return e.validation_status===t&&e.files})).length},u=function(e,t,s){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"waiting",i=e;return"docCategory"===t?i=e.filter((function(e){return e.category_id===s&&e.files&&e.files.length>0&&e.validation_status===a})):"docSubCategory"===t&&(i=e.filter((function(e){return e.sub_category_id===s&&e.files&&e.files.length>0&&e.validation_status===a}))),i.length}},821:function(e,t,s){"use strict";var a=s(4),i=s.n(a),n=s(1),o=function(){return Object(n.jsxs)("section",{children:[Object(n.jsxs)("div",{className:"bg-white border border-gray-200 rounded mb-3 p-4 flex justify-between items-start animate__animated animate-pulse",children:[Object(n.jsxs)("div",{className:"flex flex-col gap-2",children:[Object(n.jsx)("h2",{className:"text-balck font-semibold text-xl",children:Object(n.jsx)("div",{className:"h-5 w-28 bg-gray-300 rounded"})}),Object(n.jsxs)("div",{className:"flex items-center gap-2",children:[Object(n.jsx)("div",{className:"h-4 w-12 bg-gray-300 rounded"}),Object(n.jsx)("div",{className:"h-4 w-16 bg-gray-300 rounded"})]})]}),Object(n.jsx)("div",{className:"h-10 w-28  bg-gray-300 rounded"})]}),Object(n.jsxs)("div",{className:"bg-white border border-gray-200 rounded mb-3 p-4 flex justify-between items-start animate__animated animate-pulse",children:[Object(n.jsxs)("div",{className:"flex flex-col gap-2",children:[Object(n.jsx)("h2",{className:"text-balck font-semibold text-xl",children:Object(n.jsx)("div",{className:"h-5 w-28 bg-gray-300 rounded"})}),Object(n.jsxs)("div",{className:"flex items-center gap-2",children:[Object(n.jsx)("div",{className:"h-4 w-12 bg-gray-300 rounded"}),Object(n.jsx)("div",{className:"h-4 w-16 bg-gray-300 rounded"})]})]}),Object(n.jsx)("div",{className:"h-10 w-28  bg-gray-300 rounded"})]}),Object(n.jsxs)("div",{className:"bg-white border border-gray-200 rounded mb-3 p-4 flex justify-between items-start animate__animated animate-pulse",children:[Object(n.jsxs)("div",{className:"flex flex-col gap-2",children:[Object(n.jsx)("h2",{className:"text-balck font-semibold text-xl",children:Object(n.jsx)("div",{className:"h-5 w-28 bg-gray-300 rounded"})}),Object(n.jsxs)("div",{className:"flex items-center gap-2",children:[Object(n.jsx)("div",{className:"h-4 w-12 bg-gray-300 rounded"}),Object(n.jsx)("div",{className:"h-4 w-16 bg-gray-300 rounded"})]})]}),Object(n.jsx)("div",{className:"h-10 w-28  bg-gray-300 rounded"})]})]})};t.a=i.a.memo(o)}}]);
//# sourceMappingURL=33.889d9bd6.chunk.js.map