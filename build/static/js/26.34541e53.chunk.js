(this["webpackJsonpreact-redux-typescript-advance"]=this["webpackJsonpreact-redux-typescript-advance"]||[]).push([[26,43,54],{1303:function(e,t,s){"use strict";s.r(t),s.d(t,"AdminDashboard",(function(){return se}));var n=s(24),r=s(23),i=s(26),a=s(25),c=s(5),o=s.n(c),l=s(21),d=s(3),u=s(170),p=s(650),h=s(655),m=s(31),b=s(39),f=s(13),x=s(657),j=s(667),g=s(18),_=s(63),v=s(670),O=s(19),y=s(48),N=s(43),C=s(682),I=s.n(C),T=s(1),E=[{min:65,max:null},{min:55,max:64},{min:45,max:54},{min:35,max:44},{min:25,max:34},{min:18,max:24}],S=["65+","55-64","45-54","35-44","25-34","18-24"],w=function(e){var t=E,s=S;Object(c.useEffect)((function(){e.ageFrom&&e.ageTo&&e.action&&!0===e.action&&E.forEach((function(t){e.ageFrom&&t.min>=e.ageFrom&&e.ageTo&&t.max&&t.max<=e.ageTo?console.log({condition:t}):console.log({nocondition:t})})),e.setAction&&e.setAction(!1)}),[e,e.action,e.ageFrom,e.ageTo,t]);var n=function(){var s=[0,0,0,0,0,0,0],n=[0,0,0,0,0,0,0],r=e.getAllApplicantByInsitute("ALL").data.filter((function(e){return"M"===e.userInfo.user_info.sex})),i=e.getAllApplicantByInsitute("ALL").data.filter((function(e){return"F"===e.userInfo.user_info.sex}));return r.forEach((function(n){for(var r=0;r<t.length;r++)(null===t[r].max&&Object(N.d)(n.userInfo.user_info.date_of_birth)>=t[r].min&&e.ageFrom&&Object(N.d)(n.userInfo.user_info.date_of_birth)>=e.ageFrom||null!==t[r].max&&Object(N.d)(n.userInfo.user_info.date_of_birth)<=t[r].max&&e.ageTo&&Object(N.d)(n.userInfo.user_info.date_of_birth)<=e.ageTo&&Object(N.d)(n.userInfo.user_info.date_of_birth)>=t[r].min&&e.ageFrom&&Object(N.d)(n.userInfo.user_info.date_of_birth)>=e.ageFrom)&&(s[r]=s[r]+1)})),i.forEach((function(s){for(var r=0;r<t.length;r++)(null===t[r].max&&Object(N.d)(s.userInfo.user_info.date_of_birth)>=t[r].min&&e.ageFrom&&Object(N.d)(s.userInfo.user_info.date_of_birth)>=e.ageFrom||null!==t[r].max&&Object(N.d)(s.userInfo.user_info.date_of_birth)<=t[r].max&&e.ageTo&&Object(N.d)(s.userInfo.user_info.date_of_birth)<=e.ageTo&&Object(N.d)(s.userInfo.user_info.date_of_birth)>=t[r].min&&e.ageFrom&&Object(N.d)(s.userInfo.user_info.date_of_birth)>=e.ageFrom)&&(n[r]=n[r]+1)})),{male:s,female:n}},r={plotOptions:{bar:{borderRadius:4,horizontal:!0}},labels:s,dataLabels:{enabled:!0},xaxis:{categories:s},yaxis:{title:{text:"(Age range)"}},tooltip:{y:{formatter:function(e){return e+" Applicants"}}},chart:{stacked:e.stacked},colors:[P.male,P.female]};return Object(T.jsx)(o.a.Fragment,{children:Object(T.jsx)(I.a,{options:r,series:[{name:"Male",data:n().male},{name:"Female",data:n().female}],type:e.chartType?e.chartType:"bar",width:"100%",height:"350"})})},A=o.a.memo(w),L=s(697),P={male:"#3998a2",female:"#002243"},R=function(e){var t={from:18,to:75},s=Object(c.useState)(t.from.toString()),n=Object(g.a)(s,2),r=n[0],i=n[1],a=Object(c.useState)(t.to.toString()),o=Object(g.a)(a,2),l=o[0],d=o[1],u=Object(c.useState)(!1),p=Object(g.a)(u,2),h=p[0],m=p[1],b=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"FROM";"FROM"===t?(i(e),Number(e)>Number(l)&&d(e)):(d(e),Number(e)<Number(r)&&i(e)),m(!0)},f=function(e,t){for(var s=[],n=e;n<=t;n++)s.push(n);return s},x=function(e,t,s){return{data:e.filter((function(e){return Object(N.d)(e.userInfo.user_info.date_of_birth)>=Number(t)&&Object(N.d)(e.userInfo.user_info.date_of_birth)<=Number(s)})),ids:[]}};return Object(T.jsxs)("section",{className:"grid grid-cols-1 md:grid-cols-3 gap-2 my-3",children:[Object(T.jsxs)("div",{className:"bg-white rounded col-span-1 md:col-span-1",children:[Object(T.jsx)("div",{className:"px-3 py-4",children:Object(T.jsx)("span",{className:"text-gray-600 font-semibold text-xl",children:"Number of Applicants per Gender"})}),Object(T.jsx)("div",{className:"flex justify-center",children:Object(T.jsx)(L.a,{options:{labels:["Male","Female"],legend:{position:"bottom",horizontalAlign:"center",fontSize:"16px",itemMargin:{horizontal:3,vertical:0}},plotOptions:{pie:{donut:{labels:{show:!0,name:{show:!0,fontSize:"22px",fontFamily:"Rubik",color:"#dfsda",offsetY:-10},value:{show:!0,fontSize:"16px",fontFamily:"Helvetica, Arial, sans-serif",color:void 0,offsetY:16,formatter:function(e){return e}},total:{show:!0,label:"Total",color:"#373d3f",formatter:function(e){return e.globals.seriesTotals.reduce((function(e,t){return e+t}),0)}}}}}},colors:[P.male,P.female]},series:[x(e.getAllApplicantByInsitute("M").data,r,l).data.length,x(e.getAllApplicantByInsitute("F").data,r,l).data.length]})})]}),Object(T.jsxs)("div",{className:"bg-white rounded col-span-1 md:col-span-2",children:[Object(T.jsxs)("div",{className:"flex items-center justify-between px-3",children:[Object(T.jsx)("span",{className:"text-gray-600 my-4 font-semibold text-xl",children:"Number of Applicants per Age"}),Object(T.jsx)("div",{className:"bg-white",children:Object(T.jsxs)("nav",{className:"flex flex-col sm:flex-row",children:[Object(T.jsx)("select",{value:r,onChange:function(e){return b(e.target.value)},className:"mt-1 block w-full py-2 px-3 border-2 border-gray-300 bg-white rounded focus:outline-none focus:border-gray-500 sm:text-sm",children:f(t.from,t.to).map((function(e,t){return Object(T.jsx)("option",{value:e,children:e},t+e)}))}),Object(T.jsx)("div",{className:"relative self-center",children:Object(T.jsx)(y.c,{className:"mt-2 h-6 w-6 text-gray-600"})}),Object(T.jsx)("select",{value:l,onChange:function(e){return b(e.target.value,"TO")},className:"mt-1 block w-full py-2 px-3 border-2 border-gray-300 bg-white rounded focus:outline-none focus:border-gray-500 sm:text-sm",children:f(t.from,t.to).map((function(e,t){return Object(T.jsx)("option",{value:e,children:e},t+e)}))})]})})]}),Object(T.jsx)(A,{getAllApplicantByInsitute:e.getAllApplicantByInsitute,stacked:!0,ageFrom:Number(r),ageTo:Number(l),action:h,setAction:m})]})]})},k=o.a.memo(R),D=s(665),U=function(e){var t=Object(c.useState)({exam:!1}),s=Object(g.a)(t,2),n=s[0],r=s[1],i=Object(c.useState)(null),a=Object(g.a)(i,2),l=a[0],d=a[1],u=function(){var t=[],s=!1;if(e.dashboard.applications&&l){var n=[],r=[],i=[],a=[],c=[];for(var o in e.FC_DistinctDistrict().distinctDistricts){if(Object.prototype.hasOwnProperty.call(e.FC_DistinctDistrict().distinctDistricts,o))for(var d in e.dashboard.applications)if(Object.prototype.hasOwnProperty.call(e.dashboard.applications,d))for(var u=0;u<e.dashboard.applications[d].exams.length;u++)if(e.FC_CentersInDistrict(e.FC_DistinctDistrict().distinctDistricts[o].district_id).ids.includes(e.dashboard.applications[d].exams[u].center_id)&&e.dashboard.applications[d].exams[u].course_id===l.course_id){if(c.includes(e.dashboard.applications[d]._id)||a.includes(e.dashboard.applications[d].exams[u].course_id))continue;a.push(e.dashboard.applications[d].exams[u].course_id),c.push(e.dashboard.applications[d]._id),i.push(e.dashboard.applications[d])}else;console.log({district:e.FC_DistinctDistrict().distinctDistricts[o].district_name,data:i,dataExams:a,series:e.FC_Count(i)}),n.push(e.FC_Count(i).male),r.push(e.FC_Count(i).female),i=[],a=[],c=[]}s=n.length>10||r.length>10,t=[{name:"Male",data:n},{name:"Female",data:r}]}return{categoriesLabel:e.FC_DistinctDistrict().distinctDistrictNames,dataLabels:!1,yaxisText:"(Number of Applicants)",tooltipText:"Applicants",series:t,isHorizontalAllowed:s}};return Object(T.jsxs)(o.a.Fragment,{children:[Object(T.jsxs)("section",{className:"my-3 bg-white",children:[Object(T.jsxs)("div",{className:"flex items-center px-3 gap-2 py-2",children:[Object(T.jsxs)("span",{className:"text-gray-600 font-semibold text-xl",children:["Number of Applicants per Exam",l&&" of ",l&&Object(T.jsx)("span",{className:"cursor-pointer font-bold uppercase  hover:underline",onClick:function(){return!e.loading&&!e.loadingApplications&&!e.loadingEducation&&r({exam:!0})},children:l.course_name})]}),Object(T.jsx)("button",{className:"rounded-full border-2 border-blue-500 px-2 py-1 hover:bg-blue-50 hover:border-blue-700",disabled:e.loading||e.loadingApplications||e.loadingEducation,onClick:function(){return r({exam:!0})},children:l?"Change Exam":"Choose Exam"})]}),l?Object(T.jsx)(D.a,{labels:u().categoriesLabel,categoriesLabel:u().categoriesLabel,dataLabels:u().dataLabels,yaxisText:u().yaxisText,tooltipText:u().tooltipText,series:u().series,FC_LoadSelected:function(e,t){console.log("FC_OpenCenter loaded"),console.log({labels:u().categoriesLabel,selectedLabels:u().categoriesLabel[e],selectedLabelsIndex:e,gender:0===t?"M":"F"})},colors:[P.male,P.female],defaultBar:{borderRadius:4,horizontal:u().isHorizontalAllowed,columnWidth:"95%",endingShape:"rounded"},chartHeight:e.chartHeight}):Object(T.jsxs)("div",{className:"flex flex-col items-center animate__animated animate__flash cursor-pointer text-gray-500 hover:text-gray-600",onClick:function(){return!e.loading&&!e.loadingApplications&&!e.loadingEducation&&r({exam:!0})},children:[Object(T.jsx)(_.i,{className:"w-72 h-72"}),Object(T.jsx)("span",{className:"text-4xl font-semibold",children:"Choose course to view"})]})]}),n.exam&&Object(T.jsx)(O.c,{backDrop:!0,theme:O.b.default,close:function(){r({exam:!1})},displayClose:!0,backDropClose:!1,title:"Choosing Exam",widthSizeClass:O.a.large,padding:{title:!0,body:!1,footer:!1},children:Object(T.jsx)(v.a,{selected_course_id:l?l.course_id:null,setSelectedCourse:function(e){d(e),r({exam:!1}),u()}})})]})},q=o.a.memo(U),F=function(e){Object(i.a)(s,e);var t=Object(a.a)(s);function s(e){var r;return Object(n.a)(this,s),(r=t.call(this,e)).state={thisSeries:[]},r}return Object(r.a)(s,[{key:"render",value:function(){return Object(T.jsxs)("section",{className:"my-3 bg-white",children:[Object(T.jsx)("div",{className:"flex items-center justify-between px-3",children:Object(T.jsx)("span",{className:"text-gray-600 font-semibold text-xl py-4 px-0",children:"Number of Applications per Position"})}),Object(T.jsx)("div",{className:"mb-4 mx-2",children:Object(T.jsx)(D.a,{labels:this.props.positionNames,categoriesLabel:this.props.positionNames,dataLabels:!1,yaxisText:"(Number of Applications)",tooltipText:"applications",series:this.props.thisSeries,colors:[P.male,P.female],defaultBar:{borderRadius:4,horizontal:!0,columnWidth:"95%",endingShape:"rounded"}})})]})}}]),s}(c.Component),M=o.a.memo(F),B=function(e){var t={categoriesLabel:["Initiated","Incomplete","Rejected","Pending","Shortlisted"],dataLabels:!1,yaxisText:"(Number of Applications)",tooltipText:"applications",series:[{name:"Initiated",data:[e.FC_ApplicationsByInsitutes(m.a.Initiated).data.length]},{name:"Incomplete",data:[e.FC_ApplicationsByInsitutes(m.a.Incomplete).data.length]},{name:"Rejected",data:[e.FC_ApplicationsByInsitutes(m.a.Rejected).data.length]},{name:"Pending",data:[e.FC_ApplicationsByInsitutes(m.a.Pending).data.length]},{name:"Shortlisted",data:[e.FC_ApplicationsByInsitutes(m.a.Shortlisted).data.length]}]};return Object(T.jsxs)("section",{className:"my-3 bg-white",children:[Object(T.jsx)("div",{className:"flex items-center px-3",children:Object(T.jsx)("span",{className:"text-gray-600 font-semibold text-xl py-4 px-6",children:"Applications per Status"})}),Object(T.jsx)("div",{className:"mb-4 mx-2",children:Object(T.jsx)(D.a,{labels:t.categoriesLabel,categoriesLabel:t.categoriesLabel,dataLabels:t.dataLabels,yaxisText:t.yaxisText,tooltipText:t.tooltipText,series:t.series,colors:["#A5978B","#546E7A","#D7263D","#E2C044","#008FFB"],chartHeight:e.chartHeight})})]})},G=o.a.memo(B),H="#0171c1",z="#50a147",V=function(e){var t=Object(c.useState)({center:!1}),s=Object(g.a)(t,2),n=s[0],r=s[1],i=Object(c.useState)(null),a=Object(g.a)(i,2),l=a[0],d=a[1],u=Object(c.useState)(""),p=Object(g.a)(u,2),h=p[0],m=p[1],b={categoriesLabel:e.FC_DistinctDistrict().distinctDistrictNames,dataLabels:!0,yaxisText:"(District Capacity)",tooltipText:"Seats",series:e.FC_DistinctDistrict().capacity},f=function(t){var s=0,n=0,r=[],i=[],a=[],c=[],o=[],l=Object(j.a)(e.locations).filter((function(e){return e.district_id===t}));for(var d in l)if(Object.prototype.hasOwnProperty.call(l,d)){if(c.includes(l[d].center_id))continue;c.push(l[d].center_id),o.push(l[d].center_name)}var u=function(t){if(Object.prototype.hasOwnProperty.call(c,t)){var r=Object(j.a)(e.locations).filter((function(e){return e.center_id===c[t]}));for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(s+=r[o].capacity,n<r[o].occupied&&(n=r[o].occupied));i.push(s),a.push(n),s=0,n=0}};for(var p in c)u(p);return r.push({name:"Capacity",data:i},{name:"Occupied",data:a}),{distinctDistricts:[],distinctDistrictNames:o,distinctDistrictIds:[],capacity:r}},x=function(t,s){m(e.FC_DistinctDistrict().distinctDistrictNames[t]),d({categoriesLabel:f(e.FC_DistinctDistrict().distinctDistrictIds[t]).distinctDistrictNames,dataLabels:!1,yaxisText:"(Center Seats Capacity)",tooltipText:"Seats",series:f(e.FC_DistinctDistrict().distinctDistrictIds[t]).capacity}),r({center:!0})};return Object(T.jsxs)(o.a.Fragment,{children:[Object(T.jsxs)("section",{className:"my-3 bg-white",children:[Object(T.jsx)("div",{className:"flex items-center px-3 gap-2 py-2",children:Object(T.jsx)("span",{className:"text-gray-600 font-semibold text-xl",children:"District Capacity vs The Highest Occupation"})}),Object(T.jsx)(D.a,{labels:b.categoriesLabel,categoriesLabel:b.categoriesLabel,dataLabels:b.dataLabels,yaxisText:b.yaxisText,tooltipText:b.tooltipText,series:b.series,colors:[H,z],FC_LoadSelected:x,defaultBar:{borderRadius:4,horizontal:!0,columnWidth:"95%",endingShape:"rounded"},chartHeight:e.chartHeight})]}),n.center&&l&&Object(T.jsx)(O.c,{backDrop:!0,theme:O.b.default,close:function(){r({center:!1}),d(null),m("")},displayClose:!0,backDropClose:!1,title:"".concat(h," district Capacity vs The Highest Occupation"),widthSizeClass:O.a.extraLarge,padding:{title:!0,body:!1,footer:!1},children:Object(T.jsx)("div",{className:"px-3",children:Object(T.jsx)(D.a,{labels:l.categoriesLabel,categoriesLabel:l.categoriesLabel,dataLabels:l.dataLabels,yaxisText:l.yaxisText,tooltipText:l.tooltipText,colors:[H,z],series:l.series,FC_LoadSelected:x,defaultBar:{borderRadius:4,horizontal:!0,columnWidth:"95%",endingShape:"rounded"}})})})]})},Y=o.a.memo(V),W=s(50),X=s(10),K=s(708),J=function(e){return Object(T.jsxs)("div",{className:"grid lg:grid-cols-4 md:grid-cols-3 sm:grid-cols-2 grid-cols-1 gap-4 items-center mx-auto",children:[Object(T.jsx)(K.a,{title:"Applicants",icon:_.q,iconColor:"blue",count:e.applicants}),Object(T.jsx)(K.a,{title:"Positions",icon:W.g,iconColor:"pink",count:e.positions,countOver:e.allPositions}),Object(T.jsx)(K.a,{title:"Applications",icon:X.I,iconColor:"indigo",count:e.applications})]})},Z=o.a.memo(J),Q=s(172),$=s(182),ee=o.a.memo(Object(l.b)(null,{GetApplicationPerPeriod:$.a,PushPopupAlert:d.Kb})((function(e){return Object(T.jsxs)("div",{className:"mt-3 rounded flex flex-col md:flex-row md:justify-between items-start",children:[Object(T.jsxs)("div",{className:"flex flex-row items-center gap-3 mb-2",children:[Object(T.jsx)(Q.b,{className:"text-6xl text-blue-600 hidden md:block"}),Object(T.jsx)("div",{className:"flex flex-col",children:Object(T.jsx)("span",{className:"text-blue-600 text-3xl font-bold",children:e.reportTitle})})]}),Object(T.jsxs)("section",{className:"w-full md:w-auto my-2 md:my-0",children:[Object(T.jsx)("section",{children:e.education_categories&&e.education_categories.length>0&&Object(T.jsxs)("div",{className:"flex items-start md:items-center justify-start md:justify-end gap-2",children:[e.allEducation&&Object(T.jsx)("div",{className:"w-auto ".concat(e.loading||e.loadingApplications||e.loadingEducation?"cursor-not-allowed":"cursor-pointer"," ").concat(null===e.thisEducation?"bg-blue-500 text-white font-bold":"bg-gray-100 text-blue-800"," mb-1 hover:font-bold py-1 hover:bg-blue-400 hover:text-white --font-bold  px-2 rounded-md flex items-center animate__animated animate__zoomIn"),onClick:function(){return!e.loading&&!e.loadingEducation&&e.setThisEducation(null)},children:Object(T.jsxs)("section",{className:"flex-1",children:[Object(T.jsx)(X.n,{className:"inline-block mr-1 text-xs"}),Object(T.jsx)("span",{children:"All"})]})}),e.education_categories.map((function(t,s){return Object(T.jsx)("div",{className:"w-auto ".concat(e.loading||e.loadingApplications||e.loadingEducation?"cursor-not-allowed":"cursor-pointer"," ").concat(e.thisEducation&&t.education_institute_id===e.thisEducation.education_institute_id?"bg-blue-500 text-white font-bold":"bg-gray-100 text-blue-800"," mb-1 hover:font-bold py-1 hover:bg-blue-400 hover:text-white --font-bold  px-2 rounded-md flex items-center animate__animated animate__zoomIn"),onClick:function(){return!e.loading&&!e.loadingApplications&&!e.loadingEducation&&e.setThisEducation(t)},children:Object(T.jsxs)("div",{className:"flex-1",children:[Object(T.jsx)(X.n,{className:"inline-block mr-1 text-xs"}),Object(T.jsx)("span",{children:t.education_category_title})]})},t.education_institute_id+s)}))]})}),Object(T.jsx)("div",{className:"mb-2",children:Object(T.jsx)("select",{className:"bg-white text-gray-600 border border-gray-400 rounded p-2 focus:outline-none ".concat((e.loadingApplications||null===e.application_sessions)&&"cursor-wait"),value:e.thisPeriod,disabled:e.loading||e.loadingApplications||e.loadingEducation||null===e.application_sessions,onChange:function(t){e.setThisPeriod(t.target.value),e.setLoadingApplications(!0),e.GetApplicationPerPeriod(t.target.value,(function(t,s){e.setLoadingApplications(t),!t&&s.length>0&&e.PushPopupAlert({title:Object(f.a)(s),theme:b.a.danger})}))},children:e.application_sessions&&e.application_sessions.map((function(e,t){return Object(T.jsx)("option",{value:e.session_plan_id,children:e.session_plan_name},e.session_plan_id+t)}))})})]})]})}))),te=function(e){Object(i.a)(s,e);var t=Object(a.a)(s);function s(e){var r;return Object(n.a)(this,s),(r=t.call(this,e)).setLoading=function(e){r.setState({loading:e})},r.setLoadingEducation=function(e){r.setState({loadingEducation:e})},r.setLoadingApplications=function(e){r.setState({loadingApplications:e})},r.setThisEducation=function(e){r.setState({thisEducation:e})},r.setThisPeriod=function(e){r.setState({thisPeriod:e})},r.componentDidMount=function(){if(null===r.props.education_categories?r.props.loadEducationCategories((function(e,t){r.setLoadingEducation(e),t&&t.length>0&&null===r.state.thisEducation&&(null===r.props.dashboard.applications&&(r.setLoadingEducation(e),r.props.GetApplicationPerPeriod(t[0].education_institute_id,(function(e,t){r.setLoadingEducation(e),!e&&t.length>0&&r.props.PushPopupAlert({title:Object(f.a)(t),theme:b.a.danger})}))),r.setThisEducation(t[0]))})):r.props.education_categories&&r.props.education_categories.length>0&&null===r.state.thisEducation&&(null===r.props.dashboard.applications&&(r.setLoadingEducation(!0),r.props.GetApplicationPerPeriod(r.props.education_categories[0].education_institute_id,(function(e,t){r.setLoadingEducation(e),!e&&t.length>0&&r.props.PushPopupAlert({title:Object(f.a)(t),theme:b.a.danger})}))),r.setThisEducation(r.props.education_categories[0])),null===r.props.systemPositions&&r.props.getPositions((function(e,t){r.setLoadingEducation(e),t.length&&r.props.PushPopupAlert({title:t,theme:b.a.danger})})),null===r.props.application_sessions)r.props.GetAllSessionPlans((function(e,t,s){var n,i;(r.setLoadingEducation(e),!e&&t.length&&r.props.PushPopupAlert({title:t,theme:b.a.danger}),!e&&s&&s.length)&&(r.state.thisPeriod.length?i=r.state.thisPeriod:(n=s.find((function(e){return e.is_active})))?(r.setThisPeriod(n.session_plan_id),i=n.session_plan_id):(r.setThisPeriod(s[0].session_plan_id),i=s[0].session_plan_id),r.props.GetApplicationPerPeriod(i,(function(e,t){r.setLoadingEducation(e),!e&&t.length>0&&r.props.PushPopupAlert({title:Object(f.a)(t),theme:b.a.danger})})))}));else if(r.props.application_sessions&&r.props.application_sessions.length>0&&!r.state.thisPeriod.length){var e,t;r.setLoadingEducation(!0),r.state.thisPeriod.length?t=r.state.thisPeriod:(e=r.props.application_sessions.find((function(e){return e.is_active})))?(r.setThisPeriod(e.session_plan_id),t=e.session_plan_id):(r.setThisPeriod(r.props.application_sessions[0].session_plan_id),t=r.props.application_sessions[0].session_plan_id),r.props.GetApplicationPerPeriod(t,(function(e,t){r.setLoadingEducation(e),!e&&t.length>0&&r.props.PushPopupAlert({title:Object(f.a)(t),theme:b.a.danger})}))}!r.props.locations.length&&r.state.loading?r.props.getAllRoom((function(e,t){r.setLoading(e),!e&&t.length>0&&console.error(t)})):r.setLoading(!1),null===r.props.course.courses?(r.setLoadingEducation(!0),r.props.loadCourses(r.setLoadingEducation)):r.setLoadingEducation(!1)},r.getPositionsByInstitute=function(){var e=[],t=[];return r.props.systemPositions&&r.state.thisEducation&&(t=r.props.systemPositions.filter((function(e){return e.education_institute_id.education_institute_id===r.state.thisEducation.education_institute_id}))).forEach((function(t){e.push(t.position_id)})),{data:t,ids:e}},r.getApplicationsByInsitutes=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ALL",t=[],s=[],n=[],i=[];if(r.props.dashboard.applications&&r.state.thisEducation){for(var a in t=r.props.dashboard.applications.filter((function(e){return r.getPositionsByInstitute().ids.includes(e.position)})))if(Object.prototype.hasOwnProperty.call(t,a)){if(i.includes(t[a].position))continue;i.push(t[a].position)}var c=[];return"ALL"!==e?c=t.filter((function(t){return t.application_status===e})):"ALL"===e&&(c=t),c.forEach((function(e){s.push(e._id),n.includes(e.user_id)||n.push(e.user_id)})),{data:c,ids:s,uids:n,positions:i}}return{data:t,ids:s,uids:n,positions:i}},r.getAllApplicantByInsitute=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ALL",t=[],s=[];return r.state.thisEducation&&(s="M"===e?r.getApplicationsByInsitutes().data.filter((function(e){return r.getApplicationsByInsitutes().uids.includes(e.user_id)&&"M"===e.userInfo.user_info.sex})):"F"===e?r.getApplicationsByInsitutes().data.filter((function(e){return r.getApplicationsByInsitutes().uids.includes(e.user_id)&&"F"===e.userInfo.user_info.sex})):r.getApplicationsByInsitutes().data.filter((function(e){return r.getApplicationsByInsitutes().uids.includes(e.user_id)}))),{data:s,ids:t}},r.FC_DistinctDistrict=function(){var e,t=[],s=[],n=[],i=0,a=0,c=Object(j.a)(r.props.locations).length,o=[],l=[],d=[],u=[];for(e=0;e<c;e++)t.includes(Object(j.a)(r.props.locations)[e].district_id)||(t.push(Object(j.a)(r.props.locations)[e].district_id),s.push(Object(j.a)(r.props.locations)[e].district_name),n.push(Object(j.a)(r.props.locations)[e]));var p=function(e){if(Object.prototype.hasOwnProperty.call(t,e)){var s=Object(j.a)(r.props.locations).filter((function(s){return s.district_id===t[e]}));for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&"0"!==s[n].room_name&&(i+=s[n].capacity,a<s[n].occupied&&(a=s[n].occupied));o.push({all:i,occupied:a}),d.push(i),u.push(a),i=0,a=0}};for(var h in t)p(h);return l.push({name:"Capacity",data:d},{name:"Occupied",data:u}),{distinctDistricts:n,distinctDistrictNames:s,distinctDistrictIds:t,capacity:l}},r.FC_CentersInDistrict=function(e){var t,s=[],n=[],i=0,a=0,c=Object(j.a)(r.props.locations).filter((function(t){return t.district_id===e})),o=c.length;for(t=0;t<o;t++)s.includes(c[t].center_id)||(s.push(c[t].center_id),n.push(c[t].center_name),i+=c[t].capacity,a<c[t].occupied&&(a=c[t].occupied));return{ids:s,names:n,capacity:[{all:i,occupied:a}]}},r.FC_SelectedPositions=function(){var e=[],t=[],s=[],n=[],i=[],a=[],c=r.getApplicationsByInsitutes().data,o=[];r.props.systemPositions&&r.state.thisEducation&&(s=r.props.systemPositions.filter((function(e){return e.education_institute_id.education_institute_id===r.state.thisEducation.education_institute_id&&e.isPublished&&!e.isDeleted}))).forEach((function(s){e.includes(s.position_id)||(t.push(s),a.push(s.position_title),e.push(s.position_id))}));var l=function(e){if(Object.prototype.hasOwnProperty.call(s,e)){var t=c.filter((function(t){return t.position===s[e].position_id}));t.length>0&&t.forEach((function(e){o.push(e)})),i.includes(s[e].position_id)||(i.push(s[e].position_id),n.push(s[e]))}};for(var d in s)l(d);return{data:n,dataNames:a,applications:o,ids:e}},r.FC_Count=function(e){var t=0,s=0,n=function(n){Object.prototype.hasOwnProperty.call(e,n)&&(r.props.dashboard.userInfo&&("M"===r.props.dashboard.userInfo.filter((function(t){return t.user_id===e[n].user_id}))[0].user_info.sex?t+=1:s+=1))};for(var i in e)n(i);return{male:t,female:s}},r.FC_GetUserByGender=function(){var e=0,t=0,s=[],n=[],i=function(i){if(Object.prototype.hasOwnProperty.call(r.FC_SelectedPositions().data,i)){var a=r.FC_SelectedPositions().applications.filter((function(e){return e.position===r.FC_SelectedPositions().data[i].position_id}));for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&("M"===a[c].userInfo.user_info.sex?e+=1:t+=1);s.push(e),n.push(t),e=0,t=0}};for(var a in r.FC_SelectedPositions().data)i(a);return console.log("===================================="),console.log({positions:r.FC_SelectedPositions().data.length,genders:s.length}),console.log("===================================="),{male:s,female:n}},r.state={loading:!0,loadingEducation:!0,loadingApplications:!1,thisEducation:null,thisPeriod:""},r}return Object(r.a)(s,[{key:"render",value:function(){return null===this.props.application_sessions||null===this.props.education_categories||null===this.props.dashboard.applications||null===this.props.systemPositions||this.state.loading||this.state.loadingEducation?Object(T.jsx)("div",{className:"text-center mt-7 font-bold text-4xl text-gray-400 animate-pulse",children:"Loading Data..."}):0===this.props.application_sessions.length?Object(T.jsx)(x.a,{}):Object(T.jsxs)("div",{children:[Object(T.jsx)(ee,{education_categories:this.props.education_categories,loading:this.state.loading,loadingApplications:this.state.loadingApplications,loadingEducation:this.state.loadingEducation,thisEducation:this.state.thisEducation,setThisEducation:this.setThisEducation,thisPeriod:this.state.thisPeriod,setThisPeriod:this.setThisPeriod,application_sessions:this.props.application_sessions,setLoadingApplications:this.setLoadingApplications,reportTitle:"Application Dashboard",allEducation:!1}),Object(T.jsx)(Z,{applicants:this.getAllApplicantByInsitute().ids.length,applications:this.getApplicationsByInsitutes().data.length,shortlisted:this.getApplicationsByInsitutes(m.a.Shortlisted).data.length,rejected:this.getApplicationsByInsitutes(m.a.Rejected).data.length,positions:this.getApplicationsByInsitutes().positions.length,allPositions:this.getPositionsByInstitute().data.filter((function(e){return e.isPublished})).length}),this.props.dashboard.userInfo&&Object(T.jsx)(G,{FC_ApplicationsByInsitutes:this.getApplicationsByInsitutes,chartHeight:450}),Object(T.jsx)(q,{FC_CentersInDistrict:this.FC_CentersInDistrict,FC_DistinctDistrict:this.FC_DistinctDistrict,FC_Count:this.FC_Count,loading:this.state.loading,loadingApplications:this.state.loadingApplications,loadingEducation:this.state.loadingEducation,dashboard:this.props.dashboard,chartHeight:500}),Object(T.jsx)(Y,{FC_CentersInDistrict:this.FC_CentersInDistrict,FC_DistinctDistrict:this.FC_DistinctDistrict,FC_Count:this.FC_Count,loading:this.state.loading,locations:this.props.locations,loadingApplications:this.state.loadingApplications,loadingEducation:this.state.loadingEducation,dashboard:this.props.dashboard,FC_GetPositionsByInstitute:this.getPositionsByInstitute,chartHeight:500}),Object(T.jsx)(M,{positionNames:this.FC_SelectedPositions().dataNames,thisSeries:[{name:"Male",data:this.FC_GetUserByGender().male},{name:"Female",data:this.FC_GetUserByGender().female}]}),Object(T.jsx)(k,{getAllApplicantByInsitute:this.getAllApplicantByInsitute})]})}}]),s}(c.Component),se=Object(l.b)((function(e){var t=e.auth,s=e.locations,n=e.schoolLevels,r=e.dashboard,i=e.course,a=e.system_settings,c=e.sessionPlan;return{auth:t,locations:s.roomLocation,education_categories:n.education_categories,dashboard:r,course:i,systemPositions:a.systemPositions,application_sessions:c.allSessionPlans}}),{getAllRoom:u.q,loadEducationCategories:d.Dc,getPositions:h.d,GetAllSessionPlans:p.b,GetApplicationPerPeriod:d.Cb,loadCourses:d.Bc,PushPopupAlert:d.Kb})(te)},644:function(e,t,s){"use strict";s.d(t,"e",(function(){return n})),s.d(t,"d",(function(){return r})),s.d(t,"b",(function(){return i})),s.d(t,"c",(function(){return a})),s.d(t,"g",(function(){return c})),s.d(t,"f",(function(){return o})),s.d(t,"a",(function(){return l}));var n=function(e){return null===e||null!==e.match(/^ *$/)},r=function(e,t){return e.filter((function(e){return e.system_user_role_id===t}))[0]},i=function(e,t){return e.find((function(e){return e.education_institute_id===t}))},a=function(e,t){return e.find((function(e){return e.position_id===t}))},c=function(e){var t=e-Math.floor(e);return("0"+(e-=t)).slice(-2)+t.toString().substr(1)},o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,s=new Array(t+1).join("0");return(s+e).slice(-t)},l=function(e){return e.charAt(0).toUpperCase()+e.slice(1)}},648:function(e,t,s){"use strict";var n=s(18),r=s(5),i=s(169),a=s(10),c=s(1);t.a=function(e){var t,s,o=e.tableId&&"myTable"!==e.tableId?e.tableId:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t="",s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=s.length,r=0;r<e;r++)t+=s.charAt(Math.floor(Math.random()*n));return t}(),l=Object(r.useState)(0),d=Object(n.a)(l,2),u=d[0],p=d[1],h=Object(r.useState)(1),m=Object(n.a)(h,2),b=m[0],f=m[1],x=Object(r.useState)(1),j=Object(n.a)(x,2),g=j[0],_=j[1],v=Object(r.useState)(),O=Object(n.a)(v,2),y=O[0],N=O[1],C=Object(r.useState)(10),I=Object(n.a)(C,2),T=I[0],E=I[1],S=Object(r.useState)(0),w=Object(n.a)(S,2),A=w[0],L=w[1],P=Object(r.useState)(0),R=Object(n.a)(P,2),k=R[0],D=R[1];Object(r.useEffect)((function(){e.pagination&&U()}));var U=function(){t=document.getElementById(o),s=t.getElementsByTagName("tr"),p(s.length),f(Math.ceil(u/T)),L((g-1)*T),D(Math.min(A+T-1,u-1));var e=Array.from(Array(b+1-1).keys()).map((function(e){return 1+e}));y&&e.length===y.length||N(e);for(var n=0;n<s.length;n++)s[n].style.display=n>=A&&n<=k?"":"none"};return Object(c.jsxs)("div",{className:"".concat(e.tableSize," overflow-x-auto"),children:[e.search&&Object(c.jsx)("div",{className:"".concat(e.searchBG," w-full mb-2"),children:e.search&&Object(c.jsxs)("div",{className:"bg-white rounded flex items-center w-full p-2 border-2 border-gray-500",children:[Object(c.jsx)(a.Hb,{className:"h-5 w-5 fill-current text-gray-400"}),Object(c.jsx)("input",{type:"search",placeholder:"search",onChange:function(s){return function(s,n){var r,i,a,c,l;for("field"===n&&"all"===s&&(s=""),r=s.toLowerCase(),i=(t=document.getElementById(o)).getElementsByTagName("tr"),c=0;c<i.length;c++)for(l=0;l<e.columns.length;l++)if(a=i[c].getElementsByTagName("td")[l]){if((a.textContent||a.innerText).toLowerCase().indexOf(r)>-1){i[c].style.display="";break}i[c].style.display="none"}}(s.target.value)},className:"w-full h-6 pl-4 text-sm outline-none focus:outline-none bg-white",disabled:e.loading}),e.pagination&&Object(c.jsx)("div",{className:"select",children:Object(c.jsxs)("select",{className:"text-base outline-none focus:outline-none bg-white",onChange:function(e){return E(Number(e.target.value))},disabled:e.loading,children:[Object(c.jsx)("option",{value:"10",children:"10"}),Object(c.jsx)("option",{value:"25",children:"25"}),Object(c.jsx)("option",{value:"50",children:"50"}),Object(c.jsx)("option",{value:"100",children:"100"})]})})]})}),Object(c.jsxs)("div",{className:"overflow-x-auto w-full",children:[Object(c.jsxs)("table",{className:e.tableClass?e.tableClass:"w-full shadow ".concat(e.rounded&&"sm:rounded-lg"," table-auto order-table"),id:o,children:[!e.hideColumns&&Object(c.jsx)("thead",{className:"bg-white border-b-2 border-gray-300 text-gray-600 font-bold text-base",children:Object(c.jsx)("tr",{className:"text-left tracking-wide bg-".concat(e.thColor,"-100 border-b-2 border-").concat(e.thColor,"-500 text-").concat(e.thColor,"-600"),children:e.columns.map((function(e,t){return Object(c.jsx)("th",{className:"".concat(e.padding," text-").concat(e.alignText," px-3 py-2 ").concat(e.isSortAllowed&&"cursor-pointer"),onClick:function(){return e.isSortAllowed&&function(e){var t,s,n,r,i,a,c,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"asc",d=0;if(n=!0,t=document.getElementById(e))for(;n;){for(n=!1,s=t.rows,r=1;r<s.length-1;r++)if(c=!1,i=s[r].getElementsByTagName("TD")[o],a=s[r+1].getElementsByTagName("TD")[o],"asc"===l&&i&&a){if(i.innerHTML.toLowerCase()>a.innerHTML.toLowerCase()){c=!0;break}}else if("desc"===l&&i&&a&&i.innerHTML.toLowerCase()<a.innerHTML.toLowerCase()){c=!0;break}c&&s[r].parentNode?(s[r].parentNode.insertBefore(s[r+1],s[r]),n=!0,d++):0===d&&"asc"===l&&(l="desc",n=!0)}}(o,t)},children:Object(c.jsxs)("div",{className:"flex items-center gap-1",children:[e.columnTitle,e.isSortAllowed&&Object(c.jsx)(i.i,{})]})},t)}))})}),Object(c.jsx)("tbody",{id:"table-data",className:"bg-white text-black text-base",children:e.rows()})]}),e.pagination&&Object(c.jsxs)("div",{className:"sm:flex-1 sm:flex sm:items-center sm:justify-between mt-4 work-sans",children:[Object(c.jsx)("div",{children:Object(c.jsxs)("span",{className:"text-xs xs:text-sm text-gray-900",children:["Showing 1 to ",T," of ",u-1," Entries"]})}),Object(c.jsx)("div",{children:Object(c.jsxs)("nav",{className:"inline-flex shadow-sm",children:[Object(c.jsx)("div",{children:Object(c.jsx)("button",{type:"button",className:"inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 text-sm font-medium text-gray-500 ".concat(1!==g&&"bg-white"),"aria-label":"Previous",disabled:1===g||e.loading,onClick:function(){return _(g-1)},children:Object(c.jsx)(a.fb,{className:"h-5 w-5"})})}),Object(c.jsx)("div",{children:y&&y.map((function(t,s){return Object(c.jsx)("button",{className:"-ml-px inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium text-gray-700 ".concat(t!==g?"bg-white":"bg-gray-100 cursor-default"),disabled:t===g||e.loading,onClick:function(){return _(t)},children:t},s)}))}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{type:"button",className:"inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 text-sm leading-5 font-medium text-gray-500 ".concat(g!==b&&"bg-white"),"aria-label":"Next",disabled:g===b||e.loading,onClick:function(){return _(g+1)},children:Object(c.jsx)(a.gb,{className:"h-5 w-5"})})})]})})]})]})]})}},650:function(e,t,s){"use strict";s.d(t,"c",(function(){return p})),s.d(t,"l",(function(){return h})),s.d(t,"j",(function(){return m})),s.d(t,"b",(function(){return b})),s.d(t,"f",(function(){return f})),s.d(t,"n",(function(){return x})),s.d(t,"k",(function(){return j})),s.d(t,"h",(function(){return g})),s.d(t,"e",(function(){return _})),s.d(t,"a",(function(){return v})),s.d(t,"m",(function(){return O})),s.d(t,"d",(function(){return y})),s.d(t,"g",(function(){return N})),s.d(t,"i",(function(){return C}));var n=s(4),r=s.n(n),i=s(7),a=s(8),c=s.n(a),o=s(6),l=s(9),d=s(15),u=s(13),p=function(e){return e(!0,""),function(){var t=Object(i.a)(r.a.mark((function t(s){var n,i;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,Object(d.b)(),t.next=4,c.a.get("".concat(l.a.CLAIMING,"/session-type"));case 4:n=t.sent,console.log({GET_PLANS_TYPES:n.data}),i=[],200===n.status&&null!==n.data&&n.data.length>0&&(i=n.data),s({type:o.a.GET_PLANS_TYPES,payload:i}),e(!1,""),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(0),console.error({error:Object(u.a)(t.t0)}),e(!1,Object(u.a)(t.t0));case 16:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}()},h=function(e){return console.log({thisType:e}),{type:o.a.SELECT_PLAN_TYPE,payload:e}},m=function(e){return e(!0,""),function(){var t=Object(i.a)(r.a.mark((function t(s){var n,i;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,Object(d.b)(),t.next=4,c.a.get("".concat(l.a.CLAIMING,"/session/active/"));case 4:n=t.sent,console.log({GET_ACTIVE_SESSION_PLANS:n.data}),i=void 0,n.data&&void 0!==n.data.is_active&&(i=n.data),console.log({session_plan:n.data}),s({type:o.a.GET_ACTIVE_SESSION_PLANS,payload:i||"none"}),e(!1,"",i||"none"),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(0),console.error({error:Object(u.a)(t.t0)}),e(!1,Object(u.a)(t.t0));case 17:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e){return t.apply(this,arguments)}}()},b=function(e){return e(!0,""),function(){var t=Object(i.a)(r.a.mark((function t(s){var n,i;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,Object(d.b)(),t.next=4,c.a.get("".concat(l.a.CLAIMING,"/session/"));case 4:n=t.sent,console.log({GET_ALL_SESSION_PLANS:n.data}),i=[],200===n.status&&null!==n.data&&n.data.length>0&&(i=n.data),s({type:o.a.GET_ALL_SESSION_PLANS,payload:i}),e(!1,"",i),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(0),console.error({error:Object(u.a)(t.t0)}),e(!1,Object(u.a)(t.t0));case 16:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}()},f=function(e){return{type:o.a.CREATE_SESSION_PLAN,payload:e}},x=function(e){return{type:o.a.UPDATE_SESSION_PLAN,payload:e}},j=function(e){return{type:o.a.SESSION_ACTIVATION,payload:e}},g=function(e){return{type:o.a.DELETE_SESSION_PLAN,payload:e}},_=function(e){return{type:o.a.CREATE_ACADEMIC_SESSION,payload:e}},v=function(e){return e(!0,""),function(){var t=Object(i.a)(r.a.mark((function t(s){var n,i;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,Object(d.b)(),t.next=4,c.a.get("".concat(l.a.PLACEMENT,"/postrequestperiod/"));case 4:n=t.sent,console.log({GET_ALL_SESSION_PLANS:n.data}),i=[],200===n.status&&null!==n.data&&n.data.length>0&&(i=n.data),console.log("===================================="),console.log({GetAllAcademicSession:n}),console.log("===================================="),s({type:o.a.GET_ALL_ACADEMIC_SESSION,payload:i}),e(!1,"",i),t.next=19;break;case 15:t.prev=15,t.t0=t.catch(0),console.error({error:Object(u.a)(t.t0)}),e(!1,Object(u.a)(t.t0));case 19:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(e){return t.apply(this,arguments)}}()},O=function(e){return{type:o.a.UPDATE_ACADEMIC_SESSION,payload:e}},y=function(e){return{type:o.a.ACADEMIC_SESSION_ACTIVATION,payload:e}},N=function(e){return{type:o.a.DELETE_ACADEMIC_SESSION,payload:e}},C=function(e){return e(!0,""),function(){var t=Object(i.a)(r.a.mark((function t(s){var n,i;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,Object(d.b)(),t.next=4,c.a.get("".concat(l.a.PLACEMENT,"/postrequestperiod/one"));case 4:n=t.sent,console.log({GET_ACTIVE_ACADEMIC_SESSION:n.data}),i=void 0,n.data&&(i=n.data),console.log({session_plan:n.data}),s({type:o.a.GET_ACTIVE_ACADEMIC_SESSION,payload:i||"none"}),e(!1,"",i||"none"),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(0),console.error({error:Object(u.a)(t.t0)}),e(!1,Object(u.a)(t.t0));case 17:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e){return t.apply(this,arguments)}}()}},653:function(e,t,s){"use strict";s.d(t,"g",(function(){return h})),s.d(t,"d",(function(){return m})),s.d(t,"b",(function(){return b})),s.d(t,"f",(function(){return f})),s.d(t,"a",(function(){return x})),s.d(t,"c",(function(){return j})),s.d(t,"e",(function(){return g}));var n,r=s(4),i=s.n(r),a=s(7),c=s(8),o=s.n(c),l=s(6),d=s(9),u=s(15),p=s(13),h=30;!function(e){e.waiting="waiting",e.approved="approved",e.rejected="rejected"}(n||(n={}));var m=function(e,t){return t&&t(!0,""),function(){var s=Object(a.a)(i.a.mark((function s(n){var r;return i.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,Object(u.b)(),s.next=4,o.a.get("".concat(d.a.AUTH,"/users?page=").concat(e,"&limit=").concat(h));case 4:r=s.sent,console.log("===================================="),console.log({fetchUserAccess:r}),console.log("===================================="),n({type:l.a.FETCH_USERS_ACCESS,payload:{users:[{data:r.data.users,page:e}],next:r.data.next,previous:r.data.previous,total_users:r.data.total_users}}),t&&t(!1,"",r.data.users),s.next=16;break;case 12:s.prev=12,s.t0=s.catch(0),console.error({user_error:s.t0}),t&&t(!1,Object(p.a)(s.t0));case 16:case"end":return s.stop()}}),s,null,[[0,12]])})));return function(e){return s.apply(this,arguments)}}()},b=function(e,t){return function(){var s=Object(a.a)(i.a.mark((function s(n){return i.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:n({type:l.a.BLOCK_USER_TO_SYSTEM,payload:{id:e,page:t}});case 1:case"end":return s.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}()},f=function(e,t){return function(){var s=Object(a.a)(i.a.mark((function s(n){return i.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:n({type:l.a.UNBLOCK_USER_TO_SYSTEM,payload:{id:e,page:t}});case 1:case"end":return s.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}()},x=function(e,t){return function(){var s=Object(a.a)(i.a.mark((function s(n){return i.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:n({type:l.a.ASSIGN_ROLE_TO_USER,payload:{data:e,page:t}});case 1:case"end":return s.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}()},j=function(e,t){return function(){var s=Object(a.a)(i.a.mark((function s(n){return i.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:n({type:l.a.CUSTOMIZE_USER_ACCESS,payload:{data:e,page:t}});case 1:case"end":return s.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}()},g=function(e,t){return function(){var s=Object(a.a)(i.a.mark((function s(n){return i.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:n({type:l.a.RESET_USER_ACCESS,payload:{user_id:e,page:t}});case 1:case"end":return s.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}()}},655:function(e,t,s){"use strict";s.d(t,"e",(function(){return p})),s.d(t,"c",(function(){return h})),s.d(t,"a",(function(){return m})),s.d(t,"d",(function(){return b})),s.d(t,"b",(function(){return f})),s.d(t,"f",(function(){return x}));var n=s(4),r=s.n(n),i=s(7),a=s(8),c=s.n(a),o=s(6),l=s(9),d=s(15),u=s(13),p=function(e){return function(){var t=Object(i.a)(r.a.mark((function t(s){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(!0,""),t.prev=1,Object(d.b)(),t.next=5,c.a.get("".concat(l.a.AUTH,"/settings"));case 5:n=t.sent,s({type:o.a.GET_SYSTEM_SETTINGS,payload:n.data}),e(!1,""),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(1),console.log({code_error:t.t0}),e(!1,Object(u.a)(t.t0));case 14:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}()},h=function(e){return function(){var t=Object(i.a)(r.a.mark((function t(s){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s({type:o.a.DISABLE_SYSTEM_SETTINGS,payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},m=function(e){return function(){var t=Object(i.a)(r.a.mark((function t(s){var n,i;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(!0,""),t.prev=1,Object(d.b)(),t.next=5,c.a.get("".concat(l.a.AUTH,"/allroleaccess"));case 5:n=t.sent,i=n.data.map((function(e){return{id:e.id,task:e.title,key:e.key,permitted:e.permitted}})),s({type:o.a.GET_TASK_ACCESS,payload:i}),e(!1,"",i),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(1),console.log({code_error:t.t0}),e(!1,Object(u.a)(t.t0));case 15:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e){return t.apply(this,arguments)}}()},b=function(e){return function(){var t=Object(i.a)(r.a.mark((function t(s){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(!0,""),t.prev=1,Object(d.b)(),t.next=5,c.a.get("".concat(l.a.APPLICATION,"/position"));case 5:n=t.sent,s({type:o.a.GET_POSTIONS,payload:n.data}),e(!1,""),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(1),console.log({code_error:t.t0}),e(!1,Object(u.a)(t.t0));case 14:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}()},f=function(e){return console.log({deletePosition:e}),function(){var t=Object(i.a)(r.a.mark((function t(s){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s({type:o.a.DELETE_POSITION,payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},x=function(e){return function(){var t=Object(i.a)(r.a.mark((function t(s){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s({type:o.a.PUBLISH_POSITION,payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},656:function(e,t,s){"use strict";s.d(t,"k",(function(){return u})),s.d(t,"i",(function(){return p})),s.d(t,"a",(function(){return h})),s.d(t,"m",(function(){return m})),s.d(t,"c",(function(){return b})),s.d(t,"e",(function(){return f})),s.d(t,"j",(function(){return x})),s.d(t,"b",(function(){return j})),s.d(t,"n",(function(){return g})),s.d(t,"d",(function(){return _})),s.d(t,"f",(function(){return v})),s.d(t,"h",(function(){return O})),s.d(t,"g",(function(){return y})),s.d(t,"l",(function(){return N}));var n=s(4),r=s.n(n),i=s(7),a=s(6),c=s(8),o=s.n(c),l=s(9),d=s(13),u=function(e){return e(!0,""),function(){var t=Object(i.a)(r.a.mark((function t(s){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o.a.get("".concat(l.a.APPLICATION,"/schools"));case 3:n=t.sent,s({type:a.a.GET_SCHOOLS,payload:n.data}),e(!1,"",n.data),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),console.log("Err: ",t.t0),e(!1,Object(d.a)(t.t0));case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},p=function(e,t){return function(){var s=Object(i.a)(r.a.mark((function s(n){var i;return r.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t(!0,""),s.prev=1,s.next=4,o.a.get("".concat(l.a.APPLICATION,"/schools/").concat(e));case 4:i=s.sent,n({type:a.a.GET_SCHOOLS_BY_ID,payload:i.data}),t(!1,"",i.data),s.next=13;break;case 9:s.prev=9,s.t0=s.catch(1),console.log("Err: ",s.t0),t(!1,Object(d.a)(s.t0));case 13:case"end":return s.stop()}}),s,null,[[1,9]])})));return function(e){return s.apply(this,arguments)}}()},h=function(e){return console.log({schools:e}),function(){var t=Object(i.a)(r.a.mark((function t(s){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s({type:a.a.CREATE_SCHOOL,payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},m=function(e){return function(){var t=Object(i.a)(r.a.mark((function t(s){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s({type:a.a.UPDATE_SCHOOL,payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},b=function(e){return function(){var t=Object(i.a)(r.a.mark((function t(s){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s({type:a.a.DELETE_SCHOOL,payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},f=function(e,t){return function(){var s=Object(i.a)(r.a.mark((function s(n){var i;return r.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t(!0,""),s.prev=1,s.next=4,o.a.get("".concat(l.a.PLACEMENT,"/requestpost/school/").concat(e));case 4:i=s.sent,console.log("===================================="),console.log({schoolPosts:i}),console.log("===================================="),n({type:a.a.FETCH_SCHOOL_POSTS,payload:i.data}),t(!1,""),s.next=16;break;case 12:s.prev=12,s.t0=s.catch(1),console.log("Err: ",s.t0),t(!1,Object(d.a)(s.t0));case 16:case"end":return s.stop()}}),s,null,[[1,12]])})));return function(e){return s.apply(this,arguments)}}()},x=function(e,t){return function(){var s=Object(i.a)(r.a.mark((function s(n){var i;return r.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t(!0,""),s.prev=1,s.next=4,o.a.get("".concat(l.a.PLACEMENT,"/placedcandidate/school/").concat(e));case 4:i=s.sent,console.log({getSchoolPlacement:i.data}),n({type:a.a.GET_SCHOOL_PLACEMENT,payload:i.data}),t(!1,"",i.data),s.next=14;break;case 10:s.prev=10,s.t0=s.catch(1),console.log("Err: ",s.t0),t(!1,Object(d.a)(s.t0));case 14:case"end":return s.stop()}}),s,null,[[1,10]])})));return function(e){return s.apply(this,arguments)}}()},j=function(e){return function(){var t=Object(i.a)(r.a.mark((function t(s){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s({type:a.a.CREATE_SCHOOL_POST,payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},g=function(e,t){return console.log({TYPE:e,data:t}),function(){var s=Object(i.a)(r.a.mark((function s(n){return r.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:n({type:a.a.UPDATE_SCHOOL_POST,payload:{TYPE:e,data:t}});case 1:case"end":return s.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}()},_=function(e,t){return function(){var s=Object(i.a)(r.a.mark((function s(n){var i;return r.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t(!0,""),s.prev=1,s.next=4,o.a.get("".concat(l.a.PLACEMENT,"/requestpost/district/").concat(e));case 4:i=s.sent,console.log("===================================="),console.log({fetchDistrictPosts:i}),console.log("===================================="),n({type:a.a.FETCH_DISTRICT_POSTS,payload:i.data}),t(!1,""),s.next=16;break;case 12:s.prev=12,s.t0=s.catch(1),console.log("Err: ",s.t0),t(!1,Object(d.a)(s.t0));case 16:case"end":return s.stop()}}),s,null,[[1,12]])})));return function(e){return s.apply(this,arguments)}}()},v=function(e,t){return function(){var s=Object(i.a)(r.a.mark((function s(n){var i;return r.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t(!0,""),s.prev=1,s.next=4,o.a.get("".concat(l.a.PLACEMENT,"/placedcandidate/district/").concat(e));case 4:i=s.sent,console.log("===================================="),console.log({getDistrictPlacement:i.data}),console.log("===================================="),n({type:a.a.GET_DISTRICT_PLACEMENT,payload:i.data}),t(!1,"",i.data),s.next=16;break;case 12:s.prev=12,s.t0=s.catch(1),console.log("Err: ",s.t0),t(!1,Object(d.a)(s.t0));case 16:case"end":return s.stop()}}),s,null,[[1,12]])})));return function(e){return s.apply(this,arguments)}}()},O=function(e,t,s){return function(){var n=Object(i.a)(r.a.mark((function n(i){var c;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s(!0,""),n.prev=1,n.next=4,o.a.get("".concat(l.a.PLACEMENT,"/confirmedpostrequest/institute/").concat(e,"/").concat(t));case 4:c=n.sent,console.log("===================================="),console.log({getInstitutePlacementLimit:c.data}),console.log("===================================="),i({type:a.a.GET_INSTITUTE_PLACEMENT_LIMIT,payload:c.data}),s(!1,"",c.data),n.next=16;break;case 12:n.prev=12,n.t0=n.catch(1),console.log("Err: ",n.t0),s(!1,Object(d.a)(n.t0));case 16:case"end":return n.stop()}}),n,null,[[1,12]])})));return function(e){return n.apply(this,arguments)}}()},y=function(e,t,s){return function(){var n=Object(i.a)(r.a.mark((function n(i){var c;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s(!0,""),n.prev=1,n.next=4,o.a.get("".concat(l.a.PLACEMENT,"/confirmedpostrequest/district/").concat(e,"/").concat(t));case 4:c=n.sent,console.log("===================================="),console.log({getDistrictPlacementLimit:c.data}),console.log("===================================="),i({type:a.a.GET_DISTRICT_PLACEMENT_LIMIT,payload:c.data}),s(!1,"",c.data),n.next=16;break;case 12:n.prev=12,n.t0=n.catch(1),console.log("Err: ",n.t0),s(!1,Object(d.a)(n.t0));case 16:case"end":return n.stop()}}),n,null,[[1,12]])})));return function(e){return n.apply(this,arguments)}}()},N=function(e){return console.log("===================================="),console.log({updateInstitutePlacementLimit:e}),console.log("===================================="),function(){var t=Object(i.a)(r.a.mark((function t(s){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s({type:a.a.UPDATE_INSTITUTE_PLACEMENT_LIMIT,payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},657:function(e,t,s){"use strict";s(5);var n=s(10),r=s(1);t.a=function(){return Object(r.jsx)("div",{className:"my-5",children:Object(r.jsxs)("div",{className:"bg-yellow-100 rounded flex flex-col items-center justify-center p-6 my-8 text-yellow-900 border border-yellow-900",children:[Object(r.jsx)(n.O,{className:"text-6xl md:text-9xl"}),Object(r.jsxs)("div",{className:"text-center flex flex-col",children:[Object(r.jsx)("span",{className:"text-2xl md:text-4xl font-extrabold",children:"No session available"}),Object(r.jsx)("span",{className:"text-lg",children:"Please Wait for the system to publish the sessions or contact the administrator"})]})]})})}},665:function(e,t,s){"use strict";var n=s(18),r=s(5),i=s.n(r),a=s(682),c=s.n(a),o=s(1),l={borderRadius:4,horizontal:!1,columnWidth:"95%",endingShape:"rounded"},d=function(e){var t=Object(r.useState)(!0),s=Object(n.a)(t,2),i=s[0],a=s[1],d=Object(r.useState)({chart:{events:{dataPointSelection:function(t,s,n){console.log({labelClicked:n.w.config.labels[n.dataPointIndex]}),e.FC_LoadSelected&&e.FC_LoadSelected(n.dataPointIndex,n.seriesIndex)}},stacked:!!e.stacked&&e.stacked},plotOptions:{bar:e.defaultBar?e.defaultBar:l},labels:e.labels,dataLabels:{enabled:!0},xaxis:{labels:{rotate:-45},categories:e.categoriesLabel,tickPlacement:"on"},yaxis:{title:{text:e.yaxisText}},fill:{opacity:1},tooltip:{y:{formatter:function(t){return t+" "+e.tooltipText}}},grid:{padding:{left:30,right:30}},noData:{text:"No data found",align:"center",verticalAlign:"middle"}}),u=Object(n.a)(d,2),p=u[0],h=u[1];return Object(r.useEffect)((function(){e.colors&&e.colors.length>0&&i?h({chart:{stacked:!!e.stacked&&e.stacked,events:{dataPointSelection:function(t,s,n){console.log({chartClicked:n.w.config.labels[n.dataPointIndex]}),e.FC_LoadSelected&&e.FC_LoadSelected(n.dataPointIndex,n.seriesIndex)}},zoom:{enabled:!0,autoScaleYaxis:!0}},plotOptions:{bar:e.defaultBar?e.defaultBar:l},labels:e.labels,dataLabels:{enabled:!0},xaxis:{labels:{rotate:-45},categories:e.categoriesLabel,tickPlacement:"on"},yaxis:{title:{text:e.yaxisText}},fill:{opacity:1},tooltip:{y:{formatter:function(t){return t+" "+e.tooltipText}}},grid:{padding:{left:30,right:30}},noData:{text:"No data found",align:"center",verticalAlign:"middle"},colors:e.colors}):i&&h({chart:{stacked:!!e.stacked&&e.stacked,events:{dataPointSelection:function(t,s,n){console.log({labelClicked:n.w.config.labels[n.dataPointIndex]}),e.FC_LoadSelected&&e.FC_LoadSelected(n.dataPointIndex,n.seriesIndex)}},zoom:{enabled:!0,autoScaleYaxis:!0}},plotOptions:{bar:e.defaultBar?e.defaultBar:l},labels:e.labels,dataLabels:{enabled:!0},xaxis:{labels:{rotate:-45},categories:e.categoriesLabel,tickPlacement:"on"},yaxis:{title:{text:e.yaxisText}},fill:{opacity:1},tooltip:{y:{formatter:function(t){return t+" "+e.tooltipText}}},grid:{padding:{left:30,right:30}},noData:{text:"No data found",align:"center",verticalAlign:"middle"}}),a(!1)}),[i,p,e]),i?Object(o.jsx)("div",{className:"text-center mt-7 font-bold text-4xl text-gray-400 animate-pulse",children:"Loading Data..."}):Object(o.jsx)("div",{className:"w-full",children:Object(o.jsx)(c.a,{options:p,series:e.series,type:"bar",width:"100%",height:e.chartHeight?e.chartHeight:void 0})})};t.a=i.a.memo(d)},667:function(e,t,s){"use strict";s.d(t,"c",(function(){return F})),s.d(t,"a",(function(){return M}));var n,r=s(4),i=s.n(r),a=s(7),c=s(24),o=s(23),l=s(26),d=s(25),u=s(8),p=s.n(u),h=s(5),m=s.n(h),b=s(10),f=s(21),x=s(3),j=s(170),g=s(656),_=s(653),v=s(33),O=s(128),y=s(648),N=s(39),C=s(644),I=s(9),T=s(13),E=s(691),S=s(687),w=s(681),A=s(18),L=s(44),P=s(1),R=function(e){var t=Object(h.useState)(""),s=Object(A.a)(t,2),n=s[0],r=s[1];return Object(P.jsxs)("section",{className:"border-2 rounded border-gray-400",children:[Object(P.jsxs)("div",{className:"flex items-center w-full my-1",children:[Object(P.jsx)(b.Hb,{className:"w-6 h-6 absolute ml-2"}),Object(P.jsx)("input",{type:"text",placeholder:"Search",className:"focus:border-2 h-7 ml-1 pl-9 mr-2 bg-gray-100 focus:border-gray-700 w-full rounded",onChange:function(e){return r(e.target.value)},value:n,disabled:!(e.roleList.length>0)}),Object(P.jsx)("button",{className:"bg-red-200 text-red-700 py-1 px-2 mr-1 rounded text-sm focus:outline-none",type:"button",onClick:function(){e.setChooseRole(!1)},children:"Close"})]}),Object(P.jsx)("div",{className:"w-full h-52 mt-2 overflow-y-auto divide-y divide-gray-300",children:Object(L.a)(e.roleList,n).length>0?Object(L.a)(e.roleList,n).map((function(t,s){return Object(P.jsx)("section",{children:Object(P.jsxs)("div",{className:"group flex items-center justify-between my-1 hover:bg-gray-100",children:[Object(P.jsx)("div",{className:"p-1 w-full mr-2 cursor-pointer",onClick:function(){e.setChooseRole(!1),!e.loadindRequest&&e.handleSelectRole(t.system_user_role_id)},children:Object(P.jsx)("p",{className:"text-sm font-medium text-black",children:Object(C.a)(t.role)})}),Object(P.jsx)("button",{type:"button",className:"bg-blue-200 group-hover:bg-blue-300 text-blue-700 group-hover:text-blue-800 py-1 px-2 mr-1 rounded text-sm",children:"Choose"})]})},s+t.role)})):Object(P.jsx)("div",{className:"text-center p-3",children:Object(P.jsx)("p",{className:"text-base font-medium text-black",children:"No role available"})})})]})},k=m.a.memo(R),D=function(e){Object(l.a)(s,e);var t=Object(d.a)(s);function s(e){var n;return Object(c.a)(this,s),(n=t.call(this,e)).setRoleId=function(e){n.setState({roleId:e})},n.setSelectedRole=function(e){n.setState({selectedRole:e})},n.setProvinceId=function(e){n.setState({provinceId:e})},n.setDistrictId=function(e){n.setState({districtId:e})},n.setCenterId=function(e){n.setState({centerId:e})},n.setRoomId=function(e){n.setState({roomId:e})},n.setLoadingForm=function(e){n.setState({loadingForm:e})},n.setSchoolId=function(e){n.setState({schoolId:e})},n.setChooseSchool=function(e){n.setState({chooseSchool:e})},n.setLoading=function(e){n.setState({loading:e})},n.setInstituteId=function(e){n.setState({instituteId:e})},n.setFormError=function(e){n.setState({formError:e})},n.setLoadingRequest=function(e){n.setState({loadingRequest:e})},n.setChooseRole=function(e){n.setState({chooseRole:e})},n.setDefaultState=function(e,t){var s,r;if(t.district_required&&n.props.roomList)(r=n.distinctDistrict(n.props.roomList).find((function(t){return t._id===e.district_id})))&&n.setProvinceId(r.province_id),r&&n.setDistrictId(e.district_id),n.setLoadingForm(!1);else if(t.room_required&&n.props.roomList)(s=M(n.props.roomList).find((function(t){return t.room_id===e.room_id})))&&n.setProvinceId(s.province_id),s&&n.setDistrictId(s.district_id),s&&n.setCenterId(s.center_id),n.setRoomId(e.room_id),n.setLoadingForm(!1);else if(t.school_required&&n.props.roomList&&n.props.schoolList){var i=n.props.schoolList.find((function(t){return t._id===e.school_id}));i?((s=M(n.props.roomList).find((function(e){return e.district_id===(null===i||void 0===i?void 0:i.district_id)})))&&n.setProvinceId(s.province_id),s&&n.setDistrictId(s.district_id),n.setSchoolId(e.school_id),n.setLoadingForm(!1)):n.setLoadingForm(!1)}else n.setLoadingForm(!1)},n.componentDidMount=function(){if(n.props.roleList.length){if(n.props.userInfo.default_access&&n.state.loadingForm){if(!n.state.roleId.length){var e=n.props.roleList.find((function(e){return e.system_user_role_id===n.props.userInfo.default_access.system_user_role_id}));e&&(n.setRoleId(n.props.userInfo.default_access.system_user_role_id),n.setSelectedRole(e),n.setDefaultState(n.props.userInfo.default_access,e))}console.log("===================================="),console.log({vvvvv:n.props.userInfo.default_access}),console.log("====================================")}n.state.selectedRole&&n.props.userInfo.default_access&&n.setDefaultState(n.props.userInfo.default_access,n.state.selectedRole),n.setLoading(!1)}},n.handleSelectRole=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"SELECT";if(n.props.roleList){var s=n.props.roleList.find((function(t){return t.system_user_role_id===e}));s&&(n.setRoleId(e),n.setSelectedRole(s),n.state.formError&&"role_id"===n.state.formError.element&&n.setFormError(null),"SELECT"===t&&(n.setProvinceId(""),n.setDistrictId(""),n.setSchoolId(""),n.setCenterId(""),n.setRoomId(""),n.setInstituteId("")))}},n.tableData=function(){return n.state.roleId.length>0&&null===n.state.selectedRole&&n.props.roleList&&n.handleSelectRole(n.state.roleId,"DEFAULT"),n.state.selectedRole?n.state.selectedRole.access.map((function(e,t){return Object(P.jsxs)("tr",{className:"text-left border-b border-gray-200 hover:bg-gray-100",children:[Object(P.jsx)("td",{className:"px-2 py-1",children:Object(P.jsx)("label",{className:"inline-flex items-center",children:Object(P.jsx)("span",{className:"text-gray-900 capitalize text-xl font-normal cursor-pointer",children:e.task})})}),Object(P.jsx)("td",{children:Object(P.jsxs)("div",{className:"inline-flex items-center text-xl ".concat(e.permitted.create?"text-green-700":"text-red-700"),children:[e.permitted.create?Object(P.jsx)(w.a,{}):Object(P.jsx)(b.L,{}),e.permitted.create?" Yes":"No"]})}),Object(P.jsx)("td",{children:Object(P.jsxs)("div",{className:"inline-flex items-center text-xl ".concat(e.permitted.view?"text-green-700":"text-red-700"),children:[e.permitted.view?Object(P.jsx)(w.a,{}):Object(P.jsx)(b.L,{}),e.permitted.view?" Yes":"No"]})}),Object(P.jsx)("td",{children:Object(P.jsxs)("div",{className:"inline-flex items-center text-xl ".concat(e.permitted.update?"text-green-700":"text-red-700"),children:[e.permitted.update?Object(P.jsx)(w.a,{}):Object(P.jsx)(b.L,{}),e.permitted.update?" Yes":"No"]})}),Object(P.jsx)("td",{children:Object(P.jsxs)("div",{className:"inline-flex items-center text-xl ".concat(e.permitted.delete?"text-green-700":"text-red-700"),children:[e.permitted.delete?Object(P.jsx)(w.a,{}):Object(P.jsx)(b.L,{}),e.permitted.delete?" Yes":"No"]})})]},t+e.id+Math.random())})):[Object(P.jsx)("tr",{children:Object(P.jsx)("td",{colSpan:5,className:"text-center px-2 py-2",children:"No Default Access Available on this Role."})},"55re")]},n.assignRoleToUser=function(){var e=Object(a.a)(i.a.mark((function e(t){var s,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),window.confirm("Are sure you want to change user role?")){e.next=3;break}return e.abrupt("return",!1);case 3:if(n.state.selectedRole){e.next=5;break}return e.abrupt("return",n.setFormError({element:"role_id",msg:"User role is required!"}));case 5:if(!0!==n.state.selectedRole.room_required||!Object(C.e)(n.state.provinceId)){e.next=7;break}return e.abrupt("return",n.setFormError({element:"province_id",msg:"Province is required!"}));case 7:if(!0!==n.state.selectedRole.education_institution_required||!Object(C.e)(n.state.instituteId)){e.next=9;break}return e.abrupt("return",n.setFormError({element:"institute_id",msg:"Institute is required on this role!"}));case 9:if(!0!==n.state.selectedRole.room_required&&!0!==n.state.selectedRole.district_required||!Object(C.e)(n.state.districtId)){e.next=11;break}return e.abrupt("return",n.setFormError({element:"district_id",msg:"District is required!"}));case 11:if(!0!==n.state.selectedRole.school_required||!Object(C.e)(n.state.schoolId)){e.next=13;break}return e.abrupt("return",n.setFormError({element:"school_id",msg:"School is required!"}));case 13:if(!0!==n.state.selectedRole.room_required||!Object(C.e)(n.state.centerId)){e.next=15;break}return e.abrupt("return",n.setFormError({element:"center_id",msg:"Center is required!"}));case 15:if(!0!==n.state.selectedRole.room_required||!Object(C.e)(n.state.roomId)){e.next=17;break}return e.abrupt("return",n.setFormError({element:"room_id",msg:"Room is required!"}));case 17:return n.setLoadingRequest(!0),s={user_id:n.props.userInfo.user_id,data:{system_user_role_id:n.state.roleId,status:1,role:n.state.selectedRole.role,access:n.state.selectedRole.access,school_id:n.state.selectedRole.school_required?n.state.schoolId:"",district_id:n.state.selectedRole.district_required?n.state.districtId:"",room_id:n.state.selectedRole.room_required?n.state.roomId:"",education_institution_id:n.state.selectedRole.education_institution_required?n.state.instituteId:""}},e.prev=19,e.next=22,p.a.post("".concat(I.a.AUTH,"/addroletouser"),{user_id:n.props.userInfo.user_id,system_user_role_id:n.state.roleId,status:1,role:n.state.selectedRole.role,access:!0,school_id:!0===n.state.selectedRole.school_required?n.state.schoolId:"",district_id:!0===n.state.selectedRole.district_required?n.state.districtId:"",room_id:!0===n.state.selectedRole.room_required?n.state.roomId:"",education_institution_id:n.state.selectedRole.education_institution_required?n.state.instituteId:""});case 22:(r=e.sent)&&(console.log("===================================="),console.log({assignRoleToUser:r}),console.log("===================================="),n.props.assignRoleToUserAccess(s,n.props.currentPage),n.setLoadingRequest(!1),n.props.setChangeRole(!1),n.props.PushPopupAlert({title:"Assigning Role to User completed successfully",theme:N.a.success})),e.next=30;break;case 26:e.prev=26,e.t0=e.catch(19),console.log({role_error:e.t0}),n.props.PushPopupAlert({title:Object(T.a)(e.t0),theme:N.a.danger});case 30:case"end":return e.stop()}}),e,null,[[19,26]])})));return function(t){return e.apply(this,arguments)}}(),n.distinctDistrict=function(e,t){var s=[],n=[];if(t)n=e.find((function(e){return e._id===t}))&&e.find((function(e){return e._id===t})).districts?e.find((function(e){return e._id===t})).districts:[];else for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r))for(var i in e[r].districts)Object.prototype.hasOwnProperty.call(e[r].districts,i)&&(s.includes(e[r].districts[i]._id)||(s.push(e[r].districts[i]._id),n.push(e[r].districts[i])));return n},n.distinctCenter=function(e,t){var s=[],n=[];return M(e).forEach((function(e){s.includes(e.center_id)||e.district_id!==t||(s.push(e.center_id),n.push(e))})),n},n.distinctRoom=function(e,t){var s=[],n=[];return M(e).forEach((function(e){s.includes(e.room_id)||e.center_id!==t||(s.push(e.room_id),n.push(e))})),n},n.state={loading:!0,loadingForm:!0,loadingRequest:!1,roleId:"",provinceId:"",districtId:"",schoolId:"",roomId:"",instituteId:"",centerId:"",selectedRole:null,formError:null,chooseRole:!1,chooseSchool:!1},n}return Object(o.a)(s,[{key:"render",value:function(){var e,t=this;return!0===this.state.loading||this.state.loadingForm||null===this.props.userInfo.default_access||0===this.state.roleId.length||null===this.state.selectedRole?Object(P.jsx)("div",{className:"text-center py-7 font-bold text-3xl text-gray-400 animate-pulse",children:"Loading..."}):Object(P.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 py-2 md:py-4 px-2 md:px-0",children:[Object(P.jsx)("div",{className:"col-span-1 bg-white w-full overflow-x-auto border rounded",children:Object(P.jsxs)("div",{className:"px-6 md:px-12 py-5 bg-white mx-auto rounded-2xl w-100",children:[Object(P.jsx)("h3",{className:"font-semibold text-2xl text-gray-800 mb-4",children:"Change User Role"}),this.state.loadingForm?Object(P.jsx)(v.a,{}):Object(P.jsx)("form",{onSubmit:function(e){return t.assignRoleToUser(e)},children:Object(P.jsxs)("div",{className:"space-y-5",children:[Object(P.jsxs)("div",{className:"space-y-2",children:[Object(P.jsx)("label",{className:"text-sm font-medium text-gray-700 tracking-wide",children:"User Role"}),!this.state.chooseRole&&Object(P.jsx)("div",{className:"w-full text-base bg-white text-grey-darker cursor-pointer border-2 px-4 py-3 rounded focus:outline-none focus:bg-gray-100 ".concat(this.state.formError&&"role_id"===this.state.formError.element?"border-red-500":"border-gray-400"),onClick:function(){!t.state.loadingRequest&&t.setChooseRole(!0),!t.state.loadingRequest&&t.setFormError(null)},children:this.state.selectedRole?this.state.selectedRole.role:"Select role"}),this.state.chooseRole&&Object(P.jsx)(k,{setChooseRole:this.setChooseRole,handleSelectRole:this.handleSelectRole,roleList:this.props.roleList,loadindRequest:this.state.loadingRequest}),this.state.formError&&"role_id"===this.state.formError.element&&Object(P.jsx)("span",{className:"text-red-500",children:this.state.formError.msg})]}),this.state.selectedRole&&this.state.selectedRole.education_institution_required&&Object(P.jsxs)("div",{className:"space-y-2",children:[Object(P.jsx)("label",{className:"mb-5 text-sm font-medium text-gray-700 tracking-wide",children:"Institute"}),Object(P.jsxs)("select",{className:"block w-full text-base bg-white text-grey-darker border-2 rounded px-4 py-3 md:w-full focus:outline-none focus:bg-gray-100 ".concat(this.state.formError&&"institute_id"===this.state.formError.element?"border-red-500":"border-gray-400"),onChange:function(e){t.setInstituteId(e.target.value),t.setProvinceId(""),t.setDistrictId(""),t.setSchoolId(""),t.setCenterId(""),t.setRoomId(""),t.state.formError&&"institute_id"===t.state.formError.element&&t.setFormError(null)},disabled:this.state.loadingRequest,value:this.state.instituteId,children:[Object(P.jsx)("option",{value:"",children:"Select institute"}),this.props.schoolLevels.education_categories&&this.props.schoolLevels.education_categories.length>0?this.props.schoolLevels.education_categories.map((function(e){return Object(P.jsx)("option",{value:e.education_institute_id,children:e.education_category_title},e.education_institute_id+Math.random())})):Object(P.jsx)("option",{value:"",disabled:!0,children:"No institute available"})]}),this.state.formError&&"institute_id"===this.state.formError.element&&Object(P.jsx)("span",{className:"text-red-500",children:this.state.formError.msg})]}),this.state.selectedRole&&this.state.selectedRole.room_required&&Object(P.jsxs)("div",{className:"space-y-2",children:[Object(P.jsx)("label",{className:"mb-5 text-sm font-medium text-gray-700 tracking-wide",children:"Province"}),Object(P.jsxs)("select",{className:"block w-full text-base bg-white text-grey-darker border-2 rounded px-4 py-3 md:w-full focus:outline-none focus:bg-gray-100 ".concat(this.state.formError&&"province_id"===this.state.formError.element?"border-red-500":"border-gray-400"),onChange:function(e){t.setProvinceId(e.target.value),t.state.formError&&"province_id"===t.state.formError.element&&t.setFormError(null),t.setDistrictId(""),t.setSchoolId(""),t.setCenterId(""),t.setRoomId("")},value:this.state.provinceId,disabled:this.state.loadingRequest,children:[Object(P.jsx)("option",{value:"",children:"Select province"}),this.props.roomList&&this.props.roomList.map((function(e){return Object(P.jsx)("option",{value:e._id,children:e.province_name},e._id+Math.random())}))]}),this.state.formError&&"province_id"===this.state.formError.element&&Object(P.jsx)("span",{className:"text-red-500",children:this.state.formError.msg})]}),this.state.selectedRole&&(this.state.selectedRole.district_required||this.state.selectedRole.room_required)&&Object(P.jsxs)("div",{className:"space-y-2",children:[Object(P.jsx)("label",{className:"mb-5 text-sm font-medium text-gray-700 tracking-wide",children:"District"}),Object(P.jsxs)("select",{className:"block w-full text-base bg-white text-grey-darker border-2 rounded px-4 py-3 md:w-full focus:outline-none focus:bg-gray-100 ".concat(this.state.formError&&"district_id"===this.state.formError.element?"border-red-500":"border-gray-400"),onChange:function(e){t.setDistrictId(e.target.value),t.state.formError&&"district_id"===t.state.formError.element&&t.setFormError(null),t.setSchoolId(""),t.setCenterId(""),t.setRoomId("")},value:this.state.districtId,disabled:this.state.loadingRequest,children:[Object(P.jsx)("option",{value:"",children:"Select district"}),this.props.roomList&&this.distinctDistrict(this.props.roomList,Object(C.e)(this.state.provinceId)?void 0:this.state.provinceId).length>0?this.distinctDistrict(this.props.roomList,Object(C.e)(this.state.provinceId)?void 0:this.state.provinceId).map((function(e){return Object(P.jsx)("option",{value:e._id,children:e.district_name},e._id+Math.random())})):Object(P.jsx)("option",{value:"",disabled:!0,children:"No district found"})]}),this.state.formError&&"district_id"===this.state.formError.element&&Object(P.jsx)("span",{className:"text-red-500",children:this.state.formError.msg})]}),this.state.selectedRole&&this.state.selectedRole.school_required&&Object(P.jsxs)("div",{className:"space-y-2",children:[Object(P.jsx)("label",{className:"mb-5 text-sm font-medium text-gray-700 tracking-wide",children:"School"}),Object(P.jsxs)("select",{className:"block w-full text-base bg-white text-grey-darker border-2 rounded px-4 py-3 md:w-full focus:outline-none focus:bg-gray-100 ".concat(this.state.formError&&"school_id"===this.state.formError.element?"border-red-500":"border-gray-400"),onChange:function(e){t.setSchoolId(e.target.value),t.state.formError&&"school_id"===t.state.formError.element&&t.setFormError(null),t.setCenterId(""),t.setRoomId("")},disabled:this.state.loadingRequest,value:this.state.schoolId,children:[Object(P.jsx)("option",{value:"",children:"Selected school"}),this.props.schoolList&&this.props.schoolList.map((function(e){return Object(P.jsx)("option",{value:e._id,children:e.school_name},e._id+Math.random())}))]}),this.state.formError&&"school_id"===this.state.formError.element&&Object(P.jsx)("span",{className:"text-red-500",children:this.state.formError.msg})]}),this.state.selectedRole&&this.state.selectedRole.room_required&&Object(P.jsxs)("div",{className:"space-y-2",children:[Object(P.jsx)("label",{className:"mb-5 text-sm font-medium text-gray-700 tracking-wide",children:"Center"}),Object(P.jsxs)("select",{className:"block w-full text-base bg-white text-grey-darker border-2 rounded px-4 py-3 md:w-full focus:outline-none focus:bg-gray-100 ".concat(this.state.formError&&"center_id"===this.state.formError.element?"border-red-500":"border-gray-400"),onChange:function(e){t.setCenterId(e.target.value),t.state.formError&&"center_id"===t.state.formError.element&&t.setFormError(null),t.setRoomId("")},disabled:this.state.loadingRequest,value:this.state.centerId,children:[Object(P.jsx)("option",{value:"",children:"Select center"}),this.state.districtId&&this.state.districtId.length>0&&this.props.roomList&&this.distinctCenter(this.props.roomList,this.state.districtId).length>0?this.distinctCenter(this.props.roomList,this.state.districtId).map((function(e,t){return Object(P.jsx)("option",{value:e.center_id,children:e.center_name},e.center_id+t+Math.random())})):Object(P.jsx)("option",{value:"",disabled:!0,children:"No center found"})]}),this.state.formError&&"center_id"===this.state.formError.element&&Object(P.jsx)("span",{className:"text-red-500",children:this.state.formError.msg})]}),this.state.selectedRole&&this.state.selectedRole.room_required&&Object(P.jsxs)("div",{className:"space-y-2",children:[Object(P.jsx)("label",{className:"mb-5 text-sm font-medium text-gray-700 tracking-wide",children:"Room"}),Object(P.jsxs)("select",{className:"block w-full text-base bg-white text-grey-darker border-2 rounded px-4 py-3 md:w-full focus:outline-none focus:bg-gray-100 ".concat(this.state.formError&&"room_id"===this.state.formError.element?"border-red-500":"border-gray-400"),onChange:function(e){t.setRoomId(e.target.value),t.state.formError&&"room_id"===t.state.formError.element&&t.setFormError(null)},disabled:this.state.loadingRequest,value:this.state.roomId,children:[Object(P.jsx)("option",{value:"",children:"Select room"}),!Object(C.e)(this.state.centerId)&&this.props.roomList&&this.distinctRoom(this.props.roomList,this.state.centerId).length>0?this.distinctRoom(this.props.roomList,this.state.centerId).map((function(e,t){return Object(P.jsx)("option",{value:e.room_id,className:"".concat("0"===e.room_name?"hidden":"block"),children:e.room_name},e.room_id+t+Math.random())})):Object(P.jsx)("option",{value:"",disabled:!0,children:"No room found"})]}),this.state.formError&&"room_id"===this.state.formError.element&&Object(P.jsx)("span",{className:"text-red-500",children:this.state.formError.msg})]}),Object(P.jsxs)("div",{className:"flex justify-between 2xl:justify-start gap-2",children:[Object(P.jsx)("button",{className:"btn bg-gray-500 text-gray-50 focus:outline-none",onClick:function(){t.props.setChangeRole(!1),t.setFormError(null),t.setProvinceId(""),t.setDistrictId(""),t.setSchoolId(""),t.setCenterId(""),t.setRoomId("")},disabled:this.state.loadingRequest,children:"Back"}),Object(P.jsx)("button",{className:"btn btn-blue focus:outline-none",disabled:this.state.loadingRequest,children:this.state.loadingRequest?"Loading...":"Save Change"})]})]})})]})}),Object(P.jsxs)("div",{className:"cols-span-1 md:col-span-2 bg-white w-full border rounded text-center p-2 hidden md:block",children:[Object(P.jsx)("div",{className:"my-4",children:Object(P.jsxs)("span",{className:"text-gray-600 font-semibold text-2xl",children:[null===(e=this.state.selectedRole)||void 0===e?void 0:e.role,"'s Default Access"]})}),!this.state.loading&&Object(P.jsx)("div",{className:"overflow-x-auto w-full",children:Object(P.jsx)(y.a,{columns:[{columnTitle:"Access Name",alignText:"left",padding:"p-3"},{columnTitle:"Create",alignText:"left"},{columnTitle:"View",alignText:"left"},{columnTitle:"Update",alignText:"left"},{columnTitle:"Delete",alignText:"left"}],rows:this.tableData,pagination:!1,search:!1,searchBG:"bg-gray-50",thColor:"gray",tableId:"defaultAccess"})})]})]})}}]),s}(h.Component),U=m.a.memo(Object(f.b)((function(e){return{schoolLevels:e.schoolLevels}}),{assignRoleToUserAccess:_.a,PushPopupAlert:x.Kb})(D)),q=s.p+"static/media/blank_profile.c3f94521.png",F=function(e,t){return e.find((function(e){return e.user_id===t}))};!function(e){e.View_User="View User Info",e.Add_Access="Add Access To User",e.Update_Access="Update User Access",e.Close_Modal="Close Modal"}(n||(n={}));var M=function(e){var t=[];for(var s in e){var n=e[s].districts;for(var r in n){var i=n[r].centers;for(var a in i){var c=i[a].rooms;for(var o in c)t.push({province_id:e[s]._id,province_name:e[s].province_name,district_id:n[r]._id,district_name:n[r].district_name,center_id:i[a]._id,center_name:i[a].center_name,room_id:c[o]._id,room_name:c[o].room_number.toString(),capacity:c[o].capacity,occupied:c[o].occupied})}}}return t},B=function(e){Object(l.a)(s,e);var t=Object(d.a)(s);function s(e){var n;return Object(c.a)(this,s),(n=t.call(this,e)).setManageUserId=function(e){n.setState({manageUserId:e})},n.setLoadingRequest=function(e){n.setState({loadingRequest:e})},n.setLoadingSchool=function(e){n.setState({loadingSchool:e})},n.setLoading=function(e){n.setState({loading:e})},n.setLoadingRequestType=function(e){n.setState({loadingRequestType:e})},n.setRoomList=function(e){n.setState({roomList:e})},n.setRoomTables=function(e){n.setState({roomTable:e})},n.setCurrentAccess=function(e){n.setState({currentAccess:e})},n.setSchoolList=function(e){n.setState({schoolList:e})},n.setUserAccess=function(e){n.setState({userAccess:e})},n.componentDidMount=function(){0===n.props.schools.length?n.props.getSchools((function(e,t,s){n.setLoadingSchool(e),e||(t.length>0&&n.props.PushPopupAlert({title:t,theme:N.a.danger}),s&&(n.setLoadingSchool(!1),n.setSchoolList(s)))})):(n.setSchoolList(n.props.schools),n.setLoadingSchool(!1)),0===n.props.allRoom.length?n.props.getAllRoom((function(e,t,s){n.setLoading(e),!e&&t.length>0&&n.props.PushPopupAlert({title:t,theme:N.a.danger}),s&&s.length>0&&(n.setRoomList(s),n.setRoomTables(M(s)))})):n.state.loading&&(n.setRoomList(n.props.allRoom),n.setRoomTables(M(n.props.allRoom)),n.setLoading(!1))},n.tableData=function(){if(n.props.loadingUser||n.state.loading||n.state.loadingSchool)return[Object(P.jsx)("tr",{className:"border-b border-gray-200 hover:bg-gray-100",children:Object(P.jsx)("td",{className:"p-3 text-center",colSpan:8,children:Object(P.jsx)(v.a,{})})},Math.random())];var e=n.props.users;return e.length<=0?[Object(P.jsx)("tr",{className:"border-b border-gray-200 hover:bg-gray-100",children:Object(P.jsx)("td",{className:"p-3 text-center",colSpan:8,children:"No Data Found"})},Math.random())]:e.map((function(e,t){var s,r;return Object(P.jsxs)("tr",{className:"border-b border-gray-200 hover:bg-gray-100 group cursor-pointer",onClick:function(){n.props.setManageUser(e),n.setManageUserId(e.user_id)},children:[Object(P.jsx)("td",{className:"p-3 text-left whitespace-nowrap",children:t+1}),Object(P.jsx)("td",{className:"p-3 text-left",children:Object(P.jsx)("span",{children:e.user_info&&e.user_info.fname+" "+e.user_info.lname})}),Object(P.jsx)("td",{className:"p-3 text-left",children:e.email}),Object(P.jsx)("td",{className:"p-3 text-left",children:e.user_info&&"M"===e.user_info.sex?"Male":"Female"}),Object(P.jsx)("td",{className:"p-3 text-left text-blue-700 text-base font-medium",children:e.default_access&&e.default_access.system_user_role_id&&e.default_access.system_user_role_id&&Object(P.jsx)("span",{className:"px-2 py-1 font-semibold rounded text-blue-700 bg-blue-100 dark:bg-blue-700 dark:text-blue-100",children:(null===(s=Object(C.d)(n.props.roleList,e.default_access.system_user_role_id))||void 0===s?void 0:s.role)&&Object(C.a)(null===(r=Object(C.d)(n.props.roleList,e.default_access.system_user_role_id))||void 0===r?void 0:r.role)})}),Object(P.jsx)("td",{className:"px-3 text-center",children:Object(P.jsx)("button",{className:"btn bg-gray-200 group-hover:bg-blue-700 group-hover:text-white focus:outline-none",title:"Manage User Access",onClick:function(){n.props.setManageUser(e),n.setManageUserId(e.user_id)},children:"Manage"})})]},t+Math.random())}))},n.blockUser=function(){var e=Object(a.a)(i.a.mark((function e(t,s){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t||n.props.PushPopupAlert({title:"User Access is required doesn't exist",theme:N.a.danger}),n.setLoadingRequest(!0),window.confirm("Are sure you want to ".concat(s?"block":"activate"," this user?"))){e.next=4;break}return e.abrupt("return",n.setLoadingRequest(!1));case 4:return e.prev=4,e.next=7,p.a.patch("".concat(I.a.AUTH,"/users/disactive/").concat(t),{is_active:!s});case 7:(r=e.sent)&&(console.log("===================================="),console.log({blockUserToSystem:r}),console.log("===================================="),s?n.props.blockUserToSystem(t,n.props.currentPage):n.props.unBlockUserToSystem(t,n.props.currentPage),n.props.PushPopupAlert({title:"User has been ".concat(s?"blocked":"activated","!"),theme:N.a.info})),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(4),console.error({blockUser_ERROR:e.t0}),n.props.PushPopupAlert({title:Object(T.a)(e.t0),theme:N.a.danger});case 15:n.setLoadingRequest(!1),t="";case 17:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(t,s){return e.apply(this,arguments)}}(),n.restUserAccess=function(){var e=Object(a.a)(i.a.mark((function e(t){var s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t||n.props.PushPopupAlert({title:"User Access is required doesn't exist",theme:N.a.warning}),window.confirm("Are sure you want to reset to default access?")){e.next=3;break}return e.abrupt("return",n.setLoadingRequest(!1));case 3:return n.setLoadingRequest(!0),n.setLoadingRequestType("RESET"),e.prev=5,e.next=8,p.a.delete("".concat(I.a.AUTH,"/custaccess/user/").concat(t));case 8:e.sent&&n.props.resetUserAccess(t,n.props.currentPage),(s=n.props.users.find((function(e){return e.user_id===t})))&&(s.default_access&&n.setUserAccess(s.default_access.access),n.props.PushPopupAlert({title:"Resetting User Access complete successfully",theme:N.a.info}),n.setCurrentAccess(null)),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(5),console.error({reseting_user_access:e.t0}),n.props.PushPopupAlert({title:Object(T.a)(e.t0),theme:N.a.danger});case 18:n.setLoadingRequest(!1),n.setLoadingRequestType(null),t="";case 21:case"end":return e.stop()}}),e,null,[[5,14]])})));return function(t){return e.apply(this,arguments)}}(),n.distinctDistrict=function(e,t){var s=[],n=[];if(t)n=e.find((function(e){return e._id===t}))&&e.find((function(e){return e._id===t})).districts?e.find((function(e){return e._id===t})).districts:[];else for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r))for(var i in e[r].districts)Object.prototype.hasOwnProperty.call(e[r].districts,i)&&(s.includes(e[r].districts[i]._id)||(s.push(e[r].districts[i]._id),n.push(e[r].districts[i])));return n},n.state={manageUserId:"",loadingRequest:!1,loading:!0,loadingSchool:!0,loadingRequestType:null,schoolList:null,roomList:null,roomTable:null,userAccess:null,currentAccess:null},n}return Object(o.a)(s,[{key:"render",value:function(){var e,t,s,n=this;return Object(P.jsxs)("div",{children:[!this.props.manageUser&&Object(P.jsx)("div",{className:"grid md:grid-cols-5 gap-2 mb-5",children:Object(P.jsxs)("div",{className:"md:col-span-5 rounded",children:[Object(P.jsx)("div",{className:"my-2 flex sm:flex-row flex-col justify-between",children:Object(P.jsx)("div",{className:"flex flex-col md:flex-row gap-1 items-center mx-1.5"})}),this.props.users&&Object(P.jsx)(y.a,{columns:[{columnTitle:"#",alignText:"left",padding:"p-3"},{columnTitle:"Names",alignText:"left",padding:"p-3"},{columnTitle:"Email",alignText:"left",padding:"p-3"},{columnTitle:"Gender",alignText:"left",padding:"p-3"},{columnTitle:"Role",alignText:"left",padding:"p-3"},{columnTitle:"",alignText:"left",padding:"p-3"}],rows:this.tableData,pagination:!1,search:!0,thColor:"gray",loading:this.props.loadingUser||this.state.loading||this.state.loadingSchool})]})}),this.props.manageUser&&Object(P.jsxs)("div",{className:"bg-gray-100 h-100",children:[Object(P.jsxs)("div",{className:"bg-white border-b border-t px-4 py-2 flex flex-col md:flex-row items-center gap-x-14",children:[this.props.users.find((function(e){return e.user_id===n.state.manageUserId}))?Object(P.jsxs)("div",{className:"flex flex-col md:flex-row md:items-start items-center w-full gap-3",children:[Object(P.jsx)("img",{src:"pic"!==this.props.users.find((function(e){return e.user_id===n.state.manageUserId})).user_info.photo?this.props.users.find((function(e){return e.user_id===n.state.manageUserId})).user_info.photo:q,alt:"",className:"rounded-full w-32 h-32"}),Object(P.jsxs)("div",{className:"flex flex-col gap-1 items-start w-full",children:[Object(P.jsx)("span",{className:"text-2xl font-semibold",children:this.props.users.find((function(e){return e.user_id===n.state.manageUserId})).user_info.fname+" "+this.props.users.find((function(e){return e.user_id===n.state.manageUserId})).user_info.lname}),Object(P.jsxs)("div",{className:"flex items-center",children:[Object(P.jsx)(b.X,{className:"w-5 h-5"}),Object(P.jsx)("span",{className:"text-lg font-medium",children:this.props.users.find((function(e){return e.user_id===n.state.manageUserId})).default_access&&Object(C.d)(this.props.roleList,this.props.users.find((function(e){return e.user_id===n.state.manageUserId})).default_access.system_user_role_id).role})]}),Object(P.jsxs)("div",{className:"flex items-center gap-1",children:[Object(P.jsx)("span",{className:"text-gray-500",children:"Level:"}),Object(P.jsx)("span",{className:"text-base font-medium",children:this.props.users.find((function(e){return e.user_id===n.state.manageUserId})).default_access&&Object(C.d)(this.props.roleList,this.props.users.find((function(e){return e.user_id===n.state.manageUserId})).default_access.system_user_role_id).district_required?"District":this.props.users.find((function(e){return e.user_id===n.state.manageUserId})).default_access&&Object(C.d)(this.props.roleList,this.props.users.find((function(e){return e.user_id===n.state.manageUserId})).default_access.system_user_role_id).school_required?"School":this.props.users.find((function(e){return e.user_id===n.state.manageUserId})).default_access&&Object(C.d)(this.props.roleList,this.props.users.find((function(e){return e.user_id===n.state.manageUserId})).default_access.system_user_role_id).room_required?"Room":this.props.users.find((function(e){return e.user_id===n.state.manageUserId})).default_access&&Object(C.d)(this.props.roleList,this.props.users.find((function(e){return e.user_id===n.state.manageUserId})).default_access.system_user_role_id).education_institution_required?"Institute":"-"})]}),this.props.users.find((function(e){return e.user_id===n.state.manageUserId})).default_access&&Object(C.d)(this.props.roleList,this.props.users.find((function(e){return e.user_id===n.state.manageUserId})).default_access.system_user_role_id).education_institution_required?Object(P.jsxs)("div",{className:"flex items-center gap-1",children:[Object(P.jsx)("span",{className:"text-gray-500",children:"Institute:"}),Object(P.jsx)("span",{className:"text-base font-medium",children:this.props.users.find((function(e){return e.user_id===n.state.manageUserId})).default_access&&this.props.schoolLevels.education_categories&&Object(C.b)(this.props.schoolLevels.education_categories,this.props.users.find((function(e){return e.user_id===n.state.manageUserId})).default_access.education_institution_id)?Object(C.b)(this.props.schoolLevels.education_categories,this.props.users.find((function(e){return e.user_id===n.state.manageUserId})).default_access.education_institution_id).education_category_title:"Unknown Institute"})]}):this.props.users.find((function(e){return e.user_id===n.state.manageUserId})).default_access&&Object(C.d)(this.props.roleList,this.props.users.find((function(e){return e.user_id===n.state.manageUserId})).default_access.system_user_role_id).district_required?Object(P.jsxs)("div",{className:"flex items-center gap-1",children:[Object(P.jsx)("span",{className:"text-gray-500",children:"District:"}),Object(P.jsx)("span",{className:"text-base font-medium",children:this.props.users.find((function(e){return e.user_id===n.state.manageUserId})).default_access&&this.state.roomList&&Object(E.distinctDistrict)(this.state.roomList).find((function(e){return e.district_id===n.props.users.find((function(e){return e.user_id===n.state.manageUserId})).default_access.district_id}))&&Object(E.distinctDistrict)(this.state.roomList).find((function(e){return e.district_id===n.props.users.find((function(e){return e.user_id===n.state.manageUserId})).default_access.district_id})).district_name})]}):this.props.users.find((function(e){return e.user_id===n.state.manageUserId})).default_access&&Object(C.d)(this.props.roleList,this.props.users.find((function(e){return e.user_id===n.state.manageUserId})).default_access.system_user_role_id).school_required?Object(P.jsxs)("div",{className:"flex items-center gap-1",children:[Object(P.jsx)("span",{className:"text-gray-500",children:"School:"}),Object(P.jsx)("span",{className:"text-base font-medium",children:this.state.schoolList&&this.state.schoolList.find((function(e){var t;return e._id===(null===(t=n.props.users.find((function(e){return e.user_id===n.state.manageUserId})).default_access)||void 0===t?void 0:t.school_id)}))?this.state.schoolList.find((function(e){var t;return e._id===(null===(t=n.props.users.find((function(e){return e.user_id===n.state.manageUserId})).default_access)||void 0===t?void 0:t.school_id)})).school_name:"Unknown school"})]}):this.props.users.find((function(e){return e.user_id===n.state.manageUserId})).default_access&&Object(C.d)(this.props.roleList,this.props.users.find((function(e){return e.user_id===n.state.manageUserId})).default_access.system_user_role_id).room_required&&Object(P.jsxs)("div",{className:"flex items-center gap-1",children:[Object(P.jsx)(b.W,{className:"text-gray-500"}),this.state.roomTable&&Object(P.jsx)("span",{className:"text-base font-medium",children:(null===(e=this.state.roomTable.find((function(e){var t;return e.room_id===(null===(t=n.props.users.find((function(e){return e.user_id===n.state.manageUserId})).default_access)||void 0===t?void 0:t.room_id)})))||void 0===e?void 0:e.district_name)+" - "+(null===(t=this.state.roomTable.find((function(e){var t;return e.room_id===(null===(t=n.props.users.find((function(e){return e.user_id===n.state.manageUserId})).default_access)||void 0===t?void 0:t.room_id)})))||void 0===t?void 0:t.center_name)+" - Room "+(null===(s=this.state.roomTable.find((function(e){var t;return e.room_id===(null===(t=n.props.users.find((function(e){return e.user_id===n.state.manageUserId})).default_access)||void 0===t?void 0:t.room_id)})))||void 0===s?void 0:s.room_name)})]})]})]},this.props.users.find((function(e){return e.user_id===n.state.manageUserId})).user_id+Math.random()):Object(P.jsx)(O.b,{theme:O.a.Dark,value:"User info not found"}),this.props.users.find((function(e){return e.user_id===n.state.manageUserId}))&&Object(P.jsxs)("div",{className:"flex flex-col w-full",children:[Object(P.jsxs)("div",{className:"flex items-center gap-1",children:[Object(P.jsx)("span",{className:"text-gray-500",children:"NID:"}),Object(P.jsx)("span",{className:"text-base font-medium",children:this.props.users.find((function(e){return e.user_id===n.state.manageUserId})).n_id})]}),Object(P.jsxs)("div",{className:"flex items-center gap-1",children:[Object(P.jsx)("span",{className:"text-gray-500",children:"Email:"}),Object(P.jsx)("span",{className:"text-base font-medium",children:this.props.users.find((function(e){return e.user_id===n.state.manageUserId})).email})]}),Object(P.jsxs)("div",{className:"flex items-center gap-1",children:[Object(P.jsx)("span",{className:"text-gray-500",children:"Phone:"}),Object(P.jsx)("span",{className:"text-base font-medium",children:this.props.users.find((function(e){return e.user_id===n.state.manageUserId})).phone_number})]}),Object(P.jsxs)("div",{className:"flex items-center gap-1",children:[Object(P.jsx)("span",{className:"text-gray-500",children:"Status:"}),Object(P.jsx)("span",{className:"text-base font-medium",children:!1===this.props.users.find((function(e){return e.user_id===n.state.manageUserId})).is_active?"Blocked":"Active"})]}),Object(P.jsxs)("div",{className:"flex items-center gap-1",children:[this.props.users.find((function(e){return e.user_id===n.state.manageUserId})).custome_access&&Object(P.jsxs)("button",{className:"px-2 py-1 font-semibold text-gray-50 inline-flex items-center rounded ".concat(this.state.loadingRequestType&&"RESET"===this.state.loadingRequestType?"cursor-wait bg-gray-400":"bg-gray-600"),onClick:function(){return n.restUserAccess(n.props.users.find((function(e){return e.user_id===n.state.manageUserId})).user_id)},disabled:this.state.loadingRequest,children:[Object(P.jsx)(b.X,{className:"w-4 h-4 fill-current"}),Object(P.jsx)("span",{children:this.state.loadingRequestType&&"RESET"===this.state.loadingRequestType?"Reseting...":"Reset Access"})]}),!this.props.changeRole&&Object(P.jsxs)("button",{className:"bg-yellow-300 hover:bg-yellow-400 px-2 py-1 font-semibold text-black inline-flex items-center rounded",onClick:function(){return n.props.setChangeRole(!0)},children:[Object(P.jsx)(b.X,{className:"w-4 h-4 fill-current"}),Object(P.jsx)("span",{children:"Change Role"})]}),this.props.users.find((function(e){return e.user_id===n.state.manageUserId})).is_active?Object(P.jsxs)("button",{className:"px-2 py-1 font-semibold text-gray-100 inline-flex items-center rounded ".concat(this.state.loadingRequestType&&"STATUS"===this.state.loadingRequestType?"cursor-wait bg-red-500":"bg-red-700"),onClick:function(){return!n.state.loadingRequest&&n.props.manageUser&&n.blockUser(n.props.users.find((function(e){return e.user_id===n.state.manageUserId})).user_id,n.props.users.find((function(e){return e.user_id===n.state.manageUserId})).is_active)},disabled:this.state.loadingRequest,children:[Object(P.jsx)(b.X,{className:"w-4 h-4 fill-current"}),Object(P.jsx)("span",{children:this.state.loadingRequestType&&"RESET"===this.state.loadingRequestType?"Loading...":"Block user"})]}):Object(P.jsxs)("button",{className:"px-2 py-1 font-semibold text-gray-100 inline-flex items-center rounded ".concat(this.state.loadingRequestType&&"STATUS"===this.state.loadingRequestType?"cursor-wait bg-yellow-500":"bg-yellow-700"),onClick:function(){return!n.state.loadingRequest&&n.props.manageUser&&n.blockUser(n.props.users.find((function(e){return e.user_id===n.state.manageUserId})).user_id,n.props.users.find((function(e){return e.user_id===n.state.manageUserId})).is_active)},disabled:this.state.loadingRequest,children:[Object(P.jsx)(b.X,{className:"w-4 h-4 fill-current"}),Object(P.jsx)("span",{children:this.state.loadingRequestType&&"RESET"===this.state.loadingRequestType?"Loading...":"Re-Activate"})]})]})]},this.props.users.find((function(e){return e.user_id===n.state.manageUserId})).user_id+Math.random())]}),this.props.manageUser&&this.state.roomList&&this.props.changeRole?Object(P.jsx)(U,{userInfo:this.props.manageUser,roleList:this.props.roleList,district:this.distinctDistrict(this.state.roomList),schoolList:this.state.schoolList,roomList:this.state.roomList,setChangeRole:this.props.setChangeRole,currentPage:this.props.currentPage}):Object(P.jsx)(S.UserAccess,{userInfo:F(this.props.users,this.state.manageUserId),manageUserId:this.state.manageUserId,setUserAccess:this.setUserAccess,userAccess:this.state.userAccess,setCurrentAccess:this.setCurrentAccess,currentAccess:this.state.currentAccess,currentPage:this.props.currentPage})]})]})}}]),s}(h.Component);t.b=m.a.memo(Object(f.b)((function(e){var t=e.schoolLevels,s=e.schools,n=e.locations;return{schoolLevels:t,schools:s.schools,allRoom:n.roomLocation}}),{blockUserToSystem:_.b,unBlockUserToSystem:_.f,resetUserAccess:_.e,getSchools:g.k,getAllRoom:j.q,PushPopupAlert:x.Kb})(B))},670:function(e,t,s){"use strict";var n=s(37),r=s(24),i=s(23),a=s(26),c=s(25),o=s(5),l=s(654),d=s(44),u=s(21),p=s(3),h=(s(175),s(33)),m=s(19),b=s(63),f=s(695),x=s(1),j=function(e){Object(a.a)(s,e);var t=Object(c.a)(s);function s(e){var i;return Object(r.a)(this,s),(i=t.call(this,e)).setLoading=function(e){i.setState({loading:e})},i.setSearchLevel=function(e,t){i.setState({searchLevel:{educationCategory:e,schoolLevel:t}}),e&&i.props.setSelectedEducationCategory(e),t&&(i.props.setSelectedSchoolLevel(t),i.setState({showFilter:!1}))},i.setSchoolLevelFilterFn=function(e){i.setState({showFilter:e})},i.filterWithExams=function(e){var t=e;return void 0!==i.props.preparedExams&&null!==i.props.preparedExams&&(t=e.filter((function(e){return i.props.preparedExams&&void 0===i.props.preparedExams.find((function(t){var s;return t.course===e.course_id&&t.period===(null===(s=i.props.periods.selected_period)||void 0===s?void 0:s.session_plan_id)}))}))),t},i.filteredCourses=function(e,t){var s=e;return null!==t&&(null!==t.schoolLevel?s=e.filter((function(e){if(e.school_levels.find((function(e){var s;return e===(null===(s=t.schoolLevel)||void 0===s?void 0:s.school_level_id)}))){var s,r=!1,i=Object(n.a)(e.school_levels);try{var a=function(){var e,n=s.value;(null===(e=t.educationCategory)||void 0===e?void 0:e.school_levels.find((function(e){return e===n})))&&(r=!0)};for(i.s();!(s=i.n()).done;)a()}catch(c){i.e(c)}finally{i.f()}return!0===r?e:null}return null})):null!==t.educationCategory&&(s=e.filter((function(e){var s,r=!1,i=Object(n.a)(e.school_levels);try{var a=function(){var e,n=s.value;(null===(e=t.educationCategory)||void 0===e?void 0:e.school_levels.find((function(e){return e===n})))&&(r=!0)};for(i.s();!(s=i.n()).done;)a()}catch(c){i.e(c)}finally{i.f()}return!0===r?e:null})))),i.filterWithExams(s)},i.setUploadingStatus=function(e){i.setState({uploadingStatus:e})},i.componentDidMount=function(){null!==i.props.course.courses&&0!==i.props.course.courses.length||i.props.loadCourses(i.setLoading)},i.state={loading:!1,searchLevel:null,showFilter:!1,uploadingStatus:!1,searchCourseInput:""},i}return Object(i.a)(s,[{key:"render",value:function(){var e,t,s,n,r=this;return Object(x.jsxs)(o.Fragment,{children:[Object(x.jsx)("div",{className:"flex-col",children:Object(x.jsx)("div",{className:"mb-4 grid md:grid-cols-5 gap-2",children:Object(x.jsx)("div",{className:"animate__animated md:col-span-5 md:flex md:flex-col min-h-full bg-white shadow rounded",children:Object(x.jsxs)("div",{className:"py-2 px-2",children:[Object(x.jsx)("div",{className:"flex flex-row gap-2 mb-2 items-center justify-between",children:Object(x.jsx)("div",{className:"flex flex-col",children:Object(x.jsxs)("div",{className:"flex flex-row items-center",children:[(null===(e=this.state.searchLevel)||void 0===e?void 0:e.educationCategory)&&Object(x.jsx)("span",{className:"bg-blue-50 rounded-full px-2 text-xs text-blue-600 font-bold",children:null===(t=this.state.searchLevel.educationCategory)||void 0===t?void 0:t.education_category_title}),(null===(s=this.state.searchLevel)||void 0===s?void 0:s.schoolLevel)&&Object(x.jsxs)("div",{className:"flex flex-row items-center",children:[Object(x.jsx)(b.b,{className:""}),Object(x.jsx)("span",{className:"bg-blue-50 rounded-full px-2 text-xs text-blue-600 font-bold",children:null===(n=this.state.searchLevel.schoolLevel)||void 0===n?void 0:n.school_level_name})]})]})})}),Object(x.jsxs)("div",{className:"grid grid-cols-12 gap-2",children:[Object(x.jsx)("input",{onChange:function(e){return r.setState({searchCourseInput:e.target.value})},type:"text",className:"col-span-8 md:col-span-10 input-white h-10 text-sm border-2 border-blue-500",placeholder:"Search course by name or code"}),Object(x.jsxs)("div",{onClick:function(){null===r.props.schoolLevels.education_categories&&r.props.loadEducationCategories(r.setLoading),null===r.props.schoolLevels.school_levels&&r.props.loadSchoolLevels(r.setLoading),r.setState({showFilter:!0})},className:"col-span-4 md:col-span-2 btn cursor-pointer bg-blue-50 hover:bg-blue-100 text-blue-600 flex flex-row justify-center gap-1 items-center",children:[Object(x.jsx)(l.f,{className:"text-xl"}),Object(x.jsx)("span",{children:"Filter"})]})]}),Object(x.jsx)("div",{className:"mt-4",style:{minHeight:"500px"},children:!0===this.state.uploadingStatus?Object(x.jsxs)("div",{className:"my-2 flex flex-col gap-2",children:[Object(x.jsx)("div",{className:"rounded-xl bg-gray-100 h-8"}),Object(x.jsx)("div",{className:"rounded-xl bg-gray-100 h-8 w-4/5"}),Object(x.jsx)("div",{className:"rounded-xl bg-gray-100 h-8 w-5/6"}),Object(x.jsx)("div",{className:"rounded-xl bg-gray-100 h-8"}),Object(x.jsx)("div",{className:"rounded-xl bg-gray-100 h-8 w-3/4"}),Object(x.jsx)("div",{className:"rounded-xl bg-gray-100 h-8"})]}):null===this.props.course.courses?Object(x.jsx)(h.a,{}):this.props.course.courses&&0===this.filteredCourses(this.props.course.courses,this.state.searchLevel).length?Object(x.jsx)("span",{className:"text-gray-400 font-extrabold ml-2 animate__animated animate__shakeX",children:"No courses available!"}):this.props.course.courses&&Object(d.a)(this.filteredCourses(this.props.course.courses,this.state.searchLevel),this.state.searchCourseInput).map((function(e,t){return Object(x.jsxs)("div",{onClick:function(){return r.props.setSelectedCourse(e)},className:"rounded border ".concat(null!==r.props.selected_course_id&&r.props.selected_course_id===e.course_id?"bg-blue-100 border-blue-300 text-blue-600 animate__animated animate__bounceIn":"border-gray-200 hover:bg-blue-100 hover:border-blue-600 text-gray-600","  px-2 py-3 flex flex-row gap-3 items-center my-2 cursor-pointer"),children:[Object(x.jsx)("span",{className:"text-sm",children:Object(x.jsx)("div",{className:"h-8 w-8 rounded-full flex justify-center items-center text-white ".concat(null!==r.props.selected_course_id&&r.props.selected_course_id===e.course_id?"bg-blue-600 text-white":"font-bold bg-gray-500"),children:t+1})}),Object(x.jsxs)("div",{className:"flex flex-col",children:[Object(x.jsx)("span",{className:"text-md font-bold",children:e.course_name}),Object(x.jsxs)("span",{className:"text-xs",children:["Code: ",e.course_code]})]})]},t+1)}))})]})})})}),!0===this.state.showFilter&&Object(x.jsx)(m.c,{title:"Filter courses by school levels",backDrop:!0,theme:m.b.default,close:function(){return r.setState({showFilter:!1})},backDropClose:!0,widthSizeClass:m.a.medium,displayClose:!0,padding:{title:!0},children:Object(x.jsx)(f.a,{educationCategories:this.props.schoolLevels.education_categories,schoolLevels:this.props.schoolLevels.school_levels,searchLevel:this.state.searchLevel,setSearchLevel:this.setSearchLevel,setSchoolLevelFilterFn:this.setSchoolLevelFilterFn})})]})}}]),s}(o.Component),g=Object(u.b)((function(e){return{auth:e.auth,course:e.course,schoolLevels:e.schoolLevels,questionBank:e.questionBank,periods:e.periods}}),{loadCourses:p.Bc,loadSchoolLevels:p.Lc,loadEducationCategories:p.Dc,setSelectedEducationCategory:p.Zc,setSelectedSchoolLevel:p.gd})(j);t.a=g},687:function(e,t,s){"use strict";s.r(t),s.d(t,"UserAccess",(function(){return E}));var n=s(4),r=s.n(n),i=s(7),a=s(24),c=s(23),o=s(26),l=s(25),d=s(8),u=s.n(d),p=s(5),h=s.n(p),m=s(169),b=s(10),f=s(692),x=s(681),j=s(21),g=s(32),_=s(3),v=s(653),O=s(648),y=s(39),N=s(9),C=s(13),I=s(1),T=function(e){Object(o.a)(s,e);var t=Object(l.a)(s);function s(e){var n;return Object(a.a)(this,s),(n=t.call(this,e)).setViewPermission=function(e){n.setState({viewPermission:e})},n.setLoadindRequest=function(e){n.setState({loadindRequest:e})},n.setCreatePermission=function(e){n.setState({createPermission:e})},n.setUpdatePermission=function(e){n.setState({updatePermission:e})},n.setDeletePermission=function(e){n.setState({deletePermission:e})},n.setLoadind=function(e){n.setState({loading:e})},n.overrideUserAccess=function(e,t){if(e&&t&&t.length>0){var s=[],r=function(n){if(Object.prototype.hasOwnProperty.call(e,n)){var r=t.find((function(t){return t.id===e[n].id}));r?s.push(r):s.push(e[n])}};for(var i in e)r(i);n.props.setUserAccess(s)}},n.componentDidMount=function(){n.props.userInfo&&n.props.userInfo.custome_access?(n.props.userInfo.default_access&&n.overrideUserAccess(n.props.userInfo.default_access.access,n.props.userInfo.custome_access.access),n.setLoadind(!1)):(n.props.userInfo&&n.props.userInfo.default_access&&n.props.setUserAccess(n.props.userInfo.default_access.access),n.setLoadind(!1))},n.tableData=function(){return n.props.userAccess?n.props.userAccess.map((function(e,t){return Object(I.jsxs)("tr",{className:"text-left border-b border-gray-200 cursor-pointer hover:bg-gray-100 ".concat(n.props.currentAccess&&n.props.currentAccess.id===e.id&&"bg-gray-200 border my-3 hover:bg-gray-100"),onClick:function(){return n.props.currentAccess&&n.props.currentAccess.id===e.id?(n.props.setCurrentAccess(null),n.setCreatePermission(!1),n.setViewPermission(!1),n.setUpdatePermission(!1),n.setDeletePermission(!1)):(n.props.setCurrentAccess(e),n.setCreatePermission(e.permitted.create),n.setViewPermission(e.permitted.view),n.setUpdatePermission(e.permitted.update),n.setDeletePermission(e.permitted.delete))},children:[Object(I.jsx)("td",{className:"px-2 py-1",children:Object(I.jsx)("label",{className:"inline-flex items-center",children:Object(I.jsx)("span",{className:"text-gray-900 capitalize text-xl font-normal cursor-pointer",children:e.task})})}),Object(I.jsx)("td",{children:Object(I.jsxs)("div",{className:"inline-flex items-center text-xl ".concat(e.permitted.create?"text-green-700":"text-red-700"),children:[e.permitted.create?Object(I.jsx)(x.a,{}):Object(I.jsx)(b.L,{}),e.permitted.create?" Yes":"No"]})}),Object(I.jsx)("td",{children:Object(I.jsxs)("div",{className:"inline-flex items-center text-xl ".concat(e.permitted.view?"text-green-700":"text-red-700"),children:[e.permitted.view?Object(I.jsx)(x.a,{}):Object(I.jsx)(b.L,{}),e.permitted.view?" Yes":"No"]})}),Object(I.jsx)("td",{children:Object(I.jsxs)("div",{className:"inline-flex items-center text-xl ".concat(e.permitted.update?"text-green-700":"text-red-700"),children:[e.permitted.update?Object(I.jsx)(x.a,{}):Object(I.jsx)(b.L,{}),e.permitted.update?" Yes":"No"]})}),Object(I.jsx)("td",{children:Object(I.jsxs)("div",{className:"inline-flex items-center text-xl ".concat(e.permitted.delete?"text-green-700":"text-red-700"),children:[e.permitted.delete?Object(I.jsx)(x.a,{}):Object(I.jsx)(b.L,{}),e.permitted.delete?" Yes":"No"]})})]},t+e.id+Math.random())})):[Object(I.jsx)("tr",{children:Object(I.jsx)("td",{children:"No data"})},Math.random())]},n.handleCustomization=function(){var e=Object(i.a)(r.a.mark((function e(t){var s,i,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!n.props.userInfo){e.next=26;break}if(n.setLoadindRequest(!0),s=null,s=n.props.userInfo.custome_access,i=-1,e.prev=6,s&&n.props.currentAccess?(i=s.access.findIndex((function(e){return e.id===n.props.currentAccess.id})))>=0?(s.access[i].permitted.create=n.state.createPermission,s.access[i].permitted.view=n.state.viewPermission,s.access[i].permitted.update=n.state.updatePermission,s.access[i].permitted.delete=n.state.deletePermission):s.access.push({id:n.props.currentAccess.id,task:n.props.currentAccess.task,key:n.props.currentAccess.key,permitted:{create:n.state.createPermission,view:n.state.viewPermission,update:n.state.updatePermission,delete:n.state.deletePermission}}):n.props.currentAccess&&(s={access:[{id:n.props.currentAccess.id,task:n.props.currentAccess.task,key:n.props.currentAccess.key,permitted:{create:n.state.createPermission,view:n.state.viewPermission,update:n.state.updatePermission,delete:n.state.deletePermission}}],user_id:n.props.userInfo.user_id,custome_user_access_id:""}),!s){e.next=19;break}if(null===n.props.userInfo.custome_access){e.next=15;break}return e.next=12,u.a.patch("".concat(N.a.AUTH,"/custaccess"),{access:s.access,user_id:n.props.userInfo.user_id});case 12:a=e.sent,e.next=18;break;case 15:return e.next=17,u.a.post("".concat(N.a.AUTH,"/custaccess"),{access:s.access,user_id:n.props.userInfo.user_id});case 17:a=e.sent;case 18:a&&(s.custome_user_access_id=a.data.data.custome_user_access_id,n.props.customizeUserAccess(s,n.props.currentPage),s&&n.props.userInfo.default_access&&n.overrideUserAccess(n.props.userInfo.default_access.access,s.access),n.props.PushPopupAlert({title:"Resetting User Access complete successfully",theme:y.a.info}),s=null,n.props.setCurrentAccess(null),n.setCreatePermission(!1),n.setViewPermission(!1),n.setUpdatePermission(!1),n.setDeletePermission(!1));case 19:e.next=25;break;case 21:e.prev=21,e.t0=e.catch(6),console.error({customize_access:e.t0}),n.props.PushPopupAlert({title:Object(C.a)(e.t0),theme:y.a.danger});case 25:n.setLoadindRequest(!1);case 26:case"end":return e.stop()}}),e,null,[[6,21]])})));return function(t){return e.apply(this,arguments)}}(),n.state={loading:!0,loadindRequest:!1,createPermission:!1,viewPermission:!1,updatePermission:!1,deletePermission:!1},n}return Object(c.a)(s,[{key:"render",value:function(){var e=this;return void 0===this.props.userInfo?Object(I.jsx)(g.a,{to:"/users"}):this.state.loading||null===this.props.userInfo?Object(I.jsx)("div",{className:"text-center py-7 font-bold text-4xl text-gray-400 animate-pulse",children:"Loading User Access..."}):Object(I.jsx)("div",{children:Object(I.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mx-1 my-2",children:[Object(I.jsxs)("div",{className:"col-span-1 md:col-span-3 bg-white w-full overflow-x-auto border rounded text-center p-2 ".concat(this.props.currentAccess?"hidden md:block":""),children:[Object(I.jsx)("span",{className:"text-gray-600 mt-2 font-semibold text-2xl",children:"Settings"}),!this.state.loading&&Object(I.jsx)("div",{className:"overflow-x-auto w-full",children:Object(I.jsx)(O.a,{columns:[{columnTitle:"Access Name",alignText:"left",padding:"p-3"},{columnTitle:"Create",alignText:"left"},{columnTitle:"View",alignText:"left"},{columnTitle:"Update",alignText:"left"},{columnTitle:"Delete",alignText:"left"}],rows:this.tableData,pagination:!1,search:!0,searchBG:"bg-gray-50",thColor:"gray"})})]}),Object(I.jsx)("div",{className:"col-span-1 md:col-span-2",children:this.props.currentAccess?Object(I.jsxs)("div",{className:"",children:[Object(I.jsx)("h1",{className:"text-2xl md:text-3xl font-semibold text-center my-2 text-gray-900",children:"Customize User Access"}),Object(I.jsx)("div",{className:"flex justify-center mb-3",children:Object(I.jsxs)("h2",{className:"text-2xl font-semibold text-center text-gray-600 flex flex-row items-center",children:[Object(I.jsx)(m.h,{className:"w-7 h-7"}),this.props.currentAccess.task]})}),Object(I.jsx)("div",{className:"flex flex-col px-2 md:px-1",children:Object(I.jsxs)("form",{className:"flex flex-col items-center",onSubmit:function(t){return e.handleCustomization(t)},children:[Object(I.jsxs)("div",{className:"inline-flex gap-2 items-center",children:[Object(I.jsx)(f.a,{className:"w-7 h-7 text-gray-600"}),Object(I.jsxs)("div",{className:"flex flex-col",children:[Object(I.jsx)("h3",{className:"font-semibold text-xl",children:"Create"}),Object(I.jsx)("span",{className:"text-gray-600 text-sm md:pr-1",children:"This permission gives the user the ability to create"})]}),Object(I.jsx)("input",{type:"checkbox",className:"form-checkbox h-7 w-7 text-teal-600",onChange:function(){return e.setCreatePermission(!e.state.createPermission)},checked:this.state.createPermission,disabled:this.state.loadindRequest})]}),Object(I.jsxs)("div",{className:"inline-flex gap-2 items-center",children:[Object(I.jsx)(b.Ab,{className:"w-7 h-7 text-gray-600"}),Object(I.jsxs)("div",{className:"flex flex-col",children:[Object(I.jsx)("h3",{className:"font-semibold text-xl",children:"View"}),Object(I.jsx)("span",{className:"text-gray-600 text-sm md:pr-4",children:"This permission gives the user the ability to view"})]}),Object(I.jsx)("input",{type:"checkbox",className:"form-checkbox h-7 w-7 text-teal-600",onChange:function(){return e.setViewPermission(!e.state.viewPermission)},checked:this.state.viewPermission,disabled:this.state.loadindRequest})]}),Object(I.jsxs)("div",{className:"inline-flex gap-2 items-center",children:[Object(I.jsx)(b.B,{className:"w-7 h-7 text-gray-600"}),Object(I.jsxs)("div",{className:"flex flex-col",children:[Object(I.jsx)("h3",{className:"font-semibold text-xl",children:"Update"}),Object(I.jsx)("span",{className:"text-gray-600 text-sm",children:"This permission gives the user the ability to update"})]}),Object(I.jsx)("input",{type:"checkbox",className:"form-checkbox h-7 w-7 text-teal-600",onChange:function(){return e.setUpdatePermission(!e.state.updatePermission)},checked:this.state.updatePermission,disabled:this.state.loadindRequest})]}),Object(I.jsxs)("div",{className:"inline-flex gap-2 items-center",children:[Object(I.jsx)(b.z,{className:"w-7 h-7 text-gray-600"}),Object(I.jsxs)("div",{className:"flex flex-col",children:[Object(I.jsx)("h3",{className:"font-semibold text-xl",children:"Delete"}),Object(I.jsx)("span",{className:"text-gray-600 text-sm md:pr-1",children:"This permission gives the user the ability to delete"})]}),Object(I.jsx)("input",{type:"checkbox",className:"form-checkbox h-7 w-7 text-teal-600",onChange:function(){return e.setDeletePermission(!e.state.deletePermission)},checked:this.state.deletePermission,disabled:this.state.loadindRequest})]}),Object(I.jsxs)("div",{className:"flex items-center justify-center w-full py-3 gap-2",children:[Object(I.jsx)("button",{className:"btn bg-gray-500 hover:bg-gray-700 focus:outline-none text-white",disabled:this.state.loadindRequest,onClick:function(){e.props.setCurrentAccess(null),e.setCreatePermission(!1),e.setViewPermission(!1),e.setUpdatePermission(!1),e.setDeletePermission(!1)},children:"Cancel"}),Object(I.jsx)("button",{className:"btn btn-blue",disabled:this.state.loadindRequest,children:this.state.loadindRequest?"Processing..":"Save Change"})]})]})})]}):Object(I.jsxs)("div",{className:"w-full hidden md:flex flex-col items-center text-gray-600 gap-1 py-3",children:[Object(I.jsx)(b.Jb,{className:"w-20 h-20"}),Object(I.jsx)("span",{className:"text-8 md:text-12",children:"Choose Access to Customize"})]})})]})})}}]),s}(p.Component),E=h.a.memo(Object(j.b)(null,{customizeUserAccess:v.c,PushPopupAlert:_.Kb})(T))},691:function(e,t,s){"use strict";s.r(t),s.d(t,"distinctDistrict",(function(){return S})),s.d(t,"distinctCenter",(function(){return w})),s.d(t,"distinctRoom",(function(){return A})),s.d(t,"Locations",(function(){return L}));var n=s(18),r=s(5),i=s.n(r),a=s(172),c=s(77),o=s(21),l=s(170),d=s(667),u=s(4),p=s.n(u),h=s(7),m=s(8),b=s.n(m),f=s(9),x=s(174),j=s(39),g=s(13),_=s(128),v=s(19),O=s(644),y=s(1),N=i.a.memo(Object(o.b)(null,{FC_CreateDistrict:l.b,FC_UpdateDistrict:l.m,FC_DeleteDistrict:l.g,PushPopupAlert:x.c})((function(e){var t=Object(r.useState)(""),s=Object(n.a)(t,2),i=s[0],a=s[1],c=Object(r.useState)(0),o=Object(n.a)(c,2),l=o[0],d=o[1],u=Object(r.useState)(null),m=Object(n.a)(u,2),x=m[0],N=m[1],C=function(){var t=Object(h.a)(p.a.mark((function t(){var s,n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!Object(O.e)(i)){t.next=2;break}return t.abrupt("return",N({element:"district_name",msg:"District name is required"}));case 2:if(!(l<=0)){t.next=4;break}return t.abrupt("return",N({element:"district_code",msg:"Invalid district code, code must be greater than 0"}));case 4:if(e.setLoadingRequest(!0),t.prev=5,"CREATE_DISTRICT"!==e.actionTypes){t.next=13;break}return t.next=9,b.a.post("".concat(f.a.APPLICATION,"/district"),{province_id:e.thisProvince._id,province_code:e.thisProvince.province_code,district_name:i,district_code:l,centers:[]});case 9:(s=t.sent).data&&(console.log({province_id:e.thisProvince._id,data:s.data.data,res:s}),e.FC_CreateDistrict({province_id:e.thisProvince._id,data:{centers:s.data.data.centers,sectors:s.data.data.sectors,province_code:s.data.data.province_code,province_id:s.data.data.province_id,district_code:s.data.data.district_code,district_name:s.data.data.district_name,district_id:s.data.data._id}}),e.PushPopupAlert({title:"New district created successfully",theme:j.a.success}),e.setLoadingRequest(!1),e.setActionTypes(null),a(""),d(0)),t.next=19;break;case 13:if(!e.thisDistrict||"UPDATE_DISTRICT"!==e.actionTypes){t.next=19;break}return n=e.thisDistrict.centers.map((function(e){return e._id})),t.next=17,b.a.patch("".concat(f.a.APPLICATION,"/district"),{district_id:e.thisDistrict._id,province_code:e.thisProvince.province_code,district_name:i,district_code:l,centers:n});case 17:(s=t.sent).data&&(e.FC_UpdateDistrict({province_id:e.thisProvince._id,district_id:e.thisDistrict._id,district_name:i}),e.PushPopupAlert({title:"District updated successfully",theme:j.a.success}),e.setLoadingRequest(!1),e.setActionTypes(null),a(""),e.setThisDistrict(null));case 19:t.next=26;break;case 21:t.prev=21,t.t0=t.catch(5),console.log({doc_category_error:t.t0}),e.PushPopupAlert({title:Object(g.a)(t.t0),theme:j.a.danger}),e.setLoadingRequest(!1);case 26:case"end":return t.stop()}}),t,null,[[5,21]])})));return function(){return t.apply(this,arguments)}}();return Object(y.jsxs)("div",{className:"w-full p-2",children:[e.thisProvince.districts.length>0?Object(y.jsx)("div",{className:"rounded border border-gray-100 shadow-sm animate__animated animate__fadeIn",children:Object(y.jsxs)("table",{className:"w-full z-0",children:[Object(y.jsx)("thead",{className:"bg-gray-50",children:Object(y.jsxs)("tr",{className:"text-left",children:[Object(y.jsx)("th",{className:"px-3 py-3",children:"#"}),Object(y.jsx)("th",{children:"District name"}),Object(y.jsx)("th",{children:"District code"}),Object(y.jsx)("th",{children:"Sectors"})]})}),Object(y.jsx)("tbody",{className:"text-base",children:e.thisProvince.districts.map((function(e,t){return Object(y.jsxs)("tr",{className:"text-left border-b border-gray-50",children:[Object(y.jsx)("td",{className:"px-3 py-1",children:t+1}),Object(y.jsx)("td",{children:e.district_name}),Object(y.jsx)("td",{children:e.district_code}),Object(y.jsx)("td",{children:e.sectors&&e.sectors.length>0?e.sectors.length+" Sector(s)":""})]},t+e._id)}))})]})}):Object(y.jsx)(_.b,{theme:_.a.Dark,value:"No district found!",component:Object(y.jsx)("div",{className:"w-full mt-2 flex flex-row items-center justify-center",children:Object(y.jsx)("ul",{className:"text-sm py-2 text-blue-600 font-bold flex flex-row gap-2",children:Object(y.jsx)("li",{onClick:function(){return e.setActionTypes("CREATE_DISTRICT")},className:"underline text-gray-500 cursor-pointer",children:"Add district"})})})}),e.actionTypes&&("CREATE_DISTRICT"===e.actionTypes||"UPDATE_DISTRICT"===e.actionTypes)&&Object(y.jsx)(v.c,{backDrop:!0,theme:v.b.default,close:function(){e.setActionTypes(null),a(""),d(10),N(null)},displayClose:!1,backDropClose:!1,title:Object(y.jsx)("div",{className:"flex items-center space-x-5",children:Object(y.jsx)("div",{className:"block pl-2 font-semibold text-xl self-start text-gray-700",children:Object(y.jsx)("h2",{className:"uppercase text-back",children:"CREATE_DISTRICT"===e.actionTypes?"CREATING NEW DISTRICT":"UPDATE_DISTRICT"===e.actionTypes&&"UPDATING EXISTING DISTRICT"})})}),widthSizeClass:v.a.medium,padding:{title:!0,body:!1,footer:!1},children:Object(y.jsxs)("div",{className:"mx-5 mb-4",children:[Object(y.jsxs)("div",{className:"py-2 text-base leading-6 space-y-4 text-gray-700 sm:text-lg sm:leading-7",children:[Object(y.jsxs)("div",{className:"flex flex-col",children:[Object(y.jsx)("label",{children:"District name"}),Object(y.jsx)("input",{type:"text",className:"bg-white py-1 px-2 border-2 ".concat(x&&"district_name"===x.element?"border-red-700":"border-gray-700"," rounded focus:outline-none focus:bg-gray-100"),onChange:function(e){x&&"district_name"===x.element&&N(null),a(e.target.value)},value:i,disabled:e.loadingRequest}),x&&"district_name"===x.element&&Object(y.jsx)("span",{className:"text-red-700",children:x.msg})]}),Object(y.jsxs)("div",{className:"flex flex-col",children:[Object(y.jsx)("label",{children:"District code"}),Object(y.jsx)("input",{type:"number",className:"bg-white py-1 px-2 border-2 ".concat(x&&"district_code"===x.element?"border-red-700":"border-gray-700"," rounded focus:outline-none focus:bg-gray-100"),onChange:function(e){x&&"district_code"===x.element&&N(null),d(Number(e.target.value))},value:l,disabled:e.loadingRequest}),x&&"district_code"===x.element&&Object(y.jsx)("span",{className:"text-red-700",children:x.msg})]})]}),Object(y.jsxs)("div",{className:"pt-4 flex justify-between",children:[Object(y.jsx)("button",{onClick:function(){e.setActionTypes(null),a(""),d(10),N(null)},className:"btn bg-gray-400 text-white hover:bg-gray-600",type:"button",disabled:e.loadingRequest,children:"Exit"}),Object(y.jsx)("button",{className:"btn bg-primary text-white hover:bg-blue-600",type:"button",onClick:function(){return C()},disabled:e.loadingRequest,children:e.loadingRequest?"Loading...":"Save"})]})]})})]})}))),C=s(48),I=i.a.memo(Object(o.b)(null,{FC_CreateProvince:l.c,FC_UpdateProvince:l.n,FC_DeleteProvince:l.h,PushPopupAlert:x.c})((function(e){var t=Object(r.useState)(""),s=Object(n.a)(t,2),i=s[0],a=s[1],c=Object(r.useState)(0),o=Object(n.a)(c,2),l=o[0],d=o[1],u=Object(r.useState)(null),m=Object(n.a)(u,2),x=m[0],N=m[1],I=function(){var t=Object(h.a)(p.a.mark((function t(){var s,n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!Object(O.e)(i)){t.next=2;break}return t.abrupt("return",N({element:"province_title",msg:"Title of Province is required"}));case 2:if(!(l<=0)){t.next=4;break}return t.abrupt("return",N({element:"province_code",msg:"Code of Province is required"}));case 4:if(e.setLoadingRequest(!0),t.prev=5,"CREATE_PROVINCE"!==e.actionTypes){t.next=13;break}return t.next=9,b.a.post("".concat(f.a.APPLICATION,"/province"),{province_name:i,province_code:l,districts:[]});case 9:(s=t.sent).data&&(e.FC_CreateProvince(s.data.data),e.PushPopupAlert({title:"New Province created successfully",theme:j.a.success}),e.setLoadingRequest(!1),e.setActionTypes(null),a("")),t.next=19;break;case 13:if(!e.thisProvince||"UPDATE_PROVINCE"!==e.actionTypes){t.next=19;break}return n=e.thisProvince.districts.map((function(e){return e._id})),t.next=17,b.a.patch("".concat(f.a.APPLICATION,"/province"),{province_id:e.thisProvince._id,province_name:i,province_code:l,districts:n});case 17:(s=t.sent).data&&(console.log({res:s.data.updated}),e.FC_UpdateProvince(s.data.updated),e.PushPopupAlert({title:"Province updated successfully",theme:j.a.success}),e.setLoadingRequest(!1),e.setActionTypes(null),a(""),e.setThisProvince(null));case 19:t.next=26;break;case 21:t.prev=21,t.t0=t.catch(5),console.error({province_error:t.t0}),e.PushPopupAlert({title:Object(g.a)(t.t0),theme:j.a.danger}),e.setLoadingRequest(!1);case 26:case"end":return t.stop()}}),t,null,[[5,21]])})));return function(){return t.apply(this,arguments)}}();return Object(y.jsxs)("div",{className:"w-full p-2",children:[e.locations.length>0?e.locations.map((function(t,s){return Object(y.jsxs)("div",{className:"flex justify-between items-center p-2 mb-3 rounded border border-gray-100 shadow",children:[Object(y.jsx)("div",{className:"flex items-center",children:Object(y.jsxs)("div",{className:"ml-2",children:[Object(y.jsx)("div",{className:"text-xl font-semibold text-gray-600",children:t.province_name}),Object(y.jsx)("div",{className:"text-sm font-light text-gray-500",children:t.districts.length>0?t.districts.length+"District(s)":null})]})}),Object(y.jsx)("div",{className:"flex items-center gap-2",children:Object(y.jsx)("button",{title:e.thisProvince&&e.thisProvince._id===t._id&&"UPDATE_PROVINCE"!==e.actionTypes?"Close Districts":"View Districts",className:"".concat(e.thisProvince&&e.thisProvince._id===t._id&&"UPDATE_PROVINCE"!==e.actionTypes?"bg-gray-500 hover:bg-gray-600":"bg-gray-400 hover:bg-gray-500"," p-2 rounded-full shadow-md flex justify-center items-center focus:outline-none"),onClick:function(){e.thisProvince&&e.thisProvince._id===t._id?e.setThisProvince(null):e.setThisProvince(t),a(""),e.setActionTypes(null)},children:e.thisProvince&&e.thisProvince._id===t._id&&"UPDATE_PROVINCE"!==e.actionTypes?Object(y.jsx)(C.l,{className:"text-white w-4 h-4"}):Object(y.jsx)(C.k,{className:"text-white w-4 h-4"})})})]},s+t._id)})):Object(y.jsx)(_.b,{theme:_.a.Dark,value:"No province found!",component:Object(y.jsx)("div",{className:"w-full mt-2 flex flex-row items-center justify-center",children:Object(y.jsx)("ul",{className:"text-sm py-2 text-blue-600 font-bold flex flex-row gap-2",children:Object(y.jsx)("li",{onClick:function(){return e.setActionTypes("CREATE_PROVINCE")},className:"underline text-gray-500 cursor-pointer",children:"Add province"})})})}),e.actionTypes&&("CREATE_PROVINCE"===e.actionTypes||"UPDATE_PROVINCE"===e.actionTypes)&&Object(y.jsx)(v.c,{backDrop:!0,theme:v.b.default,close:function(){e.setActionTypes(null),a(""),d(0),N(null)},displayClose:!1,backDropClose:!1,title:Object(y.jsx)("div",{className:"flex items-center space-x-5",children:Object(y.jsx)("div",{className:"block pl-2 font-semibold text-xl self-start text-gray-700",children:Object(y.jsx)("h2",{className:"uppercase text-back",children:"CREATE_PROVINCE"===e.actionTypes?"CREATING NEW PROVINCE":"UPDATE_PROVINCE"===e.actionTypes&&"UPDATING EXISTING PROVINCE"})})}),widthSizeClass:v.a.medium,padding:{title:!0,body:!1,footer:!1},children:Object(y.jsxs)("div",{className:"mx-5 mb-4",children:[Object(y.jsxs)("div",{className:"py-2 text-base leading-6 space-y-4 text-gray-700 sm:text-lg sm:leading-7",children:[Object(y.jsxs)("div",{className:"flex flex-col",children:[Object(y.jsx)("label",{children:"Province name"}),Object(y.jsx)("input",{type:"text",className:"bg-white py-1 px-2 border-2 ".concat(x&&"province_title"===x.element?"border-red-700":"border-gray-700"," rounded focus:outline-none focus:bg-gray-100"),onChange:function(e){x&&"province_title"===x.element&&N(null),a(e.target.value)},value:i,disabled:e.loadingRequest}),x&&"province_title"===x.element&&Object(y.jsx)("span",{className:"text-red-700",children:x.msg})]}),Object(y.jsxs)("div",{className:"flex flex-col",children:[Object(y.jsx)("label",{children:"Province code"}),Object(y.jsx)("input",{type:"number",className:"bg-white py-1 px-2 border-2 ".concat(x&&"province_code"===x.element?"border-red-700":"border-gray-700"," rounded focus:outline-none focus:bg-gray-100"),onChange:function(e){x&&"province_code"===x.element&&N(null),d(Number(e.target.value))},value:l,disabled:e.loadingRequest}),x&&"province_code"===x.element&&Object(y.jsx)("span",{className:"text-red-700",children:x.msg})]})]}),Object(y.jsxs)("div",{className:"pt-4 flex justify-between",children:[Object(y.jsx)("button",{onClick:function(){e.setActionTypes(null),a(""),d(0),N(null)},className:"btn bg-gray-400 text-white hover:bg-gray-600",type:"button",disabled:e.loadingRequest,children:"Exit"}),Object(y.jsx)("button",{className:"btn bg-primary text-white hover:bg-blue-600",type:"button",onClick:function(){return I()},disabled:e.loadingRequest,children:e.loadingRequest?"Loading...":"Save"})]})]})})]})}))),T=s(10),E=i.a.memo(Object(o.b)(null,{FC_CreateSector:l.e,FC_UpdateSector:l.p,FC_DeleteSector:l.j,PushPopupAlert:x.c})((function(e){var t=Object(r.useState)(""),s=Object(n.a)(t,2),i=s[0],a=s[1],c=Object(r.useState)(0),o=Object(n.a)(c,2),l=o[0],d=o[1],u=Object(r.useState)(null),m=Object(n.a)(u,2),x=m[0],N=m[1],C=function(){var t=Object(h.a)(p.a.mark((function t(){var s;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!Object(O.e)(i)){t.next=2;break}return t.abrupt("return",N({element:"sector_name",msg:"Sector name is required"}));case 2:if(!(l<=0)){t.next=4;break}return t.abrupt("return",N({element:"sector_code",msg:"Invalid sector code, must be "}));case 4:if(e.setLoadingRequest(!0),t.prev=5,"CREATE_SECTOR"!==e.actionTypes){t.next=13;break}return t.next=9,b.a.post("".concat(f.a.APPLICATION,"/sector"),{district_id:e.thisDistrict._id,district_code:e.thisDistrict.district_code,sector_name:i,sector_code:l});case 9:(s=t.sent).data&&(console.log({district_id:e.thisDistrict._id,data:s.data.data,res:s}),e.FC_CreateSector({province_id:e.thisDistrict.province_id,district_id:e.thisDistrict._id,data:{district_id:s.data.data.district_id,district_code:s.data.data.district_code,sector_name:s.data.data.sector_name,sector_code:s.data.data.sector_code,sector_id:s.data.data.sector_id}}),e.PushPopupAlert({title:"New sector created successfully",theme:j.a.success}),e.setLoadingRequest(!1),e.setActionTypes(null),a("")),t.next=18;break;case 13:if(!e.thisSector||"UPDATE_SECTOR"!==e.actionTypes){t.next=18;break}return t.next=16,b.a.patch("".concat(f.a.APPLICATION,"/sector"),{district_id:e.thisSector.district_id,district_code:e.thisDistrict.district_code,sector_id:e.thisSector.sector_id,sector_name:i,sector_code:l});case 16:(s=t.sent).data&&(e.FC_UpdateSector({province_id:e.thisDistrict.province_id,district_id:e.thisSector.district_id,sector_id:e.thisSector.sector_id,sector_name:i,sector_code:l}),e.PushPopupAlert({title:"Sector updated successfully",theme:j.a.success}),e.setLoadingRequest(!1),e.setActionTypes(null),a(""),e.setThisSector(null));case 18:t.next=25;break;case 20:t.prev=20,t.t0=t.catch(5),console.log({sector_error:t.t0}),e.PushPopupAlert({title:Object(g.a)(t.t0),theme:j.a.danger}),e.setLoadingRequest(!1);case 25:case"end":return t.stop()}}),t,null,[[5,20]])})));return function(){return t.apply(this,arguments)}}(),I=function(){var t=Object(h.a)(p.a.mark((function t(s){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,b.a.delete("".concat(f.a.APPLICATION,"/sector/").concat(s));case 3:t.sent.data&&(e.FC_DeleteSector({province_id:e.thisDistrict.province_id,district_id:e.thisDistrict._id,sector_id:s}),e.PushPopupAlert({title:"Sector deleted successfully",theme:j.a.success}),e.setLoadingRequest(!1),e.setActionTypes(null)),t.next=12;break;case 7:t.prev=7,t.t0=t.catch(0),console.log({district_error:t.t0}),e.PushPopupAlert({title:Object(g.a)(t.t0),theme:j.a.danger}),e.setLoadingRequest(!1);case 12:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}();return Object(y.jsxs)("div",{className:"w-full p-2",children:[e.thisDistrict.sectors&&e.thisDistrict.sectors.length>0?Object(y.jsx)("div",{className:"rounded border border-gray-100 shadow-sm animate__animated animate__fadeIn",children:Object(y.jsxs)("table",{className:"w-full z-0",children:[Object(y.jsx)("thead",{className:"bg-gray-50",children:Object(y.jsxs)("tr",{className:"text-left",children:[Object(y.jsx)("th",{className:"px-3 py-3",children:"#"}),Object(y.jsx)("th",{children:"Sector name"}),Object(y.jsx)("th",{children:"Sector code"}),Object(y.jsx)("th",{children:"Status"})]})}),Object(y.jsx)("tbody",{className:"text-sm",children:e.thisDistrict.sectors.map((function(t,s){return Object(y.jsxs)("tr",{className:"text-left border-b border-gray-50",children:[Object(y.jsx)("td",{className:"px-3 py-1",children:s+1}),Object(y.jsx)("td",{children:t.sector_name}),Object(y.jsx)("td",{children:t.sector_name}),Object(y.jsx)("td",{children:Object(y.jsxs)("div",{className:"flex items-center gap-2",children:[Object(y.jsx)("button",{title:"Update sector",className:"bg-blue-500 hover:bg-blue-600 p-2 rounded-full shadow-md flex justify-center items-center focus:outline-none",onClick:function(){e.setThisSector(t),a(t.sector_name),d(t.sector_code),e.setActionTypes("UPDATE_SECTOR")},disabled:e.loadingRequest||null!==e.actionTypes,children:Object(y.jsx)(T.x,{className:"text-white w-4 h-4"})}),Object(y.jsx)("button",{title:"Delete sector",className:"bg-red-500 hover:bg-red-600 p-2 rounded-full shadow-md flex justify-center items-center focus:outline-none",onClick:function(){return I(t.sector_id)},disabled:e.loadingRequest,children:Object(y.jsx)(T.u,{className:"text-white w-4 h-4"})})]})})]},s+t.district_id)}))})]})}):Object(y.jsx)(_.b,{theme:_.a.Dark,value:"No sector found!",component:Object(y.jsx)("div",{className:"w-full mt-2 flex flex-row items-center justify-center",children:Object(y.jsx)("ul",{className:"text-sm py-2 text-blue-600 font-bold flex flex-row gap-2",children:Object(y.jsx)("li",{onClick:function(){return e.setActionTypes("CREATE_SECTOR")},className:"underline text-gray-500 cursor-pointer",children:"Add sector"})})})}),e.actionTypes&&("CREATE_SECTOR"===e.actionTypes||"UPDATE_SECTOR"===e.actionTypes)&&Object(y.jsx)(v.c,{backDrop:!0,theme:v.b.default,close:function(){e.setActionTypes(null),a(""),d(0),N(null)},displayClose:!1,backDropClose:!1,title:Object(y.jsx)("div",{className:"flex items-center space-x-5",children:Object(y.jsx)("div",{className:"block pl-2 font-semibold text-xl self-start text-gray-700",children:Object(y.jsx)("h2",{className:"uppercase text-back",children:"CREATE_SECTOR"===e.actionTypes?"CREATING NEW SECTOR":"UPDATE_SECTOR"===e.actionTypes&&"UPDATING EXISTING SECTOR"})})}),widthSizeClass:v.a.medium,padding:{title:!0,body:!1,footer:!1},children:Object(y.jsxs)("div",{className:"w-full px-5 mb-5",children:[Object(y.jsxs)("div",{className:"py-3 text-base leading-6 space-y-4 text-gray-700 sm:text-lg sm:leading-7",children:[Object(y.jsxs)("div",{className:"flex flex-col",children:[Object(y.jsx)("label",{children:"Sector name"}),Object(y.jsx)("input",{type:"text",className:"bg-white py-1 px-2 border-2 ".concat(x&&"sector_name"===x.element?"border-red-700":"border-gray-700"," rounded focus:outline-none focus:bg-gray-100"),onChange:function(e){x&&"sector_name"===x.element&&N(null),a(e.target.value)},value:i,disabled:e.loadingRequest}),x&&"sector_name"===x.element&&Object(y.jsx)("span",{className:"text-red-700",children:x.msg})]}),Object(y.jsxs)("div",{className:"flex flex-col",children:[Object(y.jsx)("label",{children:"Sector code"}),Object(y.jsx)("input",{type:"number",className:"bg-white py-1 px-2 border-2 ".concat(x&&"sector_code"===x.element?"border-red-700":"border-gray-700"," rounded focus:outline-none focus:bg-gray-100"),onChange:function(e){x&&"sector_code"===x.element&&N(null),d(Number(e.target.value))},value:l,disabled:e.loadingRequest}),x&&"sector_code"===x.element&&Object(y.jsx)("span",{className:"text-red-700",children:x.msg})]})]}),Object(y.jsxs)("div",{className:"pt-4 flex justify-between",children:[Object(y.jsx)("button",{onClick:function(){e.setActionTypes(null),a(""),d(0),N(null)},className:"btn bg-gray-400 text-white hover:bg-gray-600",type:"button",disabled:e.loadingRequest,children:"Exit"}),Object(y.jsx)("button",{className:"btn bg-primary text-white hover:bg-blue-600",type:"button",onClick:function(){return C()},disabled:e.loadingRequest,children:e.loadingRequest?"Loading...":"Save"})]})]})})]})}))),S=function(e,t){var s=[],n=[];return Object(d.a)(e).forEach((function(e){s.includes(e.district_id)||(t&&e.province_id===t||void 0===t)&&(s.push(e.district_id),n.push(e))})),n},w=function(e,t){var s=[],n=[];return Object(d.a)(e).forEach((function(e){s.includes(e.center_id)||e.district_id!==t||(s.push(e.center_id),n.push(e))})),n},A=function(e,t){var s=[],n=[];return Object(d.a)(e).forEach((function(e){s.includes(e.room_id)||e.center_id!==t||(s.push(e.room_id),n.push(e))})),n},L=i.a.memo(Object(o.b)((function(e){return{locations:e.locations.roomLocation}}),{getAllRoom:l.q})((function(e){var t=Object(r.useState)(null),s=Object(n.a)(t,2),i=s[0],o=s[1],l=Object(r.useState)(null),d=Object(n.a)(l,2),u=d[0],p=d[1],h=Object(r.useState)(null),m=Object(n.a)(h,2),b=m[0],f=m[1],x=Object(r.useState)(null),j=Object(n.a)(x,2),g=j[0],_=j[1],v=Object(r.useState)(!0),O=Object(n.a)(v,2),C=O[0],T=O[1],S=Object(r.useState)(!1),w=Object(n.a)(S,2),A=w[0],L=w[1];if(Object(r.useEffect)((function(){!e.locations.length&&C?e.getAllRoom((function(e,t){T(e),!e&&t.length>0&&console.log(t)})):C&&T(!1)}),[C,e]),!0===C)return Object(y.jsx)("div",{className:"text-center mt-7 font-bold text-4xl text-gray-400 animate-pulse",children:"Loading locations..."});return Object(y.jsx)(r.Fragment,{children:Object(y.jsxs)("div",{className:"w-full my-5",children:[Object(y.jsx)("div",{className:"flex justify-between p-2 gap-1",children:Object(y.jsxs)("div",{className:"flex flex-col",children:[Object(y.jsx)("span",{className:"text-blue-600 text-2xl md:text-2xl lg:text-3xl font-bold",children:"Locations Management"}),Object(y.jsxs)("div",{className:"flex flex-row items-center md:gap-3 gap-2 mt-1",children:[Object(y.jsx)(a.f,{className:"text-xl"}),Object(y.jsxs)("div",{className:"flex flex-row items-center gap-1",children:[u&&Object(y.jsx)("span",{className:"text-gray-700 text-base font-bold",children:u.province_name}),b&&Object(y.jsxs)("div",{className:"flex flex-row items-center gap-1",children:[Object(y.jsx)(c.d,{}),Object(y.jsxs)("span",{className:"text-blue-600 text-base font-bold underline",children:[b.district_name," district"]})]})]})]})]})}),Object(y.jsxs)("div",{className:"w-full bg-white",children:[Object(y.jsx)("div",{className:"border-b px-2 py-3 flex justify-between",children:g&&(!g||"CREATE_SECTOR"!==i&&"UPDATE_SECTOR"!==i)||!b||"CREATE_DISTRICT"===i||"UPDATE_DISTRICT"===i?b&&(!b||"CREATE_DISTRICT"!==i&&"UPDATE_DISTRICT"!==i)||!u?Object(y.jsxs)("div",{className:"flex items-center gap-1",children:[Object(y.jsx)("span",{className:"uppercase text-xl font-semibold text-gray-800",children:"province"}),Object(y.jsx)("span",{children:"/"})]}):Object(y.jsxs)("div",{className:"flex items-center gap-2",children:[Object(y.jsx)("span",{className:"cursor-pointer uppercase text-xl font-semibold text-gray-800",onClick:function(){p(null)},children:"province"}),Object(y.jsx)("span",{children:"/"}),Object(y.jsx)("span",{className:"text-xl text-gray-800",children:u.province_name})]}):Object(y.jsxs)("div",{className:"flex items-center gap-1",children:[Object(y.jsx)("span",{className:"cursor-pointer uppercase text-xl font-semibold text-gray-800",onClick:function(){p(null)},children:"province"}),Object(y.jsx)("span",{children:"/"}),Object(y.jsx)("span",{className:"cursor-pointer uppercase text-xl font-semibold text-gray-800",onClick:function(){f(null)},children:"district"}),Object(y.jsx)("span",{children:"/"}),Object(y.jsx)("span",{className:"text-xl text-gray-800",children:b.district_name})]})}),(!u||u&&("CREATE_PROVINCE"===i||"UPDATE_PROVINCE"===i))&&Object(y.jsx)(I,{thisProvince:u,thisDistrict:b,loadingRequest:A,locations:e.locations,actionTypes:i,setLoadingRequest:L,setThisProvince:p,setActionTypes:o}),(!b||b&&("CREATE_DISTRICT"===i||"UPDATE_DISTRICT"===i))&&u&&Object(y.jsx)(N,{thisDistrict:b,loadingRequest:A,actionTypes:i,setLoadingRequest:L,setActionTypes:o,thisProvince:u,setThisDistrict:f}),(!g||g&&("CREATE_SECTOR"===i||"UPDATE_SECTOR"===i))&&b&&"CREATE_DISTRICT"!==i&&"UPDATE_DISTRICT"!==i&&Object(y.jsx)(E,{thisDistrict:b,thisSector:g,loadingRequest:A,actionTypes:i,setLoadingRequest:L,setThisSector:_,setActionTypes:o})]})]})})})))},695:function(e,t,s){"use strict";var n=s(18),r=s(5),i=s(654),a=s(1),c=function(e){var t=Object(r.useState)(!1),s=Object(n.a)(t,2),c=s[0],o=s[1];return Object(a.jsxs)("div",{className:"flex flex-col",children:[Object(a.jsxs)("div",{onClick:function(){o(!c),function(e,t){(null!==t.searchLevel&&null===t.searchLevel.schoolLevel||null!==t.searchLevel&&t.educationCategoryDetails.education_institute_id!==t.searchLevel.educationCategory.education_institute_id||null===t.setSearchLevel)&&(!1===e&&t.setSearchLevel(null,null),!1===e&&t.setSearchLevel(t.educationCategoryDetails,null))}(c,e)},className:"flex flex-row justify-between items-center py-2 px-2 bg-blue-100 rounded cursor-pointer hover:bg-blue-200 mb-2",children:[Object(a.jsxs)("div",{className:"flex flex-col pl-1",children:[Object(a.jsx)("span",{className:"uppercase text-blue-600 text-lg font-bold",children:e.educationCategoryDetails.education_category_title}),Object(a.jsx)("span",{className:"text-xs",children:e.educationCategoryDetails.description})]}),Object(a.jsx)("div",{className:"px-1 py-1 rounded-full flex items-center justify-center cursor-pointer text-blue-600 bg-blue-100 hover:bg-white hover:text-blue-800",children:!1===c?Object(a.jsx)(i.c,{className:"text-2xl"}):Object(a.jsx)(i.b,{className:"text-2xl"})})]}),!0===c&&Object(a.jsxs)("div",{className:"flex flex-col",children:[Object(a.jsx)("div",{onClick:function(){return function(e,t){t.setSearchLevel(null,null),t.setSearchLevel(t.educationCategoryDetails,null)}(0,e)},className:"flex flex-row justify-between items-center py-2 px-2 bg-blue-50 rounded cursor-pointer hover:bg-blue-50 mb-2 ml-5 border ".concat(null!==e.searchLevel&&null!==e.searchLevel.educationCategory&&e.searchLevel.educationCategory.education_institute_id===e.educationCategoryDetails.education_institute_id&&null===e.searchLevel.schoolLevel?"border-blue-500":"border-blue-100"," hover:border-blue-500"),children:Object(a.jsx)("div",{className:"flex flex-col pl-1",children:Object(a.jsx)("span",{className:"text-blue-700 text-sm font-bold",children:"All levels"})})}),null===e.schoolLevels?"Loading...":0===e.schoolLevels.length?"No levels found":e.schoolLevels.map((function(t,s){return t.education_institute.find((function(t){return t===e.educationCategoryDetails.education_institute_id}))&&Object(a.jsx)("div",{onClick:function(){return function(t,s){e.setSearchLevel(null,null),e.setSearchLevel(t,s)}(e.educationCategoryDetails,t)},className:"flex flex-row justify-between items-center py-2 px-2 bg-blue-50 rounded cursor-pointer hover:bg-blue-50 mb-2 ml-5 border ".concat(null!==e.searchLevel&&null!==e.searchLevel.schoolLevel&&e.searchLevel.schoolLevel===t&&null!==e.searchLevel.educationCategory&&e.searchLevel.educationCategory.education_institute_id===e.educationCategoryDetails.education_institute_id?"border-blue-500":"border-blue-100"," hover:border-blue-500"),children:Object(a.jsx)("div",{className:"flex flex-col pl-1",children:Object(a.jsx)("span",{className:"text-blue-700 text-sm font-bold",children:t.school_level_name})})},s+1)}))]})]})},o=s(33);t.a=function(e){return Object(a.jsx)("div",{className:"col-span-12 md:col-span-4 md:static w-full top-2",children:Object(a.jsxs)("div",{className:"bg-white shadow rounded-sm px-2 py-2",children:[console.log(e.educationCategories),null===e.educationCategories?Object(a.jsx)(o.a,{}):0===e.educationCategories.length?"No Education categories available":e.educationCategories.map((function(t,s){return Object(a.jsx)(c,{educationCategoryDetails:t,schoolLevels:e.schoolLevels,searchLevel:e.searchLevel,setSearchLevel:e.setSearchLevel},s+1)}))]})})}},697:function(e,t,s){"use strict";var n=s(5),r=s.n(n),i=s(682),a=s.n(i),c=s(1),o=function(e){return Object(c.jsx)("div",{className:"donut",children:Object(c.jsx)(a.a,{options:e.options,series:e.series,type:"donut",width:"".concat(e.width?e.width:"380")})})};t.a=r.a.memo(o)},708:function(e,t,s){"use strict";var n=s(5),r=s.n(n),i=s(63),a=s(644),c=s(1),o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{title:"",icon:i.q,iconColor:"indigo",count:0,countOver:void 0},t=e.icon;return Object(c.jsxs)("div",{className:"flex items-center px-6 py-4 bg-white w-full rounded-md space-x-2 mb-2 lg:mb-0 shadow-md",children:[Object(c.jsx)("div",{className:"p-3 rounded-full bg-".concat(e.iconColor,"-200 bg-opacity-75"),children:Object(c.jsx)(t,{className:"h-8 w-8 text-".concat(e.iconColor,"-600")})}),Object(c.jsxs)("div",{children:[Object(c.jsxs)("h1",{className:"text-3xl font-semibold text-gray-700",children:[Object(a.f)(e.count)," ",e.countOver&&"/ "+Object(a.f)(e.countOver)]}),Object(c.jsx)("span",{className:"text-gray-500 text-lg",children:e.title})]})]})};t.a=r.a.memo(o)}}]);
//# sourceMappingURL=26.34541e53.chunk.js.map