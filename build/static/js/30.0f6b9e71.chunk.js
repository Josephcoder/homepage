(this["webpackJsonpreact-redux-typescript-advance"]=this["webpackJsonpreact-redux-typescript-advance"]||[]).push([[30,5,10,38],{178:function(e,t,s){"use strict";s.d(t,"c",(function(){return c})),s.d(t,"a",(function(){return a})),s.d(t,"b",(function(){return r}));var c,a,r,n=s(9),i=s(1);!function(e){e.default="default",e.primary="primary",e.secondary="secondary",e.danger="danger",e.success="success",e.warning="warning"}(c||(c={})),function(e){e.none="top-0",e.small="top-28",e.medium="top-1/3",e.large="top-1/2",e.extra="top-2/3"}(a||(a={})),function(e){e.small="max-w-sm",e.medium="max-w-screen-sm",e.large="max-w-screen-md",e.extraLarge="max-w-screen-lg",e.maxWidth="max-w-screen h-full"}(r||(r={}));t.d=function(e){var t,s=e.title,l=e.backDrop,o=e.theme,d=e.close,u=e.backDropClose,b=e.widthSizeClass,m=e.displayClose,x=e.padding,j=void 0===x?{title:!0,body:!0,footer:!0}:x;switch(o){case c.primary:t="blue-500";break;case c.secondary:t="gray-300";break;case c.danger:t="red-500";break;case c.success:t="green-500";break;case c.warning:t="yellow-500";break;default:t="white"}return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("div",{onClick:function(){return u&&d()},className:"animate__animated animate__fadeIn animate__faster modal fixed bg-black bg-opacity-".concat(!0===l?"60":"0")}),Object(i.jsxs)("div",{className:"fixed items-center justify-items-center ".concat(void 0===e.marginTop?a.none:e.marginTop," left-0 right-0 bottom-0 bg-white rounded shadow-xl self-center ").concat(b," animate__animated ").concat(void 0!==e.marginTop&&e.marginTop!==a.none?"animate__fadeInUp":"animate__zoomIn"," animate__faster"),style:{width:"100%",maxHeight:"99vh",height:"".concat(b===r.maxWidth?void 0===e.marginTop?"100%":"unset":"fit-content"),overflowY:"auto",margin:"auto",zIndex:99999999},children:[Object(i.jsxs)("div",{className:"flex justify-between bg-".concat(t," ").concat(!0===j.title?"py-4 px-4":""," rounded-t text-").concat(o===c.default||o===c.secondary?"black":"white"),children:[s&&""!==s?Object(i.jsx)("h4",{className:"text-lg font-bold ",children:s}):Object(i.jsx)("div",{}),!1===m?"":Object(i.jsx)("div",{className:"hover:text-red-600 hover:bg-red-100 rounded-full p-1 h-8 w-8",children:Object(i.jsx)(n.x,{className:"cursor-pointer font-extrabold text-2xl",onClick:function(){return d()}})})]}),Object(i.jsx)("div",{className:"space-x-3 ".concat(!0===j.body?"py-4 px-4":""),children:Object(i.jsx)("div",{children:""!==e.children?e.children:""})}),void 0!==e.footer&&""!==e.footer?Object(i.jsx)("div",{className:"flex float-right ".concat(!0===j.footer?"py-4 px-4":""),children:e.footer}):""]})]})}},180:function(e,t,s){"use strict";s.d(t,"b",(function(){return c})),s.d(t,"e",(function(){return a})),s.d(t,"c",(function(){return r})),s.d(t,"g",(function(){return n})),s.d(t,"f",(function(){return i})),s.d(t,"a",(function(){return l})),s.d(t,"d",(function(){return o}));var c=[{school_id:"32762426329",school_title:"G.S. De Gitega",district_id:"234242",number_of_females:10,number_of_males:12},{school_id:"32762426329",school_title:"G.S. De Gitega",district_id:"7322342684"},{school_id:"32762426329",school_title:"Rucee De Kigali",district_id:"234242",number_of_females:10,number_of_males:12},{school_id:"32762426329",school_title:"G.S. De Gitega",district_id:"73232432684",number_of_females:10,number_of_males:12}],a=function(e){return null===e||null!==e.match(/^ *$/)},r=function(e,t){return e.filter((function(e){return e.system_user_role_id===t}))[0]},n=function(e){var t=e-Math.floor(e);return("0"+(e-=t)).slice(-2)+t.toString().substr(1)},i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,s=new Array(t+1).join("0");return(s+e).slice(-t)},l=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},o=function(e){var t=new Date(e),s=new Date;return t.getTime()<s.getTime()}},181:function(e,t,s){"use strict";var c=s(25),a=s(4),r=s(182),n=s(9),i=s(1);t.a=function(e){var t,s,l=e.rows,o=e.columns,d=e.hideColumns,u=void 0!==d&&d,b=e.pagination,m=void 0!==b&&b,x=e.search,j=void 0!==x&&x,f=e.tableSize,h=void 0===f?"w-full":f,p=e.tableClass,g=e.tableId,O=void 0===g?"myTable":g,v=e.rounded,_=void 0!==v&&v,y=e.searchBG,N=void 0===y?"bg-gray-200":y,w=e.thColor,k=void 0===w?"blue":w,S=e.loading,T=void 0!==S&&S;O="myTable"===O?function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t="",s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",c=s.length,a=0;a<e;a++)t+=s.charAt(Math.floor(Math.random()*c));return t}():O;var C=Object(a.useState)(0),U=Object(c.a)(C,2),A=U[0],E=U[1],L=Object(a.useState)(1),R=Object(c.a)(L,2),B=R[0],I=R[1],D=Object(a.useState)(1),q=Object(c.a)(D,2),M=q[0],z=q[1],F=Object(a.useState)(),Y=Object(c.a)(F,2),P=Y[0],H=Y[1],G=Object(a.useState)(10),V=Object(c.a)(G,2),W=V[0],K=V[1],J=Object(a.useState)(0),X=Object(c.a)(J,2),Z=X[0],Q=X[1],$=Object(a.useState)(0),ee=Object(c.a)($,2),te=ee[0],se=ee[1];Object(a.useEffect)((function(){m&&ce()}));var ce=function(){t=document.getElementById(O),s=t.getElementsByTagName("tr"),E(s.length),I(Math.ceil(A/W)),Q((M-1)*W),se(Math.min(Z+W-1,A-1));var e=Array.from(Array(B+1-1).keys()).map((function(e){return 1+e}));P&&e.length===P.length||H(e);for(var c=0;c<s.length;c++)s[c].style.display=c>=Z&&c<=te?"":"none"};return Object(i.jsxs)("div",{className:"".concat(h),children:[j&&Object(i.jsx)("div",{className:"".concat(N," w-full mb-2"),children:j&&Object(i.jsxs)("div",{className:"bg-white rounded flex items-center w-full p-2 border-2 border-gray-500",children:[Object(i.jsx)(n.zb,{className:"h-5 w-5 fill-current text-gray-400"}),Object(i.jsx)("input",{type:"search",placeholder:"search",onChange:function(e){return function(e,s){var c,a,r,n,i;for("field"===s&&"all"===e&&(e=""),c=e.toLowerCase(),a=(t=document.getElementById(O)).getElementsByTagName("tr"),n=0;n<a.length;n++)for(i=0;i<o.length;i++)if(r=a[n].getElementsByTagName("td")[i]){if((r.textContent||r.innerText).toLowerCase().indexOf(c)>-1){a[n].style.display="";break}a[n].style.display="none"}}(e.target.value)},className:"w-full h-6 pl-4 text-sm outline-none focus:outline-none bg-transparent",disabled:T}),m&&Object(i.jsx)("div",{className:"select",children:Object(i.jsxs)("select",{className:"text-base outline-none focus:outline-none bg-transparent",onChange:function(e){return K(Number(e.target.value))},disabled:T,children:[Object(i.jsx)("option",{value:"10",children:"10"}),Object(i.jsx)("option",{value:"25",children:"25"}),Object(i.jsx)("option",{value:"50",children:"50"}),Object(i.jsx)("option",{value:"100",children:"100"})]})})]})}),Object(i.jsxs)("table",{className:p||"w-full shadow ".concat(_&&"sm:rounded-lg"," table-auto order-table max-w-full"),id:O,children:[!u&&Object(i.jsx)("thead",{className:"bg-white border-b-2 border-gray-300 text-gray-600 font-bold text-base",children:Object(i.jsx)("tr",{className:"text-left tracking-wide bg-".concat(k,"-100 border-b-2 border-").concat(k,"-500 text-").concat(k,"-600 overflow-hidden"),children:o.map((function(e,t){return Object(i.jsx)("th",{className:"".concat(e.padding," text-").concat(e.alignText," px-3 py-2 ").concat(e.isSortAllowed&&"cursor-pointer"),onClick:function(){return e.isSortAllowed&&function(e){var t,s,c,a,r,n,i,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"asc",d=0;if(c=!0,t=document.getElementById(e))for(;c;){for(c=!1,s=t.rows,a=1;a<s.length-1;a++)if(i=!1,r=s[a].getElementsByTagName("TD")[l],n=s[a+1].getElementsByTagName("TD")[l],"asc"===o&&r&&n){if(r.innerHTML.toLowerCase()>n.innerHTML.toLowerCase()){i=!0;break}}else if("desc"===o&&r&&n&&r.innerHTML.toLowerCase()<n.innerHTML.toLowerCase()){i=!0;break}i&&s[a].parentNode?(s[a].parentNode.insertBefore(s[a+1],s[a]),c=!0,d++):0===d&&"asc"===o&&(o="desc",c=!0)}}(O,t)},children:Object(i.jsxs)("div",{className:"flex items-center gap-1",children:[e.columnTitle,e.isSortAllowed&&Object(i.jsx)(r.h,{})]})},t)}))})}),Object(i.jsx)("tbody",{id:"table-data",className:"bg-white text-black text-base",children:l()})]}),m&&Object(i.jsxs)("div",{className:"sm:flex-1 sm:flex sm:items-center sm:justify-between mt-4 work-sans",children:[Object(i.jsx)("div",{children:Object(i.jsxs)("span",{className:"text-xs xs:text-sm text-gray-900",children:["Showing 1 to ",W," of ",A-1," Entries"]})}),Object(i.jsx)("div",{children:Object(i.jsxs)("nav",{className:"inline-flex shadow-sm",children:[Object(i.jsx)("div",{children:Object(i.jsx)("button",{type:"button",className:"inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 text-sm font-medium text-gray-500 ".concat(1!==M&&"bg-white"),"aria-label":"Previous",disabled:1===M||T,onClick:function(){return z(M-1)},children:Object(i.jsx)(n.eb,{className:"h-5 w-5"})})}),Object(i.jsx)("div",{children:P&&P.map((function(e,t){return Object(i.jsx)("button",{className:"-ml-px inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium text-gray-700 ".concat(e!==M?"bg-white":"bg-gray-100 cursor-default"),disabled:e===M||T,onClick:function(){return z(e)},children:e},t)}))}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{type:"button",className:"inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 text-sm leading-5 font-medium text-gray-500 ".concat(M!==B&&"bg-white"),"aria-label":"Next",disabled:M===B||T,onClick:function(){return z(M+1)},children:Object(i.jsx)(n.fb,{className:"h-5 w-5"})})})]})})]})]})}},190:function(e,t,s){"use strict";s.d(t,"b",(function(){return x})),s.d(t,"a",(function(){return j})),s.d(t,"d",(function(){return f})),s.d(t,"c",(function(){return h}));var c=s(20),a=s(21),r=s(23),n=s(22),i=s(4),l=s.n(i),o=s(19),d=s(3),u=s(9),b=s(1),m=function(e){Object(r.a)(s,e);var t=Object(n.a)(s);function s(e){var a;return Object(c.a)(this,s),(a=t.call(this,e)).componentDidMount=function(){return a.props.PageHasSubNav(!0)},a.componentWillUnmount=function(){return a.props.PageHasSubNav(!1)},a.state={loading:!1},a}return Object(a.a)(s,[{key:"render",value:function(){if(!1===this.props.auth.isAuthenticated)return null;var e=this.props.system.navigation;return Object(b.jsx)("div",{className:"fixed w-48 p-1 pr-2 pl-6 text-gray-700 bg-white ".concat(!0===e?"lg:left-16  left-16":" -left-72 lg:left-16","  top-0 bottom-0 pt-20 z-30 shadow-lg  transition-all duration-500 ease-in-out overflow-y-auto"),children:this.props.children})}}]),s}(l.a.Component),x=Object(o.b)((function(e){return{auth:e.auth,system:e.system}}),{NavToogle:d.fb,PageHasSubNav:d.gb})(m),j=function(e){var t=e.title,s=void 0===t?"":t,c=e.icon,a=void 0===c?u.m:c,r=e.active,n=void 0!==r&&r,i=e.count,l=void 0===i?0:i,o=a;return Object(b.jsxs)("section",{className:"".concat(!0===n?"bg-blue-500 text-white font-bold":"bg-blue-100 text-blue-800"," mb-1 hover:font-bold py-1 hover:bg-blue-400 hover:text-white --font-bold  px-2 rounded-md flex cursor-pointer items-center"),children:[Object(b.jsxs)("section",{className:"flex-1",children:[Object(b.jsx)(o,{className:"inline-block mr-1 text-xs"}),Object(b.jsx)("span",{children:s})]}),l>0?Object(b.jsx)("span",{className:"px-0.5 my-1 text-xs bg-blue-600 text-white rounded-full",children:l}):null]})},f=function(e){var t=e.children;return Object(b.jsx)("div",{className:"ml-3 overflow-y-auto border-l-2 border-blue-200 -mt-1 pt-2 mb-2 pl-1 cursor-pointer",children:t})},h=function(e){var t=e.title,s=void 0===t?"":t,c=e.icon,a=void 0===c?u.m:c,r=e.active,n=void 0!==r&&r,i=e.count,l=void 0===i?0:i,o=a;return Object(b.jsxs)("div",{className:"animate__animated animate__zoomIn animate__faster ".concat(!0===n?"bg-blue-500 text-white font-bold":" text-blue-800"," text-blue-800 bg-blue-200 rounded-md px-1 mb-1 flex items-center py-1 font-bold"),children:[Object(b.jsx)(o,{className:"inline-block mr-0.1 text-xs ".concat(!0===n?"text-white":"")}),Object(b.jsx)("span",{className:"inline-block pl-1 ".concat(!0===n?"text-white":""),children:s}),l>=1?Object(b.jsx)("span",{className:"text-sm fint-bold ".concat(!0===n?"text-white":""),children:l}):null]})}},191:function(e,t,s){"use strict";s.d(t,"d",(function(){return u})),s.d(t,"b",(function(){return b})),s.d(t,"f",(function(){return m})),s.d(t,"a",(function(){return x})),s.d(t,"c",(function(){return j})),s.d(t,"e",(function(){return f})),s.d(t,"g",(function(){return h}));var c=s(5),a=s.n(c),r=s(7),n=s(8),i=s.n(n),l=s(6),o=s(10),d=s(12),u=function(){return function(){var e=Object(r.a)(a.a.mark((function e(t){var s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,Object(d.b)(),e.next=4,i.a.get("".concat(o.a.AUTH,"/users"));case 4:s=e.sent,console.log({users_response:s}),t({type:l.a.FETCH_USERS_ACCESS,payload:s.data}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error({user_error:e.t0});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()},b=function(e){return console.log({data:e}),function(){var t=Object(r.a)(a.a.mark((function t(s){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s({type:l.a.BLOCK_USER_TO_SYSTEM,payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},m=function(e){return function(){var t=Object(r.a)(a.a.mark((function t(s){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s({type:l.a.UNBLOCK_USER_TO_SYSTEM,payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},x=function(e){return console.log({data:e}),function(){var t=Object(r.a)(a.a.mark((function t(s){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s({type:l.a.ASSIGN_ROLE_TO_USER,payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},j=function(e){return function(){var t=Object(r.a)(a.a.mark((function t(s){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s({type:l.a.CUSTOMIZE_USER_ACCESS,payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},f=function(e){return function(){var t=Object(r.a)(a.a.mark((function t(s){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s({type:l.a.RESET_USER_ACCESS,payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},h=function(e){return console.log({data:e}),function(){var t=Object(r.a)(a.a.mark((function t(s){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s({type:l.a.VERIFY_ALL_DOCUMENT,payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},215:function(e,t,s){"use strict";s.d(t,"a",(function(){return a})),s.d(t,"b",(function(){return r}));var c=s(0);function a(e){return Object(c.a)({tag:"svg",attr:{version:"1.2",baseProfile:"tiny",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M16 19h-8c-1.654 0-3-1.346-3-3v-8c0-1.654 1.346-3 3-3h5c.553 0 1 .448 1 1s-.447 1-1 1h-5c-.552 0-1 .449-1 1v8c0 .551.448 1 1 1h8c.552 0 1-.449 1-1v-3c0-.552.447-1 1-1s1 .448 1 1v3c0 1.654-1.346 3-3 3zM13.166 14.833c-.35 0-.689-.139-.941-.391l-2.668-2.667c-.52-.521-.52-1.365 0-1.885.521-.521 1.365-.521 1.887 0l1.416 1.417 3.475-5.455c.357-.644 1.17-.877 1.814-.519.643.358.875 1.17.518 1.813l-4.334 7c-.203.366-.566.615-.98.673l-.187.014z"}}]})(e)}function r(e){return Object(c.a)({tag:"svg",attr:{version:"1.2",baseProfile:"tiny",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M8.5 11c0 .732.166 1.424.449 2.051l-3.949 3.949v1.5s.896 1.5 2 1.5h2v-2h2v-2h2.5c2.762 0 5-2.238 5-5s-2.238-5-5-5-5 2.238-5 5zm5 2c-1.104 0-2-.896-2-2 0-1.105.896-2.002 2-2.002 1.105 0 2 .896 2 2.002 0 1.104-.895 2-2 2z"}}]})(e)}},259:function(e,t,s){"use strict";s.r(t),s.d(t,"UserAccess",(function(){return O}));var c=s(5),a=s.n(c),r=s(7),n=s(25),i=s(8),l=s.n(i),o=s(4),d=s(182),u=s(9),b=s(222),m=s(215),x=s(19),j=s(191),f=s(181),h=s(10),p=s(13),g=s(1),O=Object(x.b)(null,{customizeUserAccess:j.c})((function(e){var t=e.userInfo,s=e.customizeUserAccess,c=e.setFeedBack,i=(e.feedBack,e.setUserAccess),x=e.userAccess,j=e.currentAccess,O=e.setCurrentAccess,v=Object(o.useState)(!0),_=Object(n.a)(v,2),y=_[0],N=_[1],w=Object(o.useState)(!1),k=Object(n.a)(w,2),S=k[0],T=k[1],C=Object(o.useState)(!1),U=Object(n.a)(C,2),A=U[0],E=U[1],L=Object(o.useState)(!1),R=Object(n.a)(L,2),B=R[0],I=R[1],D=Object(o.useState)(!1),q=Object(n.a)(D,2),M=q[0],z=q[1],F=Object(o.useState)(!1),Y=Object(n.a)(F,2),P=Y[0],H=Y[1],G=function(e,t){if(console.log({default_access:e,custome_access:t}),e&&t&&t.length>0){for(var s=[],c=function(){var e=Object(n.a)(r[a],2),c=e[0],i=e[1],l=t.find((function(e){return e.id===i.id}));l?s.push(l):s.push(i),console.log(c)},a=0,r=Object.entries(e);a<r.length;a++)c();i(s)}};Object(o.useEffect)((function(){t&&t.custome_access&&t.default_access&&function(e,t){if(e&&t&&t.length>0){for(var s=[],c=function(){var e=Object(n.a)(r[a],2),c=e[0],i=e[1],l=t.find((function(e){return e.id===i.id}));l?s.push(l):s.push(i),console.log(c)},a=0,r=Object.entries(e);a<r.length;a++)c();i(s)}}(t.default_access.access,t.custome_access.access),console.log("nturebase")}),[t,i]),Object(o.useEffect)((function(){t&&!t.custome_access&&t.default_access&&i(t.default_access.access),N(!1)}),[t,i]);var V=function(){var e=Object(r.a)(a.a.mark((function e(r){var n,i,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),T(!0),c({type:"",message:""}),n=null,n=t.custome_access,i=-1,e.prev=6,n&&j?(i=n.access.findIndex((function(e){return e.id===j.id})))>=0?(n.access[i].permitted.create=A,n.access[i].permitted.view=B,n.access[i].permitted.update=M,n.access[i].permitted.delete=P):n.access.push({id:j.id,task:j.task,key:j.key,permitted:{create:A,view:B,update:M,delete:P}}):j&&(n={access:[{id:j.id,task:j.task,key:j.key,permitted:{create:A,view:B,update:M,delete:P}}],user_id:t.user_id,custome_user_access_id:""}),!n){e.next=19;break}if(null===t.custome_access){e.next=15;break}return e.next=12,l.a.patch("".concat(h.a.AUTH,"/custaccess"),{access:n.access,user_id:t.user_id});case 12:o=e.sent,e.next=18;break;case 15:return e.next=17,l.a.post("".concat(h.a.AUTH,"/custaccess"),{access:n.access,user_id:t.user_id});case 17:o=e.sent;case 18:o&&(n.custome_user_access_id=o.data.data.custome_user_access_id,console.log({task:n}),console.log(o.data.data),s(n),n&&t.default_access&&G(t.default_access.access,n.access),c({type:"success",message:"Reseting User Access complete successfully"}),n=null,O(null),E(!1),I(!1),z(!1),H(!1));case 19:e.next=25;break;case 21:e.prev=21,e.t0=e.catch(6),console.error({customize_access:e.t0}),c({type:"danger",message:Object(p.a)(e.t0)});case 25:T(!1);case 26:case"end":return e.stop()}}),e,null,[[6,21]])})));return function(t){return e.apply(this,arguments)}}();return!0===y||null===t?Object(g.jsx)("div",{className:"text-center mt-7 font-bold text-4xl text-gray-400 animate-pulse",children:"Loading User Access..."}):y?Object(g.jsx)("div",{className:"text-center mt-7 font-bold text-4xl text-gray-400 animate-pulse",children:"Loading..."}):Object(g.jsx)(o.Fragment,{children:Object(g.jsxs)("div",{className:"grid grid-cols-5 gap-4 my-4",children:[Object(g.jsxs)("div",{className:"col-span-2 bg-white w-full shadow-lg text-center p-2",children:[Object(g.jsx)("span",{className:"text-gray-600 mt-2 font-semibold text-2xl",children:"Settings"}),!y&&Object(g.jsx)(f.a,{columns:[{columnTitle:"Access Name",alignText:"left",padding:"p-3"},{columnTitle:"Create",alignText:"left"},{columnTitle:"View",alignText:"left"},{columnTitle:"Update",alignText:"left"},{columnTitle:"Delete",alignText:"left"}],rows:function(){return x?x.map((function(e,t){return Object(g.jsxs)("tr",{className:"text-left border-b border-gray-200 cursor-pointer ".concat(j&&j.id===e.id&&"bg-gray-300 shadow-md my-3 hover:bg-gray-100"),onClick:function(){return j?(O(null),E(!1),I(!1),z(!1),H(!1)):(O(e),E(e.permitted.create),I(e.permitted.view),z(e.permitted.update),H(e.permitted.delete))},children:[Object(g.jsx)("td",{className:"px-2 py-1",children:Object(g.jsx)("label",{className:"inline-flex items-center",children:Object(g.jsx)("span",{className:"text-gray-900 capitalize text-xl font-normal cursor-pointer",children:e.task})})}),Object(g.jsx)("td",{children:Object(g.jsxs)("div",{className:"inline-flex items-center text-xl ".concat(e.permitted.create?"text-green-700":"text-red-700"),children:[e.permitted.create?Object(g.jsx)(m.a,{}):Object(g.jsx)(u.O,{}),e.permitted.create?" Yes":"No"]})}),Object(g.jsx)("td",{children:Object(g.jsxs)("div",{className:"inline-flex items-center text-xl ".concat(e.permitted.view?"text-green-700":"text-red-700"),children:[e.permitted.view?Object(g.jsx)(m.a,{}):Object(g.jsx)(u.O,{}),e.permitted.view?" Yes":"No"]})}),Object(g.jsx)("td",{children:Object(g.jsxs)("div",{className:"inline-flex items-center text-xl ".concat(e.permitted.update?"text-green-700":"text-red-700"),children:[e.permitted.update?Object(g.jsx)(m.a,{}):Object(g.jsx)(u.O,{}),e.permitted.update?" Yes":"No"]})}),Object(g.jsx)("td",{children:Object(g.jsxs)("div",{className:"inline-flex items-center text-xl ".concat(e.permitted.delete?"text-green-700":"text-red-700"),children:[e.permitted.delete?Object(g.jsx)(m.a,{}):Object(g.jsx)(u.O,{}),e.permitted.delete?" Yes":"No"]})})]},t+e.id)})):[Object(g.jsx)("tr",{children:Object(g.jsx)("td",{children:"No data"})},46)]},pagination:!1,search:!0,searchBG:"bg-gray-50",thColor:"gray"})]}),Object(g.jsx)("div",{className:"col-span-3",children:j?Object(g.jsxs)("div",{children:[Object(g.jsx)("h1",{className:"text-3xl font-medium text-center my-3 text-gray-900",children:"Customize User Access"}),Object(g.jsx)("div",{className:"flex justify-center",children:Object(g.jsxs)("h2",{className:"text-2xl font-semibold text-center text-gray-600 flex flex-row items-center",children:[Object(g.jsx)(d.g,{className:"w-7 h-7"}),j.task]})}),Object(g.jsx)("div",{className:"flex flex-col",children:Object(g.jsxs)("form",{className:"flex flex-col items-center",onSubmit:function(e){return V(e)},children:[Object(g.jsxs)("div",{className:"inline-flex gap-2 items-center",children:[Object(g.jsx)(b.a,{className:"w-7 h-7 text-gray-600"}),Object(g.jsxs)("div",{className:"flex flex-col",children:[Object(g.jsx)("h3",{className:"font-semibold text-xl",children:"Create"}),Object(g.jsx)("span",{className:"text-gray-600 text-sm md:pr-1",children:"This permission gives the user the ability to create"})]}),Object(g.jsx)("input",{type:"checkbox",className:"form-checkbox h-7 w-7 text-teal-600",onChange:function(){return E(!A)},checked:A,disabled:S})]}),Object(g.jsxs)("div",{className:"inline-flex gap-2 items-center",children:[Object(g.jsx)(u.tb,{className:"w-7 h-7 text-gray-600"}),Object(g.jsxs)("div",{className:"flex flex-col",children:[Object(g.jsx)("h3",{className:"font-semibold text-xl",children:"View"}),Object(g.jsx)("span",{className:"text-gray-600 text-sm md:pr-4",children:"This permission gives the user the ability to view"})]}),Object(g.jsx)("input",{type:"checkbox",className:"form-checkbox h-7 w-7 text-teal-600",onChange:function(){return I(!B)},checked:B,disabled:S})]}),Object(g.jsxs)("div",{className:"inline-flex gap-2 items-center",children:[Object(g.jsx)(u.D,{className:"w-7 h-7 text-gray-600"}),Object(g.jsxs)("div",{className:"flex flex-col",children:[Object(g.jsx)("h3",{className:"font-semibold text-xl",children:"Update"}),Object(g.jsx)("span",{className:"text-gray-600 text-sm",children:"This permission gives the user the ability to update"})]}),Object(g.jsx)("input",{type:"checkbox",className:"form-checkbox h-7 w-7 text-teal-600",onChange:function(){return z(!M)},checked:M,disabled:S})]}),Object(g.jsxs)("div",{className:"inline-flex gap-2 items-center",children:[Object(g.jsx)(u.A,{className:"w-7 h-7 text-gray-600"}),Object(g.jsxs)("div",{className:"flex flex-col",children:[Object(g.jsx)("h3",{className:"font-semibold text-xl",children:"Delete"}),Object(g.jsx)("span",{className:"text-gray-600 text-sm md:pr-1",children:"This permission gives the user the ability to delete"})]}),Object(g.jsx)("input",{type:"checkbox",className:"form-checkbox h-7 w-7 text-teal-600",onChange:function(){return H(!P)},checked:P,disabled:S})]}),Object(g.jsxs)("div",{className:"flex items-center justify-center w-full py-3 gap-2",children:[Object(g.jsx)("button",{className:"btn bg-gray-500 hover:bg-gray-700 focus:outline-none text-white",disabled:S,onClick:function(){O(null),E(!1),I(!1),z(!1),H(!1)},children:"Cancel"}),Object(g.jsx)("button",{className:"btn btn-blue",disabled:S,children:S?"Processing..":"Save Change"})]})]})})]}):Object(g.jsxs)("div",{className:"w-full flex flex-col items-center text-gray-600 gap-1 py-3",children:[Object(g.jsx)(u.Bb,{className:"w-20 h-20"}),Object(g.jsx)("span",{className:"text-12",children:"Choose Access to Customize"})]})})]})})}))},263:function(e,t,s){"use strict";s.d(t,"a",(function(){return w}));var c,a=s(5),r=s.n(a),n=s(7),i=s(25),l=s(4),o=s(9),d=s(181),u=s(180),b=s(19),m=s(178),x=s.p+"static/media/blank_profile.c3f94521.png",j=s(259),f=s(8),h=s.n(f),p=s(215),g=s(191),O=s(53),v=s(10),_=s(13),y=s(1),N=Object(b.b)(null,{assignRoleToUserAccess:g.a})((function(e){var t=e.userInfo,s=e.roleList,c=e.district,a=e.setFeedBack,u=(e.feedBack,e.assignRoleToUserAccess),b=e.schoolList,m=e.roomList,x=e.setChangeRole,j=Object(l.useState)(!0),f=Object(i.a)(j,2),g=f[0],N=f[1],k=Object(l.useState)(!0),S=Object(i.a)(k,2),T=S[0],C=S[1],U=Object(l.useState)(!1),A=Object(i.a)(U,2),E=A[0],L=A[1],R=Object(l.useState)(""),B=Object(i.a)(R,2),I=B[0],D=B[1],q=Object(l.useState)(""),M=Object(i.a)(q,2),z=M[0],F=M[1],Y=Object(l.useState)(""),P=Object(i.a)(Y,2),H=P[0],G=P[1],V=Object(l.useState)(""),W=Object(i.a)(V,2),K=W[0],J=W[1],X=Object(l.useState)(""),Z=Object(i.a)(X,2),Q=Z[0],$=Z[1],ee=Object(l.useState)(""),te=Object(i.a)(ee,2),se=te[0],ce=te[1],ae=Object(l.useState)(null),re=Object(i.a)(ae,2),ne=re[0],ie=re[1];Object(l.useEffect)((function(){if(s.length&&t){if(t.default_access&&T){if(!I.length){D(t.default_access.system_user_role_id);var e=s.find((function(e){return e.system_user_role_id===I}));e&&ie(e)}var c;if(t.default_access.district_id&&m)(c=w(m).find((function(e){return e.district_id===t.default_access.district_id})))&&F(c.province_id),c&&G(c.district_id),C(!1);else if(t.default_access.room_id&&m)(c=w(m).find((function(e){return e.room_id===t.default_access.room_id})))&&F(c.province_id),c&&G(c.district_id),c&&ce(c.center_id),$(t.default_access.room_id),C(!1);else if(t.default_access.school_id&&m&&b){var a=b.find((function(e){return e._id===t.default_access.school_id}));a&&((c=w(m).find((function(e){return e.district_id===(null===a||void 0===a?void 0:a.district_id)})))&&F(c.province_id),c&&G(c.district_id),J(t.default_access.school_id),C(!1))}else C(!1)}N(!1)}}),[T,I,s,Q.length,m,b,t]);var le=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"SELECT";if(s){var c=s.find((function(t){return t.system_user_role_id===e}));c&&(D(e),ie(c),"SELECT"===t&&(F(""),G(""),J(""),ce(""),$("")))}},oe=function(){var e=Object(n.a)(r.a.mark((function e(){var s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ne){e.next=2;break}return e.abrupt("return",!1);case 2:if(window.confirm("Are sure you want to change user role?")){e.next=4;break}return e.abrupt("return",!1);case 4:return L(!0),s={user_id:t.user_id,data:{system_user_role_id:I,status:1,role:ne.role,access:ne.access,school_id:ne.school_required?K:"",district_id:ne.district_required?H:"",room_id:ne.room_required?Q:""}},e.prev=6,e.next=9,h.a.post("".concat(v.a.AUTH,"/addroletouser"),{user_id:t.user_id,system_user_role_id:I,status:1,role:ne.role,access:!0,school_id:ne.school_required?K:"",district_id:ne.district_required?H:"",room_id:ne.room_required?Q:""});case 9:e.sent&&(u(s),L(!1),x(!1),a({type:"success",message:"Assigning Role to User completed successfully"})),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(6),console.log({role_error:e.t0}),a({type:"danger",message:Object(_.a)(e.t0)});case 17:case"end":return e.stop()}}),e,null,[[6,13]])})));return function(){return e.apply(this,arguments)}}();return!0===g||null===t?Object(y.jsx)("div",{className:"text-center mt-7 font-bold text-4xl text-gray-400 animate-pulse",children:"Loading..."}):Object(y.jsx)(l.Fragment,{children:Object(y.jsxs)("div",{className:"grid grid-cols-3 gap-8 my-4",children:[Object(y.jsx)("div",{className:"col-span-1 bg-white w-full shadow-lg p-2",children:Object(y.jsxs)("div",{className:"px-12 py-5 bg-white mx-auto rounded-2xl w-100",children:[Object(y.jsx)("h3",{className:"font-semibold text-2xl text-gray-800 mb-4",children:"Change User Role"}),T?Object(y.jsx)(O.a,{}):Object(y.jsxs)("div",{className:"space-y-5",children:[Object(y.jsxs)("div",{className:"space-y-2",children:[Object(y.jsx)("label",{className:"text-sm font-medium text-gray-700 tracking-wide",children:"User Role"}),Object(y.jsxs)("select",{className:"block w-full text-base bg-gray-50 text-grey-darker border border-gray-300 px-4 py-3 md:w-full focus:outline-none",required:!0,value:I,onChange:function(e){le(e.target.value)},disabled:E,children:[Object(y.jsx)("option",{value:"",children:"Choose Role"}),s.map((function(e){return Object(y.jsx)("option",{value:e.system_user_role_id,children:e.role},e.system_user_role_id)}))]})]}),ne&&ne.room_required&&Object(y.jsxs)("div",{className:"space-y-2",children:[Object(y.jsx)("label",{className:"mb-5 text-sm font-medium text-gray-700 tracking-wide",children:"Province"}),Object(y.jsxs)("select",{className:"block w-full text-base bg-gray-50 text-grey-darker border border-gray-300 px-4 py-3 md:w-full focus:outline-none",required:!0,onChange:function(e){F(e.target.value),G(""),J(""),ce(""),$("")},value:z,disabled:E,children:[Object(y.jsx)("option",{value:"",children:"Selected province"}),m&&m.map((function(e){return Object(y.jsx)("option",{value:e.province_id,children:e.province_name},e.province_id)}))]})]}),ne&&(ne.district_required||ne.room_required)&&Object(y.jsxs)("div",{className:"space-y-2",children:[Object(y.jsx)("label",{className:"mb-5 text-sm font-medium text-gray-700 tracking-wide",children:"District"}),Object(y.jsxs)("select",{className:"block w-full text-base bg-gray-50 text-grey-darker border border-gray-300 px-4 py-3 md:w-full focus:outline-none",required:!0,onChange:function(e){G(e.target.value),J(""),ce(""),$("")},value:H,disabled:E,children:[Object(y.jsx)("option",{value:"",children:"Selected district"}),z?m&&m.filter((function(e){return e.province_id===z}))[0].districts.map((function(e){return Object(y.jsx)("option",{value:e.district_id,children:e.district_name},e.district_id)})):c.map((function(e){return Object(y.jsx)("option",{value:e.district_id,children:e.district_name},e.district_id)}))]})]}),ne&&ne.school_required&&Object(y.jsxs)("div",{className:"space-y-2",children:[Object(y.jsx)("label",{className:"mb-5 text-sm font-medium text-gray-700 tracking-wide",children:"School"}),Object(y.jsxs)("select",{className:"block w-full text-base bg-gray-50 text-grey-darker border border-gray-300 px-4 py-3 md:w-full focus:outline-none",required:!0,onChange:function(e){J(e.target.value),ce(""),$("")},disabled:E,value:K,children:[Object(y.jsx)("option",{value:"",children:"Selected school"}),b&&b.map((function(e){return Object(y.jsx)("option",{value:e._id,children:e.school_name},e._id)}))]})]}),ne&&ne.room_required&&Object(y.jsxs)("div",{className:"space-y-2",children:[Object(y.jsx)("label",{className:"mb-5 text-sm font-medium text-gray-700 tracking-wide",children:"Center"}),Object(y.jsxs)("select",{className:"block w-full text-base bg-gray-50 text-grey-darker border border-gray-300 px-4 py-3 md:w-full focus:outline-none",required:!0,onChange:function(e){ce(e.target.value),$("")},disabled:E,value:se,children:[Object(y.jsx)("option",{value:"",children:"Select center:"}),H&&H.length>0&&m&&w(m).filter((function(e){return e.district_id===H})).map((function(e,t){return Object(y.jsx)("option",{value:e.center_id,children:e.center_name},e.center_id+t)}))]})]}),ne&&ne.room_required&&Object(y.jsxs)("div",{className:"space-y-2",children:[Object(y.jsx)("label",{className:"mb-5 text-sm font-medium text-gray-700 tracking-wide",children:"Room"}),Object(y.jsxs)("select",{className:"block w-full text-base bg-gray-50 text-grey-darker border border-gray-300 px-4 py-3 md:w-full focus:outline-none",required:!0,onChange:function(e){return $(e.target.value)},disabled:E,value:Q,children:[Object(y.jsx)("option",{value:"",children:"Select room"}),se&&m&&w(m).filter((function(e){return e.center_id===se})).map((function(e,t){return Object(y.jsx)("option",{value:e.room_id,children:e.room_name},e.room_id+300)}))]})]}),Object(y.jsxs)("div",{className:"flex justify-between 2xl:justify-start gap-2",children:[Object(y.jsx)("button",{className:"btn bg-gray-500 text-gray-50 focus:outline-none",onClick:function(){return x(!1)},disabled:E,children:"Back"}),Object(y.jsx)("button",{className:"btn btn-blue focus:outline-none",onClick:function(){return oe()},disabled:E,children:E?"Loading...":"Save Change"})]})]})]})}),Object(y.jsxs)("div",{className:"col-span-2 bg-white w-full shadow-lg text-center py-4 px-12",children:[Object(y.jsx)("div",{className:"my-4",children:Object(y.jsxs)("span",{className:"text-gray-600 font-semibold text-2xl",children:[null===ne||void 0===ne?void 0:ne.role,"'s Default Access"]})}),!g&&Object(y.jsx)(d.a,{columns:[{columnTitle:"Access Name",alignText:"left",padding:"p-3"},{columnTitle:"Create",alignText:"left"},{columnTitle:"View",alignText:"left"},{columnTitle:"Update",alignText:"left"},{columnTitle:"Delete",alignText:"left"}],rows:function(){return I.length>0&&null===ne&&s&&le(I,"DEFAULT"),ne?ne.access.map((function(e,t){return Object(y.jsxs)("tr",{className:"text-left border-b border-gray-200 hover:bg-gray-100",children:[Object(y.jsx)("td",{className:"px-2 py-1",children:Object(y.jsx)("label",{className:"inline-flex items-center",children:Object(y.jsx)("span",{className:"text-gray-900 capitalize text-xl font-normal cursor-pointer",children:e.task})})}),Object(y.jsx)("td",{children:Object(y.jsxs)("div",{className:"inline-flex items-center text-xl ".concat(e.permitted.create?"text-green-700":"text-red-700"),children:[e.permitted.create?Object(y.jsx)(p.a,{}):Object(y.jsx)(o.O,{}),e.permitted.create?" Yes":"No"]})}),Object(y.jsx)("td",{children:Object(y.jsxs)("div",{className:"inline-flex items-center text-xl ".concat(e.permitted.view?"text-green-700":"text-red-700"),children:[e.permitted.view?Object(y.jsx)(p.a,{}):Object(y.jsx)(o.O,{}),e.permitted.view?" Yes":"No"]})}),Object(y.jsx)("td",{children:Object(y.jsxs)("div",{className:"inline-flex items-center text-xl ".concat(e.permitted.update?"text-green-700":"text-red-700"),children:[e.permitted.update?Object(y.jsx)(p.a,{}):Object(y.jsx)(o.O,{}),e.permitted.update?" Yes":"No"]})}),Object(y.jsx)("td",{children:Object(y.jsxs)("div",{className:"inline-flex items-center text-xl ".concat(e.permitted.delete?"text-green-700":"text-red-700"),children:[e.permitted.delete?Object(y.jsx)(p.a,{}):Object(y.jsx)(o.O,{}),e.permitted.delete?" Yes":"No"]})})]},t+e.id)})):[Object(y.jsx)("tr",{children:Object(y.jsx)("td",{colSpan:5,className:"text-center px-2 py-2",children:"No Default Access Available on this Role."})},"55re")]},pagination:!1,search:!1,searchBG:"bg-gray-50",thColor:"gray",tableId:"defaultAccess"})]})]})})}));!function(e){e.View_User="View User Info",e.Add_Access="Add Access To User",e.Update_Access="Update User Access",e.Close_Modal="Close Modal"}(c||(c={}));var w=function(e){var t=[];for(var s in e){var c=e[s].districts;for(var a in c){var r=c[a].centers;for(var n in r){var i=r[n].rooms;for(var l in i)t.push({province_id:e[s].province_id,province_name:e[s].province_name,district_id:c[a].district_id,district_name:c[a].district_name,center_id:r[n].examination_center_id,center_name:r[n].center_name,room_id:i[l].examination_center_room_id,room_name:i[l].room_number.toString(),capacity:i[l].capacity,occupied:i[l].occupied})}}}return t};t.b=Object(b.b)(null,{blockUserToSystem:g.b,unBlockUserToSystem:g.f,resetUserAccess:g.e})((function(e){var t=e.users,s=e.roleList,c=(e.userTypes,e.district),a=e.loadingUser,b=e.setLoadingUser,f=e.blockUserToSystem,p=e.unBlockUserToSystem,g=e.resetUserAccess,k=Object(l.useState)({type:"",message:""}),S=Object(i.a)(k,2),T=S[0],C=S[1],U=Object(l.useState)(),A=Object(i.a)(U,2),E=A[0],L=A[1],R=Object(l.useState)(""),B=Object(i.a)(R,2),I=B[0],D=B[1],q=Object(l.useState)(!1),M=Object(i.a)(q,2),z=M[0],F=M[1],Y=Object(l.useState)(!1),P=Object(i.a)(Y,2),H=P[0],G=P[1],V=Object(l.useState)(null),W=Object(i.a)(V,2),K=W[0],J=W[1],X=Object(l.useState)(null),Z=Object(i.a)(X,2),Q=Z[0],$=Z[1],ee=Object(l.useState)(null),te=Object(i.a)(ee,2),se=te[0],ce=te[1],ae=Object(l.useState)(null),re=Object(i.a)(ae,2),ne=re[0],ie=re[1],le=Object(l.useState)(null),oe=Object(i.a)(le,2),de=oe[0],ue=oe[1],be=Object(l.useState)(null),me=Object(i.a)(be,2),xe=me[0],je=me[1];Object(l.useEffect)((function(){var e=function(){var e=Object(n.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C({type:"",message:""}),b(!0),e.prev=2,e.next=5,h.a.get("".concat(v.a.APPLICATION,"/schools"));case 5:t=e.sent,$(t.data),b(!1),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),C({type:"danger",message:Object(_.a)(e.t0)});case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(){return e.apply(this,arguments)}}(),t=function(){var e=Object(n.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C({type:"",message:""}),b(!0),e.prev=2,e.next=5,h.a.get("".concat(v.a.APPLICATION,"/roomlocation"));case 5:t=e.sent,ce(t.data),ie(w(t.data)),b(!1),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),C({type:"danger",message:Object(_.a)(e.t0)});case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(){return e.apply(this,arguments)}}();e(),t()}),[b]);var fe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"block";if(C({type:"",message:""}),e||C({type:"warning",message:"User Access is required doesn't exist"}),G(!0),!window.confirm("Are sure you want to ".concat(t," this user?")))return G(!1);"block"===t?f(e):p(e),C({type:"success",message:"User has been ".concat("block"===t?"block":"unblock","ed!")}),G(!1),e=""},he=function(){var e=Object(n.a)(r.a.mark((function e(s){var c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(C({type:"",message:""}),s||C({type:"warning",message:"User Access is required doesn't exist"}),window.confirm("Are sure you want to reset to default access?")){e.next=4;break}return e.abrupt("return",G(!1));case 4:return G(!0),J("RESET"),e.prev=6,e.next=9,h.a.delete("".concat(v.a.AUTH,"/custaccess/user/").concat(s));case 9:e.sent&&g(s),(c=t.filter((function(e){return e.user_id===s}))[0]).default_access&&ue(c.default_access.access),C({type:"success",message:"Reseting User Access complete successfully"}),je(null),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(6),console.error({reseting_user_access:e.t0}),C({type:"danger",message:Object(_.a)(e.t0)});case 21:G(!1),J(null),s="";case 24:case"end":return e.stop()}}),e,null,[[6,17]])})));return function(t){return e.apply(this,arguments)}}();return Object(y.jsxs)(l.Fragment,{children:[T&&""!==T.type&&Object(y.jsxs)("div",{className:"alert-".concat(T.type," flex flex-row items-center relative"),children:[Object(y.jsx)("span",{className:"absolute top-0 bottom-0 right-0 px-4 py-3",children:Object(y.jsx)(o.x,{className:"h-5 w-5 text-gray-700 hover:font-bold",title:"Close",onClick:function(){return C({type:"",message:""})}})}),Object(y.jsx)(o.F,{className:"h-10 w-10"}),Object(y.jsxs)("div",{className:"alert-content ml-4",children:[Object(y.jsx)("div",{className:"alert-title font-semibold text-lg",children:"success"===T.type?"Success":"Error"}),Object(y.jsx)("div",{className:"alert-description text-sm",children:T.message})]})]}),Object(y.jsx)("div",{className:"grid md:grid-cols-5 gap-2 mb-5",children:Object(y.jsxs)("div",{className:"md:col-span-5 rounded",children:[Object(y.jsx)("div",{className:"my-2 flex sm:flex-row flex-col justify-between",children:Object(y.jsx)("div",{className:"flex flex-col md:flex-row gap-1 items-center mx-1.5"})}),t&&Object(y.jsx)(d.a,{columns:[{columnTitle:"#",alignText:"left",padding:"p-3"},{columnTitle:"Names",alignText:"left",padding:"p-3"},{columnTitle:"Email",alignText:"left",padding:"p-3"},{columnTitle:"Gender",alignText:"left",padding:"p-3"},{columnTitle:"Role",alignText:"left",padding:"p-3"},{columnTitle:"",alignText:"left",padding:"p-3"}],rows:function(){if(!0===a)return[Object(y.jsx)("tr",{className:"border-b border-gray-200 hover:bg-gray-100",children:Object(y.jsx)("td",{className:"p-3 text-center",colSpan:8,children:Object(y.jsx)(O.a,{})})},1)];var e=t;return e.length<=0?[Object(y.jsx)("tr",{className:"border-b border-gray-200 hover:bg-gray-100",children:Object(y.jsx)("td",{className:"p-3 text-center",colSpan:8,children:"No Data Found"})},1)]:e.map((function(e,t){var c,a;return Object(y.jsxs)("tr",{className:"border-b border-gray-200 hover:bg-gray-100",children:[Object(y.jsx)("td",{className:"p-3 text-left whitespace-nowrap",children:t+1}),Object(y.jsxs)("td",{className:"p-3 text-left",children:[console.log({info:e.user_info}),Object(y.jsx)("span",{children:e.user_info&&e.user_info.fname+" "+e.user_info.lname})]}),Object(y.jsx)("td",{className:"p-3 text-left",children:e.email}),Object(y.jsx)("td",{className:"p-3 text-left",children:e.user_info&&"M"===e.user_info.sex?"Male":"Female"}),Object(y.jsx)("td",{className:"p-3 text-left text-blue-700 text-base font-medium",children:e.default_access&&e.default_access.system_user_role_id&&e.default_access.system_user_role_id&&Object(y.jsx)("span",{className:"px-2 py-1 font-semibold rounded text-blue-700 bg-blue-100 dark:bg-blue-700 dark:text-blue-100",children:(null===(c=Object(u.c)(s,e.default_access.system_user_role_id))||void 0===c?void 0:c.role)&&Object(u.a)(null===(a=Object(u.c)(s,e.default_access.system_user_role_id))||void 0===a?void 0:a.role)})}),Object(y.jsx)("td",{className:"px-3 text-center",children:Object(y.jsx)("button",{className:"btn bg-gray-200 hover:bg-blue-700 hover:text-white focus:outline-none",title:"Manage User Access",onClick:function(){L(e),D(e.user_id)},children:"Manage"})})]},t)}))},pagination:!0,search:!0,thColor:"gray",loading:a})]})}),E&&Object(y.jsx)(m.d,{backDrop:!0,theme:m.c.default,close:function(){L(null),F(!1),C({message:"",type:""})},displayClose:!0,backDropClose:!1,title:Object(y.jsxs)("div",{className:"text-gray-600 font-bold text-3xl md:ml-4",children:[E.user_info.fname,"'s access setting"]}),widthSizeClass:m.b.maxWidth,padding:{title:!0,body:!1,footer:!1},children:Object(y.jsxs)("div",{className:"bg-gray-100 h-auto px-12 py-3",children:[T&&""!==T.type&&Object(y.jsxs)("div",{className:"alert-".concat(T.type," flex flex-row items-center relative mb-4"),children:[Object(y.jsx)("span",{className:"absolute top-0 bottom-0 right-0 px-4 py-3",children:Object(y.jsx)(o.x,{className:"h-5 w-5 text-gray-700 hover:font-bold",title:"Close",onClick:function(){return C({type:"",message:""})}})}),Object(y.jsx)(o.F,{className:"h-10 w-10"}),Object(y.jsxs)("div",{className:"alert-content ml-4",children:[Object(y.jsx)("div",{className:"alert-title font-semibold text-lg",children:"success"===T.type?"Success":"Error"}),Object(y.jsx)("div",{className:"alert-description text-sm",children:T.message})]})]}),Object(y.jsxs)("div",{className:"bg-white shadow-md px-4 py-2 flex flex-col md:flex-row items-center gap-x-14",children:[t.filter((function(e){return e.user_id===I})).map((function(e){var t,a,r,n;return Object(y.jsxs)("div",{className:"flex items-center gap-3",children:[Object(y.jsx)("img",{src:"pic"!==e.user_info.photo?e.user_info.photo:x,alt:"",className:"rounded-full w-32 h-32"}),Object(y.jsxs)("div",{className:"flex flex-col gap-1",children:[Object(y.jsx)("span",{className:"text-2xl font-semibold",children:e.user_info.fname+" "+e.user_info.lname}),Object(y.jsxs)("div",{className:"flex items-center",children:[Object(y.jsx)(o.Y,{className:"w-5 h-5"}),Object(y.jsx)("span",{className:"text-lg font-medium",children:e.default_access&&Object(u.c)(s,e.default_access.system_user_role_id).role})]}),Object(y.jsxs)("div",{className:"flex items-center gap-1",children:[Object(y.jsx)("span",{className:"text-gray-500",children:"Level:"}),Object(y.jsx)("span",{className:"text-base font-medium",children:e.default_access&&Object(u.c)(s,e.default_access.system_user_role_id).district_required?"District":e.default_access&&Object(u.c)(s,e.default_access.system_user_role_id).school_required?"School":e.default_access&&Object(u.c)(s,e.default_access.system_user_role_id).room_required?"Room":"-"})]}),e.default_access&&Object(u.c)(s,e.default_access.system_user_role_id).district_required?Object(y.jsxs)("div",{className:"flex items-center gap-1",children:[Object(y.jsx)("span",{className:"text-gray-500",children:"District:"}),Object(y.jsx)("span",{className:"text-base font-medium",children:e.default_access&&c&&c.filter((function(t){var s;return t.district_id===(null===(s=e.default_access)||void 0===s?void 0:s.district_id)}))[0].district_name})]}):e.default_access&&Object(u.c)(s,e.default_access.system_user_role_id).school_required?Object(y.jsxs)("div",{className:"flex items-center gap-1",children:[Object(y.jsx)("span",{className:"text-gray-500",children:"School:"}),Object(y.jsx)("span",{className:"text-base font-medium",children:Q&&(null===(t=Q.find((function(t){var s;return t._id===(null===(s=e.default_access)||void 0===s?void 0:s.school_id)})))||void 0===t?void 0:t.school_name)})]}):e.default_access&&Object(u.c)(s,e.default_access.system_user_role_id).room_required&&Object(y.jsxs)("div",{className:"flex items-center gap-1",children:[Object(y.jsx)(o.X,{className:"text-gray-500"}),ne&&Object(y.jsx)("span",{className:"text-base font-medium",children:(null===(a=ne.find((function(t){var s;return t.room_id===(null===(s=e.default_access)||void 0===s?void 0:s.room_id)})))||void 0===a?void 0:a.district_name)+" - "+(null===(r=ne.find((function(t){var s;return t.room_id===(null===(s=e.default_access)||void 0===s?void 0:s.room_id)})))||void 0===r?void 0:r.center_name)+" - Room "+(null===(n=ne.find((function(t){var s;return t.room_id===(null===(s=e.default_access)||void 0===s?void 0:s.room_id)})))||void 0===n?void 0:n.room_name)})]})]})]},e.user_id)})),t.filter((function(e){return e.user_id===I})).map((function(e){return Object(y.jsxs)("div",{className:"flex flex-col",children:[Object(y.jsxs)("div",{className:"flex items-center gap-1",children:[Object(y.jsx)("span",{className:"text-gray-500",children:"NID:"}),Object(y.jsx)("span",{className:"text-base font-medium",children:e.n_id})]}),Object(y.jsxs)("div",{className:"flex items-center gap-1",children:[Object(y.jsx)("span",{className:"text-gray-500",children:"Email:"}),Object(y.jsx)("span",{className:"text-base font-medium",children:e.email})]}),Object(y.jsxs)("div",{className:"flex items-center gap-1",children:[Object(y.jsx)("span",{className:"text-gray-500",children:"Phone:"}),Object(y.jsx)("span",{className:"text-base font-medium",children:e.phone_number})]}),Object(y.jsxs)("div",{className:"flex items-center gap-1",children:[Object(y.jsx)("span",{className:"text-gray-500",children:"Status:"}),Object(y.jsx)("span",{className:"text-base font-medium",children:!1===e.is_active?"Blocked":"Active"})]}),Object(y.jsxs)("div",{className:"flex items-center gap-1",children:[e.custome_access&&Object(y.jsxs)("button",{className:"px-2 py-1 font-semibold text-gray-50 inline-flex items-center rounded ".concat(K&&"RESET"===K?"cursor-wait bg-gray-400":"bg-gray-600"),onClick:function(){return he(e.user_id)},disabled:H,children:[Object(y.jsx)(o.Y,{className:"w-4 h-4 fill-current"}),Object(y.jsx)("span",{children:K&&"RESET"===K?"Reseting...":"Reset Access"})]}),!z&&Object(y.jsxs)("button",{className:"bg-yellow-600 px-2 py-1 font-semibold text-black inline-flex items-center rounded",onClick:function(){return F(!0)},children:[Object(y.jsx)(o.Y,{className:"w-4 h-4 fill-current"}),Object(y.jsx)("span",{children:"Change Role"})]}),e.is_active?Object(y.jsxs)("button",{className:"px-2 py-1 font-semibold hidden text-gray-100 inline-flex items-center rounded ".concat(K&&"STATUS"===K?"cursor-wait bg-red-500":"bg-red-700"),onClick:function(){return!H&&E&&fe(e.user_id)},disabled:H,children:[Object(y.jsx)(o.Y,{className:"w-4 h-4 fill-current"}),Object(y.jsx)("span",{children:K&&"RESET"===K?"Loading...":"Activate"})]}):Object(y.jsxs)("button",{className:"px-2 py-1 font-semibold hidden text-gray-100 inline-flex items-center rounded ".concat(K&&"STATUS"===K?"cursor-wait bg-yellow-500":"bg-yellow-700"),onClick:function(){return!H&&E&&fe(e.user_id)},disabled:H,children:[Object(y.jsx)(o.Y,{className:"w-4 h-4 fill-current"}),Object(y.jsx)("span",{children:K&&"RESET"===K?"Loading...":"Re-Activate"})]})]})]},e.user_id)}))]}),E&&z?Object(y.jsx)(N,{userInfo:E,roleList:s,district:c,feedBack:T,setFeedBack:C,schoolList:Q,roomList:se,setChangeRole:F}):Object(y.jsx)(j.UserAccess,{userInfo:t.filter((function(e){return e.user_id===I}))[0],manageUserId:I,feedBack:T,setFeedBack:C,setUserAccess:ue,userAccess:de,setCurrentAccess:je,currentAccess:xe})]})})]})}))},778:function(e,t,s){"use strict";s.r(t),s.d(t,"UserManagment",(function(){return O}));var c,a=s(5),r=s.n(a),n=s(7),i=s(25),l=s(4),o=s(9),d=s(19),u=s(191),b=s(78),m=s(263),x=(s(190),s(8)),j=s.n(x),f=s(10),h=s(185),p=s(214),g=s(1);!function(e){e.All_Users="All Users",e.Active_Users="Active Users",e.Blocked_Users="Blocked Users"}(c||(c={}));var O=Object(d.b)((function(e){return{userList:e.users,accessRoles:e.access.accessRoles}}),{fetchUserAccess:u.d,fetchAccessRoles:b.b})((function(e){var t=e.userList,s=e.accessRoles,a=e.fetchUserAccess,d=e.fetchAccessRoles,u=Object(l.useState)({allUser:0,activeUser:0,blockedUser:0}),b=Object(i.a)(u,2),x=b[0],O=b[1],v=c.All_Users,_=Object(l.useState)(),y=Object(i.a)(_,2),N=y[0],w=y[1],k=Object(l.useState)(),S=Object(i.a)(k,2),T=S[0],C=S[1],U=Object(l.useState)(),A=Object(i.a)(U,2),E=A[0],L=A[1],R=Object(l.useState)("all"),B=Object(i.a)(R,2),I=B[0],D=B[1],q=Object(l.useState)(!1),M=Object(i.a)(q,2),z=(M[0],M[1],Object(l.useState)(!0)),F=Object(i.a)(z,2),Y=F[0],P=F[1],H=Object(l.useState)(!0),G=Object(i.a)(H,2),V=G[0],W=G[1];Object(l.useEffect)((function(){s.length||d(),t.length||a(),T||X(),s.length&&t.length&&(console.log({userList:t}),L(t),O({allUser:t.length,activeUser:t.filter((function(e){return!e.is_active})).length,blockedUser:t.filter((function(e){return e.is_active})).length}),P(!1))}),[s.length,t,T,d,a]);var K,J,X=function(){var e=Object(n.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.a.get("".concat(f.a.APPLICATION,"/district"));case 3:t=e.sent,C(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log({code_error:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return!0===Y?Object(g.jsx)("div",{className:"text-center mt-7 font-bold text-4xl text-gray-400 animate-pulse",children:"Loading users..."}):Object(g.jsxs)(l.Fragment,{children:[!1,Object(g.jsxs)("div",{className:"w-full my-5 px-1",children:[!1,Object(g.jsxs)("div",{className:"flex flex-row items-center",children:[Object(g.jsx)(o.Cb,{className:"text-blue-700 w-24 h-24"}),Object(g.jsxs)("div",{className:"flex flex-col",children:[Object(g.jsx)("h1",{className:"text-3xl font-semibold",children:"System Users Management"}),Object(g.jsxs)("div",{className:"flex items-center gap-1",children:[Object(g.jsx)("div",{className:"flex flex-row items-center mx-2 md:gap-3 gap-2",children:Object(g.jsxs)("div",{className:"flex items-center mt-1 gap-1",children:[Object(g.jsx)("span",{className:"text-gray-600 text-base italic",children:"All User(s):"}),Object(g.jsx)("span",{className:"text-gray-600 text-2xl font-bold",children:x.allUser})]})}),"all"!==I&&s.length>0&&I.length>0&&E&&Object(g.jsxs)("div",{className:"flex items-center mt-1",children:[Object(g.jsx)(p.d,{}),Object(g.jsxs)("span",{className:"text-gray-600 text-base italic mr-1",children:[(K=s,J=I,K.filter((function(e){return e.system_user_role_id===J}))[0]).role," (s)",":"]}),Object(g.jsx)("span",{className:"text-gray-600 text-2xl font-bold",children:E.length})]})]})]})]})]}),N&&""!==N.type&&Object(g.jsxs)("div",{className:"alert-".concat(N.type," flex flex-row items-center relative my-2"),children:[Object(g.jsx)("span",{className:"absolute top-0 bottom-0 right-0 px-4 py-3",children:Object(g.jsx)(o.x,{className:"h-5 w-5 text-gray-700 hover:font-bold",title:"Close",onClick:function(){return w({type:"",message:""})}})}),Object(g.jsx)(o.F,{className:"h-10 w-10"}),Object(g.jsxs)("div",{className:"alert-content ml-4",children:[Object(g.jsx)("div",{className:"alert-title font-semibold text-lg",children:"success"===N.type?"Success":"Error"}),Object(g.jsx)("div",{className:"alert-description text-sm",children:N.message})]})]}),Object(g.jsxs)("div",{className:"bg-white shadow rounded border border-gray-2 p-2 w-full overflow-x-auto",children:[Object(g.jsxs)("section",{children:[Object(g.jsxs)("div",{className:"my-2 font-medium text-xl flex items-center gap-2",children:[Object(g.jsx)(h.f,{}),"Filter by role"]}),Object(g.jsx)("div",{className:"flex items-center md:flex-row flex-col gap-2",children:Object(g.jsx)("div",{className:"flex flex-col mb-3 md:w-1/4 w-full",children:Object(g.jsxs)("select",{className:"w-full bg-white text-grey-darker border-2 border-gray-500 rounded h-10 px-2 focus:outline-none focus:bg-gray-100 animate__animated animate__fadeIn ".concat(V&&"cursor-wait"),onChange:function(e){return function(){var e,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all";"all"===s?(D("all"),L(t),O({allUser:t.length,activeUser:t.filter((function(e){return e.is_active})).length,blockedUser:t.filter((function(e){return!e.is_active})).length})):(D(s),e=t.filter((function(e){return e.default_access&&e.default_access.system_user_role_id===s})),L(e),O({allUser:t.length,activeUser:e.filter((function(e){return e.is_active})).length,blockedUser:e.filter((function(e){return!e.is_active})).length}))}(e.target.value)},disabled:V,children:[Object(g.jsx)("option",{value:"all",children:"All roles"}),s.length>0?s.map((function(e,t){return Object(g.jsx)("option",{value:e.system_user_role_id,children:e.role},t+e.system_user_role_id)})):Object(g.jsx)("option",{value:"",disabled:!0,children:"No Role"})]})})})]}),v===c.Blocked_Users&&T&&E?Object(g.jsx)(m.b,{users:E.filter((function(e){return!e.is_active})),roleList:s,userTypes:"blocked",district:T,loadingUser:V,setLoadingUser:W}):v===c.Active_Users&&T&&E?Object(g.jsx)(m.b,{users:E.filter((function(e){return e.is_active})),roleList:s,userTypes:"active",district:T,loadingUser:V,setLoadingUser:W}):T&&E?Object(g.jsx)(m.b,{users:E,roleList:s,userTypes:"all",district:T,loadingUser:V,setLoadingUser:W}):Object(g.jsx)("div",{})]})]})}))}}]);
//# sourceMappingURL=30.0f6b9e71.chunk.js.map