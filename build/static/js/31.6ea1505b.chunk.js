(this["webpackJsonpreact-redux-typescript-advance"]=this["webpackJsonpreact-redux-typescript-advance"]||[]).push([[31],{1312:function(t,e,n){"use strict";n.r(e),n.d(e,"DocumentValidationStatus",(function(){return a})),n.d(e,"_DocumentValidation",(function(){return w})),n.d(e,"DocumentValidation",(function(){return R}));var a,s,r=n(25),i=n(24),o=n(27),c=n(26),l=n(4),d=n(11),u=n(23),p=n(3),m=n(19),h=n(21),b=n(32),f=n(694),x=n(72),j=n(683),g=n(687),_=n(33),y=n(690),v=n(82),O=n(703),C=n(684),N=n(1);!function(t){t.Waiting="waiting",t.Approved="approved",t.Rejected="rejected"}(a||(a={})),function(t){t.applicant_name="names",t.national_id="national_id",t.phone_number="phone",t.email="email",t.document="document",t.comment="comment",t.status="status"}(s||(s={}));var S=[{key:s.applicant_name,title:"Applicant name",status:!0},{key:s.national_id,title:"National ID",status:!0},{key:s.email,title:"Email",status:!0},{key:s.phone_number,title:"Phone",status:!0},{key:s.document,title:"Document title",status:!0},{key:s.comment,title:"Validation comment",status:!0},{key:s.status,title:"Status",status:!0}],w=function(t){Object(o.a)(n,t);var e=Object(c.a)(n);function n(t){var i;return Object(r.a)(this,n),(i=e.call(this,t)).setLoading=function(t){i.setState({loading:t})},i.setLoadingCandidates=function(t){i.setState({loadingCandidates:t})},i.setSelectAll=function(t){i.setState({selectAll:t})},i.setSelectPosition=function(t){i.setState({selectPosition:t})},i.setSelectedPosition=function(t){i.setState({selectedPosition:t})},i.setReportTitle=function(t){i.setState({reportTitle:t})},i.setFormError=function(t){i.setState({formError:t})},i.setSortOrder=function(t){i.setState({sortOrder:t})},i.setSortProperty=function(t){i.setState({sortProperty:t})},i.setIsSorted=function(t){i.setState({isSorted:t})},i.setGenerateReportModal=function(t){i.setState({generateReportModal:t})},i.setDownloading=function(t){i.setState({downloading:t})},i.setSort=function(t){i.state.sortProperty===t&&"ASC"===i.state.sortOrder?i.setSortOrder("DESC"):i.setSortOrder("ASC"),i.setSortProperty(t),i.setIsSorted(!0)},i.loadCandidatesInInstitute=function(t,e){!t&&e&&e.length>0&&null===i.state.thisEducation&&(i.setState({thisEducation:e[0]}),(null==i.props.documentReducer.candidatesInInstitute||i.props.documentReducer.candidatesInInstitute.length<=0)&&i.props.auth.application_session&&i.props.auth.application_session._id?i.props.getCandidatesInInstitute(e[0].education_institute_id,i.props.auth.application_session._id,(function(t,e,n){i.setLoadingCandidates(t),!t&&e.length>0&&(console.error({loadingCandidatesError:e}),i.props.PushPopupAlert({title:e,theme:h.a.danger}),i.setLoadingCandidates(!1)),!t&&n&&i.setState({reportMainData:Object(O.a)(i.props.documentReducer,n,"all")})})):i.setLoadingCandidates(!1))},i.componentDidMount=function(){i.setLoading(!1),(null===i.props.documentReducer.documentCategory||i.props.documentReducer.documentCategory.length<=0)&&i.props.getDocumentCategory(),(null===i.props.documentReducer.documentSubCategory||i.props.documentReducer.documentSubCategory.length<=0)&&i.props.getDocumentSubCategory(),(null===i.props.documentReducer.documentFields||i.props.documentReducer.documentFields.length<=0)&&i.props.getDocumentFields(),null===i.props.education_categories||i.props.education_categories.length<=0?i.props.loadEducationCategories(i.loadCandidatesInInstitute):null===i.state.thisEducation&&i.loadCandidatesInInstitute(!1,i.props.education_categories)},i.FC_GeneratePDF=function(){if(!document.querySelectorAll("#report_content tbody tr").length)return i.props.PushPopupAlert({title:"Can't generate Report of empty Data",theme:h.a.warning}),!1;if(i.props.auth.application_session){var t=document.getElementById("report_content"),e={doneBy:i.props.auth.user.fname+" "+i.props.auth.user.lname,title:"Document Validation Report",subjectTitle:"Document validation ".concat(i.props.sessions&&"none"!==i.props.sessions?i.props.sessions.session_plan_name:"All session"),subject:"All applications",period:i.props.sessions&&"none"!==i.props.sessions?i.props.sessions.session_plan_name:"All session",footer:"Online Recruitment",institute:i.state.thisEducation?i.state.thisEducation.education_category_title:"All institute",orientation:"l"};t&&Object(f.a)(e,t,i.setDownloading)}},i.updateContentToPrint=function(){if(i.props.auth.application_session){var t="Application marks publication Report - "+i.props.auth.application_session.session_plan_name;i.setReportTitle(t)}if(!i.state.reportMainData&&i.props.documentReducer.candidatesInInstitute&&i.setState({reportMainData:Object(O.a)(i.props.documentReducer,i.props.documentReducer.candidatesInInstitute,"all")}),i.state.reportMainData){var e=[],n=1;for(var a in i.state.reportMainData)if(Object.prototype.hasOwnProperty.call(i.state.reportMainData,a)){var s=null;for(var r in s={no:n,names:i.state.reportMainData[a].names,national_id:i.state.reportMainData[a].n_id,phone:i.state.reportMainData[a].phone_number,email:i.state.reportMainData[a].email,document:i.state.reportMainData[a].main_doc_title,comment:i.state.reportMainData[a].validated_by?i.state.reportMainData[a].validated_by.comment:"",status:i.state.reportMainData[a].validation_status},i.state.reportContentExport)Object.prototype.hasOwnProperty.call(i.state.reportContentExport,r)&&!i.state.reportContentExport[r].status&&s&&delete s[i.state.reportContentExport[r].key];s&&e.push(s),n++}i.setState({dataToPrint:e}),e=[],n=1}},i.updateReportContent=function(t){var e=i.state.reportContentExport.findIndex((function(e){return e.key===t})),n=i.state.reportContentExport;n[e].status=!n[e].status,i.setState({reportContentExport:n}),n.find((function(t){return!1===t.status}))?i.setSelectAll(!1):i.setSelectAll(!0),i.updateContentToPrint()},i.isChangeAllowed=function(t){return t!==s.applicant_name&&t!==s.document&&t!==s.national_id},i.resetReportContent=function(t){var e=i.state.reportContentExport;for(var n in e)i.isChangeAllowed(e[n].key)&&(e[n].status=!t);i.setState({reportContentExport:e}),i.setSelectAll(!t),i.updateContentToPrint()},i.FC_FilterReportData=function(t,e){var n=t;return"all"!==e&&(n=n.filter((function(t){return t.validation_status===e}))),n},i.ReportStatuses=function(t){var e=[{title:"All",count:t.length,status:"all"}];return e.push({title:Object(b.a)(a.Waiting.toLocaleLowerCase()),count:t.filter((function(t){return t.validation_status===a.Waiting})).length,status:a.Waiting},{title:Object(b.a)(a.Approved.toLocaleLowerCase()),count:t.filter((function(t){return t.validation_status===a.Approved})).length,status:a.Approved},{title:Object(b.a)(a.Rejected.toLocaleLowerCase()),count:t.filter((function(t){return t.validation_status===a.Rejected})).length,status:a.Rejected}),e},i.state={loading:!0,loadingCandidates:!0,selectedStatus:"all",selectAll:!0,thisEducation:null,reportMainData:null,reportContentExport:S,reportTitle:"Document validation report",dataToPrint:null,sortProperty:"",isSorted:!1,sortOrder:"ASC",searchInput:"",searchPositionInput:"",generateReportModal:null,formError:null,selectPosition:!1,selectedPosition:null,downloading:!1},i}return Object(i.a)(n,[{key:"render",value:function(){var t,e,n=this;return this.state.loading?Object(N.jsx)("div",{className:"text-center mt-7 font-bold text-4xl text-gray-400 animate-pulse",children:"Loading data..."}):null===this.props.auth.application_session?Object(N.jsx)(C.a,{}):Object(N.jsxs)("div",{children:[Object(N.jsx)(j.b,{children:Object(N.jsxs)("div",{className:"pt-1",children:[Object(N.jsx)("div",{className:"text-base font-semibold text-gray-700 pb-2 pt-2",children:"Filter by statuses:"}),null===this.props.documentReducer.candidatesInInstitute||this.state.loadingCandidates?Object(N.jsx)(_.a,{}):this.ReportStatuses(Object(O.a)(this.props.documentReducer,this.props.documentReducer.candidatesInInstitute,"all")).map((function(t,e){return Object(N.jsx)(l.Fragment,{children:Object(N.jsx)("div",{onClick:function(){return n.setState({selectedStatus:t.status})},children:Object(N.jsx)(j.a,{title:t.title,count:t.count,active:n.state.selectedStatus===t.status})})},t.title)}))]})}),Object(N.jsxs)("section",{children:[Object(N.jsxs)("div",{className:"grid md:grid-cols-12",children:[Object(N.jsx)("div",{className:"col-span-8",children:Object(N.jsx)("div",{className:"mt-4 mx-4 flex flex-col gap-1",children:Object(N.jsx)("span",{className:"text-3xl font-bold text-gray-700",children:"Document validation report"})})}),Object(N.jsx)("div",{className:"col-span-4",children:Object(N.jsx)("div",{className:"float-right mt-2",children:this.props.documentReducer.candidatesInInstitute&&this.props.documentReducer.candidatesInInstitute.length>0&&Object(N.jsxs)("div",{className:"flex flex-row items-center justify-end font-bold mb-2",children:[Object(N.jsx)(x.e,{className:"text-2xl text-gray-500"}),Object(N.jsx)("span",{className:"text-gray-500",children:"Export as"}),Object(N.jsx)("button",{className:"px-4 py-1 ml-1 rounded bg-white border hover:text-blue-600 font-bold hover:bg-blue-50 border-gray-200",disabled:!(this.props.documentReducer.candidatesInInstitute&&!this.state.downloading),onClick:function(){n.updateContentToPrint(),n.setGenerateReportModal({reportType:"EXCEL",status:!0})},children:"EXCEL"}),Object(N.jsx)("button",{className:"px-4 py-1 ml-1 rounded bg-white border hover:text-blue-600 font-bold hover:bg-blue-50 border-gray-200 ".concat(this.state.downloading&&"cursor-wait"),onClick:function(){return n.FC_GeneratePDF()},disabled:!this.props.documentReducer.candidatesInInstitute,children:"PDF"})]})})})]}),Object(N.jsxs)("div",{className:"bg-white my-4",children:[Object(N.jsx)("div",{className:"w-full px-2 py-2",children:Object(N.jsx)("input",{onChange:function(t){return n.setState({searchInput:t.target.value})},type:"text",value:this.state.searchInput,placeholder:"Search...",className:"w-full bg-gray-100 py-2 px-3 rounded focus:border-gray-800",disabled:null===this.state.loadingCandidates||null===this.props.documentReducer.candidatesInInstitute||this.FC_FilterReportData(Object(O.a)(this.props.documentReducer,this.props.documentReducer.candidatesInInstitute,"all"),this.state.selectedStatus).length<=0})}),Object(N.jsxs)("table",{className:"w-full shadow",id:"report_content",children:[Object(N.jsx)("thead",{className:"bg-white border-b-2 border-gray-300 text-gray-600 font-bold text-sm",children:Object(N.jsxs)("tr",{children:[Object(N.jsx)("td",{className:"px-2 py-2",children:"#"}),Object(N.jsx)("td",{className:"px-2 py-2 cursor-pointer",onClick:function(){return n.setSort("names")},children:Object(N.jsxs)("div",{className:"flex items-center gap-1",children:["Names ",Object(N.jsx)(x.j,{})]})}),Object(N.jsx)("td",{className:"px-2 py-2 cursor-pointer",onClick:function(){return n.setSort("national_id")},children:Object(N.jsxs)("div",{className:"flex items-center gap-1",children:["National Id ",Object(N.jsx)(x.j,{})]})}),Object(N.jsx)("td",{className:"px-2 py-2 cursor-pointer",onClick:function(){return n.setSort("phone")},children:Object(N.jsxs)("div",{className:"flex items-center gap-1",children:["Phone ",Object(N.jsx)(x.j,{})]})}),Object(N.jsx)("td",{className:"px-2 py-2 cursor-pointer",onClick:function(){return n.setSort("email")},children:Object(N.jsxs)("div",{className:"flex items-center gap-1",children:["Email ",Object(N.jsx)(x.j,{})]})}),Object(N.jsx)("td",{className:"px-2 py-2 cursor-pointer",onClick:function(){return n.setSort("document")},children:Object(N.jsxs)("div",{className:"flex items-center gap-1",children:["Document ",Object(N.jsx)(x.j,{})]})}),Object(N.jsx)("td",{className:"px-2 py-2 cursor-pointer",onClick:function(){return n.setSort("status")},children:Object(N.jsxs)("div",{className:"flex items-center gap-1",children:["Status ",Object(N.jsx)(x.j,{})]})})]})}),Object(N.jsx)("tbody",{children:null===this.props.documentReducer.candidatesInInstitute||this.state.loadingCandidates?Object(N.jsx)(g.a,{cols:8}):(t=this.FC_FilterReportData(Object(O.a)(this.props.documentReducer,this.props.documentReducer.candidatesInInstitute,"all"),this.state.selectedStatus),e=this.state.searchInput,void 0===e||""===e?t:t.filter((function(t){var n;for(var a in t)if(n=!1,"names"!==a&&"n_id"!==a&&"phone_number"!==a&&"main_doc_title"!==a&&"title"!==a&&"description"!==a&&"validation_status"!==a||t[a]&&(n=t[a].toString().toLowerCase().indexOf(e.toLowerCase())>-1),n)break;return n}))).map((function(t,e){return Object(N.jsxs)("tr",{className:"hover:bg-blue-100 hover:text-blue-700 border-b hover:border-blue-500 text-sm bg-white ".concat("rejected"!==t.validation_status&&"approved"!==t.validation_status&&"border-gray-500"),children:[Object(N.jsx)("td",{className:"px-2 py-2",children:e+1}),Object(N.jsx)("td",{className:"px-2 py-2",children:t.names}),Object(N.jsx)("td",{className:"px-2 py-2",children:t.n_id}),Object(N.jsx)("td",{className:"px-2 py-2",children:t.phone_number}),Object(N.jsx)("td",{className:"px-2 py-2",children:t.email}),Object(N.jsx)("td",{className:"px-2 py-2",children:t.main_doc_title}),Object(N.jsx)("td",{className:"px-2 py-2 ".concat("rejected"===t.validation_status?"text-yellow-700":"approved"===t.validation_status?"text-blue-700":""),children:Object(b.a)(t.validation_status)})]},e+t.user_id)}))})]})]})]}),null!==this.state.generateReportModal&&!0===this.state.generateReportModal.status&&Object(N.jsx)(m.d,{title:Object(N.jsx)("div",{className:"flex flex-row gap-4 items-center",children:Object(N.jsxs)("div",{className:"flex flex-col",children:[Object(N.jsx)("span",{className:"font-bold text-2xl text-gray-500",children:"Generating Report contents"}),Object(N.jsxs)("span",{className:"text-sm text-blue-600 font-normal",children:["Generating ",this.state.generateReportModal.reportType," ","Report"]})]})}),backDrop:!0,theme:m.c.default,close:function(){return n.setGenerateReportModal(null)},backDropClose:!1,widthSizeClass:m.b.medium,displayClose:!0,padding:{title:!0},children:Object(N.jsxs)("div",{className:"px-6",children:[Object(N.jsxs)("div",{className:"my-2 text-base text-gray-700 sm:text-lg",children:[Object(N.jsxs)("div",{className:"flex flex-col",children:[Object(N.jsx)("label",{children:"Title"}),Object(N.jsx)("input",{type:"text",className:"text-left input-white w-20 inline-block ".concat(this.state.formError&&"report_title"===this.state.formError.element?"border-red-500":"border-gray-500"," border-2"),placeholder:"Sub Category Title",value:this.state.reportTitle,onChange:function(t){n.setFormError(null),n.setReportTitle(t.target.value)},disabled:!this.state.reportMainData}),this.state.formError&&"report_title"===this.state.formError.element&&Object(N.jsx)("span",{className:"text-red-500",children:this.state.formError.msg})]}),Object(N.jsxs)("div",{className:"flex flex-col mt-2",children:[Object(N.jsx)("label",{children:"Report content"}),Object(N.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 items-center gap-2 mt-2",children:this.state.reportContentExport.map((function(t,e){return Object(N.jsxs)("div",{className:"flex items-center gap-1 ".concat(n.isChangeAllowed(t.key)?"cursor-pointer":"cursor-not-allowed"),onClick:function(){return n.isChangeAllowed(t.key)&&n.updateReportContent(t.key)},title:n.isChangeAllowed(t.key)?"":"Required for every report!",children:[t.status?Object(N.jsx)(d.s,{className:"w-6 h-6 text-blue-700"}):Object(N.jsx)(d.t,{className:"w-6 h-6"}),Object(N.jsx)("span",{children:t.title})]},e)}))}),this.state.formError&&"report_content"===this.state.formError.element&&Object(N.jsx)("span",{className:"text-red-500",children:this.state.formError.msg})]})]}),Object(N.jsxs)("div",{className:"flex justify-between mb-2 mt-4",children:[Object(N.jsxs)("div",{className:"flex items-center gap-1 cursor-pointer",onClick:function(){return n.resetReportContent(n.state.selectAll)},children:[this.state.selectAll?Object(N.jsx)(d.s,{className:"w-6 h-6 text-blue-700"}):Object(N.jsx)(d.t,{className:"w-6 h-6"}),Object(N.jsx)("span",{children:"Select all"})]}),this.state.dataToPrint&&this.state.reportMainData&&Object(N.jsx)(y.a,{fileData:this.state.dataToPrint,fileName:this.state.reportTitle,btnName:"Generate"})]})]})})]})}}]),n}(l.Component),R=Object(u.b)((function(t){return{auth:t.auth,documentReducer:t.document,education_categories:t.schoolLevels.education_categories}}),{getDocumentCategory:v.i,getDocumentSubCategory:v.k,getDocumentFields:v.j,loadEducationCategories:p.Jc,getCandidatesInInstitute:v.h,PushPopupAlert:p.Rb})(w)},683:function(t,e,n){"use strict";n.d(e,"b",(function(){return h})),n.d(e,"a",(function(){return b}));var a=n(25),s=n(24),r=n(27),i=n(26),o=n(4),c=n.n(o),l=n(23),d=n(3),u=n(11),p=n(1),m=function(t){Object(r.a)(n,t);var e=Object(i.a)(n);function n(t){var s;return Object(a.a)(this,n),(s=e.call(this,t)).componentDidMount=function(){return s.props.PageHasSubNav(!0)},s.componentWillUnmount=function(){return s.props.PageHasSubNav(!1)},s.state={loading:!1},s}return Object(s.a)(n,[{key:"render",value:function(){if(!1===this.props.auth.isAuthenticated)return null;var t=this.props.system.navigation;return Object(p.jsx)("div",{className:"fixed w-48 p-1 pr-2 pl-6 text-gray-700 bg-white ".concat(!0===t?"lg:left-16  left-16":" -left-72 lg:left-16","  top-0 bottom-0 pt-20 z-30 shadow-lg  transition-all duration-500 ease-in-out overflow-y-auto"),children:this.props.children})}}]),n}(c.a.Component),h=Object(l.b)((function(t){return{auth:t.auth,system:t.system}}),{NavToogle:d.Pb,PageHasSubNav:d.Qb})(m),b=function(t){var e=t.title,n=void 0===e?"":e,a=t.icon,s=void 0===a?u.n:a,r=t.active,i=void 0!==r&&r,o=t.count,c=void 0===o?0:o,l=s;return Object(p.jsxs)("section",{className:"".concat(!0===i?"bg-blue-500 text-white font-bold":"bg-blue-100 text-blue-800"," mb-1 hover:font-bold py-1 hover:bg-blue-400 hover:text-white --font-bold  px-2 rounded-md flex cursor-pointer items-center"),children:[Object(p.jsxs)("section",{className:"flex-1",children:[Object(p.jsx)(l,{className:"inline-block mr-1 text-xs"}),Object(p.jsx)("span",{children:n})]}),c>0?Object(p.jsx)("span",{className:"px-0.5 my-1 text-xs bg-blue-600 text-white rounded-full",children:c}):null]})}},684:function(t,e,n){"use strict";var a=n(4),s=n.n(a),r=n(50),i=n(1),o=function(t){t.title;var e=t.description,n=void 0===e?"Please Wait for the system to publish the sessions or contact the administrator":e,a=t.content,s=void 0===a?void 0:a;return Object(i.jsx)("div",{className:"w-full my-5",children:Object(i.jsxs)("section",{className:"py-10 flex flex-col items-center rounded border border-gray-300 bg-white text-2xl font-medium text-yellow-800 animate__animated animate__pulse",children:[Object(i.jsxs)("div",{className:"flex flex-col items-center",children:[Object(i.jsx)(r.q,{className:"w-32 h-32"}),n]}),s&&s,!1]})})};e.a=s.a.memo(o)},687:function(t,e,n){"use strict";n(4);var a=n(1);e.a=function(t){var e=function(){for(var e=[],n=0;n<t.cols;n++)e.push(n);return e.map((function(t){return Object(a.jsx)("td",{className:"p-3 text-center whitespace-nowrap",children:Object(a.jsx)("div",{className:"w-full h-4 rounded bg-gray-200 animate__animated animate__pulse animate__delay-5s animate__infinite"})},t)}))};return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("tr",{className:"border-b border-gray-200",children:e()},Math.random()),Object(a.jsx)("tr",{className:"border-b border-gray-200",children:e()},Math.random()),Object(a.jsx)("tr",{className:"border-b border-gray-200",children:e()},Math.random())]})}},690:function(t,e,n){"use strict";n(4);var a=n(716),s=n(717),r=n(34),i=n(1);e.a=function(t){var e=t.fileData,n=t.fileName,o=t.btnName,c=void 0===o?"Excel":o,l=t.className,d=void 0===l?"flex items-center gap-1 px-4 py-1 rounded text-green-700 bg-white border hover:text-white hover:bg-green-700 border-green-700 font-bold":l,u=t.showIcon,p=void 0===u||u;return Object(i.jsxs)("button",{onClick:function(t){return function(t,e){var n={Sheets:{data:s.utils.json_to_sheet(t)},SheetNames:["data"]},r=s.write(n,{bookType:"xlsx",type:"array"}),i=new Blob([r],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});a.saveAs(i,e+".xlsx")}(e,n)},className:d,children:[p&&Object(i.jsx)(r.j,{}),c]})}},694:function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var a=n(5),s=n.n(a),r=n(7),i=n(715),o=n(28),c=n.p+"static/media/mineduc.11a9ae1c.png";n(722);var l=function(t){var e=t.internal.getNumberOfPages();t.setFont("helvetica","italic"),t.setFontSize(8);for(var n=1;n<=e;n++)t.setPage(n),t.text("Page "+String(n)+" of "+String(e),t.internal.pageSize.width/2,297,{align:"center"})},d=function(){var t=Object(r.a)(s.a.mark((function t(e,n,a){var r,d,u,p,m,h,b,f;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(a(!0),r=e.orientation?e.orientation:"p",d=20,20,185,(u=new i.default(r,"mm","a4")).setTextColor(95,95,95),u.setFontSize(28),u.addImage(c,"png",20,20,10,10),u.text("MINEDUC",32,28.5,void 0,"left"),u.setFontSize(26),u.text(e.title,u.internal.pageSize.getWidth()/2,42.7,void 0,"center"),u.setFontSize(20),u.text(e.institute,u.internal.pageSize.getWidth()/2,53.7,void 0,"center"),p=u.splitTextToSize(e.subject,145),u.setFontSize(16),m=63,u.setTextColor(95,95,95),u.text("".concat(e.subjectTitle,": "),d,m),h=u.getTextWidth("".concat(e.subjectTitle,": ")),u.setTextColor(38,38,38),b=0;b<p.length;b++)m>280&&(m=10,u.addPage()),u.text(p[b],d+h,m),m+=7;return u.setTextColor(95,95,95),u.text("Period: ",d,m+3),h=u.getTextWidth("Period: "),u.setTextColor(38,38,38),u.text(e.period,d+h,m+3),u.autoTable({html:n,startY:85,margin:{horizontal:20},cellPadding:3,rowHeight:20,bodyStyles:{valign:"top"},columnStyles:{email:{cellWidth:"wrap"}},theme:"striped",tableWidth:!0}),u.setFontSize(12),f=u.lastAutoTable.finalY,u.text("Reported by: ".concat(e.doneBy),d,f+15),u.text("Report downloaded on "+Object(o.a)((new Date).toString()),d,f+23),l(u),t.next=35,u.save("".concat(e.title+": "+e.subject+": "+e.period,".pdf"),{returnPromise:!0}).then(a(!1));case 35:case"end":return t.stop()}}),t)})));return function(e,n,a){return t.apply(this,arguments)}}()},703:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return o})),n.d(e,"f",(function(){return c})),n.d(e,"e",(function(){return l})),n.d(e,"c",(function(){return d})),n.d(e,"d",(function(){return u}));var a=n(126),s=n.n(a),r=(n(32),n(30)),i=function(t,e){var n="",a="",s="",r="";if(e.sub_category_id&&e.sub_category_id.length>0&&t.documentSubCategory?a=r=t.documentSubCategory.find((function(t){return t.user_detail_subcategory_id===e.sub_category_id}))?t.documentSubCategory.find((function(t){return t.user_detail_subcategory_id===e.sub_category_id})).title:"Unknown qualification":e.category_id.length>0&&t.documentCategory&&(n=r=t.documentCategory.find((function(t){return t.user_detail_category_id===e.category_id}))?t.documentCategory.find((function(t){return t.user_detail_category_id===e.category_id})).title:"Unknown category"),e.category_subcategory_data.length>0&&t.documentFields){var i=t.documentFields.find((function(t){return t._id===e.category_subcategory_data}));r+=" in "+(s=i?i.title:"Unknown filed")}return{category:n,sub_category:a,field:s,main:r}},o=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"default",a=[];for(var s in e){var r=e[s].details;for(var o in r){var c=e[s].details[o];null!==c.files&&c.files.length>0&&"default"===n&&"waiting"===c.validation_status?a.push({user_id:e[s]._id,n_id:e[s].n_id,fname:e[s].user_info.fname,lname:e[s].user_info.lname,phone_number:e[s].phone_number,district:e[s].user_info.district,email:e[s].email,main_doc_title:i(t,c).main,category_id:c.category_id,sub_category_id:c.sub_category_id,category_subcategory_data:c.category_subcategory_data,title:c.title,description:c.description,files:c.files,start_year:c.start_year,end_year:c.end_year,school:c.school,details_email:c.email,names:c.names,details_phone_number:c.phone_number,company:c.company,year:c.year,doc_id:c.doc_id,validation_status:c.validation_status,validated_by:c.validated_by,doc_history_status:c.doc_history_status,get_in_date:c.get_in_date,approved:c.approved,exams:e[s].exams}):null!==c.files&&c.files.length>0&&"all"===n&&a.push({user_id:e[s]._id,names:e[s].user_info.fname+" "+e[s].user_info.lname,n_id:e[s].n_id,fname:e[s].user_info.fname,lname:e[s].user_info.lname,phone_number:e[s].phone_number,district:e[s].user_info.district,email:e[s].email,main_doc_title:i(t,c).main,category_id:c.category_id,sub_category_id:c.sub_category_id,category_subcategory_data:c.category_subcategory_data,title:c.title,description:c.description,files:c.files,start_year:c.start_year,end_year:c.end_year,school:c.school,details_email:c.email,details_phone_number:c.phone_number,company:c.company,year:c.year,doc_id:c.doc_id,validation_status:c.validation_status,validated_by:c.validated_by,doc_history_status:c.doc_history_status,get_in_date:c.get_in_date,approved:c.approved,exams:e[s].exams})}}return a},c=function(t){if(t&&t.plans){var e=t.plans.find((function(t){return t.type_key===r.d.DOCUMENT_VALIDATION}));if(e){var n=s()(),a=s()(e.start_date),i=s()(e.end_date);if(a.diff(n,"days")<=0&&i.diff(n,"days")>=0&&e.type_status===r.e.OPEN)return!1}}return!0},l=function(t,e,n){var a,s=t.find((function(t){return t._id===e}));return s&&(a=s.details.find((function(t){return t.doc_id===n}))),{user:s,doc:a}},d=function(t,e){return t.filter((function(t){return t.validation_status===e&&t.files})).length},u=function(t,e,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"waiting",s=t;return"docCategory"===e?s=t.filter((function(t){return t.category_id===n&&t.files&&t.files.length>0&&t.validation_status===a})):"docSubCategory"===e&&(s=t.filter((function(t){return t.sub_category_id===n&&t.files&&t.files.length>0&&t.validation_status===a}))),s.length}},713:function(t,e){},718:function(t,e){},719:function(t,e){}}]);
//# sourceMappingURL=31.6ea1505b.chunk.js.map