(this["webpackJsonpreact-redux-typescript-advance"]=this["webpackJsonpreact-redux-typescript-advance"]||[]).push([[11,50],{690:function(e,t,s){"use strict";s.d(t,"g",(function(){return p})),s.d(t,"c",(function(){return h})),s.d(t,"f",(function(){return b})),s.d(t,"b",(function(){return f})),s.d(t,"d",(function(){return x})),s.d(t,"e",(function(){return j})),s.d(t,"a",(function(){return g}));var r,i=s(5),c=s.n(i),o=s(7),n=s(10),a=s.n(n),l=s(6),d=s(8),u=s(16),m=s(14),p=30;!function(e){e.waiting="waiting",e.approved="approved",e.rejected="rejected"}(r||(r={}));var h=function(e,t){return function(){var s=Object(o.a)(c.a.mark((function s(r){return c.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:r({type:l.a.BLOCK_USER_TO_SYSTEM,payload:{id:e,page:t}});case 1:case"end":return s.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}()},b=function(e,t){return function(){var s=Object(o.a)(c.a.mark((function s(r){return c.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:r({type:l.a.UNBLOCK_USER_TO_SYSTEM,payload:{id:e,page:t}});case 1:case"end":return s.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}()},f=function(e,t){return function(){var s=Object(o.a)(c.a.mark((function s(r){return c.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:r({type:l.a.ASSIGN_ROLE_TO_USER,payload:{data:e,page:t}});case 1:case"end":return s.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}()},x=function(e,t){return function(){var s=Object(o.a)(c.a.mark((function s(r){return c.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:r({type:l.a.CUSTOMIZE_USER_ACCESS,payload:{data:e,page:t}});case 1:case"end":return s.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}()},j=function(e,t){return function(){var s=Object(o.a)(c.a.mark((function s(r){return c.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:r({type:l.a.RESET_USER_ACCESS,payload:{user_id:e,page:t}});case 1:case"end":return s.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}()},g=function(){var e=Object(o.a)(c.a.mark((function e(t,s){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(!0,"",null),e.prev=1,Object(u.b)(),e.next=5,a.a.get("".concat(d.a.USER,"/check/").concat(t));case 5:r=e.sent,console.log("=================FC_GetUserBySearch==================="),console.log({FC_GetUserBySearch:r}),console.log("=================FC_GetUserBySearch==================="),s(!1,"",r.data),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),console.error({user_error:e.t0}),s(!1,Object(m.a)(e.t0),null);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t,s){return e.apply(this,arguments)}}()},709:function(e,t,s){"use strict";s.d(t,"b",(function(){return C})),s.d(t,"a",(function(){return q}));var r,i=s(5),c=s.n(i),o=s(7),n=s(25),a=s(24),l=s(27),d=s(26),u=s(10),m=s.n(u),p=s(4),h=s.n(p),b=s(12),f=s(23),x=s(3),j=s(205),g=s(690),v=s(33),O=s(161),_=s(124),y=s(21),R=s(32),N=s(8),w=s(14),I=s(723),P=s(736),k=s(722),A=s(28),U=s(1),C=function(e,t){return e.find((function(e){return e.user_id===t}))};!function(e){e.View_User="View User Info",e.Add_Access="Add Access To User",e.Update_Access="Update User Access",e.Close_Modal="Close Modal"}(r||(r={}));var q=function(e){var t=[];for(var s in e){var r=e[s].districts;for(var i in r){var c=r[i].centers;for(var o in c){var n=c[o].rooms;for(var a in n)t.push({province_id:e[s]._id,province_name:e[s].province_name,district_id:r[i]._id,district_name:r[i].district_name,center_id:c[o]._id,center_name:c[o].center_name,room_id:n[a]._id,room_name:n[a].room_number.toString(),capacity:n[a].capacity,occupied:n[a].occupied})}}}return t},E=function(e){Object(l.a)(s,e);var t=Object(d.a)(s);function s(e){var r;return Object(n.a)(this,s),(r=t.call(this,e)).setLoadingRequest=function(e){r.setState({loadingRequest:e})},r.setLoading=function(e){r.setState({loading:e})},r.setLoadingRequestType=function(e){r.setState({loadingRequestType:e})},r.setRoomList=function(e){r.setState({roomList:e})},r.setRoomTables=function(e){r.setState({roomTable:e})},r.setCurrentAccess=function(e){r.setState({currentAccess:e})},r.setUserAccess=function(e){r.setState({userAccess:e})},r.componentDidMount=function(){0===r.props.allRoom.length&&!0===Object(A.d)(r.props.auth.education_institution_id)?r.props.getAllRoom(r.props.auth.education_institution_id,(function(e,t,s){r.setLoading(e),r.props.setLoadingUser(e),!e&&t.length>0&&r.props.PushPopupAlert({title:t,theme:y.a.danger}),s&&s.length>0&&(r.setRoomList(s),r.setRoomTables(q(s)))})):r.setLoading(!1)},r.tableData=function(){if(r.props.loadingUser||r.state.loading)return[Object(U.jsx)("tr",{className:"border-b border-gray-200 hover:bg-gray-100",children:Object(U.jsx)("td",{className:"p-3 text-center",colSpan:8,children:Object(U.jsx)(v.a,{})})},Math.random())];var e=r.props.users;if(e.length<=0)return[Object(U.jsx)("tr",{className:"border-b border-gray-200 hover:bg-gray-100",children:Object(U.jsx)("td",{className:"p-3 text-center",colSpan:8,children:"No Data Found"})},Math.random())];var t=r.props.currentPage>1?30*(r.props.currentPage-1):0;return e.map((function(e,s){var i,c;return Object(U.jsxs)("tr",{className:"border-b border-gray-200 hover:bg-gray-100 group cursor-pointer",onClick:function(){r.props.setManageUser(e),r.props.setManageUserId(e.user_id)},children:[Object(U.jsx)("td",{className:"p-3 text-left whitespace-nowrap",children:t+s+1}),Object(U.jsx)("td",{className:"p-3 text-left",children:Object(U.jsx)("span",{children:e.user_info&&e.user_info.fname+" "+e.user_info.lname})}),Object(U.jsx)("td",{className:"p-3 text-left",children:e.email}),Object(U.jsx)("td",{className:"p-3 text-left",children:e.user_info&&"M"===e.user_info.sex?"Male":"Female"}),Object(U.jsx)("td",{className:"p-3 text-left text-blue-700 text-base font-medium",children:e.default_access&&e.default_access.system_user_role_id&&e.default_access.system_user_role_id&&Object(U.jsx)("span",{className:"px-2 py-1 font-semibold rounded text-blue-700 bg-blue-100 dark:bg-blue-700 dark:text-blue-100",children:(null===(i=Object(R.e)(r.props.roleList,e.default_access.system_user_role_id))||void 0===i?void 0:i.role)&&Object(R.a)(null===(c=Object(R.e)(r.props.roleList,e.default_access.system_user_role_id))||void 0===c?void 0:c.role)})}),Object(U.jsx)("td",{className:"px-3 text-center",children:Object(U.jsx)("button",{className:"btn bg-gray-200 group-hover:bg-blue-700 group-hover:text-white focus:outline-none",title:"Manage User Access",onClick:function(){r.props.setManageUser(e),r.props.setManageUserId(e.user_id)},children:"Manage"})})]},s+Math.random())}))},r.blockUser=function(){var e=Object(o.a)(c.a.mark((function e(t,s){var i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t||r.props.PushPopupAlert({title:"User Access is required doesn't exist",theme:y.a.danger}),r.setLoadingRequest(!0),window.confirm("Are sure you want to ".concat(s?"block":"activate"," this user?"))){e.next=4;break}return e.abrupt("return",r.setLoadingRequest(!1));case 4:return e.prev=4,e.next=7,m.a.patch("".concat(N.a.AUTH,"/auth/user/disactive/").concat(t),{is_active:!s});case 7:(i=e.sent)&&(console.log("===================================="),console.log({blockUserToSystem:i}),console.log("===================================="),s?r.props.blockUserToSystem(t,r.props.currentPage):r.props.unBlockUserToSystem(t,r.props.currentPage),r.props.PushPopupAlert({title:"User has been ".concat(s?"blocked":"activated","!"),theme:y.a.info})),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(4),console.error({blockUser_ERROR:e.t0}),r.props.PushPopupAlert({title:Object(w.a)(e.t0),theme:y.a.danger});case 15:r.setLoadingRequest(!1),t="";case 17:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(t,s){return e.apply(this,arguments)}}(),r.restUserAccess=function(){var e=Object(o.a)(c.a.mark((function e(t){var s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t||r.props.PushPopupAlert({title:"User Access is required doesn't exist",theme:y.a.warning}),window.confirm("Are sure you want to reset to default access?")){e.next=3;break}return e.abrupt("return",r.setLoadingRequest(!1));case 3:return r.setLoadingRequest(!0),r.setLoadingRequestType("RESET"),e.prev=5,e.next=8,m.a.delete("".concat(N.a.USER,"/access/custom/user/").concat(t));case 8:e.sent&&r.props.resetUserAccess(t,r.props.currentPage),(s=Object(R.f)(r.props.searchFind)?r.props.users.find((function(e){return e.user_id===t})):r.props.manageUser)&&(s.default_access&&r.setUserAccess(s.default_access.access),r.props.PushPopupAlert({title:"Resetting User Access complete successfully",theme:y.a.info}),r.setCurrentAccess(null)),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(5),console.error({reseting_user_access:e.t0}),r.props.PushPopupAlert({title:Object(w.a)(e.t0),theme:y.a.danger});case 18:r.setLoadingRequest(!1),r.setLoadingRequestType(null),t="";case 21:case"end":return e.stop()}}),e,null,[[5,14]])})));return function(t){return e.apply(this,arguments)}}(),r.distinctDistrict=function(e,t){var s=[],r=[];if(t)r=e.find((function(e){return e._id===t}))&&e.find((function(e){return e._id===t})).districts?e.find((function(e){return e._id===t})).districts:[];else for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i))for(var c in e[i].districts)Object.prototype.hasOwnProperty.call(e[i].districts,c)&&(s.includes(e[i].districts[c]._id)||(s.push(e[i].districts[c]._id),r.push(e[i].districts[c])));return r},r.state={loadingRequest:!1,loading:!0,loadingRequestType:null,roomList:null,roomTable:null,userAccess:null,currentAccess:null},r}return Object(a.a)(s,[{key:"render",value:function(){var e=this,t=Object(R.f)(this.props.searchFind)?this.props.users.find((function(t){return t.user_id===e.props.manageUserId})):this.props.manageUser?this.props.manageUser:void 0,s=t&&t.default_access?Object(R.e)(this.props.roleList,t.default_access.system_user_role_id):void 0,r=this.state.roomTable&&t?this.state.roomTable.find((function(e){var s;return e.room_id===(null===(s=t.default_access)||void 0===s?void 0:s.room_id)})):void 0;return Object(U.jsxs)("div",{children:[!this.props.manageUser&&Object(U.jsx)("div",{className:"grid md:grid-cols-5 gap-2 mb-5",children:Object(U.jsxs)("div",{className:"md:col-span-5 rounded",children:[Object(U.jsx)("div",{className:"my-2 flex sm:flex-row flex-col justify-between",children:Object(U.jsx)("div",{className:"flex flex-col md:flex-row gap-1 items-center mx-1.5"})}),this.props.users&&Object(U.jsx)(_.a,{columns:[{columnTitle:"#",alignText:"left",padding:"p-3"},{columnTitle:"Names",alignText:"left",padding:"p-3"},{columnTitle:"Email",alignText:"left",padding:"p-3"},{columnTitle:"Gender",alignText:"left",padding:"p-3"},{columnTitle:"Role",alignText:"left",padding:"p-3"},{columnTitle:"",alignText:"left",padding:"p-3"}],rows:this.tableData,pagination:!1,search:!0,thColor:"gray",loading:this.props.loadingUser||this.state.loading})]})}),this.props.manageUser&&Object(U.jsxs)("div",{className:"bg-gray-100 h-100",children:[Object(U.jsxs)("div",{className:"bg-white border-b border-t px-4 py-2 flex flex-col md:flex-row items-center gap-x-14",children:[t?Object(U.jsxs)("div",{className:"flex flex-col md:flex-row md:items-start items-center w-full gap-3",children:[Object(U.jsx)("img",{src:"pic"!==t.user_info.photo&&void 0!==t.user_info.photo?Object(A.c)(t.user_info.photo):k.a,alt:"",className:"rounded-full w-32 h-32 object-contain"}),Object(U.jsxs)("div",{className:"flex flex-col gap-1 items-start w-full",children:[Object(U.jsx)("span",{className:"text-2xl font-semibold",children:t.user_info.fname+" "+t.user_info.lname}),Object(U.jsxs)("div",{className:"flex items-center",children:[Object(U.jsx)(b.ab,{className:"w-5 h-5"}),Object(U.jsx)("span",{className:"text-lg font-medium",children:s&&s.role})]}),Object(U.jsxs)("div",{className:"flex items-center gap-1",children:[Object(U.jsx)("span",{className:"text-gray-500",children:"Level:"}),Object(U.jsx)("span",{className:"text-base font-medium",children:s&&s.room_required?"Room":s&&s.education_institution_required?"Institute":"-"})]}),s&&s.education_institution_required?Object(U.jsxs)("div",{className:"flex items-center gap-1",children:[Object(U.jsx)("span",{className:"text-gray-500",children:"Institute:"}),Object(U.jsx)("span",{className:"text-base font-medium",children:t.default_access&&this.props.schoolLevels.education_categories&&Object(R.c)(this.props.schoolLevels.education_categories,t.default_access.education_institution_id)?Object(R.c)(this.props.schoolLevels.education_categories,t.default_access.education_institution_id).education_category_title:"Unknown Institute"})]}):s&&s.room_required&&Object(U.jsxs)("div",{className:"flex items-center gap-1",children:[Object(U.jsx)(b.Z,{className:"text-gray-500"}),r&&Object(U.jsx)("span",{className:"text-base font-medium",children:(null===r||void 0===r?void 0:r.district_name)+" - "+(null===r||void 0===r?void 0:r.center_name)+" - Room "+(null===r||void 0===r?void 0:r.room_name)})]})]})]},t.user_id+Math.random()):Object(U.jsx)("div",{className:"w-full",children:Object(U.jsx)(O.b,{theme:O.a.Dark,value:"User info not found"})}),t&&Object(U.jsxs)("div",{className:"flex flex-col w-full",children:[Object(U.jsxs)("div",{className:"flex items-center gap-1",children:[Object(U.jsx)("span",{className:"text-gray-500",children:"NID:"}),Object(U.jsx)("span",{className:"text-base font-medium",children:t.n_id})]}),Object(U.jsxs)("div",{className:"flex items-center gap-1",children:[Object(U.jsx)("span",{className:"text-gray-500",children:"Email:"}),Object(U.jsx)("span",{className:"text-base font-medium",children:t.email})]}),Object(U.jsxs)("div",{className:"flex items-center gap-1",children:[Object(U.jsx)("span",{className:"text-gray-500",children:"Phone:"}),Object(U.jsx)("span",{className:"text-base font-medium",children:t.phone_number})]}),Object(U.jsxs)("div",{className:"flex items-center gap-1",children:[Object(U.jsx)("span",{className:"text-gray-500",children:"Status:"}),Object(U.jsx)("span",{className:"text-base font-medium",children:!1===t.is_active?"Blocked":"Active"})]}),Object(U.jsxs)("div",{className:"flex items-center gap-1",children:[t.custome_access&&Object(U.jsxs)("button",{className:"px-2 py-1 font-semibold text-gray-50 inline-flex items-center rounded ".concat(this.state.loadingRequestType&&"RESET"===this.state.loadingRequestType?"cursor-wait bg-gray-400":"bg-gray-600"),onClick:function(){return e.restUserAccess(t.user_id)},disabled:this.state.loadingRequest,children:[Object(U.jsx)(b.ab,{className:"w-4 h-4 fill-current"}),Object(U.jsx)("span",{children:this.state.loadingRequestType&&"RESET"===this.state.loadingRequestType?"Resetting...":"Reset Access"})]}),!this.props.changeRole&&Object(U.jsxs)("button",{className:"bg-yellow-300 hover:bg-yellow-400 px-2 py-1 font-semibold text-black inline-flex items-center rounded",onClick:function(){return e.props.setChangeRole(!0)},children:[Object(U.jsx)(b.ab,{className:"w-4 h-4 fill-current"}),Object(U.jsx)("span",{children:"Change Role"})]}),t.is_active?Object(U.jsxs)("button",{className:"px-2 py-1 font-semibold text-gray-100 inline-flex items-center rounded ".concat(this.state.loadingRequestType&&"STATUS"===this.state.loadingRequestType?"cursor-wait bg-red-500":"bg-red-700"),onClick:function(){return!e.state.loadingRequest&&e.props.manageUser&&e.blockUser(t.user_id,t.is_active)},disabled:this.state.loadingRequest,children:[Object(U.jsx)(b.ab,{className:"w-4 h-4 fill-current"}),Object(U.jsx)("span",{children:this.state.loadingRequestType&&"RESET"===this.state.loadingRequestType?"Loading...":"Block user"})]}):Object(U.jsxs)("button",{className:"px-2 py-1 font-semibold text-gray-100 inline-flex items-center rounded ".concat(this.state.loadingRequestType&&"STATUS"===this.state.loadingRequestType?"cursor-wait bg-yellow-500":"bg-yellow-700"),onClick:function(){return!e.state.loadingRequest&&e.props.manageUser&&e.blockUser(t.user_id,t.is_active)},disabled:this.state.loadingRequest,children:[Object(U.jsx)(b.ab,{className:"w-4 h-4 fill-current"}),Object(U.jsx)("span",{children:this.state.loadingRequestType&&"RESET"===this.state.loadingRequestType?"Loading...":"Re-Activate"})]})]})]},t.user_id+Math.random())]}),this.props.manageUser&&this.props.changeRole?Object(U.jsx)(P.a,{userInfo:this.props.manageUser,roleList:this.props.roleList,district:this.state.roomList?this.distinctDistrict(this.state.roomList):[],roomList:this.state.roomList,setRoomList:this.setRoomList,setRoomTables:this.setRoomTables,setChangeRole:this.props.setChangeRole,currentPage:this.props.currentPage}):Object(U.jsx)(I.UserAccess,{userInfo:t,manageUserId:this.props.manageUserId,setUserAccess:this.setUserAccess,userAccess:this.state.userAccess,setCurrentAccess:this.setCurrentAccess,currentAccess:this.state.currentAccess,currentPage:this.props.currentPage})]})]})}}]),s}(p.Component);Object(f.b)((function(e){var t=e.schoolLevels,s=e.locations,r=e.auth;return{schoolLevels:t,allRoom:s.roomLocation,auth:r}}),{blockUserToSystem:g.c,unBlockUserToSystem:g.f,resetUserAccess:g.e,getAllRoom:j.q,PushPopupAlert:x.Ub})(E)},722:function(e,t,s){"use strict";t.a=s.p+"static/media/blank_profile.c3f94521.png"},723:function(e,t,s){"use strict";s.r(t),s.d(t,"UserAccess",(function(){return P}));var r=s(5),i=s.n(r),c=s(7),o=s(25),n=s(24),a=s(27),l=s(26),d=s(10),u=s.n(d),m=s(4),p=s.n(m),h=s(71),b=s(12),f=s(714),x=s(694),j=s(23),g=s(37),v=s(3),O=s(690),_=s(124),y=s(21),R=s(8),N=s(14),w=s(1),I=function(e){Object(a.a)(s,e);var t=Object(l.a)(s);function s(e){var r;return Object(o.a)(this,s),(r=t.call(this,e)).setViewPermission=function(e){r.setState({viewPermission:e})},r.setLoadindRequest=function(e){r.setState({loadindRequest:e})},r.setCreatePermission=function(e){r.setState({createPermission:e})},r.setUpdatePermission=function(e){r.setState({updatePermission:e})},r.setDeletePermission=function(e){r.setState({deletePermission:e})},r.setLoadind=function(e){r.setState({loading:e})},r.overrideUserAccess=function(e,t){if(e&&t&&t.length>0){var s=[],i=function(r){if(Object.prototype.hasOwnProperty.call(e,r)){var i=t.find((function(t){return t.id===e[r].id}));i?s.push(i):s.push(e[r])}};for(var c in e)i(c);r.props.setUserAccess(s)}},r.componentDidMount=function(){r.props.userInfo&&r.props.userInfo.custome_access?(r.props.userInfo.default_access&&r.overrideUserAccess(r.props.userInfo.default_access.access,r.props.userInfo.custome_access.access),r.setLoadind(!1)):(r.props.userInfo&&r.props.userInfo.default_access&&r.props.setUserAccess(r.props.userInfo.default_access.access),r.setLoadind(!1))},r.tableData=function(){return r.props.userAccess?r.props.userAccess.map((function(e,t){return Object(w.jsxs)("tr",{className:"text-left border-b border-gray-200 cursor-pointer hover:bg-gray-100 ".concat(r.props.currentAccess&&r.props.currentAccess.id===e.id&&"bg-gray-200 border my-3 hover:bg-gray-100"),onClick:function(){return r.props.currentAccess&&r.props.currentAccess.id===e.id?(r.props.setCurrentAccess(null),r.setCreatePermission(!1),r.setViewPermission(!1),r.setUpdatePermission(!1),r.setDeletePermission(!1)):(r.props.setCurrentAccess(e),r.setCreatePermission(e.permitted.create),r.setViewPermission(e.permitted.view),r.setUpdatePermission(e.permitted.update),r.setDeletePermission(e.permitted.delete))},children:[Object(w.jsx)("td",{className:"px-2 py-1",children:Object(w.jsx)("label",{className:"inline-flex items-center",children:Object(w.jsx)("span",{className:"text-gray-900 capitalize text-xl font-normal cursor-pointer",children:e.task})})}),Object(w.jsx)("td",{children:Object(w.jsxs)("div",{className:"inline-flex items-center text-xl ".concat(e.permitted.create?"text-green-700":"text-red-700"),children:[e.permitted.create?Object(w.jsx)(x.a,{}):Object(w.jsx)(b.P,{}),e.permitted.create?" Yes":"No"]})}),Object(w.jsx)("td",{children:Object(w.jsxs)("div",{className:"inline-flex items-center text-xl ".concat(e.permitted.view?"text-green-700":"text-red-700"),children:[e.permitted.view?Object(w.jsx)(x.a,{}):Object(w.jsx)(b.P,{}),e.permitted.view?" Yes":"No"]})}),Object(w.jsx)("td",{children:Object(w.jsxs)("div",{className:"inline-flex items-center text-xl ".concat(e.permitted.update?"text-green-700":"text-red-700"),children:[e.permitted.update?Object(w.jsx)(x.a,{}):Object(w.jsx)(b.P,{}),e.permitted.update?" Yes":"No"]})}),Object(w.jsx)("td",{children:Object(w.jsxs)("div",{className:"inline-flex items-center text-xl ".concat(e.permitted.delete?"text-green-700":"text-red-700"),children:[e.permitted.delete?Object(w.jsx)(x.a,{}):Object(w.jsx)(b.P,{}),e.permitted.delete?" Yes":"No"]})})]},t+e.id+Math.random())})):[Object(w.jsx)("tr",{children:Object(w.jsx)("td",{children:"No data"})},Math.random())]},r.handleCustomization=function(){var e=Object(c.a)(i.a.mark((function e(t){var s,c,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!r.props.userInfo){e.next=26;break}if(r.setLoadindRequest(!0),s=null,s=r.props.userInfo.custome_access,c=-1,e.prev=6,s&&r.props.currentAccess?(c=s.access.findIndex((function(e){return e.id===r.props.currentAccess.id})))>=0?(s.access[c].permitted.create=r.state.createPermission,s.access[c].permitted.view=r.state.viewPermission,s.access[c].permitted.update=r.state.updatePermission,s.access[c].permitted.delete=r.state.deletePermission):s.access.push({id:r.props.currentAccess.id,task:r.props.currentAccess.task,key:r.props.currentAccess.key,permitted:{create:r.state.createPermission,view:r.state.viewPermission,update:r.state.updatePermission,delete:r.state.deletePermission}}):r.props.currentAccess&&(s={access:[{id:r.props.currentAccess.id,task:r.props.currentAccess.task,key:r.props.currentAccess.key,permitted:{create:r.state.createPermission,view:r.state.viewPermission,update:r.state.updatePermission,delete:r.state.deletePermission}}],user_id:r.props.userInfo.user_id,custome_user_access_id:""}),!s){e.next=19;break}if(null===r.props.userInfo.custome_access){e.next=15;break}return e.next=12,u.a.patch("".concat(R.a.USER,"/access/custom"),{access:s.access,user_id:r.props.userInfo.user_id});case 12:o=e.sent,e.next=18;break;case 15:return e.next=17,u.a.post("".concat(R.a.USER,"/access/custom"),{access:s.access,user_id:r.props.userInfo.user_id});case 17:o=e.sent;case 18:o&&(s.custome_user_access_id=o.data.data.custome_user_access_id,r.props.customizeUserAccess(s,r.props.currentPage),s&&r.props.userInfo.default_access&&r.overrideUserAccess(r.props.userInfo.default_access.access,s.access),r.props.PushPopupAlert({title:"Resetting User Access complete successfully",theme:y.a.info}),s=null,r.props.setCurrentAccess(null),r.setCreatePermission(!1),r.setViewPermission(!1),r.setUpdatePermission(!1),r.setDeletePermission(!1));case 19:e.next=25;break;case 21:e.prev=21,e.t0=e.catch(6),console.error({customize_access:e.t0}),r.props.PushPopupAlert({title:Object(N.a)(e.t0),theme:y.a.danger});case 25:r.setLoadindRequest(!1);case 26:case"end":return e.stop()}}),e,null,[[6,21]])})));return function(t){return e.apply(this,arguments)}}(),r.state={loading:!0,loadindRequest:!1,createPermission:!1,viewPermission:!1,updatePermission:!1,deletePermission:!1},r}return Object(n.a)(s,[{key:"render",value:function(){var e=this;return void 0===this.props.userInfo?Object(w.jsx)(g.a,{to:"/users"}):this.state.loading||null===this.props.userInfo?Object(w.jsx)("div",{className:"text-center py-7 font-bold text-4xl text-gray-400 animate-pulse",children:"Loading User Access..."}):Object(w.jsx)("div",{children:Object(w.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mx-1 my-2",children:[Object(w.jsxs)("div",{className:"col-span-1 md:col-span-3 bg-white w-full overflow-x-auto border rounded text-center p-2 ".concat(this.props.currentAccess?"hidden md:block":""),children:[Object(w.jsx)("span",{className:"text-gray-600 mt-2 font-semibold text-2xl",children:"Settings"}),!this.state.loading&&Object(w.jsx)("div",{className:"overflow-x-auto w-full",children:Object(w.jsx)(_.a,{columns:[{columnTitle:"Access Name",alignText:"left",padding:"p-3"},{columnTitle:"Create",alignText:"left"},{columnTitle:"View",alignText:"left"},{columnTitle:"Update",alignText:"left"},{columnTitle:"Delete",alignText:"left"}],rows:this.tableData,pagination:!1,search:!0,searchBG:"bg-gray-50",thColor:"gray"})})]}),Object(w.jsx)("div",{className:"col-span-1 md:col-span-2",children:this.props.currentAccess?Object(w.jsxs)("div",{className:"",children:[Object(w.jsx)("h1",{className:"text-2xl md:text-3xl font-semibold text-center my-2 text-gray-900",children:"Customize User Access"}),Object(w.jsx)("div",{className:"flex justify-center mb-3",children:Object(w.jsxs)("h2",{className:"text-2xl font-semibold text-center text-gray-600 flex flex-row items-center",children:[Object(w.jsx)(h.i,{className:"w-7 h-7"}),this.props.currentAccess.task]})}),Object(w.jsx)("div",{className:"flex flex-col px-2 md:px-1",children:Object(w.jsxs)("form",{className:"flex flex-col items-center",onSubmit:function(t){return e.handleCustomization(t)},children:[Object(w.jsxs)("div",{className:"inline-flex gap-2 items-center",children:[Object(w.jsx)(f.a,{className:"w-7 h-7 text-gray-600"}),Object(w.jsxs)("div",{className:"flex flex-col",children:[Object(w.jsx)("h3",{className:"font-semibold text-xl",children:"Create"}),Object(w.jsx)("span",{className:"text-gray-600 text-sm md:pr-1",children:"This permission gives the user the ability to create"})]}),Object(w.jsx)("input",{type:"checkbox",className:"form-checkbox h-7 w-7 text-teal-600",onChange:function(){return e.setCreatePermission(!e.state.createPermission)},checked:this.state.createPermission,disabled:this.state.loadindRequest})]}),Object(w.jsxs)("div",{className:"inline-flex gap-2 items-center",children:[Object(w.jsx)(b.Ib,{className:"w-7 h-7 text-gray-600"}),Object(w.jsxs)("div",{className:"flex flex-col",children:[Object(w.jsx)("h3",{className:"font-semibold text-xl",children:"View"}),Object(w.jsx)("span",{className:"text-gray-600 text-sm md:pr-4",children:"This permission gives the user the ability to view"})]}),Object(w.jsx)("input",{type:"checkbox",className:"form-checkbox h-7 w-7 text-teal-600",onChange:function(){return e.setViewPermission(!e.state.viewPermission)},checked:this.state.viewPermission,disabled:this.state.loadindRequest})]}),Object(w.jsxs)("div",{className:"inline-flex gap-2 items-center",children:[Object(w.jsx)(b.F,{className:"w-7 h-7 text-gray-600"}),Object(w.jsxs)("div",{className:"flex flex-col",children:[Object(w.jsx)("h3",{className:"font-semibold text-xl",children:"Update"}),Object(w.jsx)("span",{className:"text-gray-600 text-sm",children:"This permission gives the user the ability to update"})]}),Object(w.jsx)("input",{type:"checkbox",className:"form-checkbox h-7 w-7 text-teal-600",onChange:function(){return e.setUpdatePermission(!e.state.updatePermission)},checked:this.state.updatePermission,disabled:this.state.loadindRequest})]}),Object(w.jsxs)("div",{className:"inline-flex gap-2 items-center",children:[Object(w.jsx)(b.D,{className:"w-7 h-7 text-gray-600"}),Object(w.jsxs)("div",{className:"flex flex-col",children:[Object(w.jsx)("h3",{className:"font-semibold text-xl",children:"Delete"}),Object(w.jsx)("span",{className:"text-gray-600 text-sm md:pr-1",children:"This permission gives the user the ability to delete"})]}),Object(w.jsx)("input",{type:"checkbox",className:"form-checkbox h-7 w-7 text-teal-600",onChange:function(){return e.setDeletePermission(!e.state.deletePermission)},checked:this.state.deletePermission,disabled:this.state.loadindRequest})]}),Object(w.jsxs)("div",{className:"flex items-center justify-center w-full py-3 gap-2",children:[Object(w.jsx)("button",{className:"btn bg-gray-500 hover:bg-gray-700 focus:outline-none text-white",disabled:this.state.loadindRequest,onClick:function(){e.props.setCurrentAccess(null),e.setCreatePermission(!1),e.setViewPermission(!1),e.setUpdatePermission(!1),e.setDeletePermission(!1)},children:"Cancel"}),Object(w.jsx)("button",{className:"btn btn-blue",disabled:this.state.loadindRequest,children:this.state.loadindRequest?"Processing..":"Save Change"})]})]})})]}):Object(w.jsxs)("div",{className:"w-full hidden md:flex flex-col items-center text-gray-600 gap-1 py-3",children:[Object(w.jsx)(b.Rb,{className:"w-20 h-20"}),Object(w.jsx)("span",{className:"text-8 md:text-12",children:"Choose Access to Customize"})]})})]})})}}]),s}(m.Component),P=p.a.memo(Object(j.b)(null,{customizeUserAccess:O.d,PushPopupAlert:v.Ub})(I))},736:function(e,t,s){"use strict";var r=s(5),i=s.n(r),c=s(7),o=s(25),n=s(24),a=s(27),l=s(26),d=s(10),u=s.n(d),m=s(4),p=s.n(m),h=s(12),b=s(694),f=s(23),x=s(3),j=s(205),g=s(690),v=s(33),O=s(124),_=s(21),y=s(32),R=s(8),N=s(14),w=s(28),I=s(17),P=s(50),k=s(1),A=function(e){var t=Object(m.useState)(""),s=Object(I.a)(t,2),r=s[0],i=s[1];return Object(k.jsxs)("section",{className:"border-2 rounded border-gray-400",children:[Object(k.jsxs)("div",{className:"flex items-center w-full my-1",children:[Object(k.jsx)(h.Pb,{className:"w-6 h-6 absolute ml-2"}),Object(k.jsx)("input",{type:"text",placeholder:"Search",className:"focus:border-2 h-7 ml-1 pl-9 mr-2 bg-gray-100 focus:border-gray-700 w-full rounded",onChange:function(e){return i(e.target.value)},value:r,disabled:!(e.roleList.length>0)}),Object(k.jsx)("button",{className:"bg-red-200 text-red-700 py-1 px-2 mr-1 rounded text-sm focus:outline-none",type:"button",onClick:function(){e.setChooseRole(!1)},children:"Close"})]}),Object(k.jsx)("div",{className:"w-full h-52 mt-2 overflow-y-auto divide-y divide-gray-300",children:Object(P.a)(e.roleList,r).length>0?Object(P.a)(e.roleList,r).map((function(t,s){return Object(k.jsx)("section",{children:Object(k.jsxs)("div",{className:"group flex items-center justify-between my-1 hover:bg-gray-100",children:[Object(k.jsx)("div",{className:"p-1 w-full mr-2 cursor-pointer",onClick:function(){e.setChooseRole(!1),!e.loadindRequest&&e.handleSelectRole(t.system_user_role_id)},children:Object(k.jsx)("p",{className:"text-sm font-medium text-black",children:Object(y.a)(t.role)})}),Object(k.jsx)("button",{type:"button",className:"bg-blue-200 group-hover:bg-blue-300 text-blue-700 group-hover:text-blue-800 py-1 px-2 mr-1 rounded text-sm",children:"Choose"})]})},s+t.role)})):Object(k.jsx)("div",{className:"text-center p-3",children:Object(k.jsx)("p",{className:"text-base font-medium text-black",children:"No role available"})})})]})},U=p.a.memo(A),C=s(709),q="".concat(R.a.AUTH,"/auth/user/access"),E=function(e){Object(a.a)(s,e);var t=Object(l.a)(s);function s(e){var r;return Object(o.a)(this,s),(r=t.call(this,e)).setRoleId=function(e){r.setState({roleId:e})},r.setSelectedRole=function(e){r.setState({selectedRole:e})},r.setProvinceId=function(e){r.setState({provinceId:e})},r.setDistrictId=function(e){r.setState({districtId:e})},r.setCenterId=function(e){r.setState({centerId:e})},r.setRoomId=function(e){r.setState({roomId:e})},r.setLoadingForm=function(e){r.setState({loadingForm:e})},r.setLoading=function(e){r.setState({loading:e})},r.setInstituteId=function(e){r.setState({instituteId:e})},r.setFormError=function(e){r.setState({formError:e})},r.setLoadingRequest=function(e){r.setState({loadingRequest:e})},r.setChooseRole=function(e){r.setState({chooseRole:e})},r.setDefaultState=function(e,t){var s,i;t.district_required&&r.props.roomList?((i=r.distinctDistrict(r.props.roomList).find((function(t){return t._id===e.district_id})))&&r.setProvinceId(i.province_id),i&&r.setDistrictId(e.district_id),r.setLoadingForm(!1)):t.room_required&&r.props.roomList?((s=Object(C.a)(r.props.roomList).find((function(t){return t.room_id===e.room_id})))&&r.setProvinceId(s.province_id),s&&r.setDistrictId(s.district_id),s&&r.setCenterId(s.center_id),r.setRoomId(e.room_id),r.setLoadingForm(!1)):r.setLoadingForm(!1)},r.componentDidMount=function(){if(r.props.roleList.length){if(r.props.userInfo.default_access&&r.state.loadingForm){if(!r.state.roleId.length){var e=r.props.roleList.find((function(e){return e.system_user_role_id===r.props.userInfo.default_access.system_user_role_id}));e&&(r.setRoleId(r.props.userInfo.default_access.system_user_role_id),r.setSelectedRole(e),r.setDefaultState(r.props.userInfo.default_access,e))}console.log("===================================="),console.log({vvvvv:r.props.userInfo.default_access}),console.log("====================================")}r.state.selectedRole&&r.props.userInfo.default_access&&r.setDefaultState(r.props.userInfo.default_access,r.state.selectedRole),r.setLoading(!1)}},r.handleSelectRole=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"SELECT";if(r.props.roleList){var s=r.props.roleList.find((function(t){return t.system_user_role_id===e}));s&&(r.setRoleId(e),r.setSelectedRole(s),r.state.formError&&"role_id"===r.state.formError.element&&r.setFormError(null),"SELECT"===t&&(r.setProvinceId(""),r.setDistrictId(""),r.setCenterId(""),r.setRoomId(""),r.setInstituteId("")))}},r.tableData=function(){return r.state.roleId.length>0&&null===r.state.selectedRole&&r.props.roleList&&r.handleSelectRole(r.state.roleId,"DEFAULT"),r.state.selectedRole?r.state.selectedRole.access.map((function(e,t){return Object(k.jsxs)("tr",{className:"text-left border-b border-gray-200 hover:bg-gray-100",children:[Object(k.jsx)("td",{className:"px-2 py-1",children:Object(k.jsx)("label",{className:"inline-flex items-center",children:Object(k.jsx)("span",{className:"text-gray-900 capitalize text-xl font-normal cursor-pointer",children:e.task})})}),Object(k.jsx)("td",{children:Object(k.jsxs)("div",{className:"inline-flex items-center text-xl ".concat(e.permitted.create?"text-green-700":"text-red-700"),children:[e.permitted.create?Object(k.jsx)(b.a,{}):Object(k.jsx)(h.P,{}),e.permitted.create?" Yes":"No"]})}),Object(k.jsx)("td",{children:Object(k.jsxs)("div",{className:"inline-flex items-center text-xl ".concat(e.permitted.view?"text-green-700":"text-red-700"),children:[e.permitted.view?Object(k.jsx)(b.a,{}):Object(k.jsx)(h.P,{}),e.permitted.view?" Yes":"No"]})}),Object(k.jsx)("td",{children:Object(k.jsxs)("div",{className:"inline-flex items-center text-xl ".concat(e.permitted.update?"text-green-700":"text-red-700"),children:[e.permitted.update?Object(k.jsx)(b.a,{}):Object(k.jsx)(h.P,{}),e.permitted.update?" Yes":"No"]})}),Object(k.jsx)("td",{children:Object(k.jsxs)("div",{className:"inline-flex items-center text-xl ".concat(e.permitted.delete?"text-green-700":"text-red-700"),children:[e.permitted.delete?Object(k.jsx)(b.a,{}):Object(k.jsx)(h.P,{}),e.permitted.delete?" Yes":"No"]})})]},t+e.id+Math.random())})):[Object(k.jsx)("tr",{children:Object(k.jsx)("td",{colSpan:5,className:"text-center px-2 py-2",children:"No Default Access Available on this Role."})},"55re")]},r.assignRoleToUser=function(){var e=Object(c.a)(i.a.mark((function e(t){var s,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),window.confirm("Are sure you want to change user role?")){e.next=3;break}return e.abrupt("return",!1);case 3:if(r.state.selectedRole){e.next=5;break}return e.abrupt("return",r.setFormError({element:"role_id",msg:"User role is required!"}));case 5:if(!0!==r.state.selectedRole.room_required||!Object(y.f)(r.state.provinceId)){e.next=7;break}return e.abrupt("return",r.setFormError({element:"province_id",msg:"Province is required!"}));case 7:if(!0!==r.state.selectedRole.education_institution_required||!Object(y.f)(r.state.instituteId)){e.next=9;break}return e.abrupt("return",r.setFormError({element:"institute_id",msg:"Institute is required on this role!"}));case 9:if(!0!==r.state.selectedRole.room_required&&!0!==r.state.selectedRole.district_required||!Object(y.f)(r.state.districtId)){e.next=11;break}return e.abrupt("return",r.setFormError({element:"district_id",msg:"District is required!"}));case 11:if(!0!==r.state.selectedRole.room_required||!Object(y.f)(r.state.centerId)){e.next=13;break}return e.abrupt("return",r.setFormError({element:"center_id",msg:"Center is required!"}));case 13:if(!0!==r.state.selectedRole.room_required||!Object(y.f)(r.state.roomId)){e.next=15;break}return e.abrupt("return",r.setFormError({element:"room_id",msg:"Room is required!"}));case 15:return r.setLoadingRequest(!0),s={user_id:r.props.userInfo.user_id,data:{system_user_role_id:r.state.roleId,status:1,role:r.state.selectedRole.role,access:r.state.selectedRole.access,school_id:"",district_id:"",room_id:r.state.selectedRole.room_required?r.state.roomId:"",education_institution_id:r.state.selectedRole.education_institution_required?r.state.instituteId:""}},e.prev=17,e.next=20,u.a.post("".concat(q,"/addroletouser"),{user_id:r.props.userInfo.user_id,system_user_role_id:r.state.roleId,status:1,role:r.state.selectedRole.role,access:!0,school_id:"",district_id:!0===r.state.selectedRole.district_required?r.state.districtId:"",room_id:!0===r.state.selectedRole.room_required?r.state.roomId:"",education_institution_id:r.state.selectedRole.education_institution_required?r.state.instituteId:""});case 20:(c=e.sent)&&(console.log("===================================="),console.log({assignRoleToUser:c}),console.log("===================================="),r.props.assignRoleToUserAccess(s,r.props.currentPage),r.setLoadingRequest(!1),r.props.setChangeRole(!1),r.props.PushPopupAlert({title:"Assigning Role to User completed successfully",theme:_.a.success})),e.next=28;break;case 24:e.prev=24,e.t0=e.catch(17),console.log({role_error:e.t0}),r.props.PushPopupAlert({title:Object(N.a)(e.t0),theme:_.a.danger});case 28:case"end":return e.stop()}}),e,null,[[17,24]])})));return function(t){return e.apply(this,arguments)}}(),r.distinctDistrict=function(e,t){var s=[],r=[];if(t)r=e.find((function(e){return e._id===t}))&&e.find((function(e){return e._id===t})).districts?e.find((function(e){return e._id===t})).districts:[];else for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i))for(var c in e[i].districts)Object.prototype.hasOwnProperty.call(e[i].districts,c)&&(s.includes(e[i].districts[c]._id)||(s.push(e[i].districts[c]._id),r.push(e[i].districts[c])));return r},r.distinctCenter=function(e,t){var s=[],r=[];return Object(C.a)(e).forEach((function(e){s.includes(e.center_id)||e.district_id!==t||(s.push(e.center_id),r.push(e))})),r},r.distinctRoom=function(e,t){var s=[],r=[];return Object(C.a)(e).forEach((function(e){s.includes(e.room_id)||e.center_id!==t||(s.push(e.room_id),r.push(e))})),r},r.FC_LoadRooms=function(e){r.props.getAllRoom(e,(function(e,t,s){r.setState({loadingRoom:e}),!e&&t.length>0&&r.props.PushPopupAlert({title:t,theme:_.a.danger}),s&&s.length>0&&(r.props.setRoomList(s),r.props.setRoomTables(Object(C.a)(s)))}))},r.state={loading:!0,loadingForm:!0,loadingRequest:!1,roleId:"",provinceId:"",districtId:"",roomId:"",instituteId:"",centerId:"",selectedRole:null,formError:null,chooseRole:!1,loadingRoom:!1},r}return Object(n.a)(s,[{key:"render",value:function(){var e,t=this;return!0===this.state.loading||this.state.loadingForm||null===this.props.userInfo.default_access||0===this.state.roleId.length||null===this.state.selectedRole?Object(k.jsx)("div",{className:"text-center py-7 font-bold text-3xl text-gray-400 animate-pulse",children:"Loading..."}):Object(k.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 py-2 md:py-4 px-2 md:px-0",children:[Object(k.jsx)("div",{className:"col-span-1 bg-white w-full overflow-x-auto border rounded",children:Object(k.jsxs)("div",{className:"px-6 md:px-12 py-5 bg-white mx-auto rounded-2xl w-100",children:[Object(k.jsx)("h3",{className:"font-semibold text-2xl text-gray-800 mb-4",children:"Change User Role"}),this.state.loadingForm?Object(k.jsx)(v.a,{}):Object(k.jsx)("form",{onSubmit:function(e){return t.assignRoleToUser(e)},children:Object(k.jsxs)("div",{className:"space-y-5",children:[Object(k.jsxs)("div",{className:"space-y-2",children:[Object(k.jsx)("label",{className:"text-sm font-medium text-gray-700 tracking-wide",children:"User Role"}),!this.state.chooseRole&&Object(k.jsx)("div",{className:"w-full text-base bg-white text-grey-darker cursor-pointer border-2 px-4 py-3 rounded focus:outline-none focus:bg-gray-100 ".concat(this.state.formError&&"role_id"===this.state.formError.element?"border-red-500":"border-gray-400"),onClick:function(){!t.state.loadingRequest&&t.setChooseRole(!0),!t.state.loadingRequest&&t.setFormError(null)},children:this.state.selectedRole?this.state.selectedRole.role:"Select role"}),this.state.chooseRole&&Object(k.jsx)(U,{setChooseRole:this.setChooseRole,handleSelectRole:this.handleSelectRole,roleList:this.props.roleList,loadindRequest:this.state.loadingRequest||this.state.loadingRoom}),this.state.formError&&"role_id"===this.state.formError.element&&Object(k.jsx)("span",{className:"text-red-500",children:this.state.formError.msg})]}),this.state.selectedRole&&(this.state.selectedRole.education_institution_required||this.state.selectedRole.district_required||this.state.selectedRole.room_required)&&Object(k.jsxs)("div",{className:"space-y-2",children:[Object(k.jsx)("label",{className:"mb-5 text-sm font-medium text-gray-700 tracking-wide",children:"Institute"}),Object(k.jsxs)("select",{className:"block w-full text-base bg-white text-grey-darker border-2 rounded px-4 py-3 md:w-full focus:outline-none focus:bg-gray-100 ".concat(this.state.formError&&"institute_id"===this.state.formError.element?"border-red-500":"border-gray-400"),onChange:function(e){t.setInstituteId(e.target.value),t.setProvinceId(""),t.setDistrictId(""),t.setCenterId(""),t.setRoomId(""),t.state.formError&&"institute_id"===t.state.formError.element&&t.setFormError(null),t.FC_LoadRooms(e.target.value)},disabled:this.state.loadingRequest||!0===Object(w.d)(this.props.auth.education_institution_id)||this.state.loadingRoom,value:!0===Object(w.d)(this.props.auth.education_institution_id)?this.props.auth.education_institution_id:this.state.instituteId,children:[Object(k.jsx)("option",{value:"",children:"Select institute"}),this.props.schoolLevels.education_categories&&this.props.schoolLevels.education_categories.length>0?this.props.schoolLevels.education_categories.map((function(e){return Object(k.jsx)("option",{value:e.education_institute_id,children:e.education_category_title},e.education_institute_id+Math.random())})):Object(k.jsx)("option",{value:"",disabled:!0,children:"No institute available"})]}),this.state.formError&&"institute_id"===this.state.formError.element&&Object(k.jsx)("span",{className:"text-red-500",children:this.state.formError.msg})]}),this.state.selectedRole&&this.state.selectedRole.room_required&&Object(k.jsxs)("div",{className:"space-y-2",children:[Object(k.jsx)("label",{className:"mb-5 text-sm font-medium text-gray-700 tracking-wide",children:"Province"}),Object(k.jsxs)("select",{className:"block w-full text-base bg-white text-grey-darker border-2 rounded px-4 py-3 md:w-full focus:outline-none focus:bg-gray-100 ".concat(this.state.formError&&"province_id"===this.state.formError.element?"border-red-500":"border-gray-400"),onChange:function(e){t.setProvinceId(e.target.value),t.state.formError&&"province_id"===t.state.formError.element&&t.setFormError(null),t.setDistrictId(""),t.setCenterId(""),t.setRoomId("")},value:this.state.provinceId,disabled:this.state.loadingRequest||this.state.loadingRoom,children:[Object(k.jsx)("option",{value:"",children:"Select province"}),this.props.roomList&&this.props.roomList.map((function(e){return Object(k.jsx)("option",{value:e._id,children:e.province_name},e._id+Math.random())}))]}),this.state.formError&&"province_id"===this.state.formError.element&&Object(k.jsx)("span",{className:"text-red-500",children:this.state.formError.msg})]}),this.state.selectedRole&&(this.state.selectedRole.district_required||this.state.selectedRole.room_required)&&Object(k.jsxs)("div",{className:"space-y-2",children:[Object(k.jsx)("label",{className:"mb-5 text-sm font-medium text-gray-700 tracking-wide",children:"District"}),Object(k.jsxs)("select",{className:"block w-full text-base bg-white text-grey-darker border-2 rounded px-4 py-3 md:w-full focus:outline-none focus:bg-gray-100 ".concat(this.state.formError&&"district_id"===this.state.formError.element?"border-red-500":"border-gray-400"),onChange:function(e){t.setDistrictId(e.target.value),t.state.formError&&"district_id"===t.state.formError.element&&t.setFormError(null),t.setCenterId(""),t.setRoomId("")},value:this.state.districtId,disabled:this.state.loadingRequest||this.state.loadingRoom,children:[Object(k.jsx)("option",{value:"",children:"Select district"}),this.props.roomList&&this.distinctDistrict(this.props.roomList,Object(y.f)(this.state.provinceId)?void 0:this.state.provinceId).length>0?this.distinctDistrict(this.props.roomList,Object(y.f)(this.state.provinceId)?void 0:this.state.provinceId).map((function(e){return Object(k.jsx)("option",{value:e._id,children:e.district_name},e._id+Math.random())})):Object(k.jsx)("option",{value:"",disabled:!0,children:"No district found"})]}),this.state.formError&&"district_id"===this.state.formError.element&&Object(k.jsx)("span",{className:"text-red-500",children:this.state.formError.msg})]}),this.state.selectedRole&&this.state.selectedRole.room_required&&Object(k.jsxs)("div",{className:"space-y-2",children:[Object(k.jsx)("label",{className:"mb-5 text-sm font-medium text-gray-700 tracking-wide",children:"Center"}),Object(k.jsxs)("select",{className:"block w-full text-base bg-white text-grey-darker border-2 rounded px-4 py-3 md:w-full focus:outline-none focus:bg-gray-100 ".concat(this.state.formError&&"center_id"===this.state.formError.element?"border-red-500":"border-gray-400"),onChange:function(e){t.setCenterId(e.target.value),t.state.formError&&"center_id"===t.state.formError.element&&t.setFormError(null),t.setRoomId("")},disabled:this.state.loadingRequest||this.state.loadingRoom,value:this.state.centerId,children:[Object(k.jsx)("option",{value:"",children:"Select center"}),this.state.districtId&&this.state.districtId.length>0&&this.props.roomList&&this.distinctCenter(this.props.roomList,this.state.districtId).length>0?this.distinctCenter(this.props.roomList,this.state.districtId).map((function(e,t){return Object(k.jsx)("option",{value:e.center_id,children:e.center_name},e.center_id+t+Math.random())})):Object(k.jsx)("option",{value:"",disabled:!0,children:"No center found"})]}),this.state.formError&&"center_id"===this.state.formError.element&&Object(k.jsx)("span",{className:"text-red-500",children:this.state.formError.msg})]}),this.state.selectedRole&&this.state.selectedRole.room_required&&Object(k.jsxs)("div",{className:"space-y-2",children:[Object(k.jsx)("label",{className:"mb-5 text-sm font-medium text-gray-700 tracking-wide",children:"Room"}),Object(k.jsxs)("select",{className:"block w-full text-base bg-white text-grey-darker border-2 rounded px-4 py-3 md:w-full focus:outline-none focus:bg-gray-100 ".concat(this.state.formError&&"room_id"===this.state.formError.element?"border-red-500":"border-gray-400"),onChange:function(e){t.setRoomId(e.target.value),t.state.formError&&"room_id"===t.state.formError.element&&t.setFormError(null)},disabled:this.state.loadingRequest||this.state.loadingRoom,value:this.state.roomId,children:[Object(k.jsx)("option",{value:"",children:"Select room"}),!Object(y.f)(this.state.centerId)&&this.props.roomList&&this.distinctRoom(this.props.roomList,this.state.centerId).length>0?this.distinctRoom(this.props.roomList,this.state.centerId).map((function(e,t){return Object(k.jsx)("option",{value:e.room_id,className:"".concat("0"===e.room_name?"hidden":"block"),children:e.room_name},e.room_id+t+Math.random())})):Object(k.jsx)("option",{value:"",disabled:!0,children:"No room found"})]}),this.state.formError&&"room_id"===this.state.formError.element&&Object(k.jsx)("span",{className:"text-red-500",children:this.state.formError.msg})]}),Object(k.jsxs)("div",{className:"flex justify-between 2xl:justify-start gap-2",children:[Object(k.jsx)("button",{className:"btn bg-gray-500 text-gray-50 focus:outline-none",onClick:function(){t.props.setChangeRole(!1),t.setFormError(null),t.setProvinceId(""),t.setDistrictId(""),t.setCenterId(""),t.setRoomId("")},disabled:this.state.loadingRequest,children:"Back"}),Object(k.jsx)("button",{className:"btn btn-blue focus:outline-none",disabled:this.state.loadingRequest,children:this.state.loadingRequest?"Loading...":"Save Change"})]})]})})]})}),Object(k.jsxs)("div",{className:"cols-span-1 md:col-span-2 bg-white w-full border rounded text-center p-2 hidden md:block",children:[Object(k.jsx)("div",{className:"my-4",children:Object(k.jsxs)("span",{className:"text-gray-600 font-semibold text-2xl",children:[null===(e=this.state.selectedRole)||void 0===e?void 0:e.role,"'s Default Access"]})}),!this.state.loading&&Object(k.jsx)("div",{className:"overflow-x-auto w-full",children:Object(k.jsx)(O.a,{columns:[{columnTitle:"Access Name",alignText:"left",padding:"p-3"},{columnTitle:"Create",alignText:"left"},{columnTitle:"View",alignText:"left"},{columnTitle:"Update",alignText:"left"},{columnTitle:"Delete",alignText:"left"}],rows:this.tableData,pagination:!1,search:!1,searchBG:"bg-gray-50",thColor:"gray",tableId:"defaultAccess"})})]})]})}}]),s}(m.Component);t.a=p.a.memo(Object(f.b)((function(e){return{auth:e.auth,schoolLevels:e.schoolLevels}}),{assignRoleToUserAccess:g.b,getAllRoom:j.q,PushPopupAlert:x.Ub})(E))}}]);
//# sourceMappingURL=11.bf83c290.chunk.js.map