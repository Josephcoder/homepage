(this["webpackJsonpreact-redux-typescript-advance"]=this["webpackJsonpreact-redux-typescript-advance"]||[]).push([[41],{201:function(t,e,s){"use strict";s.d(e,"b",(function(){return p})),s.d(e,"g",(function(){return h})),s.d(e,"e",(function(){return b})),s.d(e,"a",(function(){return f})),s.d(e,"c",(function(){return m})),s.d(e,"h",(function(){return j})),s.d(e,"f",(function(){return x})),s.d(e,"d",(function(){return O}));var n=s(5),a=s.n(n),i=s(7),r=s(9),o=s.n(r),c=s(6),l=s(10),d=s(12),u=s(13),p=function(t){return t(!0,""),function(){var e=Object(i.a)(a.a.mark((function e(s){var n,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,Object(d.b)(),e.next=4,o.a.get("".concat(l.a.CLAIMING,"/session-type"));case 4:n=e.sent,console.log({GET_PLANS_TYPES:n.data}),i=[],200===n.status&&null!==n.data&&n.data.length>0&&(i=n.data),s({type:c.a.GET_PLANS_TYPES,payload:i}),t(!1,""),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),console.error({error:Object(u.a)(e.t0)}),t(!1,Object(u.a)(e.t0));case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}()},h=function(t){return console.log({thisType:t}),{type:c.a.SELECT_PLAN_TYPE,payload:t}},b=function(t){return t(!0,""),function(){var e=Object(i.a)(a.a.mark((function e(s){var n,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,Object(d.b)(),e.next=4,o.a.get("".concat(l.a.CLAIMING,"/session/active/"));case 4:n=e.sent,console.log({GET_ACTIVE_SESSION_PLANS:n.data}),i=void 0,n.data&&void 0!==n.data.is_active&&(i=n.data),console.log({session_plan:n.data}),s({type:c.a.GET_ACTIVE_SESSION_PLANS,payload:i||"none"}),t(!1,"",i||"none"),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),console.error({error:Object(u.a)(e.t0)}),t(!1,Object(u.a)(e.t0));case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}()},f=function(t){return t(!0,""),function(){var e=Object(i.a)(a.a.mark((function e(s){var n,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,Object(d.b)(),e.next=4,o.a.get("".concat(l.a.CLAIMING,"/session/"));case 4:n=e.sent,console.log({GET_ALL_SESSION_PLANS:n.data}),i=[],200===n.status&&null!==n.data&&n.data.length>0&&(i=n.data),s({type:c.a.GET_ALL_SESSION_PLANS,payload:i}),t(!1,"",i),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),console.error({error:Object(u.a)(e.t0)}),t(!1,Object(u.a)(e.t0));case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}()},m=function(t){return{type:c.a.CREATE_SESSION_PLAN,payload:t}},j=function(t){return{type:c.a.UPDATE_SESSION_PLAN,payload:t}},x=function(t){return{type:c.a.SESSION_ACTIVATION,payload:t}},O=function(t){return{type:c.a.DELETE_SESSION_PLAN,payload:t}}},401:function(t,e,s){"use strict";s(4);var n=s(274),a=s.n(n),i=s(1);e.a=function(t){return Object(i.jsx)("div",{className:"donut",children:Object(i.jsx)(a.a,{options:t.options,series:t.series,type:"donut",width:"".concat(t.width?t.width:"380")})})}},409:function(t,e,s){"use strict";s(4);var n=s(194),a=s(191),i=s(1);e.a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{title:"",icon:n.n,iconColor:"indigo",count:0,countOver:void 0},e=t.icon;return Object(i.jsxs)("div",{className:"flex items-center px-6 py-4 bg-white w-full rounded-md space-x-2 mb-2 lg:mb-0 shadow-md",children:[Object(i.jsx)("div",{className:"p-3 rounded-full bg-".concat(t.iconColor,"-200 bg-opacity-75"),children:Object(i.jsx)(e,{className:"h-8 w-8 text-".concat(t.iconColor,"-600")})}),Object(i.jsxs)("div",{children:[Object(i.jsxs)("h1",{className:"text-3xl font-semibold text-gray-700",children:[Object(a.h)(t.count)," ",t.countOver&&"/ "+Object(a.h)(t.countOver)]}),Object(i.jsx)("span",{className:"text-gray-500 text-lg",children:t.title})]})]})}},416:function(t,e,s){"use strict";s(4);var n=s(409),a=s(1);e.a=function(t){var e=t.labelsOnRow&&t.labelsOnRow>4?t.labelsOnRow:4;return Object(a.jsxs)("div",{className:"grid 2xl:grid-cols-".concat(e," xl:grid-cols-").concat(e-1," lg:grid-cols-").concat(e-2," md:grid-cols-").concat(e-3," sm:grid-cols-2 grid-cols-1 gap-4 items-center mx-auto"),children:[t.children&&(t.childrenPosition&&"START"===t.childrenPosition||!t.childrenPosition)&&t.children,t.dataLabels.map((function(t,e){return Object(a.jsx)("section",{children:Object(a.jsx)(n.a,{title:t.title,icon:t.icon,iconColor:t.iconColor,count:t.count})},e+t.title)})),t.children&&t.childrenPosition&&"END"===t.childrenPosition&&t.children]})}},459:function(t,e,s){"use strict";var n;s.d(e,"a",(function(){return n})),s.d(e,"b",(function(){return a})),s.d(e,"c",(function(){return i})),s.d(e,"d",(function(){return r})),function(t){t.district_name="district_name",t.center_name="center_name",t.room_number="room_number",t.room_type="room_type",t.room_capacity="room_capacity",t.room_occupation="room_occupation"}(n||(n={}));var a=function(t){var e=[],s=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(s.includes(t[n].district_id)||(s.push(t[n].district_id),e.push({district_id:t[n].district_id,district_name:t[n].district_name})));return e},i=function(t){var e=0;for(var s in t.course_in_room)if(Object.prototype.hasOwnProperty.call(t.course_in_room,s)){var n=t.course_in_room[s];e<n.occupied&&(e=n.occupied)}return e},r=function(t){var e=[];for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){var n=t[s];n.occupied=i(t[s]),e.push(n)}return e}},473:function(t,e,s){"use strict";var n=s(23),a=s(4),i=s(8),r=s(191),o=s(49),c=s(1);e.a=function(t){var e=Object(a.useState)(""),s=Object(n.a)(e,2),l=s[0],d=s[1];return Object(c.jsxs)("section",{className:"".concat(t.isModal?"":"border-2 rounded border-gray-400 shadow-md"),children:[Object(c.jsxs)("div",{className:"flex items-center w-full my-1",children:[Object(c.jsx)(i.Bb,{className:"w-6 h-6 absolute ml-2"}),Object(c.jsx)("input",{type:"text",placeholder:"Search",className:"focus:border-2 h-7 ml-1 pl-9 ".concat(t.isModal?"mr-1":"mr-2"," bg-gray-100 focus:border-gray-700 w-full rounded"),onChange:function(t){return d(t.target.value)},value:l,disabled:!(t.districtList.length>0)}),!t.isModal&&Object(c.jsx)("button",{className:"bg-red-200 text-red-700 py-1 px-2 mr-1 rounded text-sm focus:outline-none",type:"button",onClick:function(){t.setChooseDistrict(!1)},children:"Close"})]}),Object(c.jsxs)("div",{className:"w-full h-52 mt-2 ".concat(t.isModal?"px-2":""," overflow-y-auto divide-y divide-gray-300 ").concat(t.bgWhite&&"bg-white"),children:[Object(c.jsx)("section",{children:Object(c.jsxs)("div",{className:"group flex items-center justify-between my-1 ".concat("all"===t.selectedDistrict?"cursor-default bg-blue-50 hover:bg-blue-100":"hover:bg-blue-100"),children:[Object(c.jsx)("div",{className:"p-1 w-full mr-2 ".concat("all"===t.selectedDistrict?"cursor-default":"cursor-pointer"),onClick:function(){t.setChooseDistrict(!1),!t.loadindRequest&&"all"!==t.selectedDistrict&&t.setSelectedDistrict("all")},children:Object(c.jsx)("p",{className:"text-sm font-medium text-black",children:"All district"})}),Object(c.jsx)("button",{type:"button",className:"bg-blue-200 group-hover:bg-blue-300 text-blue-700 group-hover:text-blue-800 p-1 mr-1 rounded text-sm",children:"Choose"})]})}),Object(o.a)(t.districtList,l).length>0?Object(o.a)(t.districtList,l).map((function(e,s){return Object(c.jsx)("section",{children:Object(c.jsxs)("div",{className:"group flex items-center justify-between my-1 hover:bg-gray-100",children:[Object(c.jsx)("div",{className:"p-1 w-full mr-2 cursor-pointer",onClick:function(){t.setChooseDistrict(!1),!t.loadindRequest&&t.setSelectedDistrict(e)},children:Object(c.jsx)("p",{className:"text-sm font-medium text-black",children:Object(r.a)(e.district_name)})}),Object(c.jsx)("button",{type:"button",className:"bg-blue-200 group-hover:bg-blue-300 text-blue-700 group-hover:text-blue-800 p-1 mr-1 rounded text-sm",children:"Choose"})]})},s+e.district_id)})):Object(c.jsx)("div",{className:"text-center p-3",children:Object(c.jsx)("p",{className:"text-base font-medium text-black",children:"No district available"})})]})]})}},839:function(t,e,s){"use strict";s.r(e),s.d(e,"filterRoom",(function(){return T})),s.d(e,"CenterDashboard",(function(){return I}));var n=s(5),a=s.n(n),i=s(7),r=s(19),o=s(18),c=s(21),l=s(20),d=s(9),u=s.n(d),p=s(4),h=s(194),b=s(17),f=s(3),m=s(201),j=s(459),x=s(25),O=s(191),g=s(10),v=s(13),y=s(401),D=s(416),_=s(82),S=s(83),N=s(223),w=s(33),P=s(473),C=s(1),A=function(t){return Object(C.jsxs)(p.Fragment,{children:[Object(C.jsxs)("div",{className:"mt-3 rounded flex flex-col md:flex-row md:justify-between items-start",children:[Object(C.jsxs)("div",{className:"flex flex-row items-center gap-3 mb-2",children:[Object(C.jsx)(_.b,{className:"text-7xl text-blue-600 hidden md:block"}),Object(C.jsx)("div",{className:"flex flex-col",children:Object(C.jsx)("span",{className:"text-blue-600 text-3xl font-bold",children:"Center Dashboard"})})]}),Object(C.jsxs)("section",{className:"w-full flex flex-col items-end md:w-auto my-2 md:my-0",children:[Object(C.jsx)("div",{children:Object(C.jsx)("select",{className:"bg-white text-gray-600 border border-gray-400 rounded p-2 focus:outline-none ".concat(t.loading&&"cursor-wait"),value:t.thisPeriod,disabled:t.loading,onChange:function(e){t.setThisPeriod(t.application_sessions,e.target.value)},children:t.application_sessions.map((function(t,e){return Object(C.jsx)("option",{value:t.session_plan_id,children:t.session_plan_name},t.session_plan_id+e)}))})}),Object(C.jsx)("div",{className:"mt-1 w-full",children:!t.chooseDistrict&&Object(C.jsxs)("div",{onClick:function(){return t.setChooseDistrict(!0)},className:"font-bold bg-gray-50 border border-gray-400 rounded py-2 cursor-pointer text-xs px-2 hover:underline justify-between text-gray-600  mb-4 w-full flex flex-row items-center animate__animated animate__zoomIn",children:["all"!==t.selectedDistrict?"".concat(t.selectedDistrict.district_name):"All district",Object(C.jsx)(N.c,{className:"text-lg text-gray-600"})]})})]})]}),t.chooseDistrict&&Object(C.jsx)(w.d,{title:Object(C.jsxs)("div",{className:"flex flex-row gap-4 items-center",children:[Object(C.jsx)(S.d,{className:"text-3xl text-blue-600"}),Object(C.jsx)("div",{className:"flex flex-col",children:Object(C.jsx)("span",{className:"font-bold text-xl text-blue-600",children:"Choose district"})})]}),backDrop:!0,theme:w.c.default,close:function(){return t.setChooseDistrict(!1)},backDropClose:!0,widthSizeClass:w.b.small,displayClose:!0,padding:{title:!0},children:Object(C.jsx)(P.a,{setChooseDistrict:t.setChooseDistrict,districtList:Object(j.b)(t.reportMainData),setSelectedDistrict:t.setSelectedDistrict,loadindRequest:t.loading,isModal:!0,selectedDistrict:t.selectedDistrict})})]})},M=s(274),L=s.n(M),E=function(t){Object(c.a)(s,t);var e=Object(l.a)(s);function s(){var t;Object(r.a)(this,s);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(t=e.call.apply(e,[this].concat(a))).generateChartData=function(){var e=[],s=[],n=[],a=[];for(var i in t.props.allData)Object.prototype.hasOwnProperty.call(t.props.allData,i)&&!a.includes(t.props.allData[i]._id)&&0!==t.props.allData[i].room_number&&(a.push(t.props.allData[i]._id),s.push(t.props.allData[i].occupied),n.push(t.props.allData[i].capacity-t.props.allData[i].occupied),e.push([t.props.allData[i].district_name,t.props.allData[i].center_name,t.props.allData[i].room_number.toString()]));return{series:[{name:"Occupied room",data:s},{name:"Remaining room",data:n}],categories:e}},t}return Object(o.a)(s,[{key:"render",value:function(){return Object(C.jsx)(p.Fragment,{children:Object(C.jsx)("div",{className:"w-full",children:Object(C.jsx)(L.a,{options:{chart:{type:"bar",height:this.generateChartData().series.length<=10?350:void 0,stacked:!0},plotOptions:{bar:{horizontal:!0}},stroke:{width:1,colors:["#fff"]},xaxis:{categories:this.generateChartData().categories,labels:{formatter:function(t){return t+" sit(s)"}}},yaxis:{title:{text:void 0}},tooltip:{y:{formatter:function(t){return t+" sit(s)"}}},fill:{opacity:1},noData:{text:"No data found",align:"center",verticalAlign:"middle"},colors:["#059669","#374151"]},series:this.generateChartData().series,type:"bar",width:"100%",height:this.generateChartData().series.length<=10?350:void 0})})})}}]),s}(p.Component),T=function(t,e){var s=t,n=!1;return"all"!==e?s=s.filter((function(t){return t.district_id===e.district_id})):n=!0,n?{all:t.filter((function(t){return"Default"!==t.room_type})),full:t.filter((function(t){return"Default"!==t.room_type&&t.occupied>=t.capacity})),remain:t.filter((function(t){return"Default"!==t.room_type&&t.occupied<t.capacity}))}:{all:s,full:s.filter((function(t){return t.occupied>=t.capacity})),remain:s.filter((function(t){return t.occupied<t.capacity}))}},k=function(t){Object(c.a)(s,t);var e=Object(l.a)(s);function s(t){var n;return Object(r.a)(this,s),(n=e.call(this,t)).setLoading=function(t){n.setState({loading:t})},n.setSelectSession=function(t){n.setState({selectSession:t})},n.setSelectedSession=function(t){n.setState({selectedSession:t})},n.setThisPeriod=function(t,e){var s=t.find((function(t){return t.session_plan_id===e}));s&&(n.setState({selectedSession:s}),n.loadReportMainData(s))},n.loadReportMainData=function(){var t=Object(i.a)(a.a.mark((function t(e){var s;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u.a.get("".concat(g.a.APPLICATION,"/currentroomoccupation/").concat(e.session_plan_id));case 3:s=t.sent,console.log("===================================="),console.log({reportMainData:s.data}),console.log("===================================="),n.setState({reportMainData:s.data}),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(0),console.error({reportMainData_error:t.t0}),n.props.PushPopupAlert({title:Object(v.a)(t.t0),theme:x.a.danger});case 14:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}(),n.componentDidMount=function(){if(null===n.props.sessionPlan.allSessionPlans)n.props.GetAllSessionPlans((function(t,e,s){if(n.setLoading(t),!t&&(Object(O.g)(e)||n.props.PushPopupAlert({title:e,theme:x.a.warning}),s&&s.length>0)){var a=s.find((function(t){return t.is_active}));a?(n.setSelectedSession(a),null===n.state.reportMainData&&n.loadReportMainData(a)):(n.setSelectedSession(s[s.length-1]),null===n.state.reportMainData&&n.loadReportMainData(s[s.length-1]))}}));else if(n.props.sessionPlan.allSessionPlans.length>0){var t=n.props.sessionPlan.allSessionPlans.find((function(t){return t.is_active}));t?(n.setSelectedSession(t),null===n.state.reportMainData&&n.loadReportMainData(t)):(n.setSelectedSession(n.props.sessionPlan.allSessionPlans[n.props.sessionPlan.allSessionPlans.length-1]),null===n.state.reportMainData&&n.loadReportMainData(n.props.sessionPlan.allSessionPlans[n.props.sessionPlan.allSessionPlans.length-1])),n.setLoading(!1)}},n.setChooseDistrict=function(t){n.setState({chooseDistrict:t})},n.setSelectedDistrict=function(t){n.setState({selectedDistrict:t})},n.state={loading:!0,selectSession:!1,selectedSession:null,reportMainData:null,formError:null,selectedDistrict:"all",chooseDistrict:!1},n}return Object(o.a)(s,[{key:"render",value:function(){return null===this.state.selectedSession||null===this.props.sessionPlan.allSessionPlans||null===this.state.reportMainData?Object(C.jsx)("div",{className:"text-center mt-7 font-bold text-4xl text-gray-400 animate-pulse",children:"Loading Data..."}):Object(C.jsxs)("section",{children:[Object(C.jsx)(A,{loading:this.state.loading,thisPeriod:this.state.selectedSession.session_plan_id,setThisPeriod:this.setThisPeriod,application_sessions:this.props.sessionPlan.allSessionPlans,chooseDistrict:this.state.chooseDistrict,setChooseDistrict:this.setChooseDistrict,selectedDistrict:this.state.selectedDistrict,setSelectedDistrict:this.setSelectedDistrict,reportMainData:this.state.reportMainData}),this.state.reportMainData&&Object(C.jsxs)("section",{className:"my-2",children:[Object(C.jsx)("div",{className:"text-2xl font-semibold text-gray-600",children:"Room occupation status"}),Object(C.jsx)(D.a,{dataLabels:[{title:"Total room",icon:h.f,iconColor:"blue",count:T(Object(j.d)(this.state.reportMainData),this.state.selectedDistrict).all.length},{title:"Full room",icon:h.f,iconColor:"green",count:T(Object(j.d)(this.state.reportMainData),this.state.selectedDistrict).full.length},{title:"Available room",icon:h.f,iconColor:"gray",count:T(Object(j.d)(this.state.reportMainData),this.state.selectedDistrict).remain.length}],labelsOnRow:5,children:Object(C.jsx)("div",{className:"flex justify-center",children:Object(C.jsx)(y.a,{options:{labels:["Prepared","Remaining"],legend:{show:!1,position:"bottom",horizontalAlign:"center",fontSize:"16px",itemMargin:{horizontal:3,vertical:0}},plotOptions:{pie:{donut:{labels:{show:!0,name:{show:!0,fontSize:"16px",color:"#2564eb",offsetY:-10},value:{show:!0,fontSize:"20px",fontFamily:"Helvetica, Arial, sans-serif",color:"#2564eb",offsetY:10,formatter:function(t){return t}},total:{show:!0,label:"Total",color:"#2564eb",formatter:function(t){return t.globals.seriesTotals.reduce((function(t,e){return t+e}),0)}}}}}},colors:["#469769","#4b5563"]},series:[T(Object(j.d)(this.state.reportMainData),this.state.selectedDistrict).full.length,T(Object(j.d)(this.state.reportMainData),this.state.selectedDistrict).remain.length],width:210})})})]}),Object(C.jsxs)("section",{className:"my-3 max-w-full bg-white",children:[Object(C.jsx)("div",{className:"flex items-center justify-between px-3",children:Object(C.jsxs)("span",{className:"text-gray-600 font-semibold text-xl py-4 px-0",children:["Room availability"," ","all"===this.state.selectedDistrict?"on country level":"in "+this.state.selectedDistrict.district_name+" district"]})}),Object(C.jsx)("div",{className:"mb-4 pb-2 px-3",children:Object(C.jsx)(E,{allData:Object(j.d)(this.state.reportMainData),selectedDistrict:this.state.selectedDistrict})})]})]})}}]),s}(p.Component),I=Object(b.b)((function(t){return{auth:t.auth,sessionPlan:t.sessionPlan}}),{GetAllSessionPlans:m.a,PushPopupAlert:f.ob})(k)}}]);
//# sourceMappingURL=41.9dfece34.chunk.js.map