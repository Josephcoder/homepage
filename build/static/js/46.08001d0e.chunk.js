(this["webpackJsonpreact-redux-typescript-advance"]=this["webpackJsonpreact-redux-typescript-advance"]||[]).push([[46],{682:function(e,t,s){"use strict";s.d(t,"g",(function(){return m})),s.d(t,"d",(function(){return x})),s.d(t,"b",(function(){return f})),s.d(t,"f",(function(){return h})),s.d(t,"a",(function(){return j})),s.d(t,"c",(function(){return b})),s.d(t,"e",(function(){return O}));var r,c=s(5),n=s.n(c),a=s(7),i=s(10),o=s.n(i),l=s(6),d=s(9),u=s(16),p=s(15),m=30;!function(e){e.waiting="waiting",e.approved="approved",e.rejected="rejected"}(r||(r={}));var x=function(e,t){return t&&t(!0,""),function(){var s=Object(a.a)(n.a.mark((function s(r){var c;return n.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,Object(u.b)(),s.next=4,o.a.get("".concat(d.a.AUTH,"/users?page=").concat(e,"&limit=").concat(m));case 4:c=s.sent,console.log("===================================="),console.log({fetchUserAccess:c}),console.log("===================================="),r({type:l.a.FETCH_USERS_ACCESS,payload:{users:[{data:c.data.users,page:e}],next:c.data.next,previous:c.data.previous,total_users:c.data.total_users}}),t&&t(!1,"",c.data.users),s.next=16;break;case 12:s.prev=12,s.t0=s.catch(0),console.error({user_error:s.t0}),t&&t(!1,Object(p.a)(s.t0));case 16:case"end":return s.stop()}}),s,null,[[0,12]])})));return function(e){return s.apply(this,arguments)}}()},f=function(e,t){return function(){var s=Object(a.a)(n.a.mark((function s(r){return n.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:r({type:l.a.BLOCK_USER_TO_SYSTEM,payload:{id:e,page:t}});case 1:case"end":return s.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}()},h=function(e,t){return function(){var s=Object(a.a)(n.a.mark((function s(r){return n.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:r({type:l.a.UNBLOCK_USER_TO_SYSTEM,payload:{id:e,page:t}});case 1:case"end":return s.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}()},j=function(e,t){return function(){var s=Object(a.a)(n.a.mark((function s(r){return n.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:r({type:l.a.ASSIGN_ROLE_TO_USER,payload:{data:e,page:t}});case 1:case"end":return s.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}()},b=function(e,t){return function(){var s=Object(a.a)(n.a.mark((function s(r){return n.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:r({type:l.a.CUSTOMIZE_USER_ACCESS,payload:{data:e,page:t}});case 1:case"end":return s.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}()},O=function(e,t){return function(){var s=Object(a.a)(n.a.mark((function s(r){return n.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:r({type:l.a.RESET_USER_ACCESS,payload:{user_id:e,page:t}});case 1:case"end":return s.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}()}},713:function(e,t,s){"use strict";s.r(t),s.d(t,"UserAccess",(function(){return k}));var r=s(5),c=s.n(r),n=s(7),a=s(26),i=s(25),o=s(28),l=s(27),d=s(10),u=s.n(d),p=s(4),m=s.n(p),x=s(71),f=s(12),h=s(710),j=s(705),b=s(22),O=s(36),v=s(3),g=s(682),y=s(201),N=s(21),w=s(9),P=s(15),A=s(1),_=function(e){Object(o.a)(s,e);var t=Object(l.a)(s);function s(e){var r;return Object(a.a)(this,s),(r=t.call(this,e)).setViewPermission=function(e){r.setState({viewPermission:e})},r.setLoadindRequest=function(e){r.setState({loadindRequest:e})},r.setCreatePermission=function(e){r.setState({createPermission:e})},r.setUpdatePermission=function(e){r.setState({updatePermission:e})},r.setDeletePermission=function(e){r.setState({deletePermission:e})},r.setLoadind=function(e){r.setState({loading:e})},r.overrideUserAccess=function(e,t){if(e&&t&&t.length>0){var s=[],c=function(r){if(Object.prototype.hasOwnProperty.call(e,r)){var c=t.find((function(t){return t.id===e[r].id}));c?s.push(c):s.push(e[r])}};for(var n in e)c(n);r.props.setUserAccess(s)}},r.componentDidMount=function(){r.props.userInfo&&r.props.userInfo.custome_access?(r.props.userInfo.default_access&&r.overrideUserAccess(r.props.userInfo.default_access.access,r.props.userInfo.custome_access.access),r.setLoadind(!1)):(r.props.userInfo&&r.props.userInfo.default_access&&r.props.setUserAccess(r.props.userInfo.default_access.access),r.setLoadind(!1))},r.tableData=function(){return r.props.userAccess?r.props.userAccess.map((function(e,t){return Object(A.jsxs)("tr",{className:"text-left border-b border-gray-200 cursor-pointer hover:bg-gray-100 ".concat(r.props.currentAccess&&r.props.currentAccess.id===e.id&&"bg-gray-200 border my-3 hover:bg-gray-100"),onClick:function(){return r.props.currentAccess&&r.props.currentAccess.id===e.id?(r.props.setCurrentAccess(null),r.setCreatePermission(!1),r.setViewPermission(!1),r.setUpdatePermission(!1),r.setDeletePermission(!1)):(r.props.setCurrentAccess(e),r.setCreatePermission(e.permitted.create),r.setViewPermission(e.permitted.view),r.setUpdatePermission(e.permitted.update),r.setDeletePermission(e.permitted.delete))},children:[Object(A.jsx)("td",{className:"px-2 py-1",children:Object(A.jsx)("label",{className:"inline-flex items-center",children:Object(A.jsx)("span",{className:"text-gray-900 capitalize text-xl font-normal cursor-pointer",children:e.task})})}),Object(A.jsx)("td",{children:Object(A.jsxs)("div",{className:"inline-flex items-center text-xl ".concat(e.permitted.create?"text-green-700":"text-red-700"),children:[e.permitted.create?Object(A.jsx)(j.a,{}):Object(A.jsx)(f.N,{}),e.permitted.create?" Yes":"No"]})}),Object(A.jsx)("td",{children:Object(A.jsxs)("div",{className:"inline-flex items-center text-xl ".concat(e.permitted.view?"text-green-700":"text-red-700"),children:[e.permitted.view?Object(A.jsx)(j.a,{}):Object(A.jsx)(f.N,{}),e.permitted.view?" Yes":"No"]})}),Object(A.jsx)("td",{children:Object(A.jsxs)("div",{className:"inline-flex items-center text-xl ".concat(e.permitted.update?"text-green-700":"text-red-700"),children:[e.permitted.update?Object(A.jsx)(j.a,{}):Object(A.jsx)(f.N,{}),e.permitted.update?" Yes":"No"]})}),Object(A.jsx)("td",{children:Object(A.jsxs)("div",{className:"inline-flex items-center text-xl ".concat(e.permitted.delete?"text-green-700":"text-red-700"),children:[e.permitted.delete?Object(A.jsx)(j.a,{}):Object(A.jsx)(f.N,{}),e.permitted.delete?" Yes":"No"]})})]},t+e.id+Math.random())})):[Object(A.jsx)("tr",{children:Object(A.jsx)("td",{children:"No data"})},Math.random())]},r.handleCustomization=function(){var e=Object(n.a)(c.a.mark((function e(t){var s,n,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!r.props.userInfo){e.next=26;break}if(r.setLoadindRequest(!0),s=null,s=r.props.userInfo.custome_access,n=-1,e.prev=6,s&&r.props.currentAccess?(n=s.access.findIndex((function(e){return e.id===r.props.currentAccess.id})))>=0?(s.access[n].permitted.create=r.state.createPermission,s.access[n].permitted.view=r.state.viewPermission,s.access[n].permitted.update=r.state.updatePermission,s.access[n].permitted.delete=r.state.deletePermission):s.access.push({id:r.props.currentAccess.id,task:r.props.currentAccess.task,key:r.props.currentAccess.key,permitted:{create:r.state.createPermission,view:r.state.viewPermission,update:r.state.updatePermission,delete:r.state.deletePermission}}):r.props.currentAccess&&(s={access:[{id:r.props.currentAccess.id,task:r.props.currentAccess.task,key:r.props.currentAccess.key,permitted:{create:r.state.createPermission,view:r.state.viewPermission,update:r.state.updatePermission,delete:r.state.deletePermission}}],user_id:r.props.userInfo.user_id,custome_user_access_id:""}),!s){e.next=19;break}if(null===r.props.userInfo.custome_access){e.next=15;break}return e.next=12,u.a.patch("".concat(w.a.AUTH,"/custaccess"),{access:s.access,user_id:r.props.userInfo.user_id});case 12:a=e.sent,e.next=18;break;case 15:return e.next=17,u.a.post("".concat(w.a.AUTH,"/custaccess"),{access:s.access,user_id:r.props.userInfo.user_id});case 17:a=e.sent;case 18:a&&(s.custome_user_access_id=a.data.data.custome_user_access_id,r.props.customizeUserAccess(s,r.props.currentPage),s&&r.props.userInfo.default_access&&r.overrideUserAccess(r.props.userInfo.default_access.access,s.access),r.props.PushPopupAlert({title:"Resetting User Access complete successfully",theme:N.a.info}),s=null,r.props.setCurrentAccess(null),r.setCreatePermission(!1),r.setViewPermission(!1),r.setUpdatePermission(!1),r.setDeletePermission(!1));case 19:e.next=25;break;case 21:e.prev=21,e.t0=e.catch(6),console.error({customize_access:e.t0}),r.props.PushPopupAlert({title:Object(P.a)(e.t0),theme:N.a.danger});case 25:r.setLoadindRequest(!1);case 26:case"end":return e.stop()}}),e,null,[[6,21]])})));return function(t){return e.apply(this,arguments)}}(),r.state={loading:!0,loadindRequest:!1,createPermission:!1,viewPermission:!1,updatePermission:!1,deletePermission:!1},r}return Object(i.a)(s,[{key:"render",value:function(){var e=this;return void 0===this.props.userInfo?Object(A.jsx)(O.a,{to:"/users"}):this.state.loading||null===this.props.userInfo?Object(A.jsx)("div",{className:"text-center py-7 font-bold text-4xl text-gray-400 animate-pulse",children:"Loading User Access..."}):Object(A.jsx)("div",{children:Object(A.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mx-1 my-2",children:[Object(A.jsxs)("div",{className:"col-span-1 md:col-span-3 bg-white w-full overflow-x-auto border rounded text-center p-2 ".concat(this.props.currentAccess?"hidden md:block":""),children:[Object(A.jsx)("span",{className:"text-gray-600 mt-2 font-semibold text-2xl",children:"Settings"}),!this.state.loading&&Object(A.jsx)("div",{className:"overflow-x-auto w-full",children:Object(A.jsx)(y.a,{columns:[{columnTitle:"Access Name",alignText:"left",padding:"p-3"},{columnTitle:"Create",alignText:"left"},{columnTitle:"View",alignText:"left"},{columnTitle:"Update",alignText:"left"},{columnTitle:"Delete",alignText:"left"}],rows:this.tableData,pagination:!1,search:!0,searchBG:"bg-gray-50",thColor:"gray"})})]}),Object(A.jsx)("div",{className:"col-span-1 md:col-span-2",children:this.props.currentAccess?Object(A.jsxs)("div",{className:"",children:[Object(A.jsx)("h1",{className:"text-2xl md:text-3xl font-semibold text-center my-2 text-gray-900",children:"Customize User Access"}),Object(A.jsx)("div",{className:"flex justify-center mb-3",children:Object(A.jsxs)("h2",{className:"text-2xl font-semibold text-center text-gray-600 flex flex-row items-center",children:[Object(A.jsx)(x.i,{className:"w-7 h-7"}),this.props.currentAccess.task]})}),Object(A.jsx)("div",{className:"flex flex-col px-2 md:px-1",children:Object(A.jsxs)("form",{className:"flex flex-col items-center",onSubmit:function(t){return e.handleCustomization(t)},children:[Object(A.jsxs)("div",{className:"inline-flex gap-2 items-center",children:[Object(A.jsx)(h.a,{className:"w-7 h-7 text-gray-600"}),Object(A.jsxs)("div",{className:"flex flex-col",children:[Object(A.jsx)("h3",{className:"font-semibold text-xl",children:"Create"}),Object(A.jsx)("span",{className:"text-gray-600 text-sm md:pr-1",children:"This permission gives the user the ability to create"})]}),Object(A.jsx)("input",{type:"checkbox",className:"form-checkbox h-7 w-7 text-teal-600",onChange:function(){return e.setCreatePermission(!e.state.createPermission)},checked:this.state.createPermission,disabled:this.state.loadindRequest})]}),Object(A.jsxs)("div",{className:"inline-flex gap-2 items-center",children:[Object(A.jsx)(f.Eb,{className:"w-7 h-7 text-gray-600"}),Object(A.jsxs)("div",{className:"flex flex-col",children:[Object(A.jsx)("h3",{className:"font-semibold text-xl",children:"View"}),Object(A.jsx)("span",{className:"text-gray-600 text-sm md:pr-4",children:"This permission gives the user the ability to view"})]}),Object(A.jsx)("input",{type:"checkbox",className:"form-checkbox h-7 w-7 text-teal-600",onChange:function(){return e.setViewPermission(!e.state.viewPermission)},checked:this.state.viewPermission,disabled:this.state.loadindRequest})]}),Object(A.jsxs)("div",{className:"inline-flex gap-2 items-center",children:[Object(A.jsx)(f.D,{className:"w-7 h-7 text-gray-600"}),Object(A.jsxs)("div",{className:"flex flex-col",children:[Object(A.jsx)("h3",{className:"font-semibold text-xl",children:"Update"}),Object(A.jsx)("span",{className:"text-gray-600 text-sm",children:"This permission gives the user the ability to update"})]}),Object(A.jsx)("input",{type:"checkbox",className:"form-checkbox h-7 w-7 text-teal-600",onChange:function(){return e.setUpdatePermission(!e.state.updatePermission)},checked:this.state.updatePermission,disabled:this.state.loadindRequest})]}),Object(A.jsxs)("div",{className:"inline-flex gap-2 items-center",children:[Object(A.jsx)(f.B,{className:"w-7 h-7 text-gray-600"}),Object(A.jsxs)("div",{className:"flex flex-col",children:[Object(A.jsx)("h3",{className:"font-semibold text-xl",children:"Delete"}),Object(A.jsx)("span",{className:"text-gray-600 text-sm md:pr-1",children:"This permission gives the user the ability to delete"})]}),Object(A.jsx)("input",{type:"checkbox",className:"form-checkbox h-7 w-7 text-teal-600",onChange:function(){return e.setDeletePermission(!e.state.deletePermission)},checked:this.state.deletePermission,disabled:this.state.loadindRequest})]}),Object(A.jsxs)("div",{className:"flex items-center justify-center w-full py-3 gap-2",children:[Object(A.jsx)("button",{className:"btn bg-gray-500 hover:bg-gray-700 focus:outline-none text-white",disabled:this.state.loadindRequest,onClick:function(){e.props.setCurrentAccess(null),e.setCreatePermission(!1),e.setViewPermission(!1),e.setUpdatePermission(!1),e.setDeletePermission(!1)},children:"Cancel"}),Object(A.jsx)("button",{className:"btn btn-blue",disabled:this.state.loadindRequest,children:this.state.loadindRequest?"Processing..":"Save Change"})]})]})})]}):Object(A.jsxs)("div",{className:"w-full hidden md:flex flex-col items-center text-gray-600 gap-1 py-3",children:[Object(A.jsx)(f.Nb,{className:"w-20 h-20"}),Object(A.jsx)("span",{className:"text-8 md:text-12",children:"Choose Access to Customize"})]})})]})})}}]),s}(p.Component),k=m.a.memo(Object(b.b)(null,{customizeUserAccess:g.c,PushPopupAlert:v.Nb})(_))}}]);
//# sourceMappingURL=46.08001d0e.chunk.js.map