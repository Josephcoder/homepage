(this["webpackJsonpreact-redux-typescript-advance"]=this["webpackJsonpreact-redux-typescript-advance"]||[]).push([[55],{809:function(e,t,a){"use strict";a.r(t),a.d(t,"ClaimReport",(function(){return w}));var s=a(18),n=a(5),i=a.n(n),l=a(2),c=a(7),r=a(25),o=a(24),d=a(27),u=a(26),b=a(10),h=a.n(b),p=a(4),x=a(23),m=a(3),j=a(1),v=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var s;return Object(r.a)(this,a),(s=t.call(this,e)).setLoading=function(e){return s.setState({loading:e})},s.state={loading:!0},s}return Object(o.a)(a,[{key:"render",value:function(){return Object(j.jsx)("div",{className:"animate__animated animate__fadeIn",children:Object(j.jsx)("div",{className:"grid grid-cols-12",children:Object(j.jsx)("div",{className:"col-span-4 bg-gray-100 rounded p-4",children:"sdf"})})})}}]),a}(p.Component),f=a(33),g=a(8),y=a(32),O=a(9),_=a(28),N=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).setLoading=function(e){return n.setState({loading:e})},n.GetClaims=function(){var e=Object(c.a)(i.a.mark((function e(t,a){var s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.setLoading(!0),e.prev=1,e.next=4,h.a.post("".concat(O.a.CLAIMING,"/user/level/").concat(t),{period_id:a});case 4:(s=e.sent).data&&n.setState({data:s.data}),console.log("Response: ",s.data),n.setLoading(!1),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),console.log("Error: ",Object(l.a)({},e.t0)),n.setLoading(!1);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,a){return e.apply(this,arguments)}}(),n.GetSummaryFilter=function(e){var t,a=[],n=Object(s.a)(e);try{var i=function(){var e=t.value,s=a.find((function(t){return t.position_title===e.position_title}));void 0!==s?(a=a.filter((function(e){return e.position_title!==s.position_title}))).push({position_title:s.position_title,total:s.total+1,pending:e.status===g.b.PENDING?s.pending+1:s.pending,validated:e.status===g.b.EVALUATED?s.validated+1:s.validated}):a.push({position_title:e.position_title,total:e.total,pending:e.status===g.b.PENDING?1:0,validated:e.status===g.b.EVALUATED?1:0})};for(n.s();!(t=n.n()).done;)i()}catch(l){n.e(l)}finally{n.f()}return a},n.GetSummary=function(e){var t,a=[],i=e.filter((function(e){return e.type_key===n.state.selected_claim_type})),l=Object(s.a)(i);try{for(l.s();!(t=l.n()).done;){var c=t.value;a.push({position_title:c.title,total:1,status:c.claims.filter((function(e){return e.level===n.state.selected_level}))[0].claim_status})}}catch(r){l.e(r)}finally{l.f()}return n.GetSummaryFilter(a).sort((function(e,t){return e.pending<t.pending?1:t.pending<e.pending?-1:0}))},n.GetSummaryCounts=function(e){var t,a=0,n=0,i=0,l=Object(s.a)(e);try{for(l.s();!(t=l.n()).done;){var c=t.value;a+=c.pending,n+=c.validated,i+=c.total}}catch(r){l.e(r)}finally{l.f()}return{pending:a,validated:n,total:i}},n.componentDidMount=function(){if(null===n.props.schoolLevels.selectedEducationCategory){if(null!==n.props.schoolLevels.education_categories){var e=n.props.schoolLevels.education_categories.find((function(e){return e.education_institute_id===n.props.auth.education_institution_id}));void 0!==e&&(n.props.setSelectedEducationCategory(e),null!==e.session_plan&&n.GetClaims(n.state.selected_level,e.session_plan._id))}}else null!==n.props.schoolLevels.selectedEducationCategory.session_plan&&n.GetClaims(n.state.selected_level,n.props.schoolLevels.selectedEducationCategory.session_plan._id)},n.state={loading:!0,error:"",success:"",data:null,selected_level:1,selected_claim_type:g.g.APPLICATION,view_type:"Table"},n}return Object(o.a)(a,[{key:"render",value:function(){var e,t=this,a=null===(e=this.props.schoolLevels.education_categories)||void 0===e?void 0:e.find((function(e){return e.education_institute_id===t.props.auth.education_institution_id}));return void 0===a?Object(j.jsx)("div",{children:Object(j.jsxs)("div",{className:"rounded-xl border-2 border-gray-600 flex flex-col items-center justify-center p-7 text-center w-full mt-5 bg-white",children:[Object(j.jsx)("span",{className:"font-extrabold text-3xl text-gray-600",children:"Your institute is not yet defined"}),Object(j.jsx)("span",{children:"If you have an institute assigned to you, please refresh your page or wait a moment... your page..."})]})}):!0===this.state.loading||null===this.props.schoolLevels.selectedEducationCategory||null===this.state.data?Object(j.jsxs)("div",{className:"bg-white rounded p-5 mt-5",children:[Object(j.jsx)(f.a,{}),Object(j.jsx)("div",{className:"-mt-5 ml-5",children:"Loading report, please wait..."})]}):(""!==this.state.error&&this.state.error,Object(j.jsx)("div",{children:Object(j.jsxs)("div",{className:"mt-4 bg-white rounded",children:[Object(j.jsxs)("div",{className:"p-4 flex flex-row items-center gap-3 justify-between",children:[Object(j.jsxs)("div",{children:[Object(j.jsxs)("div",{className:"text-3xl font-extrabold",children:["Claiming report (",Object(j.jsx)("span",{className:"text-blue-600 lowercase",children:Object(y.a)(this.state.selected_claim_type.toString())}),")"]}),Object(j.jsxs)("div",{className:"flex flex-row items-center gap-2 ml-2",children:[Object(j.jsxs)("div",{className:"flex flex-col",children:[Object(j.jsx)("span",{className:"text-sm font-bold",children:"Choose claim type"}),Object(j.jsxs)("select",{onChange:function(e){var a=e.target.value;t.setState({selected_claim_type:a})},value:this.state.selected_claim_type,className:"px-3 py-2 rounded border border-gray-500",children:[Object(j.jsx)("option",{value:g.g.APPLICATION,children:"Applications"}),Object(j.jsx)("option",{value:g.g.DOCUMENT_VALIDATION,children:"Document validation"}),Object(j.jsx)("option",{value:g.g.EXAMINATION,children:"Examinations"})]})]}),Object(j.jsxs)("div",{className:"flex flex-col",children:[Object(j.jsx)("span",{className:"text-sm font-bold",children:"Choose claim level"}),Object(j.jsxs)("select",{value:this.state.selected_level,onChange:function(e){if(null!==a.session_plan){var s=parseInt(e.target.value);t.setState({selected_level:s}),t.setLoading(!0),t.GetClaims(s,a.session_plan._id)}},className:"px-3 py-2 rounded border border-gray-500",children:[Object(j.jsx)("option",{value:1,children:"Level 1"}),Object(j.jsx)("option",{value:2,children:"Public Service Commission Level"})]})]})]})]}),Object(j.jsxs)("div",{className:"flex flex-row items-center gap-3",children:[Object(j.jsxs)("div",{className:"flex flex-col rounded bg-blue-100 p-2 text-right",children:[Object(j.jsx)("span",{className:"text-3xl font-extrabold",children:Object(_.h)(this.GetSummaryCounts(this.GetSummary(this.state.data)).total)}),Object(j.jsx)("span",{className:"font-normal text-sm text-blue-900",children:"Total claims"})]}),Object(j.jsxs)("div",{className:"flex flex-col rounded bg-blue-100 p-2 text-right",children:[Object(j.jsx)("span",{className:"text-3xl font-extrabold",children:Object(_.h)(this.GetSummaryCounts(this.GetSummary(this.state.data)).pending)}),Object(j.jsx)("span",{className:"font-normal text-sm text-blue-900",children:"Waiting claims"})]}),Object(j.jsxs)("div",{className:"flex flex-col rounded bg-green-100 p-2 text-right",children:[Object(j.jsx)("span",{className:"text-3xl font-extrabold text-green-900",children:Object(_.h)(this.GetSummaryCounts(this.GetSummary(this.state.data)).validated)}),Object(j.jsx)("span",{className:"font-normal text-sm text-green-900",children:"Validated claims"})]})]})]}),Object(j.jsxs)("div",{className:"border-t border-gray-400 p-4",children:[Object(j.jsxs)("div",{className:"flex flex-row items-center rounded mb-3",children:[Object(j.jsx)("div",{onClick:function(){return t.setState({view_type:"Table"})},className:"px-3 py-2 ".concat("Table"===this.state.view_type?"bg-white font-bold text-blue-800 border-b-4 border-blue-600 rounded-t-md animate__animated animate__fadeIn":"bg-white font-light  border-b-4 border-gray-200 hover:bg-blue-100 hover:text-blue-800 hover:border-blue-600"," cursor-pointer"),children:"Table view"}),Object(j.jsx)("div",{onClick:function(){return t.setState({view_type:"Analytical"})},className:"px-3 py-2 ".concat("Analytical"===this.state.view_type?"bg-white font-bold text-blue-800 border-b-4 border-blue-600 rounded-t-md animate__animated animate__fadeIn":"bg-white font-light  border-b-4 border-gray-200 hover:bg-blue-100 hover:text-blue-800 hover:border-blue-600"," cursor-pointer"),children:"Analytical view"})]}),"Table"===this.state.view_type?Object(j.jsxs)("table",{className:"w-full animate__animated animate__fadeIn",children:[Object(j.jsx)("thead",{className:"bg-blue-100 ",children:Object(j.jsxs)("tr",{className:"",children:[Object(j.jsx)("th",{className:"px-3 py-1 text-center",children:"#"}),Object(j.jsx)("th",{className:"px-3 py-1 text-left",children:"Position"}),Object(j.jsx)("th",{className:"px-3 py-1 text-center",children:"Total claims"}),Object(j.jsx)("th",{className:"px-3 py-1 text-center",children:"Waiting claims"}),Object(j.jsx)("th",{className:"px-3 py-1 text-center",children:"Validated claims"})]})}),Object(j.jsx)("tbody",{children:0===this.GetSummary(this.state.data).length?Object(j.jsx)("tr",{children:Object(j.jsx)("td",{colSpan:5,className:"text-center p-3 text-3xl font-light bg-gray-100 border border-gray-500 rounded",children:"No result found!"})}):this.GetSummary(this.state.data).map((function(e,t){return Object(j.jsxs)("tr",{className:"".concat(t%2!==0?"bg-gray-100":"bg-white"," ").concat(e.total===e.validated?"text-green-900 font-light":0===e.validated?"text-yellow-900 font-bold":"text-black font-light"),children:[Object(j.jsx)("td",{className:"px-3 py-1 text-center",children:t+1}),Object(j.jsx)("td",{className:"px-3 py-1 text-left",children:e.position_title}),Object(j.jsx)("td",{className:"px-3 py-1 text-center",children:Object(_.h)(e.total)}),Object(j.jsx)("td",{className:"px-3 py-1 text-center",children:Object(_.h)(e.pending)}),Object(j.jsx)("td",{className:"px-3 py-1 text-center",children:Object(_.h)(e.validated)})]},t+1)}))})]}):Object(j.jsx)(v,{general_summary:this.GetSummaryCounts(this.GetSummary(this.state.data)),summary_details:this.GetSummary(this.state.data)})]})]})}))}}]),a}(p.Component),w=Object(x.b)((function(e){return{auth:e.auth,system:e.system,positions:e.positions,schoolLevels:e.schoolLevels}}),{setSelectedEducationCategory:m.hd,loadAllPositionsByInstitute:m.Cc})(N)}}]);
//# sourceMappingURL=55.5bfd7f61.chunk.js.map