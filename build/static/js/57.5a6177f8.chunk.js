(this["webpackJsonpreact-redux-typescript-advance"]=this["webpackJsonpreact-redux-typescript-advance"]||[]).push([[57],{1320:function(e,t,a){"use strict";a.r(t),a.d(t,"CreateCenterRoom",(function(){return F}));var s=a(11),c=a(25),r=a(24),n=a(27),l=a(26),i=a(4),d=a.n(i),o=a(12),b=a(23),m=a(3),j=a(42),x=function(e){switch(e){case"sm":return"py-1 px-2 text-sm";case"md":return"py-2 px-4 text-md";case"lg":return"py-3 px-5 text-lg";default:return""}},h=function(e){switch(e){case"accent":return"bg-accent-800 text-black hover:bg-opacity-90";case"accent-light":return"bg-yellow-100 border border-yellow-300 text-yellow-900 hover:bg-accent-800 hover:text-black";case"danger":return"bg-red-500 hover:bg-red-600  text-white";case"danger-light":return"bg-red-100 hover:bg-red-600 text-red-800 hover:text-white";case"primary":return"bg-blue-600 hover:bg-opacity-90  text-white";case"primary-light":return"bg-blue-100 text-blue-800 hover:bg-blue-800  hover:text-white";case"success":return"bg-green-500 hover:bg-green-600  text-white";case"success-light":return"bg-green-100 text-green-800 hover:text-white hover:bg-green-600  text-white";case"default":return"bg-gray-100 hover:bg-gray-200  text-black";default:return""}},u=a(122),O=a(1),g=function(){},p=function(e){var t=e.onClick,a=void 0===t?g:t,s=e.children,c=e.theme,r=void 0===c?"primary":c,n=e.type,l=void 0===n?"submit":n,i=e.full,d=void 0!==i&&i,o=e.disabled,b=void 0!==o&&o,m=e.className,j=void 0===m?"":m,p=e.size,N=void 0===p?"md":p,v=e.loading,f=void 0!==v&&v;return Object(O.jsx)("button",{className:"\n      ".concat(x(N)," \n      ").concat(d?"w-full":""," \n      font-bold rounded \n      ").concat(h(r)," \n      ").concat(j),disabled:b||f,type:l,onClick:a,children:f?Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("section",{className:"block h-0 opacity-0",children:s}),Object(O.jsx)(u.j,{className:"loading-animate text-2xl inline"})]}):s})},N=function(e){var t=e.selectedExam,a=e.cleanExam,s=e.createAttendance,c=e.loading_create_room,r=e.room_is_ready;return Object(O.jsx)("div",{className:"container mx-auto p-3 rounded mb-2 bg-white mt-4",children:Object(O.jsxs)("div",{className:"flex items-center",children:[!r&&Object(O.jsx)("section",{className:"pr-3",children:Object(O.jsx)(p,{theme:"default",onClick:a,children:"Back"})}),Object(O.jsxs)("section",{className:"flex-1",children:[Object(O.jsx)("h1",{className:"text-2xl font-bold",children:r?"Attendance":"Create Attendance"}),null!==t&&Object(O.jsxs)("div",{className:"p-1",children:[Object(O.jsxs)("p",{className:"text-gray-600",children:["Exam: ",Object(O.jsx)("b",{className:"font-bold",children:t.course_name})]}),r&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("p",{className:"text-gray-600",children:["Exam date:"," ",Object(O.jsx)("b",{className:"font-bold",children:t.exam_date})]}),Object(O.jsxs)("p",{className:"text-gray-600",children:["Start time:"," ",Object(O.jsx)("b",{className:"font-bold",children:t.start_time})]}),Object(O.jsxs)("p",{className:"text-gray-600",children:["End time:"," ",Object(O.jsx)("b",{className:"font-bold",children:t.end_time})]})]})]})]}),Object(O.jsx)("section",{children:s&&Object(O.jsx)(p,{onClick:s,size:"lg",theme:"success",loading:c,children:"Create room"})})]})})},v=a(17),f=a(77),_=function(e){switch(e){case"sm":return"p-1 text-sm";case"md":return"p-2 px-4 text-md";case"lg":return"p-3 px-5 text-lg";case"xs":return"p-0.5 text-xs";default:return""}},y=function(e){var t=e.onChange,a=e.value,s=e.error,c=e.label,r=e.placeholder,n=e.type,l=void 0===n?"text":n,d=e.disabled,o=void 0!==d&&d,b=e.name,m=e.Input_className,j=void 0===m?"":m,x=e.Label_className,h=void 0===x?"":x,u=e.InputContainer_className,g=void 0===u?"":u,p=e.MainContainer_className,N=void 0===p?"":p,y=e.size,k=void 0===y?"md":y,w=e.max,C=Object(i.useState)(!1),S=Object(v.a)(C,2),E=S[0],D=S[1];return Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)("div",{className:"w-full my-2 ".concat(N),children:[""!==c&&Object(O.jsx)("label",{htmlFor:"login-form-email",className:"text-primary-900 dark:text-primary-100 ".concat(h),children:c}),Object(O.jsxs)("div",{className:"rounded relative ".concat(g),children:[Object(O.jsx)("input",{type:E?"text":l,name:b,placeholder:r,onChange:t,className:"\n                w-full text-lg rounded border-2 \n                ".concat(_(k),"\n                ").concat(""!==s?"border-red-500 dark:text-white bg-red-100 dark:bg-red-900 dark:bg-opacity-30":"border-primary-800 dark:text-white bg-white dark:bg-primary-900 ","\n                px-3 ").concat(j),value:a,disabled:o,maxLength:w}),"password"===l&&Object(O.jsx)("button",{className:"absolute -ml-11 p-1 mt-0.5 text-accent-800",type:"button",onClick:D.bind(undefined,!E),children:E?Object(O.jsx)(f.j,{className:"text-4xl"}):Object(O.jsx)(f.k,{className:"text-4xl"})}),""!==s&&Object(O.jsx)("p",{className:"text-sm text-red-600 dark:text-red-500",children:s})]})]})})},k=a(19),w=void 0,C=function(e){var t,a,s=e.addNewCandidate,c=e.candidates,r=e.removeCandidate,n=e.course_id,l=e.exam_is_ready,d=Object(i.useState)(!1),b=Object(v.a)(d,2),x=b[0],h=b[1],u=Object(i.useState)(""),g=Object(v.a)(u,2),N=g[0],f=g[1],_=Object(i.useState)(!1),C=Object(v.a)(_,2),S=C[0],E=C[1],D=Object(i.useState)(null),F=Object(v.a)(D,2),A=F[0],I=F[1],z=Object(i.useState)(""),R=Object(v.a)(z,2),P=R[0],L=R[1];return Object(O.jsxs)(O.Fragment,{children:[!0===x&&Object(O.jsx)(k.d,{backDrop:!0,theme:k.c.default,close:function(){return h(!1)},backDropClose:!1,widthSizeClass:k.b.large,displayClose:!0,title:"Search candidate",padding:{title:!0,body:!1,footer:!1},children:Object(O.jsxs)("div",{className:"border-t p-2 ",children:[Object(O.jsxs)("div",{className:"flex items-center",children:[Object(O.jsx)(y,{onChange:function(e){f(e.target.value),L("")},value:N,error:"",label:"",placeholder:"NID Number",name:"",disabled:S,type:"number"}),Object(O.jsx)("div",{className:"py-0",children:Object(O.jsx)(p,{theme:"primary",size:"lg",className:"px-4",loading:S,onClick:function(){return 16!==N.length?L("Please use a valid NID"):void 0!==c.find((function(e){return e.n_id===N}))?L("NID already exist on the list"):(I(null),E(!0),void Object(m.wb)(N,n,(function(e,t,a){!0===e&&null!==t&&I(t),!1===e&&L(a),E(!1)})))},children:"Search"})})]}),Object(O.jsxs)("div",{className:"pt-4",children:[""!==P&&Object(O.jsx)(j.b,{title:P,theme:j.a.danger}),null!==A&&Object(O.jsxs)("div",{className:"p-2 items-center bg-gray-100 rounded border flex",children:[Object(O.jsx)("div",{className:"p-2 text-7xl text-gray-600",children:Object(O.jsx)(o.a,{})}),Object(O.jsxs)("div",{className:"flex-1",children:[Object(O.jsxs)("p",{className:"text-gray-500 pb-0.5",children:["Names:"," ",Object(O.jsxs)("b",{className:"text-black font-bold",children:[null===(t=A.user_info)||void 0===t?void 0:t.fname," ",null===(a=A.user_info)||void 0===a?void 0:a.lname]})]}),Object(O.jsxs)("p",{className:"text-gray-500 pb-0.5",children:["Email:"," ",Object(O.jsx)("b",{className:"text-black font-bold",children:A.email})]}),Object(O.jsxs)("p",{className:"text-gray-500 pb-0.5",children:["Phone:"," ",Object(O.jsx)("b",{className:"text-black font-bold",children:A.phone_number})]}),Object(O.jsxs)("p",{className:"text-gray-500 pb-0.5",children:["NID:"," ",Object(O.jsx)("b",{className:"text-black font-bold",children:A.n_id})]})]}),Object(O.jsx)("div",{className:"w-32",children:!0===l?Object(O.jsx)(O.Fragment,{}):Object(O.jsx)(p,{theme:"success",onClick:function(){s(A),I(null),f("")},children:"Add to the room"})})]})]})]})}),Object(O.jsxs)("div",{className:"container mx-auto mt-2 bg-white rounded animate__animated animate__zoomIn animate__faster",children:[Object(O.jsxs)("div",{className:"p-1 px-2 pt-2 flex pb-3 border-b items-center",children:[Object(O.jsx)("h2",{className:"text-2xl flex-1",children:"Candidates on the list"}),Object(O.jsx)("div",{className:"w-64 text-right",children:Object(O.jsx)(p,{onClick:function(){return h(!0)},children:"Add candidate"})})]}),Object(O.jsx)("div",{className:"flex p-2",children:Object(O.jsxs)("table",{className:"w-full",children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{className:"text-left",children:[Object(O.jsx)("th",{className:"border p-2",children:"#"}),Object(O.jsx)("th",{className:"border p-2",children:"NID"}),Object(O.jsx)("th",{className:"border p-2",children:"Names"}),Object(O.jsx)("th",{className:"border p-2",children:"Email"}),Object(O.jsx)("th",{className:"border p-2",children:"Phone"}),Object(O.jsx)("th",{className:"border p-2"})]})}),Object(O.jsx)("tbody",{children:c.length<=0?Object(O.jsxs)("tr",{children:[" ",Object(O.jsx)("td",{colSpan:9,className:"p-4 text-2xl text-gray-500 text-center",children:"No Candidate on the list"})," "]}):c.map((function(e,t){var a,s;return Object(O.jsxs)("tr",{className:"hover:bg-blue-100",children:[Object(O.jsx)("td",{className:"border p-2",children:t+1}),Object(O.jsx)("td",{className:"border p-2",children:e.n_id}),Object(O.jsxs)("td",{className:"border p-2",children:[null===(a=e.user_info)||void 0===a?void 0:a.fname," ",null===(s=e.user_info)||void 0===s?void 0:s.lname]}),Object(O.jsx)("td",{className:"border p-2",children:e.email}),Object(O.jsx)("td",{className:"border p-2",children:e.phone_number}),Object(O.jsx)("td",{className:"border p-2",children:!0===l?Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(p,{theme:"success-light",size:"sm",onClick:r.bind(w,e._id),children:"Completed"})," ",Object(O.jsx)(p,{theme:"danger",size:"sm",onClick:function(){},children:"Add minutes"})]}):Object(O.jsx)(p,{theme:"danger-light",onClick:r.bind(w,e._id),children:"Remove on list"})})]},t)}))})]})})]})]})},S=a(107),E={target:null,msg:""},D=function(e){Object(n.a)(a,e);var t=Object(l.a)(a);function a(e){var s;return Object(c.a)(this,a),(s=t.call(this,e)).loadData=function(){s.setState({loading:!0,error:E}),Object(m.V)((function(e,t,a){s.setState({loading:!1,exams:t,selected_exam:null,error:e?E:{target:"main-error",msg:a}}),s.clearError()}))},s.selectExam=function(e){s.setState({selected_exam:e})},s.state={loading:!1,selected_exam:null,error:E,exams:[],candidates:[],room_is_ready:!1,loading_create_room:!1},s}return Object(r.a)(a,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"clearError",value:function(){var e=this;setTimeout((function(){e.setState({error:E})}),3e3)}},{key:"createRoom",value:function(){var e,t,a=this;if(null===this.state.selected_exam)return this.setState({error:{target:"main-error",msg:"Select an exam"}});Object(m.I)({application_session_id:"3245345",candidates:this.state.candidates,course_id:null===(e=this.state.selected_exam)||void 0===e?void 0:e.course_id,district:null,exam:this.state.selected_exam,exam_id:null===(t=this.state.selected_exam)||void 0===t?void 0:t._id,group_id:"A",isExpired:!1,room_id:"324652345325"},(function(e,t){!0===e?a.setState({loading:!1,room_is_ready:!0}):a.setState({loading:!1,error:{target:"main-success",msg:"Failed to create room: ".concat(t)}})}))}},{key:"render",value:function(){var e=this;return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("div",{className:"container mx-auto",children:["main-error"===this.state.error.target&&Object(O.jsx)(j.b,{theme:j.a.danger,title:"this.state.error.msg",description:this.state.error.msg}),"main-success"===this.state.error.target&&Object(O.jsx)(j.b,{theme:j.a.danger,title:this.state.error.msg,description:this.state.error.msg})]}),Object(O.jsx)(N,{cleanExam:this.selectExam.bind(this,null),selectedExam:this.state.selected_exam,loading_create_room:this.state.loading_create_room,createAttendance:this.state.room_is_ready?void 0:this.state.candidates.length>0?function(){return e.createRoom()}:void 0,room_is_ready:this.state.room_is_ready}),null!==this.state.selected_exam&&Object(O.jsx)(C,{addNewCandidate:function(t){return e.setState({candidates:[].concat(Object(s.a)(e.state.candidates),[t])})},exam_is_ready:this.state.room_is_ready,candidates:this.state.candidates,course_id:this.state.selected_exam.course_id,removeCandidate:function(t){window.confirm("Are you sure you want to remove the candidate??")&&e.setState({candidates:e.state.candidates.filter((function(e){return e._id!==t}))})},completeExam:function(e,t){},stopCandidate:function(e,t){}}),null===this.state.selected_exam&&Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)("div",{className:"container mx-auto p-2",children:[Object(O.jsxs)("div",{className:"border-b p-2 flex",children:[Object(O.jsx)("h2",{className:"text-3xl flex-1 font-bold",children:"Ready exams"}),Object(O.jsxs)("button",{className:"text-2xl p-2 rounded flex button-blue",onClick:this.loadData,children:[Object(O.jsx)(o.Gb,{className:""})," ",Object(O.jsx)("span",{className:"text-base inline-block pl-1",children:"Reload"})]})]}),!0===this.state.loading?Object(O.jsxs)("div",{className:"",children:[Object(O.jsx)(S.a,{}),Object(O.jsx)("div",{className:"text-center",children:"Loading..."})]}):Object(O.jsx)(O.Fragment,{children:0===this.state.exams.length?Object(O.jsx)("p",{className:"py-5 text-center text-lg text-gray-600",children:"No data found!"}):Object(O.jsxs)("table",{className:" w-full bg-white",children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{className:"text-left",children:[Object(O.jsx)("th",{className:"p-2 w-9 border border-gray-300",children:"#"}),Object(O.jsx)("th",{className:"p-2 border border-gray-300",children:"Title"}),Object(O.jsx)("th",{className:"p-2 border border-gray-300",children:"Position name"}),Object(O.jsx)("th",{className:"p-2 border border-gray-300"})]})}),Object(O.jsx)("tbody",{children:this.state.exams.map((function(t,a){return Object(O.jsxs)("tr",{className:"hover:bg-blue-100",children:[Object(O.jsx)("td",{className:"p-2 border border-gray-300",children:a+1}),Object(O.jsx)("td",{className:"p-2 border border-gray-300 font-bold",children:t.course_name}),Object(O.jsx)("td",{className:"p-2 border border-gray-300",children:t.course_code}),Object(O.jsx)("td",{className:"p-2 border border-gray-300 w-40",children:Object(O.jsx)("button",{className:"button-blue px-2 py-1 w-full rounded",onClick:e.selectExam.bind(e,t),children:"Select exam"})})]},a)}))})]})})]})})]})}}]),a}(d.a.Component),F=Object(b.b)((function(e){return{auth:e.auth}}),{})(D)}}]);
//# sourceMappingURL=57.5a6177f8.chunk.js.map