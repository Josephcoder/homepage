(this["webpackJsonpreact-redux-typescript-advance"]=this["webpackJsonpreact-redux-typescript-advance"]||[]).push([[41,51],{198:function(e,t,s){"use strict";s.d(t,"d",(function(){return b})),s.d(t,"b",(function(){return m})),s.d(t,"f",(function(){return f})),s.d(t,"a",(function(){return p})),s.d(t,"c",(function(){return x})),s.d(t,"e",(function(){return j})),s.d(t,"g",(function(){return h}));var r,c=s(5),n=s.n(c),i=s(7),a=s(8),o=s.n(a),l=s(6),d=s(9),u=s(13);!function(e){e.waiting="waiting",e.approved="approved",e.rejected="rejected"}(r||(r={}));var b=function(){return function(){var e=Object(i.a)(n.a.mark((function e(t){var s;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,Object(u.b)(),e.next=4,o.a.get("".concat(d.a.AUTH,"/users?page=1&limit=500"));case 4:s=e.sent,console.log({users_response:s}),t({type:l.a.FETCH_USERS_ACCESS,payload:s.data.users}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error({user_error:e.t0});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()},m=function(e){return console.log({data:e}),function(){var t=Object(i.a)(n.a.mark((function t(s){return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s({type:l.a.BLOCK_USER_TO_SYSTEM,payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},f=function(e){return function(){var t=Object(i.a)(n.a.mark((function t(s){return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s({type:l.a.UNBLOCK_USER_TO_SYSTEM,payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},p=function(e){return console.log({data:e}),function(){var t=Object(i.a)(n.a.mark((function t(s){return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s({type:l.a.ASSIGN_ROLE_TO_USER,payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},x=function(e){return function(){var t=Object(i.a)(n.a.mark((function t(s){return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s({type:l.a.CUSTOMIZE_USER_ACCESS,payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},j=function(e){return function(){var t=Object(i.a)(n.a.mark((function t(s){return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s({type:l.a.RESET_USER_ACCESS,payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},h=function(e){return console.log({data:e}),function(){var t=Object(i.a)(n.a.mark((function t(s){return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s({type:l.a.VERIFY_ALL_DOCUMENT,payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},199:function(e,t,s){"use strict";var r=s(14),c=s(4),n=s(84),i=s(10),a=s(1);t.a=function(e){var t,s,o=e.rows,l=e.columns,d=e.hideColumns,u=void 0!==d&&d,b=e.pagination,m=void 0!==b&&b,f=e.search,p=void 0!==f&&f,x=e.tableSize,j=void 0===x?"w-full":x,h=e.tableClass,g=e.tableId,O=void 0===g?"myTable":g,_=e.rounded,v=void 0!==_&&_,y=e.searchBG,N=void 0===y?"bg-gray-200":y,w=e.thColor,T=void 0===w?"blue":w,E=e.loading,R=void 0!==E&&E;O="myTable"===O?function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t="",s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=s.length,c=0;c<e;c++)t+=s.charAt(Math.floor(Math.random()*r));return t}():O;var C=Object(c.useState)(0),I=Object(r.a)(C,2),k=I[0],S=I[1],A=Object(c.useState)(1),P=Object(r.a)(A,2),D=P[0],L=P[1],q=Object(c.useState)(1),U=Object(r.a)(q,2),F=U[0],V=U[1],B=Object(c.useState)(),M=Object(r.a)(B,2),z=M[0],G=M[1],Y=Object(c.useState)(10),H=Object(r.a)(Y,2),W=H[0],X=H[1],J=Object(c.useState)(0),K=Object(r.a)(J,2),Z=K[0],Q=K[1],$=Object(c.useState)(0),ee=Object(r.a)($,2),te=ee[0],se=ee[1];Object(c.useEffect)((function(){m&&re()}));var re=function(){t=document.getElementById(O),s=t.getElementsByTagName("tr"),S(s.length),L(Math.ceil(k/W)),Q((F-1)*W),se(Math.min(Z+W-1,k-1));var e=Array.from(Array(D+1-1).keys()).map((function(e){return 1+e}));z&&e.length===z.length||G(e);for(var r=0;r<s.length;r++)s[r].style.display=r>=Z&&r<=te?"":"none"};return Object(a.jsxs)("div",{className:"".concat(j),children:[p&&Object(a.jsx)("div",{className:"".concat(N," w-full mb-2"),children:p&&Object(a.jsxs)("div",{className:"bg-white rounded flex items-center w-full p-2 border-2 border-gray-500",children:[Object(a.jsx)(i.Cb,{className:"h-5 w-5 fill-current text-gray-400"}),Object(a.jsx)("input",{type:"search",placeholder:"search",onChange:function(e){return function(e,s){var r,c,n,i,a;for("field"===s&&"all"===e&&(e=""),r=e.toLowerCase(),c=(t=document.getElementById(O)).getElementsByTagName("tr"),i=0;i<c.length;i++)for(a=0;a<l.length;a++)if(n=c[i].getElementsByTagName("td")[a]){if((n.textContent||n.innerText).toLowerCase().indexOf(r)>-1){c[i].style.display="";break}c[i].style.display="none"}}(e.target.value)},className:"w-full h-6 pl-4 text-sm outline-none focus:outline-none bg-white",disabled:R}),m&&Object(a.jsx)("div",{className:"select",children:Object(a.jsxs)("select",{className:"text-base outline-none focus:outline-none bg-white",onChange:function(e){return X(Number(e.target.value))},disabled:R,children:[Object(a.jsx)("option",{value:"10",children:"10"}),Object(a.jsx)("option",{value:"25",children:"25"}),Object(a.jsx)("option",{value:"50",children:"50"}),Object(a.jsx)("option",{value:"100",children:"100"})]})})]})}),Object(a.jsxs)("table",{className:h||"w-full shadow ".concat(v&&"sm:rounded-lg"," table-auto order-table"),id:O,children:[!u&&Object(a.jsx)("thead",{className:"bg-white border-b-2 border-gray-300 text-gray-600 font-bold text-base",children:Object(a.jsx)("tr",{className:"text-left tracking-wide bg-".concat(T,"-100 border-b-2 border-").concat(T,"-500 text-").concat(T,"-600"),children:l.map((function(e,t){return Object(a.jsx)("th",{className:"".concat(e.padding," text-").concat(e.alignText," px-3 py-2 ").concat(e.isSortAllowed&&"cursor-pointer"),onClick:function(){return e.isSortAllowed&&function(e){var t,s,r,c,n,i,a,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"asc",d=0;if(r=!0,t=document.getElementById(e))for(;r;){for(r=!1,s=t.rows,c=1;c<s.length-1;c++)if(a=!1,n=s[c].getElementsByTagName("TD")[o],i=s[c+1].getElementsByTagName("TD")[o],"asc"===l&&n&&i){if(n.innerHTML.toLowerCase()>i.innerHTML.toLowerCase()){a=!0;break}}else if("desc"===l&&n&&i&&n.innerHTML.toLowerCase()<i.innerHTML.toLowerCase()){a=!0;break}a&&s[c].parentNode?(s[c].parentNode.insertBefore(s[c+1],s[c]),r=!0,d++):0===d&&"asc"===l&&(l="desc",r=!0)}}(O,t)},children:Object(a.jsxs)("div",{className:"flex items-center gap-1",children:[e.columnTitle,e.isSortAllowed&&Object(a.jsx)(n.i,{})]})},t)}))})}),Object(a.jsx)("tbody",{id:"table-data",className:"bg-white text-black text-base",children:o()})]}),m&&Object(a.jsxs)("div",{className:"sm:flex-1 sm:flex sm:items-center sm:justify-between mt-4 work-sans",children:[Object(a.jsx)("div",{children:Object(a.jsxs)("span",{className:"text-xs xs:text-sm text-gray-900",children:["Showing 1 to ",W," of ",k-1," Entries"]})}),Object(a.jsx)("div",{children:Object(a.jsxs)("nav",{className:"inline-flex shadow-sm",children:[Object(a.jsx)("div",{children:Object(a.jsx)("button",{type:"button",className:"inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 text-sm font-medium text-gray-500 ".concat(1!==F&&"bg-white"),"aria-label":"Previous",disabled:1===F||R,onClick:function(){return V(F-1)},children:Object(a.jsx)(i.hb,{className:"h-5 w-5"})})}),Object(a.jsx)("div",{children:z&&z.map((function(e,t){return Object(a.jsx)("button",{className:"-ml-px inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium text-gray-700 ".concat(e!==F?"bg-white":"bg-gray-100 cursor-default"),disabled:e===F||R,onClick:function(){return V(e)},children:e},t)}))}),Object(a.jsx)("div",{children:Object(a.jsx)("button",{type:"button",className:"inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 text-sm leading-5 font-medium text-gray-500 ".concat(F!==D&&"bg-white"),"aria-label":"Next",disabled:F===D||R,onClick:function(){return V(F+1)},children:Object(a.jsx)(i.ib,{className:"h-5 w-5"})})})]})})]})]})}},211:function(e,t,s){"use strict";s.d(t,"p",(function(){return u})),s.d(t,"c",(function(){return b})),s.d(t,"m",(function(){return m})),s.d(t,"h",(function(){return f})),s.d(t,"b",(function(){return p})),s.d(t,"l",(function(){return x})),s.d(t,"g",(function(){return j})),s.d(t,"e",(function(){return h})),s.d(t,"o",(function(){return g})),s.d(t,"j",(function(){return O})),s.d(t,"a",(function(){return _})),s.d(t,"k",(function(){return v})),s.d(t,"f",(function(){return y})),s.d(t,"d",(function(){return N})),s.d(t,"n",(function(){return w})),s.d(t,"i",(function(){return T}));var r=s(5),c=s.n(r),n=s(7),i=s(8),a=s.n(i),o=s(6),l=s(9),d=s(12),u=function(e){return function(){var t=Object(n.a)(c.a.mark((function t(s){var r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(!0,""),t.prev=1,t.next=4,a.a.get("".concat(l.a.APPLICATION,"/roomlocation"));case 4:r=t.sent,s({type:o.a.GET_ALL_ROOM,payload:r.data}),console.log("===================================="),console.log({res:r.data}),console.log("===================================="),e(!1,"",r.data),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(1),console.error("Err: ",t.t0),e(!1,Object(d.a)(t.t0));case 16:case"end":return t.stop()}}),t,null,[[1,12]])})));return function(e){return t.apply(this,arguments)}}()},b=function(e){return function(){var t=Object(n.a)(c.a.mark((function t(s){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s({type:o.a.CREATE_PROVINCE,payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},m=function(e){return console.log({data:e}),function(){var t=Object(n.a)(c.a.mark((function t(s){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s({type:o.a.UPDATE_PROVINCE,payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},f=function(e){return function(){var t=Object(n.a)(c.a.mark((function t(s){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s({type:o.a.DELETE_PROVINCE,payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},p=function(e){return function(){var t=Object(n.a)(c.a.mark((function t(s){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s({type:o.a.CREATE_DISTRICT,payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},x=function(e){return console.log({data:e}),function(){var t=Object(n.a)(c.a.mark((function t(s){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s({type:o.a.UPDATE_DISTRICT,payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},j=function(e){return console.log({data:e}),function(){var t=Object(n.a)(c.a.mark((function t(s){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s({type:o.a.DELETE_DISTRICT,payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},h=function(e){return function(){var t=Object(n.a)(c.a.mark((function t(s){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s({type:o.a.CREATE_SECTOR,payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},g=function(e){return function(){var t=Object(n.a)(c.a.mark((function t(s){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s({type:o.a.UPDATE_SECTOR,payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},O=function(e){return console.log({data:e}),function(){var t=Object(n.a)(c.a.mark((function t(s){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s({type:o.a.DELETE_SECTOR,payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},_=function(e){return console.log({data:e}),function(){var t=Object(n.a)(c.a.mark((function t(s){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s({type:o.a.CREATE_CENTER,payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},v=function(e){return console.log({data:e}),function(){var t=Object(n.a)(c.a.mark((function t(s){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s({type:o.a.UPDATE_CENTER,payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},y=function(e){return function(){var t=Object(n.a)(c.a.mark((function t(s){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s({type:o.a.DELETE_CENTER,payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},N=function(e){return console.log({data:e}),function(){var t=Object(n.a)(c.a.mark((function t(s){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s({type:o.a.CREATE_ROOM,payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},w=function(e){return function(){var t=Object(n.a)(c.a.mark((function t(s){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s({type:o.a.UPDATE_ROOM,payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},T=function(e){return console.log({delete_room:e}),function(){var t=Object(n.a)(c.a.mark((function t(s){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s({type:o.a.DELETE_ROOM,payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},231:function(e,t,s){"use strict";s.r(t),s.d(t,"UserAccess",(function(){return O}));var r=s(5),c=s.n(r),n=s(7),i=s(14),a=s(8),o=s.n(a),l=s(4),d=s(84),u=s(10),b=s(248),m=s(220),f=s(17),p=s(198),x=s(199),j=s(9),h=s(12),g=s(1),O=Object(f.b)(null,{customizeUserAccess:p.c})((function(e){var t=e.userInfo,s=e.customizeUserAccess,r=e.setFeedBack,a=(e.feedBack,e.setUserAccess),f=e.userAccess,p=e.currentAccess,O=e.setCurrentAccess,_=Object(l.useState)(!0),v=Object(i.a)(_,2),y=v[0],N=v[1],w=Object(l.useState)(!1),T=Object(i.a)(w,2),E=T[0],R=T[1],C=Object(l.useState)(!1),I=Object(i.a)(C,2),k=I[0],S=I[1],A=Object(l.useState)(!1),P=Object(i.a)(A,2),D=P[0],L=P[1],q=Object(l.useState)(!1),U=Object(i.a)(q,2),F=U[0],V=U[1],B=Object(l.useState)(!1),M=Object(i.a)(B,2),z=M[0],G=M[1],Y=function(e,t){if(e&&t&&t.length>0){var s=[],r=function(r){if(Object.prototype.hasOwnProperty.call(e,r)){var c=t.find((function(t){return t.id===e[r].id}));c?s.push(c):s.push(e[r])}};for(var c in e)r(c);a(s)}};Object(l.useEffect)((function(){t&&t.custome_access&&t.default_access&&function(e,t){if(e&&t&&t.length>0){for(var s=[],r=function(){var e=Object(i.a)(n[c],2),r=e[0],a=e[1],o=t.find((function(e){return e.id===a.id}));o?s.push(o):s.push(a),console.log(r)},c=0,n=Object.entries(e);c<n.length;c++)r();a(s)}}(t.default_access.access,t.custome_access.access)}),[t,a]),Object(l.useEffect)((function(){t&&!t.custome_access&&t.default_access&&a(t.default_access.access),N(!1)}),[t,a]);var H=function(){var e=Object(n.a)(c.a.mark((function e(n){var i,a,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),R(!0),r({type:"",message:""}),i=null,i=t.custome_access,a=-1,e.prev=6,i&&p?(a=i.access.findIndex((function(e){return e.id===p.id})))>=0?(i.access[a].permitted.create=k,i.access[a].permitted.view=D,i.access[a].permitted.update=F,i.access[a].permitted.delete=z):i.access.push({id:p.id,task:p.task,key:p.key,permitted:{create:k,view:D,update:F,delete:z}}):p&&(i={access:[{id:p.id,task:p.task,key:p.key,permitted:{create:k,view:D,update:F,delete:z}}],user_id:t.user_id,custome_user_access_id:""}),!i){e.next=19;break}if(null===t.custome_access){e.next=15;break}return e.next=12,o.a.patch("".concat(j.a.AUTH,"/custaccess"),{access:i.access,user_id:t.user_id});case 12:l=e.sent,e.next=18;break;case 15:return e.next=17,o.a.post("".concat(j.a.AUTH,"/custaccess"),{access:i.access,user_id:t.user_id});case 17:l=e.sent;case 18:l&&(i.custome_user_access_id=l.data.data.custome_user_access_id,console.log({task:i}),console.log(l.data.data),s(i),i&&t.default_access&&Y(t.default_access.access,i.access),r({type:"success",message:"Reseting User Access complete successfully"}),i=null,O(null),S(!1),L(!1),V(!1),G(!1));case 19:e.next=25;break;case 21:e.prev=21,e.t0=e.catch(6),console.error({customize_access:e.t0}),r({type:"danger",message:Object(h.a)(e.t0)});case 25:R(!1);case 26:case"end":return e.stop()}}),e,null,[[6,21]])})));return function(t){return e.apply(this,arguments)}}();return!0===y||null===t?Object(g.jsx)("div",{className:"text-center mt-7 font-bold text-4xl text-gray-400 animate-pulse",children:"Loading User Access..."}):y?Object(g.jsx)("div",{className:"text-center mt-7 font-bold text-4xl text-gray-400 animate-pulse",children:"Loading..."}):Object(g.jsx)(l.Fragment,{children:Object(g.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mx-1 my-2",children:[Object(g.jsxs)("div",{className:"col-span-1 md:col-span-3 bg-white w-full overflow-x-auto border rounded text-center p-2 ".concat(p?"hidden md:block":""),children:[Object(g.jsx)("span",{className:"text-gray-600 mt-2 font-semibold text-2xl",children:"Settings"}),!y&&Object(g.jsx)("div",{className:"overflow-x-auto w-full",children:Object(g.jsx)(x.a,{columns:[{columnTitle:"Access Name",alignText:"left",padding:"p-3"},{columnTitle:"Create",alignText:"left"},{columnTitle:"View",alignText:"left"},{columnTitle:"Update",alignText:"left"},{columnTitle:"Delete",alignText:"left"}],rows:function(){return f?f.map((function(e,t){return Object(g.jsxs)("tr",{className:"text-left border-b border-gray-200 cursor-pointer hover:bg-gray-100 ".concat(p&&p.id===e.id&&"bg-gray-200 border my-3 hover:bg-gray-100"),onClick:function(){return p&&p.id===e.id?(O(null),S(!1),L(!1),V(!1),G(!1)):(O(e),S(e.permitted.create),L(e.permitted.view),V(e.permitted.update),G(e.permitted.delete))},children:[Object(g.jsx)("td",{className:"px-2 py-1",children:Object(g.jsx)("label",{className:"inline-flex items-center",children:Object(g.jsx)("span",{className:"text-gray-900 capitalize text-xl font-normal cursor-pointer",children:e.task})})}),Object(g.jsx)("td",{children:Object(g.jsxs)("div",{className:"inline-flex items-center text-xl ".concat(e.permitted.create?"text-green-700":"text-red-700"),children:[e.permitted.create?Object(g.jsx)(m.a,{}):Object(g.jsx)(u.O,{}),e.permitted.create?" Yes":"No"]})}),Object(g.jsx)("td",{children:Object(g.jsxs)("div",{className:"inline-flex items-center text-xl ".concat(e.permitted.view?"text-green-700":"text-red-700"),children:[e.permitted.view?Object(g.jsx)(m.a,{}):Object(g.jsx)(u.O,{}),e.permitted.view?" Yes":"No"]})}),Object(g.jsx)("td",{children:Object(g.jsxs)("div",{className:"inline-flex items-center text-xl ".concat(e.permitted.update?"text-green-700":"text-red-700"),children:[e.permitted.update?Object(g.jsx)(m.a,{}):Object(g.jsx)(u.O,{}),e.permitted.update?" Yes":"No"]})}),Object(g.jsx)("td",{children:Object(g.jsxs)("div",{className:"inline-flex items-center text-xl ".concat(e.permitted.delete?"text-green-700":"text-red-700"),children:[e.permitted.delete?Object(g.jsx)(m.a,{}):Object(g.jsx)(u.O,{}),e.permitted.delete?" Yes":"No"]})})]},t+e.id)})):[Object(g.jsx)("tr",{children:Object(g.jsx)("td",{children:"No data"})},46)]},pagination:!1,search:!0,searchBG:"bg-gray-50",thColor:"gray"})})]}),Object(g.jsx)("div",{className:"col-span-1 md:col-span-2",children:p?Object(g.jsxs)("div",{className:"",children:[Object(g.jsx)("h1",{className:"text-2xl md:text-3xl font-semibold text-center my-2 text-gray-900",children:"Customize User Access"}),Object(g.jsx)("div",{className:"flex justify-center mb-3",children:Object(g.jsxs)("h2",{className:"text-2xl font-semibold text-center text-gray-600 flex flex-row items-center",children:[Object(g.jsx)(d.h,{className:"w-7 h-7"}),p.task]})}),Object(g.jsx)("div",{className:"flex flex-col px-2 md:px-1",children:Object(g.jsxs)("form",{className:"flex flex-col items-center",onSubmit:function(e){return H(e)},children:[Object(g.jsxs)("div",{className:"inline-flex gap-2 items-center",children:[Object(g.jsx)(b.a,{className:"w-7 h-7 text-gray-600"}),Object(g.jsxs)("div",{className:"flex flex-col",children:[Object(g.jsx)("h3",{className:"font-semibold text-xl",children:"Create"}),Object(g.jsx)("span",{className:"text-gray-600 text-sm md:pr-1",children:"This permission gives the user the ability to create"})]}),Object(g.jsx)("input",{type:"checkbox",className:"form-checkbox h-7 w-7 text-teal-600",onChange:function(){return S(!k)},checked:k,disabled:E})]}),Object(g.jsxs)("div",{className:"inline-flex gap-2 items-center",children:[Object(g.jsx)(u.wb,{className:"w-7 h-7 text-gray-600"}),Object(g.jsxs)("div",{className:"flex flex-col",children:[Object(g.jsx)("h3",{className:"font-semibold text-xl",children:"View"}),Object(g.jsx)("span",{className:"text-gray-600 text-sm md:pr-4",children:"This permission gives the user the ability to view"})]}),Object(g.jsx)("input",{type:"checkbox",className:"form-checkbox h-7 w-7 text-teal-600",onChange:function(){return L(!D)},checked:D,disabled:E})]}),Object(g.jsxs)("div",{className:"inline-flex gap-2 items-center",children:[Object(g.jsx)(u.D,{className:"w-7 h-7 text-gray-600"}),Object(g.jsxs)("div",{className:"flex flex-col",children:[Object(g.jsx)("h3",{className:"font-semibold text-xl",children:"Update"}),Object(g.jsx)("span",{className:"text-gray-600 text-sm",children:"This permission gives the user the ability to update"})]}),Object(g.jsx)("input",{type:"checkbox",className:"form-checkbox h-7 w-7 text-teal-600",onChange:function(){return V(!F)},checked:F,disabled:E})]}),Object(g.jsxs)("div",{className:"inline-flex gap-2 items-center",children:[Object(g.jsx)(u.B,{className:"w-7 h-7 text-gray-600"}),Object(g.jsxs)("div",{className:"flex flex-col",children:[Object(g.jsx)("h3",{className:"font-semibold text-xl",children:"Delete"}),Object(g.jsx)("span",{className:"text-gray-600 text-sm md:pr-1",children:"This permission gives the user the ability to delete"})]}),Object(g.jsx)("input",{type:"checkbox",className:"form-checkbox h-7 w-7 text-teal-600",onChange:function(){return G(!z)},checked:z,disabled:E})]}),Object(g.jsxs)("div",{className:"flex items-center justify-center w-full py-3 gap-2",children:[Object(g.jsx)("button",{className:"btn bg-gray-500 hover:bg-gray-700 focus:outline-none text-white",disabled:E,onClick:function(){O(null),S(!1),L(!1),V(!1),G(!1)},children:"Cancel"}),Object(g.jsx)("button",{className:"btn btn-blue",disabled:E,children:E?"Processing..":"Save Change"})]})]})})]}):Object(g.jsxs)("div",{className:"w-full hidden md:flex flex-col items-center text-gray-600 gap-1 py-3",children:[Object(g.jsx)(u.Eb,{className:"w-20 h-20"}),Object(g.jsx)("span",{className:"text-8 md:text-12",children:"Choose Access to Customize"})]})})]})})}))},234:function(e,t,s){"use strict";s.d(t,"a",(function(){return P}));var r,c=s(5),n=s.n(c),i=s(7),a=s(14),o=s(4),l=s(10),d=s(199),u=s(196),b=s(17),m=s.p+"static/media/blank_profile.c3f94521.png",f=s(231),p=s(20),x=s(19),j=s(22),h=s(21),g=s(8),O=s.n(g),_=s(220),v=s(3),y=s(198),N=s(27),w=s(28),T=s(9),E=s(12),R=s(33),C=s(1),I=function(e){var t=Object(o.useState)(""),s=Object(a.a)(t,2),r=s[0],c=s[1];return Object(C.jsxs)("section",{className:"border-2 rounded border-gray-400",children:[Object(C.jsxs)("div",{className:"flex items-center w-full my-1",children:[Object(C.jsx)(l.Cb,{className:"w-6 h-6 absolute ml-2"}),Object(C.jsx)("input",{type:"text",placeholder:"Search",className:"focus:border-2 h-7 ml-1 pl-9 mr-2 bg-gray-100 focus:border-gray-700 w-full rounded",onChange:function(e){return c(e.target.value)},value:r,disabled:!(Object(R.a)(e.roleList,r).length>0)}),Object(C.jsx)("button",{className:"bg-red-200 text-red-700 py-1 px-2 mr-1 rounded text-sm focus:outline-none",type:"button",onClick:function(){e.setChooseRole(!1)},children:"Close"})]}),Object(C.jsx)("div",{className:"w-full h-52 mt-2 overflow-y-auto divide-y divide-gray-300",children:Object(R.a)(e.roleList,r).length>0?Object(R.a)(e.roleList,r).map((function(t,s){return Object(C.jsx)("section",{children:Object(C.jsxs)("div",{className:"group flex items-center justify-between my-1 hover:bg-gray-100",children:[Object(C.jsx)("div",{className:"p-1 w-full mr-2 cursor-pointer",onClick:function(){e.setChooseRole(!1),!e.loadindRequest&&e.handleSelectRole(t.system_user_role_id)},children:Object(C.jsx)("p",{className:"text-sm font-medium text-black",children:Object(u.a)(t.role)})}),Object(C.jsx)("button",{type:"button",className:"bg-blue-200 group-hover:bg-blue-300 text-blue-700 group-hover:text-blue-800 py-1 px-2 mr-1 rounded text-sm",children:"Choose"})]})},s+t.role)})):Object(C.jsx)("div",{className:"text-center p-3",children:Object(C.jsx)("p",{className:"text-base font-medium text-black",children:"No role available"})})})]})},k=function(e){Object(j.a)(s,e);var t=Object(h.a)(s);function s(e){var r;return Object(p.a)(this,s),(r=t.call(this,e)).setRoleId=function(e){r.setState({roleId:e})},r.setSelectedRole=function(e){r.setState({selectedRole:e})},r.setProvinceId=function(e){r.setState({provinceId:e})},r.setDistrictId=function(e){r.setState({districtId:e})},r.setCenterId=function(e){r.setState({centerId:e})},r.setRoomId=function(e){r.setState({roomId:e})},r.setLoadingForm=function(e){r.setState({loadingForm:e})},r.setSchoolId=function(e){r.setState({schoolId:e})},r.setLoading=function(e){r.setState({loading:e})},r.setInstituteId=function(e){r.setState({instituteId:e})},r.setFormError=function(e){r.setState({formError:e})},r.setLoadingRequest=function(e){r.setState({loadingRequest:e})},r.setChooseRole=function(e){r.setState({chooseRole:e})},r.setDefaultState=function(e,t){var s,c;if(t.district_required&&r.props.roomList)(c=r.distinctDistrict(r.props.roomList).find((function(t){return t._id===e.district_id})))&&r.setProvinceId(c.province_id),c&&r.setDistrictId(e.district_id),r.setLoadingForm(!1);else if(t.room_required&&r.props.roomList)(s=P(r.props.roomList).find((function(t){return t.room_id===e.room_id})))&&r.setProvinceId(s.province_id),s&&r.setDistrictId(s.district_id),s&&r.setCenterId(s.center_id),r.setRoomId(e.room_id),r.setLoadingForm(!1);else if(t.school_required&&r.props.roomList&&r.props.schoolList){var n=r.props.schoolList.find((function(t){return t._id===e.school_id}));n?((s=P(r.props.roomList).find((function(e){return e.district_id===(null===n||void 0===n?void 0:n.district_id)})))&&r.setProvinceId(s.province_id),s&&r.setDistrictId(s.district_id),r.setSchoolId(e.school_id),r.setLoadingForm(!1)):r.setLoadingForm(!1)}else r.setLoadingForm(!1)},r.componentDidMount=function(){if(r.props.roleList.length){if(r.props.userInfo.default_access&&r.state.loadingForm){if(!r.state.roleId.length){var e=r.props.roleList.find((function(e){return e.system_user_role_id===r.props.userInfo.default_access.system_user_role_id}));e&&(r.setRoleId(r.props.userInfo.default_access.system_user_role_id),r.setSelectedRole(e),r.setDefaultState(r.props.userInfo.default_access,e))}console.log("===================================="),console.log({vvvvv:r.props.userInfo.default_access}),console.log("====================================")}r.state.selectedRole&&r.props.userInfo.default_access&&r.setDefaultState(r.props.userInfo.default_access,r.state.selectedRole),r.setLoading(!1)}},r.handleSelectRole=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"SELECT";if(r.props.roleList){var s=r.props.roleList.find((function(t){return t.system_user_role_id===e}));s&&(r.setRoleId(e),r.setSelectedRole(s),r.state.formError&&"role_id"===r.state.formError.element&&r.setFormError(null),"SELECT"===t&&(r.setProvinceId(""),r.setDistrictId(""),r.setSchoolId(""),r.setCenterId(""),r.setRoomId(""),r.setInstituteId("")))}},r.tableData=function(){return r.state.roleId.length>0&&null===r.state.selectedRole&&r.props.roleList&&r.handleSelectRole(r.state.roleId,"DEFAULT"),r.state.selectedRole?r.state.selectedRole.access.map((function(e,t){return Object(C.jsxs)("tr",{className:"text-left border-b border-gray-200 hover:bg-gray-100",children:[Object(C.jsx)("td",{className:"px-2 py-1",children:Object(C.jsx)("label",{className:"inline-flex items-center",children:Object(C.jsx)("span",{className:"text-gray-900 capitalize text-xl font-normal cursor-pointer",children:e.task})})}),Object(C.jsx)("td",{children:Object(C.jsxs)("div",{className:"inline-flex items-center text-xl ".concat(e.permitted.create?"text-green-700":"text-red-700"),children:[e.permitted.create?Object(C.jsx)(_.a,{}):Object(C.jsx)(l.O,{}),e.permitted.create?" Yes":"No"]})}),Object(C.jsx)("td",{children:Object(C.jsxs)("div",{className:"inline-flex items-center text-xl ".concat(e.permitted.view?"text-green-700":"text-red-700"),children:[e.permitted.view?Object(C.jsx)(_.a,{}):Object(C.jsx)(l.O,{}),e.permitted.view?" Yes":"No"]})}),Object(C.jsx)("td",{children:Object(C.jsxs)("div",{className:"inline-flex items-center text-xl ".concat(e.permitted.update?"text-green-700":"text-red-700"),children:[e.permitted.update?Object(C.jsx)(_.a,{}):Object(C.jsx)(l.O,{}),e.permitted.update?" Yes":"No"]})}),Object(C.jsx)("td",{children:Object(C.jsxs)("div",{className:"inline-flex items-center text-xl ".concat(e.permitted.delete?"text-green-700":"text-red-700"),children:[e.permitted.delete?Object(C.jsx)(_.a,{}):Object(C.jsx)(l.O,{}),e.permitted.delete?" Yes":"No"]})})]},t+e.id)})):[Object(C.jsx)("tr",{children:Object(C.jsx)("td",{colSpan:5,className:"text-center px-2 py-2",children:"No Default Access Available on this Role."})},"55re")]},r.assignRoleToUser=function(){var e=Object(i.a)(n.a.mark((function e(t){var s,c;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),window.confirm("Are sure you want to change user role?")){e.next=3;break}return e.abrupt("return",!1);case 3:if(r.state.selectedRole){e.next=5;break}return e.abrupt("return",r.setFormError({element:"role_id",msg:"User role is required!"}));case 5:if(!0!==r.state.selectedRole.room_required||!Object(u.f)(r.state.provinceId)){e.next=7;break}return e.abrupt("return",r.setFormError({element:"province_id",msg:"Province is required!"}));case 7:if(!0!==r.state.selectedRole.education_institution_required||!Object(u.f)(r.state.instituteId)){e.next=9;break}return e.abrupt("return",r.setFormError({element:"institute_id",msg:"Institute is required on this role!"}));case 9:if(!0!==r.state.selectedRole.room_required&&!0!==r.state.selectedRole.district_required||!Object(u.f)(r.state.districtId)){e.next=11;break}return e.abrupt("return",r.setFormError({element:"district_id",msg:"District is required!"}));case 11:if(!0!==r.state.selectedRole.school_required||!Object(u.f)(r.state.schoolId)){e.next=13;break}return e.abrupt("return",r.setFormError({element:"school_id",msg:"School is required!"}));case 13:if(!0!==r.state.selectedRole.room_required||!Object(u.f)(r.state.centerId)){e.next=15;break}return e.abrupt("return",r.setFormError({element:"center_id",msg:"Center is required!"}));case 15:if(!0!==r.state.selectedRole.room_required||!Object(u.f)(r.state.roomId)){e.next=17;break}return e.abrupt("return",r.setFormError({element:"room_id",msg:"Room is required!"}));case 17:return r.setLoadingRequest(!0),s={user_id:r.props.userInfo.user_id,data:{system_user_role_id:r.state.roleId,status:1,role:r.state.selectedRole.role,access:r.state.selectedRole.access,school_id:r.state.selectedRole.school_required?r.state.schoolId:"",district_id:r.state.selectedRole.district_required?r.state.districtId:"",room_id:r.state.selectedRole.room_required?r.state.roomId:"",education_institution_id:r.state.selectedRole.education_institution_required?r.state.instituteId:""}},e.prev=19,e.next=22,O.a.post("".concat(T.a.AUTH,"/addroletouser"),{user_id:r.props.userInfo.user_id,system_user_role_id:r.state.roleId,status:1,role:r.state.selectedRole.role,access:!0,school_id:!0===r.state.selectedRole.school_required?r.state.schoolId:"",district_id:!0===r.state.selectedRole.district_required?r.state.districtId:"",room_id:!0===r.state.selectedRole.room_required?r.state.roomId:"",education_institution_id:r.state.selectedRole.education_institution_required?r.state.instituteId:""});case 22:(c=e.sent)&&(console.log("===================================="),console.log({assignRoleToUser:c}),console.log("===================================="),r.props.assignRoleToUserAccess(s),r.setLoadingRequest(!1),r.props.setChangeRole(!1),r.props.PushPopupAlert({title:"Assigning Role to User completed successfully",theme:w.a.success})),e.next=30;break;case 26:e.prev=26,e.t0=e.catch(19),console.log({role_error:e.t0}),r.props.PushPopupAlert({title:Object(E.a)(e.t0),theme:w.a.danger});case 30:case"end":return e.stop()}}),e,null,[[19,26]])})));return function(t){return e.apply(this,arguments)}}(),r.distinctDistrict=function(e,t){var s=[],r=[];if(t)r=e.find((function(e){return e._id===t}))&&e.find((function(e){return e._id===t})).districts?e.find((function(e){return e._id===t})).districts:[];else for(var c in e)if(Object.prototype.hasOwnProperty.call(e,c))for(var n in e[c].districts)Object.prototype.hasOwnProperty.call(e[c].districts,n)&&(s.includes(e[c].districts[n]._id)||(s.push(e[c].districts[n]._id),r.push(e[c].districts[n])));return r},r.distinctCenter=function(e,t){var s=[],r=[];return P(e).forEach((function(e){s.includes(e.center_id)||e.district_id!==t||(s.push(e.center_id),r.push(e))})),r},r.distinctRoom=function(e,t){var s=[],r=[];return P(e).forEach((function(e){s.includes(e.room_id)||e.center_id!==t||(s.push(e.room_id),r.push(e))})),r},r.state={loading:!0,loadingForm:!0,loadingRequest:!1,roleId:"",provinceId:"",districtId:"",schoolId:"",roomId:"",instituteId:"",centerId:"",selectedRole:null,formError:null,chooseRole:!1},r}return Object(x.a)(s,[{key:"render",value:function(){var e,t=this;return!0===this.state.loading||this.state.loadingForm||null===this.props.userInfo.default_access||0===this.state.roleId.length||null===this.state.selectedRole?Object(C.jsx)("div",{className:"text-center py-7 font-bold text-3xl text-gray-400 animate-pulse",children:"Loading..."}):Object(C.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 py-2 md:py-4 px-2 md:px-0",children:[Object(C.jsx)("div",{className:"col-span-1 bg-white w-full overflow-x-auto border rounded",children:Object(C.jsxs)("div",{className:"px-6 md:px-12 py-5 bg-white mx-auto rounded-2xl w-100",children:[Object(C.jsx)("h3",{className:"font-semibold text-2xl text-gray-800 mb-4",children:"Change User Role"}),this.state.loadingForm?Object(C.jsx)(N.a,{}):Object(C.jsx)("form",{onSubmit:function(e){return t.assignRoleToUser(e)},children:Object(C.jsxs)("div",{className:"space-y-5",children:[Object(C.jsxs)("div",{className:"space-y-2",children:[Object(C.jsx)("label",{className:"text-sm font-medium text-gray-700 tracking-wide",children:"User Role"}),!this.state.chooseRole&&Object(C.jsx)("div",{className:"w-full text-base bg-white text-grey-darker cursor-pointer border-2 px-4 py-3 rounded focus:outline-none focus:bg-gray-100 ".concat(this.state.formError&&"role_id"===this.state.formError.element?"border-red-500":"border-gray-400"),onClick:function(){!t.state.loadingRequest&&t.setChooseRole(!0),!t.state.loadingRequest&&t.setFormError(null)},children:this.state.selectedRole?this.state.selectedRole.role:"Select role"}),this.state.chooseRole&&Object(C.jsx)(I,{setChooseRole:this.setChooseRole,handleSelectRole:this.handleSelectRole,roleList:this.props.roleList,loadindRequest:this.state.loadingRequest}),this.state.formError&&"role_id"===this.state.formError.element&&Object(C.jsx)("span",{className:"text-red-500",children:this.state.formError.msg})]}),this.state.selectedRole&&this.state.selectedRole.education_institution_required&&Object(C.jsxs)("div",{className:"space-y-2",children:[Object(C.jsx)("label",{className:"mb-5 text-sm font-medium text-gray-700 tracking-wide",children:"Institute"}),Object(C.jsxs)("select",{className:"block w-full text-base bg-white text-grey-darker border-2 rounded px-4 py-3 md:w-full focus:outline-none focus:bg-gray-100 ".concat(this.state.formError&&"institute_id"===this.state.formError.element?"border-red-500":"border-gray-400"),onChange:function(e){t.setInstituteId(e.target.value),t.setProvinceId(""),t.setDistrictId(""),t.setSchoolId(""),t.setCenterId(""),t.setRoomId(""),t.state.formError&&"institute_id"===t.state.formError.element&&t.setFormError(null)},disabled:this.state.loadingRequest,value:this.state.instituteId,children:[Object(C.jsx)("option",{value:"",children:"Select institute"}),this.props.schoolLevels.education_categories&&this.props.schoolLevels.education_categories.length>0?this.props.schoolLevels.education_categories.map((function(e){return Object(C.jsx)("option",{value:e.education_institute_id,children:e.education_category_title},e.education_institute_id)})):Object(C.jsx)("option",{value:"",disabled:!0,children:"No institute available"})]}),this.state.formError&&"institute_id"===this.state.formError.element&&Object(C.jsx)("span",{className:"text-red-500",children:this.state.formError.msg})]}),this.state.selectedRole&&this.state.selectedRole.room_required&&Object(C.jsxs)("div",{className:"space-y-2",children:[Object(C.jsx)("label",{className:"mb-5 text-sm font-medium text-gray-700 tracking-wide",children:"Province"}),Object(C.jsxs)("select",{className:"block w-full text-base bg-white text-grey-darker border-2 rounded px-4 py-3 md:w-full focus:outline-none focus:bg-gray-100 ".concat(this.state.formError&&"province_id"===this.state.formError.element?"border-red-500":"border-gray-400"),onChange:function(e){t.setProvinceId(e.target.value),t.state.formError&&"province_id"===t.state.formError.element&&t.setFormError(null),t.setDistrictId(""),t.setSchoolId(""),t.setCenterId(""),t.setRoomId("")},value:this.state.provinceId,disabled:this.state.loadingRequest,children:[Object(C.jsx)("option",{value:"",children:"Select province"}),this.props.roomList&&this.props.roomList.map((function(e){return Object(C.jsx)("option",{value:e._id,children:e.province_name},e._id)}))]}),this.state.formError&&"province_id"===this.state.formError.element&&Object(C.jsx)("span",{className:"text-red-500",children:this.state.formError.msg})]}),this.state.selectedRole&&(this.state.selectedRole.district_required||this.state.selectedRole.room_required)&&Object(C.jsxs)("div",{className:"space-y-2",children:[Object(C.jsx)("label",{className:"mb-5 text-sm font-medium text-gray-700 tracking-wide",children:"District"}),Object(C.jsxs)("select",{className:"block w-full text-base bg-white text-grey-darker border-2 rounded px-4 py-3 md:w-full focus:outline-none focus:bg-gray-100 ".concat(this.state.formError&&"district_id"===this.state.formError.element?"border-red-500":"border-gray-400"),onChange:function(e){t.setDistrictId(e.target.value),t.state.formError&&"district_id"===t.state.formError.element&&t.setFormError(null),t.setSchoolId(""),t.setCenterId(""),t.setRoomId("")},value:this.state.districtId,disabled:this.state.loadingRequest,children:[Object(C.jsx)("option",{value:"",children:"Select district"}),this.props.roomList&&this.distinctDistrict(this.props.roomList,Object(u.f)(this.state.provinceId)?void 0:this.state.provinceId).length>0?this.distinctDistrict(this.props.roomList,Object(u.f)(this.state.provinceId)?void 0:this.state.provinceId).map((function(e){return Object(C.jsx)("option",{value:e._id,children:e.district_name},e._id)})):Object(C.jsx)("option",{value:"",disabled:!0,children:"No district found"})]}),this.state.formError&&"district_id"===this.state.formError.element&&Object(C.jsx)("span",{className:"text-red-500",children:this.state.formError.msg})]}),this.state.selectedRole&&this.state.selectedRole.school_required&&Object(C.jsxs)("div",{className:"space-y-2",children:[Object(C.jsx)("label",{className:"mb-5 text-sm font-medium text-gray-700 tracking-wide",children:"School"}),Object(C.jsxs)("select",{className:"block w-full text-base bg-white text-grey-darker border-2 rounded px-4 py-3 md:w-full focus:outline-none focus:bg-gray-100 ".concat(this.state.formError&&"school_id"===this.state.formError.element?"border-red-500":"border-gray-400"),onChange:function(e){t.setSchoolId(e.target.value),t.state.formError&&"school_id"===t.state.formError.element&&t.setFormError(null),t.setCenterId(""),t.setRoomId("")},disabled:this.state.loadingRequest,value:this.state.schoolId,children:[Object(C.jsx)("option",{value:"",children:"Selected school"}),this.props.schoolList&&this.props.schoolList.map((function(e){return Object(C.jsx)("option",{value:e._id,children:e.school_name},e._id)}))]}),this.state.formError&&"school_id"===this.state.formError.element&&Object(C.jsx)("span",{className:"text-red-500",children:this.state.formError.msg})]}),this.state.selectedRole&&this.state.selectedRole.room_required&&Object(C.jsxs)("div",{className:"space-y-2",children:[Object(C.jsx)("label",{className:"mb-5 text-sm font-medium text-gray-700 tracking-wide",children:"Center"}),Object(C.jsxs)("select",{className:"block w-full text-base bg-white text-grey-darker border-2 rounded px-4 py-3 md:w-full focus:outline-none focus:bg-gray-100 ".concat(this.state.formError&&"center_id"===this.state.formError.element?"border-red-500":"border-gray-400"),onChange:function(e){t.setCenterId(e.target.value),t.state.formError&&"center_id"===t.state.formError.element&&t.setFormError(null),t.setRoomId("")},disabled:this.state.loadingRequest,value:this.state.centerId,children:[Object(C.jsx)("option",{value:"",children:"Select center"}),this.state.districtId&&this.state.districtId.length>0&&this.props.roomList&&this.distinctCenter(this.props.roomList,this.state.districtId).length>0?this.distinctCenter(this.props.roomList,this.state.districtId).map((function(e,t){return Object(C.jsx)("option",{value:e.center_id,children:e.center_name},e.center_id+t)})):Object(C.jsx)("option",{value:"",disabled:!0,children:"No center found"})]}),this.state.formError&&"center_id"===this.state.formError.element&&Object(C.jsx)("span",{className:"text-red-500",children:this.state.formError.msg})]}),this.state.selectedRole&&this.state.selectedRole.room_required&&Object(C.jsxs)("div",{className:"space-y-2",children:[Object(C.jsx)("label",{className:"mb-5 text-sm font-medium text-gray-700 tracking-wide",children:"Room"}),Object(C.jsxs)("select",{className:"block w-full text-base bg-white text-grey-darker border-2 rounded px-4 py-3 md:w-full focus:outline-none focus:bg-gray-100 ".concat(this.state.formError&&"room_id"===this.state.formError.element?"border-red-500":"border-gray-400"),onChange:function(e){t.setRoomId(e.target.value),t.state.formError&&"room_id"===t.state.formError.element&&t.setFormError(null)},disabled:this.state.loadingRequest,value:this.state.roomId,children:[Object(C.jsx)("option",{value:"",children:"Select room"}),!Object(u.f)(this.state.centerId)&&this.props.roomList&&this.distinctRoom(this.props.roomList,this.state.centerId).length>0?this.distinctRoom(this.props.roomList,this.state.centerId).map((function(e,t){return Object(C.jsx)("option",{value:e.room_id,className:"".concat("0"===e.room_name?"hidden":"block"),children:e.room_name},e.room_id+t)})):Object(C.jsx)("option",{value:"",disabled:!0,children:"No room found"})]}),this.state.formError&&"room_id"===this.state.formError.element&&Object(C.jsx)("span",{className:"text-red-500",children:this.state.formError.msg})]}),Object(C.jsxs)("div",{className:"flex justify-between 2xl:justify-start gap-2",children:[Object(C.jsx)("button",{className:"btn bg-gray-500 text-gray-50 focus:outline-none",onClick:function(){t.props.setChangeRole(!1),t.setFormError(null),t.setProvinceId(""),t.setDistrictId(""),t.setSchoolId(""),t.setCenterId(""),t.setRoomId("")},disabled:this.state.loadingRequest,children:"Back"}),Object(C.jsx)("button",{className:"btn btn-blue focus:outline-none",disabled:this.state.loadingRequest,children:this.state.loadingRequest?"Loading...":"Save Change"})]})]})})]})}),Object(C.jsxs)("div",{className:"cols-span-1 md:col-span-2 bg-white w-full border rounded text-center p-2 hidden md:block",children:[Object(C.jsx)("div",{className:"my-4",children:Object(C.jsxs)("span",{className:"text-gray-600 font-semibold text-2xl",children:[null===(e=this.state.selectedRole)||void 0===e?void 0:e.role,"'s Default Access"]})}),!this.state.loading&&Object(C.jsx)("div",{className:"overflow-x-auto w-full",children:Object(C.jsx)(d.a,{columns:[{columnTitle:"Access Name",alignText:"left",padding:"p-3"},{columnTitle:"Create",alignText:"left"},{columnTitle:"View",alignText:"left"},{columnTitle:"Update",alignText:"left"},{columnTitle:"Delete",alignText:"left"}],rows:this.tableData,pagination:!1,search:!1,searchBG:"bg-gray-50",thColor:"gray",tableId:"defaultAccess"})})]})]})}}]),s}(o.Component),S=Object(b.b)((function(e){return{schoolLevels:e.schoolLevels}}),{assignRoleToUserAccess:y.a,PushPopupAlert:v.tb})(k),A=s(75);!function(e){e.View_User="View User Info",e.Add_Access="Add Access To User",e.Update_Access="Update User Access",e.Close_Modal="Close Modal"}(r||(r={}));var P=function(e){var t=[];for(var s in e){var r=e[s].districts;for(var c in r){var n=r[c].centers;for(var i in n){var a=n[i].rooms;for(var o in a)t.push({province_id:e[s]._id,province_name:e[s].province_name,district_id:r[c]._id,district_name:r[c].district_name,center_id:n[i]._id,center_name:n[i].center_name,room_id:a[o]._id,room_name:a[o].room_number.toString(),capacity:a[o].capacity,occupied:a[o].occupied})}}}return t};t.b=Object(b.b)((function(e){return{schoolLevels:e.schoolLevels}}),{blockUserToSystem:y.b,unBlockUserToSystem:y.f,resetUserAccess:y.e})((function(e){var t,s,r,c=e.users,b=e.roleList,p=(e.userTypes,e.district),x=e.loadingUser,j=e.schoolLevels,h=e.setLoadingUser,g=e.blockUserToSystem,_=e.unBlockUserToSystem,v=e.manageUser,y=e.setManageUser,w=e.changeRole,R=e.setChangeRole,I=e.feedBack,k=e.setFeedBack,D=e.resetUserAccess,L=Object(o.useState)(""),q=Object(a.a)(L,2),U=q[0],F=q[1],V=Object(o.useState)(!1),B=Object(a.a)(V,2),M=B[0],z=B[1],G=Object(o.useState)(null),Y=Object(a.a)(G,2),H=Y[0],W=Y[1],X=Object(o.useState)(null),J=Object(a.a)(X,2),K=J[0],Z=J[1],Q=Object(o.useState)(null),$=Object(a.a)(Q,2),ee=$[0],te=$[1],se=Object(o.useState)(null),re=Object(a.a)(se,2),ce=re[0],ne=re[1],ie=Object(o.useState)(null),ae=Object(a.a)(ie,2),oe=ae[0],le=ae[1],de=Object(o.useState)(null),ue=Object(a.a)(de,2),be=ue[0],me=ue[1];Object(o.useEffect)((function(){var e=function(){var e=Object(i.a)(n.a.mark((function e(){var t;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k({type:"",message:""}),h(!0),e.prev=2,e.next=5,O.a.get("".concat(T.a.APPLICATION,"/schools"));case 5:t=e.sent,Z(t.data),h(!1),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),k({type:"danger",message:Object(E.a)(e.t0)});case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(){return e.apply(this,arguments)}}(),t=function(){var e=Object(i.a)(n.a.mark((function e(){var t;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k({type:"",message:""}),h(!0),e.prev=2,e.next=5,O.a.get("".concat(T.a.APPLICATION,"/roomlocation"));case 5:t=e.sent,te(t.data),ne(P(t.data)),h(!1),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),k({type:"danger",message:Object(E.a)(e.t0)});case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(){return e.apply(this,arguments)}}();e(),t()}),[k,h]);var fe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"block";if(k({type:"",message:""}),e||k({type:"warning",message:"User Access is required doesn't exist"}),z(!0),!window.confirm("Are sure you want to ".concat(t," this user?")))return z(!1);"block"===t?g(e):_(e),k({type:"success",message:"User has been ".concat("block"===t?"block":"unblock","ed!")}),z(!1),e=""},pe=function(){var e=Object(i.a)(n.a.mark((function e(t){var s;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(k({type:"",message:""}),t||k({type:"warning",message:"User Access is required doesn't exist"}),window.confirm("Are sure you want to reset to default access?")){e.next=4;break}return e.abrupt("return",z(!1));case 4:return z(!0),W("RESET"),e.prev=6,e.next=9,O.a.delete("".concat(T.a.AUTH,"/custaccess/user/").concat(t));case 9:e.sent&&D(t),(s=c.filter((function(e){return e.user_id===t}))[0]).default_access&&le(s.default_access.access),k({type:"success",message:"Reseting User Access complete successfully"}),me(null),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(6),console.error({reseting_user_access:e.t0}),k({type:"danger",message:Object(E.a)(e.t0)});case 21:z(!1),W(null),t="";case 24:case"end":return e.stop()}}),e,null,[[6,17]])})));return function(t){return e.apply(this,arguments)}}(),xe=function(e,t){var s=[],r=[];if(t)r=e.find((function(e){return e._id===t}))&&e.find((function(e){return e._id===t})).districts?e.find((function(e){return e._id===t})).districts:[];else for(var c in e)if(Object.prototype.hasOwnProperty.call(e,c))for(var n in e[c].districts)Object.prototype.hasOwnProperty.call(e[c].districts,n)&&(s.includes(e[c].districts[n]._id)||(s.push(e[c].districts[n]._id),r.push(e[c].districts[n])));return r};return Object(C.jsxs)(o.Fragment,{children:[I&&""!==I.type&&Object(C.jsxs)("div",{className:"alert-".concat(I.type," flex flex-row items-center relative"),children:[Object(C.jsx)("span",{className:"absolute top-0 bottom-0 right-0 px-4 py-3",children:Object(C.jsx)(l.y,{className:"h-5 w-5 text-gray-700 hover:font-bold",title:"Close",onClick:function(){return k({type:"",message:""})}})}),Object(C.jsx)(l.F,{className:"h-10 w-10"}),Object(C.jsxs)("div",{className:"alert-content ml-4",children:[Object(C.jsx)("div",{className:"alert-title font-semibold text-lg",children:"success"===I.type?"Success":"Error"}),Object(C.jsx)("div",{className:"alert-description text-sm",children:I.message})]})]}),!v&&Object(C.jsx)("div",{className:"grid md:grid-cols-5 gap-2 mb-5",children:Object(C.jsxs)("div",{className:"md:col-span-5 rounded",children:[Object(C.jsx)("div",{className:"my-2 flex sm:flex-row flex-col justify-between",children:Object(C.jsx)("div",{className:"flex flex-col md:flex-row gap-1 items-center mx-1.5"})}),c&&Object(C.jsx)(d.a,{columns:[{columnTitle:"#",alignText:"left",padding:"p-3"},{columnTitle:"Names",alignText:"left",padding:"p-3"},{columnTitle:"Email",alignText:"left",padding:"p-3"},{columnTitle:"Gender",alignText:"left",padding:"p-3"},{columnTitle:"Role",alignText:"left",padding:"p-3"},{columnTitle:"",alignText:"left",padding:"p-3"}],rows:function(){if(!0===x)return[Object(C.jsx)("tr",{className:"border-b border-gray-200 hover:bg-gray-100",children:Object(C.jsx)("td",{className:"p-3 text-center",colSpan:8,children:Object(C.jsx)(N.a,{})})},1)];var e=c;return e.length<=0?[Object(C.jsx)("tr",{className:"border-b border-gray-200 hover:bg-gray-100",children:Object(C.jsx)("td",{className:"p-3 text-center",colSpan:8,children:"No Data Found"})},1)]:e.map((function(e,t){var s,r;return Object(C.jsxs)("tr",{className:"border-b border-gray-200 hover:bg-gray-100 group cursor-pointer",onClick:function(){y(e),F(e.user_id)},children:[Object(C.jsx)("td",{className:"p-3 text-left whitespace-nowrap",children:t+1}),Object(C.jsx)("td",{className:"p-3 text-left",children:Object(C.jsx)("span",{children:e.user_info&&e.user_info.fname+" "+e.user_info.lname})}),Object(C.jsx)("td",{className:"p-3 text-left",children:e.email}),Object(C.jsx)("td",{className:"p-3 text-left",children:e.user_info&&"M"===e.user_info.sex?"Male":"Female"}),Object(C.jsx)("td",{className:"p-3 text-left text-blue-700 text-base font-medium",children:e.default_access&&e.default_access.system_user_role_id&&e.default_access.system_user_role_id&&Object(C.jsx)("span",{className:"px-2 py-1 font-semibold rounded text-blue-700 bg-blue-100 dark:bg-blue-700 dark:text-blue-100",children:(null===(s=Object(u.e)(b,e.default_access.system_user_role_id))||void 0===s?void 0:s.role)&&Object(u.a)(null===(r=Object(u.e)(b,e.default_access.system_user_role_id))||void 0===r?void 0:r.role)})}),Object(C.jsx)("td",{className:"px-3 text-center",children:Object(C.jsx)("button",{className:"btn bg-gray-200 group-hover:bg-blue-700 group-hover:text-white focus:outline-none",title:"Manage User Access",onClick:function(){y(e),F(e.user_id)},children:"Manage"})})]},t)}))},pagination:!0,search:!0,thColor:"gray",loading:x})]})}),v&&Object(C.jsxs)("div",{className:"bg-gray-100 h-100",children:[I&&""!==I.type&&Object(C.jsxs)("div",{className:"alert-".concat(I.type," flex flex-row items-center relative mb-4"),children:[Object(C.jsx)("span",{className:"absolute top-0 bottom-0 right-0 px-4 py-3",children:Object(C.jsx)(l.y,{className:"h-5 w-5 text-gray-700 hover:font-bold",title:"Close",onClick:function(){return k({type:"",message:""})}})}),Object(C.jsx)(l.F,{className:"h-10 w-10"}),Object(C.jsxs)("div",{className:"alert-content ml-4",children:[Object(C.jsx)("div",{className:"alert-title font-semibold text-lg",children:"success"===I.type?"Success":"Error"}),Object(C.jsx)("div",{className:"alert-description text-sm",children:I.message})]})]}),Object(C.jsxs)("div",{className:"bg-white border-b border-t px-4 py-2 flex flex-col md:flex-row items-center gap-x-14",children:[c.find((function(e){return e.user_id===U}))?Object(C.jsxs)("div",{className:"flex flex-col md:flex-row md:items-start items-center w-full gap-3",children:[Object(C.jsx)("img",{src:"pic"!==c.find((function(e){return e.user_id===U})).user_info.photo?c.find((function(e){return e.user_id===U})).user_info.photo:m,alt:"",className:"rounded-full w-32 h-32"}),Object(C.jsxs)("div",{className:"flex flex-col gap-1 items-start w-full",children:[Object(C.jsx)("span",{className:"text-2xl font-semibold",children:c.find((function(e){return e.user_id===U})).user_info.fname+" "+c.find((function(e){return e.user_id===U})).user_info.lname}),Object(C.jsxs)("div",{className:"flex items-center",children:[Object(C.jsx)(l.ab,{className:"w-5 h-5"}),Object(C.jsx)("span",{className:"text-lg font-medium",children:c.find((function(e){return e.user_id===U})).default_access&&Object(u.e)(b,c.find((function(e){return e.user_id===U})).default_access.system_user_role_id).role})]}),Object(C.jsxs)("div",{className:"flex items-center gap-1",children:[Object(C.jsx)("span",{className:"text-gray-500",children:"Level:"}),Object(C.jsx)("span",{className:"text-base font-medium",children:c.find((function(e){return e.user_id===U})).default_access&&Object(u.e)(b,c.find((function(e){return e.user_id===U})).default_access.system_user_role_id).district_required?"District":c.find((function(e){return e.user_id===U})).default_access&&Object(u.e)(b,c.find((function(e){return e.user_id===U})).default_access.system_user_role_id).school_required?"School":c.find((function(e){return e.user_id===U})).default_access&&Object(u.e)(b,c.find((function(e){return e.user_id===U})).default_access.system_user_role_id).room_required?"Room":c.find((function(e){return e.user_id===U})).default_access&&Object(u.e)(b,c.find((function(e){return e.user_id===U})).default_access.system_user_role_id).education_institution_required?"Institute":"-"})]}),c.find((function(e){return e.user_id===U})).default_access&&Object(u.e)(b,c.find((function(e){return e.user_id===U})).default_access.system_user_role_id).education_institution_required?Object(C.jsxs)("div",{className:"flex items-center gap-1",children:[Object(C.jsx)("span",{className:"text-gray-500",children:"Institute:"}),Object(C.jsx)("span",{className:"text-base font-medium",children:c.find((function(e){return e.user_id===U})).default_access&&j.education_categories&&Object(u.c)(j.education_categories,c.find((function(e){return e.user_id===U})).default_access.education_institution_id)?Object(u.c)(j.education_categories,c.find((function(e){return e.user_id===U})).default_access.education_institution_id).education_category_title:"Unknown Institute"})]}):c.find((function(e){return e.user_id===U})).default_access&&Object(u.e)(b,c.find((function(e){return e.user_id===U})).default_access.system_user_role_id).district_required?Object(C.jsxs)("div",{className:"flex items-center gap-1",children:[Object(C.jsx)("span",{className:"text-gray-500",children:"District:"}),Object(C.jsx)("span",{className:"text-base font-medium",children:c.find((function(e){return e.user_id===U})).default_access&&ee&&xe(ee).find((function(e){return e._id===c.find((function(e){return e.user_id===U})).default_access.district_id}))&&xe(ee).find((function(e){return e._id===c.find((function(e){return e.user_id===U})).default_access.district_id})).district_name})]}):c.find((function(e){return e.user_id===U})).default_access&&Object(u.e)(b,c.find((function(e){return e.user_id===U})).default_access.system_user_role_id).school_required?Object(C.jsxs)("div",{className:"flex items-center gap-1",children:[Object(C.jsx)("span",{className:"text-gray-500",children:"School:"}),Object(C.jsx)("span",{className:"text-base font-medium",children:K&&K.find((function(e){var t;return e._id===(null===(t=c.find((function(e){return e.user_id===U})).default_access)||void 0===t?void 0:t.school_id)}))?K.find((function(e){var t;return e._id===(null===(t=c.find((function(e){return e.user_id===U})).default_access)||void 0===t?void 0:t.school_id)})).school_name:"Unknown school"})]}):c.find((function(e){return e.user_id===U})).default_access&&Object(u.e)(b,c.find((function(e){return e.user_id===U})).default_access.system_user_role_id).room_required&&Object(C.jsxs)("div",{className:"flex items-center gap-1",children:[Object(C.jsx)(l.Z,{className:"text-gray-500"}),ce&&Object(C.jsx)("span",{className:"text-base font-medium",children:(null===(t=ce.find((function(e){var t;return e.room_id===(null===(t=c.find((function(e){return e.user_id===U})).default_access)||void 0===t?void 0:t.room_id)})))||void 0===t?void 0:t.district_name)+" - "+(null===(s=ce.find((function(e){var t;return e.room_id===(null===(t=c.find((function(e){return e.user_id===U})).default_access)||void 0===t?void 0:t.room_id)})))||void 0===s?void 0:s.center_name)+" - Room "+(null===(r=ce.find((function(e){var t;return e.room_id===(null===(t=c.find((function(e){return e.user_id===U})).default_access)||void 0===t?void 0:t.room_id)})))||void 0===r?void 0:r.room_name)})]})]})]},c.find((function(e){return e.user_id===U})).user_id):Object(C.jsx)(A.b,{theme:A.a.Dark,value:"User info not found"}),c.find((function(e){return e.user_id===U}))&&Object(C.jsxs)("div",{className:"flex flex-col w-full",children:[Object(C.jsxs)("div",{className:"flex items-center gap-1",children:[Object(C.jsx)("span",{className:"text-gray-500",children:"NID:"}),Object(C.jsx)("span",{className:"text-base font-medium",children:c.find((function(e){return e.user_id===U})).n_id})]}),Object(C.jsxs)("div",{className:"flex items-center gap-1",children:[Object(C.jsx)("span",{className:"text-gray-500",children:"Email:"}),Object(C.jsx)("span",{className:"text-base font-medium",children:c.find((function(e){return e.user_id===U})).email})]}),Object(C.jsxs)("div",{className:"flex items-center gap-1",children:[Object(C.jsx)("span",{className:"text-gray-500",children:"Phone:"}),Object(C.jsx)("span",{className:"text-base font-medium",children:c.find((function(e){return e.user_id===U})).phone_number})]}),Object(C.jsxs)("div",{className:"flex items-center gap-1",children:[Object(C.jsx)("span",{className:"text-gray-500",children:"Status:"}),Object(C.jsx)("span",{className:"text-base font-medium",children:!1===c.find((function(e){return e.user_id===U})).is_active?"Blocked":"Active"})]}),Object(C.jsxs)("div",{className:"flex items-center gap-1",children:[c.find((function(e){return e.user_id===U})).custome_access&&Object(C.jsxs)("button",{className:"px-2 py-1 font-semibold text-gray-50 inline-flex items-center rounded ".concat(H&&"RESET"===H?"cursor-wait bg-gray-400":"bg-gray-600"),onClick:function(){return pe(c.find((function(e){return e.user_id===U})).user_id)},disabled:M,children:[Object(C.jsx)(l.ab,{className:"w-4 h-4 fill-current"}),Object(C.jsx)("span",{children:H&&"RESET"===H?"Reseting...":"Reset Access"})]}),!w&&Object(C.jsxs)("button",{className:"bg-yellow-300 hover:bg-yellow-400 px-2 py-1 font-semibold text-black inline-flex items-center rounded",onClick:function(){return R(!0)},children:[Object(C.jsx)(l.ab,{className:"w-4 h-4 fill-current"}),Object(C.jsx)("span",{children:"Change Role"})]}),c.find((function(e){return e.user_id===U})).is_active?Object(C.jsxs)("button",{className:"px-2 py-1 font-semibold hidden text-gray-100 inline-flex items-center rounded ".concat(H&&"STATUS"===H?"cursor-wait bg-red-500":"bg-red-700"),onClick:function(){return!M&&v&&fe(c.find((function(e){return e.user_id===U})).user_id)},disabled:M,children:[Object(C.jsx)(l.ab,{className:"w-4 h-4 fill-current"}),Object(C.jsx)("span",{children:H&&"RESET"===H?"Loading...":"Activate"})]}):Object(C.jsxs)("button",{className:"px-2 py-1 font-semibold hidden text-gray-100 inline-flex items-center rounded ".concat(H&&"STATUS"===H?"cursor-wait bg-yellow-500":"bg-yellow-700"),onClick:function(){return!M&&v&&fe(c.find((function(e){return e.user_id===U})).user_id)},disabled:M,children:[Object(C.jsx)(l.ab,{className:"w-4 h-4 fill-current"}),Object(C.jsx)("span",{children:H&&"RESET"===H?"Loading...":"Re-Activate"})]})]})]},c.find((function(e){return e.user_id===U})).user_id)]}),v&&w?Object(C.jsx)(S,{userInfo:v,roleList:b,district:p,setFeedBack:k,schoolList:K,roomList:ee,setChangeRole:R}):Object(C.jsx)(f.UserAccess,{userInfo:c.filter((function(e){return e.user_id===U}))[0],manageUserId:U,feedBack:I,setFeedBack:k,setUserAccess:le,userAccess:oe,setCurrentAccess:me,currentAccess:be})]})]})}))},845:function(e,t,s){"use strict";s.r(t),s.d(t,"distinctDistrict",(function(){return R})),s.d(t,"distinctCenter",(function(){return C})),s.d(t,"distinctRoom",(function(){return I})),s.d(t,"Locations",(function(){return k}));var r=s(14),c=s(4),n=s(87),i=s(91),a=s(10),o=s(17),l=s(211),d=s(234),u=s(5),b=s.n(u),m=s(7),f=s(45),p=s(8),x=s.n(p),j=s(9),h=s(94),g=s(28),O=s(12),_=s(75),v=s(23),y=s(196),N=s(1),w=Object(o.b)(null,{FC_CreateDistrict:l.b,FC_UpdateDistrict:l.l,FC_DeleteDistrict:l.g,PushPopupAlert:h.c})((function(e){var t=Object(c.useState)(""),s=Object(r.a)(t,2),n=s[0],i=s[1],o=Object(c.useState)(0),l=Object(r.a)(o,2),d=l[0],u=l[1],p=Object(c.useState)(null),h=Object(r.a)(p,2),w=h[0],T=h[1],E=function(){var t=Object(m.a)(b.a.mark((function t(){var s,r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!Object(y.f)(n)){t.next=2;break}return t.abrupt("return",T({element:"district_name",msg:"District name is required"}));case 2:if(!(d<=0)){t.next=4;break}return t.abrupt("return",T({element:"district_code",msg:"Invalid district code, code must be greater than 0"}));case 4:if(e.setLoadingRequest(!0),t.prev=5,"CREATE_DISTRICT"!==e.actionTypes){t.next=13;break}return t.next=9,x.a.post("".concat(j.a.APPLICATION,"/district"),{province_id:e.thisProvince._id,province_code:e.thisProvince.province_code,district_name:n,district_code:d,centers:[]});case 9:(s=t.sent).data&&(console.log({province_id:e.thisProvince._id,data:s.data.data,res:s}),e.FC_CreateDistrict({province_id:e.thisProvince._id,data:{centers:s.data.data.centers,sectors:s.data.data.sectors,province_code:s.data.data.province_code,province_id:s.data.data.province_id,district_code:s.data.data.district_code,district_name:s.data.data.district_name,district_id:s.data.data._id}}),e.PushPopupAlert({title:"New district created successfully",theme:g.a.success}),e.setLoadingRequest(!1),e.setActionTypes(null),i(""),u(0)),t.next=19;break;case 13:if(!e.thisDistrict||"UPDATE_DISTRICT"!==e.actionTypes){t.next=19;break}return r=e.thisDistrict.centers.map((function(e){return e._id})),t.next=17,x.a.patch("".concat(j.a.APPLICATION,"/district"),{district_id:e.thisDistrict._id,province_code:e.thisProvince.province_code,district_name:n,district_code:d,centers:r});case 17:(s=t.sent).data&&(e.FC_UpdateDistrict({province_id:e.thisProvince._id,district_id:e.thisDistrict._id,district_name:n}),e.PushPopupAlert({title:"District updated successfully",theme:g.a.success}),e.setLoadingRequest(!1),e.setActionTypes(null),i(""),e.setThisDistrict(null));case 19:t.next=26;break;case 21:t.prev=21,t.t0=t.catch(5),console.log({doc_category_error:t.t0}),e.PushPopupAlert({title:Object(O.a)(t.t0),theme:g.a.danger}),e.setLoadingRequest(!1);case 26:case"end":return t.stop()}}),t,null,[[5,21]])})));return function(){return t.apply(this,arguments)}}(),R=function(){var t=Object(m.a)(b.a.mark((function t(s){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,x.a.delete("".concat(j.a.APPLICATION,"/district/").concat(s));case 3:t.sent.data&&(e.FC_DeleteDistrict({province_id:e.thisProvince._id,district_id:s}),e.PushPopupAlert({title:"District deleted successfully",theme:g.a.success}),e.setLoadingRequest(!1),e.setActionTypes(null)),t.next=12;break;case 7:t.prev=7,t.t0=t.catch(0),console.log({district_error:t.t0}),e.PushPopupAlert({title:Object(O.a)(t.t0),theme:g.a.danger}),e.setLoadingRequest(!1);case 12:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}();return Object(N.jsxs)("div",{className:"w-full p-2",children:[e.thisProvince.districts.length>0?Object(N.jsx)("div",{className:"rounded border border-gray-100 shadow-sm animate__animated animate__fadeIn",children:Object(N.jsxs)("table",{className:"w-full z-0",children:[Object(N.jsx)("thead",{className:"bg-gray-50",children:Object(N.jsxs)("tr",{className:"text-left",children:[Object(N.jsx)("th",{className:"px-3 py-3",children:"#"}),Object(N.jsx)("th",{children:"District name"}),Object(N.jsx)("th",{children:"District code"}),Object(N.jsx)("th",{children:"Sectors"}),Object(N.jsx)("th",{children:"Status"})]})}),Object(N.jsx)("tbody",{className:"text-base",children:e.thisProvince.districts.map((function(t,s){return Object(N.jsxs)("tr",{className:"text-left border-b border-gray-50",children:[Object(N.jsx)("td",{className:"px-3 py-1",children:s+1}),Object(N.jsx)("td",{children:t.district_name}),Object(N.jsx)("td",{children:t.district_code}),Object(N.jsx)("td",{children:t.sectors.length>0?t.sectors.length+" Sector(s)":""}),Object(N.jsx)("td",{children:Object(N.jsxs)("div",{className:"flex items-center gap-2",children:[Object(N.jsx)("button",{title:e.thisDistrict&&e.thisDistrict._id===t._id?"Close Centers":"View Centers",className:"".concat(e.thisDistrict&&e.thisDistrict._id===t._id?"bg-gray-500 hover:bg-gray-600":"bg-gray-400 hover:bg-gray-500"," p-2 rounded-full shadow-md flex justify-center items-center focus:outline-none"),onClick:function(){return e.thisDistrict&&e.thisDistrict._id===t._id?e.setThisDistrict(null):e.setThisDistrict(t)},children:e.thisDistrict&&e.thisDistrict._id===t._id?Object(N.jsx)(f.l,{className:"text-white w-4 h-4"}):Object(N.jsx)(f.k,{className:"text-white w-4 h-4"})}),Object(N.jsx)("button",{title:"Update district",className:"bg-blue-500 hover:bg-blue-600 p-2 rounded-full shadow-md flex justify-center items-center focus:outline-none",onClick:function(){e.setThisDistrict(t),i(t.district_name),u(t.district_code),e.setActionTypes("UPDATE_DISTRICT")},disabled:e.loadingRequest||null!==e.actionTypes,children:Object(N.jsx)(a.z,{className:"text-white w-4 h-4"})}),Object(N.jsx)("button",{title:"Delete Sub-Category",className:"bg-red-500 hover:bg-red-600 p-2 rounded-full shadow-md flex justify-center items-center focus:outline-none",onClick:function(){return R(t._id)},disabled:e.loadingRequest,children:Object(N.jsx)(a.x,{className:"text-white w-4 h-4"})})]})})]},s+t._id)}))})]})}):Object(N.jsx)(_.b,{theme:_.a.Dark,value:"No district found!",component:Object(N.jsx)("div",{className:"w-full mt-2 flex flex-row items-center justify-center",children:Object(N.jsx)("ul",{className:"text-sm py-2 text-blue-600 font-bold flex flex-row gap-2",children:Object(N.jsx)("li",{onClick:function(){return e.setActionTypes("CREATE_DISTRICT")},className:"underline text-gray-500 cursor-pointer",children:"Add district"})})})}),e.actionTypes&&("CREATE_DISTRICT"===e.actionTypes||"UPDATE_DISTRICT"===e.actionTypes)&&Object(N.jsx)(v.d,{backDrop:!0,theme:v.c.default,close:function(){e.setActionTypes(null),i(""),u(10),T(null)},displayClose:!1,backDropClose:!1,title:Object(N.jsx)("div",{className:"flex items-center space-x-5",children:Object(N.jsx)("div",{className:"block pl-2 font-semibold text-xl self-start text-gray-700",children:Object(N.jsx)("h2",{className:"uppercase text-back",children:"CREATE_DISTRICT"===e.actionTypes?"CREATING NEW DISTRICT":"UPDATE_DISTRICT"===e.actionTypes&&"UPDATING EXISTING DISTRICT"})})}),widthSizeClass:v.b.medium,padding:{title:!0,body:!1,footer:!1},children:Object(N.jsxs)("div",{className:"mx-5 mb-4",children:[Object(N.jsxs)("div",{className:"py-2 text-base leading-6 space-y-4 text-gray-700 sm:text-lg sm:leading-7",children:[Object(N.jsxs)("div",{className:"flex flex-col",children:[Object(N.jsx)("label",{children:"District name"}),Object(N.jsx)("input",{type:"text",className:"bg-white py-1 px-2 border-2 ".concat(w&&"district_name"===w.element?"border-red-700":"border-gray-700"," rounded focus:outline-none focus:bg-gray-100"),onChange:function(e){w&&"district_name"===w.element&&T(null),i(e.target.value)},value:n,disabled:e.loadingRequest}),w&&"district_name"===w.element&&Object(N.jsx)("span",{className:"text-red-700",children:w.msg})]}),Object(N.jsxs)("div",{className:"flex flex-col",children:[Object(N.jsx)("label",{children:"District code"}),Object(N.jsx)("input",{type:"number",className:"bg-white py-1 px-2 border-2 ".concat(w&&"district_code"===w.element?"border-red-700":"border-gray-700"," rounded focus:outline-none focus:bg-gray-100"),onChange:function(e){w&&"district_code"===w.element&&T(null),u(Number(e.target.value))},value:d,disabled:e.loadingRequest}),w&&"district_code"===w.element&&Object(N.jsx)("span",{className:"text-red-700",children:w.msg})]})]}),Object(N.jsxs)("div",{className:"pt-4 flex justify-between",children:[Object(N.jsx)("button",{onClick:function(){e.setActionTypes(null),i(""),u(10),T(null)},className:"btn bg-gray-400 text-white hover:bg-gray-600",type:"button",disabled:e.loadingRequest,children:"Exit"}),Object(N.jsx)("button",{className:"btn bg-primary text-white hover:bg-blue-600",type:"button",onClick:function(){return E()},disabled:e.loadingRequest,children:e.loadingRequest?"Loading...":"Save"})]})]})})]})})),T=Object(o.b)(null,{FC_CreateProvince:l.c,FC_UpdateProvince:l.m,FC_DeleteProvince:l.h,PushPopupAlert:h.c})((function(e){var t=Object(c.useState)(""),s=Object(r.a)(t,2),n=s[0],i=s[1],o=Object(c.useState)(0),l=Object(r.a)(o,2),d=l[0],u=l[1],p=Object(c.useState)(null),h=Object(r.a)(p,2),w=h[0],T=h[1],E=function(){var t=Object(m.a)(b.a.mark((function t(){var s,r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!Object(y.f)(n)){t.next=2;break}return t.abrupt("return",T({element:"province_title",msg:"Title of Province is required"}));case 2:if(!(d<=0)){t.next=4;break}return t.abrupt("return",T({element:"province_code",msg:"Code of Province is required"}));case 4:if(e.setLoadingRequest(!0),t.prev=5,"CREATE_PROVINCE"!==e.actionTypes){t.next=13;break}return t.next=9,x.a.post("".concat(j.a.APPLICATION,"/province"),{province_name:n,province_code:d,districts:[]});case 9:(s=t.sent).data&&(e.FC_CreateProvince(s.data.data),e.PushPopupAlert({title:"New Province created successfully",theme:g.a.success}),e.setLoadingRequest(!1),e.setActionTypes(null),i("")),t.next=19;break;case 13:if(!e.thisProvince||"UPDATE_PROVINCE"!==e.actionTypes){t.next=19;break}return r=e.thisProvince.districts.map((function(e){return e._id})),t.next=17,x.a.patch("".concat(j.a.APPLICATION,"/province"),{province_id:e.thisProvince._id,province_name:n,province_code:d,districts:r});case 17:(s=t.sent).data&&(console.log({res:s.data.updated}),e.FC_UpdateProvince(s.data.updated),e.PushPopupAlert({title:"Province updated successfully",theme:g.a.success}),e.setLoadingRequest(!1),e.setActionTypes(null),i(""),e.setThisProvince(null));case 19:t.next=26;break;case 21:t.prev=21,t.t0=t.catch(5),console.error({province_error:t.t0}),e.PushPopupAlert({title:Object(O.a)(t.t0),theme:g.a.danger}),e.setLoadingRequest(!1);case 26:case"end":return t.stop()}}),t,null,[[5,21]])})));return function(){return t.apply(this,arguments)}}(),R=function(){var t=Object(m.a)(b.a.mark((function t(s){var r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,x.a.delete("".concat(j.a.APPLICATION,"/province/").concat(s));case 3:(r=t.sent).data&&(console.log({res:r}),e.FC_DeleteProvince(s),e.PushPopupAlert({title:"Province deleted successfully",theme:g.a.success}),e.setLoadingRequest(!1),e.setActionTypes(null)),t.next=12;break;case 7:t.prev=7,t.t0=t.catch(0),console.log({province_error:t.t0}),e.PushPopupAlert({title:Object(O.a)(t.t0),theme:g.a.danger}),e.setLoadingRequest(!1);case 12:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}();return Object(N.jsxs)("div",{className:"w-full p-2",children:[e.locations.length>0?e.locations.map((function(t,s){return Object(N.jsxs)("div",{className:"flex justify-between items-center p-2 mb-3 rounded border border-gray-100 shadow",children:[Object(N.jsx)("div",{className:"flex items-center",children:Object(N.jsxs)("div",{className:"ml-2",children:[Object(N.jsx)("div",{className:"text-xl font-semibold text-gray-600",children:t.province_name}),Object(N.jsx)("div",{className:"text-sm font-light text-gray-500",children:t.districts.length>0?t.districts.length+"District(s)":null})]})}),Object(N.jsxs)("div",{className:"flex items-center gap-2",children:[Object(N.jsx)("button",{title:e.thisProvince&&e.thisProvince._id===t._id&&"UPDATE_PROVINCE"!==e.actionTypes?"Close Districts":"View Districts",className:"".concat(e.thisProvince&&e.thisProvince._id===t._id&&"UPDATE_PROVINCE"!==e.actionTypes?"bg-gray-500 hover:bg-gray-600":"bg-gray-400 hover:bg-gray-500"," p-2 rounded-full shadow-md flex justify-center items-center focus:outline-none"),onClick:function(){e.thisProvince&&e.thisProvince._id===t._id?e.setThisProvince(null):e.setThisProvince(t),i(""),e.setActionTypes(null)},children:e.thisProvince&&e.thisProvince._id===t._id&&"UPDATE_PROVINCE"!==e.actionTypes?Object(N.jsx)(f.l,{className:"text-white w-4 h-4"}):Object(N.jsx)(f.k,{className:"text-white w-4 h-4"})}),Object(N.jsx)("button",{title:"Update Province",className:"bg-blue-500 hover:bg-blue-600 p-2 rounded-full shadow-md flex justify-center items-center focus:outline-none",onClick:function(){e.setThisProvince(t),i(t.province_name),u(t.province_code),e.setActionTypes("UPDATE_PROVINCE")},disabled:e.loadingRequest||null!==e.actionTypes,children:Object(N.jsx)(a.z,{className:"text-white w-4 h-4"})}),Object(N.jsx)("button",{title:"Delete Sub-Category",className:"bg-red-500 hover:bg-red-600 p-2 rounded-full shadow-md flex justify-center items-center focus:outline-none",onClick:function(){return R(t._id)},disabled:e.loadingRequest||null!==e.actionTypes,children:Object(N.jsx)(a.x,{className:"text-white w-4 h-4"})})]})]},s+t._id)})):Object(N.jsx)(_.b,{theme:_.a.Dark,value:"No province found!",component:Object(N.jsx)("div",{className:"w-full mt-2 flex flex-row items-center justify-center",children:Object(N.jsx)("ul",{className:"text-sm py-2 text-blue-600 font-bold flex flex-row gap-2",children:Object(N.jsx)("li",{onClick:function(){return e.setActionTypes("CREATE_PROVINCE")},className:"underline text-gray-500 cursor-pointer",children:"Add province"})})})}),e.actionTypes&&("CREATE_PROVINCE"===e.actionTypes||"UPDATE_PROVINCE"===e.actionTypes)&&Object(N.jsx)(v.d,{backDrop:!0,theme:v.c.default,close:function(){e.setActionTypes(null),i(""),u(0),T(null)},displayClose:!1,backDropClose:!1,title:Object(N.jsx)("div",{className:"flex items-center space-x-5",children:Object(N.jsx)("div",{className:"block pl-2 font-semibold text-xl self-start text-gray-700",children:Object(N.jsx)("h2",{className:"uppercase text-back",children:"CREATE_PROVINCE"===e.actionTypes?"CREATING NEW PROVINCE":"UPDATE_PROVINCE"===e.actionTypes&&"UPDATING EXISTING PROVINCE"})})}),widthSizeClass:v.b.medium,padding:{title:!0,body:!1,footer:!1},children:Object(N.jsxs)("div",{className:"mx-5 mb-4",children:[Object(N.jsxs)("div",{className:"py-2 text-base leading-6 space-y-4 text-gray-700 sm:text-lg sm:leading-7",children:[Object(N.jsxs)("div",{className:"flex flex-col",children:[Object(N.jsx)("label",{children:"Province name"}),Object(N.jsx)("input",{type:"text",className:"bg-white py-1 px-2 border-2 ".concat(w&&"province_title"===w.element?"border-red-700":"border-gray-700"," rounded focus:outline-none focus:bg-gray-100"),onChange:function(e){w&&"province_title"===w.element&&T(null),i(e.target.value)},value:n,disabled:e.loadingRequest}),w&&"province_title"===w.element&&Object(N.jsx)("span",{className:"text-red-700",children:w.msg})]}),Object(N.jsxs)("div",{className:"flex flex-col",children:[Object(N.jsxs)("label",{children:["Province code ",e.loadingRequest&&"TRUE"]}),Object(N.jsx)("input",{type:"number",className:"bg-white py-1 px-2 border-2 ".concat(w&&"province_code"===w.element?"border-red-700":"border-gray-700"," rounded focus:outline-none focus:bg-gray-100"),onChange:function(e){w&&"province_code"===w.element&&T(null),u(Number(e.target.value))},value:d,disabled:e.loadingRequest}),w&&"province_code"===w.element&&Object(N.jsx)("span",{className:"text-red-700",children:w.msg})]})]}),Object(N.jsxs)("div",{className:"pt-4 flex justify-between",children:[Object(N.jsx)("button",{onClick:function(){e.setActionTypes(null),i(""),u(0),T(null)},className:"btn bg-gray-400 text-white hover:bg-gray-600",type:"button",disabled:e.loadingRequest,children:"Exit"}),Object(N.jsx)("button",{className:"btn bg-primary text-white hover:bg-blue-600",type:"button",onClick:function(){return E()},disabled:e.loadingRequest,children:e.loadingRequest?"Loading...":"Save"})]})]})})]})})),E=Object(o.b)(null,{FC_CreateSector:l.e,FC_UpdateSector:l.o,FC_DeleteSector:l.j,PushPopupAlert:h.c})((function(e){var t=Object(c.useState)(""),s=Object(r.a)(t,2),n=s[0],i=s[1],o=Object(c.useState)(0),l=Object(r.a)(o,2),d=l[0],u=l[1],f=Object(c.useState)(null),p=Object(r.a)(f,2),h=p[0],w=p[1],T=function(){var t=Object(m.a)(b.a.mark((function t(){var s;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!Object(y.f)(n)){t.next=2;break}return t.abrupt("return",w({element:"sector_name",msg:"Sector name is required"}));case 2:if(!(d<=0)){t.next=4;break}return t.abrupt("return",w({element:"sector_code",msg:"Invalid sector code, must be "}));case 4:if(e.setLoadingRequest(!0),t.prev=5,"CREATE_SECTOR"!==e.actionTypes){t.next=13;break}return t.next=9,x.a.post("".concat(j.a.APPLICATION,"/sector"),{district_id:e.thisDistrict._id,district_code:e.thisDistrict.district_code,sector_name:n,sector_code:d});case 9:(s=t.sent).data&&(console.log({district_id:e.thisDistrict._id,data:s.data.data,res:s}),e.FC_CreateSector({province_id:e.thisDistrict.province_id,district_id:e.thisDistrict._id,data:{district_id:s.data.data.district_id,district_code:s.data.data.district_code,sector_name:s.data.data.sector_name,sector_code:s.data.data.sector_code,sector_id:s.data.data.sector_id}}),e.PushPopupAlert({title:"New sector created successfully",theme:g.a.success}),e.setLoadingRequest(!1),e.setActionTypes(null),i("")),t.next=18;break;case 13:if(!e.thisSector||"UPDATE_SECTOR"!==e.actionTypes){t.next=18;break}return t.next=16,x.a.patch("".concat(j.a.APPLICATION,"/sector"),{district_id:e.thisSector.district_id,district_code:e.thisDistrict.district_code,sector_id:e.thisSector.sector_id,sector_name:n,sector_code:d});case 16:(s=t.sent).data&&(e.FC_UpdateSector({province_id:e.thisDistrict.province_id,district_id:e.thisSector.district_id,sector_id:e.thisSector.sector_id,sector_name:n,sector_code:d}),e.PushPopupAlert({title:"Sector updated successfully",theme:g.a.success}),e.setLoadingRequest(!1),e.setActionTypes(null),i(""),e.setThisSector(null));case 18:t.next=25;break;case 20:t.prev=20,t.t0=t.catch(5),console.log({sector_error:t.t0}),e.PushPopupAlert({title:Object(O.a)(t.t0),theme:g.a.danger}),e.setLoadingRequest(!1);case 25:case"end":return t.stop()}}),t,null,[[5,20]])})));return function(){return t.apply(this,arguments)}}(),E=function(){var t=Object(m.a)(b.a.mark((function t(s){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,x.a.delete("".concat(j.a.APPLICATION,"/sector/").concat(s));case 3:t.sent.data&&(e.FC_DeleteSector({province_id:e.thisDistrict.province_id,district_id:e.thisDistrict._id,sector_id:s}),e.PushPopupAlert({title:"Sector deleted successfully",theme:g.a.success}),e.setLoadingRequest(!1),e.setActionTypes(null)),t.next=12;break;case 7:t.prev=7,t.t0=t.catch(0),console.log({district_error:t.t0}),e.PushPopupAlert({title:Object(O.a)(t.t0),theme:g.a.danger}),e.setLoadingRequest(!1);case 12:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}();return Object(N.jsxs)("div",{className:"w-full p-2",children:[e.thisDistrict.sectors&&e.thisDistrict.sectors.length>0?Object(N.jsx)("div",{className:"rounded border border-gray-100 shadow-sm animate__animated animate__fadeIn",children:Object(N.jsxs)("table",{className:"w-full z-0",children:[Object(N.jsx)("thead",{className:"bg-gray-50",children:Object(N.jsxs)("tr",{className:"text-left",children:[Object(N.jsx)("th",{className:"px-3 py-3",children:"#"}),Object(N.jsx)("th",{children:"Sector name"}),Object(N.jsx)("th",{children:"Sector code"}),Object(N.jsx)("th",{children:"Status"})]})}),Object(N.jsx)("tbody",{className:"text-sm",children:e.thisDistrict.sectors.map((function(t,s){return Object(N.jsxs)("tr",{className:"text-left border-b border-gray-50",children:[Object(N.jsx)("td",{className:"px-3 py-1",children:s+1}),Object(N.jsx)("td",{children:t.sector_name}),Object(N.jsx)("td",{children:t.sector_name}),Object(N.jsx)("td",{children:Object(N.jsxs)("div",{className:"flex items-center gap-2",children:[Object(N.jsx)("button",{title:"Update sector",className:"bg-blue-500 hover:bg-blue-600 p-2 rounded-full shadow-md flex justify-center items-center focus:outline-none",onClick:function(){e.setThisSector(t),i(t.sector_name),u(t.sector_code),e.setActionTypes("UPDATE_SECTOR")},disabled:e.loadingRequest||null!==e.actionTypes,children:Object(N.jsx)(a.z,{className:"text-white w-4 h-4"})}),Object(N.jsx)("button",{title:"Delete sector",className:"bg-red-500 hover:bg-red-600 p-2 rounded-full shadow-md flex justify-center items-center focus:outline-none",onClick:function(){return E(t.sector_id)},disabled:e.loadingRequest,children:Object(N.jsx)(a.x,{className:"text-white w-4 h-4"})})]})})]},s+t.district_id)}))})]})}):Object(N.jsx)(_.b,{theme:_.a.Dark,value:"No sector found!",component:Object(N.jsx)("div",{className:"w-full mt-2 flex flex-row items-center justify-center",children:Object(N.jsx)("ul",{className:"text-sm py-2 text-blue-600 font-bold flex flex-row gap-2",children:Object(N.jsx)("li",{onClick:function(){return e.setActionTypes("CREATE_SECTOR")},className:"underline text-gray-500 cursor-pointer",children:"Add sector"})})})}),e.actionTypes&&("CREATE_SECTOR"===e.actionTypes||"UPDATE_SECTOR"===e.actionTypes)&&Object(N.jsx)(v.d,{backDrop:!0,theme:v.c.default,close:function(){e.setActionTypes(null),i(""),u(0),w(null)},displayClose:!1,backDropClose:!1,title:Object(N.jsx)("div",{className:"flex items-center space-x-5",children:Object(N.jsx)("div",{className:"block pl-2 font-semibold text-xl self-start text-gray-700",children:Object(N.jsx)("h2",{className:"uppercase text-back",children:"CREATE_SECTOR"===e.actionTypes?"CREATING NEW SECTOR":"UPDATE_SECTOR"===e.actionTypes&&"UPDATING EXISTING SECTOR"})})}),widthSizeClass:v.b.medium,padding:{title:!0,body:!1,footer:!1},children:Object(N.jsxs)("div",{className:"w-full px-5 mb-5",children:[Object(N.jsxs)("div",{className:"py-3 text-base leading-6 space-y-4 text-gray-700 sm:text-lg sm:leading-7",children:[Object(N.jsxs)("div",{className:"flex flex-col",children:[Object(N.jsx)("label",{children:"Sector name"}),Object(N.jsx)("input",{type:"text",className:"bg-white py-1 px-2 border-2 ".concat(h&&"sector_name"===h.element?"border-red-700":"border-gray-700"," rounded focus:outline-none focus:bg-gray-100"),onChange:function(e){h&&"sector_name"===h.element&&w(null),i(e.target.value)},value:n,disabled:e.loadingRequest}),h&&"sector_name"===h.element&&Object(N.jsx)("span",{className:"text-red-700",children:h.msg})]}),Object(N.jsxs)("div",{className:"flex flex-col",children:[Object(N.jsx)("label",{children:"Sector code"}),Object(N.jsx)("input",{type:"number",className:"bg-white py-1 px-2 border-2 ".concat(h&&"sector_code"===h.element?"border-red-700":"border-gray-700"," rounded focus:outline-none focus:bg-gray-100"),onChange:function(e){h&&"sector_code"===h.element&&w(null),u(Number(e.target.value))},value:d,disabled:e.loadingRequest}),h&&"sector_code"===h.element&&Object(N.jsx)("span",{className:"text-red-700",children:h.msg})]})]}),Object(N.jsxs)("div",{className:"pt-4 flex justify-between",children:[Object(N.jsx)("button",{onClick:function(){e.setActionTypes(null),i(""),u(0),w(null)},className:"btn bg-gray-400 text-white hover:bg-gray-600",type:"button",disabled:e.loadingRequest,children:"Exit"}),Object(N.jsx)("button",{className:"btn bg-primary text-white hover:bg-blue-600",type:"button",onClick:function(){return T()},disabled:e.loadingRequest,children:e.loadingRequest?"Loading...":"Save"})]})]})})]})})),R=function(e,t){var s=[],r=[];return Object(d.a)(e).forEach((function(e){s.includes(e.district_id)||(t&&e.province_id===t||void 0===t)&&(s.push(e.district_id),r.push(e))})),r},C=function(e,t){var s=[],r=[];return Object(d.a)(e).forEach((function(e){s.includes(e.center_id)||e.district_id!==t||(s.push(e.center_id),r.push(e))})),r},I=function(e,t){var s=[],r=[];return Object(d.a)(e).forEach((function(e){s.includes(e.room_id)||e.center_id!==t||(s.push(e.room_id),r.push(e))})),r},k=Object(o.b)((function(e){return{locations:e.locations.roomLocation}}),{getAllRoom:l.p})((function(e){var t=Object(c.useState)(null),s=Object(r.a)(t,2),o=s[0],l=s[1],d=Object(c.useState)(null),u=Object(r.a)(d,2),b=u[0],m=u[1],f=Object(c.useState)(null),p=Object(r.a)(f,2),x=p[0],j=p[1],h=Object(c.useState)(null),g=Object(r.a)(h,2),O=g[0],_=g[1],v=Object(c.useState)(!0),y=Object(r.a)(v,2),R=y[0],C=y[1],I=Object(c.useState)(!1),k=Object(r.a)(I,2),S=k[0],A=k[1];if(Object(c.useEffect)((function(){!e.locations.length&&R?e.getAllRoom((function(e,t){!e&&t.length>0&&console.log(t),C(!1)})):R&&C(!1)}),[R,e]),!0===R)return Object(N.jsx)("div",{className:"text-center mt-7 font-bold text-4xl text-gray-400 animate-pulse",children:"Loading locations..."});return Object(N.jsx)(c.Fragment,{children:Object(N.jsxs)("div",{className:"w-full my-5",children:[Object(N.jsx)("div",{className:"flex justify-between m-2 gap-1",children:Object(N.jsxs)("div",{className:"flex flex-col",children:[Object(N.jsx)("span",{className:"text-blue-600 text-2xl md:text-2xl lg:text-3xl font-bold",children:"Locations Management"}),Object(N.jsxs)("div",{className:"flex flex-row items-center md:gap-3 gap-2 mt-1",children:[Object(N.jsx)(n.f,{className:"text-xl"}),Object(N.jsxs)("div",{className:"flex flex-row items-center gap-1",children:[b&&Object(N.jsx)("span",{className:"text-gray-700 text-base font-bold",children:b.province_name}),x&&Object(N.jsxs)("div",{className:"flex flex-row items-center gap-1",children:[Object(N.jsx)(i.a,{}),Object(N.jsxs)("span",{className:"text-blue-600 text-base font-bold underline",children:[x.district_name," district"]})]})]})]})]})}),Object(N.jsxs)("div",{className:"w-full bg-white",children:[Object(N.jsxs)("div",{className:"border-b px-2 py-3 flex justify-between",children:[O&&(!O||"CREATE_SECTOR"!==o&&"UPDATE_SECTOR"!==o)||!x||"CREATE_DISTRICT"===o||"UPDATE_DISTRICT"===o?x&&(!x||"CREATE_DISTRICT"!==o&&"UPDATE_DISTRICT"!==o)||!b?Object(N.jsxs)("div",{className:"flex items-center gap-1",children:[Object(N.jsx)("span",{className:"uppercase text-xl font-semibold text-gray-800",children:"province"}),Object(N.jsx)("span",{children:"/"})]}):Object(N.jsxs)("div",{className:"flex items-center gap-2",children:[Object(N.jsx)("span",{className:"cursor-pointer uppercase text-xl font-semibold text-gray-800",onClick:function(){m(null)},children:"province"}),Object(N.jsx)("span",{children:"/"}),Object(N.jsx)("span",{className:"text-xl text-gray-800",children:b.province_name})]}):Object(N.jsxs)("div",{className:"flex items-center gap-1",children:[Object(N.jsx)("span",{className:"cursor-pointer uppercase text-xl font-semibold text-gray-800",onClick:function(){m(null)},children:"province"}),Object(N.jsx)("span",{children:"/"}),Object(N.jsx)("span",{className:"cursor-pointer uppercase text-xl font-semibold text-gray-800",onClick:function(){j(null)},children:"district"}),Object(N.jsx)("span",{children:"/"}),Object(N.jsx)("span",{className:"text-xl text-gray-800",children:x.district_name})]}),(!b||b&&("CREATE_PROVINCE"===o||"UPDATE_PROVINCE"===o))&&Object(N.jsxs)("button",{type:"button",className:"btn hover:bg-blue-500 mb-1 border-2 border-blue-500 bg-white\n        hover:text-white rounded-md flex items-center font-bold text-gray-700 focus:outline-none gap-1 ".concat(S&&"cursor-wait"," ").concat(null!==o&&"cursor-not-allowed"),onClick:function(){return l("CREATE_PROVINCE")},disabled:null!==o||S,children:[Object(N.jsx)(a.b,{className:"inline-block mr-1 text-xl font-bold"}),"New Province"]}),(!x||x&&("CREATE_DISTRICT"===o||"UPDATE_DISTRICT"===o))&&b&&Object(N.jsxs)("button",{type:"button",className:"btn hover:bg-blue-500 mb-1 border-2 border-blue-500 bg-white\n        hover:text-white rounded-md flex items-center font-bold text-gray-700 focus:outline-none gap-1 ".concat(S&&"cursor-wait"," ").concat(null!==o&&"cursor-not-allowed"),onClick:function(){return l("CREATE_DISTRICT")},disabled:null!==o||S,children:[Object(N.jsx)(a.b,{className:"inline-block mr-1 text-xl font-bold"}),"New District"]}),(!O||O&&("CREATE_SECTOR"===o||"UPDATE_SECTOR"===o))&&x&&"CREATE_DISTRICT"!==o&&"UPDATE_DISTRICT"!==o&&Object(N.jsxs)("button",{type:"button",className:"btn hover:bg-blue-500 mb-1 border-2 border-blue-500 bg-white\n        hover:text-white rounded-md flex items-center font-bold text-gray-700 focus:outline-none gap-1 ".concat(S&&"cursor-wait"," ").concat(null!==o&&"cursor-not-allowed"),onClick:function(){return l("CREATE_SECTOR")},disabled:null!==o||S,children:[Object(N.jsx)(a.b,{className:"inline-block mr-1 text-xl font-bold"}),"New Sector"]})]}),(!b||b&&("CREATE_PROVINCE"===o||"UPDATE_PROVINCE"===o))&&Object(N.jsx)(T,{thisProvince:b,thisDistrict:x,loadingRequest:S,locations:e.locations,actionTypes:o,setLoadingRequest:A,setThisProvince:m,setActionTypes:l}),(!x||x&&("CREATE_DISTRICT"===o||"UPDATE_DISTRICT"===o))&&b&&Object(N.jsx)(w,{thisDistrict:x,loadingRequest:S,actionTypes:o,setLoadingRequest:A,setActionTypes:l,thisProvince:b,setThisDistrict:j}),(!O||O&&("CREATE_SECTOR"===o||"UPDATE_SECTOR"===o))&&x&&"CREATE_DISTRICT"!==o&&"UPDATE_DISTRICT"!==o&&Object(N.jsx)(E,{thisDistrict:x,thisSector:O,loadingRequest:S,actionTypes:o,setLoadingRequest:A,setThisSector:_,setActionTypes:l})]})]})})}))}}]);
//# sourceMappingURL=41.ac9667f5.chunk.js.map