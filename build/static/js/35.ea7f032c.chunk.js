(this["webpackJsonpreact-redux-typescript-advance"]=this["webpackJsonpreact-redux-typescript-advance"]||[]).push([[35],{1317:function(e,t,s){"use strict";s.r(t),s.d(t,"PlacementAlgorithm",(function(){return Q}));var c=s(5),r=s.n(c),a=s(2),i=s(7),n=s(25),l=s(24),o=s(27),d=s(26),u=s(10),b=s.n(u),p=s(4),h=s(71),x=s(12),j=s(23),m=s(3),f=s(685),g=s(33),O=s(19),v=s(8),y=s(14),N=s(42),_=s(1),w=function(e){Object(o.a)(s,e);var t=Object(d.a)(s);function s(e){var c;return Object(n.a)(this,s),(c=t.call(this,e)).submitPostsRequests=function(){var e=Object(i.a)(r.a.mark((function e(t){var s,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),null!==c.state.selected_file){e.next=3;break}return e.abrupt("return",c.setState({error:"Please select excel file of posts requests",success:""}));case 3:return c.setState({error:"",success:"",loading:!0}),e.prev=4,(s=new FormData).append("positionSchoolRequest",c.state.selected_file),s.append("academic_year",c.props.session._id),e.next=10,b.a.post("".concat(v.a.PLACEMENT,"/schoolrequest"),s);case 10:(i=e.sent)&&(console.log("Res adding posts: ",i),c.setState({success:"Posts requests added successfully!",error:"",loading:!1})),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(4),console.log("Err: ",Object(a.a)({},e.t0)),c.setState({error:Object(y.a)(e.t0),success:"",loading:!1});case 18:case"end":return e.stop()}}),e,null,[[4,14]])})));return function(t){return e.apply(this,arguments)}}(),c.state={loading:!1,error:"",success:"",selected_file:null},c}return Object(l.a)(s,[{key:"render",value:function(){var e=this;return Object(_.jsx)("div",{className:"p-3 md:p-8",children:Object(_.jsx)("form",{onSubmit:this.submitPostsRequests,className:"w-full",children:Object(_.jsxs)("div",{className:"flex flex-col items-center justify-center gap-2",children:[Object(_.jsx)("div",{className:"font-extrabold text-3xl",children:"Upload posts requests"}),Object(_.jsx)("div",{className:"bg-blue-100 rounded-md px-3 text-lg font-bold text-blue-800",children:this.props.session.session_plan_name}),Object(_.jsxs)("div",{children:[Object(_.jsx)("span",{children:"Select excel file"}),Object(_.jsx)("input",{type:"file",onChange:function(t){null!==t.target.files?e.setState({selected_file:t.target.files[0],error:"",success:""}):e.setState({error:"Failed to select a file!",success:""})},disabled:this.state.loading,className:"px-3 py-2 rounded-md border-2 ".concat(!0===this.state.loading?"bg-gray-100 border-gray-200":"border-gray-700"," w-full")})]}),""!==this.state.error&&Object(_.jsx)("div",{className:"my-4 mb-0 w-full",children:Object(_.jsx)(N.b,{title:"Action failed!",theme:N.a.danger,description:this.state.error})}),""!==this.state.success&&Object(_.jsx)("div",{className:"my-4 mb-0 w-full",children:Object(_.jsx)(N.b,{title:"Action done successfully!",theme:N.a.success,description:this.state.success})}),!0===this.state.loading?Object(_.jsxs)("div",{className:"w-full mt-2 border rounded-xl p-3",children:[Object(_.jsx)(g.a,{}),Object(_.jsx)("div",{className:"-mt-10 ml-4 font-extrabold animate-pulse",children:"Loading, please wait..."})]}):Object(_.jsxs)("div",{className:"flex flex-row items-center justify-center gap-2 mt-4",children:[Object(_.jsx)("div",{onClick:function(){return e.props.closeWindow()},className:"btn bg-gray-500 font-bold w-max rounded px-3 py-2 cursor-pointer hover:bg-gray-700 text-white",children:"Close window"}),Object(_.jsx)("button",{type:"submit",className:"btn bg-blue-600 font-bold w-max rounded px-3 py-2 cursor-pointer hover:bg-blue-800 text-white",children:"Upload posts requests"})]})]})})})}}]),s}(p.Component),P=s(28),S=function(e){Object(o.a)(s,e);var t=Object(d.a)(s);function s(e){var c;return Object(n.a)(this,s),(c=t.call(this,e)).state={loading:!1,searchValue:""},c}return Object(l.a)(s,[{key:"render",value:function(){var e=this;return Object(_.jsxs)("div",{className:"bg-white",children:[Object(_.jsx)("div",{className:"my-3",children:Object(_.jsx)("input",{placeholder:"Search by district name",type:"text",value:this.state.searchValue,onChange:function(t){return e.setState({searchValue:t.target.value})},className:"px-3 py-2 rounded border border-gray-400 w-full"})}),Object(_.jsx)("div",{children:Object(_.jsxs)("table",{className:"w-full text-left text-sm",children:[Object(_.jsx)("thead",{children:Object(_.jsxs)("tr",{className:"bg-blue-600 text-white",children:[Object(_.jsx)("th",{className:"px-3 py-2",children:"#"}),Object(_.jsx)("th",{className:"px-3 py-2",children:"Code"}),Object(_.jsx)("th",{className:"px-3 py-2",children:"District name"}),Object(_.jsx)("th",{className:"px-3 py-2"})]})}),Object(_.jsx)("tbody",{children:0===Object(P.p)(this.props.districts.districts,this.state.searchValue).length?Object(_.jsx)("tr",{children:Object(_.jsx)("td",{colSpan:4,className:"py-6 text-center font-extralight text-2xl",children:"No result found!"})}):Object(P.p)(this.props.districts.districts,this.state.searchValue).map((function(t,s){return Object(_.jsxs)("tr",{onClick:function(){return e.props.selectDistrict(t.district_code)},className:"group ".concat(t.district_code===e.props.selected_district_code?"bg-blue-100 font-bold text-blue-600":s%2!==0?"bg-gray-100":"bg-white"," hover:bg-blue-100 hover:text-blue-600 cursor-pointer"),children:[Object(_.jsx)("td",{className:"px-3 py-2",children:s+1}),Object(_.jsx)("td",{className:"px-3 py-2",children:t.district_code}),Object(_.jsx)("td",{className:"px-3 py-2",children:t.district_name}),Object(_.jsx)("td",{className:"p-1 flex flex-row items-center justify-end",children:t.district_code!==e.props.selected_district_code&&Object(_.jsx)("div",{className:"cursor-pointer rounded bg-blue-100 group-hover:bg-blue-600 group-hover:text-white px-2 py-1",children:"Choose"})})]})}))})]})})]})}}]),s}(p.Component),R=s(11),k=function(e){var t=e.data.map((function(t,s){return e.rowFormat(t,s)}));return Object(_.jsxs)("div",{children:[e.tableHead,Object(_.jsxs)("table",{className:"w-full text-left mt-3 text-sm animate__animated animate__fadeIn",children:[e.thead,Object(_.jsx)("tbody",{children:t})]})]})},C=s(714),D=s.n(C),q=s(715),M=s(34),T=function(e){var t=[e.headerFormat];return Object(_.jsxs)("div",{onClick:function(s){return function(s,c,r){var a=q.utils.json_to_sheet(t,{header:e.headers,skipHeader:!0});a["!cols"]=r,q.utils.sheet_add_json(a,s,{header:e.headers,skipHeader:!0,origin:-1});var i={Sheets:{data:a},SheetNames:["data"]},n=Object(q.write)(i,{bookType:"xlsx",type:"array"}),l=new Blob([n],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});D.a.saveAs(l,c+".xlsx")}(e.csvData,e.fileName,e.wscols)},className:"flex flex-row items-center gap-2 w-max bg-".concat(e.buttonColor,"-600 hover:bg-").concat(e.buttonColor,"-800 text-white rounded cursor-pointer px-3 py-2 animate__animated animate__zoomIn"),children:[Object(_.jsx)("div",{children:Object(_.jsx)(M.j,{className:"text-2xl"})}),Object(_.jsx)("span",{children:e.buttonTitle})]})},G=function(e){var t,s=Object(P.p)(e.placementReport,e.searchValue).map((function(t,s){return{id:(s+1).toString(),names:"".concat(t.fname," ").concat(t.lname),phone_number:t.phone_number,email:t.email,position:"".concat(t.position_name,"(").concat(t.position_code,")"),marks:"".concat(t.marks),gender:t.gender,disability:!0===t.disability?"Yes":"No",in_education:!0===t.in_education?"Yes":"No",requested_district:"".concat(0===t.requested_district.values.length?"All districts":t.requested_district.values.map((function(s){return" ".concat(e.GetDistrictName(s.toString())).concat(t.requested_district.values.length>0&&t.requested_district.values[t.requested_district.values.length-1]===s&&!1===t.requested_district.strict?" and other districts":"")}))),district:e.GetDistrictName(t.district_code.toString()),sector:t.sector,school_name:t.school_name}})),c=[{wch:Math.max.apply(Math,Object(R.a)(s.map((function(e){return e.id.length}))))},{wch:Math.max.apply(Math,Object(R.a)(s.map((function(e){return e.names.length}))))},{wch:Math.max.apply(Math,Object(R.a)(s.map((function(e){return e.phone_number.length}))))},{wch:Math.max.apply(Math,Object(R.a)(s.map((function(e){return e.email.length}))))},{wch:Math.max.apply(Math,Object(R.a)(s.map((function(e){return e.position.length}))))},{wch:Math.max.apply(Math,Object(R.a)(s.map((function(e){return e.marks.length}))))},{wch:Math.max.apply(Math,Object(R.a)(s.map((function(e){return e.gender.length}))))},{wch:Math.max.apply(Math,Object(R.a)(s.map((function(e){return e.disability.length}))))},{wch:Math.max.apply(Math,Object(R.a)(s.map((function(e){return e.in_education.length}))))},{wch:Math.max.apply(Math,Object(R.a)(s.map((function(e){return e.requested_district.length}))))},{wch:Math.max.apply(Math,Object(R.a)(s.map((function(e){return e.district.length}))))},{wch:Math.max.apply(Math,Object(R.a)(s.map((function(e){return e.sector.length}))))},{wch:Math.max.apply(Math,Object(R.a)(s.map((function(e){return e.school_name.length}))))}],r="".concat(null===e.selectedDistrict?"":e.selectedDistrict.district_name).concat(null!==e.selectedDistrict?"(":"").concat(null===e.selectedDistrict?"":null===(t=e.selectedDistrict)||void 0===t?void 0:t.district_code).concat(null!==e.selectedDistrict?")":""," ").concat(null===e.selectedDistrict?"":"- ");return Object(_.jsxs)("div",{children:[Object(_.jsxs)("div",{className:"mt-2 flex flex-row items-center gap-2 w-full",children:[Object(_.jsx)("input",{placeholder:"Search by teacher name or school name",type:"text",value:e.searchValue,onChange:function(t){return e.editSearchValue(t.target.value)},className:"px-3 py-2 rounded border border-gray-400 w-full"}),Object(_.jsx)("select",{className:"px-3 py-2 rounded border border-gray-400",children:Object(_.jsx)("option",{value:"",children:"Choose district"})}),Object(_.jsx)("div",{children:Object(_.jsx)(T,{csvData:s,fileName:"".concat(null!==e.selectedDistrict?r:"").concat(e.selectedPosition.position_title).concat(null!==e.selectedDistrict?"(":"").concat(e.selectedPosition.position_code).concat(null!==e.selectedDistrict?")":""," TRS Placement Report on ").concat(Object(P.a)((new Date).toString())),wscols:c,headers:["id","names","phone_number","email","position","marks","gender","disability","in_education","requested_district","district","sector","school_name"],headerFormat:{id:"#",names:"Names",phone_number:"Phone number",email:"Email",position:"Position",marks:"Marks",gender:"Gender",disability:"Disability",in_education:"In Education",requested_district:"Preferences",district:"Placed District",sector:"Placed Sector",school_name:"Placed School"},buttonTitle:"Export Excel",buttonColor:"blue"})})]}),Object(_.jsx)("div",{className:"w-full overflow-x-auto",children:Object(_.jsx)(k,{thead:Object(_.jsx)("thead",{className:"bg-blue-50 text-sm font-bold",children:Object(_.jsxs)("tr",{children:[Object(_.jsx)("th",{className:"px-2 py-2 border border-blue-300",children:"#"}),Object(_.jsx)("th",{className:"px-2 py-2 border border-blue-300",children:"Names"}),Object(_.jsx)("th",{className:"px-2 py-2 border border-blue-300",children:"Phone number"}),Object(_.jsx)("th",{className:"px-2 py-2 border border-blue-300",children:"Email"}),Object(_.jsx)("th",{className:"px-2 py-2 border border-blue-300",children:"Position"}),Object(_.jsx)("th",{className:"px-2 py-2 border border-blue-300",children:"Marks"}),Object(_.jsx)("th",{className:"px-2 py-2 border border-blue-300",children:"Gender"}),Object(_.jsx)("th",{className:"px-2 py-2 border border-blue-300",children:"Disability"}),Object(_.jsx)("th",{className:"px-2 py-2 border border-blue-300",children:"In Education"}),Object(_.jsx)("th",{className:"px-2 py-2 border border-blue-300",children:"Preferences"}),Object(_.jsx)("th",{className:"px-2 py-2 border border-blue-300",children:"Placed District"}),Object(_.jsx)("th",{className:"px-2 py-2 border border-blue-300",children:"Placed Sector"}),Object(_.jsx)("th",{className:"px-2 py-2 border border-blue-300",children:"Placed School"})]})}),rowFormat:function(e){return Object(_.jsxs)("tr",{className:"".concat(parseInt(e.id)%2===0?"bg-gray-100":""," hover:bg-blue-100 hover:text-blue-700 group"),children:[Object(_.jsx)("td",{className:"px-2 py-2 border border-gray-300 group-hover:border-blue-400",children:e.id}),Object(_.jsx)("td",{className:"px-2 py-2 border border-gray-300 group-hover:border-blue-400",children:Object(_.jsx)("div",{className:"w-48",children:e.names})}),Object(_.jsx)("td",{className:"px-2 py-2 border border-gray-300 group-hover:border-blue-400",children:Object(_.jsx)("div",{className:"w-24",children:e.phone_number})}),Object(_.jsx)("td",{className:"px-2 py-2 border border-gray-300 group-hover:border-blue-400",children:e.email}),Object(_.jsxs)("td",{className:"px-2 py-2 border border-gray-300 group-hover:border-blue-400",children:[e.position,")"]}),Object(_.jsx)("td",{className:"px-2 py-2 border border-gray-300 group-hover:border-blue-400",children:e.marks}),Object(_.jsx)("td",{className:"px-2 py-2 border border-gray-300 group-hover:border-blue-400",children:e.gender}),Object(_.jsx)("td",{className:"px-2 py-2 border border-gray-300 group-hover:border-blue-400",children:e.disability}),Object(_.jsx)("td",{className:"px-2 py-2 border border-gray-300 group-hover:border-blue-400",children:e.in_education}),Object(_.jsx)("td",{className:"px-2 py-2 border border-gray-300 group-hover:border-blue-400",children:Object(_.jsx)("div",{className:"w-48",children:e.requested_district})}),Object(_.jsx)("td",{className:"px-2 py-2 border border-gray-300 group-hover:border-blue-400",children:e.district}),Object(_.jsx)("td",{className:"px-2 py-2 border border-gray-300 group-hover:border-blue-400",children:e.sector}),Object(_.jsx)("td",{className:"px-2 py-2 border border-gray-300 group-hover:border-blue-400",children:Object(_.jsx)("div",{className:"truncate",children:e.school_name})})]},e.id)},data:s})})]})},E=function(e){Object(o.a)(s,e);var t=Object(d.a)(s);function s(e){var c;return Object(n.a)(this,s),(c=t.call(this,e)).state={loading:!1,searchValue:""},c}return Object(l.a)(s,[{key:"render",value:function(){var e,t,s=this;if(null===this.props.selectedDistrict){if(!0===this.props.view_all&&null===this.props.placementReport)return Object(_.jsxs)("div",{className:"bg-white rounded p-4 flex flex-col items-center justify-center gap-3",children:[Object(_.jsx)("div",{children:Object(_.jsx)(x.U,{className:"text-7xl"})}),Object(_.jsx)("div",{className:"text-center text-xl font-light",children:"No report found, please click the button to reload data"}),Object(_.jsx)("div",{className:"mt-4 flex flex-row items-center justify-center gap-3 w-full",children:null===this.props.selectedPosition.position_code?"Position not selected!":Object(_.jsx)("div",{onClick:function(){return s.props.GetPlacementReport(s.props.selectedPosition.position_code,"")},className:"btn bg-blue-500 text-white cursor-pointer hover:bg-blue-700",children:"Load position report"})})]});if(!1===this.props.view_all)return Object(_.jsxs)("div",{className:"bg-white rounded p-4 flex flex-col items-center justify-center gap-3",children:[Object(_.jsx)("div",{children:Object(_.jsx)(x.U,{className:"text-7xl"})}),Object(_.jsx)("div",{className:"text-center text-xl font-light",children:"No district select, please you are required to choose district"}),Object(_.jsxs)("div",{className:"mt-4 flex flex-row items-center justify-center gap-3 w-full",children:[Object(_.jsx)("div",{onClick:function(){return s.props.chooseDistrict()},className:"btn bg-blue-100 text-blue-600 cursor-pointer hover:bg-blue-700 hover:text-white",children:"Choose a district"}),null!==this.props.selectedPosition.position_code&&Object(_.jsx)("div",{onClick:function(){return s.props.GetPlacementReport(s.props.selectedPosition.position_code,"")},className:"btn bg-blue-500 text-white cursor-pointer hover:bg-blue-700",children:"Report by position"})]})]})}return null===this.props.placementReport?Object(_.jsxs)("div",{className:"bg-white rounded p-4 pt-10 mt-5",children:[Object(_.jsx)(g.a,{}),Object(_.jsx)("div",{className:"ml-4 -mt-5 text-xl font-light",children:"Loading, please wait..."})]}):Object(_.jsxs)("div",{className:"bg-white p-3",children:[Object(_.jsxs)("div",{className:"flex flex-row items-center gap-4 justify-between",children:[Object(_.jsx)("div",{className:"",children:Object(_.jsxs)("div",{className:"flex flex-row items-center gap-2 text-black",children:[Object(_.jsx)("div",{children:Object(_.jsx)(x.i,{className:"text-5xl animate__animated animate__zoomIn"})}),Object(_.jsxs)("div",{children:[Object(_.jsxs)("div",{className:"text-2xl font-bold flex flex-row items-center gap-3",children:[Object(_.jsx)("span",{children:"Placement report"}),Object(_.jsxs)("div",{className:"rounded-full bg-blue-600 text-white font-extrabold text-xl px-2",children:[Object(P.g)(this.props.placementReport.length)," teachers"]})]}),Object(_.jsx)("div",{className:"text-sm font-light text-black",children:"This the placement report, it is generated on the district level. choose a district where you want the report"}),Object(_.jsxs)("div",{className:"flex flex-row items-center gap-2 mt-1",children:[Object(_.jsxs)("div",{className:"bg-blue-100 rounded-full px-2 text-sm text-blue-800",children:["Position: ",this.props.selectedPosition.position_title]}),null!==this.props.selectedDistrict&&Object(_.jsxs)("div",{className:"bg-blue-100 rounded-full px-2 text-sm text-blue-800",children:["District: ",null===(e=this.props.selectedDistrict)||void 0===e?void 0:e.district_name]})]})]})]})}),Object(_.jsxs)("div",{children:[Object(_.jsxs)("div",{className:"font-normal text-sm",children:["Position: ",this.props.selectedPosition.position_title]}),Object(_.jsxs)("div",{className:"font-normal text-sm",children:["District: ",null===(t=this.props.selectedDistrict)||void 0===t?void 0:t.district_name]}),Object(_.jsxs)("div",{className:"px-2 py-1 text-blue-700 border-2 border-blue-600 rounded bg-blue-100 hover:bg-blue-600 hover:text-white w-max cursor-pointer",onClick:function(){return s.props.chooseDistrict()},children:[null===this.props.selectedDistrict?"Choose":"".concat(this.props.selectedDistrict.district_name," - Change")," ","district"]})]})]}),Object(_.jsx)(G,{placementReport:this.props.placementReport,GetDistrictName:this.props.GetDistrictName,selectedDistrict:this.props.selectedDistrict,selectedPosition:this.props.selectedPosition,searchValue:this.state.searchValue,editSearchValue:function(e){s.setState({searchValue:e})}})]})}}]),s}(p.Component),I=function(e){Object(o.a)(s,e);var t=Object(d.a)(s);function s(e){var c;return Object(n.a)(this,s),(c=t.call(this,e)).state={loading:!1,searchValue:""},c}return Object(l.a)(s,[{key:"render",value:function(){var e=this;return Object(_.jsxs)("div",{className:"-mt-5",children:[Object(_.jsxs)("div",{className:"flex flex-col",children:[Object(_.jsx)("span",{children:"Search by position name"}),Object(_.jsx)("input",{type:"text",value:this.state.searchValue,onChange:function(t){e.setState({searchValue:t.target.value})},className:"px-3 py-2 rounded border-2 border-blue-600 w-full"})]}),Object(_.jsx)("div",{children:Object(_.jsxs)("table",{className:"w-full text-left mt-2",children:[Object(_.jsx)("thead",{className:"bg-blue-50",children:Object(_.jsxs)("tr",{children:[Object(_.jsx)("th",{className:"px-3 py-2",children:"#"}),Object(_.jsx)("th",{className:"px-3 py-2",children:"Code"}),Object(_.jsx)("th",{className:"px-3 py-2",children:"Name"}),Object(_.jsx)("th",{className:"px-3 py-2"})]})}),Object(_.jsxs)("tbody",{children:[0===Object(P.p)(this.props.positions,this.state.searchValue).length?Object(_.jsx)("tr",{children:Object(_.jsx)("td",{colSpan:4,className:"text-xl font-light text-center py-5",children:"No result found!"})}):Object(P.p)(this.props.positions,this.state.searchValue).map((function(t,s){return Object(_.jsxs)("tr",{onClick:function(){return e.props.selectPosition(t)},className:"".concat(e.props.selected_position_code===t.position_code?"bg-blue-200 font-bold text-blue-700":s%2!==0?"bg-gray-100":"bg-white"," group hover:text-blue-800 hover:bg-blue-100 cursor-pointer"),children:[Object(_.jsx)("td",{className:"px-3 py-2",children:s+1}),Object(_.jsx)("td",{className:"px-3 py-2",children:t.position_code}),Object(_.jsx)("td",{className:"px-3 py-2",children:t.position_title}),Object(_.jsx)("td",{className:"flex flex-row items-center justify-end py-2 px-1",children:e.props.selected_position_code!==t.position_code&&Object(_.jsx)("div",{className:"rounded px-2 py-1 text-base font-light bg-blue-100 text-black group-hover:bg-blue-600 group-hover:text-white cursor-pointer",children:"Choose"})})]},s+1)})),Object(_.jsx)("tr",{})]})]})})]})}}]),s}(p.Component),A=s(49),V=s(18),L=s(206),F=s(824),z=function(e){var t=Object(P.p)(e.placementReport.placedCandidates.filter((function(t){return""===e.selected_district_code||t.district_code===e.selected_district_code})),e.searchValue).map((function(t,s){return{id:(s+1).toString(),names:"".concat(t.fname," ").concat(t.lname),phone_number:t.phone_number,email:t.email,position:"".concat(t.position_name,"(").concat(t.position_code,")"),marks:"".concat(t.marks),gender:t.gender,disability:!0===t.disability?"Yes":"No",in_education:!0===t.in_education?"Yes":"No",requested_district:"".concat(0===t.requested_district.values.length?"All districts":t.requested_district.values.map((function(s){return" ".concat(e.GetDistrictName(s.toString())).concat(t.requested_district.values.length>0&&t.requested_district.values[t.requested_district.values.length-1]===s&&!1===t.requested_district.strict?" and other districts":"")}))),district:e.GetDistrictName(t.district_code.toString()),sector:t.sector,school_name:t.school_name}})),s=[{wch:Math.max.apply(Math,Object(R.a)(t.map((function(e){return e.id.length}))))},{wch:Math.max.apply(Math,Object(R.a)(t.map((function(e){return e.names.length}))))},{wch:Math.max.apply(Math,Object(R.a)(t.map((function(e){return e.phone_number.length}))))},{wch:Math.max.apply(Math,Object(R.a)(t.map((function(e){return e.email.length}))))},{wch:Math.max.apply(Math,Object(R.a)(t.map((function(e){return e.position.length}))))},{wch:Math.max.apply(Math,Object(R.a)(t.map((function(e){return e.marks.length}))))},{wch:Math.max.apply(Math,Object(R.a)(t.map((function(e){return e.gender.length}))))},{wch:Math.max.apply(Math,Object(R.a)(t.map((function(e){return e.disability.length}))))},{wch:Math.max.apply(Math,Object(R.a)(t.map((function(e){return e.in_education.length}))))},{wch:Math.max.apply(Math,Object(R.a)(t.map((function(e){return e.requested_district.length}))))},{wch:Math.max.apply(Math,Object(R.a)(t.map((function(e){return e.district.length}))))},{wch:Math.max.apply(Math,Object(R.a)(t.map((function(e){return e.sector.length}))))},{wch:Math.max.apply(Math,Object(R.a)(t.map((function(e){return e.school_name.length}))))}];return Object(_.jsxs)("div",{children:[Object(_.jsxs)("div",{className:"mt-2 flex flex-row items-center gap-2 w-full",children:[Object(_.jsxs)("div",{className:"flex flex-row items-center gap-2 text-green-600",children:[Object(_.jsx)("div",{children:Object(_.jsx)(x.x,{className:"text-6xl"})}),Object(_.jsxs)("div",{className:"flex flex-col w-36",children:[Object(_.jsx)("span",{className:"text-base font-light",children:"Total placed"}),Object(_.jsx)("span",{className:"text-2xl font-extrabold",children:Object(P.g)(e.placementReport.placedCandidates.filter((function(t){return""===e.selected_district_code||t.district_code===e.selected_district_code})).length)})]})]}),Object(_.jsx)("input",{placeholder:"Search by teacher name or school name",type:"text",value:e.searchValue,onChange:function(t){return e.editSearchValue(t.target.value)},className:"px-3 py-2 rounded border border-gray-400 w-full"}),Object(_.jsx)("div",{children:Object(_.jsx)(T,{csvData:t,fileName:"".concat(""!==e.selected_district_code?e.GetDistrictName(e.selected_district_code)+" district - ":"").concat(e.placementReport.placedCandidates[0].position_name," (").concat(e.placementReport.placedCandidates[0].position_code,") - TRS Placement Report preview on ").concat(Object(P.a)((new Date).toString())),wscols:s,headers:["id","names","phone_number","email","position","marks","gender","disability","in_education","requested_district","district","sector","school_name"],headerFormat:{id:"#",names:"Names",phone_number:"Phone number",email:"Email",position:"Position",marks:"Marks",gender:"Gender",disability:"Disability",in_education:"In Education",requested_district:"Preferences",district:"Placed District",sector:"Placed Sector",school_name:"Placed School"},buttonTitle:"Export Excel",buttonColor:"blue"})})]}),Object(_.jsx)("div",{className:"w-full overflow-x-auto",children:Object(_.jsx)(k,{thead:Object(_.jsx)("thead",{className:"bg-blue-50 text-sm font-bold",children:Object(_.jsxs)("tr",{children:[Object(_.jsx)("th",{className:"px-2 py-2 border border-blue-300",children:"#"}),Object(_.jsx)("th",{className:"px-2 py-2 border border-blue-300",children:"Names"}),Object(_.jsx)("th",{className:"px-2 py-2 border border-blue-300",children:"Phone number"}),Object(_.jsx)("th",{className:"px-2 py-2 border border-blue-300",children:"Email"}),Object(_.jsx)("th",{className:"px-2 py-2 border border-blue-300",children:"Position"}),Object(_.jsx)("th",{className:"px-2 py-2 border border-blue-300",children:"Marks"}),Object(_.jsx)("th",{className:"px-2 py-2 border border-blue-300",children:"Gender"}),Object(_.jsx)("th",{className:"px-2 py-2 border border-blue-300",children:"Disability"}),Object(_.jsx)("th",{className:"px-2 py-2 border border-blue-300",children:"In Education"}),Object(_.jsx)("th",{className:"px-2 py-2 border border-blue-300",children:"Preferences"}),Object(_.jsx)("th",{className:"px-2 py-2 border border-blue-300",children:"Placed District"}),Object(_.jsx)("th",{className:"px-2 py-2 border border-blue-300",children:"Placed Sector"}),Object(_.jsx)("th",{className:"px-2 py-2 border border-blue-300",children:"Placed School"})]})}),rowFormat:function(e){return Object(_.jsxs)("tr",{className:"".concat(parseInt(e.id)%2===0?"bg-gray-100":""," hover:bg-blue-100 hover:text-blue-700 group"),children:[Object(_.jsx)("td",{className:"px-2 py-2 border border-gray-300 group-hover:border-blue-400",children:e.id}),Object(_.jsx)("td",{className:"px-2 py-2 border border-gray-300 group-hover:border-blue-400",children:Object(_.jsx)("div",{className:"w-48",children:e.names})}),Object(_.jsx)("td",{className:"px-2 py-2 border border-gray-300 group-hover:border-blue-400",children:Object(_.jsx)("div",{className:"w-24",children:e.phone_number})}),Object(_.jsx)("td",{className:"px-2 py-2 border border-gray-300 group-hover:border-blue-400",children:e.email}),Object(_.jsxs)("td",{className:"px-2 py-2 border border-gray-300 group-hover:border-blue-400",children:[e.position,")"]}),Object(_.jsx)("td",{className:"px-2 py-2 border border-gray-300 group-hover:border-blue-400",children:e.marks}),Object(_.jsx)("td",{className:"px-2 py-2 border border-gray-300 group-hover:border-blue-400",children:e.gender}),Object(_.jsx)("td",{className:"px-2 py-2 border border-gray-300 group-hover:border-blue-400",children:e.disability}),Object(_.jsx)("td",{className:"px-2 py-2 border border-gray-300 group-hover:border-blue-400",children:e.in_education}),Object(_.jsx)("td",{className:"px-2 py-2 border border-gray-300 group-hover:border-blue-400",children:Object(_.jsx)("div",{className:"w-48",children:e.requested_district})}),Object(_.jsx)("td",{className:"px-2 py-2 border border-gray-300 group-hover:border-blue-400",children:e.district}),Object(_.jsx)("td",{className:"px-2 py-2 border border-gray-300 group-hover:border-blue-400",children:e.sector}),Object(_.jsx)("td",{className:"px-2 py-2 border border-gray-300 group-hover:border-blue-400",children:Object(_.jsx)("div",{className:"truncate",children:e.school_name})})]},e.id)},data:t})})]})},U=function(e){Object(o.a)(s,e);var t=Object(d.a)(s);function s(e){var c;return Object(n.a)(this,s),(c=t.call(this,e)).state={loading:!1,searchValue:""},c}return Object(l.a)(s,[{key:"render",value:function(){var e=this;return Object(_.jsx)("div",{children:null!==this.props.algorithmResponse&&Object(_.jsx)(z,{placementReport:this.props.algorithmResponse,GetDistrictName:this.props.GetDistrictName,searchValue:this.state.searchValue,editSearchValue:function(t){return e.setState({searchValue:t})},selected_district_code:this.props.selected_district_code})})}}]),s}(p.Component),B=s.p+"static/media/robot2.5558616e.gif",H=s.p+"static/media/robotic-automation.08eebb59.png",Y=s.p+"static/media/robot1.676fe5fb.gif",W=s(30),Z=function(e){Object(o.a)(s,e);var t=Object(d.a)(s);function s(e){var c;return Object(n.a)(this,s),(c=t.call(this,e)).getTotalRequests=function(){var e,t=0,s=Object(V.a)(c.props.postRequests);try{for(s.s();!(e=s.n()).done;){t+=e.value.totalRequestedTeacher}}catch(r){s.e(r)}finally{s.f()}return t},c.getTotalPlaced=function(e){var t=0;if(null!==c.state.algorithmResponse&&c.state.algorithmResponse.placedCandidates.length>0){var s,r=Object(V.a)(c.state.algorithmResponse.placedCandidates);try{for(r.s();!(s=r.n()).done;){s.value.district_code.toString()===e.toString()&&(t+=1)}}catch(a){r.e(a)}finally{r.f()}}return t},c.RunAlgorithm=Object(i.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!0!==window.confirm("Are you sure do you want to place teachers for this position? Remember that all candidates will be placed, there is no way to undo the action!")||null===c.props.selected_position.position_code){e.next=16;break}return c.setState({loading:!0,error:"",success:"",count:0,count_district:0}),setInterval((function(){c.setState({count:c.state.count+1})}),10),setInterval((function(){c.setState({count_district:c.state.count_district+1})}),300),e.prev=4,e.next=7,b.a.post("".concat(v.a.PLACEMENT,"/schoolrequest/doplacements"),{position_code:c.props.selected_position.position_code,district_code:"55"});case 7:t=e.sent,console.log("Success : ",t),t&&c.setState({success:"Great job, teachers are placed successfully!",loading:!1,view_algorithm_response:!0,algorithmResponse:t.data,selected_district:""}),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(4),console.log("err: ",Object(a.a)({},e.t0)),c.setState({loading:!1,error:Object(P.i)(e.t0)});case 16:case"end":return e.stop()}}),e,null,[[4,12]])}))),c.state={loading:!1,error:"",success:"",algorithmResponse:null,view_algorithm_response:!1,count:0,count_district:0,selected_district:""},c}return Object(l.a)(s,[{key:"render",value:function(){var e=this;return Object(_.jsxs)(p.Fragment,{children:[Object(_.jsxs)("div",{className:"bg-gray-700 h-screen overflow-y-auto",children:[Object(_.jsx)("div",{className:"bg-blue-800 rounded-b-3xl p-6",children:Object(_.jsx)("div",{className:"flex flex-row items-center w-full justify-between gap-4",children:Object(_.jsxs)("div",{className:"flex flex-row items-center w-full gap-4",children:[Object(_.jsx)("div",{children:Object(_.jsx)("div",{className:"bg-blue-600 rounded-xl p-3",children:Object(_.jsx)(F.b,{className:"text-8xl text-white ".concat(!0===this.state.loading?"animate__animated animate__zoomIn animate__infinite":"animate__animated animate__tada animate__slow animate__infinite")})})}),Object(_.jsxs)("div",{className:"flex flex-col w-full",children:[Object(_.jsx)("div",{className:"text-3xl font-extrabold text-white",children:"TRS PLACEMENT ALGORITHM"}),Object(_.jsxs)("div",{className:"flex flex-row items-center gap-2 mt-5",children:[Object(_.jsxs)("div",{className:"flex flex-col pr-10 bg-blue-600 rounded-lg px-3 py-1",children:[Object(_.jsx)("div",{className:"text-sm text-blue-200",children:"Selected position"}),Object(_.jsx)("div",{className:"text-lg font-extrabold text-white -mt-1",children:this.props.selected_position.position_title})]}),Object(_.jsxs)("div",{className:"flex flex-col bg-blue-600 rounded-lg px-3 py-1",children:[Object(_.jsx)("div",{className:"text-xs text-blue-100",children:"Total waiting list"}),Object(_.jsx)("div",{className:"text-2xl font-extrabold text-blue-100 -mt-1",children:Object(P.g)(23903-(null===this.state.algorithmResponse?0:this.state.algorithmResponse.placedCandidates.length))})]}),Object(_.jsxs)("div",{className:"flex flex-col bg-blue-600 rounded-lg px-3 py-1",children:[Object(_.jsx)("div",{className:"text-xs text-blue-100",children:"Total vacants"}),Object(_.jsx)("div",{className:"text-2xl font-extrabold text-white -mt-1",children:Object(P.g)(this.getTotalRequests()-(null===this.state.algorithmResponse?0:this.state.algorithmResponse.placedCandidates.length))})]}),null!==this.state.algorithmResponse&&Object(_.jsxs)("div",{className:"flex flex-col bg-green-600 rounded-lg px-3 py-1",children:[Object(_.jsx)("div",{className:"text-xs text-blue-100",children:"Total placed"}),Object(_.jsx)("div",{className:"text-2xl font-extrabold text-white -mt-1",children:Object(P.g)(this.state.algorithmResponse.placedCandidates.length)})]})]})]})]})})}),Object(_.jsxs)("div",{className:"grid grid-cols-12 w-full",children:[Object(_.jsxs)("div",{className:"col-span-5 px-3 pb-3",children:[Object(_.jsxs)("div",{className:"mt-2 mb-2 flex flex-row items-center justify-between gap-3 w-full",children:[Object(_.jsx)("span",{className:"text-white text-lg font-light",children:"Districts list"}),Object(_.jsx)("div",{children:Object(_.jsxs)("div",{className:"rounded-lg bg-blue-600 text-white w-max px-2",children:["Requests: ",Object(P.g)(this.getTotalRequests())]})})]}),Object(_.jsx)("div",{className:"flex flex-col overflow-y-auto rounded-lg border border-gray-500 p-1",style:{height:"550px"},children:0===this.props.postRequests.length?Object(_.jsx)("div",{className:"bg-yellow-700 text-white rounded-md px-3 py-2 font-bold",children:"No districts found!"}):this.props.postRequests.map((function(t,s){return Object(_.jsxs)("div",{className:"flex flex-row items-center justify-between gap-4 group text-white mb-2 bg-gray-600 hover:bg-blue-500 rounded-lg pr-2 pb-1 cursor-pointer",onClick:function(){e.getTotalPlaced(t._id)>0&&e.setState({selected_district:t._id,view_algorithm_response:!0})},children:[Object(_.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[Object(_.jsx)("div",{children:Object(_.jsx)("div",{className:"h-10 w-10 rounded-full bg-gray-600 flex items-center justify-center",children:!0===e.state.loading?Object(_.jsx)(L.h,{className:"text-2xl animate-spin"}):Object(_.jsx)(x.tb,{className:"text-3xl animate-pulse"})})}),Object(_.jsxs)("div",{className:"flex flex-col",children:[Object(_.jsx)("span",{className:"font-extrabold text-lg",children:e.props.GetDistrictName(t._id)}),Object(_.jsxs)("span",{className:"text-sm",children:["Total requests: ",t.totalRequestedTeacher]})]})]}),Object(_.jsxs)("div",{className:"text-sm ".concat(!0===e.state.loading?"text-green-200 font-light":"font-bold"),children:[!0===e.state.loading?"":"Placed:"," ",!0===e.state.loading?"Receiving...":null!==e.state.algorithmResponse?e.getTotalPlaced(t._id):t.totalPlacedTeachers]})]},s+1)}))})]}),Object(_.jsx)("div",{className:"col-span-7 bg-gray-600 my-3 rounded-l-lg",children:Object(_.jsx)("div",{className:"h-full w-full flex flex-col items-center justify-center gap-3",children:!0===this.state.loading?Object(_.jsxs)("div",{className:"flex flex-col items-center justify-center gap-0 -mt-10",children:[Object(_.jsx)(L.h,{className:"text-9xl animate-spin text-yellow-400"}),Object(_.jsxs)("div",{className:"flex flex-row items-center justify-between gap2 w-full -mt-5",children:[Object(_.jsx)("img",{src:B,alt:"",className:"w-1/2 -mt-40 animate__animated animate__fadeIn"}),Object(_.jsx)("img",{src:Y,alt:"",className:"w-1/2 -mt-40 animate__animated animate__fadeIn"})]}),Object(_.jsxs)("div",{className:"flex flex-row items-center gap-2 font-extrabold text-3xl text-green-400 bg-gray-700 rounded-md px-2 py-2 pl-4 -mt-10",children:[Object(_.jsx)("span",{className:"animate-pulse",children:"Processing: "}),Object(_.jsx)("div",{className:"bg-green-600 text-white px-2 rounded-md",children:Object(P.g)(this.state.count)})]}),Object(_.jsx)("div",{className:"text-center text-lg font-light text-white animate-pulse",children:"Placing teacher to schools..."})]}):""!==this.state.error?Object(_.jsxs)("div",{onClick:function(){return e.setState({error:"",success:""})},className:"w-full px-3 flex flex-col items-center justify-center",children:[Object(_.jsxs)("div",{className:"bg-yellow-100 rounded-xl p-5 flex flex-col items-center justify-center animate__animated animate__zoomIn cursor-pointer",children:[Object(_.jsx)("div",{children:Object(_.jsx)(A.r,{className:"text-8xl text-yellow-800"})}),Object(_.jsx)("div",{className:"text-center font-bold text-lg",children:this.state.error})]}),Object(_.jsxs)("div",{onClick:function(){return e.props.cancel()},className:"btn bg-gray-500 text-white rounded font-extrabold flex flex-row items-center gap-2 cursor-pointer hover:bg-blue-700 w-max my-2",children:[Object(_.jsx)("div",{children:Object(_.jsx)(x.xb,{className:"text-2xl"})}),Object(_.jsx)("span",{children:"Go Back"})]})]}):""!==this.state.success?Object(_.jsxs)("div",{className:"w-full px-3 flex flex-col items-center justify-center",children:[Object(_.jsxs)("div",{onClick:function(){return e.setState({error:"",success:""})},className:"bg-green-100 rounded-xl p-5 flex flex-col items-center justify-center animate__animated animate__zoomIn",children:[Object(_.jsxs)("div",{className:"w-full flex flex-row items-center justify-center gap-2",children:[Object(_.jsx)(x.w,{className:"text-8xl text-green-800 animate__animated animate__heartBeat"}),null!==this.state.algorithmResponse&&Object(_.jsx)("div",{className:"text-6xl font-extrabold text-green-800",children:Object(P.g)(this.state.algorithmResponse.placedCandidates.length)})]}),Object(_.jsx)("div",{className:"text-center font-bold text-lg",children:this.state.success})]}),Object(_.jsxs)("div",{onClick:function(){return e.setState({success:"",error:""})},className:"btn bg-gray-500 text-white rounded font-extrabold flex flex-row items-center gap-2 cursor-pointer hover:bg-blue-700 my-2 w-max",children:[Object(_.jsx)("span",{children:"Done, Continue"}),Object(_.jsx)("div",{children:Object(_.jsx)(W.b,{className:"text-2xl"})})]})]}):Object(_.jsx)(_.Fragment,{children:Object(_.jsxs)("div",{className:"grid grid-cols-12",children:[Object(_.jsx)("img",{src:H,alt:"",className:"col-span-7 animate__animated animate__fadeIn"}),Object(_.jsxs)("div",{className:"col-span-5 flex flex-col gap-3 justify-center",children:[null!==this.state.algorithmResponse&&Object(_.jsx)("div",{}),0===this.props.postRequests.length?Object(_.jsx)("div",{children:Object(_.jsx)("div",{className:"bg-yellow-200 rounded-xl p-8 mr-4 font-bold text-lg",children:"No posts requests(Vacants) found!"})}):Object(_.jsxs)("div",{onClick:function(){return e.RunAlgorithm()},className:"btn bg-green-600 text-white rounded font-extrabold flex flex-row items-center gap-2 cursor-pointer hover:bg-green-700 w-max",children:[Object(_.jsx)("div",{children:null!==this.state.algorithmResponse?Object(_.jsx)(x.Bb,{className:"text-2xl"}):Object(_.jsx)(A.h,{className:"text-2xl"})}),Object(_.jsxs)("span",{children:[null!==this.state.algorithmResponse?"Restart":"Start"," ","placement"]})]}),null!==this.state.algorithmResponse&&Object(_.jsxs)("div",{onClick:function(){return e.setState({view_algorithm_response:!0,selected_district:""})},className:"btn bg-gray-500 text-white rounded font-extrabold flex flex-row items-center gap-2 cursor-pointer hover:bg-blue-700 my-2 w-max",children:[Object(_.jsx)("div",{children:Object(_.jsx)(x.Z,{className:"text-2xl"})}),Object(_.jsxs)("span",{children:["View placement (",Object(P.g)(this.state.algorithmResponse.placedCandidates.length),")"]})]}),Object(_.jsxs)("div",{onClick:function(){return e.props.cancel()},className:"btn bg-gray-500 text-white rounded font-extrabold flex flex-row items-center gap-2 cursor-pointer hover:bg-blue-700 w-max",children:[Object(_.jsx)("div",{children:Object(_.jsx)(x.xb,{className:"text-2xl"})}),Object(_.jsx)("span",{children:"Close window"})]})]})]})})})})]})]}),!0===this.state.view_algorithm_response&&Object(_.jsx)(O.d,{backDrop:!0,theme:O.c.default,close:function(){return e.setState({view_algorithm_response:!1,selected_district:""})},backDropClose:!1,widthSizeClass:O.b.maxWidth,displayClose:!0,padding:{title:!0,body:!0},title:Object(_.jsxs)("div",{children:[Object(_.jsx)("div",{className:"text-3xl font-extrabold",children:"Placement results"}),Object(_.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[Object(_.jsxs)("div",{className:"px-2 rounded bg-blue-600 text-white w-max",children:[this.props.selected_position.position_title," (",this.props.selected_position.position_code,")"]}),""!==this.state.selected_district&&Object(_.jsxs)("div",{className:"px-2 rounded bg-green-600 text-white w-max",children:[this.props.GetDistrictName(this.state.selected_district)," ","district"]})]})]}),children:Object(_.jsx)("div",{className:"-mt-3",children:Object(_.jsx)(U,{GetDistrictName:this.props.GetDistrictName,algorithmResponse:this.state.algorithmResponse,selected_district_code:this.state.selected_district})})})]})}}]),s}(p.Component),J=function(e){Object(o.a)(s,e);var t=Object(d.a)(s);function s(e){var c;return Object(n.a)(this,s),(c=t.call(this,e)).state={loading:!1,searchValue:"",runAlgorithm:!1,uploadPostsRequests:!1},c}return Object(l.a)(s,[{key:"render",value:function(){var e=this;return Object(_.jsxs)(p.Fragment,{children:[Object(_.jsxs)("div",{className:"p-0 border border-white text-left bg-white",children:[Object(_.jsxs)("div",{className:"my-3 mx-3 flex flex-row items-center gap-2 w-full",children:[Object(_.jsx)("input",{type:"text",placeholder:"Search by district name",className:"px-3 py-2 rounded border border-gray-400 w-1/2"}),Object(_.jsxs)("div",{onClick:function(){return e.setState({runAlgorithm:!0})},className:"flex flex-row items-center justify-center gap-2 rounded px-3 py-2 pl-2 bg-blue-600 text-white hover:bg-blue-800 truncate cursor-pointer",children:[Object(_.jsx)("div",{children:Object(_.jsx)(A.h,{className:"text-2xl"})}),Object(_.jsx)("span",{children:"Run placement algorithm"})]})]}),Object(_.jsxs)("table",{className:"w-full",children:[Object(_.jsx)("thead",{children:Object(_.jsxs)("tr",{className:"bg-blue-50",children:[Object(_.jsx)("th",{className:"px-3 py-2",children:"#"}),Object(_.jsx)("th",{className:"px-3 py-2",children:"District code"}),Object(_.jsx)("th",{className:"px-3 py-2",children:"District name"}),Object(_.jsx)("th",{className:"px-3 py-2",children:"Total requests"}),Object(_.jsx)("th",{className:"px-3 py-2",children:"Total placed"}),Object(_.jsx)("th",{className:"px-3 py-2"})]})}),Object(_.jsx)("tbody",{children:0===this.props.postRequests.length?Object(_.jsx)("tr",{children:Object(_.jsx)("td",{colSpan:6,className:"py-6 text-center text-2xl font-extralight",children:"No result found!"})}):this.props.postRequests.map((function(t,s){return Object(_.jsxs)("tr",{className:"".concat(s%2!==0?"bg-gray-100":"bg-white"),children:[Object(_.jsx)("td",{className:"px-3 py-1",children:s+1}),Object(_.jsx)("td",{className:"px-3 py-1",children:t._id}),Object(_.jsx)("td",{className:"px-3 py-1",children:e.props.GetDistrictName(t._id)}),Object(_.jsx)("td",{className:"px-3 py-1",children:Object(P.g)(t.totalRequestedTeacher)}),Object(_.jsx)("td",{className:"px-3 py-1",children:Object(P.g)(t.totalPlacedTeachers)}),Object(_.jsx)("td",{className:"px-1 py-1 flex flex-row items-center justify-end",children:Object(_.jsx)("div",{className:"bg-blue-100 px-2 py-1 text-center w-max",children:"Action"})})]})}))})]})]}),!0===this.state.runAlgorithm&&Object(_.jsx)(O.d,{backDrop:!0,theme:O.c.default,close:function(){e.setState({runAlgorithm:!1})},backDropClose:!0,widthSizeClass:O.b.maxWidth,displayClose:!1,padding:{title:void 0,body:void 0,footer:void 0},children:Object(_.jsx)("div",{children:Object(_.jsx)(Z,{postRequests:this.props.postRequests,GetDistrictName:this.props.GetDistrictName,selected_position:this.props.selected_position,GetDistrictsPostsRequests:this.props.GetDistrictsPostsRequests,cancel:function(){e.setState({runAlgorithm:!1})}})})})]})}}]),s}(p.Component),K=function(e){Object(o.a)(s,e);var t=Object(d.a)(s);function s(e){var c;return Object(n.a)(this,s),(c=t.call(this,e)).GetDistrictName=function(e){var t,s=null===(t=c.state.districts)||void 0===t?void 0:t.districts.find((function(t){return t.district_code===e}));return void 0===s?"":s.district_name},c.GetDistrictsPostsRequests=function(){var e=Object(i.a)(r.a.mark((function e(t){var s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.setState({loading:!0}),e.prev=1,e.next=4,b.a.get("".concat(v.a.PLACEMENT,"/schoolrequest/district/position/summary/").concat(t));case 4:(s=e.sent)&&(console.log("Res: ",s.data),c.setState({loading:!1,posts_requests:s.data,error:"",success:""})),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),c.setState({error:Object(P.i)(e.t0),loading:!1}),console.log("Error: ",Object(a.a)({},e.t0));case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),c.GetDistrictPlacementReport=function(){var e=Object(i.a)(r.a.mark((function e(t,s){var i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===s){e.next=13;break}return c.setState({loading:!0}),e.prev=2,e.next=5,b.a.get("".concat(v.a.PLACEMENT,"/placedcandidate/district/position/").concat(s,"/").concat(t));case 5:(i=e.sent)&&(console.log("Res: ",i.data),c.setState({loading:!1,placementReport:i.data,error:"",success:""})),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),c.setState({error:Object(P.i)(e.t0),loading:!1}),console.log("Error: ",Object(a.a)({},e.t0));case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,s){return e.apply(this,arguments)}}(),c.GetPositionPlacementReport=function(){var e=Object(i.a)(r.a.mark((function e(t){var s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===t){e.next=13;break}return c.setState({loading:!0}),e.prev=2,e.next=5,b.a.get("".concat(v.a.PLACEMENT,"/placedcandidate/position/").concat(t));case 5:(s=e.sent)&&(console.log("Res: ",s.data),c.setState({loading:!1,placementReport:s.data,error:"",success:""})),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),c.setState({error:Object(P.i)(e.t0),loading:!1}),console.log("Error: ",Object(a.a)({},e.t0));case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),c.componentDidMount=function(){null===c.state.districts&&(c.setState({loading:!0}),Object(m.Lb)((function(e,t,s){null!==t?c.setState({districts:t,loading:!1,error:""}):!1===e&&c.setState({error:s,loading:!1,districts:null})}))),null===c.state.positions&&null!==c.props.auth.education_institution_id&&(c.setState({loading:!0}),c.props.FC_GetPositionsByInstitution(c.props.auth.education_institution_id,(function(e,t,s){c.setState({loading:e}),!1===e&&void 0!==s&&c.setState({positions:s,loading:!1}),!1===e&&""!==t&&c.setState({error:t,loading:!1})})))},c.state={loading:!1,documentType:"PlacementReport",posts_requests:null,error:"",success:"",selectedPosition:null,choosePosition:!1,placementReport:null,districts:null,selected_district_code:"",select_district_modal:!1,positions:null,view_all:!1,uploadPostsRequests:!1},c}return Object(l.a)(s,[{key:"render",value:function(){var e,t=this;return!0===this.state.loading?Object(_.jsxs)("div",{className:"bg-white rounded p-4 pt-10 mt-5",children:[Object(_.jsx)(g.a,{}),Object(_.jsx)("div",{className:"ml-4 -mt-5 text-xl font-light",children:"Loading, please wait..."})]}):Object(_.jsxs)(p.Fragment,{children:[null===this.state.selectedPosition&&!1===this.state.uploadPostsRequests?Object(_.jsxs)("div",{className:"bg-white rounded p-4 mt-5 flex flex-col items-center justify-center gap-3",children:[Object(_.jsx)("div",{children:Object(_.jsx)(x.U,{className:"text-7xl"})}),Object(_.jsx)("div",{className:"text-center text-xl font-light",children:"No position select, please you are required to choose position"}),Object(_.jsxs)("div",{className:"mt-4 flex flex-row items-center justify-center gap-3 w-full",children:[Object(_.jsx)("div",{onClick:function(){return t.setState({uploadPostsRequests:!0})},className:"btn bg-green-600 text-white cursor-pointer hover:bg-green-700",children:"Upload posts requests"}),Object(_.jsx)("div",{onClick:function(){return t.setState({choosePosition:!0})},className:"btn bg-blue-500 text-white cursor-pointer hover:bg-blue-700",children:"Choose a position"})]})]}):!0===this.state.uploadPostsRequests&&null!==this.props.auth.application_session?Object(_.jsx)("div",{className:"bg-white rounded-md m-3 animate__animated animate__zoomIn",children:Object(_.jsx)(w,{closeWindow:function(){return t.setState({uploadPostsRequests:!1})},session:this.props.auth.application_session})}):Object(_.jsxs)("div",{className:"pr-2 -ml-2 lg:ml-0",children:[Object(_.jsxs)("div",{className:"flex flex-row items-baseline justify-between w-full mt-3",children:[Object(_.jsxs)("div",{className:"flex flex-col",children:[Object(_.jsx)("div",{className:"font-extrabold text-3xl",children:"Candidate Placements"}),Object(_.jsxs)("div",{className:"text-base flex flex-row items-center bg-white mt-3 rounded-t-md overflow-hidden",children:[Object(_.jsx)("div",{onClick:function(){"PostRequests"!==t.state.documentType&&(null===t.state.posts_requests&&null!==t.state.selectedPosition&&t.GetDistrictsPostsRequests(t.state.selectedPosition.position_code),t.setState({documentType:"PostRequests"}))},className:"border-b-4 ".concat("PostRequests"===this.state.documentType?"border-blue-600 font-bold text-blue-600 cursor-not-allowed":"border-white cursor-pointer hover:border-blue-500 hover:text-blue-600"," text-center w-max px-4 py-2 pt-3"),children:"Posts Requests"}),Object(_.jsx)("div",{onClick:function(){"PlacementReport"!==t.state.documentType&&(t.setState({documentType:"PlacementReport"}),null===t.state.placementReport&&null!==t.state.selectedPosition&&null!==t.state.selectedPosition.position_code&&(!1===t.state.view_all?t.GetDistrictPlacementReport(t.state.selectedPosition.position_code,t.state.selected_district_code):t.GetPositionPlacementReport(t.state.selectedPosition.position_code)))},className:"border-b-4 ".concat("PlacementReport"===this.state.documentType?"border-blue-600 font-bold text-blue-600 cursor-not-allowed":"border-white cursor-pointer hover:border-blue-500 hover:text-blue-600"," text-center w-max px-4 py-2 pt-3"),children:"Placement Report"}),Object(_.jsxs)("div",{onClick:function(){return t.setState({uploadPostsRequests:!0})},className:"flex flex-row items-center justify-center gap-2 rounded px-3 py-2 pl-2 bg-green-600 text-white hover:bg-green-800 truncate cursor-pointer mx-1",children:[Object(_.jsx)("div",{children:Object(_.jsx)(x.jc,{className:"text-2xl"})}),Object(_.jsx)("span",{children:"Upload posts requests"})]})]})]}),Object(_.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[!1===this.state.view_all?Object(_.jsxs)("div",{onClick:function(){null!==t.state.selectedPosition&&null!==t.state.selectedPosition.position_code&&(t.setState({view_all:!0,selected_district_code:""}),t.GetPositionPlacementReport(t.state.selectedPosition.position_code))},className:"px-3 py-2 flex flex-row items-center gap-2 \n                      bg-blue-500 animate__animated animate__zoomIn\n                  } rounded-md cursor-pointer hover:bg-blue-700 text-white h-full",children:[Object(_.jsx)("div",{children:Object(_.jsx)(x.Zb,{className:"text-3xl"})}),Object(_.jsx)("span",{children:"View all"})]}):Object(_.jsxs)("div",{onClick:function(){null!==t.state.selectedPosition&&null!==t.state.selectedPosition.position_code&&t.setState({placementReport:null,view_all:!1,selected_district_code:""})},className:"px-3 py-2 flex flex-row items-center gap-2 \n                    bg-gray-500 hover:bg-gray-600 animate__animated animate__zoomIn\n                } rounded-md cursor-pointer hover:bg-blue-700 text-white h-full",children:[Object(_.jsx)("div",{children:Object(_.jsx)(x.Zb,{className:"text-3xl"})}),Object(_.jsx)("span",{children:"Hide all"})]}),Object(_.jsxs)("div",{onClick:function(){return t.setState({choosePosition:!0})},className:"bg-blue-100 text-blue-800 px-3 pr-2 py-1 rounded border-2 border-white hover:border-blue-600 flex flex-row items-center gap-3 cursor-pointer group",children:[Object(_.jsxs)("div",{className:"flex flex-col",children:[Object(_.jsx)("div",{className:"font-light text-lg",children:"Selected position"}),Object(_.jsx)("div",{className:"text-light font-extrabold -mt-1",children:null===(e=this.state.selectedPosition)||void 0===e?void 0:e.position_title})]}),Object(_.jsx)("div",{children:Object(_.jsx)(x.s,{className:"text-4xl"})})]})]})]}),""!==this.state.error&&Object(_.jsxs)("div",{className:"flex flex-row items-center gap-3 rounded px-3 py-2 w-full cursor-pointer my-2 bg-white border border-red-600",children:[Object(_.jsx)("div",{children:Object(_.jsx)(h.e,{className:"text-3xl text-red-600"})}),Object(_.jsx)("div",{className:"flex flex-col",children:Object(_.jsx)("span",{className:"font-bold text-lg text-red-600",children:this.state.error})})]}),""!==this.state.success&&Object(_.jsxs)("div",{className:"flex flex-row items-center gap-3 rounded-lg px-3 py-2 w-full cursor-pointer my-2 bg-white border border-green-600",children:[Object(_.jsx)("div",{children:Object(_.jsx)(x.w,{className:"text-3xl text-green-600"})}),Object(_.jsx)("div",{className:"flex flex-col",children:Object(_.jsx)("span",{className:"font-bold text-lg text-green-600",children:this.state.success})})]}),"PostRequests"===this.state.documentType&&null!==this.state.selectedPosition&&null!==this.state.posts_requests&&Object(_.jsx)(J,{postRequests:this.state.posts_requests,GetDistrictName:this.GetDistrictName,selected_position:this.state.selectedPosition,GetDistrictsPostsRequests:this.GetDistrictsPostsRequests}),"PlacementReport"===this.state.documentType&&null!==this.state.selectedPosition&&Object(_.jsx)(E,{selectedDistrict:null===this.state.districts||void 0===this.state.districts.districts.find((function(e){return e.district_code===t.state.selected_district_code}))?null:this.state.districts.districts.find((function(e){return e.district_code===t.state.selected_district_code})),placementReport:this.state.placementReport,selectedPosition:this.state.selectedPosition,chooseDistrict:function(){return t.setState({select_district_modal:!0})},GetPlacementReport:function(e,s){!1===t.state.view_all&&""!==s?t.GetDistrictPlacementReport(e,s):(t.GetPositionPlacementReport(e),t.setState({view_all:!0}))},GetDistrictName:this.GetDistrictName,view_all:this.state.view_all})]}),!0===this.state.choosePosition&&null!==this.state.positions&&Object(_.jsx)(O.d,{backDrop:!0,theme:O.c.default,close:function(){t.setState({choosePosition:!1})},backDropClose:!0,widthSizeClass:O.b.large,displayClose:!0,padding:{title:!0,body:!0},title:Object(_.jsx)("div",{className:"text-2xl font-bold",children:"Choose position"}),children:Object(_.jsx)(I,{selectPosition:function(e){null!==e.position_code&&("PostRequests"===t.state.documentType&&t.GetDistrictsPostsRequests(e.position_code),!0===t.state.view_all?("PlacementReport"===t.state.documentType&&""!==t.state.selected_district_code&&t.GetDistrictPlacementReport(e.position_code,t.state.selected_district_code),t.setState({view_all:!1,selected_district_code:""})):"PlacementReport"===t.state.documentType&&""!==t.state.selected_district_code&&(t.setState({view_all:!0,selected_district_code:""}),t.GetPositionPlacementReport(e.position_code))),null!==e.position_code&&t.setState({selectedPosition:e,choosePosition:!1})},positions:this.state.positions,selected_position_code:null===this.state.selectedPosition?"":this.state.selectedPosition.position_code})}),!0===this.state.select_district_modal&&Object(_.jsx)(O.d,{backDrop:!0,theme:O.c.default,close:function(){return t.setState({select_district_modal:!1})},backDropClose:!0,widthSizeClass:O.b.medium,displayClose:!0,padding:{title:!0,body:!0},title:Object(_.jsx)("div",{className:"text-2xl",children:"Filter by district"}),children:null===this.state.districts?Object(_.jsx)("div",{children:"Loading..."}):null!==this.state.selectedPosition&&null!==this.state.selectedPosition.position_code&&Object(_.jsx)("div",{className:"-mt-5",children:Object(_.jsx)(S,{districts:this.state.districts,selected_district_code:this.state.selected_district_code,selectDistrict:function(e){t.setState({selected_district_code:e,select_district_modal:!1,view_all:!1}),t.GetDistrictPlacementReport(t.state.selectedPosition.position_code,e)}})})})]})}}]),s}(p.Component),Q=Object(j.b)((function(e){return{auth:e.auth,periods:e.periods}}),{FC_GetPositionsByInstitution:f.a})(K)},685:function(e,t,s){"use strict";s.d(t,"f",(function(){return p})),s.d(t,"d",(function(){return h})),s.d(t,"b",(function(){return x})),s.d(t,"e",(function(){return j})),s.d(t,"c",(function(){return m})),s.d(t,"g",(function(){return f})),s.d(t,"a",(function(){return g}));var c=s(5),r=s.n(c),a=s(7),i=s(10),n=s.n(i),l=s(6),o=s(8),d=s(16),u=s(14),b="".concat(o.a.AUTH,"/auth/user/access"),p=function(e){return function(){var t=Object(a.a)(r.a.mark((function t(s){var c;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(!0,""),t.prev=1,Object(d.b)(),t.next=5,n.a.get("".concat(o.a.AUTH,"/system/setting"));case 5:c=t.sent,console.log("=================getSystemSettings==================="),console.log(c),console.log("=================getSystemSettings==================="),s({type:l.a.GET_SYSTEM_SETTINGS,payload:c.data}),e(!1,""),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(1),console.log({code_error:t.t0}),e(!1,Object(u.a)(t.t0));case 17:case"end":return t.stop()}}),t,null,[[1,13]])})));return function(e){return t.apply(this,arguments)}}()},h=function(e){return function(){var t=Object(a.a)(r.a.mark((function t(s){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s({type:l.a.DISABLE_SYSTEM_SETTINGS,payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},x=function(e){return function(){var t=Object(a.a)(r.a.mark((function t(s){var c,a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(!0,""),t.prev=1,Object(d.b)(),t.next=5,n.a.get("".concat(b,"/roleaccess"));case 5:c=t.sent,a=c.data.map((function(e){return{id:e.id,task:e.title,key:e.key,permitted:e.permitted}})),s({type:l.a.GET_TASK_ACCESS,payload:a}),e(!1,"",a),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(1),console.log({code_error:t.t0}),e(!1,Object(u.a)(t.t0));case 15:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e){return t.apply(this,arguments)}}()},j=function(e){return function(){var t=Object(a.a)(r.a.mark((function t(s){var c;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(!0,""),t.prev=1,Object(d.b)(),t.next=5,n.a.get("".concat(o.a.APPLICATION,"/position"));case 5:c=t.sent,s({type:l.a.GET_POSTIONS,payload:c.data}),e(!1,""),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(1),console.log({code_error:t.t0}),e(!1,Object(u.a)(t.t0));case 14:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}()},m=function(e){return console.log({deletePosition:e}),function(){var t=Object(a.a)(r.a.mark((function t(s){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s({type:l.a.DELETE_POSITION,payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},f=function(e){return function(){var t=Object(a.a)(r.a.mark((function t(s){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s({type:l.a.PUBLISH_POSITION,payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},g=function(e,t){return function(){var s=Object(a.a)(r.a.mark((function s(c){var a;return r.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t(!0,""),s.prev=1,Object(d.b)(),s.next=5,n.a.get("".concat(o.a.APPLICATION,"/position/instituteposition/").concat(e));case 5:a=s.sent,c({type:l.a.GET_POSTIONS,payload:a.data}),t(!1,"",a.data),s.next=14;break;case 10:s.prev=10,s.t0=s.catch(1),console.log({code_error:s.t0}),t(!1,Object(u.a)(s.t0));case 14:case"end":return s.stop()}}),s,null,[[1,10]])})));return function(e){return s.apply(this,arguments)}}()}},711:function(e,t){},716:function(e,t){},717:function(e,t){}}]);
//# sourceMappingURL=35.ea7f032c.chunk.js.map