(this["webpackJsonpreact-redux-typescript-advance"]=this["webpackJsonpreact-redux-typescript-advance"]||[]).push([[46],{1319:function(e,t,s){"use strict";s.r(t),s.d(t,"AccessManagement",(function(){return G}));var c,a=s(26),l=s(25),r=s(28),n=s(27),o=s(4),i=s.n(o),d=s(12),u=s(22),m=s(3),x=s(21),b=s(40),p=s(11),h=s(5),j=s.n(h),f=s(7),g=s(9),O=s.n(g),R=s(710),N=s(682),v=s(34),y=s(24),T=s(201),w=s(10),_=s(15),S=s(1),A=function(e){var t=e.handleSubmit,s=e.setRoleTitle,c=e.roleTitle,a=e.roleRequirement,l=e.setRequirement,r=e.error,n=e.setError;return Object(S.jsx)("div",{children:Object(S.jsxs)("form",{className:"max-w-xl mx-auto",onSubmit:function(e){return t(e,1)},children:[Object(S.jsx)("h1",{className:"text-3xl font-semibold mt-3 mb-5 text-center",children:"Basic Information"}),Object(S.jsx)("div",{className:"-mx-3 md:flex mb-6",children:Object(S.jsxs)("div",{className:"md:w-full px-3",children:[Object(S.jsx)("label",{htmlFor:"role-title",className:"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2",children:"Role"}),Object(S.jsx)("input",{type:"text",className:"text-left input-white w-20 inline-block border-2 ".concat("role-title"===r.element?"border-red-500":"border-gray-500"),value:c,placeholder:"Role title",onChange:function(e){s(e.target.value),n({element:"",msg:""})}}),Object(S.jsx)("p",{className:"text-red-700 mt-1 ml-1 text-sm italic ".concat("role-title"!==r.element&&"hidden"),children:r.msg})]})}),Object(S.jsxs)("div",{className:"flex flex-col mb-5",children:[Object(S.jsx)("label",{children:"Field"}),Object(S.jsx)("span",{className:"text-gray-500 text-sm",children:"Required Field for this role"}),Object(S.jsxs)("div",{className:"grid grid-flow-row grid-cols-3 sm:grid-cols-4 md:grid-cols-5 grid-rows- gap-4",children:[Object(S.jsxs)("label",{className:"inline-flex items-center mt-3",children:[Object(S.jsx)("input",{type:"radio",name:"field",className:"form-radio h-5 w-5 text-gray-600",onChange:function(){return l("institute")},checked:"institute"===a}),Object(S.jsx)("span",{className:"ml-2 text-gray-700",children:"Institute"})]}),Object(S.jsxs)("label",{className:"inline-flex items-center mt-3",children:[Object(S.jsx)("input",{type:"radio",name:"field",className:"form-radio h-5 w-5 text-gray-600",onChange:function(){return l("room")},checked:"room"===a}),Object(S.jsx)("span",{className:"ml-2 text-gray-700",children:"Room"})]}),Object(S.jsxs)("label",{className:"inline-flex items-center mt-3",children:[Object(S.jsx)("input",{type:"radio",name:"field",className:"form-radio h-5 w-5 text-gray-600",onChange:function(){l("none"),n({element:"",msg:""})},checked:"none"===a}),Object(S.jsx)("span",{className:"ml-2 text-gray-700",children:"None of the above"})]})]}),Object(S.jsx)("p",{className:"text-red-700 mt-1 ml-1 text-xs italic ".concat("role-field"!==r.element&&"hidden"),children:r.msg})]}),Object(S.jsx)("div",{className:"flex justify-end gap-5 mt-4",children:Object(S.jsx)("button",{className:"btn bg-primary text-white hover:bg-blue-600 focus:outline-none",type:"submit",children:"Save & Continue"})})]})})},k=i.a.memo(A),C=s(713),q=s(94),E=(q.a.do_exam,q.a.APPLICATION_OVERRIDE,q.a.CLAIM_VALIDATION,q.a.DOCUMENT_CHECKING,q.a.LOCATION_MANAGEMENT,q.a.POST_APPROVAL,q.a.POST_REQUEST,q.a.PREPARE_EXAM,q.a.PROCTORING_ROOM,q.a.QUESTION_BANK,q.a.SCHOOL_MANAGEMENT,q.a.SYSTEM_SETTINGS,q.a.USER_MANAGEMENT,q.a.admin,function(e){var t=function(t,s,c){var a=e.accessToRole;switch(s){case"create":a[t].permitted.create=c;break;case"view":a[t].permitted.view=c;break;case"update":a[t].permitted.update=c;break;default:a[t].permitted.delete=c}e.setAccessToRole(a)};return Object(S.jsx)("div",{children:Object(S.jsx)("form",{className:"max-w-xl mx-auto",onSubmit:function(t){return e.handleSubmit(t,2)},children:Object(S.jsxs)("div",{className:"mb-5",children:[Object(S.jsxs)("div",{className:"mb-5 mt-3",children:[Object(S.jsx)("h1",{className:"text-3xl font-semibold text-center",children:"Access Permissions Settings"}),Object(S.jsxs)("div",{className:"flex items-center gap-2 mt-1 justify-center",children:[Object(S.jsx)(d.g,{className:"w-6 h-6"}),Object(S.jsx)("h1",{className:"text-xl font-semibold text-gray-600 text-center",children:e.roleTitle})]})]}),Object(S.jsx)("div",{className:"md:flex mb-3",children:Object(S.jsxs)("div",{className:"grid grid-cols-2 grid-rows-2 gap-4",children:[Object(S.jsxs)("div",{className:"inline-flex gap-2 items-center",children:[Object(S.jsx)(C.a,{className:"w-12 h-12 text-gray-600"}),Object(S.jsxs)("div",{className:"flex flex-col",children:[Object(S.jsx)("h3",{className:"font-semibold text-xl",children:"Create"}),Object(S.jsx)("span",{className:"text-gray-600 text-sm md:pr-1",children:"This permission gives the user the ability to create"})]})]}),Object(S.jsxs)("div",{className:"inline-flex gap-2 items-center",children:[Object(S.jsx)(d.Fb,{className:"w-12 h-12 text-gray-600"}),Object(S.jsxs)("div",{className:"flex flex-col",children:[Object(S.jsx)("h3",{className:"font-semibold text-xl",children:"View"}),Object(S.jsx)("span",{className:"text-gray-600 text-sm md:pr-1",children:"This permission gives the user the ability to view"})]})]}),Object(S.jsxs)("div",{className:"inline-flex gap-2 items-center",children:[Object(S.jsx)(d.E,{className:"w-12 h-12 text-gray-600"}),Object(S.jsxs)("div",{className:"flex flex-col",children:[Object(S.jsx)("h3",{className:"font-semibold text-xl",children:"Update"}),Object(S.jsx)("span",{className:"text-gray-600 text-sm md:pr-1",children:"This permission gives the user the ability to update"})]})]}),Object(S.jsxs)("div",{className:"inline-flex gap-2 items-center",children:[Object(S.jsx)(d.C,{className:"w-12 h-12 text-gray-600"}),Object(S.jsxs)("div",{className:"flex flex-col",children:[Object(S.jsx)("h3",{className:"font-semibold text-xl",children:"Delete"}),Object(S.jsx)("span",{className:"text-gray-600 text-sm md:pr-1",children:"This permission gives the user the ability to delete"})]})]})]})}),Object(S.jsx)("p",{className:"text-red-700 mt-1 ml-1 text-base italic ".concat("role-access"!==e.error.element&&"hidden"),children:e.error.msg}),Object(S.jsx)(T.a,{columns:[{columnTitle:"Access Name",alignText:"left",padding:"p-3"},{columnTitle:"Create",alignText:"left"},{columnTitle:"View",alignText:"left"},{columnTitle:"Update",alignText:"left"},{columnTitle:"Delete",alignText:"left"}],rows:function(){return e.accessToRole.map((function(s,c){return Object(S.jsxs)("tr",{className:"accordion border-b border-grey-light hover:bg-gray-100",children:[Object(S.jsx)("td",{className:"text-gray-800 text-base font-medium text-left px-3",children:s.task}),Object(S.jsx)("td",{className:"py-1 px-3",children:Object(S.jsx)("input",{type:"checkbox",className:"form-checkbox h-5 w-5 text-gray-600",onChange:function(){t(c,"create",!s.permitted.create),e.setError({element:"",msg:""})},checked:s.permitted.create})}),Object(S.jsx)("td",{className:"py-1 px-3",children:Object(S.jsx)("input",{type:"checkbox",className:"form-checkbox h-5 w-5 text-gray-600",onChange:function(){t(c,"view",!s.permitted.view),e.setError({element:"",msg:""})},checked:s.permitted.view})}),Object(S.jsx)("td",{className:"py-1 px-3",children:Object(S.jsx)("input",{type:"checkbox",className:"form-checkbox h-5 w-5 text-gray-600",onChange:function(){t(c,"update",!s.permitted.update),e.setError({element:"",msg:""})},checked:s.permitted.update})}),Object(S.jsx)("td",{className:"py-1 px-3",children:Object(S.jsx)("input",{type:"checkbox",className:"form-checkbox h-5 w-5 text-gray-600",onChange:function(){t(c,"delete",!s.permitted.delete),e.setError({element:"",msg:""})},checked:s.permitted.delete})})]},s.id+c)}))},pagination:!1,search:!0,thColor:"gray"}),Object(S.jsx)("div",{className:"flex justify-end gap-5 mt-4",children:Object(S.jsx)("button",{className:"btn bg-primary text-white hover:bg-blue-600 focus:outline-none",type:"submit",disabled:e.loadingRequest,children:!0===e.loadingRequest?"Saving...":"Complete"})})]})})})}),I="".concat(w.a.AUTH,"/auth/user/access");!function(e){e[e.Add_Role_Access=0]="Add_Role_Access",e[e.Update_Role_Access=1]="Update_Role_Access",e[e.Close_Modal=2]="Close_Modal"}(c||(c={}));var M,P=function(e){Object(r.a)(s,e);var t=Object(n.a)(s);function s(e){var l;return Object(a.a)(this,s),(l=t.call(this,e)).setViewRole=function(e){l.setState({viewRole:e})},l.setLoadingRequest=function(e){l.setState({loadingRequest:e})},l.setLoading=function(e){l.setState({loading:e})},l.setRoleId=function(e){l.setState({roleId:e})},l.setRoleTitle=function(e){l.setState({roleTitle:e})},l.setRequirement=function(e){l.setState({roleRequirement:e})},l.setStepStatus=function(e){l.setState({stepsStatus:e})},l.setAccessToRole=function(e){l.setState({accessToRole:e})},l.setOpenModal=function(e){l.setState({openModal:e})},l.setError=function(e){l.setState({error:e})},l.setRoleSelected=function(e){l.setState({roleSelected:e})},l.whichLevel=function(e){return e.district_required?"District":e.room_required?"Room":e.school_required?"School":e.education_institution_required?"Institute":"None"},l.userRows=function(){var e=l.loadCurrentRoles(l.props.access.accessRoles).map((function(e,t){return Object(S.jsxs)("tr",{className:"accordion border-b border-grey-light hover:bg-gray-100 group ".concat(l.state.roleId===e.system_user_role_id&&"bg-gray-100"),children:[Object(S.jsx)("td",{className:"px-3 py-3 text-left",children:t+1}),Object(S.jsx)("td",{className:"text-gray-800 text-base font-medium text-left px-3",children:e.role}),Object(S.jsx)("td",{className:"text-gray-800 text-base text-left px-3",children:l.whichLevel(e)}),Object(S.jsx)("td",{className:"text-right",children:Object(S.jsxs)("div",{className:"inline-flex",children:[Object(S.jsxs)("button",{className:"btn bg-gray-300 text-gray-900 group-hover:bg-gray-600 group-hover:text-white inline-flex mr-1 focus:outline-none",onClick:function(){l.setViewRole(!0),l.setRoleId(e.system_user_role_id),l.setRoleSelected(e),l.setRoleTitle(e.role),l.setRequirement(e.district_required?"district":e.school_required?"school":e.room_required?"room":"none"),l.setAccessToRole(l.CustomizeAccess(e.access))},disabled:l.state.roleId===e.system_user_role_id,children:[Object(S.jsx)(R.b,{className:"h-5 w-5 mr-1"}),Object(S.jsx)("span",{children:"Access"})]}),Object(S.jsxs)("button",{className:"btn bg-blue-500 text-white hover:bg-blue-700 inline-flex mr-1 focus:outline-none",onClick:function(){l.setRoleId(e.system_user_role_id),l.setRoleTitle(e.role),l.setOpenModal(c.Update_Role_Access),l.setAccessToRole(l.CustomizeAccess(e.access))},disabled:l.state.roleId===e.system_user_role_id&&l.state.openModal!==c.Close_Modal,children:[Object(S.jsx)(d.E,{className:"h-5 w-5 mr-1"}),Object(S.jsx)("span",{children:"Edit"})]})]})})]},t)}));return e.length>=1?e:Object(S.jsx)("tr",{className:"accordion border-b border-grey-light hover:bg-gray-100",children:Object(S.jsx)("td",{className:"text-gray-500 text-sm font-medium text-center px-3",colSpan:3,children:"No Data Found"})})},l.typeRows=function(){var e=l.props.access.accessRoles.filter((function(e){return e.system_user_role_id===l.state.roleId}))[0].access.map((function(e,t){return Object(S.jsxs)("tr",{className:"accordion border-b border-grey-light hover:bg-gray-100",children:[Object(S.jsx)("td",{className:"text-gray-800 text-xl font-medium text-left px-3 py-2",children:e.task}),Object(S.jsx)("td",{className:"px-2",children:Object(S.jsxs)("div",{className:"inline-flex items-center text-xl ".concat(e.permitted.create?"text-green-700":"text-red-700"),children:[e.permitted.create?Object(S.jsx)(R.a,{}):Object(S.jsx)(d.O,{}),e.permitted.create?" Yes":"No"]})}),Object(S.jsx)("td",{className:"px-2",children:Object(S.jsxs)("div",{className:"inline-flex items-center text-xl ".concat(e.permitted.view?"text-green-700":"text-red-700"),children:[e.permitted.view?Object(S.jsx)(R.a,{}):Object(S.jsx)(d.O,{}),e.permitted.view?" Yes":"No"]})}),Object(S.jsx)("td",{className:"px-2",children:Object(S.jsxs)("div",{className:"inline-flex items-center text-xl ".concat(e.permitted.update?"text-green-700":"text-red-700"),children:[e.permitted.update?Object(S.jsx)(R.a,{}):Object(S.jsx)(d.O,{}),e.permitted.update?" Yes":"No"]})}),Object(S.jsx)("td",{className:"px-2",children:Object(S.jsxs)("div",{className:"inline-flex items-center text-xl ".concat(e.permitted.delete?"text-green-700":"text-red-700"),children:[e.permitted.delete?Object(S.jsx)(R.a,{}):Object(S.jsx)(d.O,{}),e.permitted.delete?" Yes":"No"]})})]},t)}));return e.length>=1?e:Object(S.jsx)("tr",{className:"accordion border-b border-grey-light hover:bg-gray-100",children:Object(S.jsx)("td",{className:"text-gray-500 text-sm font-medium text-center px-3",colSpan:4,children:"No Tasks assigned to this Role"})})},l.CustomizeAccess=function(e){if(!l.props.accessTasks)return[];var t,s=[];return l.props.accessTasks.forEach((function(c,a){(t=e.find((function(e){return e.key===c.key})))?s.push(t):s.push(c)})),s},l.componentDidMount=function(){(l.state.loading||null===l.props.accessTasks)&&l.props.GetTaskAccess((function(e,t){l.setLoading(e),e||Object(b.e)(t)||l.props.PushPopupAlert({title:t,theme:x.a.danger})}))},l.handleSteps=function(e){if(2===e){if(!l.state.roleTitle.length)return l.setError({element:"role-title",msg:"Role Title is required"});l.state.roleRequirement.length||l.setRequirement("none"),l.setStepStatus({stepOne:!0,stepTwo:!1})}else l.setStepStatus({stepOne:!1,stepTwo:!1})},l.handleSubmit=function(){var e=Object(f.a)(j.a.mark((function e(t,s){var a,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),l.setError({element:"",msg:""}),l.setLoadingRequest(!0),1!==s){e.next=8;break}if(l.state.roleTitle.length){e.next=6;break}return e.abrupt("return",l.setError({element:"role-title",msg:"Role Title is required"}));case 6:l.state.roleRequirement.length||l.setRequirement("none"),l.setStepStatus({stepOne:!0,stepTwo:!1});case 8:if(2!==s){e.next=36;break}if(!l.state.accessToRole||l.state.accessToRole.some((function(e){return!0===e.permitted.create||!0===e.permitted.view||!0===e.permitted.update||!0===e.permitted.delete}))){e.next=11;break}return e.abrupt("return",l.setError({element:"role-access",msg:"At least one permission is required"}));case 11:if(e.prev=11,l.state.openModal!==c.Add_Role_Access){e.next=22;break}return e.next=15,O.a.post("".concat(I,"/role"),{role:l.state.roleTitle,status:!0,district_required:"district"===l.state.roleRequirement,school_required:"school"===l.state.roleRequirement,room_required:"room"===l.state.roleRequirement,education_institution_required:"institute"===l.state.roleRequirement,access:l.state.accessToRole});case 15:(a=e.sent)&&l.props.createAccessRoles(a.data.data),l.setLoadingRequest(!1),l.cleanAndCloseModal(),l.props.PushPopupAlert({title:"Role has been successfully created.",theme:x.a.success}),e.next=30;break;case 22:return e.next=24,O.a.patch("".concat(I,"/role"),{role:l.state.roleTitle,status:!0,district_required:"district"===l.state.roleRequirement,school_required:"school"===l.state.roleRequirement,room_required:"room"===l.state.roleRequirement,access:l.state.accessToRole,system_user_role_id:l.state.roleId});case 24:r=e.sent,console.log(r.data),r&&l.props.updateAccessRoles(r.data.data),l.setLoadingRequest(!1),l.cleanAndCloseModal(),l.props.PushPopupAlert({title:"Role has been successfully updated.",theme:x.a.info});case 30:e.next=36;break;case 32:e.prev=32,e.t0=e.catch(11),console.log({role_error:e.t0}),l.props.PushPopupAlert({title:Object(_.a)(e.t0),theme:x.a.danger});case 36:l.setLoadingRequest(!1);case 37:case"end":return e.stop()}}),e,null,[[11,32]])})));return function(t,s){return e.apply(this,arguments)}}(),l.loadCurrentRoles=function(e){return"all"!==l.props.filterStatus?e.filter((function(e){return e.status===l.props.filterStatus})):e},l.changeViewRole=function(e){var t=l.props.access.accessRoles.filter((function(t){return t.system_user_role_id===e}))[0];l.setViewRole(!0),l.setRoleId(t.system_user_role_id),l.setRoleSelected(t),l.setRoleTitle(t.role),l.setRequirement(t.district_required?"district":t.school_required?"school":t.room_required?"room":"none"),l.setAccessToRole(l.CustomizeAccess(t.access))},l.cleanAndCloseModal=function(){l.setStepStatus({stepOne:!1,stepTwo:!1}),l.state.openModal!==c.Update_Role_Access&&(l.setRequirement("none"),l.setRoleTitle(""),l.setRoleId("")),l.setLoadingRequest(!1),l.props.accessTasks?l.setAccessToRole(Object(p.a)(l.props.accessTasks)):l.setAccessToRole([]),l.setRoleSelected(null),l.setError({element:"",msg:""}),l.state.openModal===c.Update_Role_Access&&l.setOpenModal(c.Close_Modal)},l.state={roleId:"",roleTitle:"",roleRequirement:"none",stepsStatus:{stepOne:!1,stepTwo:!1},accessToRole:[],openModal:c.Close_Modal,error:{element:"",msg:""},loadingRequest:!1,loading:!0,viewRole:!1,roleSelected:null},l}return Object(l.a)(s,[{key:"render",value:function(){var e,t,s,a=this;return null===this.props.accessTasks||this.state.loading?Object(S.jsx)(v.a,{}):Object(S.jsxs)("div",{className:"w-full",children:[Object(S.jsxs)("div",{className:"w-full bg-white text-right p-2 border border-gray-300 rounded mb-10",children:[Object(S.jsx)("button",{className:"btn btn-blue ".concat(this.state.loadingRequest&&"cursor-wait"),onClick:function(){a.setOpenModal(c.Add_Role_Access),a.props.accessTasks&&a.setAccessToRole(Object(p.a)(a.props.accessTasks)),a.setRoleId(""),a.setRoleTitle(""),a.setRequirement("none")},disabled:this.state.loadingRequest||null===this.props.accessTasks,children:"New Role"}),Object(S.jsx)("div",{className:"overflow-x-auto w-full mt-2",children:Object(S.jsx)(T.a,{columns:[{columnTitle:"#",alignText:"left"},{columnTitle:"User Roles",alignText:"left"},{columnTitle:"Level",alignText:"left"},{columnTitle:"",alignText:"center"}],rows:this.userRows,pagination:!0,search:!0,searchBG:"bg-white",thColor:"blue"})})]}),this.state.openModal!==c.Close_Modal&&Object(S.jsx)(y.d,{backDrop:!0,theme:y.c.default,close:function(){a.cleanAndCloseModal(),a.setOpenModal(c.Close_Modal)},displayClose:!0,backDropClose:!1,title:Object(S.jsxs)("div",{className:"bg-white text-gray-500 font-bold text-2xl",children:[this.state.openModal===c.Add_Role_Access?"Create New ":"Update ","Role"]}),widthSizeClass:y.b.extraLarge,padding:{title:!0,body:!1,footer:!1},children:Object(S.jsx)("div",{className:"h-full bg-gray-100 py-1",children:Object(S.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 justify-between gap-3",children:[Object(S.jsxs)("div",{className:"bg-white shadow my-3 ml-3 py-2 rounded",children:[Object(S.jsxs)("div",{className:"flex row items-center p-3 mb-2 gap-2 cursor-pointer ".concat(this.state.stepsStatus.stepOne?"text-gray-800 bg-gray-100":"text-blue-800 bg-blue-100 border-blue-800 border-l-4"),onClick:function(){return a.state.stepsStatus.stepOne&&a.handleSteps(1)},children:[Object(S.jsx)("div",{className:"w-10 h-10 bg-white border-2 border-gary-200 rounded-full text-lg text-white flex items-center",children:Object(S.jsx)("span",{className:"text-grey-darker text-center w-full text-gray-700",children:"1"})}),Object(S.jsxs)("div",{className:"flex flex-col font-semibold text-xl",children:["Basic Information",Object(S.jsx)("span",{className:"font-normal text-sm",children:"Input Role Title & a required field"})]})]}),Object(S.jsxs)("div",{className:"flex row items-center p-3 mb-2 gap-2 cursor-pointer ".concat(this.state.stepsStatus.stepOne&&!this.state.stepsStatus.stepTwo?"text-blue-800 bg-blue-100 border-blue-800 border-l-4":"text-gray-800 bg-gray-100"),onClick:function(){return!a.state.stepsStatus.stepOne&&!a.state.stepsStatus.stepTwo&&a.handleSteps(2)},children:[Object(S.jsx)("div",{className:"w-10 h-10 bg-white border-2 border-gary-200 rounded-full text-lg text-white flex items-center",children:Object(S.jsx)("span",{className:"text-grey-darker text-center w-full text-gray-700",children:"2"})}),Object(S.jsxs)("div",{className:"flex flex-col font-semibold text-xl",children:["Access Permission",Object(S.jsx)("span",{className:"font-normal text-sm",children:"Give permission to new role"})]})]})]}),Object(S.jsx)("div",{className:"md:col-span-2 col-span-1 bg-white shadow my-3 mr-3 py-2 rounded",children:this.state.stepsStatus.stepOne?this.state.accessToRole&&Object(S.jsx)(E,{handleSubmit:this.handleSubmit,roleTitle:this.state.roleTitle,setAccessToRole:this.setAccessToRole,accessToRole:this.state.accessToRole,error:this.state.error,setError:this.setError,loadingRequest:this.state.loadingRequest}):Object(S.jsx)(k,{handleSubmit:this.handleSubmit,setRoleTitle:this.setRoleTitle,roleTitle:this.state.roleTitle,setOpenModal:this.setOpenModal,setRequirement:this.setRequirement,roleRequirement:this.state.roleRequirement,error:this.state.error,setError:this.setError})})]})})}),this.state.viewRole&&Object(S.jsx)(y.d,{backDrop:!0,theme:y.c.default,close:function(){a.setViewRole(!1),a.setRoleId(""),a.setRoleSelected(null),a.setRoleTitle(""),a.setRequirement("none"),a.setAccessToRole([])},displayClose:!0,backDropClose:!1,title:Object(S.jsxs)("div",{className:"bg-white text-gray-500 font-bold text-2xl",children:[this.state.roleTitle," Role"]}),widthSizeClass:y.b.large,padding:{title:!0,body:!1,footer:!1},children:Object(S.jsxs)("div",{className:"h-full bg-gray-100 py-1 px-2",children:[Object(S.jsxs)("div",{className:"my-3 flex justify-between items-start",children:[Object(S.jsxs)("div",{children:[Object(S.jsx)("div",{className:"flex flex-col",children:Object(S.jsxs)("select",{className:"rounded px-2 py-2 w-full bg-white focus:outline-none border-gray-400 border-2",onChange:function(e){return a.changeViewRole(e.target.value)},value:this.state.roleId,disabled:this.state.loadingRequest,children:[Object(S.jsx)("option",{value:"",children:"Document Category"}),this.loadCurrentRoles(this.props.access.accessRoles).map((function(e,t){return Object(S.jsx)("option",{value:e.system_user_role_id,children:e.role},t+e.system_user_role_id)}))]})}),(null===(e=this.state.roleSelected)||void 0===e?void 0:e.district_required)&&Object(S.jsxs)("div",{className:"flex items-center text-lg gap-1 mt-1",children:[Object(S.jsx)("span",{className:"text-gray-600",children:"Level: "}),Object(S.jsx)("h1",{className:"font-semibold text-gray-900",children:"District"})]}),(null===(t=this.state.roleSelected)||void 0===t?void 0:t.school_required)&&Object(S.jsxs)("div",{className:"flex items-center text-lg gap-1 mt-1",children:[Object(S.jsx)("span",{className:"text-gray-600",children:"Level: "}),Object(S.jsx)("h1",{className:"font-semibold text-gray-900",children:"School"})]}),(null===(s=this.state.roleSelected)||void 0===s?void 0:s.room_required)&&Object(S.jsxs)("div",{className:"flex items-center text-lg gap-1 mt-1",children:[Object(S.jsx)("span",{className:"text-gray-600",children:"Level: "}),Object(S.jsx)("h1",{className:"font-semibold text-gray-900",children:"Room"})]})]}),Object(S.jsxs)("button",{className:"btn bg-blue-500 text-white hover:bg-blue-700 inline-flex mr-1",onClick:function(){a.setOpenModal(c.Update_Role_Access),a.setViewRole(!1),a.setStepStatus({stepOne:!0,stepTwo:!1})},disabled:this.state.openModal!==c.Close_Modal,children:[Object(S.jsx)(d.E,{className:"h-5 w-5 mr-1"}),Object(S.jsx)("span",{children:"Edit"})]})]}),Object(S.jsx)(T.a,{columns:[{columnTitle:"Access Name",alignText:"left",padding:"p-3"},{columnTitle:"Create",alignText:"left"},{columnTitle:"View",alignText:"left"},{columnTitle:"Update",alignText:"left"},{columnTitle:"Delete",alignText:"left"}],rows:this.typeRows,pagination:!1,search:!0,searchBG:"bg-gray-100",thColor:"gray",tableId:"tableAccessForm"})]})})]})}}]),s}(o.Component),L=i.a.memo(Object(u.b)((function(e){return{access:e.access,accessTasks:e.system_settings.accessTasks}}),{GetTaskAccess:N.b,createAccessRoles:m.hc,updateAccessRoles:m.nd,PushPopupAlert:m.Pb})(P));!function(e){e.All_Roles="All Roles",e.Active_Roles="Active Roles",e.Blocked_Roles="Blocked Roles"}(M||(M={}));var D=function(e){Object(r.a)(s,e);var t=Object(n.a)(s);function s(e){var c;return Object(a.a)(this,s),(c=t.call(this,e)).state={loading:!0,labelCounts:{allRole:0,activeRole:0,blockedRole:0},roleStatus:M.All_Roles},c}return Object(l.a)(s,[{key:"componentDidMount",value:function(){var e=this;this.props.access.accessRoles.length?this.setState({loading:!1,labelCounts:{allRole:this.props.access.accessRoles.length,activeRole:this.props.access.accessRoles.filter((function(e){return e.status})).length,blockedRole:this.props.access.accessRoles.filter((function(e){return!e.status})).length}}):this.props.FC_GetAccessRoles((function(t,s,c){e.setState({loading:t}),Object(b.e)(s)||!1!==t?!1===t&&c.length>0&&e.setState({labelCounts:{allRole:c.length,activeRole:c.filter((function(e){return e.status})).length,blockedRole:c.filter((function(e){return!e.status})).length}}):e.props.PushPopupAlert({title:s,theme:x.a.warning})}))}},{key:"render",value:function(){return!0===this.state.loading?Object(S.jsx)("div",{className:"text-center mt-7 font-bold text-4xl text-gray-400 animate-pulse",children:"Loading roles..."}):Object(S.jsxs)(o.Fragment,{children:[Object(S.jsx)("div",{className:"w-full my-5 px-1",children:Object(S.jsxs)("div",{className:"flex flex-row items-center",children:[Object(S.jsx)(d.Z,{className:"text-blue-700 w-28 h-28"}),Object(S.jsxs)("div",{className:"flex flex-col",children:[Object(S.jsx)("h1",{className:"text-3xl font-semibold",children:"System Roles Management"}),Object(S.jsxs)("div",{className:"flex flex-row items-center mx-2 md:gap-3 gap-2",children:[Object(S.jsxs)("div",{className:"flex flex-col mt-1",children:[Object(S.jsx)("span",{className:"text-gray-600 text-base",children:"All Role(s)"}),Object(S.jsx)("span",{className:"text-gray-600 text-3xl font-bold",children:Object(b.g)(this.state.labelCounts.allRole)})]}),this.state.roleStatus!==M.Blocked_Roles&&Object(S.jsxs)("div",{className:"flex flex-col mt-1",children:[Object(S.jsx)("span",{className:"text-gray-600 text-base",children:"Active Role(s)"}),Object(S.jsx)("span",{className:"text-gray-600 text-3xl font-bold",children:Object(b.g)(this.state.labelCounts.activeRole)})]}),this.state.roleStatus!==M.Active_Roles&&Object(S.jsxs)("div",{className:"flex flex-col mt-1",children:[Object(S.jsx)("span",{className:"text-gray-600 text-base",children:"Blocked Role(s)"}),Object(S.jsx)("span",{className:"text-gray-600 text-3xl font-bold",children:Object(b.g)(this.state.labelCounts.blockedRole)})]})]})]})]})}),Object(S.jsx)("div",{className:"p-2 overflow-x-auto",children:Object(S.jsx)(L,{filterStatus:this.state.roleStatus!==M.Blocked_Roles&&(this.state.roleStatus===M.Active_Roles||"all")})})]})}}]),s}(o.Component),G=Object(u.b)((function(e){return{access:e.access}}),{FC_GetAccessRoles:m.R,PushPopupAlert:m.Pb})(D)},682:function(e,t,s){"use strict";s.d(t,"f",(function(){return x})),s.d(t,"d",(function(){return b})),s.d(t,"b",(function(){return p})),s.d(t,"e",(function(){return h})),s.d(t,"c",(function(){return j})),s.d(t,"g",(function(){return f})),s.d(t,"a",(function(){return g}));var c=s(5),a=s.n(c),l=s(7),r=s(9),n=s.n(r),o=s(6),i=s(10),d=s(16),u=s(15),m="".concat(i.a.AUTH,"/auth/user/access"),x=function(e){return function(){var t=Object(l.a)(a.a.mark((function t(s){var c;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(!0,""),t.prev=1,Object(d.b)(),t.next=5,n.a.get("".concat(i.a.AUTH,"/system/setting"));case 5:c=t.sent,console.log("=================getSystemSettings==================="),console.log(c),console.log("=================getSystemSettings==================="),s({type:o.a.GET_SYSTEM_SETTINGS,payload:c.data}),e(!1,""),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(1),console.log({code_error:t.t0}),e(!1,Object(u.a)(t.t0));case 17:case"end":return t.stop()}}),t,null,[[1,13]])})));return function(e){return t.apply(this,arguments)}}()},b=function(e){return function(){var t=Object(l.a)(a.a.mark((function t(s){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s({type:o.a.DISABLE_SYSTEM_SETTINGS,payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},p=function(e){return function(){var t=Object(l.a)(a.a.mark((function t(s){var c,l;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(!0,""),t.prev=1,Object(d.b)(),t.next=5,n.a.get("".concat(m,"/roleaccess"));case 5:c=t.sent,l=c.data.map((function(e){return{id:e.id,task:e.title,key:e.key,permitted:e.permitted}})),s({type:o.a.GET_TASK_ACCESS,payload:l}),e(!1,"",l),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(1),console.log({code_error:t.t0}),e(!1,Object(u.a)(t.t0));case 15:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e){return t.apply(this,arguments)}}()},h=function(e){return function(){var t=Object(l.a)(a.a.mark((function t(s){var c;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(!0,""),t.prev=1,Object(d.b)(),t.next=5,n.a.get("".concat(i.a.APPLICATION,"/position"));case 5:c=t.sent,s({type:o.a.GET_POSTIONS,payload:c.data}),e(!1,""),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(1),console.log({code_error:t.t0}),e(!1,Object(u.a)(t.t0));case 14:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}()},j=function(e){return console.log({deletePosition:e}),function(){var t=Object(l.a)(a.a.mark((function t(s){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s({type:o.a.DELETE_POSITION,payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},f=function(e){return function(){var t=Object(l.a)(a.a.mark((function t(s){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s({type:o.a.PUBLISH_POSITION,payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},g=function(e,t){return function(){var s=Object(l.a)(a.a.mark((function s(c){var l;return a.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t(!0,""),s.prev=1,Object(d.b)(),s.next=5,n.a.get("".concat(i.a.APPLICATION,"/position/instituteposition/").concat(e));case 5:l=s.sent,c({type:o.a.GET_POSTIONS,payload:l.data}),t(!1,"",l.data),s.next=14;break;case 10:s.prev=10,s.t0=s.catch(1),console.log({code_error:s.t0}),t(!1,Object(u.a)(s.t0));case 14:case"end":return s.stop()}}),s,null,[[1,10]])})));return function(e){return s.apply(this,arguments)}}()}}}]);
//# sourceMappingURL=46.b763ae69.chunk.js.map