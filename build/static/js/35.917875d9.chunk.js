(this["webpackJsonpreact-redux-typescript-advance"]=this["webpackJsonpreact-redux-typescript-advance"]||[]).push([[35,4],{191:function(e,t,r){"use strict";r.d(t,"b",(function(){return s})),r.d(t,"g",(function(){return n})),r.d(t,"e",(function(){return a})),r.d(t,"c",(function(){return o})),r.d(t,"d",(function(){return i})),r.d(t,"i",(function(){return c})),r.d(t,"h",(function(){return l})),r.d(t,"a",(function(){return d})),r.d(t,"f",(function(){return u}));var s=[{school_id:"32762426329",school_title:"G.S. De Gitega",district_id:"234242",number_of_females:10,number_of_males:12},{school_id:"32762426329",school_title:"G.S. De Gitega",district_id:"7322342684"},{school_id:"32762426329",school_title:"Rucee De Kigali",district_id:"234242",number_of_females:10,number_of_males:12},{school_id:"32762426329",school_title:"G.S. De Gitega",district_id:"73232432684",number_of_females:10,number_of_males:12}],n=function(e){return null===e||null!==e.match(/^ *$/)},a=function(e,t){return e.filter((function(e){return e.system_user_role_id===t}))[0]},o=function(e,t){return e.find((function(e){return e.education_institute_id===t}))},i=function(e,t){return console.log({positions:e,position_id:t,data:e.filter((function(e){return e.position_id===t}))[0]}),e.filter((function(e){return e.position_id===t}))[0]},c=function(e){var t=e-Math.floor(e);return("0"+(e-=t)).slice(-2)+t.toString().substr(1)},l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,r=new Array(t+1).join("0");return(r+e).slice(-t)},d=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},u=function(e){var t=new Date(e),r=new Date;return t.getTime()<r.getTime()}},198:function(e,t,r){"use strict";r.d(t,"b",(function(){return m})),r.d(t,"a",(function(){return x})),r.d(t,"d",(function(){return h})),r.d(t,"c",(function(){return j}));var s=r(19),n=r(18),a=r(21),o=r(20),i=r(4),c=r.n(i),l=r(17),d=r(3),u=r(8),p=r(1),b=function(e){Object(a.a)(r,e);var t=Object(o.a)(r);function r(e){var n;return Object(s.a)(this,r),(n=t.call(this,e)).componentDidMount=function(){return n.props.PageHasSubNav(!0)},n.componentWillUnmount=function(){return n.props.PageHasSubNav(!1)},n.state={loading:!1},n}return Object(n.a)(r,[{key:"render",value:function(){if(!1===this.props.auth.isAuthenticated)return null;var e=this.props.system.navigation;return Object(p.jsx)("div",{className:"fixed w-48 p-1 pr-2 pl-6 text-gray-700 bg-white ".concat(!0===e?"lg:left-16  left-16":" -left-72 lg:left-16","  top-0 bottom-0 pt-20 z-30 shadow-lg  transition-all duration-500 ease-in-out overflow-y-auto"),children:this.props.children})}}]),r}(c.a.Component),m=Object(l.b)((function(e){return{auth:e.auth,system:e.system}}),{NavToogle:d.mb,PageHasSubNav:d.nb})(b),x=function(e){var t=e.title,r=void 0===t?"":t,s=e.icon,n=void 0===s?u.m:s,a=e.active,o=void 0!==a&&a,i=e.count,c=void 0===i?0:i,l=n;return Object(p.jsxs)("section",{className:"".concat(!0===o?"bg-blue-500 text-white font-bold":"bg-blue-100 text-blue-800"," mb-1 hover:font-bold py-1 hover:bg-blue-400 hover:text-white --font-bold  px-2 rounded-md flex cursor-pointer items-center"),children:[Object(p.jsxs)("section",{className:"flex-1",children:[Object(p.jsx)(l,{className:"inline-block mr-1 text-xs"}),Object(p.jsx)("span",{children:r})]}),c>0?Object(p.jsx)("span",{className:"px-0.5 my-1 text-xs bg-blue-600 text-white rounded-full",children:c}):null]})},h=function(e){var t=e.children;return Object(p.jsx)("div",{className:"ml-3 overflow-y-auto border-l-2 border-blue-200 -mt-1 pt-2 mb-2 pl-1 cursor-pointer",children:t})},j=function(e){var t=e.title,r=void 0===t?"":t,s=e.icon,n=void 0===s?u.m:s,a=e.active,o=void 0!==a&&a,i=e.count,c=void 0===i?0:i,l=n;return Object(p.jsxs)("div",{className:"animate__animated animate__zoomIn animate__faster ".concat(!0===o?"bg-blue-500 text-white font-bold":" text-blue-800"," text-blue-800 bg-blue-200 rounded-md px-1 mb-1 flex items-center py-1 font-bold"),children:[Object(p.jsx)(l,{className:"inline-block mr-0.1 text-xs ".concat(!0===o?"text-white":"")}),Object(p.jsx)("span",{className:"inline-block pl-1 ".concat(!0===o?"text-white":""),children:r}),c>=1?Object(p.jsx)("span",{className:"text-sm fint-bold ".concat(!0===o?"text-white":""),children:c}):null]})}},201:function(e,t,r){"use strict";r.d(t,"b",(function(){return p})),r.d(t,"g",(function(){return b})),r.d(t,"e",(function(){return m})),r.d(t,"a",(function(){return x})),r.d(t,"c",(function(){return h})),r.d(t,"h",(function(){return j})),r.d(t,"f",(function(){return f})),r.d(t,"d",(function(){return O}));var s=r(5),n=r.n(s),a=r(7),o=r(9),i=r.n(o),c=r(6),l=r(10),d=r(12),u=r(13),p=function(e){return e(!0,""),function(){var t=Object(a.a)(n.a.mark((function t(r){var s,a;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,Object(d.b)(),t.next=4,i.a.get("".concat(l.a.CLAIMING,"/session-type"));case 4:s=t.sent,console.log({GET_PLANS_TYPES:s.data}),a=[],200===s.status&&null!==s.data&&s.data.length>0&&(a=s.data),r({type:c.a.GET_PLANS_TYPES,payload:a}),e(!1,""),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(0),console.error({error:Object(u.a)(t.t0)}),e(!1,Object(u.a)(t.t0));case 16:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}()},b=function(e){return console.log({thisType:e}),{type:c.a.SELECT_PLAN_TYPE,payload:e}},m=function(e){return e(!0,""),function(){var t=Object(a.a)(n.a.mark((function t(r){var s,a;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,Object(d.b)(),t.next=4,i.a.get("".concat(l.a.CLAIMING,"/session/active/"));case 4:s=t.sent,console.log({GET_ACTIVE_SESSION_PLANS:s.data}),a=void 0,s.data&&void 0!==s.data.is_active&&(a=s.data),console.log({session_plan:s.data}),r({type:c.a.GET_ACTIVE_SESSION_PLANS,payload:a||"none"}),e(!1,"",a||"none"),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(0),console.error({error:Object(u.a)(t.t0)}),e(!1,Object(u.a)(t.t0));case 17:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e){return t.apply(this,arguments)}}()},x=function(e){return e(!0,""),function(){var t=Object(a.a)(n.a.mark((function t(r){var s,a;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,Object(d.b)(),t.next=4,i.a.get("".concat(l.a.CLAIMING,"/session/"));case 4:s=t.sent,console.log({GET_ALL_SESSION_PLANS:s.data}),a=[],200===s.status&&null!==s.data&&s.data.length>0&&(a=s.data),r({type:c.a.GET_ALL_SESSION_PLANS,payload:a}),e(!1,"",a),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(0),console.error({error:Object(u.a)(t.t0)}),e(!1,Object(u.a)(t.t0));case 16:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}()},h=function(e){return{type:c.a.CREATE_SESSION_PLAN,payload:e}},j=function(e){return{type:c.a.UPDATE_SESSION_PLAN,payload:e}},f=function(e){return{type:c.a.SESSION_ACTIVATION,payload:e}},O=function(e){return{type:c.a.DELETE_SESSION_PLAN,payload:e}}},273:function(e,t){},284:function(e,t,r){"use strict";r(4);var s=r(397),n=r(398),a=r(26),o=r(1);t.a=function(e){var t=e.fileData,r=e.fileName,i=e.btnName,c=void 0===i?"Excel":i,l=e.className,d=void 0===l?"flex items-center gap-1 px-4 py-1 rounded text-green-700 bg-white border hover:text-white hover:bg-green-700 border-green-700 font-bold":l,u=e.showIcon,p=void 0===u||u;return Object(o.jsxs)("button",{onClick:function(e){return function(e,t){var r={Sheets:{data:n.utils.json_to_sheet(e)},SheetNames:["data"]},a=n.write(r,{bookType:"xlsx",type:"array"}),o=new Blob([a],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});s.saveAs(o,t+".xlsx")}(t,r)},className:d,children:[p&&Object(o.jsx)(a.k,{}),c]})}},288:function(e,t,r){"use strict";r.d(t,"a",(function(){return d}));var s=r(5),n=r.n(s),a=r(7),o=r(272),i=r(48),c=r.p+"static/media/mineduc.11a9ae1c.png";r(396);var l=function(e){var t=e.internal.getNumberOfPages();e.setFont("helvetica","italic"),e.setFontSize(8);for(var r=1;r<=t;r++)e.setPage(r),e.text("Page "+String(r)+" of "+String(t),e.internal.pageSize.width/2,297,{align:"center"})},d=function(){var e=Object(a.a)(n.a.mark((function e(t,r){var s,a,d,u,p,b,m,x;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(s=t.orientation?t.orientation:"p",a=20,20,185,(d=new o.default(s,"mm","a4")).setTextColor(95,95,95),d.setFontSize(28),d.addImage(c,"png",20,20,10,10),d.text("MINEDUC",32,28.5,void 0,"left"),d.setFontSize(26),d.text(t.title,d.internal.pageSize.getWidth()/2,42.7,void 0,"center"),d.setFontSize(20),d.text(t.institute,d.internal.pageSize.getWidth()/2,53.7,void 0,"center"),u=d.splitTextToSize(t.subject,145),d.setFontSize(16),p=63,d.setTextColor(95,95,95),d.text("".concat(t.subjectTitle,": "),a,p),b=d.getTextWidth("".concat(t.subjectTitle,": ")),d.setTextColor(38,38,38),m=0;m<u.length;m++)p>280&&(p=10,d.addPage()),d.text(u[m],a+b,p),p+=7;return d.setTextColor(95,95,95),d.text("Period: ",a,p+3),b=d.getTextWidth("Period: "),d.setTextColor(38,38,38),d.text(t.period,a+b,p+3),d.autoTable({html:r,startY:85,margin:{horizontal:20},cellPadding:3,rowHeight:20,bodyStyles:{valign:"top"},columnStyles:{email:{cellWidth:"wrap"}},theme:"striped",tableWidth:!0}),d.setFontSize(12),x=d.lastAutoTable.finalY,d.text("Reported by: ".concat(t.doneBy),a,x+15),d.text("Report downloaded on "+Object(i.a)((new Date).toString()),a,x+23),l(d),e.next=34,d.save("".concat(t.title+": "+t.subject+": "+t.period,".pdf"));case 34:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},399:function(e,t){},400:function(e,t){},411:function(e,t,r){"use strict";r(4);var s=r(1);t.a=function(e){var t=function(){for(var t=[],r=0;r<e.cols;r++)t.push(r);return t.map((function(e){return Object(s.jsx)("td",{className:"p-3 text-center whitespace-nowrap",children:Object(s.jsx)("div",{className:"w-full h-4 rounded bg-gray-200 animate__animated animate__pulse animate__delay-5s animate__infinite"})},e)}))};return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("tr",{className:"border-b border-gray-200",children:t()},228),Object(s.jsx)("tr",{className:"border-b border-gray-200",children:t()},22648),Object(s.jsx)("tr",{className:"border-b border-gray-200",children:t()},229768)]})}},459:function(e,t,r){"use strict";var s;r.d(t,"a",(function(){return s})),r.d(t,"b",(function(){return n})),r.d(t,"c",(function(){return a})),r.d(t,"d",(function(){return o})),function(e){e.district_name="district_name",e.center_name="center_name",e.room_number="room_number",e.room_type="room_type",e.room_capacity="room_capacity",e.room_occupation="room_occupation"}(s||(s={}));var n=function(e){var t=[],r=[];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(r.includes(e[s].district_id)||(r.push(e[s].district_id),t.push({district_id:e[s].district_id,district_name:e[s].district_name})));return t},a=function(e){var t=0;for(var r in e.course_in_room)if(Object.prototype.hasOwnProperty.call(e.course_in_room,r)){var s=e.course_in_room[r];t<s.occupied&&(t=s.occupied)}return t},o=function(e){var t=[];for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var s=e[r];s.occupied=a(e[r]),t.push(s)}return t}},473:function(e,t,r){"use strict";var s=r(23),n=r(4),a=r(8),o=r(191),i=r(49),c=r(1);t.a=function(e){var t=Object(n.useState)(""),r=Object(s.a)(t,2),l=r[0],d=r[1];return Object(c.jsxs)("section",{className:"".concat(e.isModal?"":"border-2 rounded border-gray-400 shadow-md"),children:[Object(c.jsxs)("div",{className:"flex items-center w-full my-1",children:[Object(c.jsx)(a.Bb,{className:"w-6 h-6 absolute ml-2"}),Object(c.jsx)("input",{type:"text",placeholder:"Search",className:"focus:border-2 h-7 ml-1 pl-9 ".concat(e.isModal?"mr-1":"mr-2"," bg-gray-100 focus:border-gray-700 w-full rounded"),onChange:function(e){return d(e.target.value)},value:l,disabled:!(e.districtList.length>0)}),!e.isModal&&Object(c.jsx)("button",{className:"bg-red-200 text-red-700 py-1 px-2 mr-1 rounded text-sm focus:outline-none",type:"button",onClick:function(){e.setChooseDistrict(!1)},children:"Close"})]}),Object(c.jsxs)("div",{className:"w-full h-52 mt-2 ".concat(e.isModal?"px-2":""," overflow-y-auto divide-y divide-gray-300 ").concat(e.bgWhite&&"bg-white"),children:[Object(c.jsx)("section",{children:Object(c.jsxs)("div",{className:"group flex items-center justify-between my-1 ".concat("all"===e.selectedDistrict?"cursor-default bg-blue-50 hover:bg-blue-100":"hover:bg-blue-100"),children:[Object(c.jsx)("div",{className:"p-1 w-full mr-2 ".concat("all"===e.selectedDistrict?"cursor-default":"cursor-pointer"),onClick:function(){e.setChooseDistrict(!1),!e.loadindRequest&&"all"!==e.selectedDistrict&&e.setSelectedDistrict("all")},children:Object(c.jsx)("p",{className:"text-sm font-medium text-black",children:"All district"})}),Object(c.jsx)("button",{type:"button",className:"bg-blue-200 group-hover:bg-blue-300 text-blue-700 group-hover:text-blue-800 p-1 mr-1 rounded text-sm",children:"Choose"})]})}),Object(i.a)(e.districtList,l).length>0?Object(i.a)(e.districtList,l).map((function(t,r){return Object(c.jsx)("section",{children:Object(c.jsxs)("div",{className:"group flex items-center justify-between my-1 hover:bg-gray-100",children:[Object(c.jsx)("div",{className:"p-1 w-full mr-2 cursor-pointer",onClick:function(){e.setChooseDistrict(!1),!e.loadindRequest&&e.setSelectedDistrict(t)},children:Object(c.jsx)("p",{className:"text-sm font-medium text-black",children:Object(o.a)(t.district_name)})}),Object(c.jsx)("button",{type:"button",className:"bg-blue-200 group-hover:bg-blue-300 text-blue-700 group-hover:text-blue-800 p-1 mr-1 rounded text-sm",children:"Choose"})]})},r+t.district_id)})):Object(c.jsx)("div",{className:"text-center p-3",children:Object(c.jsx)("p",{className:"text-base font-medium text-black",children:"No district available"})})]})]})}},823:function(e,t,r){"use strict";r.r(t),r.d(t,"centerReportTitleType",(function(){return s})),r.d(t,"CenterReport",(function(){return I}));var s,n=r(5),a=r.n(n),o=r(7),i=r(19),c=r(18),l=r(21),d=r(20),u=r(9),p=r.n(u),b=r(4),m=r(195),x=r(223),h=r(203),j=r(8),f=r(17),O=r(3),g=r(201),v=r(288),y=r(28),_=r(411),S=r(33),N=r(198),C=r(459),D=r(25),w=r(191),P=r(10),T=r(284),R=r(48),M=r(473),A=r(1);!function(e){e.ROOM_OCCUPATION="Room occupation report",e.ROOM_INVIGILATOR="Room with invigilator report"}(s||(s={}));var E=[{key:C.a.district_name,title:"District name",status:!0},{key:C.a.center_name,title:"Center name",status:!0},{key:C.a.room_number,title:"Room number",status:!0},{key:C.a.room_type,title:"Room type",status:!0},{key:C.a.room_capacity,title:"Room capacity",status:!0},{key:C.a.room_occupation,title:"Room occupation",status:!0}],k=function(e){Object(l.a)(r,e);var t=Object(d.a)(r);function r(e){var n;return Object(i.a)(this,r),(n=t.call(this,e)).setLoading=function(e){n.setState({loading:e})},n.setSelectAll=function(e){n.setState({selectAll:e})},n.setSelectSession=function(e){n.setState({selectSession:e})},n.setSelectedReportTitle=function(e){n.setState({selectedReportTitle:e})},n.setReportTitle=function(e){n.setState({reportTitle:e})},n.setSelectedSession=function(e){n.setState({selectedSession:e})},n.setDefaultReport=function(e){return e&&"invigilator"===e?n.setState({selectedReportTitle:s.ROOM_INVIGILATOR}):n.setState({selectedReportTitle:s.ROOM_OCCUPATION})},n.setFormError=function(e){n.setState({formError:e})},n.loadReportMainData=function(){var e=Object(o.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.get("".concat(P.a.APPLICATION,"/currentroomoccupation/").concat(t.session_plan_id));case 3:r=e.sent,console.log("===================================="),console.log({reportMainData:r.data}),console.log("===================================="),n.setState({reportMainData:r.data}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.error({reportMainData_error:e.t0}),n.props.PushPopupAlert({title:Object(R.e)(e.t0),theme:D.a.danger});case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),n.setSortOrder=function(e){n.setState({sortOrder:e})},n.setSortProperty=function(e){n.setState({sortProperty:e})},n.setIsSorted=function(e){n.setState({isSorted:e})},n.setGenerateReportModal=function(e){n.setState({generateReportModal:e})},n.componentDidMount=function(){if(n.setDefaultReport(n.props.match.params.defaultReportType),null===n.props.sessionPlan.allSessionPlans)n.props.GetAllSessionPlans((function(e,t,r){if(n.setLoading(e),!e&&(Object(w.g)(t)||n.props.PushPopupAlert({title:t,theme:D.a.warning}),r&&r.length>0)){var s=r.find((function(e){return e.is_active}));s?(n.setSelectedSession(s),null===n.state.reportMainData&&n.loadReportMainData(s)):(n.setSelectedSession(r[r.length-1]),null===n.state.reportMainData&&n.loadReportMainData(r[r.length-1]))}}));else if(n.props.sessionPlan.allSessionPlans.length>0){var e=n.props.sessionPlan.allSessionPlans.find((function(e){return e.is_active}));e?(n.setSelectedSession(e),null===n.state.reportMainData&&n.loadReportMainData(e)):(n.setSelectedSession(n.props.sessionPlan.allSessionPlans[n.props.sessionPlan.allSessionPlans.length-1]),null===n.state.reportMainData&&n.loadReportMainData(n.props.sessionPlan.allSessionPlans[n.props.sessionPlan.allSessionPlans.length-1])),n.setLoading(!1)}},n.FC_FilterReportData=function(e,t,r,s){var n=e;if("all"!==t&&(n=n.filter((function(e){return e.district_id===t}))),"all"!==r&&(n=n.filter((function(e){return e.center_id===r}))),"all"!==s){var a=[];for(var o in n){n[o].course_in_room.find((function(e){return e.course_id===s}))&&a.push(n[o])}n=a}return n},n.updateContentToPrint=function(){if(n.state.selectedSession){var e="Center Report - "+n.state.selectedSession.session_plan_name;"all"!==n.state.selectedDistrict&&(e="Center Report "+n.state.selectedDistrict.district_name+" district -"+n.state.selectedSession.session_plan_name),n.setReportTitle(e)}if(n.state.reportMainData){var t=[],r=1;for(var s in n.state.reportMainData)if(Object.prototype.hasOwnProperty.call(n.state.reportMainData,s)){var a=null;for(var o in"all"!==n.state.selectedDistrict?n.state.selectedDistrict.district_id===n.state.reportMainData[s].district_id&&(a={no:r,district_name:n.state.reportMainData[s].district_name,center_name:n.state.reportMainData[s].center_name,room_number:n.state.reportMainData[s].room_number,room_type:n.state.reportMainData[s].room_type,room_capacity:n.state.reportMainData[s].capacity,room_occupation:Object(C.c)(n.state.reportMainData[s])}):a={no:r,district_name:n.state.reportMainData[s].district_name,center_name:n.state.reportMainData[s].center_name,room_number:n.state.reportMainData[s].room_number,room_type:Object(w.a)(n.state.reportMainData[s].room_type),room_capacity:n.state.reportMainData[s].capacity,room_occupation:Object(C.c)(n.state.reportMainData[s])},n.state.reportContentExport)Object.prototype.hasOwnProperty.call(n.state.reportContentExport,o)&&!n.state.reportContentExport[o].status&&a&&delete a[n.state.reportContentExport[o].key];a&&t.push(a),r++}n.setState({centerToPrint:t}),t=[],r=1}},n.updateReportContent=function(e){var t=n.state.reportContentExport.findIndex((function(t){return t.key===e})),r=n.state.reportContentExport;r[t].status=!r[t].status,n.setState({reportContentExport:r}),r.find((function(e){return!1===e.status}))?n.setSelectAll(!1):n.setSelectAll(!0),n.updateContentToPrint()},n.isChangeAllowed=function(e){return e!==C.a.center_name&&e!==C.a.district_name&&e!==C.a.room_number&&e!==C.a.room_capacity&&e!==C.a.room_occupation},n.resetReportContent=function(e){var t=n.state.reportContentExport;for(var r in t)n.isChangeAllowed(t[r].key)&&(t[r].status=!e);n.setState({reportContentExport:t}),n.setSelectAll(!e),n.updateContentToPrint()},n.FC_GeneratePDF=function(){if(!document.querySelectorAll("#report_content tbody tr").length)return n.props.PushPopupAlert({title:"Can't generate Report of empty Data",theme:D.a.warning}),!1;if(n.state.selectedSession){var e=document.getElementById("report_content"),t={doneBy:n.props.auth.user.fname+" "+n.props.auth.user.lname,title:"Center Report",subjectTitle:"Room occupation",subject:"All room",period:n.state.selectedSession.session_plan_name,footer:"Online Recruitment",institute:"All institute"};e&&Object(v.a)(t,e)}},n.setSort=function(e){n.state.sortProperty===e&&"ASC"===n.state.sortOrder?n.setSortOrder("DESC"):n.setSortOrder("ASC"),n.setSortProperty(e),n.setIsSorted(!0)},n.searchData=function(e,t){return void 0===t||""===t?e:e.filter((function(e){var r;for(var s in e)if(r=!1,"center_name"!==s&&"room_number"!==s&&"district_name"!==s&&"occupied"!==s&&"capacity"!==s&&"course_in_room"!==s||e[s]&&(r=e[s].toString().toLowerCase().indexOf(t.toLowerCase())>-1),r)break;return r}))},n.setChooseDistrict=function(e){n.setState({chooseDistrict:e})},n.setSelectedDistrict=function(e){n.setState({selectedDistrict:e})},n.state={loading:!0,selectSession:!1,selectedReportTitle:s.ROOM_OCCUPATION,selectedSession:null,reportMainData:null,reportContentExport:E,selectAll:!0,reportTitle:"",centerToPrint:null,sortProperty:"",isSorted:!1,sortOrder:"ASC",searchInput:"",generateReportModal:null,formError:null,selectedDistrict:"all",chooseDistrict:!1},n}return Object(c.a)(r,[{key:"render",value:function(){var e=this;return this.state.loading?Object(A.jsx)("div",{className:"text-center mt-7 font-bold text-4xl text-gray-400 animate-pulse",children:"Loading data..."}):Object(A.jsxs)(b.Fragment,{children:[Object(A.jsxs)(N.b,{children:[Object(A.jsxs)("div",{className:"",children:[Object(A.jsx)("div",{className:"text-gray-600 text-sm mb-2",children:"Session:"}),Object(A.jsxs)("div",{onClick:function(){return e.setSelectSession(!0)},className:"font-bold bg-blue-50 border border-blue-200 rounded py-2 cursor-pointer text-xs px-2 hover:underline justify-between text-blue-600  mb-4 w-full flex flex-row items-center animate__animated animate__zoomIn",children:[null!==this.state.selectedSession?"".concat(this.state.selectedSession.session_plan_name):"Filter by session",Object(A.jsx)(x.c,{className:"text-lg text-blue-600"})]})]}),Object(A.jsxs)("div",{className:"",children:[Object(A.jsx)("div",{className:"text-gray-600 text-sm mb-2",children:"District:"}),!this.state.chooseDistrict&&this.state.reportMainData&&Object(A.jsxs)("div",{onClick:function(){return e.setChooseDistrict(!0)},className:"font-bold bg-blue-50 border border-blue-200 rounded py-2 cursor-pointer text-xs px-2 hover:underline justify-between text-blue-600  mb-4 w-full flex flex-row items-center animate__animated animate__zoomIn",children:["all"!==this.state.selectedDistrict?"".concat(this.state.selectedDistrict.district_name):"All district",Object(A.jsx)(x.c,{className:"text-lg text-blue-600"})]}),this.state.chooseDistrict&&this.state.reportMainData&&Object(A.jsx)(M.a,{setChooseDistrict:this.setChooseDistrict,districtList:Object(C.b)(this.state.reportMainData),setSelectedDistrict:this.setSelectedDistrict,loadindRequest:this.state.loading,selectedDistrict:this.state.selectedDistrict})]})]}),Object(A.jsxs)("section",{children:[Object(A.jsxs)("div",{className:"grid md:grid-cols-12",children:[Object(A.jsx)("div",{className:"col-span-8",children:Object(A.jsx)("div",{className:"mt-4 mx-4 flex flex-col gap-1",children:Object(A.jsx)("span",{className:"text-3xl font-bold text-gray-700",children:"Center report"})})}),Object(A.jsx)("div",{className:"col-span-4",children:Object(A.jsx)("div",{className:"float-right mt-2",children:this.state.reportMainData&&this.state.reportMainData.length>0&&Object(A.jsxs)("div",{className:"flex flex-row items-center justify-end font-bold mb-2",children:[Object(A.jsx)(m.e,{className:"text-2xl text-gray-500"}),Object(A.jsx)("span",{className:"text-gray-500",children:"Export as"}),Object(A.jsx)("button",{className:"px-4 py-1 ml-1 rounded bg-white border hover:text-blue-600 font-bold hover:bg-blue-50 border-gray-200",disabled:!this.state.reportMainData,onClick:function(){e.updateContentToPrint(),e.setGenerateReportModal({reportType:"EXCEL",status:!0})},children:"EXCEL"}),Object(A.jsx)("button",{className:"px-4 py-1 ml-1 rounded bg-white border hover:text-blue-600 font-bold hover:bg-blue-50 border-gray-200",onClick:function(){return e.FC_GeneratePDF()},disabled:!this.state.reportMainData,children:"PDF"})]})})})]}),Object(A.jsxs)("div",{className:"bg-white my-4",children:[Object(A.jsx)("div",{className:"w-full px-2 py-2",children:Object(A.jsx)("input",{onChange:function(t){return e.setState({searchInput:t.target.value})},type:"text",value:this.state.searchInput,placeholder:"Search...",className:"w-full bg-gray-100 py-2 px-3 rounded focus:border-gray-800",disabled:null===this.state.reportMainData||this.FC_FilterReportData(Object(C.d)(this.state.reportMainData),"all"!==this.state.selectedDistrict?this.state.selectedDistrict.district_id:"all","all","all").length<=0})}),Object(A.jsxs)("table",{className:"w-full shadow",id:"report_content",children:[Object(A.jsx)("thead",{className:"bg-white border-b-2 border-gray-300 text-gray-600 font-bold text-sm",children:Object(A.jsxs)("tr",{children:[Object(A.jsx)("td",{className:"px-2 py-2",children:"#"}),Object(A.jsx)("td",{className:"px-2 py-2 cursor-pointer",onClick:function(){return e.setSort("district")},children:Object(A.jsxs)("div",{className:"flex items-center gap-1",children:["District ",Object(A.jsx)(m.i,{})]})}),Object(A.jsx)("td",{className:"px-2 py-2 cursor-pointer",onClick:function(){return e.setSort("center")},children:Object(A.jsxs)("div",{className:"flex items-center gap-1",children:["Center ",Object(A.jsx)(m.i,{})]})}),Object(A.jsx)("td",{className:"px-2 py-2 cursor-pointer",onClick:function(){return e.setSort("room_number")},children:Object(A.jsxs)("div",{className:"flex items-center gap-1",children:["Room number ",Object(A.jsx)(m.i,{})]})}),Object(A.jsx)("td",{className:"px-2 py-2 cursor-pointer",onClick:function(){return e.setSort("room_type")},children:Object(A.jsxs)("div",{className:"flex items-center gap-1",children:["Room type ",Object(A.jsx)(m.i,{})]})}),Object(A.jsx)("td",{className:"px-2 py-2 cursor-pointer",onClick:function(){return e.setSort("capacity")},children:Object(A.jsxs)("div",{className:"flex items-center gap-1",children:["Room capacity ",Object(A.jsx)(m.i,{})]})}),Object(A.jsx)("td",{className:"px-2 py-2 cursor-pointer",onClick:function(){return e.setSort("occupied")},children:Object(A.jsxs)("div",{className:"flex items-center gap-1",children:["Room occupation ",Object(A.jsx)(m.i,{})]})})]})}),Object(A.jsx)("tbody",{children:null===this.state.reportMainData?Object(A.jsx)(_.a,{cols:7}):0===this.FC_FilterReportData(Object(C.d)(this.state.reportMainData),"all","all","all").length?Object(A.jsx)("tr",{children:Object(A.jsx)("td",{colSpan:7,className:"px-2 py-2",children:Object(A.jsxs)("div",{className:"flex flex-col text-gray-400 items-center justify-center bg-gray-100 rounded py-10",children:[Object(A.jsx)(h.c,{className:"text-8xl text-gray-400 mb-2 animate__animated animate__shakeX"}),Object(A.jsx)("span",{className:"text-sm font-bold",children:"No result found! Please try to search again"}),Object(A.jsx)("div",{className:"w-full mt-2 flex flex-row items-center justify-center",children:Object(A.jsx)("ul",{className:"text-sm py-2 text-blue-600 font-bold flex flex-row gap-2",children:Object(A.jsx)("li",{onClick:function(){return e.setSelectSession(!0)},className:"underline text-gray-500 cursor-pointer",children:"Filter by session"})})})]})})}):Object(R.l)(this.state.isSorted,this.searchData(this.FC_FilterReportData(Object(C.d)(this.state.reportMainData),"all","all","all"),this.state.searchInput),this.state.sortProperty,this.state.sortOrder).map((function(e,t){return Object(A.jsxs)("tr",{className:"".concat(t%2!==0?"bg-gray-100":"bg-white"," hover:bg-blue-100 hover:text-blue-700 border-b hover:border-blue-500 text-sm ").concat("Default"===e.room_type?"border-gray-500 text-gray-700 bg-gray-200":"text-gray-600 border-gray-300"),children:[Object(A.jsx)("td",{className:"px-2 py-2",children:t+1}),Object(A.jsx)("td",{className:"px-2 py-2",children:e.district_name}),Object(A.jsx)("td",{className:"px-2 py-2",children:e.center_name}),Object(A.jsx)("td",{className:"px-2 py-2",children:e.room_number}),Object(A.jsx)("td",{className:"px-2 py-2",children:Object(w.a)(e.room_type)}),Object(A.jsx)("td",{className:"px-2 py-2",children:e.capacity}),Object(A.jsx)("td",{className:"px-2 py-2",children:e.occupied})]},t+1)}))})]})]})]}),null!==this.state.generateReportModal&&!0===this.state.generateReportModal.status&&Object(A.jsx)(S.d,{title:Object(A.jsx)("div",{className:"flex flex-row gap-4 items-center",children:Object(A.jsxs)("div",{className:"flex flex-col",children:[Object(A.jsx)("span",{className:"font-bold text-2xl text-gray-500",children:"Generating Report contents"}),Object(A.jsxs)("span",{className:"text-sm text-blue-600 font-normal",children:["Generating ",this.state.generateReportModal.reportType," ","Report"]})]})}),backDrop:!0,theme:S.c.default,close:function(){return e.setGenerateReportModal(null)},backDropClose:!1,widthSizeClass:S.b.medium,displayClose:!0,padding:{title:!0},children:Object(A.jsxs)("div",{className:"px-6",children:[Object(A.jsxs)("div",{className:"my-2 text-base text-gray-700 sm:text-lg",children:[Object(A.jsxs)("div",{className:"flex flex-col",children:[Object(A.jsx)("label",{children:"Title"}),Object(A.jsx)("input",{type:"text",className:"text-left input-white w-20 inline-block ".concat(this.state.formError&&"report_title"===this.state.formError.element?"border-red-500":"border-gray-500"," border-2"),placeholder:"Sub Category Title",value:this.state.reportTitle,onChange:function(t){e.setFormError(null),e.setReportTitle(t.target.value)},disabled:!this.state.reportMainData}),this.state.formError&&"report_title"===this.state.formError.element&&Object(A.jsx)("span",{className:"text-red-500",children:this.state.formError.msg})]}),Object(A.jsxs)("div",{className:"flex flex-col mt-2",children:[Object(A.jsx)("label",{children:"Report content"}),Object(A.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 items-center gap-2 mt-2",children:this.state.reportContentExport.map((function(t,r){return Object(A.jsxs)("div",{className:"flex items-center gap-1 ".concat(e.isChangeAllowed(t.key)?"cursor-pointer":"cursor-not-allowed"),onClick:function(){return e.isChangeAllowed(t.key)&&e.updateReportContent(t.key)},title:e.isChangeAllowed(t.key)?"":"Required for every report!",children:[t.status?Object(A.jsx)(j.r,{className:"w-6 h-6 text-blue-700"}):Object(A.jsx)(j.s,{className:"w-6 h-6"}),Object(A.jsx)("span",{children:t.title})]},r)}))}),this.state.formError&&"report_content"===this.state.formError.element&&Object(A.jsx)("span",{className:"text-red-500",children:this.state.formError.msg})]})]}),Object(A.jsxs)("div",{className:"flex justify-between mb-2 mt-4",children:[Object(A.jsxs)("div",{className:"flex items-center gap-1 cursor-pointer",onClick:function(){return e.resetReportContent(e.state.selectAll)},children:[this.state.selectAll?Object(A.jsx)(j.r,{className:"w-6 h-6 text-blue-700"}):Object(A.jsx)(j.s,{className:"w-6 h-6"}),Object(A.jsx)("span",{children:"Select all"})]}),this.state.centerToPrint&&this.state.reportMainData&&Object(A.jsx)(T.a,{fileData:this.state.centerToPrint,fileName:this.state.reportTitle,btnName:"Generate"})]})]})}),this.state.selectSession&&Object(A.jsx)(S.d,{title:Object(A.jsxs)("div",{className:"flex flex-row gap-4 items-center",children:[Object(A.jsx)(j.P,{className:"text-5xl text-blue-600"}),Object(A.jsx)("span",{className:"flex flex-col",children:"Choose session"})]}),backDrop:!0,theme:S.c.default,close:function(){return null!==e.state.selectedSession&&e.setSelectSession(!1)},backDropClose:!0,widthSizeClass:S.b.extraLarge,displayClose:!0,padding:{title:!0},children:Object(A.jsx)("div",{className:"px-2 pb-2",children:null==this.props.sessionPlan.allSessionPlans?Object(A.jsx)(y.a,{}):0===this.props.sessionPlan.allSessionPlans.length?Object(A.jsxs)("div",{className:"flex flex-col text-gray-400 items-center justify-center",children:[Object(A.jsx)(j.Bb,{className:"text-6xl"}),Object(A.jsx)("div",{className:"flex flex-col items-center justify-center",children:Object(A.jsx)("span",{children:"No session found!"})})]}):this.props.sessionPlan.allSessionPlans.map((function(t,r){return Object(A.jsxs)("div",{onClick:function(){e.setSelectedSession(t),e.loadReportMainData(t),e.setSelectSession(!1)},className:"grid grid-cols-12 bg-blue-50 border border-blue-200 rounded px-2 py-2 cursor-pointer hover:bg-blue-100 hover:border-blue-500 mb-3",children:[Object(A.jsxs)("div",{className:"col-span-5",children:[Object(A.jsx)("div",{className:"text-blue-500 text-sm italic",children:"Session"}),Object(A.jsx)("div",{className:"font-bold",children:t.session_plan_name}),Object(A.jsx)("div",{className:"my-4"}),Object(A.jsx)("div",{className:"text-blue-500 text-sm italic",children:"Status"}),Object(A.jsx)("div",{className:"font-bold",children:!0===t.is_active?"Active":"Expired"})]}),Object(A.jsxs)("div",{className:"col-span-5",children:[Object(A.jsx)("div",{className:"text-blue-500 text-sm italic",children:"Period"}),Object(A.jsx)("div",{className:"font-bold",children:t.period})]}),Object(A.jsx)("div",{className:"col-span-2 flex items-center justify-end",children:Object(A.jsx)("div",{className:"btn bg-blue-600 text-white mr-2",children:"Choose"})})]},r+1)}))})})]})}}]),r}(b.Component),I=Object(f.b)((function(e){var t=e.auth;e.system_settings;return{auth:t,sessionPlan:e.sessionPlan}}),{GetAllSessionPlans:g.a,PushPopupAlert:O.ob})(k)}}]);
//# sourceMappingURL=35.917875d9.chunk.js.map