(this["webpackJsonpreact-redux-typescript-advance"]=this["webpackJsonpreact-redux-typescript-advance"]||[]).push([[42],{193:function(t,e,s){"use strict";var n=s(23),i=s(4),a=s(195),r=s(8),c=s(1);e.a=function(t){var e,s,o=t.rows,l=t.columns,d=t.hideColumns,u=void 0!==d&&d,h=t.pagination,p=void 0!==h&&h,b=t.search,f=void 0!==b&&b,m=t.tableSize,x=void 0===m?"w-full":m,j=t.tableClass,g=t.tableId,v=void 0===g?"myTable":g,O=t.rounded,_=void 0!==O&&O,y=t.searchBG,N=void 0===y?"bg-gray-200":y,S=t.thColor,w=void 0===S?"blue":S,E=t.loading,C=void 0!==E&&E;v="myTable"===v?function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,e="",s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=s.length,i=0;i<t;i++)e+=s.charAt(Math.floor(Math.random()*n));return e}():v;var T=Object(i.useState)(0),I=Object(n.a)(T,2),L=I[0],k=I[1],P=Object(i.useState)(1),R=Object(n.a)(P,2),A=R[0],D=R[1],q=Object(i.useState)(1),F=Object(n.a)(q,2),H=F[0],M=F[1],U=Object(i.useState)(),B=Object(n.a)(U,2),z=B[0],J=B[1],G=Object(i.useState)(10),V=Object(n.a)(G,2),Y=V[0],Q=V[1],W=Object(i.useState)(0),K=Object(n.a)(W,2),X=K[0],Z=K[1],$=Object(i.useState)(0),tt=Object(n.a)($,2),et=tt[0],st=tt[1];Object(i.useEffect)((function(){p&&nt()}));var nt=function(){e=document.getElementById(v),s=e.getElementsByTagName("tr"),k(s.length),D(Math.ceil(L/Y)),Z((H-1)*Y),st(Math.min(X+Y-1,L-1));var t=Array.from(Array(A+1-1).keys()).map((function(t){return 1+t}));z&&t.length===z.length||J(t);for(var n=0;n<s.length;n++)s[n].style.display=n>=X&&n<=et?"":"none"};return Object(c.jsxs)("div",{className:"".concat(x),children:[f&&Object(c.jsx)("div",{className:"".concat(N," w-full mb-2"),children:f&&Object(c.jsxs)("div",{className:"bg-white rounded flex items-center w-full p-2 border-2 border-gray-500",children:[Object(c.jsx)(r.Bb,{className:"h-5 w-5 fill-current text-gray-400"}),Object(c.jsx)("input",{type:"search",placeholder:"search",onChange:function(t){return function(t,s){var n,i,a,r,c;for("field"===s&&"all"===t&&(t=""),n=t.toLowerCase(),i=(e=document.getElementById(v)).getElementsByTagName("tr"),r=0;r<i.length;r++)for(c=0;c<l.length;c++)if(a=i[r].getElementsByTagName("td")[c]){if((a.textContent||a.innerText).toLowerCase().indexOf(n)>-1){i[r].style.display="";break}i[r].style.display="none"}}(t.target.value)},className:"w-full h-6 pl-4 text-sm outline-none focus:outline-none bg-white",disabled:C}),p&&Object(c.jsx)("div",{className:"select",children:Object(c.jsxs)("select",{className:"text-base outline-none focus:outline-none bg-white",onChange:function(t){return Q(Number(t.target.value))},disabled:C,children:[Object(c.jsx)("option",{value:"10",children:"10"}),Object(c.jsx)("option",{value:"25",children:"25"}),Object(c.jsx)("option",{value:"50",children:"50"}),Object(c.jsx)("option",{value:"100",children:"100"})]})})]})}),Object(c.jsxs)("table",{className:j||"w-full shadow ".concat(_&&"sm:rounded-lg"," table-auto order-table"),id:v,children:[!u&&Object(c.jsx)("thead",{className:"bg-white border-b-2 border-gray-300 text-gray-600 font-bold text-base",children:Object(c.jsx)("tr",{className:"text-left tracking-wide bg-".concat(w,"-100 border-b-2 border-").concat(w,"-500 text-").concat(w,"-600"),children:l.map((function(t,e){return Object(c.jsx)("th",{className:"".concat(t.padding," text-").concat(t.alignText," px-3 py-2 ").concat(t.isSortAllowed&&"cursor-pointer"),onClick:function(){return t.isSortAllowed&&function(t){var e,s,n,i,a,r,c,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"asc",d=0;if(n=!0,e=document.getElementById(t))for(;n;){for(n=!1,s=e.rows,i=1;i<s.length-1;i++)if(c=!1,a=s[i].getElementsByTagName("TD")[o],r=s[i+1].getElementsByTagName("TD")[o],"asc"===l&&a&&r){if(a.innerHTML.toLowerCase()>r.innerHTML.toLowerCase()){c=!0;break}}else if("desc"===l&&a&&r&&a.innerHTML.toLowerCase()<r.innerHTML.toLowerCase()){c=!0;break}c&&s[i].parentNode?(s[i].parentNode.insertBefore(s[i+1],s[i]),n=!0,d++):0===d&&"asc"===l&&(l="desc",n=!0)}}(v,e)},children:Object(c.jsxs)("div",{className:"flex items-center gap-1",children:[t.columnTitle,t.isSortAllowed&&Object(c.jsx)(a.i,{})]})},e)}))})}),Object(c.jsx)("tbody",{id:"table-data",className:"bg-white text-black text-base",children:o()})]}),p&&Object(c.jsxs)("div",{className:"sm:flex-1 sm:flex sm:items-center sm:justify-between mt-4 work-sans",children:[Object(c.jsx)("div",{children:Object(c.jsxs)("span",{className:"text-xs xs:text-sm text-gray-900",children:["Showing 1 to ",Y," of ",L-1," Entries"]})}),Object(c.jsx)("div",{children:Object(c.jsxs)("nav",{className:"inline-flex shadow-sm",children:[Object(c.jsx)("div",{children:Object(c.jsx)("button",{type:"button",className:"inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 text-sm font-medium text-gray-500 ".concat(1!==H&&"bg-white"),"aria-label":"Previous",disabled:1===H||C,onClick:function(){return M(H-1)},children:Object(c.jsx)(r.gb,{className:"h-5 w-5"})})}),Object(c.jsx)("div",{children:z&&z.map((function(t,e){return Object(c.jsx)("button",{className:"-ml-px inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium text-gray-700 ".concat(t!==H?"bg-white":"bg-gray-100 cursor-default"),disabled:t===H||C,onClick:function(){return M(t)},children:t},e)}))}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{type:"button",className:"inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 text-sm leading-5 font-medium text-gray-500 ".concat(H!==A&&"bg-white"),"aria-label":"Next",disabled:H===A||C,onClick:function(){return M(H+1)},children:Object(c.jsx)(r.hb,{className:"h-5 w-5"})})})]})})]})]})}},196:function(t,e,s){"use strict";s.d(e,"b",(function(){return b})),s.d(e,"a",(function(){return f})),s.d(e,"d",(function(){return m})),s.d(e,"c",(function(){return x}));var n=s(19),i=s(18),a=s(21),r=s(20),c=s(4),o=s.n(c),l=s(17),d=s(3),u=s(8),h=s(1),p=function(t){Object(a.a)(s,t);var e=Object(r.a)(s);function s(t){var i;return Object(n.a)(this,s),(i=e.call(this,t)).componentDidMount=function(){return i.props.PageHasSubNav(!0)},i.componentWillUnmount=function(){return i.props.PageHasSubNav(!1)},i.state={loading:!1},i}return Object(i.a)(s,[{key:"render",value:function(){if(!1===this.props.auth.isAuthenticated)return null;var t=this.props.system.navigation;return Object(h.jsx)("div",{className:"fixed w-48 p-1 pr-2 pl-6 text-gray-700 bg-white ".concat(!0===t?"lg:left-16  left-16":" -left-72 lg:left-16","  top-0 bottom-0 pt-20 z-30 shadow-lg  transition-all duration-500 ease-in-out overflow-y-auto"),children:this.props.children})}}]),s}(o.a.Component),b=Object(l.b)((function(t){return{auth:t.auth,system:t.system}}),{NavToogle:d.mb,PageHasSubNav:d.nb})(p),f=function(t){var e=t.title,s=void 0===e?"":e,n=t.icon,i=void 0===n?u.m:n,a=t.active,r=void 0!==a&&a,c=t.count,o=void 0===c?0:c,l=i;return Object(h.jsxs)("section",{className:"".concat(!0===r?"bg-blue-500 text-white font-bold":"bg-blue-100 text-blue-800"," mb-1 hover:font-bold py-1 hover:bg-blue-400 hover:text-white --font-bold  px-2 rounded-md flex cursor-pointer items-center"),children:[Object(h.jsxs)("section",{className:"flex-1",children:[Object(h.jsx)(l,{className:"inline-block mr-1 text-xs"}),Object(h.jsx)("span",{children:s})]}),o>0?Object(h.jsx)("span",{className:"px-0.5 my-1 text-xs bg-blue-600 text-white rounded-full",children:o}):null]})},m=function(t){var e=t.children;return Object(h.jsx)("div",{className:"ml-3 overflow-y-auto border-l-2 border-blue-200 -mt-1 pt-2 mb-2 pl-1 cursor-pointer",children:e})},x=function(t){var e=t.title,s=void 0===e?"":e,n=t.icon,i=void 0===n?u.m:n,a=t.active,r=void 0!==a&&a,c=t.count,o=void 0===c?0:c,l=i;return Object(h.jsxs)("div",{className:"animate__animated animate__zoomIn animate__faster ".concat(!0===r?"bg-blue-500 text-white font-bold":" text-blue-800"," text-blue-800 bg-blue-200 rounded-md px-1 mb-1 flex items-center py-1 font-bold"),children:[Object(h.jsx)(l,{className:"inline-block mr-0.1 text-xs ".concat(!0===r?"text-white":"")}),Object(h.jsx)("span",{className:"inline-block pl-1 ".concat(!0===r?"text-white":""),children:s}),o>=1?Object(h.jsx)("span",{className:"text-sm fint-bold ".concat(!0===r?"text-white":""),children:o}):null]})}},247:function(t,e,s){"use strict";s.d(e,"g",(function(){return u})),s.d(e,"a",(function(){return h})),s.d(e,"e",(function(){return p})),s.d(e,"c",(function(){return b})),s.d(e,"b",(function(){return f})),s.d(e,"f",(function(){return m})),s.d(e,"d",(function(){return x}));var n=s(5),i=s.n(n),a=s(7),r=s(9),c=s.n(r),o=s(6),l=s(10),d=s(13),u=function(t){return function(){var e=Object(a.a)(i.a.mark((function e(s){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(!0,""),e.prev=1,e.next=4,c.a.get("".concat(l.a.APPLICATION,"/roomlocation"));case 4:n=e.sent,s({type:o.a.GET_ALL_ROOM,payload:n.data}),t(!1,""),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.error("Err: ",e.t0),t(!1,Object(d.a)(e.t0));case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},h=function(t){return console.log({data:t}),function(){var e=Object(a.a)(i.a.mark((function e(s){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s({type:o.a.CREATE_CENTER,payload:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},p=function(t){return console.log({data:t}),function(){var e=Object(a.a)(i.a.mark((function e(s){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s({type:o.a.UPDATE_CENTER,payload:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},b=function(t){return function(){var e=Object(a.a)(i.a.mark((function e(s){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s({type:o.a.DELETE_CENTER,payload:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},f=function(t){return console.log({data:t}),function(){var e=Object(a.a)(i.a.mark((function e(s){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s({type:o.a.CREATE_ROOM,payload:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},m=function(t){return function(){var e=Object(a.a)(i.a.mark((function e(s){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s({type:o.a.UPDATE_ROOM,payload:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},x=function(t){return console.log({delete_room:t}),function(){var e=Object(a.a)(i.a.mark((function e(s){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s({type:o.a.DELETE_ROOM,payload:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},422:function(t,e,s){"use strict";s.d(e,"f",(function(){return u})),s.d(e,"a",(function(){return h})),s.d(e,"g",(function(){return p})),s.d(e,"c",(function(){return b})),s.d(e,"e",(function(){return f})),s.d(e,"b",(function(){return m})),s.d(e,"h",(function(){return x})),s.d(e,"d",(function(){return j}));var n=s(5),i=s.n(n),a=s(7),r=s(6),c=(s(191),s(12),s(9)),o=s.n(c),l=s(10),d=s(13),u=function(t){return function(){var e=Object(a.a)(i.a.mark((function e(s){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(!0,""),e.prev=1,e.next=4,o.a.get("".concat(l.a.APPLICATION,"/schools"));case 4:n=e.sent,s({type:r.a.GET_SCHOOLS,payload:n.data}),t(!1,""),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.log("Err: ",e.t0),t(!1,Object(d.a)(e.t0));case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},h=function(t){return console.log({schools:t}),function(){var e=Object(a.a)(i.a.mark((function e(s){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s({type:r.a.CREATE_SCHOOL,payload:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},p=function(t){return function(){var e=Object(a.a)(i.a.mark((function e(s){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s({type:r.a.UPDATE_SCHOOL,payload:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},b=function(t){return function(){var e=Object(a.a)(i.a.mark((function e(s){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s({type:r.a.DELETE_SCHOOL,payload:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},f=function(t,e){return function(){var s=Object(a.a)(i.a.mark((function s(n){var a;return i.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return e(!0,""),s.prev=1,s.next=4,o.a.get("".concat(l.a.PLACEMENT,"/requestpost/school/").concat(t));case 4:a=s.sent,console.log({schoolPosts:a.data}),n({type:r.a.FETCH_SCHOOL_POSTS,payload:a.data}),e(!1,""),s.next=14;break;case 10:s.prev=10,s.t0=s.catch(1),console.log("Err: ",s.t0),e(!1,Object(d.a)(s.t0));case 14:case"end":return s.stop()}}),s,null,[[1,10]])})));return function(t){return s.apply(this,arguments)}}()},m=function(t){return function(){var e=Object(a.a)(i.a.mark((function e(s){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s({type:r.a.CREATE_SCHOOL_POST,payload:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},x=function(t,e){return console.log({TYPE:t,data:e}),function(){var s=Object(a.a)(i.a.mark((function s(n){return i.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:n({type:r.a.UPDATE_SCHOOL_POST,payload:{TYPE:t,data:e}});case 1:case"end":return s.stop()}}),s)})));return function(t){return s.apply(this,arguments)}}()},j=function(t,e){return function(){var s=Object(a.a)(i.a.mark((function s(n){var a;return i.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return e(!0,""),s.prev=1,s.next=4,o.a.get("".concat(l.a.PLACEMENT,"/requestpost/district/").concat(t));case 4:a=s.sent,console.log({districtPosts:a}),n({type:r.a.FETCH_DISTRICT_POSTS,payload:a.data}),e(!1,""),s.next=14;break;case 10:s.prev=10,s.t0=s.catch(1),console.log("Err: ",s.t0),e(!1,Object(d.a)(s.t0));case 14:case"end":return s.stop()}}),s,null,[[1,10]])})));return function(t){return s.apply(this,arguments)}}()}},456:function(t,e,s){"use strict";s.r(e),s.d(e,"getSchoolById",(function(){return L})),s.d(e,"Schools",(function(){return P}));var n=s(11),i=s(5),a=s.n(i),r=s(7),c=s(19),o=s(18),l=s(21),d=s(20),u=s(9),h=s.n(u),p=s(4),b=s.n(p),f=s(82),m=s(195),x=s(50),j=s(8),g=s(17),v=s(3),O=s(247),_=s(422),y=s(33),N=s(196),S=s(193),w=s(25),E=s(191),C=s(10),T=s(13),I=s(1),L=function(t,e){return t.filter((function(t){return t._id===e}))[0]},k=function(t){Object(l.a)(s,t);var e=Object(d.a)(s);function s(t){var i;return Object(c.a)(this,s),(i=e.call(this,t)).setLoading=function(t){i.setState({loading:t})},i.setLoadingRequest=function(t){i.setState({loadingRequest:t})},i.setError=function(t){i.setState({error:t})},i.loadDistrict=Object(r.a)(a.a.mark((function t(){var e;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h.a.get("".concat(C.a.APPLICATION,"/district"));case 3:e=t.sent,i.setState({district:e.data}),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),console.error({code_error:t.t0}),i.props.PushPopupAlert({title:Object(T.a)(t.t0),theme:w.a.danger});case 11:case"end":return t.stop()}}),t,null,[[0,7]])}))),i.componentDidMount=function(){null!==i.props.education_categories&&0!==i.props.education_categories.length||i.props.loadEducationCategories(i.setLoading),i.props.allRoom.length||i.props.getAllRoom((function(t,e){!t&&e.length>0&&console.log(e)})),!i.props.schools.length&&i.state.loading&&i.props.getSchools((function(t,e){console.log(t,e),i.setLoading(t),e.length>0&&console.error({loadingCandidatesError:e})})),i.state.district.length||i.loadDistrict(),i.props.schools.length&&(i.setState({schoolList:i.props.schools}),i.setLoading(!1))},i.tableData=function(){return i.state.schoolList.length?i.state.schoolList.map((function(t,e){return Object(I.jsxs)("tr",{className:"border-b border-gray-200 hover:bg-gray-100",children:[Object(I.jsx)("td",{className:"p-3 text-left whitespace-nowrap",children:e+1}),Object(I.jsx)("td",{className:"p-3 text-left",children:t.school_name}),Object(I.jsx)("td",{className:"py-3 px-5 text-left",children:i.props.education_categories&&i.props.education_categories.filter((function(e){return e.education_institute_id===t.education_category_id})).length>0?i.props.education_categories.filter((function(e){return e.education_institute_id===t.education_category_id}))[0].education_category_title:"No Institute"}),Object(I.jsx)("td",{className:"py-3 px-5 text-left",children:i.state.district&&i.state.district.filter((function(e){return e.district_id===t.district_id})).length>0?i.state.district.filter((function(e){return e.district_id===t.district_id}))[0].district_name:"No district"}),Object(I.jsx)("td",{className:"px-3",children:Object(I.jsxs)("div",{className:"flex items-center gap-2 float-right",children:[Object(I.jsxs)("button",{className:"bg-blue-600 text-white font-bold py-1 px-2 flex items-center rounded focus:outline-none ".concat(i.state.loadingRequest?"cursor-not-allowed":null),title:"Edit School",disabled:i.state.loadingRequest,onClick:function(){i.setState({modalState:"UPDATE",thisSchool:t,schoolName:t.school_name,instituteId:t.education_category_id,districtId:t.district_id,provinceId:i.props.allRoom.find((function(e){return e.districts.find((function(e){return e.district_id===t.district_id}))}))?i.props.allRoom.find((function(e){return e.districts.find((function(e){return e.district_id===t.district_id}))})).province_id:""})},children:[Object(I.jsx)(j.eb,{className:"w-4 h-4"}),"Edit"]}),Object(I.jsxs)("button",{className:"bg-red-700 text-white font-bold py-1 px-2 flex items-center rounded focus:outline-none ".concat(i.state.loadingRequest?"cursor-not-allowed":null),title:"Delete",disabled:i.state.loadingRequest,onClick:function(){return i.handleDelete(t._id)},children:[Object(I.jsx)(j.eb,{className:"w-4 h-4"}),"Delete"]})]})})]},e+t._id)})):[Object(I.jsx)("tr",{className:"border-b border-gray-200 hover:bg-gray-100",children:Object(I.jsx)("td",{className:"p-3 text-center",colSpan:5,children:"No School Found"})},1)]},i.handleSubmit=function(){var t=Object(r.a)(a.a.mark((function t(e){var s;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.preventDefault(),i.state.schoolName.length){t.next=3;break}return t.abrupt("return",i.setError({element:"school_name",msg:"School name is required"}));case 3:if(i.state.instituteId.length){t.next=5;break}return t.abrupt("return",i.setError({element:"edication_id",msg:"Education Institute is required"}));case 5:if(i.state.districtId.length){t.next=7;break}return t.abrupt("return",i.setError({element:"districtId_id",msg:"District is required"}));case 7:if(i.setLoadingRequest(!0),t.prev=8,"CREATE"!==i.state.modalState){t.next=16;break}return t.next=12,h.a.post("".concat(C.a.APPLICATION,"/schools"),{school_name:i.state.schoolName,district_id:i.state.districtId,education_category_id:i.state.instituteId});case 12:(s=t.sent).data&&(console.log({res:s}),i.setState({schoolList:[].concat(Object(n.a)(i.state.schoolList),[{_id:s.data.data.shool_id,status:s.data.data.status,school_name:s.data.data.school_name,district_id:s.data.data.district_id,education_category_id:s.data.data.education_category_id}])}),i.props.createSchool({_id:s.data.data.shool_id,status:s.data.data.status,school_name:s.data.data.school_name,district_id:s.data.data.district_id,education_category_id:s.data.data.education_category_id}),i.props.PushPopupAlert({title:"New School created successfully",theme:w.a.success}),i.setLoadingRequest(!1),i.setState({schoolName:"",districtId:"",instituteId:"",provinceId:""})),t.next=21;break;case 16:if(!i.state.thisSchool||"UPDATE"!==i.state.modalState){t.next=21;break}return t.next=19,h.a.patch("".concat(C.a.APPLICATION,"/schools"),{school_id:i.state.thisSchool._id,school_name:i.state.schoolName,district_id:i.state.districtId,education_category_id:i.state.instituteId});case 19:(s=t.sent).data&&(console.log({res:s}),i.props.updateSchool({_id:i.state.thisSchool._id,status:!0,school_name:i.state.schoolName,district_id:i.state.districtId,education_category_id:i.state.instituteId}),i.props.PushPopupAlert({title:"School updated successfully",theme:w.a.success}),i.setLoadingRequest(!1),i.setState({schoolName:"",districtId:"",instituteId:"",provinceId:"",thisSchool:null,modalState:""}));case 21:t.next=28;break;case 23:t.prev=23,t.t0=t.catch(8),console.log({doc_category_error:t.t0}),i.props.PushPopupAlert({title:Object(T.a)(t.t0),theme:w.a.danger}),i.setLoadingRequest(!1);case 28:case"end":return t.stop()}}),t,null,[[8,23]])})));return function(e){return t.apply(this,arguments)}}(),i.handleDelete=function(){var t=Object(r.a)(a.a.mark((function t(e){var s;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.confirm("Are you sure do you want to delete this room?")){t.next=14;break}return i.setLoadingRequest(!0),t.prev=2,t.next=5,h.a.delete("".concat(C.a.APPLICATION,"/schools/").concat(e));case 5:(s=t.sent).data&&(console.log({res:s}),i.props.deleteSchool(e),i.props.PushPopupAlert({title:"School deleted successfully",theme:w.a.success})),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(2),console.log({province_error:t.t0}),i.props.PushPopupAlert({title:Object(T.a)(t.t0),theme:w.a.danger});case 13:i.setLoadingRequest(!1);case 14:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e){return t.apply(this,arguments)}}(),i.filterSchools=function(t,e){var s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=[];"INSTITUTE"===t&&(n=i.state.thisDistrict&&!s?"ALL"===e?i.props.schools.filter((function(t){return t.district_id===i.state.thisDistrict.district_id})):i.props.schools.filter((function(t){return t.education_category_id===e&&t.district_id===i.state.thisDistrict.district_id})):"ALL"===e?i.props.schools:i.props.schools.filter((function(t){return t.education_category_id===e}))),"DISTRICT"===t&&(n=i.state.thisEdication?"ALL"===e?i.props.schools.filter((function(t){return t.education_category_id===i.state.thisEdication.education_institute_id})):i.props.schools.filter((function(t){return t.district_id===e&&t.education_category_id===i.state.thisEdication.education_institute_id})):"ALL"===e?i.props.schools:i.props.schools.filter((function(t){return t.district_id===e}))),i.setState({schoolList:n})},i.countSchool=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"DEFAULT",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ALL",s=0;return"DEFAULT"===t?s=i.state.schoolList.length:"EDUCATION"===t?s=i.state.schoolList.filter((function(t){return t.education_category_id===e})).length:"DISTRICT"===t&&(s=i.state.schoolList.filter((function(t){return t.district_id===e})).length),Object(E.i)(s)},i.state={loading:!0,loadingRequest:!1,districtFilterStatus:!1,edicationCategoryFilterStatus:!1,provinceFilterStatus:!1,thisEdication:null,thisProvince:null,thisDistrict:null,district:[],schoolList:i.props.schools,modalState:"",error:null,schoolName:"",thisSchool:null,instituteId:"",provinceId:"",districtId:""},i}return Object(o.a)(s,[{key:"render",value:function(){var t=this;return!0===this.state.loading?Object(I.jsx)("div",{className:"text-center mt-7 font-bold text-4xl text-gray-400 animate-pulse",children:"Loading schools..."}):Object(I.jsxs)(b.a.Fragment,{children:[Object(I.jsx)(N.b,{children:this.state.loading?Object(I.jsxs)("section",{className:"animate-pulse",children:[Object(I.jsx)("div",{className:"bg-gray-400 font-bold mb-2 h-7 px-2 rounded-md cursor-wait"}),Object(I.jsx)("div",{className:"bg-gray-400 font-bold mb-2 h-7 px-2 rounded-md cursor-wait"}),Object(I.jsx)("div",{className:"bg-gray-400 font-bold mb-2 h-7 px-2 rounded-md cursor-wait"})]}):Object(I.jsxs)(b.a.Fragment,{children:[Object(I.jsx)("span",{className:"font-semibold text-lg text-gray-500",children:"Filter by Institute"}),Object(I.jsx)("section",{className:"mt-2 ".concat(this.state.loadingRequest&&"cursor-pointer"),onClick:function(){return!t.state.loadingRequest&&t.setState({edicationCategoryFilterStatus:!t.state.edicationCategoryFilterStatus})},children:Object(I.jsx)(N.a,{title:this.state.thisEdication?this.state.thisEdication.education_category_title:"Choose Education Institute",active:!(!this.state.edicationCategoryFilterStatus&&null===this.state.thisEdication)})}),this.state.edicationCategoryFilterStatus&&this.props.education_categories&&this.props.education_categories.length>0&&Object(I.jsx)(N.d,{children:this.props.education_categories&&this.props.education_categories.map((function(e,s){return Object(I.jsx)("section",{onClick:function(){return!t.state.loadingRequest&&(t.setState({thisEdication:e,edicationCategoryFilterStatus:!1}),t.filterSchools("INSTITUTE",e.education_institute_id))},children:Object(I.jsx)(N.c,{title:e.education_category_title,icon:j.V,active:!!t.state.thisEdication&&e.education_institute_id===t.state.thisEdication.education_institute_id})},e.education_institute_id+s)}))}),Object(I.jsxs)("section",{children:[Object(I.jsx)("span",{className:"font-semibold text-lg text-gray-500",children:"Filter by District"}),Object(I.jsx)("section",{className:"mt-2",onClick:function(){return!t.state.loadingRequest&&t.setState({provinceFilterStatus:!t.state.provinceFilterStatus,edicationCategoryFilterStatus:!1,districtFilterStatus:!1})},children:Object(I.jsx)(N.a,{title:this.state.thisProvince?this.state.thisProvince.province_name:"Choose Province",active:!(!this.state.provinceFilterStatus&&null===this.state.thisProvince)})})]}),this.state.provinceFilterStatus&&this.props.allRoom&&this.props.allRoom.length>0&&Object(I.jsx)(N.d,{children:this.props.allRoom&&this.props.allRoom.map((function(e,s){return Object(I.jsx)("section",{onClick:function(){return!t.state.loadingRequest&&(t.setState({provinceFilterStatus:!1,thisProvince:e,thisDistrict:null}),t.state.thisEdication&&t.filterSchools("INSTITUTE",t.state.thisEdication.education_institute_id,!0))},children:Object(I.jsx)(N.c,{title:e.province_name,icon:j.V,active:!!t.state.thisProvince&&e.province_id===t.state.thisProvince.province_id})},e.province_id+s)}))}),this.state.thisProvince&&Object(I.jsx)("section",{className:"mt-2",onClick:function(){return!t.state.loadingRequest&&t.setState({edicationCategoryFilterStatus:!1,provinceFilterStatus:!1,districtFilterStatus:!t.state.districtFilterStatus})},children:Object(I.jsx)(N.a,{title:this.state.thisDistrict?this.state.thisDistrict.district_name:"Choose District",active:!(!this.state.districtFilterStatus&&null===this.state.thisDistrict)})}),this.state.districtFilterStatus&&this.state.thisProvince&&this.state.thisProvince.districts.length>0&&Object(I.jsx)(N.d,{children:this.state.thisProvince&&this.state.thisProvince.districts.map((function(e,s){return Object(I.jsx)("section",{onClick:function(){return!t.state.loadingRequest&&(t.setState({thisDistrict:e,districtFilterStatus:!1}),t.filterSchools("DISTRICT",e.district_id))},children:Object(I.jsx)(N.c,{title:e.district_name,icon:j.V,active:!!t.state.thisDistrict&&e.district_id===t.state.thisDistrict.district_id})},e.district_id+s)}))})]})}),Object(I.jsxs)("div",{className:"w-full my-5 px-1",children:[Object(I.jsx)("div",{className:"flex items-start justify-between",children:Object(I.jsxs)("div",{className:"flex flex-row items-center",children:[Object(I.jsx)(m.b,{className:"text-blue-500 w-28 h-28"}),Object(I.jsxs)("div",{className:"flex flex-col",children:[Object(I.jsx)("h1",{className:"text-3xl font-semibold",children:"Schools Management"}),Object(I.jsxs)("div",{className:"flex flex-row items-center mx-2 md:gap-3 gap-2",children:[Object(I.jsxs)("div",{className:"flex flex-col mt-1",children:[Object(I.jsx)("span",{className:"text-gray-600 text-base",children:"All School(s)"}),Object(I.jsx)("span",{className:"text-gray-600 text-2xl font-bold",children:this.countSchool()})]}),this.props.education_categories&&this.props.education_categories.length>0&&this.props.education_categories.map((function(e,s){return Object(I.jsxs)("div",{className:"flex flex-col mt-1",children:[Object(I.jsx)("span",{className:"text-gray-600 text-base",children:e.education_category_title}),Object(I.jsx)("span",{className:"text-gray-600 text-2xl font-bold",children:t.countSchool("EDUCATION",e.education_institute_id)})]},s+e.education_institute_id)}))]})]})]})}),Object(I.jsxs)("div",{className:"md:w-98 bg-white mx-auto md:p-2",children:[Object(I.jsxs)("div",{className:"flex items-start justify-between",children:[Object(I.jsxs)("div",{children:[this.state.thisEdication&&Object(I.jsxs)("div",{className:"flex",children:[Object(I.jsxs)("div",{className:"flex items-center gap-1 mx-1",children:[Object(I.jsx)(j.J,{className:"text-gray-600"}),Object(I.jsx)("span",{className:"font-semibold text-gray-500",children:"Institute:"}),Object(I.jsx)("span",{className:"font-semibold text-blue-700",children:this.state.thisEdication.education_category_title})]}),Object(I.jsx)(x.b,{className:"cursor-pointer rounded-full hover:bg-red-500 hover:text-white",onClick:function(){return!t.state.loading&&(t.setState({thisEdication:null}),t.filterSchools("INSTITUTE","ALL"))},title:"Clean Education Institute filter"})]}),this.state.thisProvince&&Object(I.jsxs)("div",{className:"flex",children:[Object(I.jsxs)("div",{className:"flex items-center gap-1 mx-1",children:[Object(I.jsx)(j.J,{className:"text-gray-600"}),Object(I.jsx)("span",{className:"font-semibold text-gray-500",children:"Location:"}),Object(I.jsx)("span",{className:"font-semibold ".concat(this.state.thisDistrict?"text-black cursor-pointer":"text-blue-700"),children:this.state.thisProvince.province_name}),this.state.thisDistrict&&Object(I.jsxs)("div",{className:"flex items-center",children:[Object(I.jsx)(f.d,{}),Object(I.jsx)("span",{className:"text-blue-700 font-semibold",children:this.state.thisDistrict.district_name})]})]}),Object(I.jsx)(x.b,{className:"cursor-pointer rounded-full hover:bg-red-500 hover:text-white",onClick:function(){return!t.state.loading&&(t.setState({thisDistrict:null,thisProvince:null}),t.filterSchools("DISTRICT","ALL"))},title:"Clean location filter"})]})]}),Object(I.jsxs)("button",{type:"button",className:"btn btn-blue flex my-1",onClick:function(){return t.setState({modalState:"CREATE"})},disabled:this.state.loadingRequest,children:[Object(I.jsx)(j.zb,{className:"h-6 w-6"}),Object(I.jsx)("span",{className:"ml-2",children:"Add School"})]})]}),Object(I.jsx)(S.a,{columns:[{columnTitle:"#",alignText:"left",padding:"p-3"},{columnTitle:"School",alignText:"left",padding:"p-3"},{columnTitle:"Institute",alignText:"left",padding:"p-3"},{columnTitle:"District",alignText:"left",padding:"p-3"},{columnTitle:"",alignText:"left",padding:"p-3"}],rows:this.tableData,pagination:!0,search:!0,thColor:"gray"})]})]}),this.state.modalState&&Object(I.jsx)(y.d,{backDrop:!0,theme:y.c.default,close:function(){return t.setState({modalState:"",thisSchool:null,schoolName:"",instituteId:"",districtId:"",provinceId:""})},displayClose:!0,backDropClose:!1,title:Object(I.jsxs)("div",{className:"text-gray-600 font-bold text-3xl md:ml-4 inline-flex items-center gap-2",children:[Object(I.jsx)(m.b,{className:"w-11 h-11 text-gray-500 hover:bg-gray-500 hover:text-gray-50 rounded-full p-0 foucs:outline-none"}),"CREATE"===this.state.modalState?"CREATE ":"UPDATE "," ","SCHOOL"]}),widthSizeClass:y.b.medium,padding:{title:!0,body:!1,footer:!1},children:Object(I.jsx)("div",{className:"mx-8 mb-8",children:Object(I.jsxs)("form",{onSubmit:function(e){return t.handleSubmit(e)},children:[Object(I.jsxs)("div",{className:"py-4 text-base leading-6 space-y-4 text-gray-700 sm:text-lg sm:leading-7",children:[Object(I.jsxs)("div",{className:"flex flex-col",children:[Object(I.jsx)("label",{children:"School name"}),Object(I.jsx)("input",{type:"text",className:"text-left input-white w-20 inline-block border-2 ".concat(this.state.error&&"school_name"===this.state.error.element?"border-red-700":"border-gray-500"),placeholder:"School name",value:this.state.schoolName,onChange:function(e){t.setError(null),t.setState({schoolName:e.target.value})},disabled:this.state.loadingRequest}),this.state.error&&"school_name"===this.state.error.element&&Object(I.jsx)("span",{className:"text-red-700",children:this.state.error.msg})]}),Object(I.jsxs)("div",{className:"flex flex-col",children:[Object(I.jsx)("label",{children:"Institutes"}),Object(I.jsxs)("select",{className:"text-left input-white w-full block border-2 py-3 px-4 pr-8 ".concat(this.state.error&&"edication_id"===this.state.error.element?"border-red-700":"border-gray-500"),value:this.state.instituteId,onChange:function(e){return t.setState({instituteId:e.target.value})},disabled:this.state.loadingRequest,children:[Object(I.jsx)("option",{value:"",disabled:!0,children:"Choose Institute"}),this.props.education_categories&&this.props.education_categories.map((function(t,e){return Object(I.jsx)("option",{value:t.education_institute_id,children:t.education_category_title},e+t.education_institute_id)}))]}),this.state.error&&"edication_id"===this.state.error.element&&Object(I.jsx)("span",{className:"text-red-700",children:this.state.error.msg})]}),Object(I.jsxs)("div",{className:"flex flex-col",children:[Object(I.jsx)("label",{children:"Province"}),Object(I.jsxs)("select",{className:"text-left input-white w-20 inline-block border-2 border-gray-500",value:this.state.provinceId,onChange:function(e){return t.setState({provinceId:e.target.value})},disabled:this.state.loadingRequest,children:[Object(I.jsx)("option",{value:"",disabled:!0,children:"Choose province"}),this.props.allRoom&&this.props.allRoom.map((function(t,e){return Object(I.jsx)("option",{value:t.province_id,children:t.province_name},e+t.province_id)}))]})]}),this.state.provinceId&&Object(I.jsxs)("div",{className:"flex flex-col",children:[Object(I.jsx)("label",{children:"District"}),Object(I.jsxs)("select",{className:"text-left input-white w-20 inline-block border-2 ".concat(this.state.error&&"districtId_id"===this.state.error.element?"border-red-700":"border-gray-500"),value:this.state.districtId,onChange:function(e){return t.setState({districtId:e.target.value})},disabled:this.state.loadingRequest,children:[Object(I.jsx)("option",{value:"",disabled:!0,children:"Choose district"}),this.props.allRoom&&this.props.allRoom.filter((function(e){return e.province_id===t.state.provinceId}))[0].districts.length>0?this.props.allRoom.filter((function(e){return e.province_id===t.state.provinceId}))[0].districts.map((function(t,e){return Object(I.jsx)("option",{value:t.district_id,children:t.district_name},e+t.district_id)})):Object(I.jsx)("option",{disabled:!0,children:"No District Found"},702)]}),this.state.error&&"districtId_id"===this.state.error.element&&Object(I.jsx)("span",{className:"text-red-700",children:this.state.error.msg})]})]}),Object(I.jsxs)("div",{className:"pt-4 flex justify-between",children:[Object(I.jsx)("button",{onClick:function(){return t.setState({modalState:"",thisSchool:null,schoolName:"",instituteId:"",districtId:"",provinceId:""})},className:"btn bg-gray-400 text-white hover:bg-gray-600 focus:outline-none",type:"button",disabled:this.state.loadingRequest,children:"Exit"}),Object(I.jsx)("button",{className:"btn bg-primary text-white hover:bg-blue-600 focus:outline-none ".concat(this.state.loadingRequest?"animate-pulse":null),type:"submit",disabled:this.state.loadingRequest,children:this.state.loadingRequest?"Loading...":"Save"})]})]})})})]})}}]),s}(p.Component),P=Object(g.b)((function(t){var e=t.auth,s=t.schools,n=t.schoolLevels,i=t.locations;return{auth:e,schools:s.schools,education_categories:n.education_categories,allRoom:i.roomLocation}}),{createSchool:_.a,getSchools:_.f,updateSchool:_.g,getAllRoom:O.g,deleteSchool:_.c,loadEducationCategories:v.Qb,PushPopupAlert:v.ob})(k)}}]);
//# sourceMappingURL=42.8d60e868.chunk.js.map