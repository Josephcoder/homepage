(this["webpackJsonpreact-redux-typescript-advance"]=this["webpackJsonpreact-redux-typescript-advance"]||[]).push([[58],{341:function(e,t,s){"use strict";t.a=s.p+"static/media/profile.a9136072.png"},342:function(e,t,s){"use strict";var a=s(5),i=s.n(a),r=s(7),l=s(21),c=s(20),n=s(23),o=s(22),d=s(8),m=s.n(d),b=s(4),h=s(17),p=s(3),u=s(88),j=s(204),g=s(201),x=s(254),_=s(212),v=s(304),y=s(305),O=s(306),f=s(274),N=s(16),C=s(26),w=s(29),F=s(197),S=s(9),T=s(13),P=s(12),k=s(1),A=function(e){Object(n.a)(s,e);var t=Object(o.a)(s);function s(e){var a;return Object(l.a)(this,s),(a=t.call(this,e)).isDocumentIdValid=function(e,t){var s=e.find((function(e){return e.doc_id===t}));return s?"rejected"!==s.validated_by.validation_status?{status:!1,msg:"Only rejected document are allowed for claim",alert:w.a.info}:a.props.claiming.myClaims&&a.state.activeSession&&Object(_.c)(a.props.claiming.myClaims,a.state.activeSession.session_plan_id,t)?{status:!1,msg:"This document already in claiming list!",alert:w.a.info}:{status:!0,msg:"",alert:w.a.success}:{status:!1,msg:"Invalid document id",alert:w.a.warning}},a.isApplicationIdValid=function(e,t){var s=e.find((function(e){return e.application_id===t}));return console.log("===================================="),console.log({app:s,app_id:t}),console.log("===================================="),s?s.application_status!==C.a.Rejected?{status:!1,msg:"Only rejected application are allowed for claim",alert:w.a.info}:a.props.claiming.myClaims&&a.state.activeSession&&Object(_.c)(a.props.claiming.myClaims,a.state.activeSession.session_plan_id,s.application_id)?{status:!1,msg:"This application already in claiming list!",alert:w.a.info}:{status:!0,msg:"",alert:w.a.info}:{status:!1,msg:"Invalid application id",alert:w.a.warning}},a.setLoading=function(e){a.setState({loading:e})},a.setLoadingForm=function(e){a.setState({loadingForm:e})},a.setFormError=function(e){a.setState({formError:e})},a.setAlertError=function(e){a.setState({alertError:e})},a.setClaimFileId=function(e){a.setState({claimFileId:e})},a.setViewThisFile=function(e){a.setState({viewThisFile:e})},a.setChooseClaimFile=function(e){a.setState({chooseClaimFile:e})},a.setClaimComment=function(e){a.setState({claimComment:e})},a.isClaimTypeOpen=function(e,t){var s;if(t===N.g.APPLICATION){if((s=e.plans.find((function(e){return e.type_key===N.g.APPLICATION})))&&"OPEN"===Object(f.b)(e,s))return!0}else if(t===N.g.DOCUMENT_VALIDATION){if((s=e.plans.find((function(e){return e.type_key===N.g.DOCUMENT_VALIDATION})))&&"OPEN"===Object(f.b)(e,s))return!0}else if(t===N.g.PLACEMENT_TRANSFER&&(s=e.plans.find((function(e){return e.type_key===N.g.PLACEMENT_TRANSFER})))&&"OPEN"===Object(f.b)(e,s))return!0;return!1},a.isClaimBtnValid=function(e){(a.props.file_id||a.props.claim_type)&&(a.props.claim_type?a.props.file_id?a.isClaimTypeOpen(e,a.props.claim_type)||(a.props.PushPopupAlert({title:"Claim type is closed!",theme:w.a.warning}),a.props.setFormState(!1),a.setState({claimFileId:"",thisClaimType:null,thisClaimTypeId:"",claimComment:"",chooseClaimFile:!1,formType:"DEFAULT",viewThisFile:"",formError:null})):(a.props.PushPopupAlert({title:"Claim file is required!",theme:w.a.warning}),a.props.setFormState(!1),a.setState({claimFileId:"",thisClaimType:null,thisClaimTypeId:"",claimComment:"",chooseClaimFile:!1,formType:"DEFAULT",viewThisFile:"",formError:null})):(a.props.PushPopupAlert({title:"Claim type is required!",theme:w.a.warning}),a.props.setFormState(!1),a.setState({claimFileId:"",thisClaimType:null,thisClaimTypeId:"",claimComment:"",chooseClaimFile:!1,formType:"DEFAULT",viewThisFile:"",formError:null})))},a.displayClaimType=function(e){var t="";switch(e){case N.g.APPLICATION:t="application";break;case N.g.DOCUMENT_VALIDATION:t="document";break;case N.g.EXAMINATION:t="exam";break;case N.g.MARKS_PUBLICATION:t="marks publication";break;case N.g.PLACEMENT_TRANSFER:t="placement";break;default:t=""}return t},a.isClaimsAllowed=function(e){if(null===a.props.claiming.myClaims&&a.props.file_id&&a.props.claim_type)a.props.getMyClaims(a.props.auth.user.user_id,e.session_plan_id,(function(t,s,i){if(a.setLoading(t),!t&&s.length&&a.props.PushPopupAlert({title:s,theme:w.a.danger}),i){var r=i.find((function(t){return t.claiming_on_id===a.props.file_id&&t.period_id===e.session_plan_id}));if(r)return a.setState({found_claim:r}),{status:!0,msg:"You have already claimed on this ".concat(a.displayClaimType(a.props.claim_type)),alert:w.a.info}}}));else if(a.props.claiming.myClaims&&a.props.file_id&&a.props.claim_type){var t=a.props.claiming.myClaims.find((function(t){return t.claiming_on_id===a.props.file_id&&t.period_id===e.session_plan_id}));if(t)return a.setState({found_claim:t}),{status:!0,msg:"You have already claimed on this ".concat(a.displayClaimType(a.props.claim_type)),alert:w.a.info}}return{status:!0,msg:"",alert:w.a.success}},a.componentDidMount=function(){if(null===a.props.sessionPlan.activeSessionPlan||"none"===a.props.sessionPlan.activeSessionPlan)a.props.getActiveSessionPlan((function(e,t,s){if(a.setLoading(e),!e&&t.length&&a.props.PushPopupAlert({title:t,theme:w.a.danger}),s&&"none"===s)a.props.PushPopupAlert({title:"No session active session",theme:w.a.danger}),a.props.setFormState(!1),a.setState({claimFileId:"",thisClaimType:null,thisClaimTypeId:"",claimComment:"",chooseClaimFile:!1,formType:"DEFAULT",viewThisFile:"",formError:null});else if(s){var i=a.isClaimsAllowed(s);i.status||a.props.PushPopupAlert({title:i.msg,theme:i.alert}),a.setState({activeSession:s}),a.isClaimBtnValid(s)}}));else{a.setState({activeSession:a.props.sessionPlan.activeSessionPlan}),a.isClaimBtnValid(a.props.sessionPlan.activeSessionPlan);var e=a.isClaimsAllowed(a.props.sessionPlan.activeSessionPlan);e.status||(a.props.PushPopupAlert({title:e.msg,theme:e.alert}),a.props.setFormState(!1)),a.setLoading(!1)}if(null===a.props.documentReducer.documentCategory&&a.props.getDocumentCategory(),null===a.props.documentReducer.documentSubCategory&&a.props.getDocumentSubCategory(),null===a.props.documentReducer.documentFields&&a.props.getDocumentFields(),null===a.props.claiming.candidateApplications&&a.props.getMyRejectedApplications(a.props.auth.user.user_id,(function(e,t,s){if(a.setLoading(e),!e&&(t.length>0&&a.props.PushPopupAlert({title:t,theme:w.a.danger}),s&&a.props.claim_type&&a.props.file_id&&"DEFAULT"===a.state.formType&&a.props.claim_type===N.g.APPLICATION)){var i=a.isApplicationIdValid(s,a.props.file_id);i.status?a.setState({thisClaimType:a.props.claim_type,claimFileId:a.props.file_id,formType:"PROPS"}):(a.props.PushPopupAlert({title:i.msg,theme:i.alert}),a.props.setFormState(!1))}})),null===a.props.claiming.candidateDocuments&&a.props.getMyRejectedDocuments((function(e,t,s){if(a.setLoading(e),!e&&(t.length>0&&a.props.PushPopupAlert({title:t,theme:w.a.danger}),s&&a.props.claim_type&&a.props.file_id&&"DEFAULT"===a.state.formType&&a.props.claim_type===N.g.DOCUMENT_VALIDATION)){var i=a.isDocumentIdValid(s,a.props.file_id);i.status?a.setState({thisClaimType:a.props.claim_type,claimFileId:a.props.file_id,formType:"PROPS"}):(a.props.PushPopupAlert({title:i.msg,theme:i.alert}),a.props.setFormState(!1))}})),a.props.claim_type&&a.props.file_id&&"DEFAULT"===a.state.formType){if(a.setState({thisClaimType:a.props.claim_type}),a.props.claim_type===N.g.DOCUMENT_VALIDATION&&a.props.claiming.candidateDocuments){var t=a.isDocumentIdValid(a.props.claiming.candidateDocuments,a.props.file_id);t.status?a.setState({thisClaimType:a.props.claim_type,claimFileId:a.props.file_id,formType:"PROPS"}):(a.props.PushPopupAlert({title:t.msg,theme:t.alert}),a.props.setFormState(!1))}if(a.props.claim_type===N.g.APPLICATION&&a.props.claiming.candidateApplications){var s=a.isApplicationIdValid(a.props.claiming.candidateApplications,a.props.file_id);s.status?a.setState({thisClaimType:a.props.claim_type,claimFileId:a.props.file_id,formType:"PROPS"}):(a.props.PushPopupAlert({title:s.msg,theme:s.alert}),a.props.setFormState(!1))}}},a.getDocumentById=function(e,t){return e.filter((function(e){return e.doc_id===t}))[0]},a.getApplicationById=function(e,t){return e.filter((function(e){return e.application_id===t}))[0]},a.getValidation=function(e){var t={old_reason:"",old_status:"",old_evaluated_by:""};return a.state.thisClaimType===N.g.DOCUMENT_VALIDATION&&a.props.claiming.candidateDocuments?t={old_reason:a.getDocumentById(a.props.claiming.candidateDocuments,e).validated_by.comment,old_status:a.getDocumentById(a.props.claiming.candidateDocuments,e).validated_by.validation_status,old_evaluated_by:a.getDocumentById(a.props.claiming.candidateDocuments,e).validated_by.user_id}:a.state.thisClaimType===N.g.APPLICATION&&a.props.claiming.candidateApplications&&(t={old_reason:a.getApplicationById(a.props.claiming.candidateApplications,e).override_by.comment,old_status:a.getApplicationById(a.props.claiming.candidateApplications,e).override_by.application_status,old_evaluated_by:a.getApplicationById(a.props.claiming.candidateApplications,e).override_by.user_id}),t},a.cleanToClose=function(){a.props.setFormState(!1),a.setState({claimFileId:"",thisClaimType:null,thisClaimTypeId:"",claimComment:"",chooseClaimFile:!1,formType:"DEFAULT",viewThisFile:"",formError:null})},a.handleSubmit=function(){var e=Object(r.a)(i.a.mark((function e(t){var s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a.state.thisClaimType){e.next=3;break}return e.abrupt("return",a.setFormError({element:"claim_type",msg:"Claim type is required!"}));case 3:if(!Object(F.f)(a.state.claimFileId)){e.next=5;break}return e.abrupt("return",a.setFormError({element:"claim_file",msg:"Please select ".concat(a.state.thisClaimType.toLocaleLowerCase()," you are claiming on!")}));case 5:if(!Object(F.f)(a.state.claimComment)){e.next=7;break}return e.abrupt("return",a.setFormError({element:"claim_comment",msg:"Claim comment is required!"}));case 7:if(a.state.activeSession){e.next=9;break}return e.abrupt("return",a.setAlertError("No active claiming session is available!"));case 9:return a.setLoadingForm(!0),e.prev=10,Object(T.b)(),e.next=14,m.a.post("".concat(S.a.CLAIMING,"/user/create"),{claiming_on_id:a.state.claimFileId,type_key:a.state.thisClaimType,user:a.props.auth.user.user_id,period_id:a.state.activeSession.session_plan_id,reason:a.state.claimComment,old_reason:a.getValidation(a.state.claimFileId).old_reason,old_status:a.getValidation(a.state.claimFileId).old_status,old_evaluated_by:a.getValidation(a.state.claimFileId).old_evaluated_by});case 14:s=e.sent,console.log({createClaim:s.data}),201!==s.status&&200!==s.status||(a.props.createClaim(s.data),a.props.PushPopupAlert({title:"Claim sent successful",theme:w.a.success}),a.cleanToClose(),a.props.setFormState(!1)),e.next=23;break;case 19:e.prev=19,e.t0=e.catch(10),console.error({error:e.t0}),a.props.PushPopupAlert({title:Object(P.a)(e.t0),theme:w.a.danger});case 23:a.props.setFormState(!1),a.setLoadingForm(!1);case 25:case"end":return e.stop()}}),e,null,[[10,19]])})));return function(t){return e.apply(this,arguments)}}(),a.selectClaimType=function(e){a.setState({thisClaimType:Object(F.f)(e)?null:e})},a.generateChooseFileTitle=function(e){var t="";switch(e){case N.g.APPLICATION:t="Select application you are claiming on?";break;case N.g.DOCUMENT_VALIDATION:t="Select document you are claiming on?";break;case N.g.EXAMINATION:t="Select exam you are claiming on?";break;case N.g.MARKS_PUBLICATION:t="Select marks publication you are claiming on?";break;case N.g.PLACEMENT_TRANSFER:t="Select placement you are claiming on?";break;default:t="Select file you are claiming on?"}return t},a.state={loading:!0,loadingForm:!1,formError:null,thisClaimType:null,thisClaimTypeId:"",claimComment:"",claimFileId:"",chooseClaimFile:!1,viewThisFile:"",formType:"DEFAULT",alertError:null,activeSession:null,found_claim:null},a}return Object(c.a)(s,[{key:"render",value:function(){var e=this;return null!==this.state.found_claim?Object(k.jsxs)("div",{children:[Object(k.jsxs)("h2",{className:"text-center text-2xl font-bold p-3 text-gray-500",children:["Claims on this ",this.displayClaimType(this.props.claim_type)]}),this.state.found_claim.claims.length>=1?Object(k.jsx)("div",{children:this.state.found_claim.claims.map((function(e){return Object(k.jsxs)("div",{className:"p-2 border rounded mb-2",children:[Object(k.jsxs)("div",{className:"p-1 border-b",children:[Object(k.jsx)("span",{className:"text-gray-400",children:"Created date:"})," ",Object(k.jsx)("b",{children:e.date_created})]}),Object(k.jsxs)("div",{className:"p-1 border-b",children:[Object(k.jsx)("span",{className:"text-gray-400",children:"Reason:"})," ",Object(k.jsx)("p",{children:e.reason})]}),Object(k.jsxs)("div",{className:"p-1 border-b",children:[Object(k.jsx)("span",{className:"text-gray-400",children:"Evaluation comment:"})," ",Object(k.jsx)("p",{children:e.evaluation_comment})]}),Object(k.jsxs)("div",{className:"p-1",children:[Object(k.jsx)("span",{className:"text-gray-400 block",children:"decision:"})," ",Object(k.jsx)("h3",{className:"text-xl font-bold",children:e.decision_taken_status})]})]})}))}):Object(k.jsx)("div",{children:"No claims found!"})]}):this.state.loading||null===this.state.activeSession||null===this.props.claiming.myClaims&&this.props.file_id&&this.props.claim_type?null:Object(k.jsxs)("div",{className:"pb-3",children:[this.state.viewThisFile.length<=0&&Object(k.jsx)("form",{onSubmit:function(t){return e.handleSubmit(t)},children:Object(k.jsxs)("div",{className:"px-6 pb-3",children:[this.state.alertError&&Object(k.jsx)("div",{className:"alert-warning cursor-pointer",onClick:function(){return e.setAlertError(null)},children:this.state.alertError}),Object(k.jsxs)("div",{className:"text-base text-gray-700 sm:text-lg",children:[Object(k.jsxs)("div",{className:"flex flex-col mb-2",children:[Object(k.jsx)("label",{children:"Claim type"}),Object(k.jsxs)("select",{className:"rounded px-2 py-2 w-full bg-white focus:outline-none ".concat("PROPS"===this.state.formType&&"cursor-not-allowed"," ").concat(this.state.formError&&"claim_type"===this.state.formError.element?"border-red-500":"border-gray-500"," border-2"),onChange:function(t){e.selectClaimType(t.target.value),e.setClaimFileId(""),e.state.formError&&"claim_type"===e.state.formError.element&&e.setFormError(null)},value:this.state.thisClaimType?this.state.thisClaimType:"",disabled:this.state.loadingForm||"PROPS"===this.state.formType,children:[Object(k.jsx)("option",{value:"",children:"Choose claim type"}),Object.values(N.g).map((function(e,t){return Object(k.jsx)("option",{value:e,children:Object(F.a)(e.toLocaleLowerCase().replace(/_/g," "))},t+e)}))]}),this.state.formError&&"claim_type"===this.state.formError.element&&Object(k.jsx)("span",{className:"text-red-500",children:this.state.formError.msg})]}),Object(k.jsxs)("div",{className:"flex flex-col mb-2",children:[Object(k.jsx)("label",{children:this.generateChooseFileTitle(this.state.thisClaimType)}),Object(k.jsxs)("div",{className:"text-left bg-white border-2 ".concat("PROPS"!==this.state.formType?"border-gray-700":"border-gray-400 text-gray-500"," rounded w-full ").concat(this.state.chooseClaimFile?"h-64":"h-10"," ").concat(this.state.formError&&"claim_file"===this.state.formError.element?"border-red-500":""," border-2 ").concat(this.state.thisClaimType&&!this.state.chooseClaimFile&&"PROPS"!==this.state.formType?"cursor-pointer":!this.state.chooseClaimFile&&"cursor-not-allowed"),title:this.state.thisClaimType?"":"Choose claim type first!",onClick:function(){"DEFAULT"===e.state.formType&&e.state.thisClaimType&&!e.state.chooseClaimFile&&e.setChooseClaimFile(!0),e.state.formError&&"claim_file"===e.state.formError.element&&e.setFormError(null)},children:[this.state.claimFileId.length>0&&!this.state.chooseClaimFile?Object(k.jsxs)("p",{className:"my-1 mx-2",children:[this.state.thisClaimType===N.g.DOCUMENT_VALIDATION&&this.props.claiming.candidateDocuments&&Object(_.a)(this.props.documentReducer,this.getDocumentById(this.props.claiming.candidateDocuments,this.state.claimFileId)).main,this.state.thisClaimType===N.g.APPLICATION&&this.props.claiming.candidateApplications&&this.getApplicationById(this.props.claiming.candidateApplications,this.state.claimFileId).position.position_title]}):!this.state.chooseClaimFile&&Object(k.jsxs)("p",{className:"my-1 mx-2",children:["Select Claim"," ",this.state.thisClaimType&&this.state.thisClaimType.toLocaleLowerCase().replace(/_/g," ")]}),this.state.chooseClaimFile&&this.state.thisClaimType===N.g.DOCUMENT_VALIDATION&&this.props.claiming.candidateDocuments&&this.props.claiming.myClaims&&this.props.sessionPlan.activeSessionPlan&&"none"!==this.props.sessionPlan.activeSessionPlan&&Object(k.jsx)(O.a,{setChooseClaimFile:this.setChooseClaimFile,setClaimFileId:this.setClaimFileId,setViewThisFile:this.setViewThisFile,viewThisFile:this.state.viewThisFile,candidateDocuments:this.props.claiming.candidateDocuments,documentCategories:this.props.documentReducer,myClaims:this.props.claiming.myClaims,activeSession:this.props.sessionPlan.activeSessionPlan}),this.state.chooseClaimFile&&this.state.thisClaimType===N.g.APPLICATION&&this.props.claiming.candidateApplications&&this.props.claiming.myClaims&&this.props.sessionPlan.activeSessionPlan&&"none"!==this.props.sessionPlan.activeSessionPlan&&Object(k.jsx)(y.a,{setChooseClaimFile:this.setChooseClaimFile,setClaimFileId:this.setClaimFileId,setViewThisFile:this.setViewThisFile,viewThisFile:this.state.viewThisFile,candidateApplications:this.props.claiming.candidateApplications,myClaims:this.props.claiming.myClaims,activeSession:this.props.sessionPlan.activeSessionPlan})]}),this.state.formError&&"claim_file"===this.state.formError.element&&Object(k.jsx)("span",{className:"text-red-500",children:this.state.formError.msg})]}),Object(k.jsxs)("div",{className:"flex flex-col",children:[Object(k.jsx)("label",{children:"Comment"}),Object(k.jsx)("textarea",{className:"text-left input-white w-20 inline-block ".concat(this.state.formError&&"claim_comment"===this.state.formError.element?"border-red-500":"border-gray-500"," border-2"),placeholder:"Claim comment",style:{resize:"none"},value:this.state.claimComment,onChange:function(t){e.setClaimComment(t.target.value),e.state.formError&&"claim_comment"===e.state.formError.element&&e.setFormError(null)},rows:3,disabled:this.state.loadingForm}),this.state.formError&&"claim_comment"===this.state.formError.element&&Object(k.jsx)("span",{className:"text-red-500",children:this.state.formError.msg})]})]}),Object(k.jsxs)("div",{className:"pt-3 flex justify-between",children:[Object(k.jsx)("button",{onClick:function(){return e.cleanToClose()},className:"btn bg-gray-400 text-white hover:bg-gray-600 focus:outline-none ".concat(this.state.loadingForm&&"cursor-not-allowed"),type:"button",disabled:this.state.loadingForm,children:"Exit"}),Object(k.jsx)("button",{className:"btn bg-primary text-white hover:bg-blue-600 focus:outline-none ".concat(this.state.loadingForm&&"cursor-wait"),type:"submit",disabled:this.state.loadingForm,children:this.state.loadingForm?"Loading...":"Claim"})]})]})}),this.state.viewThisFile.length>0&&this.props.claiming.candidateDocuments&&this.state.thisClaimType===N.g.DOCUMENT_VALIDATION&&Object(k.jsx)(v.a,{thisDoc:this.getDocumentById(this.props.claiming.candidateDocuments,this.state.viewThisFile),setViewThisFile:this.setViewThisFile,documentCategories:this.props.documentReducer,setChooseClaimFile:this.setChooseClaimFile,setClaimFileId:this.setClaimFileId}),this.state.viewThisFile.length>0&&this.props.claiming.candidateApplications&&this.state.thisClaimType===N.g.APPLICATION&&Object(k.jsx)(x.b,{thisApplication:this.getApplicationById(this.props.claiming.candidateApplications,this.state.viewThisFile),documentCategories:this.props.documentReducer,setChooseClaimFile:this.setChooseClaimFile,setClaimFileId:this.setClaimFileId,setViewThisFile:this.setViewThisFile})]})}}]),s}(b.Component);t.a=Object(h.b)((function(e){var t=e.auth,s=e.document,a=e.claiming;return{auth:t,sessionPlan:e.sessionPlan,documentReducer:s,claiming:a}}),{getActiveSessionPlan:g.e,getMyClaims:u.j,createClaim:u.b,GetClaimingTypes:u.a,getMyRejectedApplications:u.l,getMyRejectedDocuments:u.m,getDocumentCategory:j.h,getDocumentSubCategory:j.j,getDocumentFields:j.i,PushPopupAlert:p.tb})(A)},862:function(e,t,s){"use strict";s.r(t),s.d(t,"ProfileDetails",(function(){return Y}));var a,i=s(2),r=s(21),l=s(20),c=s(23),n=s(22),o=s(4),d=s.n(o),m=s(17),b=s(3),h=s(10),p=s(341),u=s(1),j=function(e){var t=e.user,s=e.changePassword,a=e.editProfile,i=e.access_name,r=e.district_name,l=e.school_name,c=t.fname,n=t.lname,d=t.father_names,m=t.mother_names,b=t.sex,j=t.date_of_birth,g=t.place_of_birth,x=t.country_of_birth,_=t.district,v=t.email,y=t.n_id,O=t.phone_number,f=t.province,N=t.civil_status,C=t.village,w=t.cell,F=t.sector,S=t.residence;return Object(u.jsxs)(o.Fragment,{children:[Object(u.jsxs)("div",{className:" bg-blue-200 p-3 h-20 rounded-t z-0 flex flex-col lg:items-center items-end lg:flex-row-reverse",children:[Object(u.jsxs)("button",{onClick:function(){return a()},className:"py-1 px-2 rounded-md bg-blue-500 lg:mb-0 mb-1 text-white hover:bg-blue-600 hover:text-white  mx-1",children:[Object(u.jsx)(h.db,{className:"inline-block mr-2"}),"Edit profile"]}),Object(u.jsxs)("button",{className:"py-1 px-2 rounded-md bg-blue-500 text-white hover:bg-blue-600 hover:text-white mr-1",onClick:function(){return s()},children:[Object(u.jsx)(h.Z,{className:"inline-block mr-2"}),"Change password"]})]}),Object(u.jsxs)("div",{className:"bg-red-3000 h-0 p-3 -mt-5 rounded-t flex items-center z-0",children:[Object(u.jsx)("img",{src:p.a,alt:"Profile",className:"w-24 h-24 object-cover  shadow-lg   rounded-md border-2 border-gray-500-- border-blue-400"}),Object(u.jsxs)("section",{className:"pl-2 pt-8 mt-10",children:[Object(u.jsxs)("h1",{className:" text-2xl font-bold text-gray-600",children:[c," ",n]}),Object(u.jsx)("span",{className:"inline-block px-2 bg-yellow-300 rounded-full",children:i})]})]}),Object(u.jsxs)("div",{className:"bg-white p-3 rounded-b -mt-1- pt-12 shadow",children:[Object(u.jsxs)("div",{className:"grid lg:grid-cols-2 gap-4 mt-3 border-t pt-2 px-2",children:[r.length>0&&Object(u.jsxs)("div",{className:"mb-2 flex flex-col border-b py-1",children:[Object(u.jsx)("i",{className:"text-gray-400 ",children:"Email:"})," ",Object(u.jsxs)("b",{className:"text-lg",children:[i," on ",r," district"]})]}),l.length>0&&Object(u.jsxs)("div",{className:"mb-2 flex flex-col border-b py-1",children:[Object(u.jsx)("i",{className:"text-gray-400 ",children:"Email:"})," ",Object(u.jsxs)("b",{className:"text-lg",children:[i," of ",l]})]}),v.length>0&&Object(u.jsxs)("div",{className:"mb-2 flex flex-col border-b py-1",children:[Object(u.jsx)("i",{className:"text-gray-400 ",children:"Email:"})," ",Object(u.jsx)("b",{className:"text-lg",children:v})]}),O.length>0&&Object(u.jsxs)("div",{className:"mb-2 flex flex-col border-b py-1",children:[Object(u.jsx)("i",{className:"text-gray-400 ",children:"Phone number:"})," ",Object(u.jsx)("b",{className:"text-lg",children:O})]})]}),Object(u.jsxs)("div",{className:"grid lg:grid-cols-2 gap-4 mt-3 pt-2 px-2",children:[Object(u.jsxs)("div",{className:"",children:[Object(u.jsx)("div",{className:"hover:bg-blue-100"}),y.length>0&&Object(u.jsxs)("div",{className:"mb-2 flex flex-col border-b py-1",children:[Object(u.jsx)("i",{className:"text-gray-400 ",children:"NID:"})," ",Object(u.jsx)("b",{className:"text-lg",children:y})]}),c.length>0&&Object(u.jsxs)("div",{className:"mb-2 flex flex-col border-b py-1",children:[Object(u.jsx)("i",{className:"text-gray-400 ",children:"First name:"})," ",Object(u.jsx)("b",{className:"text-lg",children:c})]}),n.length>0&&Object(u.jsxs)("div",{className:"mb-2 flex flex-col border-b py-1",children:[Object(u.jsx)("i",{className:"text-gray-400 ",children:"Last name:"})," ",Object(u.jsx)("b",{className:"text-lg",children:n})]}),d.length>0&&Object(u.jsxs)("div",{className:"mb-2 flex flex-col border-b py-1",children:[Object(u.jsx)("i",{className:"text-gray-400 ",children:"Father's name:"})," ",Object(u.jsx)("b",{className:"text-lg",children:d})]}),m.length>0&&Object(u.jsxs)("div",{className:"mb-2 flex flex-col border-b py-1",children:[Object(u.jsx)("i",{className:"text-gray-400 ",children:"Mother's name:"})," ",Object(u.jsx)("b",{className:"text-lg",children:m})]}),b.length>0&&Object(u.jsxs)("div",{className:"mb-2 flex flex-col border-b py-1",children:[Object(u.jsx)("i",{className:"text-gray-400 ",children:"Sex:"})," ",Object(u.jsx)("b",{className:"text-lg",children:b})]}),j.length>0&&Object(u.jsxs)("div",{className:"mb-2 flex flex-col border-b py-1",children:[Object(u.jsx)("i",{className:"text-gray-400 ",children:"DOB:"})," ",Object(u.jsx)("b",{className:"text-lg",children:j})]})]}),Object(u.jsxs)("div",{className:"",children:[Object(u.jsxs)("div",{className:"bg-gray-50 p-2 rounded my-2",children:[(null===S||void 0===S?void 0:S.province_name.length)>0&&Object(u.jsxs)("div",{className:"mb-2 flex flex-col border-b py-1",children:[Object(u.jsx)("i",{className:"text-gray-400 ",children:"Residence Province:"})," ",Object(u.jsx)("b",{className:"text-lg",children:null===S||void 0===S?void 0:S.province_name})]}),(null===S||void 0===S?void 0:S.district_name.length)>0&&Object(u.jsxs)("div",{className:"mb-2 flex flex-col border-b py-1",children:[Object(u.jsx)("i",{className:"text-gray-400 ",children:"Residence District:"})," ",Object(u.jsx)("b",{className:"text-lg",children:null===S||void 0===S?void 0:S.district_name})]}),(null===S||void 0===S?void 0:S.sector_name.length)>0&&Object(u.jsxs)("div",{className:"mb-2 flex flex-col border-b py-1",children:[Object(u.jsx)("i",{className:"text-gray-400 ",children:"Residence Sector:"})," ",Object(u.jsx)("b",{className:"text-lg",children:null===S||void 0===S?void 0:S.sector_name})]})]}),_.length>0&&Object(u.jsxs)("div",{className:"mb-2 flex flex-col border-b py-1",children:[Object(u.jsx)("i",{className:"text-gray-400 ",children:"District:"})," ",Object(u.jsx)("b",{className:"text-lg",children:_})]}),C.length>0&&Object(u.jsxs)("div",{className:"mb-2 flex flex-col border-b py-1",children:[Object(u.jsx)("i",{className:"text-gray-400 ",children:"Village:"})," ",Object(u.jsx)("b",{className:"text-lg",children:C})]}),w.length>0&&Object(u.jsxs)("div",{className:"mb-2 flex flex-col border-b py-1",children:[Object(u.jsx)("i",{className:"text-gray-400 ",children:"cell:"})," ",Object(u.jsx)("b",{className:"text-lg",children:w})]}),F.length>0&&Object(u.jsxs)("div",{className:"mb-2 flex flex-col border-b py-1",children:[Object(u.jsx)("i",{className:"text-gray-400 ",children:"Sector:"})," ",Object(u.jsx)("b",{className:"text-lg",children:F})]}),f.length>0&&Object(u.jsxs)("div",{className:"mb-2 flex flex-col border-b py-1",children:[Object(u.jsx)("i",{className:"text-gray-400 ",children:"province:"})," ",Object(u.jsx)("b",{className:"text-lg",children:f})]}),N.length>0&&Object(u.jsxs)("div",{className:"mb-2 flex flex-col border-b py-1",children:[Object(u.jsx)("i",{className:"text-gray-400 ",children:"Civil status:"})," ",Object(u.jsx)("b",{className:"text-lg",children:N})]}),g.length>0&&Object(u.jsxs)("div",{className:"mb-2 flex flex-col border-b py-1",children:[Object(u.jsx)("i",{className:"text-gray-400 ",children:"Place of birth:"})," ",Object(u.jsx)("b",{className:"text-lg",children:g})]}),x.length>0&&Object(u.jsxs)("div",{className:"mb-2 flex flex-col border-b py-1",children:[Object(u.jsx)("i",{className:"text-gray-400 ",children:"Country of birth:"})," ",Object(u.jsx)("b",{className:"text-lg",children:x})]})]})]})]})]})},g=s(14),x=s(342),_=s(19),v=s(16),y=s(9),O=s(31),f=function(e){var t,s,a,i,r,l,c,n,d,m,b=e.doc,p=e.category,j=e.sub_category,f=e.close,N=e.categories,C=e.sub_categories,w=e.Delete,F=e.Update,S=Object(o.useState)(!1),T=Object(g.a)(S,2),P=T[0],k=T[1],A=p,D=j;if(null===p){var I=N.find((function(e){return e.user_detail_category_id===b.category_id}));A=void 0===I?null:I}if(null===j&&void 0!==b.sub_category_id&&b.sub_category_id.length>=1){var E=C.find((function(e){return e.user_detail_subcategory_id===b.sub_category_id}));D=void 0===E?null:E}var L=!1;if(void 0!==b.files&&null!==(null===b||void 0===b?void 0:b.files)&&(null===b||void 0===b||null===(t=b.files)||void 0===t?void 0:t.length)>1){var R=b.files.split("."),V=R[R.length-1];O.b.includes(V)&&(L=!0)}return Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)(_.d,{widthSizeClass:_.b.extraLarge,backDrop:!0,backDropClose:!1,close:function(){return f()},displayClose:!0,theme:_.c.default,title:Object(u.jsxs)("label",{className:"text-xl m-0 text-bold text-gray-700",children:[null===(s=A)||void 0===s?void 0:s.title," ",null!==D&&" - "+D.title]}),padding:{body:!0,footer:!0,title:!0},children:[void 0!==b.files&&null!==b.files&&(null===b||void 0===b||null===(a=b.files)||void 0===a?void 0:a.length)>1&&Object(u.jsx)(u.Fragment,{children:!0===L?Object(u.jsx)("div",{className:"bg-gray-900 w-full p-1",children:Object(u.jsx)("img",{src:y.a.AUTH_FILES+b.files,alt:"Document file details",className:"w-full rounded"})}):Object(u.jsx)("div",{className:"p-8 bg-gray-700 text-center",children:Object(u.jsx)("a",{className:"p-2 bg-blue-500 text-white rounded",rel:"noreferrer",href:y.a.AUTH_FILES+b.files,target:"_blank",children:"Open document"})})}),Object(u.jsxs)("div",{className:"p-3 ",children:[Object(u.jsxs)("div",{className:"flex",children:[Object(u.jsxs)("div",{className:"flex-1",children:[void 0!==b.validation_status&&(null===b||void 0===b||null===(i=b.files)||void 0===i?void 0:i.length)>=4&&Object(u.jsx)("span",{className:"text-sm bg-yellow-200 py-0.5 px-2 rounded-full text-yellow-800",children:null===b||void 0===b?void 0:b.validation_status}),Object(u.jsxs)("h2",{className:"text-xl mt-1 mb-4 font-bold text-blue-800",children:[Object(u.jsxs)("span",{className:"font-thin text-blue-600",children:[" ",null===(r=A)||void 0===r?void 0:r.title]})," ",null===(l=b.category_subcategory_data)||void 0===l?void 0:l.title,b.title&&" - "+b.title]})]}),Object(u.jsx)("div",{className:"ml-1",children:null===b.school&&null===b.category_subcategory_data&&Object(u.jsxs)("button",{onClick:function(){return F(b)},className:"py-1 rounded px-3 text-sm mb-1 block w-full bg-blue-200 hover:bg-blue-300 text-blue-800",children:[Object(u.jsx)(h.db,{className:"inline-block"}),"Edit"]})}),Object(u.jsx)("div",{className:"ml-1 ",children:b.validation_status!==v.d.Approved&&Object(u.jsxs)(u.Fragment,{children:[!1===P&&Object(u.jsxs)("button",{onClick:function(){w(b.doc_id),f()},className:"py-1 rounded px-3 text-sm mb-1 block w-full bg-red-200 hover:bg-red-300 text-red-800",children:[Object(u.jsx)(h.B,{className:"inline-block"})," Delete"]}),Object(u.jsxs)("button",{onClick:function(){return k(!P)},className:"py-1 rounded px-3 text-sm mb-1 block w-full bg-gray-200 hover:bg-gray-300 text-gray-800",children:[Object(u.jsx)(h.E,{className:"inline-block"})," ",!0===P?"Close claim":"Claim"]})]})})]}),!0===P?Object(u.jsx)("div",{className:"p-2",children:Object(u.jsx)(x.a,{claim_type:v.g.DOCUMENT_VALIDATION,file_id:b.doc_id,setFormState:function(){return k(!1)}})}):Object(u.jsxs)("div",{className:"",children:[b.description.length>=1&&Object(u.jsxs)("div",{className:"mb-2 py-1 border-b pb-3 border-gray-200",children:[Object(u.jsx)("label",{className:"block text-gray-500 text-sm",children:"Description:"}),Object(u.jsx)("span",{className:"",children:b.description})]}),Object(u.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[null!==A&&Object(u.jsxs)("div",{className:"mb-2 py-1 border-b border-gray-200",children:[Object(u.jsx)("label",{className:"block text-gray-500 text-sm",children:"Category:"}),Object(u.jsx)("b",{children:A.title})]}),null!==D&&Object(u.jsxs)("div",{className:"mb-2 py-1 border-b border-gray-200",children:[Object(u.jsx)("label",{className:"block text-gray-500 text-sm",children:"Sub category:"}),Object(u.jsx)("b",{children:D.title})]}),void 0!==b.company&&b.company.length>=1&&Object(u.jsxs)("div",{className:"mb-2 py-1 border-b border-gray-200",children:[Object(u.jsx)("label",{className:"block text-gray-500 text-sm",children:"Company:"}),Object(u.jsx)("b",{children:b.company})]}),void 0!==b.names&&b.names.length>=1&&Object(u.jsxs)("div",{className:"mb-2 py-1 border-b border-gray-200",children:[Object(u.jsx)("label",{className:"block text-gray-500 text-sm",children:"Names:"}),Object(u.jsx)("b",{children:b.names})]}),void 0!==b.email&&b.email.length>=1&&Object(u.jsxs)("div",{className:"mb-2 py-1 border-b border-gray-200",children:[Object(u.jsx)("label",{className:"block text-gray-500 text-sm",children:"Email:"}),Object(u.jsx)("b",{children:b.email})]}),void 0!==b.phone_number&&b.phone_number.length>=1&&Object(u.jsxs)("div",{className:"mb-2 py-1 border-b border-gray-200",children:[Object(u.jsx)("label",{className:"block text-gray-500 text-sm",children:"Phone Number:"}),Object(u.jsx)("b",{children:b.phone_number})]}),void 0!==b.start_year&&b.start_year.length>=1&&Object(u.jsxs)("div",{className:"mb-2 py-1 border-b border-gray-200",children:[Object(u.jsx)("label",{className:"block text-gray-500 text-sm",children:"Start Year:"}),Object(u.jsx)("b",{children:b.start_year})]}),void 0!==b.end_year&&b.end_year.length>=1&&Object(u.jsxs)("div",{className:"mb-2 py-1 border-b border-gray-200",children:[Object(u.jsx)("label",{className:"block text-gray-500 text-sm",children:"End Year:"}),Object(u.jsx)("b",{children:b.end_year})]}),void 0!==b.year&&b.year.length>=1&&Object(u.jsxs)("div",{className:"mb-2 py-1 border-b border-gray-200",children:[Object(u.jsx)("label",{className:"block text-gray-500 text-sm",children:"Year:"}),Object(u.jsx)("b",{children:b.year})]}),void 0!==b.category_subcategory_data&&null!==b.category_subcategory_data&&Object(u.jsxs)("div",{className:"mb-2 py-1 border-b border-gray-200",children:[Object(u.jsx)("b",{children:b.category_subcategory_data.title}),Object(u.jsx)("label",{className:"block text-gray-500 text-sm",children:b.category_subcategory_data.description})]}),void 0!==b.school&&null!==b.school&&Object(u.jsxs)("div",{className:"mb-2 py-1 border-b border-gray-200",children:[Object(u.jsx)("label",{className:"block text-gray-500 text-sm",children:"School"}),Object(u.jsx)("b",{children:b.school.school_name}),(null===(c=b.school.education_category_id)||void 0===c?void 0:c.education_category_title)&&Object(u.jsx)("i",{className:"block",children:null===(n=b.school.education_category_id)||void 0===n?void 0:n.education_category_title}),(null===(d=b.school.district_id)||void 0===d?void 0:d.district_name)&&Object(u.jsxs)("span",{className:"block",children:["District: ",Object(u.jsx)("b",{children:null===(m=b.school.district_id)||void 0===m?void 0:m.district_name})," "]})]})]})]})]})]})})},N=s(125),C=s(35),w=s(41),F=s(98),S=s(76);!function(e){e[e.email=0]="email",e[e.phone_number=1]="phone_number",e[e.main__error=2]="main__error",e[e.main_success=3]="main_success",e[e.none=4]="none",e[e.province_name=5]="province_name",e[e.district_name=6]="district_name",e[e.sector_name=7]="sector_name"}(a||(a={}));var T,P=function(e){Object(c.a)(s,e);var t=Object(n.a)(s);function s(e){var l,c,n,o,d,m,h;return Object(r.a)(this,s),(h=t.call(this,e)).handleChange=function(e){h.setState(Object(i.a)(Object(i.a)({},h.state),{},Object(C.a)({error:{target:a.none,msg:""}},e.currentTarget.name,e.target.value)))},h.componentDidMount=function(){Object(b.kb)((function(e,t,s){!0===e&&null!==t?(h.setState({all_locations:t,loading_location:!1}),console.log({locations:t})):h.setState({loading_location:!1,error:{target:a.main__error,msg:s}})}))},h.openProvinceModal=function(){h.setState({select_province:!h.state.select_province})},h.openDistrictModal=function(){h.setState({select_district:!h.state.select_district})},h.openSectorModal=function(){h.setState({select_sector:!h.state.select_sector})},h.updateAccountHandler=function(e){return e.preventDefault(),h.state.email.length<=4||!Object(w.e)(h.state.email)?h.setState({error:{target:a.email,msg:"Please enter a email"}}):h.state.phone_number.length<=4?h.setState({error:{target:a.phone_number,msg:"Phone number is required"}}):h.state.province_name.length<=4?h.setState({error:{target:a.province_name,msg:"Please select a province"}}):h.state.district_name.length<=4?h.setState({error:{target:a.district_name,msg:"Please select a district"}}):h.state.sector_name.length<=4?h.setState({error:{target:a.sector_name,msg:"Please select a sector"}}):(h.setState({loading:!0,error:{target:a.none,msg:""}}),void h.props.FC_UpdateProfile({email:h.state.email,phone_number:h.state.phone_number,user_id:h.props.auth.user.user_id,residence:{province_id:h.state.province_id,province_name:h.state.province_name,district_id:h.state.district_id,district_name:h.state.district_name,sector_id:h.state.sector_id,sector_name:h.state.sector_name}},(function(e,t){!0===e?h.setState({loading:!1,error:{target:a.main_success,msg:"Your profile details updated successfully"}}):h.setState({loading:!1,error:{target:a.main__error,msg:t}})})))},h.state={loading:!1,loading_location:!1,error:{target:a.none,msg:""},all_locations:{districts:[],provinces:[],sectors:[]},phone_number:h.props.auth.user.phone_number,email:h.props.auth.user.email,province_id:null===(l=h.props.auth.user.residence)||void 0===l?void 0:l.province_id,province_name:null===(c=h.props.auth.user.residence)||void 0===c?void 0:c.province_name,district_id:null===(n=h.props.auth.user.residence)||void 0===n?void 0:n.district_id,district_name:null===(o=h.props.auth.user.residence)||void 0===o?void 0:o.district_name,sector_id:null===(d=h.props.auth.user.residence)||void 0===d?void 0:d.sector_id,sector_name:null===(m=h.props.auth.user.residence)||void 0===m?void 0:m.sector_name,select_province:!1,select_district:!1,select_sector:!1},h}return Object(l.a)(s,[{key:"render",value:function(){var e,t,s,i,r,l,c,n,o,d,m,b,h,p,j,g=this;return Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)(_.d,{widthSizeClass:_.b.medium,backDrop:!0,backDropClose:!1,close:function(){return g.props.close()},displayClose:!0,theme:_.c.default,title:Object(u.jsx)("label",{className:"text-2xl m-0 text-bold text-gray-700",children:"Edit profile"}),padding:{body:!0,footer:!0,title:!0},children:[Object(u.jsx)("div",{className:"-mt-3",children:Object(u.jsx)("div",{className:"p-1 rounded-md text-gray-500 text-sm",children:"You can only update the Email and the phone number, other info are poulled from NIDA database"})}),Object(u.jsx)("div",{className:"bg-white rounded-b-md ",children:Object(u.jsxs)("form",{onSubmit:this.updateAccountHandler,children:[this.state.error.target===a.main_success&&Object(u.jsx)("div",{className:"p-2 m-2 text-center rounded-md bg-green-200 text-green-700 animate__zoomIn animate__animated",children:this.state.error.msg}),this.state.error.target===a.main__error&&Object(u.jsx)("div",{className:"p-2 m-2 text-center rounded-md bg-red-200 text-red-700 animate__zoomIn animate__animated",children:this.state.error.msg}),Object(u.jsx)("div",{className:"mt-2",children:Object(u.jsxs)("div",{className:"p-2 ",children:[Object(u.jsx)("label",{htmlFor:"title",className:"d-block",children:"Email"}),Object(u.jsx)("input",{type:"email",name:"email",value:this.state.email,className:"font-bold input-white w-20 inline-block  ".concat((null===(e=this.state.error)||void 0===e?void 0:e.target)===a.email?"border-red-500 border-2":"border-gray-500 border-2"),placeholder:"myemail@email.com",onChange:this.handleChange,disabled:this.state.loading,required:!0}),(null===(t=this.state.error)||void 0===t?void 0:t.target)===a.email&&Object(u.jsx)("span",{className:"text-red-600",children:null===(s=this.state.error)||void 0===s?void 0:s.msg})]})}),Object(u.jsx)("div",{className:"mt-2",children:Object(u.jsxs)("div",{className:"p-2 ",children:[Object(u.jsx)("label",{htmlFor:"title",className:"d-block",children:"Phone number"}),Object(u.jsx)("input",{type:"text",name:"phone_number",value:this.state.phone_number,className:"font-bold input-white w-20 inline-block  ".concat((null===(i=this.state.error)||void 0===i?void 0:i.target)===a.phone_number?"border-red-500 border-2":"border-gray-500 border-2"),placeholder:"0700000000",onChange:this.handleChange,disabled:this.state.loading,required:!0}),(null===(r=this.state.error)||void 0===r?void 0:r.target)===a.phone_number&&Object(u.jsx)("span",{className:"text-red-600",children:null===(l=this.state.error)||void 0===l?void 0:l.msg})]})}),!0===this.state.loading_location?Object(u.jsx)("div",{className:"p-5 bg-gray-300 text-center text-xl",children:Object(u.jsx)("span",{className:"animate__animated animate__fadeIn animate__infinite",children:"Loading..."})}):Object(u.jsxs)("div",{className:"p-2 bg-gray-100 rounded",children:[Object(u.jsxs)("div",{className:"",children:[Object(u.jsx)("div",{className:"text-xl text-gray-700 font-bold mx-2",children:"Residence information"}),Object(u.jsxs)("div",{className:"p-2 ",children:[Object(u.jsx)("label",{htmlFor:"title",className:"d-block",children:"Province"}),!1===this.state.select_province?Object(u.jsx)("input",{type:"text",readOnly:!0,value:this.state.province_name,className:"font-bold input-white w-20 inline-block  ".concat((null===(c=this.state.error)||void 0===c?void 0:c.target)===a.province_name?"border-red-500 border-2":"border-gray-500 border-2"),onClick:this.openProvinceModal}):Object(u.jsx)(S.a,{click:function(e){g.setState({select_province:!1,province_name:e.province_name,province_id:e.province_code,district_id:"",district_name:"",sector_name:"",sector_id:"",select_sector:!1,select_district:!1})},data:this.state.all_locations.provinces,close:function(){g.setState({select_province:!1})},id:"province_code",title:"province_name",loading:this.state.loading_location}),(null===(n=this.state.error)||void 0===n?void 0:n.target)===a.province_name&&Object(u.jsx)("span",{className:"text-red-600",children:null===(o=this.state.error)||void 0===o?void 0:o.msg})]})]}),Object(u.jsxs)("div",{className:"p-2 ",children:[Object(u.jsx)("label",{htmlFor:"title",className:"d-block",children:"District"}),!1===this.state.select_district?Object(u.jsx)("input",{type:"text",readOnly:!0,value:this.state.district_name,className:"font-bold input-white w-20 inline-block  ".concat((null===(d=this.state.error)||void 0===d?void 0:d.target)===a.district_name?"border-red-500 border-2":"border-gray-500 border-2"),placeholder:"",onClick:this.openDistrictModal,disabled:""===this.state.province_name,required:!0}):Object(u.jsx)(S.a,{click:function(e){g.setState({select_district:!1,district_name:e.district_name,district_id:e.district_code,sector_name:"",sector_id:"",select_sector:!1,select_province:!1})},data:this.state.all_locations.districts.filter((function(e){return e.province_code===g.state.province_id})),close:function(){g.setState({select_district:!1})},id:"district_code",title:"district_name",loading:this.state.loading_location}),(null===(m=this.state.error)||void 0===m?void 0:m.target)===a.district_name&&Object(u.jsx)("span",{className:"text-red-600",children:null===(b=this.state.error)||void 0===b?void 0:b.msg})]}),Object(u.jsxs)("div",{className:"p-2 ",children:[Object(u.jsx)("label",{htmlFor:"title",className:"d-block",children:"Sector"}),!1===this.state.select_sector?Object(u.jsx)("input",{type:"text",readOnly:!0,value:this.state.sector_name,className:"font-bold input-white w-20 inline-block  ".concat((null===(h=this.state.error)||void 0===h?void 0:h.target)===a.sector_name?"border-red-500 border-2":"border-gray-500 border-2"),placeholder:"",onClick:this.openSectorModal,disabled:""===this.state.district_name,required:!0}):Object(u.jsx)(S.a,{click:function(e){g.setState({select_sector:!1,sector_name:e.sector_name,sector_id:e.sector_code,select_province:!1,select_district:!1})},data:this.state.all_locations.sectors.filter((function(e){return e.district_code===g.state.district_id})),close:function(){g.setState({select_sector:!1})},id:"sector_code",title:"sector_name",loading:this.state.loading_location}),(null===(p=this.state.error)||void 0===p?void 0:p.target)===a.sector_name&&Object(u.jsx)("span",{className:"text-red-600",children:null===(j=this.state.error)||void 0===j?void 0:j.msg})]})]}),Object(u.jsx)("div",{className:"p-2",children:Object(u.jsx)("button",{className:"py-2 font-bold  px-8 rounded bg-hero text-white inline-block",disabled:this.state.loading,type:"submit",children:!0===this.state.loading?Object(u.jsx)("b",{className:"animate__animated animate__fadeIn animate__infinite",children:"Updating profile..."}):"Update profile"})})]})})]})})}}]),s}(d.a.Component),k=Object(m.b)((function(e){return{auth:e.auth}}),{FC_UpdateProfile:F.u})(P),A=s(18);!function(e){e[e.title=0]="title",e[e.company=1]="company",e[e.description=2]="description",e[e.email=3]="email",e[e.end_year=4]="end_year",e[e.files=5]="files",e[e.names=6]="names",e[e.phone_number=7]="phone_number",e[e.school=8]="school",e[e.start_year=9]="start_year",e[e.sub_category_id=10]="sub_category_id",e[e.main_error=11]="main_error",e[e.main_success=12]="main_success",e[e.none=13]="none",e[e.year=14]="year"}(T||(T={}));var D,I=function(e){Object(c.a)(s,e);var t=Object(n.a)(s);function s(e){var a;return Object(r.a)(this,s),(a=t.call(this,e)).componentDidMount=function(){if(a.props.categories.length<=0||null===a.props.document)a.setState({error:{target:T.none,msg:"The document selected does not have a category"}});else{var e=a.props.categories.find((function(e){return e.user_detail_category_id===a.props.document.category_id}));void 0===e?a.setState({error:{target:T.none,msg:"The document selected does not have a category"}}):a.setState({category:e,title:a.props.document.title,description:a.props.document.description,email:a.props.document.email,end_year:a.props.document.end_year,names:a.props.document.names,phone_number:a.props.document.phone_number,school:"",start_year:a.props.document.start_year,year:a.props.document.year,company:a.props.document.company})}},a.submitHandler=function(e){var t,s;e.preventDefault(),a.setState({error:{target:T.none,msg:""}});var r=Object(i.a)(Object(i.a)({},a.props.document),{},{title:a.state.title,description:a.state.description,email:a.state.email,end_year:a.state.end_year,names:a.state.names,phone_number:a.state.phone_number,start_year:a.state.start_year,year:a.state.year,company:a.state.company}),l=void 0===(null===(t=a.state.category)||void 0===t?void 0:t.fields)?[]:null===(s=a.state.category)||void 0===s?void 0:s.fields.map((function(e){return e.toLowerCase()}));return!0===l.includes("title")&&a.state.title.length<=0?a.setState({error:{target:T.title,msg:"Please add the title"}}):!0===l.includes("description")&&a.state.description.length<=0?a.setState({error:{target:T.description,msg:"Please add the description"}}):!0===l.includes("school")&&a.state.school.length<=0?a.setState({error:{target:T.school,msg:"Please add the school"}}):!0===l.includes("email")&&a.state.email.length<=0?a.setState({error:{target:T.email,msg:"Please add the email"}}):!0===l.includes("names")&&a.state.names.length<=0?a.setState({error:{target:T.names,msg:"Please add the names"}}):!0===l.includes("phone_number")&&a.state.phone_number.length<=0?a.setState({error:{target:T.phone_number,msg:"Please add the phone_number"}}):!0===l.includes("company")&&a.state.company.length<=0?a.setState({error:{target:T.company,msg:"Please add the company"}}):!0===l.includes("year")&&a.state.year.length<=0?a.setState({error:{target:T.year,msg:"Please add the year"}}):!0===l.includes("start_year")&&a.state.start_year.length<=0?a.setState({error:{target:T.start_year,msg:"Please add the start_year"}}):!0===l.includes("end_year")&&a.state.end_year.length<=0?a.setState({error:{target:T.end_year,msg:"Please add the end_year"}}):(a.setState({loading:!0}),void a.props.FC_EditUserDocument(r,a.props.auth.user.user_id,(function(e,t){!0===e?a.setState({loading:!1,success:!0}):a.setState({loading:!1,error:{target:T.main_error,msg:t}})})))},a.inputChangeHandler=function(e){a.setState(Object(i.a)(Object(i.a)({},a.state),{},Object(C.a)({error:{target:T.none,msg:""}},e.currentTarget.name,e.target.value)))},a.state={loading:!1,success:!1,category:null,error:{target:T.none,msg:""},document:a.props.document,title:"",description:"",email:"",end_year:"",names:"",phone_number:"",school:"",start_year:"",year:"",company:""},a}return Object(l.a)(s,[{key:"render",value:function(){var e,t,s,a,i,r,l,c,n,d,m,b,h,p,j,g,x,v,y,O,f,N,C,w,F,S,P,k,D,I,E,L,R,V,H,M,U,B,Y=this,q=void 0===(null===(e=this.state.category)||void 0===e?void 0:e.fields)?[]:null===(t=this.state.category)||void 0===t?void 0:t.fields.map((function(e){return e.toLowerCase()}));return Object(u.jsx)(o.Fragment,{children:Object(u.jsx)(_.d,{widthSizeClass:_.b.medium,backDrop:!0,backDropClose:!1,close:function(){return Y.props.close()},displayClose:!0,theme:_.c.default,title:Object(u.jsx)("label",{className:"text-xl m-0 text-bold text-gray-700",children:"Update document"}),padding:{body:!0,footer:!0,title:!0},children:Object(u.jsxs)("div",{className:"p-2",children:[this.state.error.target===T.main_error&&Object(u.jsx)(A.b,{theme:A.a.danger,title:this.state.error.msg}),this.state.error.target===T.main_success&&Object(u.jsx)(A.b,{theme:A.a.success,title:this.state.error.msg}),!0===this.state.success&&Object(u.jsx)(A.b,{theme:A.a.success,title:"Details updated successfully"}),Object(u.jsx)("div",{className:"mt-1",children:Object(u.jsxs)("div",{className:"p-2",children:[Object(u.jsx)("label",{htmlFor:"title",className:"d-block",children:"Category"}),Object(u.jsx)("div",{className:"input-white w-20 inline-block border-gray-300 border-2 font-bold bg-blue-200",children:null===(s=this.state.category)||void 0===s?void 0:s.title})]})}),Object(u.jsx)("form",{onSubmit:this.submitHandler,children:Object(u.jsxs)("div",{className:"bg-white",children:[!0===q.includes("category_subcategory_data")&&Object(u.jsxs)("div",{className:"p-2",children:[Object(u.jsx)("label",{htmlFor:"title",className:"d-block",children:"Title"}),Object(u.jsx)("input",{value:null===(a=this.props.document.category_subcategory_data)||void 0===a?void 0:a.title,type:"text",name:"title",className:"input-white w-20 inline-block  ".concat((null===(i=this.state.error)||void 0===i?void 0:i.target)===T.title?"border-red-500 border-2":"border-gray-500 border-2"),placeholder:"Enter the title",disabled:!0,readOnly:!0}),(null===(r=this.state.error)||void 0===r?void 0:r.target)===T.title&&Object(u.jsx)("span",{className:"text-red-600",children:null===(l=this.state.error)||void 0===l?void 0:l.msg})]}),!0===q.includes("school")&&Object(u.jsxs)("div",{className:"p-2",children:[Object(u.jsx)("label",{htmlFor:"title",className:"d-block",children:"Title"}),Object(u.jsx)("input",{value:null===(c=this.props.document.school)||void 0===c?void 0:c.school_name,type:"text",name:"title",className:"input-white w-20 inline-block  ".concat((null===(n=this.state.error)||void 0===n?void 0:n.target)===T.title?"border-red-500 border-2":"border-gray-500 border-2"),placeholder:"Enter the title",disabled:!0,readOnly:!0}),(null===(d=this.state.error)||void 0===d?void 0:d.target)===T.title&&Object(u.jsx)("span",{className:"text-red-600",children:null===(m=this.state.error)||void 0===m?void 0:m.msg})]}),!0===q.includes("title")&&Object(u.jsxs)("div",{className:"p-2",children:[Object(u.jsx)("label",{htmlFor:"title",className:"d-block",children:"Title"}),Object(u.jsx)("input",{value:this.state.title,type:"text",name:"title",onChange:this.inputChangeHandler,className:"input-white w-20 inline-block  ".concat((null===(b=this.state.error)||void 0===b?void 0:b.target)===T.title?"border-red-500 border-2":"border-gray-500 border-2"),placeholder:"Enter the title",disabled:this.state.loading}),(null===(h=this.state.error)||void 0===h?void 0:h.target)===T.title&&Object(u.jsx)("span",{className:"text-red-600",children:null===(p=this.state.error)||void 0===p?void 0:p.msg})]}),!0===q.includes("description")&&Object(u.jsxs)("div",{className:"p-2",children:[Object(u.jsx)("label",{htmlFor:"description",className:"d-block",children:"Description"}),Object(u.jsx)("input",{value:this.state.description,type:"text",name:"description",onChange:this.inputChangeHandler,className:"input-white w-20 inline-block  ".concat((null===(j=this.state.error)||void 0===j?void 0:j.target)===T.description?"border-red-500 border-2":"border-gray-500 border-2"),placeholder:"Enter the description",disabled:this.state.loading}),(null===(g=this.state.error)||void 0===g?void 0:g.target)===T.description&&Object(u.jsx)("span",{className:"text-red-600",children:null===(x=this.state.error)||void 0===x?void 0:x.msg})]}),!0===q.includes("email")&&Object(u.jsxs)("div",{className:"p-2",children:[Object(u.jsx)("label",{htmlFor:"email",className:"d-block",children:"Email"}),Object(u.jsx)("input",{value:this.state.email,type:"text",name:"email",onChange:this.inputChangeHandler,className:"input-white w-20 inline-block  ".concat((null===(v=this.state.error)||void 0===v?void 0:v.target)===T.email?"border-red-500 border-2":"border-gray-500 border-2"),placeholder:"Your email",disabled:this.state.loading}),(null===(y=this.state.error)||void 0===y?void 0:y.target)===T.email&&Object(u.jsx)("span",{className:"text-red-600",children:null===(O=this.state.error)||void 0===O?void 0:O.msg})]}),!0===q.includes("names")&&Object(u.jsxs)("div",{className:"p-2",children:[Object(u.jsx)("label",{htmlFor:"names",className:"d-block",children:"Names"}),Object(u.jsx)("input",{value:this.state.names,type:"text",name:"names",onChange:this.inputChangeHandler,className:"input-white w-20 inline-block  ".concat((null===(f=this.state.error)||void 0===f?void 0:f.target)===T.names?"border-red-500 border-2":"border-gray-500 border-2"),placeholder:"Your names",disabled:this.state.loading}),(null===(N=this.state.error)||void 0===N?void 0:N.target)===T.names&&Object(u.jsx)("span",{className:"text-red-600",children:null===(C=this.state.error)||void 0===C?void 0:C.msg})]}),!0===q.includes("phone_number")&&Object(u.jsxs)("div",{className:"p-2",children:[Object(u.jsx)("label",{htmlFor:"phone_number",className:"d-block",children:"Phone number"}),Object(u.jsx)("input",{value:this.state.phone_number,type:"text",name:"phone_number",onChange:this.inputChangeHandler,className:"input-white w-20 inline-block  ".concat((null===(w=this.state.error)||void 0===w?void 0:w.target)===T.phone_number?"border-red-500 border-2":"border-gray-500 border-2"),placeholder:"Your phone_number",disabled:this.state.loading}),(null===(F=this.state.error)||void 0===F?void 0:F.target)===T.phone_number&&Object(u.jsx)("span",{className:"text-red-600",children:null===(S=this.state.error)||void 0===S?void 0:S.msg})]}),!0===q.includes("company")&&Object(u.jsxs)("div",{className:"p-2",children:[Object(u.jsx)("label",{htmlFor:"company",className:"d-block",children:"Company"}),Object(u.jsx)("input",{value:this.state.company,type:"text",name:"company",onChange:this.inputChangeHandler,className:"input-white w-20 inline-block  ".concat((null===(P=this.state.error)||void 0===P?void 0:P.target)===T.company?"border-red-500 border-2":"border-gray-500 border-2"),placeholder:"Company name",disabled:this.state.loading}),(null===(k=this.state.error)||void 0===k?void 0:k.target)===T.company&&Object(u.jsx)("span",{className:"text-red-600",children:null===(D=this.state.error)||void 0===D?void 0:D.msg})]}),!0===q.includes("year")&&Object(u.jsxs)("div",{className:"p-2",children:[Object(u.jsx)("label",{htmlFor:"year",className:"d-block",children:"Year"}),Object(u.jsx)("input",{value:this.state.year,type:"date",name:"year",onChange:this.inputChangeHandler,className:"input-white w-20 inline-block  ".concat((null===(I=this.state.error)||void 0===I?void 0:I.target)===T.year?"border-red-500 border-2":"border-gray-500 border-2"),placeholder:"year",disabled:this.state.loading}),(null===(E=this.state.error)||void 0===E?void 0:E.target)===T.year&&Object(u.jsx)("span",{className:"text-red-600",children:null===(L=this.state.error)||void 0===L?void 0:L.msg})]}),!0===q.includes("start_year")&&Object(u.jsxs)("div",{className:"p-2",children:[Object(u.jsx)("label",{htmlFor:"start_year",className:"d-block",children:"Start year"}),Object(u.jsx)("input",{value:this.state.start_year,type:"date",name:"start_year",onChange:this.inputChangeHandler,className:"input-white w-20 inline-block  ".concat((null===(R=this.state.error)||void 0===R?void 0:R.target)===T.start_year?"border-red-500 border-2":"border-gray-500 border-2"),placeholder:"start_year",disabled:this.state.loading}),(null===(V=this.state.error)||void 0===V?void 0:V.target)===T.start_year&&Object(u.jsx)("span",{className:"text-red-600",children:null===(H=this.state.error)||void 0===H?void 0:H.msg})]}),!0===q.includes("end_year")&&Object(u.jsxs)("div",{className:"p-2",children:[Object(u.jsx)("label",{htmlFor:"end_year",className:"d-block",children:"End year"}),Object(u.jsx)("input",{value:this.state.end_year,type:"date",name:"end_year",onChange:this.inputChangeHandler,className:"input-white w-20 inline-block  ".concat((null===(M=this.state.error)||void 0===M?void 0:M.target)===T.end_year?"border-red-500 border-2":"border-gray-500 border-2"),placeholder:"end_year",disabled:this.state.loading}),(null===(U=this.state.error)||void 0===U?void 0:U.target)===T.end_year&&Object(u.jsx)("span",{className:"text-red-600",children:null===(B=this.state.error)||void 0===B?void 0:B.msg})]}),Object(u.jsx)("div",{className:"p-2  text-right",children:Object(u.jsx)("button",{className:"py-2 font-bold  px-8 rounded bg-hero text-white inline-block",disabled:this.state.loading,type:"submit",children:!0===this.state.loading?"Loading...":"Update document"})})]})})]})})})}}]),s}(d.a.Component),E=Object(m.b)((function(e){return{auth:e.auth}}),{FC_EditUserDocument:b.C})(I);!function(e){e[e.old_password=0]="old_password",e[e.new_password=1]="new_password",e[e.re_new_password=2]="re_new_password",e[e.main__error=3]="main__error",e[e.main_success=4]="main_success",e[e.none=5]="none"}(D||(D={}));var L=function(e){Object(c.a)(s,e);var t=Object(n.a)(s);function s(e){var a;return Object(r.a)(this,s),(a=t.call(this,e)).handleChange=function(e){var t;"new_password"===e.currentTarget.name?a.setState(Object(i.a)(Object(i.a)({},a.state),{},(t={error:{target:D.none,msg:""}},Object(C.a)(t,e.currentTarget.name,e.target.value),Object(C.a)(t,"password_validation",{uppercase:Object(w.d)(e.target.value),lowercase:Object(w.a)(e.target.value),special:Object(w.c)(e.target.value),number:Object(w.b)(e.target.value),length:e.target.value.length>=O.d&&e.target.value.length<O.c}),t))):a.setState(Object(i.a)(Object(i.a)({},a.state),{},Object(C.a)({error:{target:D.none,msg:""}},e.currentTarget.name,e.target.value)))},a.updateAccountHandler=function(e){return e.preventDefault(),a.state.old_password.length<=4?a.setState({error:{target:D.old_password,msg:"Please enter the current password"}}):a.state.password_validation.uppercase&&a.state.password_validation.lowercase&&a.state.password_validation.number&&a.state.password_validation.special&&a.state.password_validation.length?a.state.new_password!==a.state.re_new_password?a.setState({error:{target:D.re_new_password,msg:"Does not match to the new password"}}):(a.setState({loading:!0,error:{target:D.none,msg:""}}),void a.props.FC_ChangePassword({new_password:a.state.new_password,old_password:a.state.old_password,user_id:a.props.auth.user.user_id},(function(e,t){!0===e?a.setState({loading:!1,old_password:"",new_password:"",re_new_password:"",error:{target:D.main_success,msg:"Your password has been updated successfully"}}):a.setState({loading:!1,error:{target:D.main__error,msg:t}})}))):a.setState({error:{target:D.new_password,msg:"Password must pass the validation test"}})},a.state={loading:!1,error:{target:D.none,msg:""},old_password:"",new_password:"",re_new_password:"",password_validation:{uppercase:!1,lowercase:!1,number:!1,length:!1,special:!1}},a}return Object(l.a)(s,[{key:"render",value:function(){var e,t,s,a,i,r,l,c,n,o=this,d=this.state.password_validation.uppercase&&this.state.password_validation.lowercase&&this.state.password_validation.number&&this.state.password_validation.special&&this.state.password_validation.length?null:Object(u.jsxs)("div",{className:"px-2 mb-2 bg-white rounded shadow-lg mx-2 p-2 -mt-2",children:[Object(u.jsxs)("div",{className:"p-1 border-gray-200 border rounded-full flex",children:[this.state.password_validation.lowercase&&Object(u.jsx)("div",{className:"bg-blue-500 pt-1 rounded-l-full inline-block- w-1/6"}),this.state.password_validation.uppercase&&Object(u.jsx)("div",{className:"bg-blue-500 pt-1  inline-block- w-1/6"}),this.state.password_validation.number&&Object(u.jsx)("div",{className:"bg-blue-500 pt-1  inline-block- w-1/6"}),this.state.password_validation.length&&Object(u.jsx)("div",{className:"bg-blue-500 pt-1  inline-block- w-1/6"}),this.state.password_validation.special&&Object(u.jsx)("div",{className:"bg-blue-500 pt-1 rounded-r-full inline-block- w-2/6"})]}),Object(u.jsx)("h5",{children:"Password must:"}),Object(u.jsxs)("div",{className:"pt-1 text-sm",children:[Object(u.jsxs)("div",{className:"".concat(this.state.password_validation.lowercase?"text-green-600 font-bold":"text-gray-500"),children:[this.state.password_validation.lowercase?Object(u.jsx)(h.t,{className:"inline-block"}):Object(u.jsx)(h.nb,{className:"inline-block"})," ",Object(u.jsx)("span",{children:"Include a lowercase character"})]}),Object(u.jsxs)("div",{className:"".concat(this.state.password_validation.uppercase?"text-green-600 font-bold":"text-gray-500"),children:[this.state.password_validation.uppercase?Object(u.jsx)(h.t,{className:"inline-block"}):Object(u.jsx)(h.nb,{className:"inline-block"})," ",Object(u.jsx)("span",{children:"Include an uppercase character"})]}),Object(u.jsxs)("div",{className:"".concat(this.state.password_validation.number?"text-green-600 font-bold":"text-gray-500"),children:[this.state.password_validation.number?Object(u.jsx)(h.t,{className:"inline-block"}):Object(u.jsx)(h.nb,{className:"inline-block"})," ",Object(u.jsx)("span",{children:"Include a Number"})]}),Object(u.jsxs)("div",{className:"".concat(this.state.password_validation.length?"text-green-600 font-bold":"text-gray-500"),children:[this.state.password_validation.length?Object(u.jsx)(h.t,{className:"inline-block"}):Object(u.jsx)(h.nb,{className:"inline-block"})," ",Object(u.jsxs)("span",{children:["Between ",O.d," and ",O.c," character"]})]}),Object(u.jsxs)("div",{className:"".concat(this.state.password_validation.special?"text-green-600 font-bold":"text-gray-500"),children:[this.state.password_validation.special?Object(u.jsx)(h.t,{className:"inline-block"}):Object(u.jsx)(h.nb,{className:"inline-block"})," ",Object(u.jsx)("span",{children:"A special character"})]})]})]});return Object(u.jsx)(u.Fragment,{children:Object(u.jsx)(_.d,{widthSizeClass:_.b.medium,backDrop:!0,backDropClose:!1,close:function(){return o.props.close()},displayClose:!0,theme:_.c.default,title:Object(u.jsx)("label",{className:"text-xl m-0 text-bold text-gray-700",children:"Change password"}),padding:{body:!0,footer:!0,title:!0},children:Object(u.jsx)("div",{className:"bg-white rounded-b-md",children:Object(u.jsxs)("form",{onSubmit:this.updateAccountHandler,children:[this.state.error.target===D.main_success&&Object(u.jsx)("div",{className:"p-2 m-2 text-center rounded-md bg-green-200 text-green-700 animate__zoomIn animate__animated",children:this.state.error.msg}),this.state.error.target===D.main__error&&Object(u.jsx)("div",{className:"p-2 m-2 text-center rounded-md bg-red-200 text-red-700 animate__zoomIn animate__animated",children:this.state.error.msg}),Object(u.jsx)("div",{className:"mt-2",children:Object(u.jsxs)("div",{className:"p-2 ",children:[Object(u.jsx)("label",{htmlFor:"title",className:"d-block",children:"Current password"}),Object(u.jsx)("input",{type:"password",name:"old_password",value:this.state.old_password,className:"font-bold input-white w-20 inline-block  ".concat((null===(e=this.state.error)||void 0===e?void 0:e.target)===D.old_password?"border-red-500 border-2":"border-gray-500 border-2"),placeholder:"Current password",onChange:this.handleChange,disabled:this.state.loading,required:!0}),(null===(t=this.state.error)||void 0===t?void 0:t.target)===D.old_password&&Object(u.jsx)("span",{className:"text-red-600",children:null===(s=this.state.error)||void 0===s?void 0:s.msg})]})}),Object(u.jsx)("div",{className:"mt-3",children:Object(u.jsxs)("div",{className:"p-2 ",children:[Object(u.jsx)("label",{htmlFor:"title",className:"d-block",title:"Re-enter the new password",children:"New Password"}),Object(u.jsx)("input",{type:"password",name:"new_password",value:this.state.new_password,className:"font-bold input-white w-20 inline-block  ".concat((null===(a=this.state.error)||void 0===a?void 0:a.target)===D.new_password?"border-red-500 border-2":"border-gray-500 border-2"),placeholder:"New password",onChange:this.handleChange,disabled:this.state.loading,required:!0}),(null===(i=this.state.error)||void 0===i?void 0:i.target)===D.new_password&&Object(u.jsx)("span",{className:"text-red-600",children:null===(r=this.state.error)||void 0===r?void 0:r.msg})]})}),d,Object(u.jsx)("div",{className:"mt-2",children:Object(u.jsxs)("div",{className:"p-2 ",children:[Object(u.jsx)("label",{htmlFor:"title",className:"d-block",title:"Re-enter the new password",children:"Re-Password"}),Object(u.jsx)("input",{type:"password",name:"re_new_password",value:this.state.re_new_password,className:"font-bold input-white w-20 inline-block  ".concat((null===(l=this.state.error)||void 0===l?void 0:l.target)===D.re_new_password?"border-red-500 border-2":"border-gray-500 border-2"),placeholder:"Re-New password",onChange:this.handleChange,disabled:this.state.loading,required:!0}),(null===(c=this.state.error)||void 0===c?void 0:c.target)===D.re_new_password&&Object(u.jsx)("span",{className:"text-red-600",children:null===(n=this.state.error)||void 0===n?void 0:n.msg})]})}),Object(u.jsx)("div",{className:"p-2",children:Object(u.jsx)("button",{className:"py-2 font-bold  px-8 rounded bg-hero text-white inline-block",disabled:this.state.loading,type:"submit",children:!0===this.state.loading?Object(u.jsx)("b",{className:"animate__animated animate__fadeIn animate__infinite",children:"Changing password..."}):"Change password"})})]})})})})}}]),s}(d.a.Component),R=Object(m.b)((function(e){return{auth:e.auth}}),{FC_ChangePassword:F.c})(L),V=function(e){var t=e.documents,s=e.selected_category,a=e.selected_sub_category,i=e.selectDoc,r=e.addNewDoc,l=e.categories,c=e.sub_categories,n=e.Delete,d=[];return null===s?d=t:null===a?d=t.filter((function(e){return e.category_id===(null===s||void 0===s?void 0:s.user_detail_category_id)})):null!==a&&(d=t.filter((function(e){return e.category_id===s.user_detail_category_id&&e.sub_category_id===a.user_detail_subcategory_id}))),Object(u.jsxs)("div",{className:"",children:[Object(u.jsxs)("div",{className:"p-2 border-b border-gray-200 rounded-md flex bg-white justify-between items-center",children:[Object(u.jsxs)("section",{children:[Object(u.jsx)("h1",{className:"".concat(null===a?"text-2xl":"text-xl","  m-0  text-blue-800"),children:null===s?"All details":Object(u.jsxs)(o.Fragment,{children:[null===s||void 0===s?void 0:s.title," ",null!==a&&Object(u.jsxs)("b",{className:"block -mt-1",children:[" ",a.title]})]})}),Object(u.jsx)("p",{className:"m-0 text-sm text-gray-400",children:null===a?null===s||void 0===s?void 0:s.description:a.description})]}),Object(u.jsxs)("button",{className:"px-3 py-1 bg-blue-600 rounded hover:bg-blue-800 text-white",onClick:function(){return r()},children:[Object(u.jsx)(h.ib,{className:"text-3xl mx-auto block"}),Object(u.jsx)("span",{className:"text-sm",children:"Add new"})]})]}),Object(u.jsx)("div",{className:"p-2 ",children:d.length<=0?Object(u.jsxs)("div",{className:"p-4 text-center  text-gray-500",children:[Object(u.jsx)(h.o,{className:"text-7xl mx-auto my-2"}),Object(u.jsx)("h2",{className:"text-2xl mb-2",children:"No data found on"}),Object(u.jsxs)("h1",{className:"text-xl mb-2 text-blue-900",children:[null===s?"Any category":null===s||void 0===s?void 0:s.title," ",null!==a&&Object(u.jsxs)("b",{className:"block",children:[" ",null===a||void 0===a?void 0:a.title," "]})]}),Object(u.jsxs)("p",{children:["Please click on ",Object(u.jsx)("b",{children:"Add new"})," and improve your CV"]})]}):d.map((function(e,t){var s,a,r,o=l.find((function(t){return t.user_detail_category_id===e.category_id})),d=c.find((function(t){return t.user_detail_subcategory_id===e.sub_category_id})),m="",b="";return e.validation_status===v.d.Approved?(m="white",b="green-500 "):e.validation_status===v.d.Waiting?(m="white",b="blue-500 "):e.validation_status===v.d.Rejected&&(m="red-100",b="red-500 "),Object(u.jsxs)("div",{className:"flex px-0.5 py-2 cursor-pointer mb-2 rounded shadow-sm-- hover:shadow border hover:bg-blue-100  border-".concat(b,"-100  items-center bg-").concat(m),children:[Object(u.jsxs)("div",{className:"flex-1 pl-2",onClick:function(){return i(e)},children:[Object(u.jsx)("span",{className:"text-sm block text-gray-600",children:null===o||void 0===o?void 0:o.title}),Object(u.jsxs)("div",{className:"  text-lg m-0  text-gray-900",children:[Object(u.jsxs)("h3",{className:"font-bold inline-block",children:[null===d||void 0===d?void 0:d.title,e.title&&" - "+e.title]}),Object(u.jsx)("h3",{className:"inline-block ml-2",children:null===(s=e.category_subcategory_data)||void 0===s?void 0:s.title})]}),void 0!==e.validation_status&&(null===e||void 0===e||null===(a=e.files)||void 0===a?void 0:a.length)>=4&&Object(u.jsx)("span",{className:"text-sm  bg-".concat(b,"-500 py-0.5 px-2 rounded-full text-white"),children:null===e||void 0===e?void 0:e.validation_status})]}),Object(u.jsx)("div",{className:" mx-2",onClick:function(){return i(e)},children:void 0!==e.files&&(null===(r=e.files)||void 0===r?void 0:r.length)>=4&&Object(u.jsx)("button",{className:"p-2",title:"This item has a file",children:Object(u.jsx)(h.k,{className:"text-4xl text-".concat(b,"-400")})})}),e.validation_status!==v.d.Approved&&Object(u.jsx)("div",{className:"px-3",children:Object(u.jsx)("button",{onClick:function(){return n(e.doc_id)},className:"text-4xl text-red-600",children:Object(u.jsx)(h.C,{})})})]},t)}))})]})},H=s(200),M=s(56),U=function(e){var t=e.user,s=e.documentTypes,a=e.documents,i=s.categories,r=s.sub_categories;return a.length<=0?Object(u.jsxs)("div",{className:"p-4 text-center",children:[Object(u.jsx)("h1",{className:"text-3xl font-bold text-gray-500",children:"You have no data to generate the CV"}),Object(u.jsx)("h3",{children:"Please complete the details in order to get your profile"})]}):Object(u.jsx)("div",{children:Object(u.jsxs)("div",{id:"content",className:"p-3 border",style:{width:"2480"},children:[Object(u.jsx)("div",{className:"py-1"}),Object(u.jsx)("div",{className:" ",children:Object(u.jsxs)("div",{className:"flex",children:[Object(u.jsx)("div",{className:"",children:Object(u.jsx)("img",{src:"https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_1280.png",alt:"Profile details",className:"w-28"})}),Object(u.jsxs)("div",{className:"flex-1 pl-3",children:[Object(u.jsxs)("h1",{className:"text-3xl font-bold",children:[t.fname," ",t.lname]}),Object(u.jsxs)("section",{className:"border-t my-1",children:[Object(u.jsx)("span",{className:"text-gray-500 inlinr-block mr-2",children:"Sex:"}),Object(u.jsx)("b",{children:t.sex})]}),Object(u.jsxs)("section",{className:"border-t my-1",children:[Object(u.jsx)("span",{className:"text-gray-500 inlinr-block mr-2",children:"Email:"}),Object(u.jsx)("b",{children:t.email})]}),Object(u.jsxs)("section",{className:"border-t my-1",children:[Object(u.jsx)("span",{className:"text-gray-500 inlinr-block mr-2",children:"Phone:"}),Object(u.jsx)("b",{children:t.phone_number})]})]})]})}),Object(u.jsxs)("div",{className:"mt-2 border-t grid grid-flow-col gap-4",children:[Object(u.jsxs)("div",{className:"",children:[Object(u.jsx)("h1",{className:"p-1 mb-1 bg-gray-600 text-center text-lg font-bold text-white",children:"Education"}),r.filter((function(e){return e.category_id===O.a})).map((function(e){var t=a.filter((function(t){return t.sub_category_id===e.user_detail_subcategory_id}));return t.length<=0?null:Object(u.jsxs)("div",{className:"border p-2 rounded mb-2",children:[Object(u.jsx)("h1",{className:"text-xl text-blue-500 font-bold",children:e.title}),Object(u.jsx)("div",{className:"mt-1",children:t.map((function(e){var t;return Object(u.jsxs)("div",{className:"p-1 border-t",children:[Object(u.jsx)("b",{children:e.category_subcategory_data?e.category_subcategory_data.title:"Document"}),Object(u.jsx)("p",{children:null===(t=e.school)||void 0===t?void 0:t.school_name})]},e.doc_id)}))})]},e.user_detail_subcategory_id)}))]}),Object(u.jsx)("div",{className:"",children:i.filter((function(e){return e.user_detail_category_id!==O.a})).map((function(e){var t=r.filter((function(t){return t.category_id===e.user_detail_category_id}));return t.length<=0?null:Object(u.jsxs)("section",{children:[Object(u.jsx)("h1",{className:"p-1 mb-1 bg-gray-600 text-center text-xl font-bold text-white",children:e.title}),t.map((function(e){var t=a.filter((function(t){return t.sub_category_id===e.user_detail_subcategory_id}));return t.length<=0?null:Object(u.jsxs)("div",{className:"border p-2 rounded mb-2",children:[Object(u.jsx)("h1",{className:"text-xl text-blue-500 font-bold",children:e.title}),Object(u.jsx)("div",{className:"mt-1",children:t.map((function(t){var s;return Object(u.jsxs)("div",{className:"p-1 border-t",children:[t.title.length>=2&&Object(u.jsxs)("b",{children:[t.title," "]}),"-"," ",Object(u.jsx)("b",{children:e.title})," -"," ",Object(u.jsx)("b",{children:t.category_subcategory_data?t.category_subcategory_data.title:"Document"}),Object(u.jsx)("p",{children:null===(s=t.school)||void 0===s?void 0:s.school_name})]},t.doc_id)}))})]},e.user_detail_subcategory_id)}))]},e.user_detail_category_id)}))})]})]})})},B=function(e){Object(c.a)(s,e);var t=Object(n.a)(s);function s(e){var a;return Object(r.a)(this,s),(a=t.call(this,e)).CvRef=void 0,a.componentDidMount=function(){a.setState({loading:!0}),a.props.FC_GetProfileDetails(a.props.auth.user.user_id,(function(e,t){!0===e?a.setState({loading:!1}):a.setState({loading:!1,error:{msg:t,target:"all"}})})),console.log({User_access:Object(b.g)(a.props.auth,M.a.do_exam)})},a.categoryHandler=function(e){return a.setState({selected_category:e,selected_sub_category:null})},a.subCategoryHandler=function(e){return a.setState({selected_sub_category:e})},a.selectDocHandler=function(e){a.setState({selected_doc:e})},a.editDocHandler=function(e){a.setState({edit_doc:e})},a.addNewDocHandler=function(){return a.setState((function(e){return{create_new_doc:!e.create_new_doc}}))},a.deleteDocHandler=function(e){!0===window.confirm("Are you sure you want to delete?")&&a.props.FC_DeleteDocument({doc_id:e,user_id:a.props.auth.user.user_id},(function(e,t){!0===e?console.log("Success"):a.setState({error:{target:"all",msg:""}})}))},a.updateDocHandler=function(e){console.log({update_doc:e}),a.setState({edit_doc:e,selected_doc:null})},a.changePasswordHadler=function(){return a.setState((function(e){return{changePassword:!e.changePassword}}))},a.updateProfileHandler=function(){return a.setState((function(e){return{updateProfile:!e.updateProfile}}))},a.sideNavHandler=function(){return a.setState((function(e){return{side_nav:!e.side_nav}}))},a.openCB_Toogle=function(){return a.setState((function(e){return{printCV:!e.printCV}}))},a.CvRef=d.a.createRef(),a.state={loading:!1,selected_category:null,selected_sub_category:null,selected_doc:null,edit_doc:null,create_new_doc:!1,error:{target:"",msg:""},updateProfile:!1,changePassword:!1,side_nav:!1,printCV:!1},a}return Object(l.a)(s,[{key:"render",value:function(){var e=this,t=this.props.auth,s=t.user,a=t.document_types,r=a.categories,l=a.sub_categories,c=t.documents,n=r.map((function(e){return Object(i.a)(Object(i.a)({},e),{},{count:c.filter((function(t){return t.category_id===e.user_detail_category_id})).length})}));return!0===this.state.loading?Object(u.jsx)("div",{className:"text-center mt-7 font-bold text-4xl text-gray-400 animate-pulse",children:"Loading profile..."}):Object(u.jsxs)(o.Fragment,{children:[!0===this.state.printCV&&Object(u.jsx)(_.d,{widthSizeClass:_.b.extraLarge,backDrop:!0,backDropClose:!0,close:function(){return e.openCB_Toogle()},displayClose:!0,theme:_.c.default,title:Object(u.jsxs)("label",{className:"text-xl m-0 text-bold text-gray-700",children:["Your CV"," "]}),padding:{body:!0,footer:!0,title:!0},children:Object(u.jsx)(U,{user:this.props.auth.user,documentTypes:this.props.auth.document_types,documents:this.props.auth.documents})}),Object(u.jsxs)(H.b,{children:[Object(u.jsx)("section",{onClick:function(){return e.categoryHandler(null)},className:"mt-4",children:Object(u.jsx)(H.a,{title:"Profile",count:0,active:null===this.state.selected_category})}),Object(u.jsx)("div",{className:"pt-1",children:n.map((function(t,s){var a;return Object(u.jsx)(o.Fragment,{children:Object(u.jsx)("section",{onClick:function(){return e.categoryHandler(t)},title:t.description,children:Object(u.jsx)(H.a,{title:t.title,count:t.count,active:(null===(a=e.state.selected_category)||void 0===a?void 0:a.user_detail_category_id)===t.user_detail_category_id})})},t.title)}))}),Object(u.jsxs)("button",{onClick:this.openCB_Toogle,className:"btn bg-blue-200 text-blue-600 text-center mt-2 w-full",children:[Object(u.jsx)(h.h,{className:"inline-block mr-1"})," Open my CV"]})]}),!0===this.state.create_new_doc&&Object(u.jsx)(N.a,{close:this.addNewDocHandler,category:this.state.selected_category,sub_category:null}),null!==this.state.edit_doc&&Object(u.jsx)(E,{categories:this.props.auth.document_types.categories,document:this.state.edit_doc,close:function(){return e.setState({edit_doc:null})}}),null!==this.state.selected_doc&&Object(u.jsx)(o.Fragment,{children:Object(u.jsx)(f,{category:this.state.selected_category,sub_category:this.state.selected_sub_category,doc:this.state.selected_doc,categories:r,sub_categories:l,close:function(){return e.selectDocHandler(null)},Update:this.updateDocHandler,Delete:this.deleteDocHandler})}),!0===this.state.updateProfile&&Object(u.jsx)(k,{close:this.updateProfileHandler}),!0===this.state.changePassword&&Object(u.jsx)(R,{close:this.changePasswordHadler}),Object(u.jsx)("div",{className:"",children:Object(u.jsx)("div",{className:"mt-3  pt-2",children:Object(u.jsx)("div",{className:"shadow rounded bg-white bg-opacity-50",children:null===this.state.selected_category?Object(u.jsx)(j,{user:s,access_name:this.props.auth.user_access.role,district_name:this.props.auth.user_access.district_name,school_name:this.props.auth.user_access.school_name,changePassword:this.changePasswordHadler,editProfile:this.updateProfileHandler}):Object(u.jsx)(V,{documents:c,selected_category:this.state.selected_category,selected_sub_category:this.state.selected_sub_category,selectDoc:this.selectDocHandler,addNewDoc:this.addNewDocHandler,categories:r,sub_categories:l,Delete:this.deleteDocHandler})})})})]})}}]),s}(d.a.PureComponent),Y=Object(m.b)((function(e){return{auth:e.auth}}),{FC_GetProfileDetails:b.L,FC_DeleteDocument:b.B})(B)}}]);
//# sourceMappingURL=58.0b4eac2f.chunk.js.map