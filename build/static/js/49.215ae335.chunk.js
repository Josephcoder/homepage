(this["webpackJsonpreact-redux-typescript-advance"]=this["webpackJsonpreact-redux-typescript-advance"]||[]).push([[49],{690:function(e,t,s){"use strict";s.d(t,"g",(function(){return m})),s.d(t,"c",(function(){return x})),s.d(t,"f",(function(){return f})),s.d(t,"b",(function(){return h})),s.d(t,"d",(function(){return j})),s.d(t,"e",(function(){return b})),s.d(t,"a",(function(){return O}));var c,r=s(5),n=s.n(r),a=s(7),i=s(10),o=s.n(i),l=s(6),d=s(8),u=s(16),p=s(14),m=30;!function(e){e.waiting="waiting",e.approved="approved",e.rejected="rejected"}(c||(c={}));var x=function(e,t){return function(){var s=Object(a.a)(n.a.mark((function s(c){return n.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:c({type:l.a.BLOCK_USER_TO_SYSTEM,payload:{id:e,page:t}});case 1:case"end":return s.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}()},f=function(e,t){return function(){var s=Object(a.a)(n.a.mark((function s(c){return n.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:c({type:l.a.UNBLOCK_USER_TO_SYSTEM,payload:{id:e,page:t}});case 1:case"end":return s.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}()},h=function(e,t){return function(){var s=Object(a.a)(n.a.mark((function s(c){return n.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:c({type:l.a.ASSIGN_ROLE_TO_USER,payload:{data:e,page:t}});case 1:case"end":return s.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}()},j=function(e,t){return function(){var s=Object(a.a)(n.a.mark((function s(c){return n.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:c({type:l.a.CUSTOMIZE_USER_ACCESS,payload:{data:e,page:t}});case 1:case"end":return s.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}()},b=function(e,t){return function(){var s=Object(a.a)(n.a.mark((function s(c){return n.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:c({type:l.a.RESET_USER_ACCESS,payload:{user_id:e,page:t}});case 1:case"end":return s.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}()},O=function(){var e=Object(a.a)(n.a.mark((function e(t,s){var c;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(!0,"",null),e.prev=1,Object(u.b)(),e.next=5,o.a.get("".concat(d.a.USER,"/check/").concat(t));case 5:c=e.sent,console.log("=================FC_GetUserBySearch==================="),console.log({FC_GetUserBySearch:c}),console.log("=================FC_GetUserBySearch==================="),s(!1,"",c.data),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),console.error({user_error:e.t0}),s(!1,Object(p.a)(e.t0),null);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t,s){return e.apply(this,arguments)}}()},723:function(e,t,s){"use strict";s.r(t),s.d(t,"UserAccess",(function(){return A}));var c=s(5),r=s.n(c),n=s(7),a=s(25),i=s(24),o=s(27),l=s(26),d=s(10),u=s.n(d),p=s(4),m=s.n(p),x=s(71),f=s(12),h=s(718),j=s(694),b=s(23),O=s(37),v=s(3),g=s(690),y=s(124),w=s(21),P=s(8),N=s(14),_=s(1),k=function(e){Object(o.a)(s,e);var t=Object(l.a)(s);function s(e){var c;return Object(a.a)(this,s),(c=t.call(this,e)).setViewPermission=function(e){c.setState({viewPermission:e})},c.setLoadindRequest=function(e){c.setState({loadindRequest:e})},c.setCreatePermission=function(e){c.setState({createPermission:e})},c.setUpdatePermission=function(e){c.setState({updatePermission:e})},c.setDeletePermission=function(e){c.setState({deletePermission:e})},c.setLoadind=function(e){c.setState({loading:e})},c.overrideUserAccess=function(e,t){if(e&&t&&t.length>0){var s=[],r=function(c){if(Object.prototype.hasOwnProperty.call(e,c)){var r=t.find((function(t){return t.id===e[c].id}));r?s.push(r):s.push(e[c])}};for(var n in e)r(n);c.props.setUserAccess(s)}},c.componentDidMount=function(){c.props.userInfo&&c.props.userInfo.custome_access?(c.props.userInfo.default_access&&c.overrideUserAccess(c.props.userInfo.default_access.access,c.props.userInfo.custome_access.access),c.setLoadind(!1)):(c.props.userInfo&&c.props.userInfo.default_access&&c.props.setUserAccess(c.props.userInfo.default_access.access),c.setLoadind(!1))},c.tableData=function(){return c.props.userAccess?c.props.userAccess.map((function(e,t){return Object(_.jsxs)("tr",{className:"text-left border-b border-gray-200 cursor-pointer hover:bg-gray-100 ".concat(c.props.currentAccess&&c.props.currentAccess.id===e.id&&"bg-gray-200 border my-3 hover:bg-gray-100"),onClick:function(){return c.props.currentAccess&&c.props.currentAccess.id===e.id?(c.props.setCurrentAccess(null),c.setCreatePermission(!1),c.setViewPermission(!1),c.setUpdatePermission(!1),c.setDeletePermission(!1)):(c.props.setCurrentAccess(e),c.setCreatePermission(e.permitted.create),c.setViewPermission(e.permitted.view),c.setUpdatePermission(e.permitted.update),c.setDeletePermission(e.permitted.delete))},children:[Object(_.jsx)("td",{className:"px-2 py-1",children:Object(_.jsx)("label",{className:"inline-flex items-center",children:Object(_.jsx)("span",{className:"text-gray-900 capitalize text-xl font-normal cursor-pointer",children:e.task})})}),Object(_.jsx)("td",{children:Object(_.jsxs)("div",{className:"inline-flex items-center text-xl ".concat(e.permitted.create?"text-green-700":"text-red-700"),children:[e.permitted.create?Object(_.jsx)(j.a,{}):Object(_.jsx)(f.R,{}),e.permitted.create?" Yes":"No"]})}),Object(_.jsx)("td",{children:Object(_.jsxs)("div",{className:"inline-flex items-center text-xl ".concat(e.permitted.view?"text-green-700":"text-red-700"),children:[e.permitted.view?Object(_.jsx)(j.a,{}):Object(_.jsx)(f.R,{}),e.permitted.view?" Yes":"No"]})}),Object(_.jsx)("td",{children:Object(_.jsxs)("div",{className:"inline-flex items-center text-xl ".concat(e.permitted.update?"text-green-700":"text-red-700"),children:[e.permitted.update?Object(_.jsx)(j.a,{}):Object(_.jsx)(f.R,{}),e.permitted.update?" Yes":"No"]})}),Object(_.jsx)("td",{children:Object(_.jsxs)("div",{className:"inline-flex items-center text-xl ".concat(e.permitted.delete?"text-green-700":"text-red-700"),children:[e.permitted.delete?Object(_.jsx)(j.a,{}):Object(_.jsx)(f.R,{}),e.permitted.delete?" Yes":"No"]})})]},t+e.id+Math.random())})):[Object(_.jsx)("tr",{children:Object(_.jsx)("td",{children:"No data"})},Math.random())]},c.handleCustomization=function(){var e=Object(n.a)(r.a.mark((function e(t){var s,n,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!c.props.userInfo){e.next=26;break}if(c.setLoadindRequest(!0),s=null,s=c.props.userInfo.custome_access,n=-1,e.prev=6,s&&c.props.currentAccess?(n=s.access.findIndex((function(e){return e.id===c.props.currentAccess.id})))>=0?(s.access[n].permitted.create=c.state.createPermission,s.access[n].permitted.view=c.state.viewPermission,s.access[n].permitted.update=c.state.updatePermission,s.access[n].permitted.delete=c.state.deletePermission):s.access.push({id:c.props.currentAccess.id,task:c.props.currentAccess.task,key:c.props.currentAccess.key,permitted:{create:c.state.createPermission,view:c.state.viewPermission,update:c.state.updatePermission,delete:c.state.deletePermission}}):c.props.currentAccess&&(s={access:[{id:c.props.currentAccess.id,task:c.props.currentAccess.task,key:c.props.currentAccess.key,permitted:{create:c.state.createPermission,view:c.state.viewPermission,update:c.state.updatePermission,delete:c.state.deletePermission}}],user_id:c.props.userInfo.user_id,custome_user_access_id:""}),!s){e.next=19;break}if(null===c.props.userInfo.custome_access){e.next=15;break}return e.next=12,u.a.patch("".concat(P.a.USER,"/access/custom"),{access:s.access,user_id:c.props.userInfo.user_id});case 12:a=e.sent,e.next=18;break;case 15:return e.next=17,u.a.post("".concat(P.a.USER,"/access/custom"),{access:s.access,user_id:c.props.userInfo.user_id});case 17:a=e.sent;case 18:a&&(s.custome_user_access_id=a.data.data.custome_user_access_id,c.props.customizeUserAccess(s,c.props.currentPage),s&&c.props.userInfo.default_access&&c.overrideUserAccess(c.props.userInfo.default_access.access,s.access),c.props.PushPopupAlert({title:"Resetting User Access complete successfully",theme:w.a.info}),s=null,c.props.setCurrentAccess(null),c.setCreatePermission(!1),c.setViewPermission(!1),c.setUpdatePermission(!1),c.setDeletePermission(!1));case 19:e.next=25;break;case 21:e.prev=21,e.t0=e.catch(6),console.error({customize_access:e.t0}),c.props.PushPopupAlert({title:Object(N.a)(e.t0),theme:w.a.danger});case 25:c.setLoadindRequest(!1);case 26:case"end":return e.stop()}}),e,null,[[6,21]])})));return function(t){return e.apply(this,arguments)}}(),c.state={loading:!0,loadindRequest:!1,createPermission:!1,viewPermission:!1,updatePermission:!1,deletePermission:!1},c}return Object(i.a)(s,[{key:"render",value:function(){var e=this;return void 0===this.props.userInfo?Object(_.jsx)(O.a,{to:"/users"}):this.state.loading||null===this.props.userInfo?Object(_.jsx)("div",{className:"text-center py-7 font-bold text-4xl text-gray-400 animate-pulse",children:"Loading User Access..."}):Object(_.jsx)("div",{children:Object(_.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mx-1 my-2",children:[Object(_.jsxs)("div",{className:"col-span-1 md:col-span-3 bg-white w-full overflow-x-auto border rounded text-center p-2 ".concat(this.props.currentAccess?"hidden md:block":""),children:[Object(_.jsx)("span",{className:"text-gray-600 mt-2 font-semibold text-2xl",children:"Settings"}),!this.state.loading&&Object(_.jsx)("div",{className:"overflow-x-auto w-full",children:Object(_.jsx)(y.a,{columns:[{columnTitle:"Access Name",alignText:"left",padding:"p-3"},{columnTitle:"Create",alignText:"left"},{columnTitle:"View",alignText:"left"},{columnTitle:"Update",alignText:"left"},{columnTitle:"Delete",alignText:"left"}],rows:this.tableData,pagination:!1,search:!0,searchBG:"bg-gray-50",thColor:"gray"})})]}),Object(_.jsx)("div",{className:"col-span-1 md:col-span-2",children:this.props.currentAccess?Object(_.jsxs)("div",{className:"",children:[Object(_.jsx)("h1",{className:"text-2xl md:text-3xl font-semibold text-center my-2 text-gray-900",children:"Customize User Access"}),Object(_.jsx)("div",{className:"flex justify-center mb-3",children:Object(_.jsxs)("h2",{className:"text-2xl font-semibold text-center text-gray-600 flex flex-row items-center",children:[Object(_.jsx)(x.j,{className:"w-7 h-7"}),this.props.currentAccess.task]})}),Object(_.jsx)("div",{className:"flex flex-col px-2 md:px-1",children:Object(_.jsxs)("form",{className:"flex flex-col items-center",onSubmit:function(t){return e.handleCustomization(t)},children:[Object(_.jsxs)("div",{className:"inline-flex gap-2 items-center",children:[Object(_.jsx)(h.a,{className:"w-7 h-7 text-gray-600"}),Object(_.jsxs)("div",{className:"flex flex-col",children:[Object(_.jsx)("h3",{className:"font-semibold text-xl",children:"Create"}),Object(_.jsx)("span",{className:"text-gray-600 text-sm md:pr-1",children:"This permission gives the user the ability to create"})]}),Object(_.jsx)("input",{type:"checkbox",className:"form-checkbox h-7 w-7 text-teal-600",onChange:function(){return e.setCreatePermission(!e.state.createPermission)},checked:this.state.createPermission,disabled:this.state.loadindRequest})]}),Object(_.jsxs)("div",{className:"inline-flex gap-2 items-center",children:[Object(_.jsx)(f.Nb,{className:"w-7 h-7 text-gray-600"}),Object(_.jsxs)("div",{className:"flex flex-col",children:[Object(_.jsx)("h3",{className:"font-semibold text-xl",children:"View"}),Object(_.jsx)("span",{className:"text-gray-600 text-sm md:pr-4",children:"This permission gives the user the ability to view"})]}),Object(_.jsx)("input",{type:"checkbox",className:"form-checkbox h-7 w-7 text-teal-600",onChange:function(){return e.setViewPermission(!e.state.viewPermission)},checked:this.state.viewPermission,disabled:this.state.loadindRequest})]}),Object(_.jsxs)("div",{className:"inline-flex gap-2 items-center",children:[Object(_.jsx)(f.H,{className:"w-7 h-7 text-gray-600"}),Object(_.jsxs)("div",{className:"flex flex-col",children:[Object(_.jsx)("h3",{className:"font-semibold text-xl",children:"Update"}),Object(_.jsx)("span",{className:"text-gray-600 text-sm",children:"This permission gives the user the ability to update"})]}),Object(_.jsx)("input",{type:"checkbox",className:"form-checkbox h-7 w-7 text-teal-600",onChange:function(){return e.setUpdatePermission(!e.state.updatePermission)},checked:this.state.updatePermission,disabled:this.state.loadindRequest})]}),Object(_.jsxs)("div",{className:"inline-flex gap-2 items-center",children:[Object(_.jsx)(f.F,{className:"w-7 h-7 text-gray-600"}),Object(_.jsxs)("div",{className:"flex flex-col",children:[Object(_.jsx)("h3",{className:"font-semibold text-xl",children:"Delete"}),Object(_.jsx)("span",{className:"text-gray-600 text-sm md:pr-1",children:"This permission gives the user the ability to delete"})]}),Object(_.jsx)("input",{type:"checkbox",className:"form-checkbox h-7 w-7 text-teal-600",onChange:function(){return e.setDeletePermission(!e.state.deletePermission)},checked:this.state.deletePermission,disabled:this.state.loadindRequest})]}),Object(_.jsxs)("div",{className:"flex items-center justify-center w-full py-3 gap-2",children:[Object(_.jsx)("button",{className:"btn bg-gray-500 hover:bg-gray-700 focus:outline-none text-white",disabled:this.state.loadindRequest,onClick:function(){e.props.setCurrentAccess(null),e.setCreatePermission(!1),e.setViewPermission(!1),e.setUpdatePermission(!1),e.setDeletePermission(!1)},children:"Cancel"}),Object(_.jsx)("button",{className:"btn btn-blue",disabled:this.state.loadindRequest,children:this.state.loadindRequest?"Processing..":"Save Change"})]})]})})]}):Object(_.jsxs)("div",{className:"w-full hidden md:flex flex-col items-center text-gray-600 gap-1 py-3",children:[Object(_.jsx)(f.Wb,{className:"w-20 h-20"}),Object(_.jsx)("span",{className:"text-8 md:text-12",children:"Choose Access to Customize"})]})})]})})}}]),s}(p.Component),A=m.a.memo(Object(b.b)(null,{customizeUserAccess:g.d,PushPopupAlert:v.Ub})(k))}}]);
//# sourceMappingURL=49.215ae335.chunk.js.map