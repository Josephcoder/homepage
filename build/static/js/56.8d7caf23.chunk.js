(this["webpackJsonpreact-redux-typescript-advance"]=this["webpackJsonpreact-redux-typescript-advance"]||[]).push([[56],{199:function(e,t,s){"use strict";var r=s(14),a=s(4),n=s(85),c=s(10),o=s(1);t.a=function(e){var t,s,l=e.tableId&&"myTable"!==e.tableId?e.tableId:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t="",s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=s.length,a=0;a<e;a++)t+=s.charAt(Math.floor(Math.random()*r));return t}(),i=Object(a.useState)(0),d=Object(r.a)(i,2),u=d[0],b=d[1],f=Object(a.useState)(1),h=Object(r.a)(f,2),j=h[0],m=h[1],x=Object(a.useState)(1),p=Object(r.a)(x,2),g=p[0],O=p[1],v=Object(a.useState)(),y=Object(r.a)(v,2),N=y[0],w=y[1],S=Object(a.useState)(10),_=Object(r.a)(S,2),k=_[0],C=_[1],I=Object(a.useState)(0),T=Object(r.a)(I,2),E=T[0],B=T[1],U=Object(a.useState)(0),M=Object(r.a)(U,2),A=M[0],L=M[1];Object(a.useEffect)((function(){e.pagination&&R()}));var R=function(){t=document.getElementById(l),s=t.getElementsByTagName("tr"),b(s.length),m(Math.ceil(u/k)),B((g-1)*k),L(Math.min(E+k-1,u-1));var e=Array.from(Array(j+1-1).keys()).map((function(e){return 1+e}));N&&e.length===N.length||w(e);for(var r=0;r<s.length;r++)s[r].style.display=r>=E&&r<=A?"":"none"};return Object(o.jsxs)("div",{className:"".concat(e.tableSize," overflow-x-auto"),children:[e.search&&Object(o.jsx)("div",{className:"".concat(e.searchBG," w-full mb-2"),children:e.search&&Object(o.jsxs)("div",{className:"bg-white rounded flex items-center w-full p-2 border-2 border-gray-500",children:[Object(o.jsx)(c.Cb,{className:"h-5 w-5 fill-current text-gray-400"}),Object(o.jsx)("input",{type:"search",placeholder:"search",onChange:function(s){return function(s,r){var a,n,c,o,i;for("field"===r&&"all"===s&&(s=""),a=s.toLowerCase(),n=(t=document.getElementById(l)).getElementsByTagName("tr"),o=0;o<n.length;o++)for(i=0;i<e.columns.length;i++)if(c=n[o].getElementsByTagName("td")[i]){if((c.textContent||c.innerText).toLowerCase().indexOf(a)>-1){n[o].style.display="";break}n[o].style.display="none"}}(s.target.value)},className:"w-full h-6 pl-4 text-sm outline-none focus:outline-none bg-white",disabled:e.loading}),e.pagination&&Object(o.jsx)("div",{className:"select",children:Object(o.jsxs)("select",{className:"text-base outline-none focus:outline-none bg-white",onChange:function(e){return C(Number(e.target.value))},disabled:e.loading,children:[Object(o.jsx)("option",{value:"10",children:"10"}),Object(o.jsx)("option",{value:"25",children:"25"}),Object(o.jsx)("option",{value:"50",children:"50"}),Object(o.jsx)("option",{value:"100",children:"100"})]})})]})}),Object(o.jsxs)("div",{className:"overflow-x-auto w-full",children:[Object(o.jsxs)("table",{className:e.tableClass?e.tableClass:"w-full shadow ".concat(e.rounded&&"sm:rounded-lg"," table-auto order-table"),id:l,children:[!e.hideColumns&&Object(o.jsx)("thead",{className:"bg-white border-b-2 border-gray-300 text-gray-600 font-bold text-base",children:Object(o.jsx)("tr",{className:"text-left tracking-wide bg-".concat(e.thColor,"-100 border-b-2 border-").concat(e.thColor,"-500 text-").concat(e.thColor,"-600"),children:e.columns.map((function(e,t){return Object(o.jsx)("th",{className:"".concat(e.padding," text-").concat(e.alignText," px-3 py-2 ").concat(e.isSortAllowed&&"cursor-pointer"),onClick:function(){return e.isSortAllowed&&function(e){var t,s,r,a,n,c,o,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"asc",d=0;if(r=!0,t=document.getElementById(e))for(;r;){for(r=!1,s=t.rows,a=1;a<s.length-1;a++)if(o=!1,n=s[a].getElementsByTagName("TD")[l],c=s[a+1].getElementsByTagName("TD")[l],"asc"===i&&n&&c){if(n.innerHTML.toLowerCase()>c.innerHTML.toLowerCase()){o=!0;break}}else if("desc"===i&&n&&c&&n.innerHTML.toLowerCase()<c.innerHTML.toLowerCase()){o=!0;break}o&&s[a].parentNode?(s[a].parentNode.insertBefore(s[a+1],s[a]),r=!0,d++):0===d&&"asc"===i&&(i="desc",r=!0)}}(l,t)},children:Object(o.jsxs)("div",{className:"flex items-center gap-1",children:[e.columnTitle,e.isSortAllowed&&Object(o.jsx)(n.i,{})]})},t)}))})}),Object(o.jsx)("tbody",{id:"table-data",className:"bg-white text-black text-base",children:e.rows()})]}),e.pagination&&Object(o.jsxs)("div",{className:"sm:flex-1 sm:flex sm:items-center sm:justify-between mt-4 work-sans",children:[Object(o.jsx)("div",{children:Object(o.jsxs)("span",{className:"text-xs xs:text-sm text-gray-900",children:["Showing 1 to ",k," of ",u-1," Entries"]})}),Object(o.jsx)("div",{children:Object(o.jsxs)("nav",{className:"inline-flex shadow-sm",children:[Object(o.jsx)("div",{children:Object(o.jsx)("button",{type:"button",className:"inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 text-sm font-medium text-gray-500 ".concat(1!==g&&"bg-white"),"aria-label":"Previous",disabled:1===g||e.loading,onClick:function(){return O(g-1)},children:Object(o.jsx)(c.hb,{className:"h-5 w-5"})})}),Object(o.jsx)("div",{children:N&&N.map((function(t,s){return Object(o.jsx)("button",{className:"-ml-px inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium text-gray-700 ".concat(t!==g?"bg-white":"bg-gray-100 cursor-default"),disabled:t===g||e.loading,onClick:function(){return O(t)},children:t},s)}))}),Object(o.jsx)("div",{children:Object(o.jsx)("button",{type:"button",className:"inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 text-sm leading-5 font-medium text-gray-500 ".concat(g!==j&&"bg-white"),"aria-label":"Next",disabled:g===j||e.loading,onClick:function(){return O(g+1)},children:Object(o.jsx)(c.ib,{className:"h-5 w-5"})})})]})})]})]})]})}},200:function(e,t,s){"use strict";s.d(t,"d",(function(){return b})),s.d(t,"b",(function(){return f})),s.d(t,"f",(function(){return h})),s.d(t,"a",(function(){return j})),s.d(t,"c",(function(){return m})),s.d(t,"e",(function(){return x})),s.d(t,"g",(function(){return p}));var r,a=s(5),n=s.n(a),c=s(7),o=s(8),l=s.n(o),i=s(6),d=s(9),u=s(13);!function(e){e.waiting="waiting",e.approved="approved",e.rejected="rejected"}(r||(r={}));var b=function(){return function(){var e=Object(c.a)(n.a.mark((function e(t){var s;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,Object(u.b)(),e.next=4,l.a.get("".concat(d.a.AUTH,"/users?page=1&limit=500"));case 4:s=e.sent,console.log({users_response:s}),t({type:i.a.FETCH_USERS_ACCESS,payload:s.data.users}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error({user_error:e.t0});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()},f=function(e){return console.log({data:e}),function(){var t=Object(c.a)(n.a.mark((function t(s){return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s({type:i.a.BLOCK_USER_TO_SYSTEM,payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},h=function(e){return function(){var t=Object(c.a)(n.a.mark((function t(s){return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s({type:i.a.UNBLOCK_USER_TO_SYSTEM,payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},j=function(e){return console.log({data:e}),function(){var t=Object(c.a)(n.a.mark((function t(s){return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s({type:i.a.ASSIGN_ROLE_TO_USER,payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},m=function(e){return function(){var t=Object(c.a)(n.a.mark((function t(s){return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s({type:i.a.CUSTOMIZE_USER_ACCESS,payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},x=function(e){return function(){var t=Object(c.a)(n.a.mark((function t(s){return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s({type:i.a.RESET_USER_ACCESS,payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},p=function(e){return console.log({data:e}),function(){var t=Object(c.a)(n.a.mark((function t(s){return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s({type:i.a.VERIFY_ALL_DOCUMENT,payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},832:function(e,t,s){"use strict";s.r(t),s.d(t,"_UserDetails",(function(){return m})),s.d(t,"UserDetails",(function(){return x}));var r=s(21),a=s(20),n=s(23),c=s(22),o=s(4),l=s(25),i=s(15),d=s(10),u=s(199),b=s(16),f=s(197),h=s(200),j=s(1),m=function(e){Object(n.a)(s,e);var t=Object(c.a)(s);function s(e){var a;return Object(r.a)(this,s),(a=t.call(this,e)).componentDidMount=function(){a.setState({loading:!0});var e=a.props.userList.filter((function(e){return e.user_id===a.props.match.params.user_id}));e.length<=0?a.setState({redirect:!0}):a.setState({userInfo:e[0],loading:!1})},a.tableData=function(){var e,t,s,r,n,c,o,l,i,d;return[Object(j.jsxs)("tr",{className:"border-b wrap border-gray-200 hover:bg-gray-100",children:[Object(j.jsx)("td",{className:"p-3 text-left",children:"Names"}),Object(j.jsx)("td",{className:"p-3 text-left font-bold",children:(null===(e=a.state.userInfo)||void 0===e?void 0:e.user_info.fname)+" "+(null===(t=a.state.userInfo)||void 0===t?void 0:t.user_info.lname)})]},1+Math.random()),Object(j.jsxs)("tr",{className:"border-b wrap border-gray-200 hover:bg-gray-100",children:[Object(j.jsx)("td",{className:"p-3 text-left",children:"NID"}),Object(j.jsx)("td",{className:"p-3 text-left font-bold",children:null===(s=a.state.userInfo)||void 0===s?void 0:s.n_id})]},2+Math.random()),Object(j.jsxs)("tr",{className:"border-b wrap border-gray-200 hover:bg-gray-100",children:[Object(j.jsx)("td",{className:"p-3 text-left",children:"Gender"}),Object(j.jsx)("td",{className:"p-3 text-left font-bold",children:"M"===(null===(r=a.state.userInfo)||void 0===r?void 0:r.user_info.sex)?"Male":"Female"})]},3+Math.random()),Object(j.jsxs)("tr",{className:"border-b wrap border-gray-200 hover:bg-gray-100",children:[Object(j.jsx)("td",{className:"p-3 text-left",children:"DOB"}),Object(j.jsx)("td",{className:"p-3 text-left font-bold",children:null===(n=a.state.userInfo)||void 0===n?void 0:n.user_info.date_of_birth})]},4+Math.random()),Object(j.jsxs)("tr",{className:"border-b wrap border-gray-200 hover:bg-gray-100",children:[Object(j.jsx)("td",{className:"p-3 text-left",children:"Email"}),Object(j.jsx)("td",{className:"p-3 text-left font-bold",children:null===(c=a.state.userInfo)||void 0===c?void 0:c.email})]},5+Math.random()),Object(j.jsxs)("tr",{className:"border-b wrap border-gray-200 hover:bg-gray-100",children:[Object(j.jsx)("td",{className:"p-3 text-left",children:"Phone"}),Object(j.jsxs)("td",{className:"p-3 text-left font-bold",children:["+",null===(o=a.state.userInfo)||void 0===o?void 0:o.phone_number]})]},6+Math.random()),Object(j.jsxs)("tr",{className:"border-b wrap border-gray-200 hover:bg-gray-100",children:[Object(j.jsx)("td",{className:"p-3 text-left",children:"Address"}),Object(j.jsxs)("td",{className:"p-3 text-left font-bold",children:[null===(l=a.state.userInfo)||void 0===l?void 0:l.user_info.province," /"," ",null===(i=a.state.userInfo)||void 0===i?void 0:i.user_info.district," /"," ",null===(d=a.state.userInfo)||void 0===d?void 0:d.user_info.sector]})]},7+Math.random())]},a.blockUser=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"block";if(a.setState({feedBack:{type:"",message:""}}),e||a.setState({feedBack:{type:"warning",message:"User Access is required doesn't exist"}}),a.setState({loadindRequest:!0}),!window.confirm("Are sure you want to ".concat(t," this user?")))return a.setState({loadindRequest:!1});"block"===t?a.props.blockUserToSystem(e):a.props.unBlockUserToSystem(e),a.setState({feedBack:{type:"success",message:"User has been ".concat(t,"ed!")},loadindRequest:!1}),e=""},a.state={loading:!1,loadindRequest:!1,userInfo:null,feedBack:null,error:{target:"",msg:""},redirect:!1},a}return Object(a.a)(s,[{key:"render",value:function(){var e,t=this;return this.state.loading||!0!==this.state.redirect?!0===this.state.loading||null===this.state.userInfo?Object(j.jsx)("div",{className:"text-center mt-7 font-bold text-4xl text-gray-400 animate-pulse",children:"Loading User Details..."}):Object(j.jsx)(o.Fragment,{children:Object(j.jsxs)("div",{className:"container mx-auto p-5",children:[this.state.feedBack&&""!==this.state.feedBack.type&&Object(j.jsxs)("div",{className:"alert-".concat(this.state.feedBack.type," flex flex-row items-center relative mb-3"),children:[Object(j.jsx)("span",{className:"absolute top-0 bottom-0 right-0 px-4 py-3",children:Object(j.jsx)(d.y,{className:"h-5 w-5 text-gray-700 hover:font-bold",title:"Close",onClick:function(){return t.setState({feedBack:{type:"",message:""}})}})}),Object(j.jsx)(d.F,{className:"h-10 w-10"}),Object(j.jsxs)("div",{className:"alert-content ml-4",children:[Object(j.jsx)("div",{className:"alert-title font-semibold text-lg",children:"success"===this.state.feedBack.type?"Success":"Error"}),Object(j.jsx)("div",{className:"alert-description text-sm",children:this.state.feedBack.message})]})]}),Object(j.jsxs)("div",{className:"w-full",children:[Object(j.jsxs)("div",{className:"bg-blue-700 flex items-center w-full text-gray-100 gap-1 py-3 px-3 mb-3",children:[Object(j.jsx)(i.b,{to:"/users",className:"uppercase",children:"Users"}),Object(j.jsx)(d.ib,{className:"w-7 h-5"}),Object(j.jsx)("span",{className:"",children:this.state.userInfo.user_info.lname})]}),Object(j.jsxs)("div",{className:"w-full flex items-center bg-white flex-col md:flex-row md:items-start",children:[Object(j.jsxs)("div",{className:"w-1/4 flex flex-col text-center",children:[Object(j.jsx)("div",{className:"image overflow-hidden",children:this.state.userInfo.user_info.photo&&"pic"!==this.state.userInfo.user_info.photo?Object(j.jsx)("img",{className:"h-auto w-7/12 mx-auto rounded-full",src:this.state.userInfo.user_info.photo,alt:""}):Object(j.jsx)(d.a,{className:"w-28 h-28 mx-auto"})}),Object(j.jsx)("div",{className:"flex justify-center my-2",children:Object(j.jsx)("h3",{className:"text-gray-800 text-xl text-bold uppercase",children:this.state.userInfo.default_access&&(null===(e=Object(f.e)(this.props.accessRoles,this.state.userInfo.default_access.system_user_role_id))||void 0===e?void 0:e.role)})}),Object(j.jsx)("div",{className:"my-1",children:!1===this.state.userInfo.is_active?Object(j.jsx)("span",{className:"bg-red-700 py-1 px-2 rounded text-white text-sm",children:"Blocked"}):Object(j.jsx)("span",{className:"bg-green-700 py-1 px-2 rounded text-white text-sm",children:"Active"})}),Object(j.jsxs)("div",{className:"flex flex-col items-center mt-3 gap-2",children:[Object(j.jsx)("div",{children:Object(j.jsxs)(i.b,{className:"btn text-green-700 border-green-700 md:border-2 hover:bg-green-700 hover:text-white transition ease-out duration-500 flex items-center",title:"View User Profile",to:"/users/access/".concat(this.props.match.params.user_id),children:[Object(j.jsx)(d.bb,{}),"User Access"]})}),Object(j.jsx)("div",{children:Object(j.jsxs)("button",{className:" btn text-red-700 border-red-700 md:border-2 hover:bg-red-700 hover:text-white transition ease-out duration-500 flex items-center ",title:"Block User Account",onClick:function(){return!t.state.loadindRequest&&t.state.userInfo&&t.blockUser(t.state.userInfo.user_id)},children:[Object(j.jsx)(d.bb,{}),"Disable user"]})})]})]}),Object(j.jsxs)("div",{className:"w-3/4 flex flex-col p-3 border-dashed md:border-l md:border-t-0 border-t-2 md:border-gray-300",children:[Object(j.jsxs)("div",{className:"border-b border-gray-400 text-4xl font-semibold text-gray-700 py-2",children:[this.state.userInfo.user_info.lname,"'s details"]}),Object(j.jsx)(u.a,{columns:[{columnTitle:"Names",alignText:"left",padding:"p-3"},{columnTitle:"",alignText:"left",padding:"p-3"}],rows:this.tableData,pagination:!1,hideColumns:!0,search:!1})]})]})]})]})}):Object(j.jsx)(l.a,{to:"/users"})}}]),s}(o.Component),x=Object(b.b)((function(e){return{auth:e.auth,userList:e.users,accessRoles:e.access.accessRoles}}),{blockUserToSystem:h.b,unBlockUserToSystem:h.f})(m)}}]);
//# sourceMappingURL=56.8d7caf23.chunk.js.map