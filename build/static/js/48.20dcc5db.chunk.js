(this["webpackJsonpreact-redux-typescript-advance"]=this["webpackJsonpreact-redux-typescript-advance"]||[]).push([[48],{212:function(t,e,r){"use strict";r.d(e,"p",(function(){return u})),r.d(e,"c",(function(){return h})),r.d(e,"m",(function(){return p})),r.d(e,"h",(function(){return f})),r.d(e,"b",(function(){return b})),r.d(e,"l",(function(){return m})),r.d(e,"g",(function(){return g})),r.d(e,"e",(function(){return j})),r.d(e,"o",(function(){return v})),r.d(e,"j",(function(){return x})),r.d(e,"a",(function(){return _})),r.d(e,"k",(function(){return O})),r.d(e,"f",(function(){return y})),r.d(e,"d",(function(){return S})),r.d(e,"n",(function(){return w})),r.d(e,"i",(function(){return E}));var n=r(5),o=r.n(n),a=r(7),c=r(8),s=r.n(c),i=r(6),l=r(9),d=r(12),u=function(t){return function(){var e=Object(a.a)(o.a.mark((function e(r){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(!0,""),e.prev=1,e.next=4,s.a.get("".concat(l.a.APPLICATION,"/roomlocation"));case 4:n=e.sent,r({type:i.a.GET_ALL_ROOM,payload:n.data}),console.log("===================================="),console.log({res:n.data}),console.log("===================================="),t(!1,"",n.data),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),console.error("Err: ",e.t0),t(!1,Object(d.a)(e.t0));case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}()},h=function(t){return function(){var e=Object(a.a)(o.a.mark((function e(r){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r({type:i.a.CREATE_PROVINCE,payload:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},p=function(t){return console.log({data:t}),function(){var e=Object(a.a)(o.a.mark((function e(r){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r({type:i.a.UPDATE_PROVINCE,payload:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},f=function(t){return function(){var e=Object(a.a)(o.a.mark((function e(r){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r({type:i.a.DELETE_PROVINCE,payload:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},b=function(t){return function(){var e=Object(a.a)(o.a.mark((function e(r){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r({type:i.a.CREATE_DISTRICT,payload:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},m=function(t){return console.log({data:t}),function(){var e=Object(a.a)(o.a.mark((function e(r){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r({type:i.a.UPDATE_DISTRICT,payload:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},g=function(t){return console.log({data:t}),function(){var e=Object(a.a)(o.a.mark((function e(r){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r({type:i.a.DELETE_DISTRICT,payload:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},j=function(t){return function(){var e=Object(a.a)(o.a.mark((function e(r){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r({type:i.a.CREATE_SECTOR,payload:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},v=function(t){return function(){var e=Object(a.a)(o.a.mark((function e(r){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r({type:i.a.UPDATE_SECTOR,payload:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},x=function(t){return console.log({data:t}),function(){var e=Object(a.a)(o.a.mark((function e(r){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r({type:i.a.DELETE_SECTOR,payload:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},_=function(t){return console.log({data:t}),function(){var e=Object(a.a)(o.a.mark((function e(r){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r({type:i.a.CREATE_CENTER,payload:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},O=function(t){return console.log({data:t}),function(){var e=Object(a.a)(o.a.mark((function e(r){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r({type:i.a.UPDATE_CENTER,payload:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},y=function(t){return function(){var e=Object(a.a)(o.a.mark((function e(r){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r({type:i.a.DELETE_CENTER,payload:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},S=function(t){return console.log({data:t}),function(){var e=Object(a.a)(o.a.mark((function e(r){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r({type:i.a.CREATE_ROOM,payload:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},w=function(t){return function(){var e=Object(a.a)(o.a.mark((function e(r){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r({type:i.a.UPDATE_ROOM,payload:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},E=function(t){return console.log({delete_room:t}),function(){var e=Object(a.a)(o.a.mark((function e(r){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r({type:i.a.DELETE_ROOM,payload:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},270:function(t,e,r){"use strict";r.d(e,"h",(function(){return u})),r.d(e,"a",(function(){return h})),r.d(e,"i",(function(){return p})),r.d(e,"c",(function(){return f})),r.d(e,"e",(function(){return b})),r.d(e,"g",(function(){return m})),r.d(e,"b",(function(){return g})),r.d(e,"j",(function(){return j})),r.d(e,"d",(function(){return v})),r.d(e,"f",(function(){return x}));var n=r(5),o=r.n(n),a=r(7),c=r(6),s=(r(196),r(13),r(8)),i=r.n(s),l=r(9),d=r(12),u=function(t){return function(){var e=Object(a.a)(o.a.mark((function e(r){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(!0,""),e.prev=1,e.next=4,i.a.get("".concat(l.a.APPLICATION,"/schools"));case 4:n=e.sent,r({type:c.a.GET_SCHOOLS,payload:n.data}),t(!1,"",n.data),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.log("Err: ",e.t0),t(!1,Object(d.a)(e.t0));case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},h=function(t){return console.log({schools:t}),function(){var e=Object(a.a)(o.a.mark((function e(r){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r({type:c.a.CREATE_SCHOOL,payload:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},p=function(t){return function(){var e=Object(a.a)(o.a.mark((function e(r){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r({type:c.a.UPDATE_SCHOOL,payload:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},f=function(t){return function(){var e=Object(a.a)(o.a.mark((function e(r){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r({type:c.a.DELETE_SCHOOL,payload:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},b=function(t,e){return function(){var r=Object(a.a)(o.a.mark((function r(n){var a;return o.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e(!0,""),r.prev=1,r.next=4,i.a.get("".concat(l.a.PLACEMENT,"/requestpost/school/").concat(t));case 4:a=r.sent,console.log({schoolPosts:a.data}),n({type:c.a.FETCH_SCHOOL_POSTS,payload:a.data}),e(!1,""),r.next=14;break;case 10:r.prev=10,r.t0=r.catch(1),console.log("Err: ",r.t0),e(!1,Object(d.a)(r.t0));case 14:case"end":return r.stop()}}),r,null,[[1,10]])})));return function(t){return r.apply(this,arguments)}}()},m=function(t,e){return function(){var r=Object(a.a)(o.a.mark((function r(n){var a;return o.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e(!0,""),r.prev=1,r.next=4,i.a.get("".concat(l.a.PLACEMENT,"/placedcandidate/school/").concat(t));case 4:a=r.sent,console.log({getSchoolPlacement:a.data}),n({type:c.a.GET_SCHOOL_PLACEMENT,payload:a.data}),e(!1,"",a.data),r.next=14;break;case 10:r.prev=10,r.t0=r.catch(1),console.log("Err: ",r.t0),e(!1,Object(d.a)(r.t0));case 14:case"end":return r.stop()}}),r,null,[[1,10]])})));return function(t){return r.apply(this,arguments)}}()},g=function(t){return function(){var e=Object(a.a)(o.a.mark((function e(r){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r({type:c.a.CREATE_SCHOOL_POST,payload:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},j=function(t,e){return console.log({TYPE:t,data:e}),function(){var r=Object(a.a)(o.a.mark((function r(n){return o.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:n({type:c.a.UPDATE_SCHOOL_POST,payload:{TYPE:t,data:e}});case 1:case"end":return r.stop()}}),r)})));return function(t){return r.apply(this,arguments)}}()},v=function(t,e){return function(){var r=Object(a.a)(o.a.mark((function r(n){var a;return o.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e(!0,""),r.prev=1,r.next=4,i.a.get("".concat(l.a.PLACEMENT,"/requestpost/district/").concat(t));case 4:a=r.sent,console.log({districtPosts:a}),n({type:c.a.FETCH_DISTRICT_POSTS,payload:a.data}),e(!1,""),r.next=14;break;case 10:r.prev=10,r.t0=r.catch(1),console.log("Err: ",r.t0),e(!1,Object(d.a)(r.t0));case 14:case"end":return r.stop()}}),r,null,[[1,10]])})));return function(t){return r.apply(this,arguments)}}()},x=function(t,e){return function(){var r=Object(a.a)(o.a.mark((function r(n){var a;return o.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e(!0,""),r.prev=1,r.next=4,i.a.get("".concat(l.a.PLACEMENT,"/placedcandidate/district/").concat(t));case 4:a=r.sent,console.log("===================================="),console.log({getDistrictPlacement:a.data}),console.log("===================================="),n({type:c.a.GET_DISTRICT_PLACEMENT,payload:a.data}),e(!1,"",a.data),r.next=16;break;case 12:r.prev=12,r.t0=r.catch(1),console.log("Err: ",r.t0),e(!1,Object(d.a)(r.t0));case 16:case"end":return r.stop()}}),r,null,[[1,12]])})));return function(t){return r.apply(this,arguments)}}()}},510:function(t,e,r){"use strict";r.r(e),r.d(e,"LocationsSectorInArray",(function(){return E})),r.d(e,"getSchoolById",(function(){return N})),r.d(e,"Schools",(function(){return C}));var n=r(5),o=r.n(n),a=r(7),c=r(20),s=r(19),i=r(22),l=r(21),d=r(8),u=r.n(d),h=r(4),p=r.n(h),f=r(84),b=r(17),m=r(3),g=r(212),j=r(270),v=r(23),x=r(29),_=r(196),O=r(9),y=r(12),S=r(41),w=r(1),E=function(t){var e=[];for(var r in t){var n=t[r].districts;for(var o in n){var a=n[o].sectors;for(var c in a)e.push({province_id:t[r]._id,province_name:t[r].province_name,province_code:t[r].province_code,district_id:n[o]._id,district_name:n[o].district_name,district_code:n[o].district_code,sector_id:a[c].sector_id,sector_name:a[c].sector_name,sector_code:a[c].sector_code})}}return e},N=function(t,e){return t.find((function(t){return t._id===e}))},I=function(t){Object(i.a)(r,t);var e=Object(l.a)(r);function r(t){var n;return Object(c.a)(this,r),(n=e.call(this,t)).setLoading=function(t){n.setState({loading:t})},n.setLoadingSchool=function(t){n.setState({loadingSchool:t})},n.setLoadingRequest=function(t){n.setState({loadingRequest:t})},n.setError=function(t){n.setState({error:t})},n.componentDidMount=function(){!n.props.allRoom.length&&n.state.loading?n.props.getAllRoom((function(t,e){n.setLoading(t),!t&&e.length>0&&console.error(e)})):n.state.loading&&n.setLoading(!1),null!==n.props.education_categories&&0!==n.props.education_categories.length||n.props.loadEducationCategories(n.setLoading),!n.props.schools.length&&n.state.loadingSchool?n.props.getSchools((function(t,e,r){console.log(t,e),n.setLoadingSchool(t),t||(e.length>0&&console.error({loadingCandidatesError:e}),r&&n.setState({schoolList:r}))})):n.setLoadingSchool(!1)},n.handleSubmit=function(){var t=Object(a.a)(o.a.mark((function t(e){var r,a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.preventDefault(),!Object(_.f)(n.state.schoolName)){t.next=3;break}return t.abrupt("return",n.setError({element:"school_name",msg:"School name is required"}));case 3:if(!(n.state.schoolCode<=0)){t.next=5;break}return t.abrupt("return",n.setError({element:"school_code",msg:"Invalid school code, School code less than 0"}));case 5:if(!Object(_.f)(n.state.instituteId)){t.next=7;break}return t.abrupt("return",n.setError({element:"edication_id",msg:"Education Institute is required"}));case 7:if(!Object(_.f)(n.state.districtId)){t.next=9;break}return t.abrupt("return",n.setError({element:"districtId_id",msg:"District is required"}));case 9:if(!Object(_.f)(n.state.sectorId)){t.next=11;break}return t.abrupt("return",n.setError({element:"sector_id",msg:"Sector is required"}));case 11:if(r=n.getSectors().find((function(t){return t.sector_id===n.state.sectorId}))){t.next=14;break}return t.abrupt("return",n.setError({element:"sector_id",msg:"Unknown selected sector"}));case 14:if(n.setLoadingRequest(!0),t.prev=15,"CREATE"!==n.state.modalState){t.next=23;break}return t.next=19,u.a.post("".concat(O.a.APPLICATION,"/schools"),{school_name:n.state.schoolName,school_code:n.state.schoolCode,district_id:n.state.districtId,sector_id:n.state.sectorId,sector_code:r.sector_code,education_category_id:n.state.instituteId});case 19:(a=t.sent).data&&(console.log({res:a}),n.props.createSchool({_id:a.data.data.shool_id,status:a.data.data.status,school_name:a.data.data.school_name,school_code:a.data.data.school_code,sector_code:a.data.data.sector_code,district_id:a.data.data.district_id,sector_id:a.data.data.sector_id,education_category_id:a.data.data.education_category_id}),n.props.PushPopupAlert({title:"New School created successfully",theme:x.a.success}),n.setLoadingRequest(!1),n.setState({schoolName:"",schoolCode:0,districtId:"",sectorId:"",instituteId:"",provinceId:"",thisSchool:null,modalState:""})),t.next=28;break;case 23:if(!n.state.thisSchool||"UPDATE"!==n.state.modalState){t.next=28;break}return t.next=26,u.a.patch("".concat(O.a.APPLICATION,"/schools"),{school_id:n.state.thisSchool._id,school_name:n.state.schoolName,school_code:n.state.schoolCode,district_id:n.state.districtId,sector_id:n.state.sectorId,sector_code:r.sector_code,education_category_id:n.state.instituteId});case 26:(a=t.sent).data&&(console.log({res:a}),n.props.updateSchool({_id:n.state.thisSchool._id,status:!0,sector_code:r.sector_code,school_name:n.state.schoolName,school_code:n.state.schoolCode,district_id:n.state.districtId,sector_id:n.state.sectorId,education_category_id:n.state.instituteId}),n.props.PushPopupAlert({title:"School updated successfully",theme:x.a.success}),n.setLoadingRequest(!1),n.setState({schoolName:"",schoolCode:0,districtId:"",sectorId:"",instituteId:"",provinceId:"",thisSchool:null,modalState:""}));case 28:t.next=35;break;case 30:t.prev=30,t.t0=t.catch(15),console.log({doc_category_error:t.t0}),n.props.PushPopupAlert({title:Object(y.a)(t.t0),theme:x.a.danger}),n.setLoadingRequest(!1);case 35:case"end":return t.stop()}}),t,null,[[15,30]])})));return function(e){return t.apply(this,arguments)}}(),n.handleDelete=function(){var t=Object(a.a)(o.a.mark((function t(e){var r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.confirm("Are you sure do you want to delete this room?")){t.next=14;break}return n.setLoadingRequest(!0),t.prev=2,t.next=5,u.a.delete("".concat(O.a.APPLICATION,"/schools/").concat(e));case 5:(r=t.sent).data&&(console.log({res:r}),n.props.deleteSchool(e),n.props.PushPopupAlert({title:"School deleted successfully",theme:x.a.success})),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(2),console.log({province_error:t.t0}),n.props.PushPopupAlert({title:Object(y.a)(t.t0),theme:x.a.danger});case 13:n.setLoadingRequest(!1);case 14:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e){return t.apply(this,arguments)}}(),n.countSchool=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"DEFAULT",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ALL",r=0;return"DEFAULT"===t?r=n.props.schools.length:"EDUCATION"===t?r=n.props.schools.filter((function(t){return t.education_category_id===e})).length:"DISTRICT"===t&&(r=n.props.schools.filter((function(t){return t.district_id===e})).length),Object(_.h)(r)},n.getProvinceByCode=function(t){return n.props.allRoom.find((function(e){return e.province_code===t}))},n.getDistrictByCode=function(t,e){var r=n.props.allRoom.find((function(e){return e.province_code===t}));return r?r.districts.find((function(t){return t.district_code===e})):void 0},n.getSectorByCode=function(t,e,r){var o=n.props.allRoom.find((function(e){return e.province_code===t}));if(o&&o.districts){var a=o.districts.find((function(t){return t.district_code===e}));return a&&a.sectors?a.sectors.find((function(t){return t.sector_code===r})):void 0}},n.getSectors=function(){var t=n.props.allRoom.find((function(t){return t._id===n.state.provinceId}));if(t&&t.districts.length>0){var e=t.districts.find((function(t){return t._id===n.state.districtId}));if(e)return e.sectors}return null},n.getDistrictData=function(t){var e=[];if(t){var r=n.props.allRoom.find((function(e){return e.province_code.toString()===t.toString()}));e=r?r.districts:[]}else n.props.allRoom.forEach((function(t){for(var r in t.districts)Object.prototype.hasOwnProperty.call(t.districts,r)&&e.push(t.districts[r])}));return e},n.filterSchools=function(t,e,r){var o=n.props.schools;return"ALL"!==t&&(o=o.filter((function(e){return e.education_category_id===t}))),"ALL"!==e&&(o=o.filter((function(t){return t.province_code.toString()===e.toString()}))),"ALL"!==r&&(o=o.filter((function(t){return t.district_code.toString()===r.toString()}))),o},n.state={loading:!0,loadingSchool:!0,loadingRequest:!1,searchInput:"",districtFilterStatus:!1,edicationCategoryFilterStatus:!1,provinceFilterStatus:!1,thisEdication:"ALL",thisProvince:"ALL",thisDistrict:"ALL",district:[],schoolList:n.props.schools,modalState:"",error:null,schoolName:"",schoolCode:0,thisSchool:null,instituteId:"",provinceId:"",districtId:"",sectorId:""},n}return Object(s.a)(r,[{key:"render",value:function(){var t=this;return this.state.loadingSchool||this.state.loading?Object(w.jsx)("div",{className:"text-center mt-7 font-bold text-4xl text-gray-400 animate-pulse",children:"Loading schools..."}):Object(w.jsxs)(p.a.Fragment,{children:[Object(w.jsxs)("div",{className:"w-full my-5 px-1",children:[Object(w.jsx)("div",{className:"flex items-start justify-between my-4",children:Object(w.jsxs)("div",{className:"flex flex-row items-center",children:[Object(w.jsx)(f.b,{className:"text-blue-500 text-5xl"}),Object(w.jsx)("div",{className:"flex flex-col",children:Object(w.jsx)("h1",{className:"text-4xl font-semibold",children:"Schools Management"})})]})}),Object(w.jsxs)("div",{className:"md:w-98 bg-white mx-auto md:p-2",children:[Object(w.jsxs)("section",{className:"flex flex-col-reverse sm:flex-row items-center gap-2 w-full my-2",children:[Object(w.jsx)("div",{className:"w-full sm:w-3/4",children:Object(w.jsx)("input",{onChange:function(e){return t.setState({searchInput:e.target.value})},type:"text",className:"input-white h-10 text-sm border-2 border-gray-400 focus:border-gray-500 w-full",placeholder:"Search school with name or code",value:this.state.searchInput,disabled:!(this.props.allRoom.length>0)})}),Object(w.jsx)("div",{className:"w-full sm:w-1/4",children:Object(w.jsxs)("select",{className:"input-white h-10 text-sm border-2 border-gray-400 focus:border-gray-500 w-full",placeholder:"Filter by status",onChange:function(e){return t.setState({thisProvince:"ALL"===e.target.value?"ALL":Number(e.target.value)})},value:this.state.thisProvince,disabled:!(this.props.allRoom.length>0),children:[Object(w.jsx)("option",{value:"ALL",children:"All province"}),this.props.allRoom.length>0?this.props.allRoom.map((function(t,e){return Object(w.jsx)("option",{value:t.province_code,children:t.province_name},e+t._id)})):Object(w.jsx)("option",{value:"",disabled:!0,children:"No province found!"})]})}),Object(w.jsx)("div",{className:"w-full sm:w-1/4",children:Object(w.jsxs)("select",{className:"input-white h-10 text-sm border-2 border-gray-400 focus:border-gray-500 w-full",placeholder:"Filter by status",onChange:function(e){return t.setState({thisDistrict:"ALL"!==e.target.value?Number(e.target.value):"ALL"})},value:this.state.thisDistrict,disabled:!(this.props.allRoom.length>0),children:[Object(w.jsx)("option",{value:"ALL",children:"All district"}),this.getDistrictData("ALL"!==this.state.thisProvince?this.state.thisProvince:null).length>0?this.getDistrictData("ALL"!==this.state.thisProvince?this.state.thisProvince:null).map((function(t,e){return Object(w.jsx)("option",{value:t.district_code,children:t.district_name},e+t._id)})):Object(w.jsx)("option",{value:"",disabled:!0,children:"No district found!"})]})}),Object(w.jsx)("div",{className:"w-full sm:w-1/4",children:Object(w.jsxs)("select",{className:"input-white h-10 text-sm border-2 border-gray-400 focus:border-gray-500 w-full",placeholder:"Filter by institute",onChange:function(e){return t.setState({thisEdication:e.target.value})},value:this.state.thisEdication,disabled:!(this.props.allRoom.length>0),children:[Object(w.jsx)("option",{value:"ALL",children:"All institute"}),this.props.education_categories&&this.props.education_categories.length>0?this.props.education_categories.map((function(t,e){return Object(w.jsx)("option",{value:t.education_institute_id,children:t.education_category_title},e+t.education_institute_id)})):Object(w.jsx)("option",{value:"",disabled:!0,children:"No institute found!"})]})})]}),Object(w.jsx)("div",{className:"rounded border border-gray-100 my-1 shadow-sm animate__animated animate__fadeIn",children:Object(w.jsxs)("table",{className:"w-full z-0",children:[Object(w.jsx)("thead",{className:"bg-gray-50",children:Object(w.jsxs)("tr",{className:"text-left",children:[Object(w.jsx)("th",{className:"px-3 py-3",children:"#"}),Object(w.jsx)("th",{children:"School code"}),Object(w.jsx)("th",{children:"School name"}),Object(w.jsx)("th",{children:"Institute"}),Object(w.jsx)("th",{children:"Province"}),Object(w.jsx)("th",{children:"District"})]})}),Object(w.jsxs)("tbody",{className:"text-sm",children:[!Object(S.l)(this.filterSchools(this.state.thisEdication,this.state.thisProvince,this.state.thisDistrict),this.state.searchInput).length&&Object(w.jsx)("tr",{className:"border-b border-gray-200 hover:bg-gray-100",children:Object(w.jsx)("td",{className:"p-3 text-center",colSpan:8,children:"No School Found"})},1),this.props.schools.length>0&&!this.state.loading&&Object(S.l)(this.filterSchools(this.state.thisEdication,this.state.thisProvince,this.state.thisDistrict),this.state.searchInput).map((function(e,r){return Object(w.jsxs)("tr",{className:"border-b border-gray-200 hover:bg-gray-100",children:[Object(w.jsx)("td",{className:"p-3 text-left whitespace-nowrap",children:r+1}),Object(w.jsx)("td",{className:"py-3 text-left",children:e.school_code}),Object(w.jsx)("td",{className:"py-3 text-left",children:e.school_name}),Object(w.jsx)("td",{className:"py-3 text-left",children:t.props.education_categories&&t.props.education_categories.filter((function(t){return t.education_institute_id===e.education_category_id})).length>0?t.props.education_categories.filter((function(t){return t.education_institute_id===e.education_category_id}))[0].education_category_title:"No Institute"}),Object(w.jsx)("td",{className:"py-3 text-left",children:t.getProvinceByCode(e.province_code)?t.getProvinceByCode(e.province_code).province_name:"No province "}),Object(w.jsx)("td",{className:"py-3 text-left",children:t.getDistrictByCode(e.province_code,e.district_code)?t.getDistrictByCode(e.province_code,e.district_code).district_name:"No district"})]},r+e._id)}))]})]})})]})]}),this.state.modalState&&Object(w.jsx)(v.d,{backDrop:!0,theme:v.c.default,close:function(){return t.setState({modalState:"",thisSchool:null,schoolName:"",instituteId:"",districtId:"",provinceId:""})},displayClose:!0,backDropClose:!1,title:Object(w.jsxs)("div",{className:"text-gray-600 font-bold text-3xl md:ml-4 inline-flex items-center gap-2",children:[Object(w.jsx)(f.b,{className:"w-11 h-11 text-gray-500 hover:bg-gray-500 hover:text-gray-50 rounded-full p-0 foucs:outline-none"}),"CREATE"===this.state.modalState?"CREATE ":"UPDATE "," ","SCHOOL"]}),widthSizeClass:v.b.medium,padding:{title:!0,body:!1,footer:!1},children:Object(w.jsx)("div",{className:"mx-8 mb-8",children:Object(w.jsxs)("form",{onSubmit:function(e){return t.handleSubmit(e)},children:[Object(w.jsxs)("div",{className:"py-4 text-base leading-6 space-y-4 text-gray-700 sm:text-lg sm:leading-7",children:[Object(w.jsxs)("div",{className:"flex flex-col",children:[Object(w.jsx)("label",{children:"School name"}),Object(w.jsx)("input",{type:"text",className:"text-left input-white w-20 inline-block border-2 ".concat(this.state.error&&"school_name"===this.state.error.element?"border-red-700":"border-gray-500"),placeholder:"School name",value:this.state.schoolName,onChange:function(e){t.setError(null),t.setState({schoolName:e.target.value})},disabled:this.state.loadingRequest}),this.state.error&&"school_name"===this.state.error.element&&Object(w.jsx)("span",{className:"text-red-700",children:this.state.error.msg})]}),Object(w.jsxs)("div",{className:"flex flex-col",children:[Object(w.jsx)("label",{children:"School code"}),Object(w.jsx)("input",{type:"number",className:"text-left input-white w-20 inline-block border-2 ".concat(this.state.error&&"school_code"===this.state.error.element?"border-red-700":"border-gray-500"),placeholder:"School code",value:this.state.schoolCode,onChange:function(e){t.setError(null),t.setState({schoolCode:Number(e.target.value)})},disabled:this.state.loadingRequest}),this.state.error&&"school_code"===this.state.error.element&&Object(w.jsx)("span",{className:"text-red-700",children:this.state.error.msg})]}),Object(w.jsxs)("div",{className:"flex flex-col",children:[Object(w.jsx)("label",{children:"Institutes"}),Object(w.jsxs)("select",{className:"text-left input-white w-full block border-2 py-3 px-4 pr-8 ".concat(this.state.error&&"edication_id"===this.state.error.element?"border-red-700":"border-gray-500"),value:this.state.instituteId,onChange:function(e){return t.setState({instituteId:e.target.value})},disabled:this.state.loadingRequest,children:[Object(w.jsx)("option",{value:"",disabled:!0,children:"Choose Institute"}),this.props.education_categories&&this.props.education_categories.map((function(t,e){return Object(w.jsx)("option",{value:t.education_institute_id,children:t.education_category_title},e+t.education_institute_id)}))]}),this.state.error&&"edication_id"===this.state.error.element&&Object(w.jsx)("span",{className:"text-red-700",children:this.state.error.msg})]}),Object(w.jsxs)("div",{className:"flex flex-col",children:[Object(w.jsx)("label",{children:"Province"}),Object(w.jsxs)("select",{className:"text-left input-white w-20 inline-block border-2 border-gray-500",value:this.state.provinceId,onChange:function(e){return t.setState({provinceId:e.target.value})},disabled:this.state.loadingRequest,children:[Object(w.jsx)("option",{value:"",disabled:!0,children:"Choose province"}),this.props.allRoom&&this.props.allRoom.map((function(t,e){return Object(w.jsx)("option",{value:t._id,children:t.province_name},e+t._id)}))]})]}),this.state.provinceId.length>0&&Object(w.jsxs)("div",{className:"flex flex-col",children:[Object(w.jsx)("label",{children:"Sector"}),Object(w.jsxs)("select",{className:"text-left input-white w-20 inline-block border-2 ".concat(this.state.error&&"districtId_id"===this.state.error.element?"border-red-700":"border-gray-500"),value:this.state.districtId,onChange:function(e){return t.setState({districtId:e.target.value})},disabled:this.state.loadingRequest,children:[Object(w.jsx)("option",{value:"",disabled:!0,children:"Choose district"}),this.props.allRoom&&this.props.allRoom.filter((function(e){return e._id===t.state.provinceId}))[0].districts.length>0?this.props.allRoom.filter((function(e){return e._id===t.state.provinceId}))[0].districts.map((function(t,e){return Object(w.jsx)("option",{value:t._id,children:t.district_name},e+t._id)})):Object(w.jsx)("option",{disabled:!0,children:"No District Found"},702)]}),this.state.error&&"districtId_id"===this.state.error.element&&Object(w.jsx)("span",{className:"text-red-700",children:this.state.error.msg})]}),this.state.provinceId.length>0&&Object(w.jsxs)("div",{className:"flex flex-col",children:[Object(w.jsx)("label",{children:"Sector"}),Object(w.jsxs)("select",{className:"text-left input-white w-20 inline-block border-2 ".concat(this.state.error&&"sector_id"===this.state.error.element?"border-red-700":"border-gray-500"),value:this.state.sectorId,onChange:function(e){return t.setState({sectorId:e.target.value})},disabled:this.state.loadingRequest,children:[Object(w.jsx)("option",{value:"",disabled:!0,children:"Choose sector"}),this.props.allRoom&&this.getSectors()?this.getSectors().map((function(t,e){return Object(w.jsx)("option",{value:t.sector_id,children:t.sector_name},e+t.sector_id)})):Object(w.jsx)("option",{disabled:!0,children:"No Sector Found"},702)]}),this.state.error&&"sector_id"===this.state.error.element&&Object(w.jsx)("span",{className:"text-red-700",children:this.state.error.msg})]})]}),Object(w.jsxs)("div",{className:"pt-4 flex justify-between",children:[Object(w.jsx)("button",{onClick:function(){return t.setState({modalState:"",thisSchool:null,schoolName:"",instituteId:"",districtId:"",provinceId:""})},className:"btn bg-gray-400 text-white hover:bg-gray-600 focus:outline-none",type:"button",disabled:this.state.loadingRequest,children:"Exit"}),Object(w.jsx)("button",{className:"btn bg-primary text-white hover:bg-blue-600 focus:outline-none ".concat(this.state.loadingRequest?"animate-pulse":null),type:"submit",disabled:this.state.loadingRequest,children:this.state.loadingRequest?"Loading...":"Save"})]})]})})})]})}}]),r}(h.Component),C=Object(b.b)((function(t){var e=t.auth,r=t.schools,n=t.schoolLevels,o=t.locations;return{auth:e,schools:r.schools,education_categories:n.education_categories,allRoom:o.roomLocation}}),{createSchool:j.a,getSchools:j.h,updateSchool:j.i,getAllRoom:g.p,deleteSchool:j.c,loadEducationCategories:m.Zb,PushPopupAlert:m.tb})(I)}}]);
//# sourceMappingURL=48.20dcc5db.chunk.js.map