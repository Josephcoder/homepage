(this["webpackJsonpreact-redux-typescript-advance"]=this["webpackJsonpreact-redux-typescript-advance"]||[]).push([[45,47],{1292:function(t,e,s){"use strict";s.r(e),s.d(e,"_District",(function(){return F})),s.d(e,"District",(function(){return V}));var o=s(4),n=s.n(o),i=s(7),a=s(11),r=s(24),c=s(23),l=s(26),p=s(25),d=s(8),u=s.n(d),h=s(5),m=s(812),b=s(10),f=s(21),x=s(32),j=s(3),g=s(652),P=s(656),_=s(650),O=s(655),v=s(19),y=s(128),N=s(648),E=s(700),S=s(39),T=s(644),I=s(664),w=s(9),q=s(13),C=s(43),A=s(747),R=s(801),L=s(748),D=s(1),k=[{columnTitle:"SCHOOL",alignText:"left",padding:"p-3"},{columnTitle:"POSITION",alignText:"left",padding:"p-3"},{columnTitle:"Teacher F",alignText:"left",padding:"p-3"},{columnTitle:"Teacher M",alignText:"left",padding:"p-3"},{columnTitle:"REQUESTED POSTS",alignText:"left",padding:"p-3"},{columnTitle:"APPROVED POSTS",alignText:"left",padding:"p-3"},{columnTitle:"ALL POSTS",alignText:"left",padding:"p-3"},{columnTitle:"ALL STAFF",alignText:"left",padding:"p-3"},{columnTitle:"NEW STAFF",alignText:"left",padding:"p-3"},{columnTitle:"VACANT POSTS",alignText:"left",padding:"p-3"},{columnTitle:"",alignText:"left",padding:"p-3"}],M=[{columnTitle:"SCHOOL",alignText:"left",padding:"p-3"},{columnTitle:"POSITION",alignText:"left",padding:"p-3"},{columnTitle:"Teacher F",alignText:"left",padding:"p-3"},{columnTitle:"Teacher M",alignText:"left",padding:"p-3"},{columnTitle:"REQUESTED POSTS",alignText:"left",padding:"p-3"},{columnTitle:"APPROVED POSTS",alignText:"left",padding:"p-3"},{columnTitle:"",alignText:"left",padding:"p-3"}],F=function(t){Object(l.a)(s,t);var e=Object(p.a)(s);function s(t){var o;return Object(r.a)(this,s),(o=e.call(this,t)).setTableColumns=function(t){o.setState({tableColumns:t})},o.setModalState=function(t){o.setState({modalState:t})},o.setFilterByPosition=function(t){o.setState({filterByPosition:t})},o.setInstituteId=function(t){o.setState({institute_id:t})},o.setCategoryId=function(t){o.setState({category_id:t})},o.setQualificationId=function(t){o.setState({qualification_id:t})},o.setLoadingRequest=function(t){o.setState({loadingRequest:t})},o.setLoading=function(t){o.setState({loading:t})},o.setLoadingPost=function(t){o.setState({loadingPost:t})},o.setThisPost=function(t){o.setState({thisPost:t})},o.setThisPostTable=function(t){o.setState({thisPostTable:t})},o.setConfirmedPosts=function(t){o.setState({confirmedPosts:t})},o.setLeftPlacement=function(t){o.setState({leftPlacements:t})},o.setViewPost=function(t){o.setState({viewPost:t})},o.setApprovedPosts=function(t){o.setState({approvedPosts:t})},o.setFormError=function(t){o.setState({formError:t})},o.setSelectedPostId=function(t){o.setState({selectedPostId:t})},o.assignConfirmedPost=function(t,e,s){var n=[],i=o.getLimitations(s,o.props.districtPlacementLimits,t.post_id);if(e>t.requested_post||i.distributed+e>i.general)return o.props.PushPopupAlert({title:"Incorrect value!",theme:S.a.warning});if(o.state.confirmedPosts){var r=(n=Object(a.a)(o.state.confirmedPosts)).findIndex((function(e){return e.requested_post_id===t.post_id}));r>=0?(n[r].confirmed_posts=e,n[r].approval_date=new Date):n.push({requested_post_id:t.post_id,confirmed_posts:e,confirmed_by:o.props.auth.user.user_id,approval_date:new Date,description:"Not defined",requested_post_status:I.c.CONFIRMED})}else n.push({requested_post_id:t.post_id,confirmed_posts:e,confirmed_by:o.props.auth.user.user_id,approval_date:new Date,description:"Not defined",requested_post_status:I.c.CONFIRMED});o.setConfirmedPosts(n)},o.getAssignedValuePost=function(t){var e=0;if(o.state.confirmedPosts){var s=o.state.confirmedPosts.find((function(e){return e.requested_post_id===t}));s&&(e=s.confirmed_posts)}return e},o.loadData=function(t){o.props.document.documentCategory||o.props.getDocumentCategory(),o.props.document.documentSubCategory||o.props.getDocumentSubCategory(),null===o.props.systemPositions&&(o.setLoading(!0),o.props.getPositions((function(t,e){o.setLoading(t),console.log({status:t,msg:e}),e.length&&o.props.PushPopupAlert({title:e,theme:S.a.danger})}))),!o.props.districtPosts.length&&o.state.loadingPost?o.props.fetchDistrictPosts(o.props.auth.user_access.district_id,(function(t,e){o.setLoadingPost(t),t||e.length>0&&o.state.loadingPost&&(console.error("error loading school post: ",e),o.props.PushPopupAlert({title:e,theme:S.a.danger}))})):o.state.loadingPost&&o.setLoadingPost(!1),o.props.districtPlacements?o.state.loading&&o.setLoading(!1):o.props.getDistrictPlacement(o.props.auth.user_access.district_id,(function(t,e){o.setLoading(t),t||e.length>0&&t&&(console.error("error loading school post: ",e),o.props.PushPopupAlert({title:e,theme:S.a.danger}))})),null!==o.props.schoolLevels.education_categories&&0!==o.props.schoolLevels.education_categories.length||(o.setLoading(!0),o.props.loadEducationCategories(o.setLoading)),o.props.districtPlacementLimits?o.state.loading&&o.setLoading(!1):o.props.getDistrictPlacementLimit(o.props.auth.user_access.district_id,t,(function(t,e){o.setLoading(t),t||e.length>0&&t&&(console.error("error loading getDistrictPlacementLimit: ",e),o.props.PushPopupAlert({title:e,theme:S.a.danger}))}))},o.componentDidMount=function(){Object(T.e)(o.props.auth.user_access.district_id)||(null===o.props.activeAcademicSession||"none"===o.props.activeAcademicSession?o.props.getActiveAcademicSession((function(t,e,s){o.setLoading(t),e.length>0&&(console.error({loadingCandidatesError:e}),o.props.PushPopupAlert({title:e,theme:S.a.danger})),s&&"none"!==s&&o.loadData(s._id)})):o.loadData(o.props.activeAcademicSession._id))},o.doPlacement=function(){var t=Object(i.a)(n.a.mark((function t(e){var s,i;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u.a.post("".concat(w.a.PLACEMENT,"/doplace/").concat(e.school_id,"/").concat(e.position_id),{request_id:e._id});case 3:(s=t.sent)&&(console.log("===================================="),console.log({doPlacement:s}),console.log("===================================="),o.props.fetchDistrictPosts(o.props.auth.user_access.district_id,(function(t,e){t||(e.length>0&&o.state.loadingPost&&(console.error("error loading school post: ",e),o.props.PushPopupAlert({title:e,theme:S.a.danger})),o.setLoadingPost(!1))})),i="",i=s.data.length>0?s.data.length===o.state.approvedPosts?"All confirmed posts has been placed on school!":"".concat(s.data.length," of ").concat(o.state.approvedPosts," post(s) has been placed on school!"):"Post request has been confirmed but no placement done!",o.setThisPost(null),o.setApprovedPosts(0),o.setModalState(null),o.setThisPostTable(null),o.setTableColumns(k),o.setSelectedPostId(""),o.setConfirmedPosts(null),o.props.PushPopupAlert({title:i,theme:s.data.length>0?S.a.success:S.a.info})),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),console.error({doPlacement_reply:t.t0}),o.props.PushPopupAlert({title:Object(q.a)(t.t0),theme:S.a.danger});case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}(),o.reDoPlacement=function(){var t=Object(i.a)(n.a.mark((function t(e){var s,i;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u.a.post("".concat(w.a.PLACEMENT,"/doplace/").concat(e.school_id,"/").concat(e.position_id),{request_id:e._id});case 3:(s=t.sent)&&(console.log("===================================="),console.log({reDoPlacement:s}),console.log("===================================="),o.props.fetchDistrictPosts(o.props.auth.user_access.district_id,(function(t,e){t||(e.length>0&&o.state.loadingPost&&(console.error("error loading school post: ",e),o.props.PushPopupAlert({title:e,theme:S.a.danger})),o.setLoadingPost(!1))})),i="",i=s.data.length>0?s.data.length===o.state.approvedPosts?"All confirmed posts has been placed on school!":"".concat(s.data.length," of ").concat(e.occupied_posts?e.occupied_posts-(e.received_posts?e.received_posts:0):0," post(s) has been placed on school!"):"Placement failed, Please wait for the next application period!",o.props.PushPopupAlert({title:i,theme:s.data.length>0?S.a.success:S.a.info})),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),console.error({doPlacement_reply:t.t0}),o.props.PushPopupAlert({title:Object(q.a)(t.t0),theme:S.a.danger});case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}(),o.generateDataForSchoolRequest=function(t){var e=[],s=[],n=[];return o.props.districtPosts&&t.forEach((function(t){var i=o.props.districtPosts.find((function(e){return e._id===t.requested_post_id}));if(i)if(n.push(i),e.includes(i.school_id)){var a=s.findIndex((function(t){return t.school_id===i.school_id}));s[a].available_places.findIndex((function(t){return t.position_id===i.position_id}))<0&&s[a].available_places.push({position_id:i.position_id,requested_teacher:t.confirmed_posts})}else s.push({school_id:i.school._id,school_name:i.school.school_name,request_id:i._id,district_id:i.district_id,sector_id:i.school.sector_id,province_id:i.school.province_id,gender:i.male_number>i.female_number?"F":"M",available_places:[{position_id:i.position_id,requested_teacher:t.confirmed_posts}]})})),{requests:s,posts:n}},o.addSchoolRequest=function(){var t=Object(i.a)(n.a.mark((function t(e,s){var i,a;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i={requested_teachers:e},t.prev=1,t.next=4,u.a.post("".concat(w.a.PLACEMENT,"/requestteachers/"),i);case 4:if(!(a=t.sent)){t.next=11;break}return console.log("===================================="),console.log({addSchoolRequest:a}),console.log("===================================="),t.next=11,o.doPlacement(s[0]);case 11:t.next=17;break;case 13:t.prev=13,t.t0=t.catch(1),console.error({addSchoolRequest_reply:t.t0}),o.props.PushPopupAlert({title:Object(q.a)(t.t0),theme:S.a.danger});case 17:case"end":return t.stop()}}),t,null,[[1,13]])})));return function(e,s){return t.apply(this,arguments)}}(),o.submitRequest=Object(i.a)(n.a.mark((function t(){return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o.state.confirmedPosts&&0!==o.state.confirmedPosts.length){t.next=2;break}return t.abrupt("return",o.setFormError({element:"approved_posts",msg:"Invalid number of approved post"}));case 2:if(o.setLoadingRequest(!0),t.prev=3,"CONFIRM"!==o.state.modalState){t.next=11;break}return t.next=7,u.a.patch("".concat(w.a.PLACEMENT,"/requestpostdistributed"),{confirmedPost:o.state.confirmedPosts});case 7:if(!t.sent){t.next=11;break}return t.next=11,o.addSchoolRequest(o.generateDataForSchoolRequest(o.state.confirmedPosts).requests,o.generateDataForSchoolRequest(o.state.confirmedPosts).posts);case 11:t.next=17;break;case 13:t.prev=13,t.t0=t.catch(3),console.error({post_relpy:t.t0}),o.props.PushPopupAlert({title:Object(q.a)(t.t0),theme:S.a.danger});case 17:o.setLoadingRequest(!1);case 18:case"end":return t.stop()}}),t,null,[[3,13]])}))),o.filterQualifications=function(t,e){var s=t;return Object(T.e)(e)||(s=t.filter((function(t){return t.category_id===e}))),s},o.generateFormData=function(t,e){var s=null;if(!Object(T.e)(t)&&!Object(T.e)(e)&&o.props.systemPositions&&o.props.districtPosts){var n=o.props.systemPositions.filter((function(s){return s.subcategory_id===e&&s.education_institute_id.education_institute_id===t}));o.props.districtPosts.forEach((function(t){var e=n.find((function(e){return e.position_id===t.position_id}));e&&(null===s?s=[{post_id:t._id,school_id:t.school_id,school_name:t.school.school_name,position_id:e.position_id,position_name:e.position_title,female:t.female_number,male:t.male_number,requested_post:t.needed_posts,distributed_post:t.confirmed_posts?t.confirmed_posts:0,total_post:t.female_number+t.male_number+(t.confirmed_posts?t.confirmed_posts:0),total_staff:t.female_number+t.male_number+(t.received_posts?t.received_posts:0),new_teacher:t.received_posts?t.received_posts:0,vacant_post:(t.confirmed_posts?t.confirmed_posts:0)-(t.received_posts?t.received_posts:0),status:t.requested_post_status}]:s.push({post_id:t._id,school_id:t.school_id,school_name:t.school.school_name,position_id:e.position_id,position_name:e.position_title,female:t.female_number,male:t.male_number,requested_post:t.needed_posts,distributed_post:t.confirmed_posts?t.confirmed_posts:0,total_post:t.female_number+t.male_number+(t.confirmed_posts?t.confirmed_posts:0),total_staff:t.female_number+t.male_number+(t.received_posts?t.received_posts:0),new_teacher:t.received_posts?t.received_posts:0,vacant_post:(t.confirmed_posts?t.confirmed_posts:0)-(t.received_posts?t.received_posts:0),status:t.requested_post_status}))}))}return s},o.getAllowedPlacementByDegree=function(t,e){var s=0,n=o.props.activeAcademicSession&&"none"!==o.props.activeAcademicSession?o.props.activeAcademicSession._id:"",i=t.find((function(t){return t.institution_id===o.state.institute_id&&t.subcategory_id===e&&t.post_request_session_id===n}));return i&&(s=i.confirmed_post),s},o.getLimitations=function(t,e){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=0,i=0,a=0,r=e.find((function(t){return t.institution_id===o.state.institute_id&&"none"!==o.props.activeAcademicSession&&t.post_request_session_id===o.props.activeAcademicSession._id&&t.subcategory_id===o.state.qualification_id}));return(n=r?r.confirmed_post:0)>0&&t.forEach((function(t){var e=o.state.confirmedPosts?o.state.confirmedPosts.find((function(e){return e.requested_post_id===t.post_id})):void 0;t.post_id===s?i+=t.total_post-t.distributed_post:i+=t.total_post-t.distributed_post+(e?e.confirmed_posts:0),a+=t.total_post+(e?e.confirmed_posts:0)})),{general:n,distributed:i,allDistributed:a}},o.tableData=function(){if(o.state.loadingPost||null===o.props.districtPlacementLimits)return[Object(D.jsx)("tr",{className:"border-b border-gray-200 hover:bg-gray-100",children:Object(D.jsx)("td",{className:"p-3 text-center",colSpan:11,children:"Loading post request(s)"})},1)];if(!o.generateFormData(o.state.institute_id,o.state.qualification_id))return[Object(D.jsx)("tr",{className:"border-b border-gray-200 hover:bg-gray-100",children:Object(D.jsx)("td",{className:"p-3 text-center",colSpan:11,children:Object(D.jsx)(y.b,{theme:y.a.Dark,value:"Select institute and Qualification to view request!"})})},1)];var t=o.generateFormData(o.state.institute_id,o.state.qualification_id);return 0===t.length?[Object(D.jsx)("tr",{className:"border-b border-gray-200 hover:bg-gray-100",children:Object(D.jsx)("td",{className:"p-3 text-center",colSpan:10,children:"No Data Found"})},1)]:(console.log("===================================="),console.log({dataTable:t}),console.log("===================================="),t.map((function(e,s){return Object(D.jsxs)("tr",{className:"border-b border-gray-200 hover:bg-gray-100 group",children:[Object(D.jsx)("td",{className:"py-3 px-4 text-left",children:s+1}),Object(D.jsx)("td",{className:"py-3 px-4 text-left",children:e.school_name}),Object(D.jsx)("td",{className:"py-3 px-4 text-left",children:e.position_name}),Object(D.jsx)("td",{className:"py-3 px-4 text-left text-base font-bold",children:e.female}),Object(D.jsx)("td",{className:"py-3 px-4 text-left text-base font-bold",children:e.male}),Object(D.jsx)("td",{className:"py-3 px-4 text-left text-base font-bold",children:e.requested_post}),Object(D.jsx)("td",{className:"py-3 px-4 text-left text-base font-medium",children:o.state.thisPostTable&&null!==o.state.modalState?Object(D.jsx)("input",{type:"number",value:o.getAssignedValuePost(e.post_id),className:"rounded border px-2 py-1 w-28",autoFocus:e.post_id===o.state.thisPostTable.post_id,onChange:function(s){return o.assignConfirmedPost(e,Number(s.target.value),t)},onFocus:function(){return o.setSelectedPostId(e.post_id)},disabled:o.state.loadingRequest}):e.status!==I.c.INITIATED?e.distributed_post:"-"}),!o.state.thisPostTable&&Object(D.jsxs)(h.Fragment,{children:[Object(D.jsx)("td",{className:"py-3 px-4 text-left text-base font-medium",children:e.total_post}),Object(D.jsx)("td",{className:"py-3 px-4 text-left text-base font-medium",children:e.total_staff}),Object(D.jsx)("td",{className:"py-3 px-4 text-left text-base font-medium",children:e.status===I.c.RECEIVED?e.new_teacher:"-"}),Object(D.jsx)("td",{className:"py-3 px-4 text-left text-base font-medium",children:e.status!==I.c.INITIATED?e.vacant_post:"-"})]}),Object(D.jsxs)("td",{className:"py- text-left",children:[e.post_id===o.state.selectedPostId&&Object(D.jsxs)("div",{className:"flex items-center gap-3",children:[Object(D.jsxs)("div",{className:"rounded text-gray-500 text-base font-bold",children:[Object(D.jsx)("span",{className:"text-black",children:o.getLimitations(t,o.props.districtPlacementLimits,e.post_id).distributed+o.getAssignedValuePost(e.post_id)})," ","of"," ",o.getLimitations(t,o.props.districtPlacementLimits,e.post_id).general]}),Object(D.jsx)("button",{className:"btn bg-blue-100 text-blue-500 group-hover:bg-blue-500 group-hover:text-blue-50 ".concat(o.state.loadingRequest&&"cursor-wait"),title:"Save changes",onClick:function(){return o.submitRequest()},disabled:o.state.loadingRequest,children:o.state.loadingRequest?"Loading...":"Save"}),Object(D.jsx)("button",{className:"btn bg-gray-100 text-gray-500 group-hover:bg-gray-500 group-hover:text-gray-50 ".concat(o.state.loadingRequest&&"cursor-not-allowed"),title:"Cancel changes",onClick:function(){o.setThisPostTable(null),o.setModalState(null),o.setTableColumns(k),o.setSelectedPostId(""),o.setConfirmedPosts(null)},disabled:o.state.loadingRequest,children:"Cancel"})]}),null===o.state.thisPostTable&&null===o.state.modalState&&Object(D.jsx)("div",{className:"flex item-center justify-end gap-1",children:o.getAllowedPlacementByDegree(o.props.districtPlacementLimits,o.state.qualification_id)>0&&e.status===I.c.INITIATED&&Object(D.jsx)("button",{className:"btn btn-blue",title:"View User Profile",onClick:function(){o.setThisPostTable(e),o.setModalState("CONFIRM"),o.setTableColumns(M)},children:"Reply"})})]})]},s+e.post_id)})))},o.state={modalState:null,filterByPosition:"",institute_id:"",category_id:"",qualification_id:"",loadingRequest:!1,loading:!0,loadingPost:!0,thisPost:null,viewPost:!1,approvedPosts:0,selectedPostId:"",formError:null,thisPostTable:null,confirmedPosts:null,leftPlacements:0,tableColumns:k},o}return Object(c.a)(s,[{key:"render",value:function(){var t,e=this;return Object(T.e)(this.props.auth.user_access.district_id)?Object(D.jsx)(x.a,{to:"/"}):null!==this.props.activeAcademicSession&&"none"===this.props.activeAcademicSession?Object(D.jsxs)("div",{className:"bg-yellow-100 rounded flex flex-col items-center justify-center p-6 my-8 text-yellow-900 border border-yellow-900",children:[Object(D.jsx)(b.O,{className:"text-6xl md:text-9xl"}),Object(D.jsxs)("div",{className:"text-center flex flex-col",children:[Object(D.jsx)("span",{className:"text-2xl md:text-4xl font-extrabold",children:"No academic active session"}),Object(D.jsx)("span",{className:"text-lg",children:"Please Wait for the system to publish the sessions or contact the administrator"})]})]}):this.state.loading||this.state.loadingPost?Object(D.jsx)("div",{className:"text-center mt-7 font-bold text-4xl text-gray-400 animate-pulse",children:"Loading data..."}):Object(D.jsxs)("div",{children:[Object(D.jsxs)("div",{className:"flex flex-row items-start gap-4 my-2 overflow-x-auto",children:[Object(D.jsx)(m.a,{className:"text-blue-600 text-5xl md:block hidden"}),Object(D.jsx)("div",{className:"w-full",children:Object(D.jsx)("div",{className:"flex justify-between w-full",children:Object(D.jsxs)("div",{className:"flex flex-col gap-1 justify-between",children:[Object(D.jsx)("h1",{className:"md:text-4xl text-3xl font-semibold",children:"Schools requests"}),Object(D.jsx)("div",{className:"flex-row items-center md:gap-3 gap-2",children:Object(D.jsxs)("div",{className:"flex flex-row items-center gap-1",children:[Object(D.jsx)("span",{className:"text-gray-600 text-lg",children:"Academic session:"}),Object(D.jsx)("span",{className:"text-gray-600 font-semibold text-xl",children:null===(t=this.props.activeAcademicSession)||void 0===t?void 0:t.title})]})})]})})})]}),Object(D.jsxs)("div",{className:"bg-white shadow-md p-2 rounded overflow-x-auto",children:[Object(D.jsxs)("div",{className:"my-2 grid grid-cols-1 sm:grid-cols-3 items-center gap-2",children:[Object(D.jsxs)("select",{className:"border-2 w-full md:w-auto border-gray-700 bg-white p-2 rounded focus:outline-none",value:this.state.institute_id,onChange:function(t){e.setInstituteId(t.target.value),e.setLeftPlacement(0)},disabled:null!==this.state.thisPostTable||null!==this.state.modalState,children:[Object(D.jsx)("option",{value:"",children:"Select Institute"}),this.props.schoolLevels.education_categories&&this.props.schoolLevels.education_categories.length>0?this.props.schoolLevels.education_categories.map((function(t,e){return Object(D.jsx)("option",{value:t.education_institute_id,children:t.education_category_title},e+1)})):Object(D.jsx)("option",{value:"",children:"No institute found"})]}),Object(D.jsxs)("select",{className:"w-full md:w-auto border-2 border-gray-700 bg-white p-2 rounded focus:outline-none",value:this.state.category_id,onChange:function(t){return e.setCategoryId(t.target.value)},disabled:null!==this.state.thisPostTable||null!==this.state.modalState,children:[Object(D.jsx)("option",{value:"",children:"Document category"}),this.props.document.documentCategory&&this.props.document.documentCategory.length>0?this.props.document.documentCategory.map((function(t,e){return Object(D.jsx)("option",{value:t.user_detail_category_id,children:t.title},e+1)})):Object(D.jsx)("option",{value:"",children:"No document category found"})]}),Object(D.jsxs)("select",{className:"w-full md:w-auto border-2 border-gray-700 bg-white p-2 rounded focus:outline-none",value:this.state.qualification_id,onChange:function(t){e.setQualificationId(t.target.value),e.setLeftPlacement(0)},disabled:null!==this.state.thisPostTable||null!==this.state.modalState,children:[Object(D.jsx)("option",{value:"",children:"Select Qualification"}),this.props.document.documentSubCategory&&this.filterQualifications(this.props.document.documentSubCategory,this.state.category_id).length>0?this.filterQualifications(this.props.document.documentSubCategory,this.state.category_id).map((function(t,e){return Object(D.jsx)("option",{value:t.user_detail_subcategory_id,children:t.title},e+1)})):Object(D.jsx)("option",{value:"",children:"No qualification found"})]})]}),Object(D.jsx)(N.a,{columns:this.state.tableColumns,rows:this.tableData,pagination:!0,search:!0,thColor:"gray"})]}),this.state.modalState&&this.state.thisPost&&this.props.systemPositions&&Object(D.jsx)(v.c,{backDrop:!0,theme:v.b.default,close:function(){e.setThisPost(null),e.setModalState(null)},displayClose:!0,backDropClose:!1,title:Object(D.jsx)("div",{className:"flex flex-row gap-4 items-center",children:Object(D.jsx)("div",{className:"flex flex-col",children:Object(D.jsx)("span",{className:"font-bold text-2xl text-gray-500",children:"Responding to requested post"})})}),widthSizeClass:v.a.large,padding:{title:!0,body:!1,footer:!1},children:Object(D.jsx)("div",{className:"px-4 mx-auto mb-4 mt-3",children:Object(D.jsxs)("div",{className:"flex flex-col gap-3",children:[Object(D.jsx)("div",{className:"rounded bg-gray-100 border p-2",children:Object(D.jsx)("table",{children:Object(D.jsxs)("tbody",{children:[Object(D.jsxs)("tr",{children:[Object(D.jsx)("td",{className:"text-lg text-gray-700",children:"School:"}),Object(D.jsx)("td",{className:"font-medium px-4 text-lg text-gray-700",children:this.state.thisPost.school.school_name})]}),Object(D.jsxs)("tr",{children:[Object(D.jsx)("td",{className:"text-lg text-gray-700",children:"Position:"}),Object(D.jsx)("td",{className:"font-medium px-4 text-lg text-gray-700",children:Object(T.c)(this.props.systemPositions,this.state.thisPost.position_id)?Object(T.c)(this.props.systemPositions,this.state.thisPost.position_id).position_title:""})]}),Object(D.jsxs)("tr",{children:[Object(D.jsx)("td",{className:"text-lg text-gray-700",children:"Needed posts (number):"}),Object(D.jsx)("td",{className:"font-medium px-4 text-lg text-gray-700",children:this.state.thisPost.needed_posts})]}),Object(D.jsxs)("tr",{children:[Object(D.jsx)("td",{className:"text-lg text-gray-700",children:"Occupation (number):"}),Object(D.jsx)("td",{className:"font-medium px-4 text-lg text-gray-700",children:this.state.thisPost.occupied_posts})]}),Object(D.jsxs)("tr",{children:[Object(D.jsx)("td",{className:"text-lg text-gray-700",children:"Explanation:"}),Object(D.jsx)("td",{className:"font-medium px-4 text-lg text-gray-700",children:this.state.thisPost.description})]}),Object(D.jsxs)("tr",{children:[Object(D.jsx)("td",{className:"text-lg text-gray-700",children:"Requested date:"}),Object(D.jsx)("td",{className:"font-medium px-4 text-lg text-gray-700",children:Object(C.a)(this.state.thisPost.request_date.toString())})]})]})})}),Object(D.jsx)("div",{className:"bg-white",children:Object(D.jsxs)("form",{onSubmit:this.submitRequest,children:[Object(D.jsx)("div",{className:"text-base leading-6 space-y-4 text-gray-700 sm:text-lg sm:leading-7",children:Object(D.jsxs)("div",{className:"flex flex-col",children:[Object(D.jsx)("label",{children:"Approved posts (number)"}),Object(D.jsx)("input",{type:"number",className:"appearance-none rounded w-full py-1 px-4 border-2 bg-white focus:outline-none focus:bg-gray-100 ".concat(null!==this.state.formError&&"approved_posts"===this.state.formError.element?"border-red-500":"border-gray-700"),value:this.state.approvedPosts,onChange:function(t){e.setApprovedPosts(Number(t.target.value))},min:0,max:this.state.thisPost.needed_posts,placeholder:"1",disabled:this.state.loadingRequest}),null!==this.state.formError&&"approved_posts"===this.state.formError.element&&Object(D.jsx)("span",{className:"text-red-600 font-bold text-xs",children:this.state.formError.msg})]})}),Object(D.jsxs)("div",{className:"pt-4 flex justify-between",children:[Object(D.jsx)("button",{className:"btn bg-gray-400 text-white hover:bg-gray-600",onClick:function(){e.setThisPost(null),e.setApprovedPosts(0),e.setModalState(null)},children:"Exit"}),Object(D.jsx)("button",{className:"btn bg-primary text-white hover:bg-blue-600",disabled:this.state.loadingRequest,children:this.state.loadingRequest?"Loading...":"Respond"})]})]})})]})})}),this.state.viewPost&&null===this.state.modalState&&this.state.thisPost&&this.props.systemPositions&&Object(D.jsx)(v.c,{backDrop:!0,theme:v.b.default,close:function(){e.setThisPost(null),e.setViewPost(!1)},displayClose:!0,backDropClose:!1,title:Object(D.jsx)("div",{className:"flex flex-row gap-4 items-center",children:Object(D.jsx)("div",{className:"flex flex-col",children:Object(D.jsx)("span",{className:"font-bold text-2xl text-gray-500",children:"Viewing Post Request"})})}),widthSizeClass:v.a.extraLarge,padding:{title:!0,body:!1,footer:!1},children:Object(D.jsx)("section",{className:"px-4 mx-auto mb-4 mt-3 flex items-start",children:Object(D.jsxs)("section",{className:"w-full",children:[Object(D.jsxs)("div",{className:"flex flex-row item-center justify-left gap-3 mb-2",children:[Object(D.jsx)("span",{className:"text-gray-500",children:"Position: "}),Object(D.jsx)("span",{className:"font-bold",children:Object(T.c)(this.props.systemPositions,this.state.thisPost.position_id)?Object(T.c)(this.props.systemPositions,this.state.thisPost.position_id).position_title:"Unknown position"})]}),Object(D.jsx)("div",{className:"my-2",children:Object(D.jsxs)("table",{className:"w-full border",id:"report_content",children:[Object(D.jsx)("thead",{className:"bg-blue-50 border-b border-gray-300 text-gray-600 font-bold text-sm",children:Object(D.jsxs)("tr",{children:[Object(D.jsx)("td",{className:"px-2 py-2",children:"Requested posts"}),Object(D.jsx)("td",{className:"px-2 py-2",children:"Approved posts"}),Object(D.jsx)("td",{className:"px-2 py-2",children:"Placed posts"}),Object(D.jsx)("td",{className:"px-2 py-2",children:"Received posts"}),Object(D.jsx)("td",{className:"px-2 py-2",children:"Not received posts"}),Object(D.jsx)("td",{className:"px-2 py-2",children:"Status"}),Object(D.jsx)("td",{})]})}),Object(D.jsx)("tbody",{children:Object(D.jsxs)("tr",{children:[Object(D.jsx)("td",{className:"px-2 py-2",children:this.state.thisPost.needed_posts}),Object(D.jsx)("td",{className:"px-2 py-2",children:this.state.thisPost.requested_post_status!==I.c.INITIATED?Object(D.jsx)("div",{className:"flex items-center gap-1",children:this.state.thisPost.confirmed_posts}):"-"}),Object(D.jsx)("td",{className:"px-2 py-2",children:this.props.districtPlacements&&this.state.thisPost.requested_post_status!==I.c.INITIATED?Object(D.jsx)("span",{children:Object(R.getPlacementByRequest)(this.props.districtPlacements,this.state.thisPost._id).length}):"-"}),Object(D.jsx)("td",{className:"px-2 py-2",children:this.state.thisPost.requested_post_status===I.c.RECEIVED?this.state.thisPost.received_posts:"-"}),Object(D.jsx)("td",{className:"px-2 py-2",children:this.props.districtPlacements&&this.state.thisPost.requested_post_status===I.c.RECEIVED?Object(D.jsx)("span",{children:Object(R.getPlacementByRequest)(this.props.districtPlacements,this.state.thisPost._id,E.b.REJECTED).length}):"-"}),Object(D.jsx)("td",{className:"px-2 py-2",children:Object(D.jsx)("span",{className:"px-2 py-1 font-semibold rounded ".concat(this.state.thisPost.requested_post_status===I.c.INITIATED?"text-gray-700 bg-gray-100 dark:bg-gray-700 dark:text-gray-100":this.state.thisPost.requested_post_status===I.c.CONFIRMED?"text-blue-700 bg-blue-100 dark:bg-blue-700 dark:text-blue-100":"text-green-800 bg-green-100 dark:bg-green-800 dark:text-green-100"),children:this.props.districtPlacements?Object(A.b)(this.state.thisPost.requested_post_status,Object(R.getPlacementByRequest)(this.props.districtPlacements,this.state.thisPost._id,"all").length,Object(R.getPlacementByRequest)(this.props.districtPlacements,this.state.thisPost._id,E.b.PLACED).length,Object(R.getPlacementByRequest)(this.props.districtPlacements,this.state.thisPost._id,E.b.REJECTED).length):Object(A.b)(this.state.thisPost.requested_post_status,0,0,0)})}),Object(D.jsxs)("td",{children:[this.state.thisPost.requested_post_status===I.c.INITIATED&&Object(D.jsx)("button",{className:"font-bold py-1 px-4 rounded bg-gray-500 text-white hover:bg-gray-700",onClick:function(){e.setModalState("UPDATE")},disabled:this.state.thisPost.requested_post_status!==I.c.INITIATED,children:"Reply"}),this.props.districtPlacements&&0===Object(R.getPlacementByRequest)(this.props.districtPlacements,this.state.thisPost._id,E.b.PENDING).length&&Object(R.getPlacementByRequest)(this.props.districtPlacements,this.state.thisPost._id,E.b.REJECTED).length>0&&Object(D.jsx)("button",{className:"font-bold ml-2 py-1 px-4 rounded bg-gray-500 text-white hover:bg-gray-700",onClick:function(){return e.reDoPlacement(e.state.thisPost)},disabled:this.state.loadingRequest,children:"Do placement"})]})]})})]})}),Object(T.c)(this.props.systemPositions,this.state.thisPost.position_id)&&Object(D.jsx)(L.a,{thisPosition:Object(T.c)(this.props.systemPositions,this.state.thisPost.position_id),isGuest:!0})]})})})]})}}]),s}(h.Component),V=Object(f.b)((function(t){var e=t.auth,s=t.schools,o=t.system_settings,n=t.schoolLevels,i=t.document,a=t.sessionPlan;return{auth:e,districtPosts:s.districtPosts,districtPlacements:s.districtPlacements,systemPositions:o.systemPositions,schoolLevels:n,document:i,activeAcademicSession:a.activeAcademicSession,districtPlacementLimits:s.districtPlacementLimits}}),{getDocumentCategory:g.h,getDocumentSubCategory:g.j,getPositions:O.d,fetchDistrictPosts:P.d,getDistrictPlacement:P.f,updateSchoolPost:P.n,loadEducationCategories:j.Dc,getActiveAcademicSession:_.i,getDistrictPlacementLimit:P.g,PushPopupAlert:j.Kb})(F)},650:function(t,e,s){"use strict";s.d(e,"c",(function(){return u})),s.d(e,"l",(function(){return h})),s.d(e,"j",(function(){return m})),s.d(e,"b",(function(){return b})),s.d(e,"f",(function(){return f})),s.d(e,"n",(function(){return x})),s.d(e,"k",(function(){return j})),s.d(e,"h",(function(){return g})),s.d(e,"e",(function(){return P})),s.d(e,"a",(function(){return _})),s.d(e,"m",(function(){return O})),s.d(e,"d",(function(){return v})),s.d(e,"g",(function(){return y})),s.d(e,"i",(function(){return N}));var o=s(4),n=s.n(o),i=s(7),a=s(8),r=s.n(a),c=s(6),l=s(9),p=s(15),d=s(13),u=function(t){return t(!0,""),function(){var e=Object(i.a)(n.a.mark((function e(s){var o,i;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,Object(p.b)(),e.next=4,r.a.get("".concat(l.a.CLAIMING,"/session-type"));case 4:o=e.sent,console.log({GET_PLANS_TYPES:o.data}),i=[],200===o.status&&null!==o.data&&o.data.length>0&&(i=o.data),s({type:c.a.GET_PLANS_TYPES,payload:i}),t(!1,""),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),console.error({error:Object(d.a)(e.t0)}),t(!1,Object(d.a)(e.t0));case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}()},h=function(t){return console.log({thisType:t}),{type:c.a.SELECT_PLAN_TYPE,payload:t}},m=function(t){return t(!0,""),function(){var e=Object(i.a)(n.a.mark((function e(s){var o,i;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,Object(p.b)(),e.next=4,r.a.get("".concat(l.a.CLAIMING,"/session/active/"));case 4:o=e.sent,console.log({GET_ACTIVE_SESSION_PLANS:o.data}),i=void 0,o.data&&void 0!==o.data.is_active&&(i=o.data),console.log({session_plan:o.data}),s({type:c.a.GET_ACTIVE_SESSION_PLANS,payload:i||"none"}),t(!1,"",i||"none"),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),console.error({error:Object(d.a)(e.t0)}),t(!1,Object(d.a)(e.t0));case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}()},b=function(t){return t(!0,""),function(){var e=Object(i.a)(n.a.mark((function e(s){var o,i;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,Object(p.b)(),e.next=4,r.a.get("".concat(l.a.CLAIMING,"/session/"));case 4:o=e.sent,console.log({GET_ALL_SESSION_PLANS:o.data}),i=[],200===o.status&&null!==o.data&&o.data.length>0&&(i=o.data),s({type:c.a.GET_ALL_SESSION_PLANS,payload:i}),t(!1,"",i),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),console.error({error:Object(d.a)(e.t0)}),t(!1,Object(d.a)(e.t0));case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}()},f=function(t){return{type:c.a.CREATE_SESSION_PLAN,payload:t}},x=function(t){return{type:c.a.UPDATE_SESSION_PLAN,payload:t}},j=function(t){return{type:c.a.SESSION_ACTIVATION,payload:t}},g=function(t){return{type:c.a.DELETE_SESSION_PLAN,payload:t}},P=function(t){return{type:c.a.CREATE_ACADEMIC_SESSION,payload:t}},_=function(t){return t(!0,""),function(){var e=Object(i.a)(n.a.mark((function e(s){var o,i;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,Object(p.b)(),e.next=4,r.a.get("".concat(l.a.PLACEMENT,"/postrequestperiod/"));case 4:o=e.sent,console.log({GET_ALL_SESSION_PLANS:o.data}),i=[],200===o.status&&null!==o.data&&o.data.length>0&&(i=o.data),console.log("===================================="),console.log({GetAllAcademicSession:o}),console.log("===================================="),s({type:c.a.GET_ALL_ACADEMIC_SESSION,payload:i}),t(!1,"",i),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(0),console.error({error:Object(d.a)(e.t0)}),t(!1,Object(d.a)(e.t0));case 19:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t){return e.apply(this,arguments)}}()},O=function(t){return{type:c.a.UPDATE_ACADEMIC_SESSION,payload:t}},v=function(t){return{type:c.a.ACADEMIC_SESSION_ACTIVATION,payload:t}},y=function(t){return{type:c.a.DELETE_ACADEMIC_SESSION,payload:t}},N=function(t){return t(!0,""),function(){var e=Object(i.a)(n.a.mark((function e(s){var o,i;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,Object(p.b)(),e.next=4,r.a.get("".concat(l.a.PLACEMENT,"/postrequestperiod/one"));case 4:o=e.sent,console.log({GET_ACTIVE_ACADEMIC_SESSION:o.data}),i=void 0,o.data&&(i=o.data),console.log({session_plan:o.data}),s({type:c.a.GET_ACTIVE_ACADEMIC_SESSION,payload:i||"none"}),t(!1,"",i||"none"),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),console.error({error:Object(d.a)(e.t0)}),t(!1,Object(d.a)(e.t0));case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}()}},656:function(t,e,s){"use strict";s.d(e,"k",(function(){return d})),s.d(e,"i",(function(){return u})),s.d(e,"a",(function(){return h})),s.d(e,"m",(function(){return m})),s.d(e,"c",(function(){return b})),s.d(e,"e",(function(){return f})),s.d(e,"j",(function(){return x})),s.d(e,"b",(function(){return j})),s.d(e,"n",(function(){return g})),s.d(e,"d",(function(){return P})),s.d(e,"f",(function(){return _})),s.d(e,"h",(function(){return O})),s.d(e,"g",(function(){return v})),s.d(e,"l",(function(){return y}));var o=s(4),n=s.n(o),i=s(7),a=s(6),r=s(8),c=s.n(r),l=s(9),p=s(13),d=function(t){return t(!0,""),function(){var e=Object(i.a)(n.a.mark((function e(s){var o;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.a.get("".concat(l.a.APPLICATION,"/schools"));case 3:o=e.sent,s({type:a.a.GET_SCHOOLS,payload:o.data}),t(!1,"",o.data),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("Err: ",e.t0),t(!1,Object(p.a)(e.t0));case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},u=function(t,e){return function(){var s=Object(i.a)(n.a.mark((function s(o){var i;return n.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return e(!0,""),s.prev=1,s.next=4,c.a.get("".concat(l.a.APPLICATION,"/schools/").concat(t));case 4:i=s.sent,o({type:a.a.GET_SCHOOLS_BY_ID,payload:i.data}),e(!1,"",i.data),s.next=13;break;case 9:s.prev=9,s.t0=s.catch(1),console.log("Err: ",s.t0),e(!1,Object(p.a)(s.t0));case 13:case"end":return s.stop()}}),s,null,[[1,9]])})));return function(t){return s.apply(this,arguments)}}()},h=function(t){return console.log({schools:t}),function(){var e=Object(i.a)(n.a.mark((function e(s){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s({type:a.a.CREATE_SCHOOL,payload:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},m=function(t){return function(){var e=Object(i.a)(n.a.mark((function e(s){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s({type:a.a.UPDATE_SCHOOL,payload:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},b=function(t){return function(){var e=Object(i.a)(n.a.mark((function e(s){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s({type:a.a.DELETE_SCHOOL,payload:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},f=function(t,e){return function(){var s=Object(i.a)(n.a.mark((function s(o){var i;return n.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return e(!0,""),s.prev=1,s.next=4,c.a.get("".concat(l.a.PLACEMENT,"/requestpost/school/").concat(t));case 4:i=s.sent,console.log("===================================="),console.log({schoolPosts:i}),console.log("===================================="),o({type:a.a.FETCH_SCHOOL_POSTS,payload:i.data}),e(!1,""),s.next=16;break;case 12:s.prev=12,s.t0=s.catch(1),console.log("Err: ",s.t0),e(!1,Object(p.a)(s.t0));case 16:case"end":return s.stop()}}),s,null,[[1,12]])})));return function(t){return s.apply(this,arguments)}}()},x=function(t,e){return function(){var s=Object(i.a)(n.a.mark((function s(o){var i;return n.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return e(!0,""),s.prev=1,s.next=4,c.a.get("".concat(l.a.PLACEMENT,"/placedcandidate/school/").concat(t));case 4:i=s.sent,console.log({getSchoolPlacement:i.data}),o({type:a.a.GET_SCHOOL_PLACEMENT,payload:i.data}),e(!1,"",i.data),s.next=14;break;case 10:s.prev=10,s.t0=s.catch(1),console.log("Err: ",s.t0),e(!1,Object(p.a)(s.t0));case 14:case"end":return s.stop()}}),s,null,[[1,10]])})));return function(t){return s.apply(this,arguments)}}()},j=function(t){return function(){var e=Object(i.a)(n.a.mark((function e(s){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s({type:a.a.CREATE_SCHOOL_POST,payload:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},g=function(t,e){return console.log({TYPE:t,data:e}),function(){var s=Object(i.a)(n.a.mark((function s(o){return n.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:o({type:a.a.UPDATE_SCHOOL_POST,payload:{TYPE:t,data:e}});case 1:case"end":return s.stop()}}),s)})));return function(t){return s.apply(this,arguments)}}()},P=function(t,e){return function(){var s=Object(i.a)(n.a.mark((function s(o){var i;return n.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return e(!0,""),s.prev=1,s.next=4,c.a.get("".concat(l.a.PLACEMENT,"/requestpost/district/").concat(t));case 4:i=s.sent,console.log("===================================="),console.log({fetchDistrictPosts:i}),console.log("===================================="),o({type:a.a.FETCH_DISTRICT_POSTS,payload:i.data}),e(!1,""),s.next=16;break;case 12:s.prev=12,s.t0=s.catch(1),console.log("Err: ",s.t0),e(!1,Object(p.a)(s.t0));case 16:case"end":return s.stop()}}),s,null,[[1,12]])})));return function(t){return s.apply(this,arguments)}}()},_=function(t,e){return function(){var s=Object(i.a)(n.a.mark((function s(o){var i;return n.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return e(!0,""),s.prev=1,s.next=4,c.a.get("".concat(l.a.PLACEMENT,"/placedcandidate/district/").concat(t));case 4:i=s.sent,console.log("===================================="),console.log({getDistrictPlacement:i.data}),console.log("===================================="),o({type:a.a.GET_DISTRICT_PLACEMENT,payload:i.data}),e(!1,"",i.data),s.next=16;break;case 12:s.prev=12,s.t0=s.catch(1),console.log("Err: ",s.t0),e(!1,Object(p.a)(s.t0));case 16:case"end":return s.stop()}}),s,null,[[1,12]])})));return function(t){return s.apply(this,arguments)}}()},O=function(t,e,s){return function(){var o=Object(i.a)(n.a.mark((function o(i){var r;return n.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return s(!0,""),o.prev=1,o.next=4,c.a.get("".concat(l.a.PLACEMENT,"/confirmedpostrequest/institute/").concat(t,"/").concat(e));case 4:r=o.sent,console.log("===================================="),console.log({getInstitutePlacementLimit:r.data}),console.log("===================================="),i({type:a.a.GET_INSTITUTE_PLACEMENT_LIMIT,payload:r.data}),s(!1,"",r.data),o.next=16;break;case 12:o.prev=12,o.t0=o.catch(1),console.log("Err: ",o.t0),s(!1,Object(p.a)(o.t0));case 16:case"end":return o.stop()}}),o,null,[[1,12]])})));return function(t){return o.apply(this,arguments)}}()},v=function(t,e,s){return function(){var o=Object(i.a)(n.a.mark((function o(i){var r;return n.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return s(!0,""),o.prev=1,o.next=4,c.a.get("".concat(l.a.PLACEMENT,"/confirmedpostrequest/district/").concat(t,"/").concat(e));case 4:r=o.sent,console.log("===================================="),console.log({getDistrictPlacementLimit:r.data}),console.log("===================================="),i({type:a.a.GET_DISTRICT_PLACEMENT_LIMIT,payload:r.data}),s(!1,"",r.data),o.next=16;break;case 12:o.prev=12,o.t0=o.catch(1),console.log("Err: ",o.t0),s(!1,Object(p.a)(o.t0));case 16:case"end":return o.stop()}}),o,null,[[1,12]])})));return function(t){return o.apply(this,arguments)}}()},y=function(t){return console.log("===================================="),console.log({updateInstitutePlacementLimit:t}),console.log("===================================="),function(){var e=Object(i.a)(n.a.mark((function e(s){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s({type:a.a.UPDATE_INSTITUTE_PLACEMENT_LIMIT,payload:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},700:function(t,e,s){"use strict";var o,n,i,a;s.d(e,"a",(function(){return o})),s.d(e,"c",(function(){return n})),s.d(e,"b",(function(){return i})),s.d(e,"d",(function(){return a})),function(t){t.Failed="Failed",t.Passed="Passed"}(o||(o={})),function(t){t.applicant_name="names",t.national_id="national_id",t.phone_number="phone",t.email="email",t.gender="gender",t.position_name="position_name",t.marks="marks",t.status="status"}(n||(n={})),function(t){t.PENDING="pending",t.PLACED="placed",t.REJECTED="rejected"}(i||(i={})),function(t){t.applicant_name="names",t.national_id="national_id",t.phone_number="phone",t.email="email",t.school_name="school_name",t.position_name="position_name",t.waiting_date="waiting_date",t.placement_date="placement_date",t.status="status"}(a||(a={}))},747:function(t,e,s){"use strict";s.d(e,"b",(function(){return T}));var o,n=s(4),i=s.n(n),a=s(7),r=s(24),c=s(23),l=s(26),p=s(25),d=s(8),u=s.n(d),h=s(5),m=s(10),b=s(21),f=s(3),x=s(656),j=s(689),g=s(700),P=s(39),_=s(644),O=s(664),v=s(9),y=s(13),N=s(748),E=s(801),S=s(1);!function(t){t.PENDING="Pending",t.CONFIRMED="Confirmed",t.ALL_RECEIVED="All received",t.PARTIAL_RECEIVED="Received & Pending",t.ALL_REJECTED="All rejected",t.PARTIAL_REJECTED="Rejected & Pending",t.PARTIAL_RECEIVED_REJECTED="Received & Rejected & Pending",t.RECEIVED_REJECTED="Received & Rejected"}(o||(o={}));var T=function(t,e,s,n){if(t===O.c.RECEIVED){if(e===s)return o.ALL_RECEIVED;if(e===n)return o.ALL_REJECTED;if(e===n+s)return o.RECEIVED_REJECTED;if(e>n+s&&s>0&&n>0)return o.PARTIAL_RECEIVED_REJECTED;if(0===n&&e>s)return o.PARTIAL_RECEIVED;if(0===s&&e>n)return o.PARTIAL_REJECTED}return t===O.c.CONFIRMED?o.CONFIRMED:o.PENDING},I=function(t){Object(l.a)(s,t);var e=Object(p.a)(s);function s(t){var o;return Object(r.a)(this,s),(o=e.call(this,t)).setThisPlacement=function(t){o.setState({thisPlacement:t})},o.setAction=function(t){o.setState({action:t})},o.setTakeAction=function(t){o.setState({takeAction:t})},o.submitRequest=function(){var t=Object(a.a)(i.a.mark((function t(e,s){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("NOT_RECEIVED"!==s||!Object(_.e)(o.state.comment)){t.next=2;break}return t.abrupt("return",o.props.setFormError({element:"received_comment",msg:"Reason of your decision is required!"}));case 2:if(n=0,n="NOT_RECEIVED"===s?o.props.thisPost.received_posts?o.props.thisPost.received_posts:0:o.props.thisPost.received_posts?o.props.thisPost.received_posts+1:1,o.props.setLoadingRequest(!0),t.prev=5,!o.props.thisPost){t.next=11;break}return t.next=9,u.a.patch("".concat(v.a.PLACEMENT,"/requestpost/").concat(o.props.thisPost._id),{confirmed_posts:o.props.thisPost.confirmed_posts,confirmed_by:o.props.auth.user.user_id,received_posts:n,approval_date:o.props.thisPost.approval_date,school_id:o.props.thisPost.school_id,position_id:o.props.thisPost.position_id,district_id:o.props.thisPost.district_id,needed_posts:o.props.thisPost.needed_posts,male_number:o.props.thisPost.male_number,female_number:o.props.thisPost.female_number,description:o.props.thisPost.description,occupied_posts:o.props.thisPost.occupied_posts,requested_by:o.props.auth.user.user_id,requested_post_status:O.c.RECEIVED});case 9:t.sent&&o.confirmPlacement(e);case 11:t.next=17;break;case 13:t.prev=13,t.t0=t.catch(5),console.error({role_error:t.t0}),o.props.PushPopupAlert({title:Object(y.a)(t.t0),theme:P.a.danger});case 17:o.props.setLoadingRequest(!1);case 18:case"end":return t.stop()}}),t,null,[[5,13]])})));return function(e,s){return t.apply(this,arguments)}}(),o.confirmPlacement=function(){var t=Object(a.a)(i.a.mark((function t(e){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o.props.setLoadingRequest(!0),t.prev=1,!o.props.thisPost){t.next=7;break}return t.next=5,u.a.post("".concat(v.a.PLACEMENT,"/confirmreceived"),{placedStatus:[{waiting_list_id:e.waiting_list_id,placed_candidate_id:e._id,status:"NOT_RECEIVED"===o.state.action?g.b.REJECTED:g.b.PLACED}]});case 5:t.sent&&(o.props.fetchSchoolPosts(o.props.auth.user_access.school_id,(function(t,e){t||(e.length>0&&o.props.loadingPost&&(console.error("error loading school post: ",e),o.props.PushPopupAlert({title:e,theme:P.a.danger})),o.props.setLoadingPost(!1))})),o.props.getSchoolPlacement(o.props.auth.user_access.school_id,(function(t,e,s){o.props.setLoadingPost(t),!t&&e.length>0&&(console.error({getSchoolPlacementError:e}),o.props.PushPopupAlert({title:e,theme:P.a.danger}))})),o.props.setFormError(null),o.setState({comment:"",placement_id:"",action:null}),!o.props.viewPost&&o.props.setThisPost(null),o.props.setReceivedPosts(0),o.props.setModalState(null),o.props.PushPopupAlert({title:"Request has been done completely!",theme:P.a.info}));case 7:t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),console.error({role_error:t.t0}),o.props.PushPopupAlert({title:Object(y.a)(t.t0),theme:P.a.danger});case 13:o.props.setLoadingRequest(!1);case 14:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}(),o.state={placement_id:"",action:null,thisPlacement:null,takeAction:!1,comment:""},o}return Object(c.a)(s,[{key:"render",value:function(){var t=this;return Object(S.jsxs)("section",{children:[Object(S.jsxs)("div",{className:"border-b-2 border-gray-200 mb-2 pb-1 flex items-center gap-3",children:[Object(S.jsx)("button",{className:"ml-3 bg-gray-100 hover:bg-blue-100 rounded-full px-1 py-1 focus:outline-none ".concat(this.props.loadingRequest?"cursor-wait":"cursor-pointer"," animate__animated animate__fadeIn"),disabled:this.props.loadingRequest,onClick:function(){t.props.setThisPost(null),t.props.setReceivedPosts(0),t.props.setModalState(null)},children:Object(S.jsx)(m.f,{className:"text-4xl"})}),Object(S.jsx)("span",{className:"font-bold text-2xl md:text-3xl text-gray-700",children:"Confirm teacher arrival"})]}),Object(S.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 divide-x-0 divide-y md:divide-x md:divide-y-0",children:[Object(S.jsx)("div",{className:"px-1 mb-4 mt-3",children:Object(S.jsxs)("div",{className:"text-base leading-6 space-y-4 text-gray-700 sm:text-lg sm:leading-7",children:[Object(S.jsxs)("div",{className:"flex flex-row item-center justify-left gap-3 mb-2",children:[Object(S.jsx)("span",{className:"text-gray-500 italic",children:"Position: "}),Object(S.jsx)("span",{className:"font-bold",children:Object(_.c)(this.props.systemPositions,this.props.thisPost.position_id)?Object(_.c)(this.props.systemPositions,this.props.thisPost.position_id).position_title:"Unknown position"})]}),Object(S.jsxs)("table",{className:"w-full shadow",id:"report_content",children:[Object(S.jsx)("thead",{className:"bg-blue-50 border-b-2 border-gray-300 text-gray-600 font-bold text-sm",children:Object(S.jsxs)("tr",{children:[Object(S.jsx)("td",{className:"px-2 py-2",children:"Requested posts"}),Object(S.jsx)("td",{className:"px-2 py-2",children:"Approved posts"}),Object(S.jsx)("td",{className:"px-2 py-2",children:"Placed posts"}),Object(S.jsx)("td",{className:"px-2 py-2",children:"Received posts"}),Object(S.jsx)("td",{className:"px-2 py-2",children:"Not received posts"}),Object(S.jsx)("td",{className:"px-2 py-2",children:"Status"})]})}),Object(S.jsx)("tbody",{children:Object(S.jsxs)("tr",{children:[Object(S.jsx)("td",{className:"px-2 py-2",children:this.props.thisPost.needed_posts}),Object(S.jsx)("td",{className:"px-2 py-2",children:this.props.thisPost.requested_post_status!==O.c.INITIATED?Object(S.jsx)("div",{className:"flex items-center gap-1",children:this.props.thisPost.confirmed_posts}):"-"}),Object(S.jsx)("td",{className:"px-2 py-2",children:this.props.thisPost.requested_post_status!==O.c.INITIATED?Object(S.jsx)("span",{children:Object(E.getPlacementByRequest)(this.props.placementList,this.props.thisPost._id).length}):"-"}),Object(S.jsx)("td",{className:"px-2 py-2",children:this.props.thisPost.requested_post_status===O.c.RECEIVED?this.props.thisPost.received_posts:"-"}),Object(S.jsx)("td",{className:"px-2 py-2",children:this.props.thisPost.requested_post_status===O.c.RECEIVED?Object(S.jsx)("span",{children:Object(E.getPlacementByRequest)(this.props.placementList,this.props.thisPost._id,g.b.REJECTED).length}):"0"}),Object(S.jsx)("td",{className:"px-2 py-2",children:Object(S.jsx)("span",{className:"px-2 py-1 mx-1 font-semibold rounded ".concat(this.props.thisPost.requested_post_status===O.c.INITIATED?"text-gray-700 bg-gray-100 dark:bg-gray-700 dark:text-gray-100":this.props.thisPost.requested_post_status===O.c.CONFIRMED?"text-blue-700 bg-blue-100 dark:bg-blue-700 dark:text-blue-100":"text-green-800 bg-green-100 dark:bg-green-800 dark:text-green-100"),children:T(this.props.thisPost.requested_post_status,Object(E.getPlacementByRequest)(this.props.placementList,this.props.thisPost._id,"all").length,Object(E.getPlacementByRequest)(this.props.placementList,this.props.thisPost._id,g.b.PLACED).length,Object(E.getPlacementByRequest)(this.props.placementList,this.props.thisPost._id,g.b.REJECTED).length)})})]})})]}),Object(S.jsx)("div",{className:"my-2",children:Object(_.c)(this.props.systemPositions,this.props.thisPost.position_id)&&Object(S.jsx)(N.a,{thisPosition:Object(_.c)(this.props.systemPositions,this.props.thisPost.position_id),isGuest:!0})})]})}),Object(S.jsx)("div",{className:"px-4 mt-3 mb-4",children:Object(E.getPlacementByRequest)(this.props.placementList,this.props.thisPost._id).map((function(e,s){return Object(S.jsxs)("div",{className:"relative grid grid-cols-1 gap-4 px-4 py-1 mb-8 border rounded bg-white shadow",children:[Object(S.jsxs)("div",{className:"relative flex gap-4",children:[Object(S.jsx)("img",{src:v.a.AUTH_FILES+"/"+e.user_info.photo,className:"object-center object-cover relative rounded-lg -top-4 -mb-3 bg-white border h-20 w-20",alt:"",loading:"lazy"}),Object(S.jsxs)("div",{className:"flex flex-col w-full",children:[Object(S.jsx)("div",{className:"flex flex-row justify-between",children:Object(S.jsx)("p",{className:"relative text-xl whitespace-nowrap truncate overflow-hidden",children:e.user_info.fname+" "+e.user_info.lname})}),Object(S.jsxs)("p",{className:"text-gray-500 text-sm flex items-center gap-1",children:[Object(S.jsx)(m.Kb,{})," ",e.phone_number]}),Object(S.jsxs)("p",{className:"text-gray-500 text-sm flex items-center gap-1",children:[Object(S.jsx)(m.Z,{})," ",e.email]})]})]}),Object(S.jsxs)("div",{className:"-mt-3 overflow-x-hidden",children:["NOT_RECEIVED"!==t.state.action&&Object(S.jsxs)("div",{className:"flex flex-row-reverse gap-2",children:[Object(S.jsx)("div",{className:"flex-initial",children:Object(S.jsxs)("button",{type:"button",className:"btn btn-blue flex items-center font-medium tracking-wide capitalize transition duration-300 transform active:scale-95 ease-in-out",disabled:t.props.loadingRequest,onClick:function(){t.setState({placement_id:e._id,action:"RECEIVED",thisPlacement:e,takeAction:!0})},children:[Object(S.jsx)(m.Ob,{}),Object(S.jsx)("span",{className:"pl-2 mx-1",children:t.props.loadingRequest&&e._id===t.state.placement_id?"Loading...":"Received"})]})}),Object(S.jsx)("div",{className:"flex-initial",children:Object(S.jsxs)("button",{type:"button",className:"btn flex items-center px-5 py-2.5 font-medium tracking-wide text-black capitalize hover:bg-red-200 hover:fill-current hover:text-red-600 focus:outline-none transition duration-300 transform active:scale-95 ease-in-out",disabled:t.props.loadingRequest,onClick:function(){return t.setState({placement_id:e._id,action:"NOT_RECEIVED",thisPlacement:e})},children:[Object(S.jsx)(m.D,{}),Object(S.jsx)("span",{className:"pl-2 mx-1",children:"Not received"})]})})]}),"NOT_RECEIVED"===t.state.action&&t.state.placement_id===e._id&&Object(S.jsxs)("div",{className:"flex flex-col md:flex-row items-end md:items-start gap-2 animate__animated animate__fadeInRight animate__faster mt-2",children:[Object(S.jsxs)("div",{className:"w-full",children:[Object(S.jsx)("textarea",{className:"border-2 rounded p-2 md:text-base w-full ".concat(t.props.formError&&"received_comment"===t.props.formError.element?"border-red-500":"border-gray-300"," focus:border-gray-500"),placeholder:"comment",onChange:function(e){t.setState({comment:e.target.value}),t.props.formError&&"received_comment"===t.props.formError.element&&t.props.setFormError(null)},value:t.state.comment,style:{resize:"none"}}),t.props.formError&&"received_comment"===t.props.formError.element&&Object(S.jsx)("span",{className:"text-red-700 text-sm",children:t.props.formError.msg})]}),Object(S.jsxs)("div",{children:[Object(S.jsx)("button",{type:"button",className:"btn bg-gray-100 hover:bg-gray-400 w-full font-medium tracking-wide capitalize transition duration-300 transform active:scale-95 ease-in-out",disabled:t.props.loadingRequest,onClick:function(){return t.setTakeAction(!0)},children:t.props.loadingRequest&&e._id===t.state.placement_id?"Loading...":"Confirm"}),Object(S.jsx)("button",{type:"button",className:"btn bg-red-100  w-full hover:bg-red-400 font-medium tracking-wide capitalize transition duration-300 transform active:scale-95 ease-in-out",disabled:t.props.loadingRequest,onClick:function(){return t.setState({placement_id:"",action:null,thisPlacement:null})},children:t.props.loadingRequest&&e._id===t.state.placement_id?"Loading...":"Cancel"})]})]})]})]},s+e._id)}))})]}),this.state.thisPlacement&&this.state.action&&this.state.takeAction&&Object(S.jsx)(j.b,{confirmFun:function(){t.setTakeAction(!1),t.submitRequest(t.state.thisPlacement,t.state.action)},setModalAction:function(e){t.setTakeAction(e),t.setThisPlacement(null),t.setAction(null),t.setState({placement_id:""})},description:"NOT_RECEIVED"===this.state.action?"Do you really confirm that ".concat(this.state.thisPlacement.user_info.fname," ").concat(this.state.thisPlacement.user_info.lname," didn't or will not come?"):"Do you really confirm that you have received ".concat(this.state.thisPlacement.user_info.fname," ").concat(this.state.thisPlacement.user_info.lname,"?"),modalType:j.a.INFO})]})}}]),s}(h.Component);e.a=Object(b.b)((function(t){return{auth:t.auth}}),{fetchSchoolPosts:x.e,getSchoolPlacement:x.j,PushPopupAlert:f.Kb})(I)},801:function(t,e,s){"use strict";s.r(e),s.d(e,"getPlacementByRequest",(function(){return V})),s.d(e,"PostRequest",(function(){return G}));var o=s(24),n=s(23),i=s(26),a=s(25),r=s(5),c=s(812),l=s(10),p=s(21),d=s(32),u=s(3),h=s(656),m=s(650),b=s(655),f=s(700),x=s(39),j=s(644),g=s(747),P=s(169),_=s(128),O=s(664),v=s(19),y=s(1),N=function(t){Object(i.a)(s,t);var e=Object(a.a)(s);function s(){return Object(o.a)(this,s),e.apply(this,arguments)}return Object(n.a)(s,[{key:"render",value:function(){var t=this;return Object(y.jsx)(v.c,{backDrop:!0,theme:v.b.default,close:function(){t.props.setThisPost(null),t.props.setViewPost(!1)},displayClose:!0,backDropClose:!1,title:Object(y.jsx)("div",{className:"flex flex-row gap-4 items-center",children:Object(y.jsx)("div",{className:"flex flex-col",children:Object(y.jsx)("span",{className:"font-bold text-2xl text-gray-500",children:"Viewing Post Request"})})}),widthSizeClass:v.a.large,padding:{title:!0,body:!1,footer:!1},children:Object(y.jsxs)("section",{className:"px-4 mx-auto mb-4 mt-3 flex items-start",children:[Object(y.jsxs)("section",{className:"w-full",children:[Object(y.jsxs)("div",{className:"flex flex-row item-center justify-left gap-3 mb-2",children:[Object(y.jsx)("span",{className:"text-gray-500 italic",children:"Position: "}),Object(y.jsx)("span",{className:"font-bold",children:Object(j.c)(this.props.systemPositions,this.props.thisPost.position_id)?Object(j.c)(this.props.systemPositions,this.props.thisPost.position_id).position_title:"Unknown position"})]}),Object(y.jsxs)("div",{className:"flex flex-row item-center justify-left gap-3 mb-2",children:[Object(y.jsx)("span",{className:"text-gray-500 italic",children:"Requested posts: "}),Object(y.jsx)("span",{className:"font-bold text-xl",children:this.props.thisPost.needed_posts})]}),Object(y.jsxs)("div",{className:"flex flex-row item-center justify-left gap-3 mb-2",children:[Object(y.jsx)("span",{className:"text-gray-500 italic",children:"Approved posts: "}),Object(y.jsx)("span",{className:"font-bold text-xl",children:this.props.thisPost.requested_post_status!==O.c.INITIATED?this.props.thisPost.confirmed_posts:"-"})]}),Object(y.jsxs)("div",{className:"flex flex-row item-center justify-left gap-3 mb-2",children:[Object(y.jsx)("span",{className:"text-gray-500 italic",children:"Placed posts: "}),Object(y.jsx)("span",{className:"font-bold text-xl",children:this.props.thisPost.requested_post_status!==O.c.INITIATED?Object(y.jsxs)("div",{className:"flex items-center gap-1 cursor-pointer",onClick:function(){return t.props.setModalState("RECEIVE")},children:[V(this.props.schoolPlacements,this.props.thisPost._id).length,V(this.props.schoolPlacements,this.props.thisPost._id).length>0&&Object(y.jsx)(P.g,{className:"bg-yellow-600 w-5 h-5 text-white"})]}):"-"})]}),Object(y.jsxs)("div",{className:"flex flex-row item-center justify-left gap-3 mb-2",children:[Object(y.jsx)("span",{className:"text-gray-500 italic",children:"Received posts: "}),Object(y.jsx)("span",{className:"font-bold text-xl",children:this.props.thisPost.requested_post_status===O.c.RECEIVED?this.props.thisPost.received_posts:"-"})]}),Object(y.jsxs)("div",{className:"flex flex-row item-center justify-left gap-3 mb-2",children:[Object(y.jsx)("span",{className:"text-gray-500 italic",children:"Number of female: "}),Object(y.jsx)("span",{className:"font-bold text-xl",children:this.props.thisPost.female_number})]}),Object(y.jsxs)("div",{className:"flex flex-row item-center justify-left gap-3 mb-2",children:[Object(y.jsx)("span",{className:"text-gray-500 italic",children:"Number of male: "}),Object(y.jsx)("span",{className:"font-bold text-xl",children:this.props.thisPost.male_number})]}),Object(y.jsxs)("div",{className:"flex flex-row item-center justify-left gap-3 mb-2",children:[Object(y.jsx)("span",{className:"text-gray-500 italic",children:"Request reason: "}),Object(y.jsx)("span",{className:"font-bold text-xl",children:this.props.thisPost.description})]}),Object(y.jsxs)("div",{className:"flex flex-row item-center justify-left gap-3 mb-2",children:[Object(y.jsx)("span",{className:"text-gray-500 italic",children:"Status: "}),Object(y.jsx)("span",{className:"px-2 py-1 mx-1 font-semibold rounded ".concat(this.props.thisPost.requested_post_status===O.c.INITIATED?"text-gray-700 bg-gray-100 dark:bg-gray-700 dark:text-gray-100":this.props.thisPost.requested_post_status===O.c.CONFIRMED?"text-blue-700 bg-blue-100 dark:bg-blue-700 dark:text-blue-100":"text-green-800 bg-green-100 dark:bg-green-800 dark:text-green-100"),children:this.props.thisPost.requested_post_status===O.c.INITIATED?"Pending":Object(j.a)(this.props.thisPost.requested_post_status)})]})]}),Object(y.jsxs)("div",{className:"mb-3 flex items-center justify-end gap-2",children:[this.props.thisPost.requested_post_status===O.c.INITIATED&&Object(y.jsx)("button",{className:"font-bold py-1 px-4 rounded bg-gray-500 text-white hover:bg-gray-700",onClick:function(){t.props.setModalState("UPDATE"),t.props.setPostId(t.props.thisPost._id),t.props.setPositionId(t.props.thisPost.position_id),t.props.setRequestedPosts(t.props.thisPost.needed_posts),t.props.setRequestExplanation(t.props.thisPost.description),t.props.setFemaleOnPosition(t.props.thisPost.female_number),t.props.setMaleOnPosition(t.props.thisPost.male_number),t.props.setFormSteps({ONE:!0,TWO:!1}),t.props.setStepState({ONE:!1,TWO:!1})},disabled:this.props.thisPost.requested_post_status!==O.c.INITIATED,children:"Edit"}),this.props.thisPost.requested_post_status!==O.c.INITIATED&&V(this.props.schoolPlacements,this.props.thisPost._id).length>0&&Object(y.jsx)("button",{className:"font-bold py-1 px-2 rounded bg-gray-500 text-white hover:bg-gray-700",onClick:function(){return t.props.setModalState("RECEIVE")},children:"Receive"})]})]})})}}]),s}(r.Component),E=function(t){Object(i.a)(s,t);var e=Object(a.a)(s);function s(t){var n;return Object(o.a)(this,s),(n=e.call(this,t)).setSearchInput=function(t){n.setState({searchInput:t})},n.state={searchInput:""},n}return Object(n.a)(s,[{key:"render",value:function(){var t=this;return Object(y.jsxs)("div",{children:[Object(y.jsxs)("div",{className:"my-2 flex sm:flex-row flex-col justify-between",children:[Object(y.jsx)("div",{className:"flex flex-col md:flex-row",children:Object(y.jsxs)("select",{className:"border-2 border-gray-700 bg-white p-2 rounded focus:outline-none",onChange:function(e){return t.props.setFilterByPosition(e.target.value)},value:this.props.filterByPosition,children:[Object(y.jsx)("option",{value:"all",children:"All Position"}),this.props.systemPositions&&this.props.systemPositions.length>0?this.props.systemPositions.map((function(t,e){return Object(y.jsx)("option",{value:t.position_id,children:t.position_title},e+1)})):Object(y.jsx)("option",{value:"",children:"No Position found"})]})}),Object(y.jsx)("div",{className:"block relative",children:Object(y.jsx)("div",{className:"pt-6 md:pt-0 md:pl-6",children:Object(y.jsx)("button",{className:"btn bg-primary text-white hover:bg-blue-600",onClick:function(){return t.props.setModalState("CREATE")},disabled:this.props.loadingRequest,children:"Request Teacher"})})})]}),Object(y.jsx)("div",{className:"w-full py-2",children:Object(y.jsx)("input",{onChange:function(e){return t.setSearchInput(e.target.value)},type:"text",value:this.state.searchInput,placeholder:"Search...",className:"w-full bg-gray-50 border-2 border-gray-400 py-2 px-3 rounded focus:border-gray-800",disabled:this.props.schoolPosts.length<=0||this.props.loadingRequest})}),Object(y.jsxs)("table",{className:"w-full shadow",id:"report_content",children:[Object(y.jsx)("thead",{className:"bg-blue-50 border-b-2 border-gray-300 text-gray-600 font-bold text-sm",children:Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{className:"px-2 py-2",children:"#"}),Object(y.jsx)("td",{className:"px-2 py-2",children:"Position"}),Object(y.jsx)("td",{className:"px-2 py-2",children:"Current F"}),Object(y.jsx)("td",{className:"px-2 py-2",children:"Current M"}),Object(y.jsx)("td",{className:"px-2 py-2",children:"Request"}),Object(y.jsx)("td",{className:"px-2 py-2",children:"Approved"}),Object(y.jsx)("td",{className:"px-2 py-2",children:"Placed"}),Object(y.jsx)("td",{className:"px-2 py-2",children:"Received"}),Object(y.jsx)("td",{className:"px-2 py-2",children:"Not Received"}),Object(y.jsx)("td",{className:"px-2 py-2",children:"Vacant"}),Object(y.jsx)("td",{className:"px-2 py-2",children:"Status"}),Object(y.jsx)("td",{className:"px-2 py-2"})]})}),Object(y.jsx)("tbody",{children:this.props.schoolPosts.length>0?this.props.schoolPosts.map((function(e,s){return Object(y.jsxs)("tr",{className:"border-b border-gray-200 hover:bg-gray-100",children:[Object(y.jsx)("td",{className:"px-2 py-3 text-left font-medium",children:s+1}),Object(y.jsx)("td",{className:"py-3 px-1 text-left font-medium",children:t.props.systemPositions&&Object(j.c)(t.props.systemPositions,e.position_id)?Object(j.c)(t.props.systemPositions,e.position_id).position_title:"Unknown position"}),Object(y.jsx)("td",{className:"py-3 px-3 text-left text-base font-medium",children:e.female_number}),Object(y.jsx)("td",{className:"py-3 px-3 text-left text-base font-medium",children:e.male_number}),Object(y.jsx)("td",{className:"py-3 px-3 text-left text-base font-medium",children:e.needed_posts}),Object(y.jsx)("td",{className:"py-3 px-3 text-left text-base font-medium",children:e.requested_post_status!==O.c.INITIATED?e.confirmed_posts:"-"}),Object(y.jsx)("td",{className:"py-3 px-3 text-left text-base font-medium",children:Object(y.jsxs)("div",{className:"flex items-center gap-1",children:[e.confirmed_posts&&V(t.props.schoolPlacements,e._id).length,V(t.props.schoolPlacements,e._id).length>0&&Object(y.jsx)(P.g,{className:"bg-yellow-600 w-5 h-5 text-white cursor-pointer",onClick:function(){t.props.setModalState("RECEIVE"),t.props.setThisPost(e)}})]})}),Object(y.jsx)("td",{className:"py-3 px-3 text-left text-base font-medium",children:e.received_posts}),Object(y.jsx)("td",{className:"py-3 px-3 text-left text-base font-medium",children:e.confirmed_posts&&V(t.props.schoolPlacements,e._id,f.b.REJECTED).length}),Object(y.jsx)("td",{className:"py-3 px-3 text-left text-base font-medium",children:e.confirmed_posts&&V(t.props.schoolPlacements,e._id,"all").length-V(t.props.schoolPlacements,e._id,f.b.PLACED).length}),Object(y.jsx)("td",{children:Object(y.jsx)("span",{className:"px-2 py-1 font-semibold rounded ".concat(e.requested_post_status===O.c.INITIATED?"text-gray-700 bg-gray-100 dark:bg-gray-700 dark:text-gray-100":e.requested_post_status===O.c.CONFIRMED?"text-blue-700 bg-blue-100 dark:bg-blue-700 dark:text-blue-100":"text-green-800 bg-green-100 dark:bg-green-800 dark:text-green-100"),children:Object(g.b)(e.requested_post_status,V(t.props.schoolPlacements,e._id,"all").length,V(t.props.schoolPlacements,e._id,f.b.PLACED).length,V(t.props.schoolPlacements,e._id,f.b.REJECTED).length)})}),Object(y.jsx)("td",{className:"py- text-left",children:Object(y.jsxs)("div",{className:"flex item-center justify-end gap-1",children:[Object(y.jsx)("button",{className:"btn btn-blue transition ease-out duration-500 flex items-center",title:"View User Profile",onClick:function(){t.props.setThisPost(e),t.props.setViewPost(!0)},children:"Details"}),e.requested_post_status===O.c.INITIATED&&Object(y.jsx)("button",{className:"btn bg-gray-500 text-white hover:bg-gray-700",onClick:function(){t.props.setModalState("UPDATE"),t.props.setPostId(e._id),t.props.setPositionId(e.position_id),t.props.setRequestedPosts(e.needed_posts),t.props.setRequestExplanation(e.description),t.props.setFemaleOnPosition(e.female_number),t.props.setMaleOnPosition(e.male_number),t.props.setFormSteps({ONE:!0,TWO:!1}),t.props.setStepState({ONE:!1,TWO:!1})},disabled:t.props.loadingRequest,children:"Edit"}),V(t.props.schoolPlacements,e._id).length>0&&Object(y.jsx)("button",{className:"btn bg-green-600 text-white hover:bg-green-700",onClick:function(){t.props.setModalState("RECEIVE"),t.props.setThisPost(e)},disabled:t.props.loadingRequest,children:"Receive"})]})})]},s+e._id)})):Object(y.jsx)("tr",{children:Object(y.jsx)("td",{colSpan:12,children:Object(y.jsx)(_.b,{theme:_.a.Dark,value:"No request have been made!"})})})})]}),this.props.viewPost&&null===this.props.modalState&&this.props.thisPost&&this.props.systemPositions&&Object(y.jsx)(N,{thisPost:this.props.thisPost,setThisPost:this.props.setThisPost,setViewPost:this.props.setViewPost,systemPositions:this.props.systemPositions,schoolPlacements:this.props.schoolPlacements,setPostId:this.props.setPostId,setModalState:this.props.setModalState,setPositionId:this.props.setPositionId,setRequestedPosts:this.props.setRequestedPosts,setRequestExplanation:this.props.setRequestExplanation,setFemaleOnPosition:this.props.setFemaleOnPosition,setMaleOnPosition:this.props.setMaleOnPosition,setFormSteps:this.props.setFormSteps,setStepState:this.props.setStepState})]})}}]),s}(r.Component),S=s(4),T=s.n(S),I=s(7),w=s(8),q=s.n(w),C=s(9),A=s(13),R=s(748),L=s(63),D=s(111),k=function(t){return Object(y.jsx)(r.Fragment,{children:Object(y.jsx)("div",{className:"p-5",children:Object(y.jsx)("div",{className:"mx-4 p-4",children:Object(y.jsxs)("div",{className:"flex items-center",children:[Object(y.jsxs)("div",{className:"flex items-center ".concat(1===t.currentStep?"text-white":t.stepState.ONE?"text-blue-500 cursor-pointer":"text-gray-500"," relative"),onClick:function(){return t.stepState.ONE&&t.setFormSteps({ONE:!0,TWO:!1})},children:[Object(y.jsx)("div",{className:"rounded-full transition duration-500 ease-in-out h-12 w-12 py-3 border-2 ".concat(1===t.currentStep?"border-blue-500 bg-blue-500":t.stepState.ONE?"border-blue-500 cursor-pointer":"border-gray-500"),children:Object(y.jsx)(L.m,{className:"feather feather-bookmark w-full h-full"})}),Object(y.jsx)("div",{className:"absolute top-0 -ml-10 text-center mt-16 w-32 text-xs font-semibold uppercase ".concat(1===t.currentStep?"text-blue-500":t.stepState.ONE?"text-blue-500 cursor-pointer":"text-gray-500"),children:"Position"})]}),Object(y.jsx)("div",{className:"flex-auto border-t-2 transition duration-500 ease-in-out ".concat(t.stepState.ONE?"border-blue-500":"border-gray-300")}),Object(y.jsxs)("div",{className:"flex items-center ".concat(4===t.currentStep?"text-white":t.stepState.TWO?"text-blue-500 cursor-pointer":"text-gray-500"," relative"),onClick:function(){return t.stepState.TWO&&t.setFormSteps({ONE:!1,TWO:!1})},children:[Object(y.jsx)("div",{className:"rounded-full transition duration-500 ease-in-out h-12 w-12 py-3 border-2 ".concat(4===t.currentStep?"border-blue-500 bg-blue-500":t.stepState.TWO?"border-blue-500 cursor-pointer":"border-gray-500"),children:Object(y.jsx)(D.d,{className:"feather feather-database w-full h-full"})}),Object(y.jsx)("div",{className:"absolute top-0 -ml-10 text-center mt-16 w-32 text-xs font-semibold uppercase ".concat(4===t.currentStep||t.stepState.TWO?"text-blue-500":"text-gray-500"),children:"Description"})]})]})})})})},M=function(t){Object(i.a)(s,t);var e=Object(a.a)(s);function s(t){var n;return Object(o.a)(this,s),(n=e.call(this,t)).GetAllowedPositions=function(t){if(n.props.systemPositions){if(n.props.schoolPosts.length>0){var e=[];for(var s in n.props.schoolPosts)Object.prototype.hasOwnProperty.call(n.props.schoolPosts,s)&&(n.props.schoolPosts[s].requested_post_status!==O.c.RECEIVED||n.props.schoolPosts[s].requested_post_status!==O.c.CONFIRMED&&n.props.schoolPosts[s].confirmed_posts&&0===n.props.schoolPosts[s].confirmed_posts)&&(t&&t===n.props.schoolPosts[s].position_id||e.push(n.props.schoolPosts[s].position_id));return t&&(e=e.filter((function(e){return e!==t}))),n.props.systemPositions.filter((function(t){return!e.includes(t.position_id)}))}return n.props.systemPositions}return[]},n.submitRequest=function(){var t=Object(I.a)(T.a.mark((function t(e){var s,o,i;return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.preventDefault(),!(n.props.requestedPosts<=0)){t.next=3;break}return t.abrupt("return",n.props.setFormError({element:"requested_posts",msg:"Needed post must be greater than 0"}));case 3:if(!Object(j.e)(n.props.requestExplanation)){t.next=5;break}return t.abrupt("return",n.props.setFormError({element:"comment",msg:"Explanation is required!"}));case 5:if(s=n.props.mySchool){t.next=8;break}return t.abrupt("return",n.props.PushPopupAlert({title:"No district id found",theme:x.a.danger}));case 8:if("UPDATE"!==n.props.modalState||!Object(j.e)(n.props.postId)){t.next=10;break}return t.abrupt("return",n.setState({error:"Post id not find"}));case 10:if(n.props.setLoadingRequest(!0),t.prev=11,"CREATE"!==n.props.modalState){t.next=17;break}return t.next=15,q.a.post("".concat(C.a.PLACEMENT,"/requestpost"),{school_id:n.props.auth.user_access.school_id,position_id:n.props.positionId,district_id:s.district_id,needed_posts:n.props.requestedPosts,male_number:n.props.maleOnPosition,female_number:n.props.femaleOnPosition,description:n.props.requestExplanation,occupied_posts:Number(n.props.maleOnPosition)+Number(n.props.femaleOnPosition),requested_by:n.props.auth.user.user_id,post_request_session_id:n.props.sessionId});case 15:(o=t.sent)&&(n.props.createSchoolPost(o.data.data),n.props.setPositionId(""),n.props.setRequestedPosts(0),n.props.setFemaleOnPosition(0),n.props.setMaleOnPosition(0),n.props.setRequestExplanation(""),n.props.setFormSteps({ONE:!0,TWO:!1}),n.props.setStepState({ONE:!1,TWO:!1}),n.props.PushPopupAlert({title:"Post(s) has been requested!",theme:x.a.success}));case 17:if("UPDATE"!==n.props.modalState){t.next=25;break}return console.log("===================================="),console.log({confirmed_posts:0,confirmed_by:null,received_posts:0,approval_date:null,school_id:n.props.auth.user_access.school_id,position_id:n.props.positionId,district_id:s.district_id._id,needed_posts:n.props.requestedPosts,male_number:n.props.maleOnPosition,female_number:n.props.femaleOnPosition,description:n.props.requestExplanation,occupied_posts:Number(n.props.maleOnPosition)+Number(n.props.femaleOnPosition),requested_by:n.props.auth.user.user_id,requested_post_status:O.c.INITIATED}),console.log("===================================="),t.next=23,q.a.patch("".concat(C.a.PLACEMENT,"/requestpost/").concat(n.props.postId),{confirmed_posts:0,confirmed_by:null,received_posts:0,approval_date:null,school_id:n.props.auth.user_access.school_id,position_id:n.props.positionId,district_id:s.district_id,needed_posts:n.props.requestedPosts,male_number:n.props.maleOnPosition,female_number:n.props.femaleOnPosition,description:n.props.requestExplanation,occupied_posts:Number(n.props.maleOnPosition)+Number(n.props.femaleOnPosition),requested_by:n.props.auth.user.user_id,requested_post_status:O.c.INITIATED,post_request_session_id:n.props.sessionId});case 23:(i=t.sent)&&(console.log("===================================="),console.log({updateSchoolPost:i.data.data}),console.log("===================================="),n.props.updateSchoolPost("SCHOOL",i.data.data),n.props.setPostId(""),n.props.setPositionId(""),n.props.setRequestedPosts(0),n.props.setFemaleOnPosition(0),n.props.setMaleOnPosition(0),n.props.setRequestExplanation(""),n.props.setFormSteps({ONE:!0,TWO:!1}),n.props.setStepState({ONE:!1,TWO:!1}),n.props.PushPopupAlert({title:"Post(s) has been updated!",theme:x.a.info}));case 25:t.next=31;break;case 27:t.prev=27,t.t0=t.catch(11),console.error({role_error:t.t0}),n.props.PushPopupAlert({title:Object(A.a)(t.t0),theme:x.a.danger});case 31:n.props.setLoadingRequest(!1);case 32:case"end":return t.stop()}}),t,null,[[11,27]])})));return function(e){return t.apply(this,arguments)}}(),n.setSchoolLevel=function(t){n.setState({selectedLevel:t})},n.getPositionByLevelId=function(t,e){return Object(j.e)(e)?t:t.filter((function(t){return t.school_level_id.school_level_id===e}))},n.state={selectedLevel:"",error:null},n}return Object(n.a)(s,[{key:"render",value:function(){var t=this;return Object(y.jsxs)("div",{children:[Object(y.jsx)(k,{currentStep:this.props.formSteps.TWO?2:1,stepState:this.props.stepState,setFormSteps:this.props.setFormSteps}),Object(y.jsxs)("div",{className:"px-4 mx-auto mb-4 mt-3",children:[this.props.formSteps.ONE&&Object(y.jsxs)("section",{children:[Object(y.jsxs)("div",{className:"flex flex-col mb-4",children:[Object(y.jsx)("label",{children:"School level"}),Object(y.jsxs)("select",{className:"border-2 border-gray-700 bg-white p-2 rounded focus:outline-none focus:bg-gray-100",value:this.state.selectedLevel,onChange:function(e){t.setSchoolLevel(e.target.value)},children:[Object(y.jsx)("option",{value:"",children:"Choose level"}),this.props.schoolLevels.school_levels&&this.props.schoolLevels.school_levels.length>0?this.props.schoolLevels.school_levels.map((function(t,e){return Object(y.jsx)("option",{value:t.school_level_id,children:t.school_level_name},e+11)})):Object(y.jsx)("option",{children:"No school level found"})]})]}),Object(y.jsxs)("div",{className:"flex flex-col",children:[Object(y.jsx)("label",{children:"Select Position"}),Object(y.jsxs)("select",{className:"border-2 border-gray-700 bg-white p-2 rounded focus:outline-none focus:bg-gray-100",value:this.props.positionId,onChange:function(e){t.props.setPositionId(e.target.value)},children:[Object(y.jsx)("option",{value:"",children:"Choose Position"}),this.props.systemPositions&&this.getPositionByLevelId(this.GetAllowedPositions(this.props.positionId.length>0?this.props.positionId:""),this.state.selectedLevel).length>0?this.getPositionByLevelId(this.GetAllowedPositions(this.props.positionId.length>0?this.props.positionId:""),this.state.selectedLevel).map((function(t,e){return Object(y.jsx)("option",{value:t.position_id,children:t.position_title},e+11)})):Object(y.jsx)("option",{children:"No position found"})]})]}),this.props.positionId.length>0&&this.props.systemPositions&&Object(j.c)(this.props.systemPositions,this.props.positionId)&&Object(y.jsx)("div",{className:"my-2 rounded border",children:Object(y.jsx)(R.a,{thisPosition:Object(j.c)(this.props.systemPositions,this.props.positionId),isGuest:!0})}),Object(y.jsx)("div",{className:"bg-white w-full flex justify-end",children:this.props.positionId.length>0&&Object(y.jsx)("button",{className:"btn btn-blue m-1 mr-2 mb-2 animate__animated animate__fadeIn focus:outline-none",onClick:function(){t.props.setFormSteps({ONE:!1,TWO:!0}),t.props.setStepState({ONE:!0,TWO:!1})},children:"Continue"})})]}),Object(y.jsx)("form",{onSubmit:this.submitRequest,children:Object(y.jsxs)("div",{className:"bg-white",children:[this.props.formSteps.TWO&&Object(y.jsxs)("div",{className:"text-base leading-6 space-y-4 text-gray-700 sm:text-lg sm:leading-7",children:[this.state.error&&Object(y.jsx)("div",{className:"alert-warning animate__animated animate__fadeInRight animate__faster",onClick:function(){return t.setState({error:null})},children:this.state.error}),Object(y.jsxs)("div",{className:"mb-4 md:flex md:justify-between",children:[Object(y.jsxs)("div",{className:"mb-4 md:mr-2 md:mb-0 w-full",children:[Object(y.jsx)("label",{className:"block mb-2 text-sm font-bold text-gray-700",htmlFor:"female",children:"Current number of Female on this position"}),Object(y.jsx)("input",{className:"appearance-none rounded w-full py-1 px-4 border-2 border-gray-700 bg-white focus:outline-none focus:bg-gray-100",id:"female",type:"number",min:0,value:this.props.femaleOnPosition,onChange:function(e){return t.props.setFemaleOnPosition(Number(e.target.value))},placeholder:"Current number of Female on this position"})]}),Object(y.jsxs)("div",{className:"md:ml-2 w-full",children:[Object(y.jsx)("label",{className:"block mb-2 text-sm font-bold text-gray-700",htmlFor:"male",children:"Current number of Male on this position"}),Object(y.jsx)("input",{className:"appearance-none rounded w-full py-1 px-4 border-2 border-gray-700 bg-white focus:outline-none focus:bg-gray-100",id:"male",type:"number",min:0,value:this.props.maleOnPosition,onChange:function(e){return t.props.setMaleOnPosition(Number(e.target.value))},placeholder:"Current number of Male on this post"})]})]}),Object(y.jsxs)("div",{className:"flex flex-col",children:[Object(y.jsx)("label",{children:"Needed posts (number)"}),Object(y.jsx)("input",{type:"number",className:"appearance-none rounded w-full py-1 px-4 border-2 bg-white focus:outline-none focus:bg-gray-100 ".concat(this.props.formError&&"requested_posts"===this.props.formError.element?"border-red-700":"border-gray-700"),value:this.props.requestedPosts,onChange:function(e){t.props.setRequestedPosts(Number(e.target.value)),t.props.formError&&"requested_posts"===t.props.formError.element&&t.props.setFormError(null)},placeholder:"1"}),this.props.formError&&"requested_posts"===this.props.formError.element&&Object(y.jsx)("span",{className:"text-xs italic text-red-700 mt-1",children:this.props.formError.msg})]}),Object(y.jsxs)("div",{className:"flex flex-col",children:[Object(y.jsx)("label",{children:"Explanation"}),Object(y.jsx)("textarea",{name:"description",className:"appearance-none rounded w-full py-1 px-4 border-2 bg-white focus:outline-none focus:bg-gray-100 ".concat(this.props.formError&&"comment"===this.props.formError.element?"border-red-700":"border-gray-700"),id:"description",placeholder:"Explanation",value:this.props.requestExplanation,onChange:function(e){t.props.setRequestExplanation(e.target.value),t.props.formError&&"comment"===t.props.formError.element&&t.props.setFormError(null)},rows:2}),this.props.formError&&"comment"===this.props.formError.element&&Object(y.jsx)("span",{className:"text-xs italic text-red-700 mt-1",children:this.props.formError.msg})]})]}),Object(y.jsxs)("div",{className:"pt-4 flex justify-between",children:[Object(y.jsx)("button",{className:"btn bg-gray-400 text-white hover:bg-gray-600",onClick:function(){t.props.setPositionId(""),t.props.setRequestedPosts(0),t.props.setFemaleOnPosition(0),t.props.setMaleOnPosition(0),t.props.setRequestExplanation(""),t.props.setModalState(null),t.props.setFormError(null),t.props.setFormSteps({ONE:!0,TWO:!1}),t.props.setStepState({ONE:!1,TWO:!1})},disabled:this.props.loadingRequest,children:"Exit"}),this.props.formSteps.TWO&&Object(y.jsx)("button",{className:"btn bg-primary text-white hover:bg-blue-600",disabled:this.props.loadingRequest,children:this.props.loadingRequest?"Loading...":"UPDATE"===this.props.modalState?"Update":"Request"})]})]})})]})]})}}]),s}(r.Component),F=Object(p.b)((function(t){var e=t.auth,s=t.schools,o=t.system_settings,n=t.schoolLevels;return{auth:e,mySchool:s.mySchool,schoolPosts:s.schoolPosts,schoolLevels:n,systemPositions:o.systemPositions}}),{createSchoolPost:h.b,updateSchoolPost:h.n,PushPopupAlert:u.Kb})(M),V=function(t,e){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:f.b.PENDING;return console.log("===================================="),console.log({placements:t,request:e}),console.log("===================================="),"all"!==s?t.filter((function(t){return t.request_id===e&&t.status===s})):t.filter((function(t){return t.request_id===e}))},B=function(t){Object(i.a)(s,t);var e=Object(a.a)(s);function s(t){var n;return Object(o.a)(this,s),(n=e.call(this,t)).setLoading=function(t){n.setState({loading:t})},n.setLoadingRequest=function(t){n.setState({loadingRequest:t})},n.setLoadingPost=function(t){n.setState({loadingPost:t})},n.setViewPost=function(t){n.setState({viewPost:t})},n.setPostId=function(t){n.setState({postId:t})},n.setFormError=function(t){n.setState({formError:t})},n.setPositionId=function(t){n.setState({positionId:t})},n.setRequestedPosts=function(t){n.setState({requestedPosts:t})},n.setFemaleOnPosition=function(t){n.setState({femaleOnPosition:t})},n.setMaleOnPosition=function(t){n.setState({maleOnPosition:t})},n.setRequestExplanation=function(t){n.setState({requestExplanation:t})},n.setFormSteps=function(t){n.setState({formSteps:t})},n.setStepState=function(t){n.setState({stepState:t})},n.setFilterByPosition=function(t){n.setState({filterByPosition:t})},n.setThisPost=function(t){n.setState({thisPost:t})},n.setModalState=function(t){n.setState({modalState:t})},n.setReceivedPosts=function(t){n.setState({receivedPosts:t})},n.loadData=function(){n.props.mySchool?n.setLoading(!1):n.props.getSchoolById(n.props.auth.user_access.school_id,(function(t,e){n.setLoading(t),e.length>0&&(console.error({loadingCandidatesError:e}),n.props.PushPopupAlert({title:e,theme:x.a.danger}),n.setLoading(!1))})),n.props.schoolPlacements?n.setLoading(!1):n.props.getSchoolPlacement(n.props.auth.user_access.school_id,(function(t,e,s){n.setLoading(t),!t&&e.length>0&&(console.error({getSchoolPlacementError:e}),n.props.PushPopupAlert({title:e,theme:x.a.danger}))})),null===n.props.systemPositions||0===n.props.systemPositions.length&&n.state.loading?(n.setLoading(!0),n.props.getPositions((function(t,e){n.setLoading(t),console.log({status:t,msg:e}),e.length&&n.props.PushPopupAlert({title:e,theme:x.a.danger})}))):n.setLoading(!1),(null===n.props.schoolLevels.school_levels||0===n.props.schoolLevels.school_levels.length&&n.state.loading)&&n.props.loadSchoolLevels(n.setLoading),!n.props.schoolPosts.length&&n.state.loadingPost?n.props.fetchSchoolPosts(n.props.auth.user_access.school_id,(function(t,e){t||(e.length>0&&n.state.loadingPost&&(console.error("error loading school post: ",e),n.props.PushPopupAlert({title:e,theme:x.a.danger})),n.setState({loadingPost:!1}))})):n.setState({loadingPost:!1})},n.componentDidMount=function(){if(Object(j.e)(n.props.auth.user_access.school_id))return Object(y.jsx)(d.a,{to:"/apps-page"});null===n.props.activeAcademicSession||"none"===n.props.activeAcademicSession?n.props.getActiveAcademicSession((function(t,e,s){n.setLoading(t),e.length>0&&(console.error({loadingCandidatesError:e}),n.props.PushPopupAlert({title:e,theme:x.a.danger})),s&&"none"!==s&&n.loadData()})):n.loadData()},n.getPositionById=function(t,e){return t.find((function(t){return t.position_id===e}))},n.state={loading:!0,loadingPost:!0,loadingRequest:!1,modalState:null,filterByPosition:"",positionId:"",requestedPosts:0,femaleOnPosition:0,maleOnPosition:0,requestExplanation:"",formSteps:{ONE:!0,TWO:!1},stepState:{ONE:!1,TWO:!1},thisPost:null,viewPost:!1,postId:"",receivedPosts:0,formError:null},n}return Object(n.a)(s,[{key:"render",value:function(){var t,e;return null!==this.props.activeAcademicSession&&"none"===this.props.activeAcademicSession?Object(y.jsxs)("div",{className:"bg-yellow-100 rounded flex flex-col items-center justify-center p-6 my-8 text-yellow-900 border border-yellow-900",children:[Object(y.jsx)(l.O,{className:"text-6xl md:text-9xl"}),Object(y.jsxs)("div",{className:"text-center flex flex-col",children:[Object(y.jsx)("span",{className:"text-2xl md:text-4xl font-extrabold",children:"No academic active session"}),Object(y.jsx)("span",{className:"text-lg",children:"Please Wait for the system to publish the sessions or contact the administrator"})]})]}):this.state.loading?Object(y.jsx)("div",{className:"text-center mt-7 font-bold text-4xl text-gray-400 animate-pulse",children:"Loading data..."}):Object(y.jsxs)("div",{children:[Object(y.jsxs)("div",{className:"flex flex-row items-start gap-3 my-2",children:[Object(y.jsx)(c.a,{className:"text-blue-700 w-10 h-10 md:block hidden"}),Object(y.jsx)("div",{className:"w-full",children:Object(y.jsx)("div",{className:"flex justify-between w-full",children:Object(y.jsxs)("div",{className:"flex flex-col gap-1 justify-between",children:[Object(y.jsx)("h1",{className:"md:text-4xl text-3xl font-semibold",children:"Teacher Request"}),Object(y.jsx)("div",{className:"flex-row items-center md:gap-3 gap-2",children:Object(y.jsxs)("div",{className:"flex flex-row items-center gap-1",children:[Object(y.jsx)("span",{className:"text-gray-600 text-lg",children:"Academic session:"}),Object(y.jsx)("span",{className:"text-gray-600 font-semibold text-xl",children:null===(t=this.props.activeAcademicSession)||void 0===t?void 0:t.title})]})})]})})})]}),Object(y.jsxs)("div",{className:"bg-white shadow p-2 rounded",children:[!this.state.modalState&&this.props.schoolPlacements&&Object(y.jsx)(E,{systemPositions:this.props.systemPositions,setModalState:this.setModalState,loadingRequest:this.state.loadingRequest,setFilterByPosition:this.setFilterByPosition,schoolPosts:this.props.schoolPosts,setThisPost:this.setThisPost,setViewPost:this.setViewPost,setPostId:this.setPostId,setPositionId:this.setPositionId,setRequestedPosts:this.setRequestedPosts,setRequestExplanation:this.setRequestExplanation,setFemaleOnPosition:this.setFemaleOnPosition,setMaleOnPosition:this.setMaleOnPosition,setFormSteps:this.setFormSteps,setStepState:this.setStepState,thisPost:this.state.thisPost,viewPost:this.state.viewPost,modalState:this.state.modalState,schoolPlacements:this.props.schoolPlacements,filterByPosition:this.state.filterByPosition}),this.props.activeAcademicSession&&("CREATE"===this.state.modalState||"UPDATE"===this.state.modalState)&&Object(y.jsx)(F,{loadingRequest:this.state.loadingRequest,setLoadingRequest:this.setLoadingRequest,formSteps:this.state.formSteps,setFormSteps:this.setFormSteps,stepState:this.state.stepState,setStepState:this.setStepState,sessionId:null===(e=this.props.activeAcademicSession)||void 0===e?void 0:e._id,postId:this.state.postId,setPostId:this.setPostId,positionId:this.state.positionId,setPositionId:this.setPositionId,setRequestedPosts:this.setRequestedPosts,requestedPosts:this.state.requestedPosts,maleOnPosition:this.state.maleOnPosition,femaleOnPosition:this.state.femaleOnPosition,setFemaleOnPosition:this.setFemaleOnPosition,setMaleOnPosition:this.setMaleOnPosition,requestExplanation:this.state.requestExplanation,setRequestExplanation:this.setRequestExplanation,modalState:this.state.modalState,setModalState:this.setModalState,formError:this.state.formError,setFormError:this.setFormError}),"RECEIVE"===this.state.modalState&&this.state.thisPost&&this.props.systemPositions&&this.props.schoolPlacements&&Object(y.jsx)(g.a,{loadingPost:this.state.loadingPost,loadingRequest:this.state.loadingRequest,positionId:this.state.positionId,thisPost:this.state.thisPost,viewPost:this.state.viewPost,receivedPosts:this.state.receivedPosts,formError:this.state.formError,systemPositions:this.props.systemPositions,setThisPost:this.setThisPost,setModalState:this.setModalState,setFormError:this.setFormError,setReceivedPosts:this.setReceivedPosts,setLoadingRequest:this.setLoadingRequest,setLoadingPost:this.setLoadingPost,placementList:this.props.schoolPlacements})]})]})}}]),s}(r.Component),G=Object(p.b)((function(t){var e=t.auth,s=t.schools,o=t.system_settings,n=t.schoolLevels,i=t.sessionPlan;return{auth:e,mySchool:s.mySchool,schoolPosts:s.schoolPosts,schoolPlacements:s.schoolPlacements,schoolLevels:n,systemPositions:o.systemPositions,activeAcademicSession:i.activeAcademicSession}}),{loadSchoolLevels:u.Lc,getPositions:b.d,getSchoolById:h.i,fetchSchoolPosts:h.e,getSchoolPlacement:h.j,createSchoolPost:h.b,updateSchoolPost:h.n,getActiveAcademicSession:m.i,PushPopupAlert:u.Kb})(B)}}]);
//# sourceMappingURL=45.44aa00bd.chunk.js.map