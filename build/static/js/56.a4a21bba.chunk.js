(this["webpackJsonpreact-redux-typescript-advance"]=this["webpackJsonpreact-redux-typescript-advance"]||[]).push([[56],{810:function(e,t,a){"use strict";a.r(t),a.d(t,"ClaimReport",(function(){return I}));var s=a(18),n=a(5),i=a.n(n),l=a(2),c=a(7),r=a(25),o=a(24),d=a(27),u=a(26),p=a(10),h=a.n(p),m=a(4),b=a(123),x=a(23),j=a(3),v=a(8),g=a(33),_=a(1),f=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var s;return Object(r.a)(this,a),(s=t.call(this,e)).GetEvaluationHistory=Object(c.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.setState({loading:!0}),e.prev=1,e.next=4,h.a.post("".concat(v.a.CLAIMING,"/user/evaluator/").concat(s.props.claim_level),{period_id:"62a5ea76b038313901018796"});case 4:(t=e.sent).data&&s.setState({evaluators:t.data,loading:!1}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),s.setState({loading:!1}),console.log("Result: ",Object(l.a)({},e.t0));case 12:case"end":return e.stop()}}),e,null,[[1,8]])}))),s.componentDidMount=function(){s.GetEvaluationHistory()},s.state={loading:!0,evaluators:null},s}return Object(o.a)(a,[{key:"render",value:function(){return!0===this.state.loading||null===this.state.evaluators?Object(_.jsxs)("div",{className:"bg-white rounded p-5 mt-5",children:[Object(_.jsx)(g.a,{}),Object(_.jsx)("div",{className:"-mt-5 ml-5",children:"Loading data, please wait..."})]}):Object(_.jsx)("div",{children:Object(_.jsx)("div",{children:Object(_.jsxs)("table",{className:"w-full",children:[Object(_.jsx)("thead",{className:"bg-blue-100",children:Object(_.jsxs)("tr",{children:[Object(_.jsx)("th",{className:"px-3 py-2 text-center",children:"#"}),Object(_.jsx)("th",{className:"px-3 py-2 text-left",children:"Names"}),Object(_.jsx)("th",{className:"px-3 py-2 text-left",children:"Email"}),Object(_.jsx)("th",{className:"px-3 py-2 text-center",children:"Counts"})]})}),Object(_.jsx)("tbody",{children:0===this.state.evaluators.length?Object(_.jsx)("tr",{children:Object(_.jsx)("td",{colSpan:4,className:"bg-gray-200 p-5 text-center font-light text-3xl",children:"No result found!"})}):this.state.evaluators.sort((function(e,t){return e.evaluated<t.evaluated?1:t.evaluated<e.evaluated?-1:0})).map((function(e,t){return Object(_.jsxs)("tr",{className:"".concat(t%2!==0?"bg-gray-100":""),children:[Object(_.jsx)("td",{className:"px-3 py-1 text-center",children:t+1}),Object(_.jsx)("td",{className:"px-3 py-1 text-left",children:e.name}),Object(_.jsx)("td",{className:"px-3 py-1 text-left",children:e.email}),Object(_.jsx)("td",{className:"px-3 py-1 text-center",children:e.evaluated})]},t+1)}))})]})})})}}]),a}(m.Component),y=a(703),O=a.n(y),N=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var s;return Object(r.a)(this,a),(s=t.call(this,e)).setLoading=function(e){return s.setState({loading:e})},s.state={loading:!0},s}return Object(o.a)(a,[{key:"render",value:function(){return Object(_.jsxs)("div",{className:"animate__animated animate__fadeIn",children:[Object(_.jsxs)("div",{className:"flex flex-row items-center gap-4 h-64",children:[Object(_.jsxs)("div",{className:"bg-gray-100 rounded p-4 border border-blue-600 h-full",children:[Object(_.jsx)("div",{children:Object(_.jsx)("div",{className:"font-extrabold text-xl",children:"General summary"})}),Object(_.jsx)("div",{id:"chart",children:Object(_.jsx)(O.a,{options:{chart:{width:380,type:"donut"},labels:["Total Completed claims (".concat(this.props.general_main_data.completedClaimCounts,")"),"Total evaluated claims (".concat(this.props.general_main_data.evaluatedClaimCounts,")"),"Total pending claims (".concat(this.props.general_main_data.pendingClaimCounts,")"),"Total Canceled claims (".concat(this.props.general_main_data.deletedClaimCounts,")")],responsive:[{breakpoint:480,options:{chart:{width:200},legend:{position:"bottom"}}}]},series:[this.props.general_main_data.completedClaimCounts,this.props.general_main_data.evaluatedClaimCounts,this.props.general_main_data.pendingClaimCounts,this.props.general_main_data.deletedClaimCounts],type:"donut",width:400})})]}),Object(_.jsxs)("div",{className:"bg-gray-100 rounded p-4 border border-blue-600 h-full",children:[Object(_.jsxs)("div",{children:[Object(_.jsx)("div",{className:"font-extrabold text-xl",children:this.props.selected_claim_type}),Object(_.jsxs)("div",{className:"font-extrabold text-sm text-blue-600",children:["Claim level:"," ",1===this.props.claim_level?"Level one":"Public Service Commission"]})]}),Object(_.jsx)("div",{id:"chart",children:Object(_.jsx)(O.a,{options:{chart:{width:380,type:"pie"},labels:["Total pending claims (".concat(this.props.general_summary.pending,")"),"Total evaluated claims (".concat(this.props.general_summary.validated,")")],responsive:[{breakpoint:480,options:{chart:{width:200},legend:{position:"bottom"}}}]},series:[this.props.general_summary.pending,this.props.general_summary.validated],type:"pie",width:400})})]})]}),Object(_.jsxs)("div",{className:"animate__animated animate__fadeIn rounded border border-blue-600 pt-3 pr-2 mt-4",children:[Object(_.jsx)("div",{id:"chart",className:"h-auto",children:Object(_.jsx)(O.a,{options:{theme:{mode:"light",palette:"palette1",monochrome:{enabled:!1,color:"#255aee",shadeTo:"light",shadeIntensity:.65}},chart:{type:"bar",height:"auto"},plotOptions:{bar:{borderRadius:2,horizontal:!0,barHeight:"100px"}},dataLabels:{enabled:!0},xaxis:{categories:this.props.summary_details.map((function(e){return e.position_title}))}},series:[{name:"Total claims",data:this.props.summary_details.map((function(e){return e.total}))},{name:"Pending claims",data:this.props.summary_details.map((function(e){return e.pending}))},{name:"Validated claims",data:this.props.summary_details.map((function(e){return e.validated}))}],type:"bar",height:this.props.summary_details.length>60?5e3:3e3})}),console.log("Length: ",this.props.summary_details.length)]})]})}}]),a}(m.Component),C=a(9),w=a(32),S=a(28),L=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).setLoading=function(e){return n.setState({loading:e})},n.GetClaims=function(){var e=Object(c.a)(i.a.mark((function e(t,a){var s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.setLoading(!0),e.prev=1,e.next=4,h.a.post("".concat(v.a.CLAIMING,"/user/level/").concat(t),{period_id:a});case 4:(s=e.sent).data&&n.setState({data:s.data}),console.log("Response: ",s.data),n.setLoading(!1),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),console.log("Error: ",Object(l.a)({},e.t0)),n.setLoading(!1);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,a){return e.apply(this,arguments)}}(),n.GetSummaryFilter=function(e){var t,a=[],n=Object(s.a)(e);try{var i=function(){var e=t.value,s=a.find((function(t){return t.position_title===e.position_title}));void 0!==s?(a=a.filter((function(e){return e.position_title!==s.position_title}))).push({position_title:s.position_title,total:s.total+1,pending:e.status===C.b.PENDING?s.pending+1:s.pending,validated:e.status===C.b.EVALUATED?s.validated+1:s.validated}):a.push({position_title:e.position_title,total:e.total,pending:e.status===C.b.PENDING?1:0,validated:e.status===C.b.EVALUATED?1:0})};for(n.s();!(t=n.n()).done;)i()}catch(l){n.e(l)}finally{n.f()}return a},n.GetSummary=function(e){var t,a=[],i=e.filter((function(e){return e.type_key===n.state.selected_claim_type})),l=Object(s.a)(i);try{for(l.s();!(t=l.n()).done;){var c=t.value;a.push({position_title:c.title,total:1,status:c.claims.filter((function(e){return e.level===n.state.selected_level}))[0].claim_status})}}catch(r){l.e(r)}finally{l.f()}return n.GetSummaryFilter(a).sort((function(e,t){return e.pending<t.pending?1:t.pending<e.pending?-1:0}))},n.GetSummaryCounts=function(e){var t,a=0,n=0,i=0,l=Object(s.a)(e);try{for(l.s();!(t=l.n()).done;){var c=t.value;a+=c.pending,n+=c.validated,i+=c.total}}catch(r){l.e(r)}finally{l.f()}return{pending:a,validated:n,total:i}},n.componentDidMount=function(){if(null===n.state.general_main_data&&n.getMainSummary(n.state.selected_level),null===n.props.schoolLevels.selectedEducationCategory){if(null!==n.props.schoolLevels.education_categories){var e=n.props.schoolLevels.education_categories.find((function(e){return e.education_institute_id===n.props.auth.education_institution_id}));void 0!==e&&(n.props.setSelectedEducationCategory(e),null!==e.session_plan&&n.GetClaims(n.state.selected_level,e.session_plan._id))}}else null!==n.props.schoolLevels.selectedEducationCategory.session_plan&&n.GetClaims(n.state.selected_level,n.props.schoolLevels.selectedEducationCategory.session_plan._id)},n.getMainSummary=function(){var e=Object(c.a)(i.a.mark((function e(t){var a,s,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=""===n.props.auth.education_institution_id&&null!==n.props.schoolLevels.selectedEducationCategory?n.props.schoolLevels.selectedEducationCategory:null===(a=n.props.schoolLevels.education_categories)||void 0===a?void 0:a.find((function(e){return e.education_institute_id===n.props.auth.education_institution_id})),console.log("Checked: ",s),null===(null===s||void 0===s?void 0:s.session_plan)||void 0===(null===s||void 0===s?void 0:s.session_plan)){e.next=16;break}return n.setLoading(!0),e.prev=4,e.next=7,h.a.post("".concat(v.a.CLAIMING,"/user/count/").concat(t),{period_id:s.session_plan._id});case 7:c=e.sent,n.setState({loading:!1,general_main_data:c.data}),console.log("Res: ",c.data),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(4),n.setState({loading:!1}),console.log("Err: ",Object(l.a)({},e.t0));case 16:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(t){return e.apply(this,arguments)}}(),n.state={loading:!0,error:"",success:"",data:null,selected_level:""===n.props.auth.education_institution_id?2:1,selected_claim_type:C.h.APPLICATION,view_type:"Table",general_main_data:null},n}return Object(o.a)(a,[{key:"render",value:function(){var e,t=this,a=null!==this.props.schoolLevels.selectedEducationCategory?this.props.schoolLevels.selectedEducationCategory:null===(e=this.props.schoolLevels.education_categories)||void 0===e?void 0:e.find((function(e){return e.education_institute_id===t.props.auth.education_institution_id}));return void 0===a?""!==this.props.auth.education_institution_id?Object(_.jsx)("div",{children:Object(_.jsxs)("div",{className:"rounded-xl border-2 border-gray-600 flex flex-col items-center justify-center p-7 text-center w-full mt-5 bg-white",children:[Object(_.jsx)("span",{className:"font-extrabold text-3xl text-gray-600",children:"Your institute is not yet defined"}),Object(_.jsx)("span",{children:"If you have an institute assigned to you, please refresh your page or wait a moment... your page..."})]})}):!1===this.props.schoolLevels.showInstitutes&&null===this.props.schoolLevels.selectedEducationCategory&&Object(_.jsx)("div",{className:"bg-white rounded mt-2 p-4",children:Object(_.jsxs)("div",{className:"flex flex-col items-center justify-center w-full gap-2",children:[Object(_.jsx)("div",{className:"text-3xl font-light mb-4",children:"Please choose institution"}),Object(_.jsx)("div",{className:"flex flex-row items-center justify-center gap-4 w-full",children:null===this.props.schoolLevels.education_categories?Object(_.jsx)(g.a,{}):this.props.schoolLevels.education_categories.map((function(e,a){return Object(_.jsxs)("div",{title:"Click to choose the institution",className:"bg-blue-100 hover:bg-blue-200 rounded-lg flex flex-col items-center justify-center p-3 py-5 w-full cursor-pointer group",onClick:function(){t.props.setSelectedEducationCategory(e),null!==e.session_plan&&t.GetClaims(t.state.selected_level,e.session_plan._id),null===t.state.general_main_data&&t.getMainSummary(t.state.selected_level)},children:[Object(_.jsx)("div",{className:"uppercase text-4xl font-extrabold text-blue-600 group-hover:text-blue-700",children:e.education_category_title}),Object(_.jsx)("div",{className:"group-hover:text-blue-600",children:e.description}),Object(_.jsx)("div",{className:"mt-2",children:Object(_.jsx)(b.a,{className:"text-3xl text-blue-300 group-hover:text-blue-600"})})]},a+1)}))})]})}):!0===this.state.loading||null===this.props.schoolLevels.education_categories||null===this.state.data||null===this.state.general_main_data?Object(_.jsxs)("div",{className:"bg-white rounded p-5 mt-5",children:[Object(_.jsx)(g.a,{}),Object(_.jsx)("div",{className:"-mt-5 ml-5",children:"Loading report, please wait..."})]}):(""!==this.state.error&&this.state.error,Object(_.jsx)("div",{children:Object(_.jsxs)("div",{className:"mt-4 bg-white rounded",children:[Object(_.jsxs)("div",{className:"p-4 flex flex-row items-center gap-3 justify-between",children:[Object(_.jsxs)("div",{children:[Object(_.jsxs)("div",{className:"text-3xl font-extrabold",children:["Claiming report (",Object(_.jsx)("span",{className:"text-blue-600 lowercase",children:Object(w.a)(this.state.selected_claim_type.toString())}),")"]}),Object(_.jsxs)("div",{className:"flex flex-row items-center gap-2 ml-2",children:[Object(_.jsxs)("div",{className:"flex flex-col",children:[Object(_.jsx)("span",{className:"text-sm font-bold",children:"Choose claim type"}),Object(_.jsxs)("select",{onChange:function(e){t.setState({loading:!0});var a=e.target.value;t.setState({selected_claim_type:a}),t.setState({loading:!1})},value:this.state.selected_claim_type,className:"px-3 py-2 rounded border border-gray-500",children:[Object(_.jsx)("option",{value:C.h.APPLICATION,children:"Applications"}),Object(_.jsx)("option",{value:C.h.DOCUMENT_VALIDATION,children:"Document validation"}),Object(_.jsx)("option",{value:C.h.EXAMINATION,children:"Examinations"})]})]}),Object(_.jsxs)("div",{className:"flex flex-col",children:[Object(_.jsx)("span",{className:"text-sm font-bold",children:"Choose claim level"}),Object(_.jsxs)("select",{value:this.state.selected_level,onChange:function(e){if(null!==a.session_plan){var s=parseInt(e.target.value);t.setState({selected_level:s}),t.setLoading(!0),t.GetClaims(s,a.session_plan._id)}},className:"px-3 py-2 rounded border border-gray-500",children:[Object(_.jsx)("option",{value:1,children:"Level 1"}),Object(_.jsx)("option",{value:2,children:"Public Service Commission Level"})]})]})]})]}),Object(_.jsxs)("div",{className:"flex flex-row items-center gap-3",children:[Object(_.jsxs)("div",{className:"flex flex-col rounded bg-blue-100 p-2 text-right animate__animated animate__zoomIn",children:[Object(_.jsx)("span",{className:"text-3xl font-extrabold",children:Object(S.h)(this.GetSummaryCounts(this.GetSummary(this.state.data)).total)}),Object(_.jsx)("span",{className:"font-normal text-sm text-blue-900",children:"Total claims"})]}),Object(_.jsxs)("div",{className:"flex flex-col rounded bg-blue-100 p-2 text-right animate__animated animate__zoomIn",children:[Object(_.jsx)("span",{className:"text-3xl font-extrabold",children:Object(S.h)(this.GetSummaryCounts(this.GetSummary(this.state.data)).pending)}),Object(_.jsx)("span",{className:"font-normal text-sm text-blue-900",children:"Waiting claims"})]}),Object(_.jsxs)("div",{className:"flex flex-col rounded bg-green-100 p-2 text-right animate__animated animate__zoomIn",children:[Object(_.jsx)("span",{className:"text-3xl font-extrabold text-green-900",children:Object(S.h)(this.GetSummaryCounts(this.GetSummary(this.state.data)).validated)}),Object(_.jsx)("span",{className:"font-normal text-sm text-green-900",children:"Validated claims"})]})]})]}),Object(_.jsxs)("div",{className:"border-t border-gray-400 p-4",children:[Object(_.jsxs)("div",{className:"flex flex-row items-center rounded mb-3",children:[Object(_.jsx)("div",{onClick:function(){return t.setState({view_type:"Table"})},className:"px-3 py-2 ".concat("Table"===this.state.view_type?"bg-white font-bold text-blue-800 border-b-4 border-blue-600 rounded-t-md animate__animated animate__fadeIn":"bg-white font-light  border-b-4 border-gray-200 hover:bg-blue-100 hover:text-blue-800 hover:border-blue-600"," cursor-pointer"),children:"Table view"}),Object(_.jsx)("div",{onClick:function(){return t.setState({view_type:"Analytical"})},className:"px-3 py-2 ".concat("Analytical"===this.state.view_type?"bg-white font-bold text-blue-800 border-b-4 border-blue-600 rounded-t-md animate__animated animate__fadeIn":"bg-white font-light  border-b-4 border-gray-200 hover:bg-blue-100 hover:text-blue-800 hover:border-blue-600"," cursor-pointer"),children:"Analytical view"}),Object(_.jsx)("div",{onClick:function(){return t.setState({view_type:"History"})},className:"px-3 py-2 ".concat("History"===this.state.view_type?"bg-white font-bold text-blue-800 border-b-4 border-blue-600 rounded-t-md animate__animated animate__fadeIn":"bg-white font-light  border-b-4 border-gray-200 hover:bg-blue-100 hover:text-blue-800 hover:border-blue-600"," cursor-pointer"),children:"Evaluation History"})]}),"Table"===this.state.view_type?Object(_.jsxs)("table",{className:"w-full animate__animated animate__fadeIn",children:[Object(_.jsx)("thead",{className:"bg-blue-100 ",children:Object(_.jsxs)("tr",{className:"",children:[Object(_.jsx)("th",{className:"px-3 py-1 text-center",children:"#"}),Object(_.jsx)("th",{className:"px-3 py-1 text-left",children:"Position"}),Object(_.jsx)("th",{className:"px-3 py-1 text-center",children:"Total claims"}),Object(_.jsx)("th",{className:"px-3 py-1 text-center",children:"Waiting claims"}),Object(_.jsx)("th",{className:"px-3 py-1 text-center",children:"Validated claims"})]})}),Object(_.jsx)("tbody",{children:0===this.GetSummary(this.state.data).length?Object(_.jsx)("tr",{children:Object(_.jsx)("td",{colSpan:5,className:"text-center p-3 text-3xl font-light bg-gray-100 border border-gray-500 rounded",children:"No result found!"})}):this.GetSummary(this.state.data).map((function(e,t){return Object(_.jsxs)("tr",{className:"".concat(t%2!==0?"bg-gray-100":"bg-white"," ").concat(e.total===e.validated?"text-green-900 font-light":0===e.validated?"text-yellow-900 font-bold":"text-black font-light"),children:[Object(_.jsx)("td",{className:"px-3 py-1 text-center",children:t+1}),Object(_.jsx)("td",{className:"px-3 py-1 text-left",children:e.position_title}),Object(_.jsx)("td",{className:"px-3 py-1 text-center",children:Object(S.h)(e.total)}),Object(_.jsx)("td",{className:"px-3 py-1 text-center",children:Object(S.h)(e.pending)}),Object(_.jsx)("td",{className:"px-3 py-1 text-center",children:Object(S.h)(e.validated)})]},t+1)}))})]}):"Analytical"===this.state.view_type?Object(_.jsx)(N,{general_summary:this.GetSummaryCounts(this.GetSummary(this.state.data)),summary_details:this.GetSummary(this.state.data),claim_level:this.state.selected_level,institution:a,general_main_data:this.state.general_main_data,selected_claim_type:this.state.selected_claim_type}):Object(_.jsx)(f,{claim_level:this.state.selected_level})]})]})}))}}]),a}(m.Component),I=Object(x.b)((function(e){return{auth:e.auth,system:e.system,positions:e.positions,schoolLevels:e.schoolLevels}}),{setSelectedEducationCategory:j.kd,loadAllPositionsByInstitute:j.Fc})(L)}}]);
//# sourceMappingURL=56.a4a21bba.chunk.js.map