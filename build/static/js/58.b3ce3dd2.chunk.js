(this["webpackJsonpreact-redux-typescript-advance"]=this["webpackJsonpreact-redux-typescript-advance"]||[]).push([[58],{645:function(e,t,s){"use strict";var c=s(17),r=s(4),n=s(167),a=s(10),i=s(1);t.a=function(e){var t,s,o=e.tableId&&"myTable"!==e.tableId?e.tableId:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t="",s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",c=s.length,r=0;r<e;r++)t+=s.charAt(Math.floor(Math.random()*c));return t}(),l=Object(r.useState)(0),d=Object(c.a)(l,2),u=d[0],p=d[1],m=Object(r.useState)(1),x=Object(c.a)(m,2),b=x[0],j=x[1],h=Object(r.useState)(1),f=Object(c.a)(h,2),g=f[0],O=f[1],v=Object(r.useState)(),y=Object(c.a)(v,2),w=y[0],N=y[1],P=Object(r.useState)(10),C=Object(c.a)(P,2),k=C[0],A=C[1],_=Object(r.useState)(0),S=Object(c.a)(_,2),T=S[0],U=S[1],I=Object(r.useState)(0),E=Object(c.a)(I,2),R=E[0],L=E[1];Object(r.useEffect)((function(){e.pagination&&D()}));var D=function(){t=document.getElementById(o),s=t.getElementsByTagName("tr"),p(s.length),j(Math.ceil(u/k)),U((g-1)*k),L(Math.min(T+k-1,u-1));var e=Array.from(Array(b+1-1).keys()).map((function(e){return 1+e}));w&&e.length===w.length||N(e);for(var c=0;c<s.length;c++)s[c].style.display=c>=T&&c<=R?"":"none"};return Object(i.jsxs)("div",{className:"".concat(e.tableSize," overflow-x-auto"),children:[e.search&&Object(i.jsx)("div",{className:"".concat(e.searchBG," w-full mb-2"),children:e.search&&Object(i.jsxs)("div",{className:"bg-white rounded flex items-center w-full p-2 border-2 border-gray-500",children:[Object(i.jsx)(a.Bb,{className:"h-5 w-5 fill-current text-gray-400"}),Object(i.jsx)("input",{type:"search",placeholder:"search",onChange:function(s){return function(s,c){var r,n,a,i,l;for("field"===c&&"all"===s&&(s=""),r=s.toLowerCase(),n=(t=document.getElementById(o)).getElementsByTagName("tr"),i=0;i<n.length;i++)for(l=0;l<e.columns.length;l++)if(a=n[i].getElementsByTagName("td")[l]){if((a.textContent||a.innerText).toLowerCase().indexOf(r)>-1){n[i].style.display="";break}n[i].style.display="none"}}(s.target.value)},className:"w-full h-6 pl-4 text-sm outline-none focus:outline-none bg-white",disabled:e.loading}),e.pagination&&Object(i.jsx)("div",{className:"select",children:Object(i.jsxs)("select",{className:"text-base outline-none focus:outline-none bg-white",onChange:function(e){return A(Number(e.target.value))},disabled:e.loading,children:[Object(i.jsx)("option",{value:"10",children:"10"}),Object(i.jsx)("option",{value:"25",children:"25"}),Object(i.jsx)("option",{value:"50",children:"50"}),Object(i.jsx)("option",{value:"100",children:"100"})]})})]})}),Object(i.jsxs)("div",{className:"overflow-x-auto w-full",children:[Object(i.jsxs)("table",{className:e.tableClass?e.tableClass:"w-full shadow ".concat(e.rounded&&"sm:rounded-lg"," table-auto order-table"),id:o,children:[!e.hideColumns&&Object(i.jsx)("thead",{className:"bg-white border-b-2 border-gray-300 text-gray-600 font-bold text-base",children:Object(i.jsx)("tr",{className:"text-left tracking-wide bg-".concat(e.thColor,"-100 border-b-2 border-").concat(e.thColor,"-500 text-").concat(e.thColor,"-600"),children:e.columns.map((function(e,t){return Object(i.jsx)("th",{className:"".concat(e.padding," text-").concat(e.alignText," px-3 py-2 ").concat(e.isSortAllowed&&"cursor-pointer"),onClick:function(){return e.isSortAllowed&&function(e){var t,s,c,r,n,a,i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"asc",d=0;if(c=!0,t=document.getElementById(e))for(;c;){for(c=!1,s=t.rows,r=1;r<s.length-1;r++)if(i=!1,n=s[r].getElementsByTagName("TD")[o],a=s[r+1].getElementsByTagName("TD")[o],"asc"===l&&n&&a){if(n.innerHTML.toLowerCase()>a.innerHTML.toLowerCase()){i=!0;break}}else if("desc"===l&&n&&a&&n.innerHTML.toLowerCase()<a.innerHTML.toLowerCase()){i=!0;break}i&&s[r].parentNode?(s[r].parentNode.insertBefore(s[r+1],s[r]),c=!0,d++):0===d&&"asc"===l&&(l="desc",c=!0)}}(o,t)},children:Object(i.jsxs)("div",{className:"flex items-center gap-1",children:[e.columnTitle,e.isSortAllowed&&Object(i.jsx)(n.i,{})]})},t)}))})}),Object(i.jsx)("tbody",{id:"table-data",className:"bg-white text-black text-base",children:e.rows()})]}),e.pagination&&Object(i.jsxs)("div",{className:"sm:flex-1 sm:flex sm:items-center sm:justify-between mt-4 work-sans",children:[Object(i.jsx)("div",{children:Object(i.jsxs)("span",{className:"text-xs xs:text-sm text-gray-900",children:["Showing 1 to ",k," of ",u-1," Entries"]})}),Object(i.jsx)("div",{children:Object(i.jsxs)("nav",{className:"inline-flex shadow-sm",children:[Object(i.jsx)("div",{children:Object(i.jsx)("button",{type:"button",className:"inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 text-sm font-medium text-gray-500 ".concat(1!==g&&"bg-white"),"aria-label":"Previous",disabled:1===g||e.loading,onClick:function(){return O(g-1)},children:Object(i.jsx)(a.fb,{className:"h-5 w-5"})})}),Object(i.jsx)("div",{children:w&&w.map((function(t,s){return Object(i.jsx)("button",{className:"-ml-px inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium text-gray-700 ".concat(t!==g?"bg-white":"bg-gray-100 cursor-default"),disabled:t===g||e.loading,onClick:function(){return O(t)},children:t},s)}))}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{type:"button",className:"inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 text-sm leading-5 font-medium text-gray-500 ".concat(g!==b&&"bg-white"),"aria-label":"Next",disabled:g===b||e.loading,onClick:function(){return O(g+1)},children:Object(i.jsx)(a.gb,{className:"h-5 w-5"})})})]})})]})]})]})}},653:function(e,t,s){"use strict";s.d(t,"g",(function(){return m})),s.d(t,"d",(function(){return x})),s.d(t,"b",(function(){return b})),s.d(t,"f",(function(){return j})),s.d(t,"a",(function(){return h})),s.d(t,"c",(function(){return f})),s.d(t,"e",(function(){return g}));var c,r=s(5),n=s.n(r),a=s(7),i=s(8),o=s.n(i),l=s(6),d=s(9),u=s(15),p=s(14),m=30;!function(e){e.waiting="waiting",e.approved="approved",e.rejected="rejected"}(c||(c={}));var x=function(e,t){return t&&t(!0,""),function(){var s=Object(a.a)(n.a.mark((function s(c){var r;return n.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,Object(u.b)(),s.next=4,o.a.get("".concat(d.a.AUTH,"/users?page=").concat(e,"&limit=").concat(m));case 4:r=s.sent,console.log("===================================="),console.log({fetchUserAccess:r}),console.log("===================================="),c({type:l.a.FETCH_USERS_ACCESS,payload:{users:[{data:r.data.users,page:e}],next:r.data.next,previous:r.data.previous,total_users:r.data.total_users}}),t&&t(!1,"",r.data.users),s.next=16;break;case 12:s.prev=12,s.t0=s.catch(0),console.error({user_error:s.t0}),t&&t(!1,Object(p.a)(s.t0));case 16:case"end":return s.stop()}}),s,null,[[0,12]])})));return function(e){return s.apply(this,arguments)}}()},b=function(e,t){return function(){var s=Object(a.a)(n.a.mark((function s(c){return n.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:c({type:l.a.BLOCK_USER_TO_SYSTEM,payload:{id:e,page:t}});case 1:case"end":return s.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}()},j=function(e,t){return function(){var s=Object(a.a)(n.a.mark((function s(c){return n.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:c({type:l.a.UNBLOCK_USER_TO_SYSTEM,payload:{id:e,page:t}});case 1:case"end":return s.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}()},h=function(e,t){return function(){var s=Object(a.a)(n.a.mark((function s(c){return n.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:c({type:l.a.ASSIGN_ROLE_TO_USER,payload:{data:e,page:t}});case 1:case"end":return s.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}()},f=function(e,t){return function(){var s=Object(a.a)(n.a.mark((function s(c){return n.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:c({type:l.a.CUSTOMIZE_USER_ACCESS,payload:{data:e,page:t}});case 1:case"end":return s.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}()},g=function(e,t){return function(){var s=Object(a.a)(n.a.mark((function s(c){return n.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:c({type:l.a.RESET_USER_ACCESS,payload:{user_id:e,page:t}});case 1:case"end":return s.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}()}},690:function(e,t,s){"use strict";s.r(t),s.d(t,"UserAccess",(function(){return A}));var c=s(5),r=s.n(c),n=s(7),a=s(25),i=s(24),o=s(27),l=s(26),d=s(8),u=s.n(d),p=s(4),m=s.n(p),x=s(167),b=s(10),j=s(696),h=s(680),f=s(20),g=s(30),O=s(3),v=s(653),y=s(645),w=s(37),N=s(9),P=s(14),C=s(1),k=function(e){Object(o.a)(s,e);var t=Object(l.a)(s);function s(e){var c;return Object(a.a)(this,s),(c=t.call(this,e)).setViewPermission=function(e){c.setState({viewPermission:e})},c.setLoadindRequest=function(e){c.setState({loadindRequest:e})},c.setCreatePermission=function(e){c.setState({createPermission:e})},c.setUpdatePermission=function(e){c.setState({updatePermission:e})},c.setDeletePermission=function(e){c.setState({deletePermission:e})},c.setLoadind=function(e){c.setState({loading:e})},c.overrideUserAccess=function(e,t){if(e&&t&&t.length>0){var s=[],r=function(c){if(Object.prototype.hasOwnProperty.call(e,c)){var r=t.find((function(t){return t.id===e[c].id}));r?s.push(r):s.push(e[c])}};for(var n in e)r(n);c.props.setUserAccess(s)}},c.componentDidMount=function(){c.props.userInfo&&c.props.userInfo.custome_access?(c.props.userInfo.default_access&&c.overrideUserAccess(c.props.userInfo.default_access.access,c.props.userInfo.custome_access.access),c.setLoadind(!1)):(c.props.userInfo&&c.props.userInfo.default_access&&c.props.setUserAccess(c.props.userInfo.default_access.access),c.setLoadind(!1))},c.tableData=function(){return c.props.userAccess?c.props.userAccess.map((function(e,t){return Object(C.jsxs)("tr",{className:"text-left border-b border-gray-200 cursor-pointer hover:bg-gray-100 ".concat(c.props.currentAccess&&c.props.currentAccess.id===e.id&&"bg-gray-200 border my-3 hover:bg-gray-100"),onClick:function(){return c.props.currentAccess&&c.props.currentAccess.id===e.id?(c.props.setCurrentAccess(null),c.setCreatePermission(!1),c.setViewPermission(!1),c.setUpdatePermission(!1),c.setDeletePermission(!1)):(c.props.setCurrentAccess(e),c.setCreatePermission(e.permitted.create),c.setViewPermission(e.permitted.view),c.setUpdatePermission(e.permitted.update),c.setDeletePermission(e.permitted.delete))},children:[Object(C.jsx)("td",{className:"px-2 py-1",children:Object(C.jsx)("label",{className:"inline-flex items-center",children:Object(C.jsx)("span",{className:"text-gray-900 capitalize text-xl font-normal cursor-pointer",children:e.task})})}),Object(C.jsx)("td",{children:Object(C.jsxs)("div",{className:"inline-flex items-center text-xl ".concat(e.permitted.create?"text-green-700":"text-red-700"),children:[e.permitted.create?Object(C.jsx)(h.a,{}):Object(C.jsx)(b.O,{}),e.permitted.create?" Yes":"No"]})}),Object(C.jsx)("td",{children:Object(C.jsxs)("div",{className:"inline-flex items-center text-xl ".concat(e.permitted.view?"text-green-700":"text-red-700"),children:[e.permitted.view?Object(C.jsx)(h.a,{}):Object(C.jsx)(b.O,{}),e.permitted.view?" Yes":"No"]})}),Object(C.jsx)("td",{children:Object(C.jsxs)("div",{className:"inline-flex items-center text-xl ".concat(e.permitted.update?"text-green-700":"text-red-700"),children:[e.permitted.update?Object(C.jsx)(h.a,{}):Object(C.jsx)(b.O,{}),e.permitted.update?" Yes":"No"]})}),Object(C.jsx)("td",{children:Object(C.jsxs)("div",{className:"inline-flex items-center text-xl ".concat(e.permitted.delete?"text-green-700":"text-red-700"),children:[e.permitted.delete?Object(C.jsx)(h.a,{}):Object(C.jsx)(b.O,{}),e.permitted.delete?" Yes":"No"]})})]},t+e.id+Math.random())})):[Object(C.jsx)("tr",{children:Object(C.jsx)("td",{children:"No data"})},Math.random())]},c.handleCustomization=function(){var e=Object(n.a)(r.a.mark((function e(t){var s,n,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!c.props.userInfo){e.next=26;break}if(c.setLoadindRequest(!0),s=null,s=c.props.userInfo.custome_access,n=-1,e.prev=6,s&&c.props.currentAccess?(n=s.access.findIndex((function(e){return e.id===c.props.currentAccess.id})))>=0?(s.access[n].permitted.create=c.state.createPermission,s.access[n].permitted.view=c.state.viewPermission,s.access[n].permitted.update=c.state.updatePermission,s.access[n].permitted.delete=c.state.deletePermission):s.access.push({id:c.props.currentAccess.id,task:c.props.currentAccess.task,key:c.props.currentAccess.key,permitted:{create:c.state.createPermission,view:c.state.viewPermission,update:c.state.updatePermission,delete:c.state.deletePermission}}):c.props.currentAccess&&(s={access:[{id:c.props.currentAccess.id,task:c.props.currentAccess.task,key:c.props.currentAccess.key,permitted:{create:c.state.createPermission,view:c.state.viewPermission,update:c.state.updatePermission,delete:c.state.deletePermission}}],user_id:c.props.userInfo.user_id,custome_user_access_id:""}),!s){e.next=19;break}if(null===c.props.userInfo.custome_access){e.next=15;break}return e.next=12,u.a.patch("".concat(N.a.AUTH,"/custaccess"),{access:s.access,user_id:c.props.userInfo.user_id});case 12:a=e.sent,e.next=18;break;case 15:return e.next=17,u.a.post("".concat(N.a.AUTH,"/custaccess"),{access:s.access,user_id:c.props.userInfo.user_id});case 17:a=e.sent;case 18:a&&(s.custome_user_access_id=a.data.data.custome_user_access_id,c.props.customizeUserAccess(s,c.props.currentPage),s&&c.props.userInfo.default_access&&c.overrideUserAccess(c.props.userInfo.default_access.access,s.access),c.props.PushPopupAlert({title:"Resetting User Access complete successfully",theme:w.a.info}),s=null,c.props.setCurrentAccess(null),c.setCreatePermission(!1),c.setViewPermission(!1),c.setUpdatePermission(!1),c.setDeletePermission(!1));case 19:e.next=25;break;case 21:e.prev=21,e.t0=e.catch(6),console.error({customize_access:e.t0}),c.props.PushPopupAlert({title:Object(P.a)(e.t0),theme:w.a.danger});case 25:c.setLoadindRequest(!1);case 26:case"end":return e.stop()}}),e,null,[[6,21]])})));return function(t){return e.apply(this,arguments)}}(),c.state={loading:!0,loadindRequest:!1,createPermission:!1,viewPermission:!1,updatePermission:!1,deletePermission:!1},c}return Object(i.a)(s,[{key:"render",value:function(){var e=this;return void 0===this.props.userInfo?Object(C.jsx)(g.a,{to:"/users"}):this.state.loading||null===this.props.userInfo?Object(C.jsx)("div",{className:"text-center py-7 font-bold text-4xl text-gray-400 animate-pulse",children:"Loading User Access..."}):Object(C.jsx)("div",{children:Object(C.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mx-1 my-2",children:[Object(C.jsxs)("div",{className:"col-span-1 md:col-span-3 bg-white w-full overflow-x-auto border rounded text-center p-2 ".concat(this.props.currentAccess?"hidden md:block":""),children:[Object(C.jsx)("span",{className:"text-gray-600 mt-2 font-semibold text-2xl",children:"Settings"}),!this.state.loading&&Object(C.jsx)("div",{className:"overflow-x-auto w-full",children:Object(C.jsx)(y.a,{columns:[{columnTitle:"Access Name",alignText:"left",padding:"p-3"},{columnTitle:"Create",alignText:"left"},{columnTitle:"View",alignText:"left"},{columnTitle:"Update",alignText:"left"},{columnTitle:"Delete",alignText:"left"}],rows:this.tableData,pagination:!1,search:!0,searchBG:"bg-gray-50",thColor:"gray"})})]}),Object(C.jsx)("div",{className:"col-span-1 md:col-span-2",children:this.props.currentAccess?Object(C.jsxs)("div",{className:"",children:[Object(C.jsx)("h1",{className:"text-2xl md:text-3xl font-semibold text-center my-2 text-gray-900",children:"Customize User Access"}),Object(C.jsx)("div",{className:"flex justify-center mb-3",children:Object(C.jsxs)("h2",{className:"text-2xl font-semibold text-center text-gray-600 flex flex-row items-center",children:[Object(C.jsx)(x.h,{className:"w-7 h-7"}),this.props.currentAccess.task]})}),Object(C.jsx)("div",{className:"flex flex-col px-2 md:px-1",children:Object(C.jsxs)("form",{className:"flex flex-col items-center",onSubmit:function(t){return e.handleCustomization(t)},children:[Object(C.jsxs)("div",{className:"inline-flex gap-2 items-center",children:[Object(C.jsx)(j.a,{className:"w-7 h-7 text-gray-600"}),Object(C.jsxs)("div",{className:"flex flex-col",children:[Object(C.jsx)("h3",{className:"font-semibold text-xl",children:"Create"}),Object(C.jsx)("span",{className:"text-gray-600 text-sm md:pr-1",children:"This permission gives the user the ability to create"})]}),Object(C.jsx)("input",{type:"checkbox",className:"form-checkbox h-7 w-7 text-teal-600",onChange:function(){return e.setCreatePermission(!e.state.createPermission)},checked:this.state.createPermission,disabled:this.state.loadindRequest})]}),Object(C.jsxs)("div",{className:"inline-flex gap-2 items-center",children:[Object(C.jsx)(b.ub,{className:"w-7 h-7 text-gray-600"}),Object(C.jsxs)("div",{className:"flex flex-col",children:[Object(C.jsx)("h3",{className:"font-semibold text-xl",children:"View"}),Object(C.jsx)("span",{className:"text-gray-600 text-sm md:pr-4",children:"This permission gives the user the ability to view"})]}),Object(C.jsx)("input",{type:"checkbox",className:"form-checkbox h-7 w-7 text-teal-600",onChange:function(){return e.setViewPermission(!e.state.viewPermission)},checked:this.state.viewPermission,disabled:this.state.loadindRequest})]}),Object(C.jsxs)("div",{className:"inline-flex gap-2 items-center",children:[Object(C.jsx)(b.D,{className:"w-7 h-7 text-gray-600"}),Object(C.jsxs)("div",{className:"flex flex-col",children:[Object(C.jsx)("h3",{className:"font-semibold text-xl",children:"Update"}),Object(C.jsx)("span",{className:"text-gray-600 text-sm",children:"This permission gives the user the ability to update"})]}),Object(C.jsx)("input",{type:"checkbox",className:"form-checkbox h-7 w-7 text-teal-600",onChange:function(){return e.setUpdatePermission(!e.state.updatePermission)},checked:this.state.updatePermission,disabled:this.state.loadindRequest})]}),Object(C.jsxs)("div",{className:"inline-flex gap-2 items-center",children:[Object(C.jsx)(b.B,{className:"w-7 h-7 text-gray-600"}),Object(C.jsxs)("div",{className:"flex flex-col",children:[Object(C.jsx)("h3",{className:"font-semibold text-xl",children:"Delete"}),Object(C.jsx)("span",{className:"text-gray-600 text-sm md:pr-1",children:"This permission gives the user the ability to delete"})]}),Object(C.jsx)("input",{type:"checkbox",className:"form-checkbox h-7 w-7 text-teal-600",onChange:function(){return e.setDeletePermission(!e.state.deletePermission)},checked:this.state.deletePermission,disabled:this.state.loadindRequest})]}),Object(C.jsxs)("div",{className:"flex items-center justify-center w-full py-3 gap-2",children:[Object(C.jsx)("button",{className:"btn bg-gray-500 hover:bg-gray-700 focus:outline-none text-white",disabled:this.state.loadindRequest,onClick:function(){e.props.setCurrentAccess(null),e.setCreatePermission(!1),e.setViewPermission(!1),e.setUpdatePermission(!1),e.setDeletePermission(!1)},children:"Cancel"}),Object(C.jsx)("button",{className:"btn btn-blue",disabled:this.state.loadindRequest,children:this.state.loadindRequest?"Processing..":"Save Change"})]})]})})]}):Object(C.jsxs)("div",{className:"w-full hidden md:flex flex-col items-center text-gray-600 gap-1 py-3",children:[Object(C.jsx)(b.Db,{className:"w-20 h-20"}),Object(C.jsx)("span",{className:"text-8 md:text-12",children:"Choose Access to Customize"})]})})]})})}}]),s}(p.Component),A=m.a.memo(Object(f.b)(null,{customizeUserAccess:v.c,PushPopupAlert:O.tb})(k))}}]);
//# sourceMappingURL=58.b3ce3dd2.chunk.js.map