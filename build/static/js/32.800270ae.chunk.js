(this["webpackJsonpreact-redux-typescript-advance"]=this["webpackJsonpreact-redux-typescript-advance"]||[]).push([[32],{201:function(e,t,s){"use strict";s.d(t,"b",(function(){return p})),s.d(t,"g",(function(){return b})),s.d(t,"e",(function(){return x})),s.d(t,"a",(function(){return j})),s.d(t,"c",(function(){return h})),s.d(t,"h",(function(){return m})),s.d(t,"f",(function(){return f})),s.d(t,"d",(function(){return g}));var n=s(5),a=s.n(n),r=s(7),i=s(8),o=s.n(i),c=s(6),l=s(9),d=s(13),u=s(12),p=function(e){return e(!0,""),function(){var t=Object(r.a)(a.a.mark((function t(s){var n,r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,Object(d.b)(),t.next=4,o.a.get("".concat(l.a.CLAIMING,"/session-type"));case 4:n=t.sent,console.log({GET_PLANS_TYPES:n.data}),r=[],200===n.status&&null!==n.data&&n.data.length>0&&(r=n.data),s({type:c.a.GET_PLANS_TYPES,payload:r}),e(!1,""),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(0),console.error({error:Object(u.a)(t.t0)}),e(!1,Object(u.a)(t.t0));case 16:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}()},b=function(e){return console.log({thisType:e}),{type:c.a.SELECT_PLAN_TYPE,payload:e}},x=function(e){return e(!0,""),function(){var t=Object(r.a)(a.a.mark((function t(s){var n,r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,Object(d.b)(),t.next=4,o.a.get("".concat(l.a.CLAIMING,"/session/active/"));case 4:n=t.sent,console.log({GET_ACTIVE_SESSION_PLANS:n.data}),r=void 0,n.data&&void 0!==n.data.is_active&&(r=n.data),console.log({session_plan:n.data}),s({type:c.a.GET_ACTIVE_SESSION_PLANS,payload:r||"none"}),e(!1,"",r||"none"),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(0),console.error({error:Object(u.a)(t.t0)}),e(!1,Object(u.a)(t.t0));case 17:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e){return t.apply(this,arguments)}}()},j=function(e){return e(!0,""),function(){var t=Object(r.a)(a.a.mark((function t(s){var n,r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,Object(d.b)(),t.next=4,o.a.get("".concat(l.a.CLAIMING,"/session/"));case 4:n=t.sent,console.log({GET_ALL_SESSION_PLANS:n.data}),r=[],200===n.status&&null!==n.data&&n.data.length>0&&(r=n.data),s({type:c.a.GET_ALL_SESSION_PLANS,payload:r}),e(!1,"",r),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(0),console.error({error:Object(u.a)(t.t0)}),e(!1,Object(u.a)(t.t0));case 16:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}()},h=function(e){return{type:c.a.CREATE_SESSION_PLAN,payload:e}},m=function(e){return{type:c.a.UPDATE_SESSION_PLAN,payload:e}},f=function(e){return{type:c.a.SESSION_ACTIVATION,payload:e}},g=function(e){return{type:c.a.DELETE_SESSION_PLAN,payload:e}}},202:function(e,t,s){"use strict";s.d(t,"b",(function(){return x})),s.d(t,"a",(function(){return j})),s.d(t,"d",(function(){return h})),s.d(t,"c",(function(){return m}));var n=s(21),a=s(20),r=s(23),i=s(22),o=s(4),c=s.n(o),l=s(16),d=s(3),u=s(10),p=s(1),b=function(e){Object(r.a)(s,e);var t=Object(i.a)(s);function s(e){var a;return Object(n.a)(this,s),(a=t.call(this,e)).componentDidMount=function(){return a.props.PageHasSubNav(!0)},a.componentWillUnmount=function(){return a.props.PageHasSubNav(!1)},a.state={loading:!1},a}return Object(a.a)(s,[{key:"render",value:function(){if(!1===this.props.auth.isAuthenticated)return null;var e=this.props.system.navigation;return Object(p.jsx)("div",{className:"fixed w-48 p-1 pr-2 pl-6 text-gray-700 bg-white ".concat(!0===e?"lg:left-16  left-16":" -left-72 lg:left-16","  top-0 bottom-0 pt-20 z-30 shadow-lg  transition-all duration-500 ease-in-out overflow-y-auto"),children:this.props.children})}}]),s}(c.a.Component),x=Object(l.b)((function(e){return{auth:e.auth,system:e.system}}),{NavToogle:d.rb,PageHasSubNav:d.sb})(b),j=function(e){var t=e.title,s=void 0===t?"":t,n=e.icon,a=void 0===n?u.m:n,r=e.active,i=void 0!==r&&r,o=e.count,c=void 0===o?0:o,l=a;return Object(p.jsxs)("section",{className:"".concat(!0===i?"bg-blue-500 text-white font-bold":"bg-blue-100 text-blue-800"," mb-1 hover:font-bold py-1 hover:bg-blue-400 hover:text-white --font-bold  px-2 rounded-md flex cursor-pointer items-center"),children:[Object(p.jsxs)("section",{className:"flex-1",children:[Object(p.jsx)(l,{className:"inline-block mr-1 text-xs"}),Object(p.jsx)("span",{children:s})]}),c>0?Object(p.jsx)("span",{className:"px-0.5 my-1 text-xs bg-blue-600 text-white rounded-full",children:c}):null]})},h=function(e){var t=e.children;return Object(p.jsx)("div",{className:"ml-3 overflow-y-auto border-l-2 border-blue-200 -mt-1 pt-2 mb-2 pl-1 cursor-pointer",children:t})},m=function(e){var t=e.title,s=void 0===t?"":t,n=e.icon,a=void 0===n?u.m:n,r=e.active,i=void 0!==r&&r,o=e.count,c=void 0===o?0:o,l=a;return Object(p.jsxs)("div",{className:"animate__animated animate__zoomIn animate__faster ".concat(!0===i?"bg-blue-500 text-white font-bold":" text-blue-800"," text-blue-800 bg-blue-200 rounded-md px-1 mb-1 flex items-center py-1 font-bold"),children:[Object(p.jsx)(l,{className:"inline-block mr-0.1 text-xs ".concat(!0===i?"text-white":"")}),Object(p.jsx)("span",{className:"inline-block pl-1 ".concat(!0===i?"text-white":""),children:s}),c>=1?Object(p.jsx)("span",{className:"text-sm fint-bold ".concat(!0===i?"text-white":""),children:c}):null]})}},209:function(e,t,s){"use strict";s.d(t,"e",(function(){return p})),s.d(t,"c",(function(){return b})),s.d(t,"a",(function(){return x})),s.d(t,"d",(function(){return j})),s.d(t,"b",(function(){return h})),s.d(t,"f",(function(){return m}));var n=s(5),a=s.n(n),r=s(7),i=s(8),o=s.n(i),c=s(6),l=s(9),d=s(13),u=s(12),p=function(e){return function(){var t=Object(r.a)(a.a.mark((function t(s){var n;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(!0,""),t.prev=1,Object(d.b)(),t.next=5,o.a.get("".concat(l.a.AUTH,"/settings"));case 5:n=t.sent,s({type:c.a.GET_SYSTEM_SETTINGS,payload:n.data}),e(!1,""),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(1),console.log({code_error:t.t0}),e(!1,Object(u.a)(t.t0));case 14:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}()},b=function(e){return function(){var t=Object(r.a)(a.a.mark((function t(s){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s({type:c.a.DISABLE_SYSTEM_SETTINGS,payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},x=function(e){return function(){var t=Object(r.a)(a.a.mark((function t(s){var n,r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(!0,""),t.prev=1,Object(d.b)(),t.next=5,o.a.get("".concat(l.a.AUTH,"/allroleaccess"));case 5:n=t.sent,r=n.data.map((function(e){return{id:e.id,task:e.title,key:e.key,permitted:e.permitted}})),s({type:c.a.GET_TASK_ACCESS,payload:r}),e(!1,"",r),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(1),console.log({code_error:t.t0}),e(!1,Object(u.a)(t.t0));case 15:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e){return t.apply(this,arguments)}}()},j=function(e){return function(){var t=Object(r.a)(a.a.mark((function t(s){var n;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(!0,""),t.prev=1,Object(d.b)(),t.next=5,o.a.get("".concat(l.a.APPLICATION,"/position"));case 5:n=t.sent,s({type:c.a.GET_POSTIONS,payload:n.data}),e(!1,""),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(1),console.log({code_error:t.t0}),e(!1,Object(u.a)(t.t0));case 14:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}()},h=function(e){return console.log({deletePosition:e}),function(){var t=Object(r.a)(a.a.mark((function t(s){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s({type:c.a.DELETE_POSITION,payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},m=function(e){return function(){var t=Object(r.a)(a.a.mark((function t(s){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s({type:c.a.PUBLISH_POSITION,payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},222:function(e,t,s){"use strict";s(4);var n=s(269),a=s(270),r=s(28),i=s(1);t.a=function(e){var t=e.fileData,s=e.fileName,o=e.btnName,c=void 0===o?"Excel":o,l=e.className,d=void 0===l?"flex items-center gap-1 px-4 py-1 rounded text-green-700 bg-white border hover:text-white hover:bg-green-700 border-green-700 font-bold":l,u=e.showIcon,p=void 0===u||u;return Object(i.jsxs)("button",{onClick:function(e){return function(e,t){var s={Sheets:{data:a.utils.json_to_sheet(e)},SheetNames:["data"]},r=a.write(s,{bookType:"xlsx",type:"array"}),i=new Blob([r],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});n.saveAs(i,t+".xlsx")}(t,s)},className:d,children:[p&&Object(i.jsx)(r.k,{}),c]})}},224:function(e,t,s){"use strict";s.d(t,"a",(function(){return d}));var n=s(5),a=s.n(n),r=s(7),i=s(234),o=s(36),c=s.p+"static/media/mineduc.11a9ae1c.png";s(268);var l=function(e){var t=e.internal.getNumberOfPages();e.setFont("helvetica","italic"),e.setFontSize(8);for(var s=1;s<=t;s++)e.setPage(s),e.text("Page "+String(s)+" of "+String(t),e.internal.pageSize.width/2,297,{align:"center"})},d=function(){var e=Object(r.a)(a.a.mark((function e(t,s,n){var r,d,u,p,b,x,j,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n(!0),r=t.orientation?t.orientation:"p",d=20,20,185,(u=new i.default(r,"mm","a4")).setTextColor(95,95,95),u.setFontSize(28),u.addImage(c,"png",20,20,10,10),u.text("MINEDUC",32,28.5,void 0,"left"),u.setFontSize(26),u.text(t.title,u.internal.pageSize.getWidth()/2,42.7,void 0,"center"),u.setFontSize(20),u.text(t.institute,u.internal.pageSize.getWidth()/2,53.7,void 0,"center"),p=u.splitTextToSize(t.subject,145),u.setFontSize(16),b=63,u.setTextColor(95,95,95),u.text("".concat(t.subjectTitle,": "),d,b),x=u.getTextWidth("".concat(t.subjectTitle,": ")),u.setTextColor(38,38,38),j=0;j<p.length;j++)b>280&&(b=10,u.addPage()),u.text(p[j],d+x,b),b+=7;return u.setTextColor(95,95,95),u.text("Period: ",d,b+3),x=u.getTextWidth("Period: "),u.setTextColor(38,38,38),u.text(t.period,d+x,b+3),u.autoTable({html:s,startY:85,margin:{horizontal:20},cellPadding:3,rowHeight:20,bodyStyles:{valign:"top"},columnStyles:{email:{cellWidth:"wrap"}},theme:"striped",tableWidth:!0}),u.setFontSize(12),h=u.lastAutoTable.finalY,u.text("Reported by: ".concat(t.doneBy),d,h+15),u.text("Report downloaded on "+Object(o.a)((new Date).toString()),d,h+23),l(u),e.next=35,u.save("".concat(t.title+": "+t.subject+": "+t.period,".pdf"),{returnPromise:!0}).then(n(!1));case 35:case"end":return e.stop()}}),e)})));return function(t,s,n){return e.apply(this,arguments)}}()},228:function(e,t,s){"use strict";s(4);var n=s(1);t.a=function(e){var t=function(){for(var t=[],s=0;s<e.cols;s++)t.push(s);return t.map((function(e){return Object(n.jsx)("td",{className:"p-3 text-center whitespace-nowrap",children:Object(n.jsx)("div",{className:"w-full h-4 rounded bg-gray-200 animate__animated animate__pulse animate__delay-5s animate__infinite"})},e)}))};return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("tr",{className:"border-b border-gray-200",children:t()},228),Object(n.jsx)("tr",{className:"border-b border-gray-200",children:t()},22648),Object(n.jsx)("tr",{className:"border-b border-gray-200",children:t()},229768)]})}},235:function(e,t){},250:function(e,t,s){"use strict";var n=s(14),a=s(11),r=s(32),i=s(4),o=s(10),c=s(27),l=s(19),d=s(36),u=s(33),p=s(1),b=function(e){var t,s=new Date,n=[],i=Object(r.a)(e);try{for(i.s();!(t=i.n()).done;){var o=t.value,c=new Date(o.start_date),d=new Date(o.end_date);c.getTime()<=s.getTime()&&d.getTime()>=s.getTime()&&o.type_status===l.k.OPEN&&(n=[].concat(Object(a.a)(n),[o]))}}catch(u){i.e(u)}finally{i.f()}return n};t.a=function(e){var t,s,a=Object(i.useState)(null),r=Object(n.a)(a,2),l=r[0],x=r[1],j=Object(i.useState)(""),h=Object(n.a)(j,2),m=h[0],f=h[1];return Object(p.jsxs)("div",{className:"",children:[Object(p.jsx)("div",{className:"px-3",children:Object(p.jsx)("input",{onChange:function(e){return f(e.target.value)},type:"text",className:"py-3 px-4 w-full rounded border border-gray-400 mb-3",placeholder:"Search by year, name",disabled:null===e.allSession||0===e.allSession.length})}),Object(p.jsx)("div",{className:"bg-gray-100 px-3 pt-3 pb-2 rounded-b",children:null===e.allSession?Object(p.jsx)(c.a,{}):0===e.allSession.length?Object(p.jsxs)("div",{className:"flex flex-col text-gray-400 items-center justify-center mb-2 bg-white py-4",children:[Object(p.jsx)(o.Cb,{className:"text-6xl"}),Object(p.jsx)("div",{className:"flex flex-col items-center justify-center",children:Object(p.jsx)("span",{children:"No session found!"})})]}):Object(p.jsxs)("section",{children:[e.chooseAll&&Object(p.jsxs)("div",{className:"rounded border ".concat("all"===e.currentSelected?"bg-blue-50 border-blue-300":"bg-white border-white "," group hover:border-blue-500 px-2 py-2 mb-2 flex flex-col md:flex-row items-start md:items-center md:justify-between"),children:[Object(p.jsxs)("div",{className:"flex flex-row items-center gap-3",children:["all"===e.currentSelected?Object(p.jsx)(o.t,{className:"text-blue-500 text-4xl"}):Object(p.jsx)(o.tb,{className:"text-gray-300 text-4xl"}),Object(p.jsx)("div",{className:"flex flex-col",children:Object(p.jsx)("div",{className:"text-gray-600 font-bold",children:"All session"})})]}),Object(p.jsx)("div",{onClick:function(){e.setSelectSession("all")},className:"bg-gray-50 group-hover:bg-blue-600 font-semibold text-gray-400 group-hover:text-white rounded px-3 py-2 cursor-pointer",children:"Select"})]}),(t=e.allSession,s=m,Object(u.a)(t,s)).map((function(t,s){return Object(p.jsxs)("div",{className:"rounded border ".concat("all"!==e.currentSelected&&e.currentSelected.session_plan_id===t.session_plan_id?"bg-blue-50 border-blue-300":"bg-white border-white "," group hover:border-blue-500 px-2 py-2 mb-2"),children:[Object(p.jsxs)("div",{className:"flex flex-col md:flex-row items-start md:items-center md:justify-between ",children:[Object(p.jsxs)("div",{className:"flex flex-row items-center gap-3",children:["all"!==e.currentSelected&&e.currentSelected.session_plan_id===t.session_plan_id?Object(p.jsx)(o.t,{className:"text-blue-500 text-4xl"}):Object(p.jsx)(o.tb,{className:"text-gray-300 text-4xl"}),Object(p.jsxs)("div",{className:"flex flex-col",children:[Object(p.jsx)("div",{className:"".concat("all"!==e.currentSelected&&e.currentSelected.session_plan_id===t.session_plan_id?"text-blue-600":"text-gray-600"," font-bold"),children:t.session_plan_name}),Object(p.jsxs)("div",{className:"text-sm text-gray-500",children:[Object(p.jsx)("span",{children:"Status: "}),Object(p.jsx)("span",{className:"".concat(!0===t.is_active?"text-gray-900 font-bold underline":"text-gray-500 italic"),children:!0===t.is_active?"Active":"Expired"})]})]})]}),Object(p.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[(null===l||l.session_plan_id!==t.session_plan_id)&&Object(p.jsx)("div",{onClick:function(){return x(t)},className:"bg-gray-50 group-hover:bg-blue-100 font-semibold text-gray-400 group-hover:text-blue-600 rounded px-3 py-2 cursor-pointer",children:"Details"}),Object(p.jsx)("div",{onClick:function(){e.setSelectSession(t)},className:"bg-gray-50 group-hover:bg-blue-600 font-semibold text-gray-400 group-hover:text-white rounded px-3 py-2 cursor-pointer",children:"Select"}),null!==l&&l.session_plan_id===t.session_plan_id&&Object(p.jsx)("div",{onClick:function(){return x(null)},className:"bg-red-100 group-hover:bg-red-200 font-semibold text-red-600 group-hover:text-red-800 rounded px-3 py-2 cursor-pointer",children:"Close"})]})]}),null!==l&&l.session_plan_id===t.session_plan_id&&Object(p.jsx)("div",{className:"bg-white rounded border border-blue-50 mt-2 animate__animated animate__fadeIn",children:Object(p.jsxs)("table",{className:"w-full",children:[Object(p.jsx)("thead",{className:"bg-blue-50",children:Object(p.jsxs)("tr",{className:"text-left",children:[Object(p.jsx)("th",{className:"px-3 py-3",children:"#"}),Object(p.jsx)("th",{children:"Plan"}),Object(p.jsx)("th",{children:"Start date"}),Object(p.jsx)("th",{children:"Ending date"}),Object(p.jsx)("th",{children:"Status"})]})}),Object(p.jsx)("tbody",{className:"text-sm",children:null!==l&&l.session_plan_id===t.session_plan_id&&l.plans.length>0&&t.plans.map((function(e,s){return Object(p.jsxs)("tr",{className:"".concat(void 0!==b(t.plans).find((function(t){return t.type_key===e.type_key}))?"bg-blue-100 text-blue-600 font-bold":""," text-left border-b border-blue-50"),children:[Object(p.jsx)("td",{className:"px-3 py-1",children:s+1}),Object(p.jsx)("td",{children:e.type_title}),Object(p.jsx)("td",{children:Object(d.a)(e.start_date,"DD/MM/YYYY")}),Object(p.jsx)("td",{children:Object(d.a)(e.end_date,"DD/MM/YYYY")}),Object(p.jsx)("td",{children:e.type_status})]},s+1)}))})]})})]},s+1)}))]})})]})}},271:function(e,t){},272:function(e,t){},312:function(e,t,s){"use strict";var n,a,r,i;s.d(t,"a",(function(){return n})),s.d(t,"c",(function(){return a})),s.d(t,"b",(function(){return r})),s.d(t,"d",(function(){return i})),function(e){e.Failed="Failed",e.Passed="Passed"}(n||(n={})),function(e){e.applicant_name="names",e.national_id="national_id",e.phone_number="phone",e.email="email",e.gender="gender",e.position_name="position_name",e.marks="marks",e.status="status"}(a||(a={})),function(e){e.PENDING="pending",e.PLACED="placed",e.REJECTED="rejected"}(r||(r={})),function(e){e.applicant_name="names",e.national_id="national_id",e.phone_number="phone",e.email="email",e.school_name="school_name",e.position_name="position_name",e.status="status"}(i||(i={}))},836:function(e,t,s){"use strict";s.r(t),s.d(t,"_MarksPublicationReport",(function(){return G})),s.d(t,"MarksPublicationReport",(function(){return z}));var n=s(5),a=s.n(n),r=s(7),i=s(21),o=s(20),c=s(23),l=s(22),d=s(4),u=s(10),p=s(16),b=s(3),x=s(209),j=s(18),h=s(312),m=s(29),f=s(197),g=s(224),O=s(85),v=s(202),y=s(210),S=s(228),N=s(60),_=s(36),w=s(27),P=s(201),C=s(8),k=s.n(C),D=s(9),E=s(250),T=s(45),A=s(15),M=s(67),I=s(42),L=s(222),R=s(1),F=[{key:h.c.applicant_name,title:"Applicant name",status:!0},{key:h.c.national_id,title:"National ID",status:!0},{key:h.c.email,title:"Email",status:!0},{key:h.c.phone_number,title:"Phone",status:!0},{key:h.c.gender,title:"Gender",status:!0},{key:h.c.position_name,title:"Position",status:!0},{key:h.c.marks,title:"Marks",status:!0},{key:h.c.status,title:"Status",status:!0}],G=function(e){Object(c.a)(s,e);var t=Object(l.a)(s);function s(e){var n;return Object(i.a)(this,s),(n=t.call(this,e)).setLoading=function(e){n.setState({loading:e})},n.setLoadingData=function(e){n.setState({loadingData:e})},n.setSelectAll=function(e){n.setState({selectAll:e})},n.setSelectSession=function(e){n.setState({selectSession:e})},n.setSelectedSession=function(e){n.setState({selectedSession:e,reportTitle:"Application marks publication Report - "+e.session_plan_name})},n.setSelectPosition=function(e){n.setState({selectPosition:e})},n.setSelectedPosition=function(e){n.setState({selectedPosition:e})},n.setReportTitle=function(e){n.setState({reportTitle:e})},n.setFormError=function(e){n.setState({formError:e})},n.setSortOrder=function(e){n.setState({sortOrder:e})},n.setSortProperty=function(e){n.setState({sortProperty:e})},n.setIsSorted=function(e){n.setState({isSorted:e})},n.setGenerateReportModal=function(e){n.setState({generateReportModal:e})},n.setDownloading=function(e){n.setState({downloading:e})},n.setSort=function(e){n.state.sortProperty===e&&"ASC"===n.state.sortOrder?n.setSortOrder("DESC"):n.setSortOrder("ASC"),n.setSortProperty(e),n.setIsSorted(!0)},n.loadReportMainData=function(){var e=Object(r.a)(a.a.mark((function e(t){var s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.setLoadingData(!0),e.prev=1,e.next=4,k.a.get("".concat(D.a.DO_EXAM,"/waiting/publication/").concat(t.session_plan_id));case 4:s=e.sent,console.log("===================================="),console.log({reportMainData:s}),console.log("===================================="),n.setState({reportMainData:s.data}),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),console.error({reportMainData_error:e.t0}),n.props.PushPopupAlert({title:Object(_.f)(e.t0),theme:m.a.danger});case 15:n.setLoadingData(!1);case 16:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}(),n.componentDidMount=function(){if(null===n.props.systemPositions?n.props.getPositions((function(e,t){n.setLoading(e),console.log({status:e,msg:t}),t.length&&n.props.PushPopupAlert({title:t,theme:m.a.danger})})):n.state.loading&&n.setLoading(!1),null===n.props.application_sessions)n.props.GetAllSessionPlans((function(e,t,s){if(n.setLoading(e),!e&&(Object(f.f)(t)||n.props.PushPopupAlert({title:t,theme:m.a.warning}),s&&s.length>0)){var a=s.find((function(e){return e.is_active}));a?(n.setSelectedSession(a),null===n.state.reportMainData&&n.loadReportMainData(a)):n.setSelectSession(!0)}}));else if(n.setLoading(!1),n.props.application_sessions.length>0){var e=n.props.application_sessions.find((function(e){return e.is_active}));e?(n.setSelectedSession(e),null===n.state.reportMainData&&n.loadReportMainData(e)):n.setSelectSession(!0)}},n.FC_GeneratePDF=function(){if(!document.querySelectorAll("#report_content tbody tr").length)return n.props.PushPopupAlert({title:"Can't generate Report of empty Data",theme:m.a.warning}),!1;if(n.state.selectedSession){var e=document.getElementById("report_content"),t={doneBy:n.props.auth.user.fname+" "+n.props.auth.user.lname,title:"Marks publication Report",subjectTitle:"Application marks publication",subject:"All position",period:n.state.selectedSession.session_plan_name,footer:"Online Recruitment",institute:"All institute",orientation:"l"};e&&Object(g.a)(t,e,n.setDownloading)}},n.updateContentToPrint=function(){if(n.state.selectedSession){var e="Application marks publication Report - "+n.state.selectedSession.session_plan_name;n.setReportTitle(e)}if(n.state.reportMainData){var t=[],s=1,a=function(e){if(Object.prototype.hasOwnProperty.call(n.state.reportMainData,e)){var a=n.props.systemPositions?n.props.systemPositions.find((function(t){return t.position_id===n.state.reportMainData[e].position})):void 0,r=null;for(var i in r={no:s,names:n.state.reportMainData[e].user.user_info.fname+" "+n.state.reportMainData[e].user.user_info.lname,national_id:n.state.reportMainData[e].user.n_id,phone:n.state.reportMainData[e].user.phone_number,email:n.state.reportMainData[e].user.email,gender:n.state.reportMainData[e].gender,position_name:a?a.position_title:"",marks:n.state.reportMainData[e].user_position_marks,status:n.state.reportMainData[e].waiting_status},n.state.reportContentExport)Object.prototype.hasOwnProperty.call(n.state.reportContentExport,i)&&!n.state.reportContentExport[i].status&&r&&delete r[n.state.reportContentExport[i].key];r&&t.push(r),s++}};for(var r in n.state.reportMainData)a(r);n.setState({dataToPrint:t}),t=[],s=1}},n.updateReportContent=function(e){var t=n.state.reportContentExport.findIndex((function(t){return t.key===e})),s=n.state.reportContentExport;s[t].status=!s[t].status,n.setState({reportContentExport:s}),s.find((function(e){return!1===e.status}))?n.setSelectAll(!1):n.setSelectAll(!0),n.updateContentToPrint()},n.isChangeAllowed=function(e){return e!==h.c.applicant_name&&e!==h.c.position_name&&e!==h.c.national_id},n.resetReportContent=function(e){var t=n.state.reportContentExport;for(var s in t)n.isChangeAllowed(t[s].key)&&(t[s].status=!e);n.setState({reportContentExport:t}),n.setSelectAll(!e),n.updateContentToPrint()},n.dataToShow=function(e){var t=[],s=function(s){if(Object.prototype.hasOwnProperty.call(e,s)){var a=n.props.systemPositions?n.props.systemPositions.find((function(t){return t.position_id===e[s].position})):void 0;t.push({no:Math.random(),names:e[s].user.user_info.fname+" "+e[s].user.user_info.lname,national_id:e[s].user.n_id,phone:e[s].user.phone_number,email:e[s].user.email,gender:e[s].gender,position_name:a?a.position_title:"",marks:Number(e[s].user_position_marks.toFixed(2)),status:e[s].waiting_status})}};for(var a in e)s(a);return t},n.FC_FilterReportData=function(e,t,s){var n=e;return"all"!==t&&(n=n.filter((function(e){return e.status===t}))),s&&(n=n.filter((function(e){return e.position_name.toLocaleLowerCase()===s.position_title.toLocaleLowerCase()}))),n},n.ReportStatuses=function(e){var t=[{title:"All",count:e.length,status:"all"}];return t.push({title:Object(f.a)(h.a.Passed.toLocaleLowerCase()),count:e.filter((function(e){return e.waiting_status===h.a.Passed})).length,status:h.a.Passed},{title:Object(f.a)(h.a.Failed.toLocaleLowerCase()),count:e.filter((function(e){return e.waiting_status===h.a.Failed})).length,status:h.a.Failed}),t},n.state={loading:!0,loadingData:!0,selectedStatus:"all",selectAll:!0,reportMainData:null,reportContentExport:F,reportTitle:"",dataToPrint:null,sortProperty:"",isSorted:!1,sortOrder:"ASC",searchInput:"",searchPositionInput:"",generateReportModal:null,formError:null,selectPosition:!1,selectedPosition:null,selectedSession:null,selectSession:!1,downloading:!1},n}return Object(o.a)(s,[{key:"render",value:function(){var e=this;return this.state.loading?Object(R.jsx)("div",{className:"text-center mt-7 font-bold text-4xl text-gray-400 animate-pulse",children:"Loading data..."}):Object(R.jsxs)("div",{children:[Object(R.jsxs)(v.b,{children:[Object(R.jsxs)("div",{className:"",children:[Object(R.jsx)("div",{className:"text-gray-600 text-sm mb-2",children:"Session:"}),Object(R.jsxs)("div",{onClick:function(){return e.setSelectSession(!0)},className:"font-bold bg-blue-50 border border-blue-200 rounded py-2 cursor-pointer text-xs px-2 hover:underline justify-between text-blue-600  mb-4 w-full flex flex-row items-center animate__animated animate__zoomIn",children:[null!==this.state.selectedSession?"".concat(this.state.selectedSession.session_plan_name):"Filter by session",Object(R.jsx)(y.d,{className:"text-lg text-blue-600"})]})]}),Object(R.jsxs)("div",{className:"pt-1",children:[Object(R.jsx)("div",{className:"text-sm text-gray-700 pb-2 pt-2",children:"Performance statuses:"}),null===this.state.reportMainData||this.state.loadingData?Object(R.jsx)(w.a,{}):this.ReportStatuses(this.state.reportMainData).map((function(t,s){return Object(R.jsx)(d.Fragment,{children:Object(R.jsx)("div",{onClick:function(){return e.setState({selectedStatus:t.status})},children:Object(R.jsx)(v.a,{title:t.title,count:t.count,active:e.state.selectedStatus===t.status})})},t.title)}))]})]}),Object(R.jsxs)("section",{children:[Object(R.jsxs)("div",{className:"grid md:grid-cols-12",children:[Object(R.jsx)("div",{className:"col-span-8",children:Object(R.jsxs)("div",{className:"mt-4 mx-4 flex flex-col gap-1",children:[Object(R.jsx)("span",{className:"text-3xl font-bold text-gray-700",children:"Applications marks publication Report"}),Object(R.jsxs)("div",{onClick:function(){return e.setState({selectPosition:!0})},className:"flex flex-row gap-2 items-end",children:[Object(R.jsx)("span",{className:"text-gray-500 text-xl",children:"Position:"}),Object(R.jsx)("span",{className:"text-blue-600 font-bold underline cursor-pointer text-xl",children:null!==this.state.selectedPosition?this.state.selectedPosition.position_title:"All position"})]})]})}),Object(R.jsx)("div",{className:"col-span-4",children:Object(R.jsx)("div",{className:"float-right mt-2",children:this.state.reportMainData&&this.state.reportMainData.length>0&&Object(R.jsxs)("div",{className:"flex flex-row items-center justify-end font-bold mb-2",children:[Object(R.jsx)(O.e,{className:"text-2xl text-gray-500"}),Object(R.jsx)("span",{className:"text-gray-500",children:"Export as"}),Object(R.jsx)("button",{className:"px-4 py-1 ml-1 rounded bg-white border hover:text-blue-600 font-bold hover:bg-blue-50 border-gray-200",disabled:!(this.state.reportMainData&&!this.state.downloading),onClick:function(){e.setGenerateReportModal({reportType:"EXCEL",status:!0})},children:"EXCEL"}),Object(R.jsx)("button",{className:"px-4 py-1 ml-1 rounded bg-white border hover:text-blue-600 font-bold hover:bg-blue-50 border-gray-200 ".concat(this.state.downloading&&"cursor-wait"),onClick:function(){return e.FC_GeneratePDF()},disabled:!this.state.reportMainData,children:"PDF"})]})})})]}),Object(R.jsxs)("div",{className:"bg-white my-4",children:[Object(R.jsx)("div",{className:"w-full px-2 py-2",children:Object(R.jsx)("input",{onChange:function(t){return e.setState({searchInput:t.target.value})},type:"text",value:this.state.searchInput,placeholder:"Search...",className:"w-full bg-gray-100 py-2 px-3 rounded focus:border-gray-800",disabled:null===this.state.loadingData||null===this.state.reportMainData||this.FC_FilterReportData(this.dataToShow(this.state.reportMainData),this.state.selectedStatus,this.state.selectedPosition).length<=0})}),Object(R.jsxs)("table",{className:"w-full shadow",id:"report_content",children:[Object(R.jsx)("thead",{className:"bg-white border-b-2 border-gray-300 text-gray-600 font-bold text-sm",children:Object(R.jsxs)("tr",{children:[Object(R.jsx)("td",{className:"px-2 py-2",children:"#"}),Object(R.jsx)("td",{className:"px-2 py-2 cursor-pointer",onClick:function(){return e.setSort("names")},children:Object(R.jsxs)("div",{className:"flex items-center gap-1",children:["Names ",Object(R.jsx)(O.i,{})]})}),Object(R.jsx)("td",{className:"px-2 py-2 cursor-pointer",onClick:function(){return e.setSort("national_id")},children:Object(R.jsxs)("div",{className:"flex items-center gap-1",children:["National Id ",Object(R.jsx)(O.i,{})]})}),Object(R.jsx)("td",{className:"px-2 py-2 cursor-pointer",onClick:function(){return e.setSort("phone")},children:Object(R.jsxs)("div",{className:"flex items-center gap-1",children:["Phone ",Object(R.jsx)(O.i,{})]})}),Object(R.jsx)("td",{className:"px-2 py-2 cursor-pointer",onClick:function(){return e.setSort("email")},children:Object(R.jsxs)("div",{className:"flex items-center gap-1",children:["Email ",Object(R.jsx)(O.i,{})]})}),Object(R.jsx)("td",{className:"px-2 py-2 cursor-pointer",onClick:function(){return e.setSort("gender")},children:Object(R.jsxs)("div",{className:"flex items-center gap-1",children:["Gender ",Object(R.jsx)(O.i,{})]})}),Object(R.jsx)("td",{className:"px-2 py-2 cursor-pointer",onClick:function(){return e.setSort("position_name")},children:Object(R.jsxs)("div",{className:"flex items-center gap-1",children:["Position ",Object(R.jsx)(O.i,{})]})}),Object(R.jsx)("td",{className:"px-2 py-2 cursor-pointer",onClick:function(){return e.setSort("status")},children:Object(R.jsxs)("div",{className:"flex items-center gap-1",children:["Status ",Object(R.jsx)(O.i,{})]})})]})}),Object(R.jsx)("tbody",{children:null===this.state.reportMainData||this.state.loadingData?Object(R.jsx)(S.a,{cols:8}):0===this.FC_FilterReportData(this.dataToShow(this.state.reportMainData),this.state.selectedStatus,this.state.selectedPosition).length?Object(R.jsx)("tr",{children:Object(R.jsx)("td",{colSpan:8,className:"px-2 py-2",children:Object(R.jsxs)("div",{className:"flex flex-col text-gray-400 items-center justify-center bg-gray-100 rounded py-10",children:[Object(R.jsx)(N.c,{className:"text-8xl text-gray-400 mb-2 animate__animated animate__shakeX"}),Object(R.jsx)("span",{className:"text-sm font-bold",children:"No result found! Please try to search again"}),Object(R.jsx)("div",{className:"w-full mt-2 flex flex-row items-center justify-center",children:Object(R.jsx)("ul",{className:"text-sm py-2 text-blue-600 font-bold flex flex-row gap-2",children:Object(R.jsx)("li",{onClick:function(){return e.setState({selectSession:!0})},className:"underline text-gray-500 cursor-pointer",children:"Choose another district"})})})]})})}):Object(_.n)(this.state.isSorted,Object(_.l)(this.FC_FilterReportData(this.dataToShow(this.state.reportMainData),this.state.selectedStatus,this.state.selectedPosition),this.state.searchInput),this.state.sortProperty,this.state.sortOrder).map((function(e,t){return Object(R.jsxs)("tr",{className:"hover:bg-blue-100 hover:text-blue-700 border-b hover:border-blue-500 text-sm ".concat(e.status===h.a.Failed?"border-yellow-500 text-gray-700 bg-yellow-200":"bg-white"),children:[Object(R.jsx)("td",{className:"px-2 py-2",children:t+1}),Object(R.jsx)("td",{className:"px-2 py-2",children:e.names}),Object(R.jsx)("td",{className:"px-2 py-2",children:e.national_id}),Object(R.jsx)("td",{className:"px-2 py-2",children:e.phone}),Object(R.jsx)("td",{className:"px-2 py-2",children:e.email}),Object(R.jsx)("td",{className:"px-2 py-2",children:e.gender}),Object(R.jsx)("td",{className:"px-2 py-2",children:e.position_name}),Object(R.jsx)("td",{className:"px-2 py-2",children:e.marks}),Object(R.jsx)("td",{className:"px-2 py-2",children:e.status})]},t+e.no)}))})]})]})]}),this.state.selectSession&&Object(R.jsx)(j.d,{title:Object(R.jsxs)("div",{className:"flex flex-row gap-4 items-center",children:[Object(R.jsx)(u.P,{className:"text-5xl text-blue-600"}),Object(R.jsx)("span",{className:"flex flex-col",children:"Choose session"})]}),backDrop:!0,theme:j.c.default,close:function(){return null!==e.state.selectedSession&&e.setSelectSession(!1)},backDropClose:!0,widthSizeClass:j.b.extraLarge,displayClose:!0,padding:{title:!0},children:Object(R.jsx)(E.a,{allSession:this.props.application_sessions,setSelectSession:function(t){"all"!==t&&(e.setSelectedSession(t),e.loadReportMainData(t),e.setSelectSession(!1))},chooseAll:!1,currentSelected:this.state.selectedSession?this.state.selectedSession:"all"})}),!0===this.state.selectPosition&&Object(R.jsx)(j.d,{title:Object(R.jsxs)("div",{className:"flex flex-row gap-4 items-center",children:[Object(R.jsx)(M.h,{className:"text-5xl text-blue-600"}),Object(R.jsx)("div",{className:"flex flex-col",children:Object(R.jsx)("span",{className:"font-bold text-xl text-blue-600",children:"Filter by a position"})})]}),backDrop:!0,theme:j.c.default,close:function(){return e.setState({selectPosition:!1})},backDropClose:!0,widthSizeClass:j.b.extraLarge,displayClose:!0,padding:{title:!0},children:Object(R.jsx)("div",{className:"px-2 pb-2",children:!0===this.state.selectPosition&&null===this.props.systemPositions?Object(R.jsx)(T.b,{type:T.a.dark}):0===this.props.systemPositions.length?Object(R.jsxs)("div",{className:"flex flex-col text-gray-400 items-center justify-center",children:[Object(R.jsx)(u.Cb,{className:"text-6xl"}),Object(R.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[Object(R.jsx)("span",{children:"No positions found! Please go back!"}),Object(R.jsx)(A.b,{to:"/",className:"btn bg-yellow-100 text-yellow-700 my-4 hover:bg-yellow-200",children:"Go back"})]})]}):Object(R.jsxs)(R.Fragment,{children:[Object(R.jsxs)("div",{className:"flex flex-col",children:[Object(R.jsx)("span",{className:"text-gray-600 text-xs font-bold",children:"Filter by position name"}),Object(R.jsx)("input",{onChange:function(t){return e.setState({searchPositionInput:t.target.value})},type:"text",className:"mb-4 bg-gray-100 px-3 py-2 rounded",placeholder:"Keyword..."})]}),Object(R.jsx)("div",{onClick:function(){e.setSelectedPosition(null),e.setState({selectPosition:!1,reportTitle:e.state.selectedSession.session_plan_name})},className:"bg-white cursor-pointer rounded  px-3 py-2 border border-gray-200 hover:border-blue-500 hover:bg-blue-100 mb-2",children:Object(R.jsxs)("div",{className:"grid lg:grid-cols-12",children:[Object(R.jsx)("div",{className:"col-span-12 lg:col-span-10",children:Object(R.jsxs)("div",{className:"flex flex-row items-center gap-3",children:[Object(R.jsx)("div",{children:Object(R.jsx)(I.a,{className:"text-4xl md:text-5xl text-blue-600"})}),Object(R.jsx)("div",{className:"flex flex-col",children:Object(R.jsx)("span",{className:"text-xs lg:text-base font-bold text-gray-700",children:"All positions"})})]})}),Object(R.jsx)("div",{className:"col-span-12 lg:col-span-2 hidden lg:block",children:Object(R.jsx)("div",{className:"h-full flex items-center justify-end",children:Object(R.jsx)("div",{className:"btn bg-blue-600 text-white float-right",children:"Choose"})})})]})}),Object(_.l)(this.props.systemPositions,this.state.searchPositionInput).map((function(t,s){return Object(R.jsx)("div",{onClick:function(){e.setSelectedPosition(t),e.setState({selectPosition:!1,reportTitle:e.state.selectedSession.session_plan_name+" on "+t.position_title})},className:"bg-white cursor-pointer rounded  px-3 py-2 border border-gray-200 hover:border-blue-500 hover:bg-blue-100 mb-2",children:Object(R.jsxs)("div",{className:"grid lg:grid-cols-12",children:[Object(R.jsx)("div",{className:"col-span-12 lg:col-span-10",children:Object(R.jsxs)("div",{className:"flex flex-row items-center gap-3",children:[Object(R.jsx)("div",{children:Object(R.jsx)(I.a,{className:"text-4xl md:text-5xl text-blue-600"})}),Object(R.jsxs)("div",{className:"flex flex-col",children:[Object(R.jsx)("span",{className:"text-xs lg:text-sm font-bold text-gray-700",children:t.position_title}),Object(R.jsxs)("span",{className:"text-xs text-gray-500 italic",children:["School level:"," ",Object(R.jsx)("span",{className:"text-gray-800 font-light",style:{fontStyle:"normal"},children:t.school_level_id.school_level_name})]}),Object(R.jsx)("span",{className:"text-xs font-bold text-blue-600 bg-blue-100 w-max px-3 py-1 rounded-full",children:t.education_institute_id.education_category_title})]})]})}),Object(R.jsx)("div",{className:"col-span-12 lg:col-span-2 hidden lg:block",children:Object(R.jsx)("div",{className:"h-full flex items-center justify-end",children:Object(R.jsx)("div",{className:"btn bg-blue-600 text-white float-right",children:"Choose"})})})]})},s+1)}))]})})}),null!==this.state.generateReportModal&&!0===this.state.generateReportModal.status&&Object(R.jsx)(j.d,{title:Object(R.jsx)("div",{className:"flex flex-row gap-4 items-center",children:Object(R.jsxs)("div",{className:"flex flex-col",children:[Object(R.jsx)("span",{className:"font-bold text-2xl text-gray-500",children:"Generating Report contents"}),Object(R.jsxs)("span",{className:"text-sm text-blue-600 font-normal",children:["Generating ",this.state.generateReportModal.reportType," ","Report"]})]})}),backDrop:!0,theme:j.c.default,close:function(){return e.setGenerateReportModal(null)},backDropClose:!1,widthSizeClass:j.b.medium,displayClose:!0,padding:{title:!0},children:Object(R.jsxs)("div",{className:"px-6",children:[Object(R.jsxs)("div",{className:"my-2 text-base text-gray-700 sm:text-lg",children:[Object(R.jsxs)("div",{className:"flex flex-col",children:[Object(R.jsx)("label",{children:"Title"}),Object(R.jsx)("input",{type:"text",className:"text-left input-white w-20 inline-block ".concat(this.state.formError&&"report_title"===this.state.formError.element?"border-red-500":"border-gray-500"," border-2"),placeholder:"Sub Category Title",value:this.state.reportTitle,onChange:function(t){e.setFormError(null),e.setReportTitle(t.target.value)},disabled:!this.state.reportMainData}),this.state.formError&&"report_title"===this.state.formError.element&&Object(R.jsx)("span",{className:"text-red-500",children:this.state.formError.msg})]}),Object(R.jsxs)("div",{className:"flex flex-col mt-2",children:[Object(R.jsx)("label",{children:"Report content"}),Object(R.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 items-center gap-2 mt-2",children:this.state.reportContentExport.map((function(t,s){return Object(R.jsxs)("div",{className:"flex items-center gap-1 ".concat(e.isChangeAllowed(t.key)?"cursor-pointer":"cursor-not-allowed"),onClick:function(){return e.isChangeAllowed(t.key)&&e.updateReportContent(t.key)},title:e.isChangeAllowed(t.key)?"":"Required for every report!",children:[t.status?Object(R.jsx)(u.r,{className:"w-6 h-6 text-blue-700"}):Object(R.jsx)(u.s,{className:"w-6 h-6"}),Object(R.jsx)("span",{children:t.title})]},s)}))}),this.state.formError&&"report_content"===this.state.formError.element&&Object(R.jsx)("span",{className:"text-red-500",children:this.state.formError.msg})]})]}),Object(R.jsxs)("div",{className:"flex justify-between mb-2 mt-4",children:[Object(R.jsxs)("div",{className:"flex items-center gap-1 cursor-pointer",onClick:function(){return e.resetReportContent(e.state.selectAll)},children:[this.state.selectAll?Object(R.jsx)(u.r,{className:"w-6 h-6 text-blue-700"}):Object(R.jsx)(u.s,{className:"w-6 h-6"}),Object(R.jsx)("span",{children:"Select all"})]}),this.state.dataToPrint&&this.state.reportMainData&&Object(R.jsx)(L.a,{fileData:this.state.dataToPrint,fileName:this.state.reportTitle,btnName:"Generate"})]})]})})]})}}]),s}(d.Component),z=Object(p.b)((function(e){var t=e.auth,s=e.system_settings,n=e.sessionPlan;return{auth:t,systemPositions:s.systemPositions,application_sessions:n.allSessionPlans}}),{GetAllSessionPlans:P.a,getPositions:x.d,PushPopupAlert:b.tb})(G)}}]);
//# sourceMappingURL=32.800270ae.chunk.js.map