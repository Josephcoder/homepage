(this["webpackJsonpreact-redux-typescript-advance"]=this["webpackJsonpreact-redux-typescript-advance"]||[]).push([[43],{762:function(e,t,s){"use strict";s.r(t),s.d(t,"ProctoringCenter",(function(){return R}));var o,a=s(19),r=s(20),i=s(22),n=s(21),c=s(4),d=s.n(c),l=s(176),m=s(8),p=s(18),b=s(3),x=s(1),j=function(e){var t=e.course_title,s=e.post_title,o=e.duration,a=e.started_at,r=e.end_at,i=e.exam_start,n=e.startExamHandler,d=e.stopExamHandler,l=e.focus_mode,p=e.focusToggle,b=e.leaveRoom;return Object(x.jsxs)("div",{className:"".concat(!0===l?"border-blue-500 border-opacity-30 text-white proctoring-evaluator-navigation":"bg-white rounded-t-sm  rounded-md"," py-2 px-3 border-b  grid grid-flow-row md:grid-cols-1 lg:grid-cols-2 transition-all ease-in-out"),children:[Object(x.jsxs)("div",{className:"flex",children:[Object(x.jsx)("button",{onClick:function(){return p()},className:"px-2 ".concat(!0===l?"bg-blue-900 hover:bg-blue-500 ":"bg-blue-100 hover:bg-blue-500 "," mr-2  rounded-md  hover:text-white"),children:!0===l?Object(x.jsxs)(c.Fragment,{children:[Object(x.jsx)(m.L,{className:"text-3xl mx-auto -mb-2"}),Object(x.jsx)("span",{className:"text-xs inline-block pt-1",children:"Un-Focus"})]}):Object(x.jsxs)(c.Fragment,{children:[Object(x.jsx)(m.K,{className:"text-3xl mx-auto -mb-2"}),Object(x.jsx)("span",{className:"text-xs inline-block pt-1",children:"Focus"})]})}),Object(x.jsxs)("div",{className:"",children:[Object(x.jsx)("label",{htmlFor:"",className:"".concat(!0===l?"text-gray-200":""," text-sm m-0"),children:s}),Object(x.jsx)("h3",{className:"text-white- text-xl  font-bold",children:t})]})]}),Object(x.jsx)("div",{className:"text-red lg:pt-0 sm:pt-3 text-right md:text-left lg:text-right",children:Object(x.jsxs)("div",{className:"grid grid-cols-5 gap-4 text-left",children:[Object(x.jsxs)("div",{children:[Object(x.jsx)("label",{className:"text-gray-400 text-sm",children:"Duration"}),Object(x.jsx)("h2",{className:"text-xl font-bold",children:o})]}),Object(x.jsxs)("div",{children:[Object(x.jsx)("label",{className:"text-gray-400 text-sm",children:"Started at:"}),Object(x.jsx)("h2",{className:"text-xl font-bold",children:a})]}),Object(x.jsxs)("div",{children:[Object(x.jsx)("label",{className:"text-gray-400 text-sm",children:"End at"}),Object(x.jsx)("h2",{className:"text-xl font-bold",children:r})]}),Object(x.jsx)("div",{className:"flex items-center",children:!1===i&&Object(x.jsx)("button",{onClick:function(){return window.confirm("Are you sure you want to leave the room??")&&b()},className:"btn bg-red-100 text-red-900 w-full hover:bg-red-500 hover:text-white",title:"Start Exam",children:"Leave"})}),Object(x.jsx)("div",{className:"flex items-center",children:!1===i?Object(x.jsx)("button",{onClick:function(){return n()},className:"btn bg-green-500 text-white w-full",title:"Start Exam",children:"Start"}):Object(x.jsx)("button",{onClick:function(){return d()},className:"btn bg-red-600 text-white w-full",title:"stop Exam",children:"Stop"})})]})})]})},h=function(e){var t=e.total,s=e.active,o=e.done,a=e.left,r=e.focus_mode;return Object(x.jsxs)("div",{className:"grid grid-col-4 grid-flow-col gap-4 p-2 ".concat(!0===r?"bg-blue-900 text-gray-300":"bg-white  shadow-lg border "," rounded-md my-2 text-center w-90"),children:[Object(x.jsxs)("div",{title:"Total candite(s)",children:[Object(x.jsx)("h1",{className:"text-2xl font-bold -mb-1 p-0",children:t}),Object(x.jsx)("label",{htmlFor:"",className:"text-sm -mt-2",children:"Total"})]}),Object(x.jsxs)("div",{title:"Active candite(s)",children:[Object(x.jsx)("h1",{className:"text-2xl font-bold -mb-1 p-0",children:s}),Object(x.jsx)("label",{htmlFor:"",className:"text-sm -mt-2",children:"Active"})]}),Object(x.jsxs)("div",{title:"Candite(s) who done exam",children:[Object(x.jsx)("h1",{className:"text-2xl font-bold -mb-1 p-0",children:o}),Object(x.jsx)("label",{htmlFor:"",className:"text-sm -mt-2",children:"Done"})]}),Object(x.jsxs)("div",{title:"Candite(s) who left unfinished",children:[Object(x.jsx)("h1",{className:"text-2xl font-bold -mb-1 p-0",children:a}),Object(x.jsx)("label",{htmlFor:"",className:"text-sm -mt-2",children:"Left"})]})]})},u=s(25),_=function(e){var t=e.events,s=(e.clickOpen,e.clickHandler,e.candidates),o=e.focus_mode,a=e.loading,r=Object(c.useState)(""),i=Object(u.a)(r,2),n=i[0],d=i[1];return Object(x.jsxs)("div",{className:"mt-2 p-2 ".concat(!0===o?"bg-gray-900 text-white":"bg-gray-50 shadow-sm border"," rounded-md "),children:[Object(x.jsx)("h1",{className:"text-xl",children:"Events"}),!0===a?Object(x.jsx)("div",{className:"p-2",children:Object(x.jsx)("h4",{className:"block animate__animated animate__fadeIn animate__infinite p-3 text-center",children:"Loading events..."})}):Object(x.jsxs)("table",{className:"w-full text-left",children:[Object(x.jsx)("thead",{className:"text-sm text-gray-500",children:Object(x.jsxs)("tr",{children:[Object(x.jsx)("th",{children:"#"}),Object(x.jsx)("th",{children:"username"}),Object(x.jsx)("th",{children:"Event type"}),Object(x.jsx)("th",{children:"Time"})]})}),Object(x.jsx)("tbody",{children:0===t.length?Object(x.jsx)("tr",{children:Object(x.jsxs)("td",{className:"p-3 py-8 text-center",colSpan:4,children:[Object(x.jsx)("h2",{className:"font-bold text-2xl",children:"No events found"}),Object(x.jsx)("h2",{className:"",children:"No event has been committed yet"})]})}):t.map((function(e,t){var o=s.find((function(t){return t.user_id===e.user_id}));return Object(x.jsx)(c.Fragment,{children:n===e.event_id?Object(x.jsx)("tr",{children:Object(x.jsx)("td",{colSpan:4,className:"animate__animated animate__zoomIn animate__faster",children:Object(x.jsxs)("div",{className:"overflow-hidden my-1 rounded border bg-blue-900 bg-opacity-30 border-blue-500",children:[Object(x.jsxs)("div",{className:"px-3  flex items-center bg-blue-900 bg-opacity-30",children:[Object(x.jsxs)("h2",{className:"flex-1 m-0 text-xl py-2 opacity-70",children:["Event ",Object(x.jsx)("b",{children:t+1})," details"]}),Object(x.jsx)("button",{onClick:function(){return d("")},className:"hover:bg-red-600 text-2xl p-1.5 rounded-md",children:Object(x.jsx)(m.w,{})})]}),Object(x.jsxs)("div",{className:"p-2",children:[Object(x.jsxs)("p",{children:[Object(x.jsx)("span",{className:"opacity-70",children:"Event type: "}),Object(x.jsx)("b",{children:e.event_type_id})]}),Object(x.jsxs)("p",{children:[Object(x.jsx)("span",{className:"opacity-70",children:"Time: "}),Object(x.jsx)("b",{children:e.createdAt})]}),Object(x.jsxs)("p",{className:"p-1 m-1 bg-blue-200 bg-opacity-20 px-2 rounded-md",children:[Object(x.jsxs)("span",{className:"opacity-70 block",children:["Description:"," "]}),Object(x.jsx)("b",{children:e.description})]}),void 0!==o&&Object(x.jsxs)("div",{className:"p-1 mt-2 m-1 bg-blue-200 bg-opacity-20 px-2 rounded-md",children:[Object(x.jsxs)("p",{children:[Object(x.jsx)("span",{className:"opacity-70",children:"Names: "}),Object(x.jsxs)("b",{children:[o.fname," ",o.lname]})]}),Object(x.jsxs)("p",{children:[Object(x.jsx)("span",{className:"opacity-70",children:"Email: "}),Object(x.jsx)("b",{children:o.email})]})]})]})]})})}):Object(x.jsxs)("tr",{onClick:function(){return d(e.event_id)},className:"p-2 rounded-md hover:bg-blue-900 bg-opacity-30 cursor-pointer",children:[Object(x.jsx)("td",{className:"px-1 opacity-95",children:t+1}),Object(x.jsx)("td",{className:"text-blue-500 font-bold",children:void 0!==o?Object(x.jsx)("span",{title:(null===o||void 0===o?void 0:o.fname)+" "+(null===o||void 0===o?void 0:o.lname),children:null===o||void 0===o?void 0:o.lname}):Object(x.jsx)("span",{className:"opacity-50",children:"System/Admin"})}),Object(x.jsx)("td",{className:"text-red-400 text-sm pl-1",children:e.event_type_id}),Object(x.jsx)("td",{className:"text-gray-400 pl-1",children:"2min"})]})},t)}))})]})]})},g=void 0;!function(e){e[e.Details=0]="Details",e[e.Events=1]="Events"}(o||(o={}));var O,v=function(e){var t=e.candidate,s=e.chatHandler,a=e.micHandler,r=e.focusHandler,i=e.stopHandler,n=e.restartHandler,d=e.warnHandler,l=e.closeHandler,p=e.events,b=e.home_proctoring,j=e.exam_started,h=e.focus_mode,O=e.removeInExam,v=Object(c.useState)(o.Details),N=Object(u.a)(v,2),f=N[0],y=N[1];return void 0===t?Object(x.jsxs)("div",{className:"p-4 text-center bg-white",children:[Object(x.jsx)("h1",{className:"text-3xl text-gray-800",children:"Oops!!"}),Object(x.jsxs)("p",{className:"text-3xl text-gray-700",children:["The selected candidate can't be found"," "]})]}):Object(x.jsxs)("div",{className:"p-1",children:[Object(x.jsxs)("div",{className:"p-2 border-rounded ".concat(!0===h?"bg-blue-900 text-white":"bg-gray-500 text-white","  rounded-md flex items-baseline "),children:[Object(x.jsx)("button",{onClick:function(){return l()},className:"p-1 block bg-blue-900 bg-opacity-70 rounded-md mr-2 font-bold text-1xl",children:Object(x.jsx)(m.e,{})}),Object(x.jsx)("h3",{className:"text-center -mt-1 mb-0 pb-0 text-1xl font-bold block text-blue-500--",children:"User details"})]}),Object(x.jsxs)("div",{className:"p-2 text-center",children:[Object(x.jsx)(m.a,{className:"text-9xl text-center mx-auto"}),Object(x.jsx)("h1",{className:"text-xl  ".concat(!0===h?"text-white":"text-gray-800"," font-bold"),children:t.email}),Object(x.jsxs)("h2",{className:" ".concat(!0===h?"text-gray-400":"text-gray-800","  text-md"),children:[t.fname," ",t.lname]})]}),Object(x.jsx)("div",{className:"my-2 py-1 rounded grid grid-cols-2 gap-1",children:!0===j&&!0===t.active&&Object(x.jsxs)(x.Fragment,{children:[!0===b&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("button",{onClick:a.bind(g,t.user_id),className:"proctoring-action-button",children:[Object(x.jsx)(m.yb,{className:"text-2xl mx-auto b-0 pb-0"}),Object(x.jsx)("span",{className:"text-md p-0 block -mt-0",children:"Mic"})]}),Object(x.jsxs)("button",{onClick:s.bind(g,t.user_id),className:"proctoring-action-button",children:[Object(x.jsx)(m.p,{className:"text-2xl mx-auto b-0 pb-0"}),Object(x.jsx)("span",{className:"text-md p-0 block -mt-0",children:"Chat"})]}),Object(x.jsxs)("button",{onClick:r.bind(g,t.user_id),className:"proctoring-action-button",children:[Object(x.jsx)(m.K,{className:"text-2xl mx-auto b-0 pb-0"}),Object(x.jsx)("span",{className:"text-md p-0 block -mt-0",children:"Focus"})]})]}),Object(x.jsxs)("button",{onClick:i.bind(g,t.user_id),className:"proctoring-action-button",children:[Object(x.jsx)(m.cb,{className:"text-2xl mx-auto b-0 pb-0"}),Object(x.jsx)("span",{className:"text-md p-0 block -mt-0",children:"Stop"})]}),Object(x.jsxs)("button",{onClick:n.bind(g,t.user_id),className:"proctoring-action-button",children:[Object(x.jsx)(m.mb,{className:"text-2xl mx-auto b-0 pb-0"}),Object(x.jsx)("span",{className:"text-md p-0 block -mt-0",children:"Restart"})]}),Object(x.jsxs)("button",{title:"give a warning",onClick:function(){return d(t.user_id)},className:"proctoring-action-button",children:[Object(x.jsx)(m.zb,{className:"text-2xl mx-auto b-0 pb-0"}),Object(x.jsx)("span",{className:"text-md p-0 block -mt-0",children:"Warn"})]}),Object(x.jsxs)("button",{title:"Remove into in exam",onClick:function(){return O(t.user_id)},className:"text-center rounded-md p-1 border-2 border-red-600 hover:bg-red-600 text-white  hover:text-white bg-red-500",children:[Object(x.jsx)(m.zb,{className:"text-2xl mx-auto b-0 pb-0"}),Object(x.jsx)("span",{className:"text-md p-0 block -mt-0",children:"Remove into exam"})]})]})}),Object(x.jsxs)("div",{className:"my-1 bg-blue-900 bg-opacity-40 rounded-md p-1 mt-2 grid grid-cols-2 gap-2 text-sm",children:[Object(x.jsx)("button",{onClick:function(){return y(o.Details)},className:"p-1 rounded-md text-white ".concat(f===o.Details?"bg-blue-700 border-2 border-blue-300":"bg-blue-900"),children:"candidate"}),Object(x.jsx)("button",{onClick:function(){return y(o.Events)},className:"p-1 rounded-md text-white ".concat(f===o.Events?"bg-blue-700 border-2 border-blue-300":"bg-blue-900"),children:"Events"})]}),f===o.Details?Object(x.jsxs)("div",{className:"mt-2 ".concat(!0===h?"text-white":"text-gray-900"," border-blue-400"),children:[Object(x.jsx)("h2",{className:" font-bold text-2xl mb-1 opacity-70 text-center border-b",children:"User information"}),Object(x.jsxs)("div",{className:"p-2 rounded-md border   border-opacity-20",children:[Object(x.jsxs)("div",{className:"border-b  border-opacity-60 py-1 ".concat(!0===h?"border-white":"border-gray-400"),children:[Object(x.jsx)("label",{className:"text-sm m-0 p-0 opacity-70",children:"Username:"}),Object(x.jsx)("h4",{className:"font-bold text-lg p-0 -mt-1",children:t.email})]}),Object(x.jsxs)("div",{className:"border-b  border-opacity-60 py-1 ".concat(!0===h?"border-white":"border-gray-400"),children:[Object(x.jsx)("label",{className:"text-sm m-0 p-0 opacity-70",children:"First name:"}),Object(x.jsx)("h4",{className:"font-bold text-lg p-0 -mt-1",children:t.fname})]}),Object(x.jsxs)("div",{className:"border-b  border-opacity-60 py-1 ".concat(!0===h?"border-white":"border-gray-400"),children:[Object(x.jsx)("label",{className:"text-sm m-0 p-0 opacity-70",children:"Last name:"}),Object(x.jsx)("h4",{className:"font-bold text-lg p-0 -mt-1",children:t.lname})]}),Object(x.jsxs)("div",{className:"border-b  border-opacity-60 py-1 ".concat(!0===h?"border-white":"border-gray-400"),children:[Object(x.jsx)("label",{className:"text-sm m-0 p-0 opacity-70",children:"email:"}),Object(x.jsx)("h4",{className:"font-bold text-lg p-0 -mt-1",children:t.email})]}),Object(x.jsxs)("div",{className:"border-b  border-opacity-60 py-1 ".concat(!0===h?"border-white":"border-gray-400"),children:[Object(x.jsx)("label",{className:"text-sm m-0 p-0 opacity-70",children:"Position:"}),Object(x.jsx)("h4",{className:"font-bold text-lg p-0 -mt-1",children:t.position_title})]}),Object(x.jsxs)("div",{className:"border-b  border-opacity-60 py-1 ".concat(!0===h?"border-white":"border-gray-400"),children:[Object(x.jsx)("label",{className:"text-sm m-0 p-0 opacity-70",children:"Course name:"}),Object(x.jsx)("h4",{className:"font-bold text-lg p-0 -mt-1",children:t.course_name})]})]})]}):Object(x.jsx)(_,{candidates:[t],events:p,focus_mode:h,loading:!1})]})},N=function(e){var t=e.clickHandler,s=e.candidates,o=e.focus_mode,a=e.show_title;return Object(x.jsxs)("div",{className:"mt-2 ".concat(!0===o?"text-white p-2 ":""),children:[!0===a&&Object(x.jsx)("h1",{className:"text-3xl font-bold text-center pb-2 border-b mb-1 border-gray-100",children:"Candidates"}),Object(x.jsxs)("table",{className:"w-full text-left ".concat(!0===o?"":"bg-white rounded-md",'  p-2"'),children:[Object(x.jsx)("thead",{className:"text-sm text-gray-500",children:Object(x.jsxs)("tr",{children:[Object(x.jsx)("th",{}),Object(x.jsx)("th",{})]})}),Object(x.jsx)("tbody",{children:s.map((function(e,s){return Object(x.jsxs)("tr",{className:"border-b mb-1 ".concat(!0===o?"border-blue-800 border-opacity-60 hover:bg-blue-900":"border-gray-200 border-opacity-60 hover:bg-blue-100","  cursor-pointer"),onClick:t.bind(undefined,e.user_id),children:[Object(x.jsx)("td",{className:"".concat(!0===o?"text-blue-500":"text-gray-400","  w-5 text-left"),children:Object(x.jsx)(m.a,{className:"text-5xl"})}),Object(x.jsxs)("td",{className:"text-gray-400 pl-1 py-1",children:[Object(x.jsx)("h4",{className:"font-bold text-lg p-0 m-0 ".concat(!0===o?"text-white":"text-gray-900"),children:e.email}),Object(x.jsxs)("p",{className:"text-sm p-0 m-0 -mt-1",children:[e.fname," ",e.lname]})]})]},s)}))})]})]})},f=void 0,y=function(e){var t=e.seat_number,s=e.candidate,o=e.warningHandler,a=e.stopHandler,r=e.detailsHandler,i=e.continueHandler,n=e.exam_started,c=e.focus_mode,d=!0===(null===s||void 0===s?void 0:s.stopped)?"red":!0===c?"blue":"gray";return Object(x.jsxs)("div",{className:"bg-".concat(d,"-900 bg-opacity-50 hover:bg-opacity-100 cursor-pointer border-").concat(d,"-400 border p-2 rounded-md text-white transition-all ease-in-out"),onClick:r.bind(f,s.user_id),children:[Object(x.jsxs)("div",{className:"text-center",children:[Object(x.jsx)("span",{className:"text-".concat(d,"-200"),children:"Seat number"}),Object(x.jsx)("h1",{className:"text-5xl font-bold",children:t})]}),Object(x.jsxs)("div",{className:"mt-1 border-t border-".concat(d,"-500 pt-2"),children:[Object(x.jsx)("h4",{className:"text-xs text-".concat(d,"-400"),children:"Full names"}),Object(x.jsxs)("h4",{className:"text-sm font-bold",children:[s.fname," ",s.lname]})]}),!0===n&&Object(x.jsxs)("div",{className:"mt-2",children:[!1===s.stopped?Object(x.jsxs)("button",{onClick:o.bind(f,s.user_id),className:"px-2 text-sm py-1 rounded-md text-gray-900 bg-yellow-300",children:[Object(x.jsx)(m.zb,{className:"inline"})," Warn"]}):Object(x.jsxs)("button",{onClick:i.bind(f,s.user_id),className:"px-2 text-sm py-1 rounded-md text-gray-900 bg-green-400",children:[Object(x.jsx)(m.zb,{className:"inline"})," Condinue"]}),Object(x.jsxs)("button",{onClick:a.bind(f,s.user_id),className:"px-2 text-sm py-1 rounded-md text-white- bg-red-700 ml-1",children:[Object(x.jsx)(m.cb,{className:"inline"})," Stop"]})]})]})},C=s(23),E=s(58);!function(e){e[e.Candidates=0]="Candidates",e[e.Events=1]="Events"}(O||(O={}));var w=function(e){Object(i.a)(s,e);var t=Object(n.a)(s);function s(e){var o;return Object(a.a)(this,s),(o=t.call(this,e)).myPeer=void 0,o.componentDidMount=function(){var e,t=o.props.proctoring.exam,s=t.room_id,a=t.course_id,r=t.position_id;console.log({room_id:s}),o.props.FC_LoadRoomEvents({application_session_id:null===(e=o.props.auth.application_session)||void 0===e?void 0:e._id,exam_id:o.props.proctoring.exam.exam_id,room_id:s},(function(e,t){!0===e?o.setState({events_loading:!1}):o.setState({events_loading:!1,error:{target:"main",msg:t}})})),o.props.proctoring.candidates.length<=0?o.props.FC_GetProctoringRoom({room_id:s,course_id:a,position_id:r},(function(e,t,s){!0===e?(o.setState({loading_room:!1}),o.props.socket.socket.emit(C.b.JOIN_ROOM,{room_id:o.props.proctoring.room.room_id,user_id:o.props.auth.user.user_id,peer_id:""},(function(e){return o.props.FC_SetActiveCandidates(e.room,e.candidates)}))):o.setState({loading_room:!1,error:{target:"all",msg:s}})})):o.props.socket.socket.emit(C.b.UPDATED_ROOM_LIST,o.props.proctoring.room.room_id,(function(e){var t=e.room,s=e.candidates;console.log({candidates:s,room:t}),o.props.FC_SetActiveCandidates(t,s)})),o.props.socket.socket.on(C.b.USER_CONNECTED,(function(e){o.props.FC_SetOneActiveCandidate(e.user_id)})),o.props.socket.socket.on(C.b.USER_DISCONNECTED,(function(e){var t;o.props.FC_CandidateOffline(e),o.props.FC_SaveEvent({application_session_id:null===(t=o.props.auth.application_session)||void 0===t?void 0:t._id,description:"Leave the room",done_by:"System",event_type_id:C.c.CANDIDATE_LEFT_EXAM_EVENT,exam_id:o.props.proctoring.exam.exam_id,position_id:o.props.proctoring.exam.position_id,room_id:o.props.proctoring.room.room_id,time:(new Date).toString(),user_id:e},(function(e,t){!1===e&&o.setState({error:{target:"main",msg:t}})}))})),o.props.socket.socket.on(C.c.CAND_EXAM_EVENT_CLIENT,(function(e){return o.props.FC_CandidateExamEvent(e)}))},o.leaveRoom=function(){o.props.socket.socket.off(C.b.USER_CONNECTED),o.props.socket.socket.off(C.b.USER_DISCONNECTED),o.props.socket.socket.off(C.c.CAND_EXAM_EVENT_CLIENT),o.props.FC_ClearExamToRoomProctoring()},o.startCenterProctoring=function(){},o.blank=function(e){return console.log("clicked")},o.ActiveSIdeTabHandler=function(e){return o.setState({active_side_tab:e})},o.SelectCandidateHandler=function(e){return o.setState({selected_candidate:e})},o.startExamHandler=function(){var e;window.confirm("Are you sure you want to start the exam??")&&(o.props.socket.socket.emit(C.c.START_EXAM_SERVER,{room_id:o.props.proctoring.room.room_id,data:"start exam",description:"The exam started on this room",msg:"The exam started on this room"}),o.props.FC_SaveEvent({application_session_id:null===(e=o.props.auth.application_session)||void 0===e?void 0:e._id,description:"The exam started on this room",done_by:"Administrator",event_type_id:"EXAM STARTED",exam_id:o.props.proctoring.exam.exam_id,position_id:o.props.proctoring.exam.position_id,room_id:o.props.proctoring.room.room_id,time:(new Date).toString(),user_id:o.props.auth.user.user_id},(function(e,t){!1===e&&o.setState({error:{target:"main",msg:t}})})),o.props.FC_ExamStartStop(!0))},o.stopExamHandler=function(){var e;window.confirm("Are you sure you want to stop the exam??")&&(o.props.socket.socket.emit(C.c.STOP_EXAM_SERVER,{room_id:o.props.proctoring.room.room_id,description:"Exam stopped on this room"}),o.props.FC_ExamStartStop(!1),o.props.FC_SaveEvent({application_session_id:null===(e=o.props.auth.application_session)||void 0===e?void 0:e._id,description:"Exam stopped on this room",done_by:"Supervisor",event_type_id:"EXAM_STOPPED",exam_id:o.props.proctoring.exam.exam_id,position_id:o.props.proctoring.exam.position_id,room_id:o.props.proctoring.room.room_id,time:(new Date).toString(),user_id:o.props.auth.user.user_id},(function(e,t){!1===e&&o.setState({error:{target:"main",msg:t}})})))},o.continueHandler=function(e){var t;window.confirm("Alre you sure you want to give this candidate the permition to continue the exam??")&&(o.props.FC_ContinueExam(e),o.props.socket.socket.emit(C.c.CAND_CONTINUE_EXAM_SERVER,{room_id:o.props.proctoring.room.room_id,user_id:e,description:"Allowed a candidate to continue exam"}),o.props.FC_SaveEvent({application_session_id:null===(t=o.props.auth.application_session)||void 0===t?void 0:t._id,description:"Allowed a candidate to continue exam",done_by:"Supervisor",event_type_id:C.c.CAND_CONTINUE_EXAM_CLIENT,exam_id:o.props.proctoring.exam.exam_id,position_id:o.props.proctoring.exam.position_id,room_id:o.props.proctoring.room.room_id,time:(new Date).toString(),user_id:e},(function(e,t,s){!1===e&&o.setState({error:{target:"main",msg:t}})})))},o.stopCandidateHandler=function(e){var t,s=window.prompt("If you want to stop the candidate add the reason");null!==s&&(o.props.socket.socket.emit(C.c.CAND_STOP_EXAM_SERVER,{room_id:o.props.proctoring.room.room_id,user_id:e,msg:s,description:"STOP: ".concat(s),done_by:"Supervisor",event_type_id:C.c.CAND_STOP_EXAM_CLIENT}),o.props.FC_StopCandidate(e),o.props.FC_SaveEvent({application_session_id:null===(t=o.props.auth.application_session)||void 0===t?void 0:t._id,description:"STOP: ".concat(s),done_by:"Supervisor",event_type_id:C.c.CAND_STOP_EXAM_CLIENT,exam_id:o.props.proctoring.exam.exam_id,position_id:o.props.proctoring.exam.position_id,room_id:o.props.proctoring.room.room_id,time:(new Date).toString(),user_id:e},(function(e,t){!1===e&&o.setState({error:{target:"main",msg:t}})})))},o.ejectCandidateHandler=function(e){var t,s=window.prompt("If you want to remove the candidate add the reason");null!==s&&(o.props.socket.socket.emit(C.c.CAND_REMOVE_EXAM_SERVER,{room_id:o.props.proctoring.room.room_id,user_id:e,msg:s,description:"REMOVED: ".concat(s),done_by:"Supervisor"}),o.props.FC_SaveEvent({application_session_id:null===(t=o.props.auth.application_session)||void 0===t?void 0:t._id,description:"REMOVED: ".concat(s),done_by:"Supervisor",event_type_id:C.c.CAND_REMOVE_EXAM_CLIENT,exam_id:o.props.proctoring.exam.exam_id,position_id:o.props.proctoring.exam.position_id,room_id:o.props.proctoring.room.room_id,time:(new Date).toString(),user_id:e},(function(t,s){!1===t?o.setState({error:{target:"main",msg:s}}):o.props.FC_CandidateRemoveExam(e)})))},o.warnCandidateHandler=function(e){var t,s=window.prompt("If you want to warn this candidate, add the reason");null!==s&&(o.props.socket.socket.emit(C.c.CAND_WARNING_EXAM_SERVER,{room_id:o.props.proctoring.room.room_id,user_id:e,msg:"WARNING: ".concat(s),description:"WARNING: ".concat(s)}),o.props.FC_SaveEvent({application_session_id:null===(t=o.props.auth.application_session)||void 0===t?void 0:t._id,description:"WARNING: ".concat(s),done_by:"Supervisor",event_type_id:C.c.CAND_WARNING_EXAM_SERVER,exam_id:o.props.proctoring.exam.exam_id,position_id:o.props.proctoring.exam.position_id,room_id:o.props.proctoring.room.room_id,time:(new Date).toString(),user_id:e},(function(e,t){!1===e&&o.setState({error:{target:"main",msg:t}})})))},o.restartCandidateHandler=function(e){var t,s=window.prompt("Restart this candidate's exam, reason");null!==s&&(console.log("RESTART EXAM CANDIDATE"),o.props.socket.socket.emit(C.c.CAND_RESTART_EXAM_SERVER,{room_id:o.props.proctoring.room.room_id,user_id:e,msg:"RESTART: ".concat(s),description:"RESTART: ".concat(s)}),o.props.FC_SaveEvent({application_session_id:null===(t=o.props.auth.application_session)||void 0===t?void 0:t._id,description:"RESTART: ".concat(s),done_by:"Supervisor",event_type_id:C.c.CAND_RESTART_EXAM_SERVER,exam_id:o.props.proctoring.exam.exam_id,position_id:o.props.proctoring.exam.position_id,room_id:o.props.proctoring.room.room_id,time:(new Date).toString(),user_id:e},(function(e,t){!1===e&&o.setState({error:{target:"main",msg:t}})})))},o.focusToggle=function(){return o.setState((function(e){return{focus_mode:!e.focus_mode}}))},o.state={focus_mode:!1,loading_room:!0,loading:!1,events:[],active_side_tab:O.Events,selected_candidate:null,online_room:!1,online_candidates:[],start_exam:!1,error:{msg:"",target:""},events_loading:!0},o}return Object(r.a)(s,[{key:"render",value:function(){var e=this,t=this.props.proctoring.candidates.filter((function(e){return!0===e.active})),s=this.props.proctoring.candidates.filter((function(e){return!1===e.active}));return Object(x.jsxs)("div",{className:"".concat(!1===this.state.focus_mode?" p-1":"fixed right-0 left-0 bottom-0 top-0 z-50 overflow-y-auto"," transition-all ease-in-out"),children:["main"===this.state.error.target&&Object(x.jsx)("div",{className:"animate__animated animate__slideInDown p-2 rounded-md animate__faster text-center text-sm bg-red-200 text-red-900",onClick:function(){return e.setState({error:{target:"",msg:""}})},children:this.state.error.msg}),Object(x.jsx)(j,{focusToggle:this.focusToggle,focus_mode:this.state.focus_mode,course_title:this.props.proctoring.exam.course_name,post_title:this.props.proctoring.exam.position_title,duration:this.props.proctoring.exam.duration+"H",started_at:"12:00 AM",end_at:"14:00 PM",exam_start:this.props.proctoring.exam.start_exam,startExamHandler:this.startExamHandler,stopExamHandler:this.stopExamHandler,leaveRoom:this.leaveRoom}),Object(x.jsx)("div",{className:"".concat(!0===this.state.focus_mode?"proctoring-body-contents text-white":"","  h-screen"),children:Object(x.jsxs)("div",{className:"lg:grid lg:grid-flow-col gap-4",children:[Object(x.jsx)("div",{className:"lg:col-span-4 p-2 pt-3 lg:h-screen overflow-y-auto",children:!1===this.props.proctoring.candidate_loaded?Object(x.jsxs)("div",{className:"p-8 text-center animate__animated animate__zoomIn",children:[Object(x.jsx)(E.a,{}),Object(x.jsx)("h2",{className:"text-xl font-bold text-gray-400",children:"Loading candidates"})]}):Object(x.jsxs)("div",{className:"animate__animated animate__zoomI",children:[Object(x.jsxs)("div",{className:"".concat(!0===this.state.focus_mode?"bg-blue-900 bg-opacity-30":"bg-gray-100"," rounded-md mb-4"),children:[Object(x.jsxs)("h3",{className:"text-2xl font-bold  pt-1.5 pb-1 px-2 rounded flex items-center ".concat(!0===this.state.focus_mode?"text-blue-100 bg-blue-900":"text-white bg-gray-500"," pb-1 mb-1"),children:[Object(x.jsx)("span",{className:"flex-1",children:"Non active candidates "}),Object(x.jsx)("span",{className:"inline-block mr-1 p-0.5 bg-green-700 text-white text-md py-0 px-2 rounded-full",children:t.length})]}),0===t.length?Object(x.jsxs)("div",{className:"py-8 text-center w-full",children:[Object(x.jsx)(m.P,{className:"inline-block text-6xl"}),Object(x.jsx)("h3",{className:"text-center text-2xl font-bold",children:"No candidate"}),Object(x.jsx)("h3",{className:"text-center",children:"Once candidates start to join they will appear here"})]}):Object(x.jsx)("div",{className:"grid grid-flow-row sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-4 2xl:grid-cols-5 gap-4 p-2",children:t.map((function(t,s){return Object(x.jsx)(y,{focus_mode:e.state.focus_mode,seat_number:s+1,candidate:t,stopHandler:e.stopCandidateHandler,warningHandler:e.warnCandidateHandler,detailsHandler:e.SelectCandidateHandler,continueHandler:e.continueHandler,exam_started:e.props.proctoring.exam.start_exam},s)}))})]}),0!==s.length&&Object(x.jsxs)("div",{className:"".concat(!0===this.state.focus_mode?"bg-blue-900 bg-opacity-30":"bg-gray-100"," rounded-md"),children:[Object(x.jsxs)("h3",{className:"text-2xl font-bold  pt-1.5 pb-1 px-2 rounded flex items-center ".concat(!0===this.state.focus_mode?"text-blue-100 bg-blue-900":"text-white bg-gray-500"," pb-1 mb-1"),children:[Object(x.jsx)("span",{className:"flex-1",children:"Non active candidates "}),Object(x.jsx)("span",{className:"inline-block mr-1 p-0.5 bg-green-700 text-white text-md py-0 px-2 rounded-full",children:s.length})]}),Object(x.jsx)("div",{className:"mt-3 mx-2 pb-2",children:Object(x.jsx)(N,{candidates:s,clickHandler:this.SelectCandidateHandler,show_title:!1,focus_mode:this.state.focus_mode})})]})]})}),Object(x.jsx)("div",{className:"".concat(!0===this.state.focus_mode?"proctoring-side-section border-blue-500  border-opacity-30":"lg:bg-gray-100 "," p-2  col-span-1 w-full transition-all ease-in-out  h-screen overflow-y-auto  lg:border-l "),children:null===this.state.selected_candidate?Object(x.jsxs)(d.a.Fragment,{children:[Object(x.jsx)(h,{total:43,active:43,done:43,left:43,focus_mode:this.state.focus_mode}),Object(x.jsxs)("div",{className:"my-2 p-1 rounded-md bg-blue-800 bg-opacity-60 grid grid-col-2 grid-flow-col gap-1",children:[Object(x.jsx)("button",{onClick:this.ActiveSIdeTabHandler.bind(this,O.Events),className:"btn rounded-md bg-blue-700 text-blue-100 ".concat(this.state.active_side_tab===O.Events?"border-2 border-blue-400":"bg-blue-800 bg-opacity-60"),children:"Event list"}),Object(x.jsx)("button",{onClick:this.ActiveSIdeTabHandler.bind(this,O.Candidates),className:"btn rounded-md bg-blue-700 text-blue-100 ".concat(this.state.active_side_tab===O.Candidates?"border-2 border-blue-400":"bg-blue-800 bg-opacity-60"),children:"Candidates"})]}),this.state.active_side_tab===O.Events?Object(x.jsx)(_,{candidates:this.props.proctoring.candidates,events:this.props.proctoring.events,focus_mode:this.state.focus_mode,loading:this.state.events_loading}):Object(x.jsx)(N,{candidates:this.props.proctoring.candidates,clickHandler:this.SelectCandidateHandler,focus_mode:this.state.focus_mode,show_title:!1})]}):Object(x.jsx)(v,{candidate:this.props.proctoring.candidates.find((function(t){return t.user_id===e.state.selected_candidate})),events:this.props.proctoring.events.filter((function(t){return t.user_id===e.state.selected_candidate})),removeInExam:this.ejectCandidateHandler,chatHandler:this.blank,micHandler:this.blank,focusHandler:this.blank,stopHandler:this.stopCandidateHandler,restartHandler:this.restartCandidateHandler,warnHandler:this.warnCandidateHandler,closeHandler:function(){return e.SelectCandidateHandler(null)},home_proctoring:!1,exam_started:this.props.proctoring.exam.start_exam,focus_mode:this.state.focus_mode})})]})})]})}}]),s}(d.a.Component),S=Object(p.b)((function(e){return{socket:e.socket,auth:e.auth,proctoring:e.proctoring}}),{FC_GetProctoringRoom:b.A,FC_SetActiveCandidates:b.P,FC_SetOneActiveCandidate:b.Q,FC_CandidateOffline:b.l,FC_ExamStartStop:b.u,FC_ContinueExam:b.r,FC_StopCandidate:b.R,FC_CandidateExamEvent:b.k,FC_ClearExamToRoomProctoring:b.q,FC_SaveEvent:b.O,FC_LoadRoomEvents:b.F,FC_CandidateRemoveExam:b.m})(w),k=function(e){Object(i.a)(s,e);var t=Object(n.a)(s);function s(e){var o;return Object(a.a)(this,s),(o=t.call(this,e)).componentDidMount=function(){o.props.auth.user_access.room_id.length>=3&&""===o.props.proctoring.room.room_id&&o.props.FC_RoomDetails(o.props.auth.user_access.room_id,(function(e,t){var s;!0===e?(console.log({session:o.props.auth.application_session}),o.props.auth.application_session._id.length>=1?o.props.FC_ExamsDetailsData(null===(s=o.props.auth.application_session)||void 0===s?void 0:s._id,(function(e,t){!1===e&&o.setState({exams_error:!0,exams_error_msg:t})})):o.setState({error:!0,errorMsg:"No application session found"})):o.setState({error:!0,errorMsg:t})}))},o.state={error:!1,errorMsg:"",exams_error:!1,exams_error_msg:""},o}return Object(r.a)(s,[{key:"render",value:function(){var e=this;if(!0===this.state.error)return Object(x.jsx)("div",{className:"mt-4",children:Object(x.jsxs)("div",{className:"p-5 bg-red-100 rounded-md mx-auto text-center text-red-900 animate__animated animate__bounceIn",children:[Object(x.jsx)("h1",{className:"text-3xl font-bold",children:"Failed do load data"}),Object(x.jsx)("p",{children:this.state.errorMsg})]})});if(!1===this.state.error&&!1===this.props.proctoring.room.loaded)return Object(x.jsx)("div",{className:"m-5 text-center",children:Object(x.jsx)("h5",{className:"text-gray-400 animate__animated animate__fadeIn animate__infinite text-xl",children:"Loading room details"})});var t=this.props.proctoring.room,s=t.room_number,o=t.center_name,a=t.district_name,r=t.province_name;return""!==this.props.proctoring.exam.course_id&&""!==this.props.proctoring.exam.position_id?Object(x.jsx)(S,{}):Object(x.jsx)(c.Fragment,{children:Object(x.jsxs)("div",{className:"mr-2",children:[Object(x.jsxs)("div",{className:"p-5 bg-white rounded-b-md ",children:[Object(x.jsx)("h2",{className:"text-2xl text-gray-600 font-bold text-center border-b pb-2",children:"Room details"}),Object(x.jsxs)("div",{className:"flex flex-col md:flex-row",children:[Object(x.jsxs)("div",{className:"flex flex-1 items-center",children:[Object(x.jsx)("div",{className:"p-4",children:Object(x.jsx)(m.U,{className:"text-4xl"})}),Object(x.jsxs)("div",{className:"p-2 pt-3 flex-1",children:[Object(x.jsxs)("div",{className:"mb-1",children:[Object(x.jsx)("span",{className:"text-gray-400",children:"Province:"})," ",Object(x.jsxs)("b",{children:[" ",r]})]}),Object(x.jsxs)("div",{className:"mb-1",children:[Object(x.jsx)("span",{className:"text-gray-400",children:"District:"})," ",Object(x.jsxs)("b",{children:[" ",a]})]})]})]}),Object(x.jsxs)("div",{className:"flex flex-1 items-center",children:[Object(x.jsx)("div",{className:"p-4",children:Object(x.jsx)(l.i,{className:"text-4xl"})}),Object(x.jsxs)("div",{className:"p-2 flex-1",children:[Object(x.jsxs)("div",{className:"mb-1",children:[Object(x.jsx)("span",{className:"text-gray-400",children:"Center name:"})," ",Object(x.jsxs)("b",{children:[" ",o]})]}),Object(x.jsxs)("div",{className:"mb-1",children:[Object(x.jsx)("span",{className:"text-gray-400",children:"Room Number:"})," ",Object(x.jsxs)("b",{children:[" ",s]})]})]})]})]})," "]}),Object(x.jsx)("h2",{className:"mt-5 text-2xl font-bold text-gray-500",children:"Exams on this room"}),Object(x.jsx)("div",{className:"mt-2 p-2 bg-white rounded-md",children:this.props.proctoring.room_exams.length<=0?Object(x.jsx)("div",{className:"p-5 text-center",children:"No exams assigned to this room"}):Object(x.jsxs)("table",{className:"w-full text-left",children:[Object(x.jsx)("thead",{className:"bg-gray-100 rounded-md",children:Object(x.jsxs)("tr",{children:[Object(x.jsx)("th",{className:"p-2",children:"#"}),Object(x.jsx)("th",{className:"p-2",children:"Course"}),Object(x.jsx)("th",{className:"p-2",children:"Position"}),Object(x.jsx)("th",{className:"p-2",children:"Code"}),Object(x.jsx)("th",{className:"p-2",children:"Date"}),Object(x.jsx)("th",{className:"p-2"})]})}),Object(x.jsx)("tbody",{children:this.props.proctoring.room_exams.map((function(t,s){var o=e.props.proctoring.exams_list.exams.find((function(e){return e.course===t.course_id}));return Object(x.jsxs)("tr",{className:"p-2 border-t group hover:bg-blue-50",children:[Object(x.jsx)("td",{className:"p-2 text-gray-400",children:s+1}),Object(x.jsx)("td",{className:"p-2 font-bold",children:t.course_name}),Object(x.jsx)("td",{className:"p-2",children:Object(x.jsx)("span",{className:"p-1 text-sm bg-yellow-100 font-bold text-yellow-900 rounded",children:t.position_title})}),Object(x.jsx)("td",{className:"p-2",children:t.course_code}),Object(x.jsx)("td",{className:"p-2 text-sm",children:!1===e.state.error&&!1===e.props.proctoring.exams_list.loaded?Object(x.jsx)("span",{className:"text-blue-500 animate__animated animate__fadeIn animate__infinite",children:"Loading..."}):void 0===o?"Not found":o.exam_date}),Object(x.jsx)("td",{className:"p-2 text-right",children:void 0!==o&&void 0!==o&&Object(x.jsxs)(c.Fragment,{children:[t.course_id===e.props.proctoring.exam.course_id&&t.position_id===e.props.proctoring.exam.position_id&&Object(x.jsx)("button",{className:" group-hover:bg-red-500 py-1 px-3 rounded text-red-500 group-hover:text-white bg-red-100",onClick:function(){return window.confirm("Are you sure you want to exist the room")&&e.props.FC_ClearExamToRoomProctoring()},children:"Leave Room"}),""===e.props.proctoring.exam.room_id&&Object(x.jsx)("button",{onClick:function(){void 0!==o&&void 0!==o&&null!==t&&void 0!==t&&e.props.FC_LoadExamToRoomProctoring({video_support:!1,start_exam:!1,start_time:null===o||void 0===o?void 0:o.start_time,end_time:"",exam_done:!1,period_id:e.props.auth.application_session._id,exam_status:null===o||void 0===o?void 0:o.exam_status,exam_date:null===o||void 0===o?void 0:o.exam_date,duration:null===o||void 0===o?void 0:o.duration,position_id:t.position_id,position_title:t.position_title,course_id:t.course_id,course_code:t.course_code,course_name:t.course_name,room_id:e.props.proctoring.room.room_id,exam_id:o.id})},className:" group-hover:bg-blue-500 py-1 px-3 rounded text-blue-500 group-hover:text-white bg-blue-100",children:"Open"})]})})]},s)}))})]})})]})})}}]),s}(d.a.Component),R=Object(p.b)((function(e){return{auth:e.auth,proctoring:e.proctoring}}),{FC_RoomDetails:b.N,FC_ExamsDetailsData:b.v,FC_LoadExamToRoomProctoring:b.E,FC_ClearExamToRoomProctoring:b.q})(k)}}]);
//# sourceMappingURL=43.abfd2b73.chunk.js.map