(this["webpackJsonpreact-redux-typescript-advance"]=this["webpackJsonpreact-redux-typescript-advance"]||[]).push([[35],{178:function(e,t,s){"use strict";s.d(t,"c",(function(){return c})),s.d(t,"a",(function(){return l})),s.d(t,"b",(function(){return a}));var c,l,a,r=s(9),n=s(1);!function(e){e.default="default",e.primary="primary",e.secondary="secondary",e.danger="danger",e.success="success",e.warning="warning"}(c||(c={})),function(e){e.none="top-0",e.small="top-28",e.medium="top-1/3",e.large="top-1/2",e.extra="top-2/3"}(l||(l={})),function(e){e.small="max-w-sm",e.medium="max-w-screen-sm",e.large="max-w-screen-md",e.extraLarge="max-w-screen-lg",e.maxWidth="max-w-screen h-full"}(a||(a={}));t.d=function(e){var t,s=e.title,i=e.backDrop,o=e.theme,d=e.close,m=e.backDropClose,b=e.widthSizeClass,x=e.displayClose,j=e.padding,u=void 0===j?{title:!0,body:!0,footer:!0}:j;switch(o){case c.primary:t="blue-500";break;case c.secondary:t="gray-300";break;case c.danger:t="red-500";break;case c.success:t="green-500";break;case c.warning:t="yellow-500";break;default:t="white"}return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("div",{onClick:function(){return m&&d()},className:"animate__animated animate__fadeIn animate__faster modal fixed bg-black bg-opacity-".concat(!0===i?"60":"0")}),Object(n.jsxs)("div",{className:"fixed items-center justify-items-center ".concat(void 0===e.marginTop?l.none:e.marginTop," left-0 right-0 bottom-0 bg-white rounded shadow-xl self-center ").concat(b," animate__animated ").concat(void 0!==e.marginTop&&e.marginTop!==l.none?"animate__fadeInUp":"animate__zoomIn"," animate__faster"),style:{width:"100%",maxHeight:"99vh",height:"".concat(b===a.maxWidth?void 0===e.marginTop?"100%":"unset":"fit-content"),overflowY:"auto",margin:"auto",zIndex:99999999},children:[Object(n.jsxs)("div",{className:"flex justify-between bg-".concat(t," ").concat(!0===u.title?"py-4 px-4":""," rounded-t text-").concat(o===c.default||o===c.secondary?"black":"white"),children:[s&&""!==s?Object(n.jsx)("h4",{className:"text-lg font-bold ",children:s}):Object(n.jsx)("div",{}),!1===x?"":Object(n.jsx)("div",{className:"hover:text-red-600 hover:bg-red-100 rounded-full p-1 h-8 w-8",children:Object(n.jsx)(r.x,{className:"cursor-pointer font-extrabold text-2xl",onClick:function(){return d()}})})]}),Object(n.jsx)("div",{className:"space-x-3 ".concat(!0===u.body?"py-4 px-4":""),children:Object(n.jsx)("div",{children:""!==e.children?e.children:""})}),void 0!==e.footer&&""!==e.footer?Object(n.jsx)("div",{className:"flex float-right ".concat(!0===u.footer?"py-4 px-4":""),children:e.footer}):""]})]})}},181:function(e,t,s){"use strict";var c=s(25),l=s(4),a=s(182),r=s(9),n=s(1);t.a=function(e){var t,s,i=e.rows,o=e.columns,d=e.hideColumns,m=void 0!==d&&d,b=e.pagination,x=void 0!==b&&b,j=e.search,u=void 0!==j&&j,h=e.tableSize,f=void 0===h?"w-full":h,p=e.tableClass,g=e.tableId,O=void 0===g?"myTable":g,v=e.rounded,y=void 0!==v&&v,N=e.searchBG,w=void 0===N?"bg-gray-200":N,_=e.thColor,k=void 0===_?"blue":_,R=e.loading,T=void 0!==R&&R;O="myTable"===O?function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t="",s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",c=s.length,l=0;l<e;l++)t+=s.charAt(Math.floor(Math.random()*c));return t}():O;var C=Object(l.useState)(0),A=Object(c.a)(C,2),S=A[0],q=A[1],M=Object(l.useState)(1),D=Object(c.a)(M,2),E=D[0],B=D[1],U=Object(l.useState)(1),L=Object(c.a)(U,2),I=L[0],F=L[1],H=Object(l.useState)(),z=Object(c.a)(H,2),P=z[0],Y=z[1],G=Object(l.useState)(10),V=Object(c.a)(G,2),W=V[0],J=V[1],K=Object(l.useState)(0),Q=Object(c.a)(K,2),X=Q[0],Z=Q[1],$=Object(l.useState)(0),ee=Object(c.a)($,2),te=ee[0],se=ee[1];Object(l.useEffect)((function(){x&&ce()}));var ce=function(){t=document.getElementById(O),s=t.getElementsByTagName("tr"),q(s.length),B(Math.ceil(S/W)),Z((I-1)*W),se(Math.min(X+W-1,S-1));var e=Array.from(Array(E+1-1).keys()).map((function(e){return 1+e}));P&&e.length===P.length||Y(e);for(var c=0;c<s.length;c++)s[c].style.display=c>=X&&c<=te?"":"none"};return Object(n.jsxs)("div",{className:"".concat(f),children:[u&&Object(n.jsx)("div",{className:"".concat(w," w-full mb-2"),children:u&&Object(n.jsxs)("div",{className:"bg-white rounded flex items-center w-full p-2 border-2 border-gray-500",children:[Object(n.jsx)(r.zb,{className:"h-5 w-5 fill-current text-gray-400"}),Object(n.jsx)("input",{type:"search",placeholder:"search",onChange:function(e){return function(e,s){var c,l,a,r,n;for("field"===s&&"all"===e&&(e=""),c=e.toLowerCase(),l=(t=document.getElementById(O)).getElementsByTagName("tr"),r=0;r<l.length;r++)for(n=0;n<o.length;n++)if(a=l[r].getElementsByTagName("td")[n]){if((a.textContent||a.innerText).toLowerCase().indexOf(c)>-1){l[r].style.display="";break}l[r].style.display="none"}}(e.target.value)},className:"w-full h-6 pl-4 text-sm outline-none focus:outline-none bg-transparent",disabled:T}),x&&Object(n.jsx)("div",{className:"select",children:Object(n.jsxs)("select",{className:"text-base outline-none focus:outline-none bg-transparent",onChange:function(e){return J(Number(e.target.value))},disabled:T,children:[Object(n.jsx)("option",{value:"10",children:"10"}),Object(n.jsx)("option",{value:"25",children:"25"}),Object(n.jsx)("option",{value:"50",children:"50"}),Object(n.jsx)("option",{value:"100",children:"100"})]})})]})}),Object(n.jsxs)("table",{className:p||"w-full shadow ".concat(y&&"sm:rounded-lg"," table-auto order-table max-w-full"),id:O,children:[!m&&Object(n.jsx)("thead",{className:"bg-white border-b-2 border-gray-300 text-gray-600 font-bold text-base",children:Object(n.jsx)("tr",{className:"text-left tracking-wide bg-".concat(k,"-100 border-b-2 border-").concat(k,"-500 text-").concat(k,"-600 overflow-hidden"),children:o.map((function(e,t){return Object(n.jsx)("th",{className:"".concat(e.padding," text-").concat(e.alignText," px-3 py-2 ").concat(e.isSortAllowed&&"cursor-pointer"),onClick:function(){return e.isSortAllowed&&function(e){var t,s,c,l,a,r,n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"asc",d=0;if(c=!0,t=document.getElementById(e))for(;c;){for(c=!1,s=t.rows,l=1;l<s.length-1;l++)if(n=!1,a=s[l].getElementsByTagName("TD")[i],r=s[l+1].getElementsByTagName("TD")[i],"asc"===o&&a&&r){if(a.innerHTML.toLowerCase()>r.innerHTML.toLowerCase()){n=!0;break}}else if("desc"===o&&a&&r&&a.innerHTML.toLowerCase()<r.innerHTML.toLowerCase()){n=!0;break}n&&s[l].parentNode?(s[l].parentNode.insertBefore(s[l+1],s[l]),c=!0,d++):0===d&&"asc"===o&&(o="desc",c=!0)}}(O,t)},children:Object(n.jsxs)("div",{className:"flex items-center gap-1",children:[e.columnTitle,e.isSortAllowed&&Object(n.jsx)(a.h,{})]})},t)}))})}),Object(n.jsx)("tbody",{id:"table-data",className:"bg-white text-black text-base",children:i()})]}),x&&Object(n.jsxs)("div",{className:"sm:flex-1 sm:flex sm:items-center sm:justify-between mt-4 work-sans",children:[Object(n.jsx)("div",{children:Object(n.jsxs)("span",{className:"text-xs xs:text-sm text-gray-900",children:["Showing 1 to ",W," of ",S-1," Entries"]})}),Object(n.jsx)("div",{children:Object(n.jsxs)("nav",{className:"inline-flex shadow-sm",children:[Object(n.jsx)("div",{children:Object(n.jsx)("button",{type:"button",className:"inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 text-sm font-medium text-gray-500 ".concat(1!==I&&"bg-white"),"aria-label":"Previous",disabled:1===I||T,onClick:function(){return F(I-1)},children:Object(n.jsx)(r.eb,{className:"h-5 w-5"})})}),Object(n.jsx)("div",{children:P&&P.map((function(e,t){return Object(n.jsx)("button",{className:"-ml-px inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium text-gray-700 ".concat(e!==I?"bg-white":"bg-gray-100 cursor-default"),disabled:e===I||T,onClick:function(){return F(e)},children:e},t)}))}),Object(n.jsx)("div",{children:Object(n.jsx)("button",{type:"button",className:"inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 text-sm leading-5 font-medium text-gray-500 ".concat(I!==E&&"bg-white"),"aria-label":"Next",disabled:I===E||T,onClick:function(){return F(I+1)},children:Object(n.jsx)(r.fb,{className:"h-5 w-5"})})})]})})]})]})}},190:function(e,t,s){"use strict";s.d(t,"b",(function(){return j})),s.d(t,"a",(function(){return u})),s.d(t,"d",(function(){return h})),s.d(t,"c",(function(){return f}));var c=s(20),l=s(21),a=s(23),r=s(22),n=s(4),i=s.n(n),o=s(19),d=s(3),m=s(9),b=s(1),x=function(e){Object(a.a)(s,e);var t=Object(r.a)(s);function s(e){var l;return Object(c.a)(this,s),(l=t.call(this,e)).componentDidMount=function(){return l.props.PageHasSubNav(!0)},l.componentWillUnmount=function(){return l.props.PageHasSubNav(!1)},l.state={loading:!1},l}return Object(l.a)(s,[{key:"render",value:function(){if(!1===this.props.auth.isAuthenticated)return null;var e=this.props.system.navigation;return Object(b.jsx)("div",{className:"fixed w-48 p-1 pr-2 pl-6 text-gray-700 bg-white ".concat(!0===e?"lg:left-16  left-16":" -left-72 lg:left-16","  top-0 bottom-0 pt-20 z-30 shadow-lg  transition-all duration-500 ease-in-out overflow-y-auto"),children:this.props.children})}}]),s}(i.a.Component),j=Object(o.b)((function(e){return{auth:e.auth,system:e.system}}),{NavToogle:d.fb,PageHasSubNav:d.gb})(x),u=function(e){var t=e.title,s=void 0===t?"":t,c=e.icon,l=void 0===c?m.m:c,a=e.active,r=void 0!==a&&a,n=e.count,i=void 0===n?0:n,o=l;return Object(b.jsxs)("section",{className:"".concat(!0===r?"bg-blue-500 text-white font-bold":"bg-blue-100 text-blue-800"," mb-1 hover:font-bold py-1 hover:bg-blue-400 hover:text-white --font-bold  px-2 rounded-md flex cursor-pointer items-center"),children:[Object(b.jsxs)("section",{className:"flex-1",children:[Object(b.jsx)(o,{className:"inline-block mr-1 text-xs"}),Object(b.jsx)("span",{children:s})]}),i>0?Object(b.jsx)("span",{className:"px-0.5 my-1 text-xs bg-blue-600 text-white rounded-full",children:i}):null]})},h=function(e){var t=e.children;return Object(b.jsx)("div",{className:"ml-3 overflow-y-auto border-l-2 border-blue-200 -mt-1 pt-2 mb-2 pl-1 cursor-pointer",children:t})},f=function(e){var t=e.title,s=void 0===t?"":t,c=e.icon,l=void 0===c?m.m:c,a=e.active,r=void 0!==a&&a,n=e.count,i=void 0===n?0:n,o=l;return Object(b.jsxs)("div",{className:"animate__animated animate__zoomIn animate__faster ".concat(!0===r?"bg-blue-500 text-white font-bold":" text-blue-800"," text-blue-800 bg-blue-200 rounded-md px-1 mb-1 flex items-center py-1 font-bold"),children:[Object(b.jsx)(o,{className:"inline-block mr-0.1 text-xs ".concat(!0===r?"text-white":"")}),Object(b.jsx)("span",{className:"inline-block pl-1 ".concat(!0===r?"text-white":""),children:s}),i>=1?Object(b.jsx)("span",{className:"text-sm fint-bold ".concat(!0===r?"text-white":""),children:i}):null]})}},791:function(e,t,s){"use strict";s.r(t),s.d(t,"AccessManagement",(function(){return T}));var c,l=s(25),a=s(4),r=s(9),n=s(19),i=s(5),o=s.n(i),d=s(7),m=s(181),b=s(178),x=s(78),j=s(215),u=s(1),h=function(e){var t=e.handleSubmit,s=(e.openModal,e.setRoleTitle),c=e.roleTitle,l=e.roleRequirement,a=e.setRequirement,r=e.error,n=e.setError;return Object(u.jsx)("div",{children:Object(u.jsxs)("form",{className:"max-w-xl mx-auto",onSubmit:function(e){return t(e,1)},children:[Object(u.jsx)("h1",{className:"text-3xl font-semibold mt-3 mb-5 text-center",children:"Basic Information"}),Object(u.jsx)("div",{className:"-mx-3 md:flex mb-6",children:Object(u.jsxs)("div",{className:"md:w-full px-3",children:[Object(u.jsx)("label",{htmlFor:"role-title",className:"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2",children:"Role"}),Object(u.jsx)("input",{type:"text",className:"text-left input-white w-20 inline-block border-2 ".concat("role-title"===r.element?"border-red-500":"border-gray-500"),value:c,placeholder:"Role title",onChange:function(e){s(e.target.value),n({element:"",msg:""})}}),Object(u.jsx)("p",{className:"text-red-700 mt-1 ml-1 text-sm italic ".concat("role-title"!==r.element&&"hidden"),children:r.msg})]})}),Object(u.jsxs)("div",{className:"flex flex-col mb-5",children:[Object(u.jsx)("label",{children:"Filed"}),Object(u.jsx)("span",{className:"text-gray-500 text-sm",children:"Required Field for this role"}),Object(u.jsxs)("div",{className:"grid grid-flow-row grid-cols-4 grid-rows- gap-4",children:[Object(u.jsxs)("label",{className:"inline-flex items-center mt-3",children:[Object(u.jsx)("input",{type:"radio",name:"field",className:"form-radio h-5 w-5 text-gray-600",onChange:function(){a("none"),n({element:"",msg:""})},checked:"none"===l}),Object(u.jsx)("span",{className:"ml-2 text-gray-700",children:"None"})]}),Object(u.jsxs)("label",{className:"inline-flex items-center mt-3",children:[Object(u.jsx)("input",{type:"radio",name:"field",className:"form-radio h-5 w-5 text-gray-600",onChange:function(){return a("district")},checked:"district"===l}),Object(u.jsx)("span",{className:"ml-2 text-gray-700",children:"District"})]}),Object(u.jsxs)("label",{className:"inline-flex items-center mt-3",children:[Object(u.jsx)("input",{type:"radio",name:"field",className:"form-radio h-5 w-5 text-gray-600",onChange:function(){return a("school")},checked:"school"===l}),Object(u.jsx)("span",{className:"ml-2 text-gray-700",children:"School"})]}),Object(u.jsxs)("label",{className:"inline-flex items-center mt-3",children:[Object(u.jsx)("input",{type:"radio",name:"field",className:"form-radio h-5 w-5 text-gray-600",onChange:function(){return a("room")},checked:"room"===l}),Object(u.jsx)("span",{className:"ml-2 text-gray-700",children:"Room"})]})]}),Object(u.jsx)("p",{className:"text-red-700 mt-1 ml-1 text-xs italic ".concat("role-field"!==r.element&&"hidden"),children:r.msg})]}),Object(u.jsx)("div",{className:"flex justify-end gap-5 mt-4",children:Object(u.jsx)("button",{className:"btn bg-primary text-white hover:bg-blue-600 focus:outline-none",type:"submit",children:"Save & Continue"})})]})})},f=s(11),p=s(222),g=function(e){var t=e.handleSubmit,s=e.setAccessToRole,c=e.accessToRole,l=e.roleTitle,a=e.error,n=e.setError,i=e.loadingRequest,o=function(e,t,l){var a=Object(f.a)(c);switch(t){case"create":a[e].permitted.create=l;break;case"view":a[e].permitted.view=l;break;case"update":a[e].permitted.update=l;break;default:a[e].permitted.delete=l}s(a)};return Object(u.jsx)("div",{children:Object(u.jsx)("form",{className:"max-w-xl mx-auto",onSubmit:function(e){return t(e,2)},children:Object(u.jsxs)("div",{className:"mb-5",children:[Object(u.jsxs)("div",{className:"mb-5 mt-3",children:[Object(u.jsx)("h1",{className:"text-3xl font-semibold text-center",children:"Access Permissions Settings"}),Object(u.jsxs)("div",{className:"flex items-center gap-2 mt-1 justify-center",children:[Object(u.jsx)(r.g,{className:"w-6 h-6"}),Object(u.jsx)("h1",{className:"text-xl font-semibold text-gray-600 text-center",children:l})]})]}),Object(u.jsx)("div",{className:"md:flex mb-3",children:Object(u.jsxs)("div",{className:"grid grid-cols-2 grid-rows-2 gap-4",children:[Object(u.jsxs)("div",{className:"inline-flex gap-2 items-center",children:[Object(u.jsx)(p.a,{className:"w-12 h-12 text-gray-600"}),Object(u.jsxs)("div",{className:"flex flex-col",children:[Object(u.jsx)("h3",{className:"font-semibold text-xl",children:"Create"}),Object(u.jsx)("span",{className:"text-gray-600 text-sm md:pr-1",children:"This permission gives the user the ability to create"})]})]}),Object(u.jsxs)("div",{className:"inline-flex gap-2 items-center",children:[Object(u.jsx)(r.tb,{className:"w-12 h-12 text-gray-600"}),Object(u.jsxs)("div",{className:"flex flex-col",children:[Object(u.jsx)("h3",{className:"font-semibold text-xl",children:"View"}),Object(u.jsx)("span",{className:"text-gray-600 text-sm md:pr-1",children:"This permission gives the user the ability to view"})]})]}),Object(u.jsxs)("div",{className:"inline-flex gap-2 items-center",children:[Object(u.jsx)(r.D,{className:"w-12 h-12 text-gray-600"}),Object(u.jsxs)("div",{className:"flex flex-col",children:[Object(u.jsx)("h3",{className:"font-semibold text-xl",children:"Update"}),Object(u.jsx)("span",{className:"text-gray-600 text-sm md:pr-1",children:"This permission gives the user the ability to update"})]})]}),Object(u.jsxs)("div",{className:"inline-flex gap-2 items-center",children:[Object(u.jsx)(r.A,{className:"w-12 h-12 text-gray-600"}),Object(u.jsxs)("div",{className:"flex flex-col",children:[Object(u.jsx)("h3",{className:"font-semibold text-xl",children:"Delete"}),Object(u.jsx)("span",{className:"text-gray-600 text-sm md:pr-1",children:"This permission gives the user the ability to delete"})]})]})]})}),Object(u.jsx)("p",{className:"text-red-700 mt-1 ml-1 text-base italic ".concat("role-access"!==a.element&&"hidden"),children:a.msg}),Object(u.jsx)(m.a,{columns:[{columnTitle:"Access Name",alignText:"left",padding:"p-3"},{columnTitle:"Create",alignText:"left"},{columnTitle:"View",alignText:"left"},{columnTitle:"Update",alignText:"left"},{columnTitle:"Delete",alignText:"left"}],rows:function(){return console.log({accessToRole:c}),c.map((function(e,t){return Object(u.jsxs)("tr",{className:"accordion border-b border-grey-light hover:bg-gray-100",children:[Object(u.jsx)("td",{className:"text-gray-800 text-base font-medium text-left px-3",children:e.task}),Object(u.jsx)("td",{className:"py-1 px-3",children:Object(u.jsx)("input",{type:"checkbox",className:"form-checkbox h-5 w-5 text-gray-600",onChange:function(){o(t,"create",!e.permitted.create),n({element:"",msg:""})},checked:e.permitted.create})}),Object(u.jsx)("td",{className:"py-1 px-3",children:Object(u.jsx)("input",{type:"checkbox",className:"form-checkbox h-5 w-5 text-gray-600",onChange:function(){o(t,"view",!e.permitted.view),n({element:"",msg:""})},checked:e.permitted.view})}),Object(u.jsx)("td",{className:"py-1 px-3",children:Object(u.jsx)("input",{type:"checkbox",className:"form-checkbox h-5 w-5 text-gray-600",onChange:function(){o(t,"update",!e.permitted.update),n({element:"",msg:""})},checked:e.permitted.update})}),Object(u.jsx)("td",{className:"py-1 px-3",children:Object(u.jsx)("input",{type:"checkbox",className:"form-checkbox h-5 w-5 text-gray-600",onChange:function(){o(t,"delete",!e.permitted.delete),n({element:"",msg:""})},checked:e.permitted.delete})})]},e.id+t)}))},pagination:!1,search:!0,thColor:"gray"}),Object(u.jsx)("div",{className:"flex justify-end gap-5 mt-4",children:Object(u.jsx)("button",{className:"btn bg-primary text-white hover:bg-blue-600 focus:outline-none",type:"submit",disabled:i,children:!0===i?"Savig...":"Complete"})})]})})})},O=s(8),v=s.n(O),y=s(10),N=s(13);!function(e){e[e.Add_Role_Access=0]="Add_Role_Access",e[e.Update_Role_Access=1]="Update_Role_Access",e[e.Close_Modal=2]="Close_Modal"}(c||(c={}));var w,_=Object(n.b)((function(e){return{access:e.access}}),{createAccessRoles:x.a,updateAccessRoles:x.c})((function(e){var t=e.access,s=e.createAccessRoles,n=e.updateAccessRoles,i=e.filterStatus,x=Object(a.useState)(""),f=Object(l.a)(x,2),p=f[0],O=f[1],w=Object(a.useState)(""),_=Object(l.a)(w,2),k=_[0],R=_[1],T=Object(a.useState)("none"),C=Object(l.a)(T,2),A=C[0],S=C[1],q=Object(a.useState)({stepOne:!1,stepTwo:!1}),M=Object(l.a)(q,2),D=M[0],E=M[1],B=Object(a.useState)(),U=Object(l.a)(B,2),L=U[0],I=U[1],F=Object(a.useState)(null),H=Object(l.a)(F,2),z=H[0],P=H[1],Y=Object(a.useState)(c.Close_Modal),G=Object(l.a)(Y,2),V=G[0],W=G[1],J=Object(a.useState)({element:"",msg:""}),K=Object(l.a)(J,2),Q=K[0],X=K[1],Z=Object(a.useState)(),$=Object(l.a)(Z,2),ee=$[0],te=$[1],se=Object(a.useState)(!1),ce=Object(l.a)(se,2),le=ce[0],ae=ce[1],re=Object(a.useState)(!1),ne=Object(l.a)(re,2),ie=ne[0],oe=ne[1],de=Object(a.useState)(),me=Object(l.a)(de,2),be=me[0],xe=me[1],je=function(e){return e.district_required?"District":e.room_required?"Room":e.school_required?"School":"None"},ue=function(e){if(!z)return[];var t,s=[];return z.forEach((function(c,l){(t=e.find((function(e){return e.key===c.key})))?s.push(t):s.push(c)})),s};Object(a.useEffect)((function(){(function(){var e=Object(d.a)(o.a.mark((function e(){var t,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.a.get("".concat(y.a.AUTH,"/allroleaccess"));case 3:(t=e.sent)&&(s=t.data.map((function(e){return{id:e.id,task:e.title,key:e.key,permitted:e.permitted}})),P(s)),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log({role_error:e.t0}),te({type:"danger",message:Object(N.a)(e.t0)});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[]);var he=function(){E({stepOne:!1,stepTwo:!1}),V!==c.Update_Role_Access&&(S("none"),R(""),O("")),ae(!1),te({type:"",message:""}),z&&I(z),X({element:"",msg:""}),V===c.Update_Role_Access&&W(c.Close_Modal)},fe=function(){var e=Object(d.a)(o.a.mark((function e(t,l){var a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),te({type:"",message:""}),X({element:"",msg:""}),ae(!0),1!==l){e.next=9;break}if(k.length){e.next=7;break}return e.abrupt("return",X({element:"role-title",msg:"Role Title is required"}));case 7:A.length||S("none"),E({stepOne:!0,stepTwo:!1});case 9:if(2!==l){e.next=37;break}if(!L||L.some((function(e){return!0===e.permitted.create||!0===e.permitted.view||!0===e.permitted.update||!0===e.permitted.delete}))){e.next=12;break}return e.abrupt("return",X({element:"role-access",msg:"At least one permission is required"}));case 12:if(e.prev=12,V!==c.Add_Role_Access){e.next=23;break}return e.next=16,v.a.post("".concat(y.a.AUTH,"/role"),{role:k,status:!0,district_required:"district"===A,school_required:"school"===A,room_required:"room"===A,access:L});case 16:(a=e.sent)&&s(a.data.data),ae(!1),he(),te({type:"success",message:"Role has been successfully created."}),e.next=31;break;case 23:return e.next=25,v.a.patch("".concat(y.a.AUTH,"/role"),{role:k,status:!0,district_required:"district"===A,school_required:"school"===A,room_required:"room"===A,access:L,system_user_role_id:p});case 25:r=e.sent,console.log(r.data),r&&n(r.data.data),ae(!1),he(),te({type:"success",message:"Role has been successfully updated."});case 31:e.next=37;break;case 33:e.prev=33,e.t0=e.catch(12),console.log({role_error:e.t0}),te({type:"danger",message:Object(N.a)(e.t0)});case 37:ae(!1);case 38:case"end":return e.stop()}}),e,null,[[12,33]])})));return function(t,s){return e.apply(this,arguments)}}(),pe=function(e){return"all"!==i?e.filter((function(e){return e.status===i})):e};return Object(u.jsxs)(u.Fragment,{children:[ee&&""!==ee.type&&V===c.Close_Modal&&Object(u.jsxs)("div",{className:"alert-".concat(ee.type," flex flex-row items-center relative my-2"),children:[Object(u.jsx)("span",{className:"absolute top-0 bottom-0 right-0 px-4 py-3",children:Object(u.jsx)(r.x,{className:"h-5 w-5 text-gray-700 hover:font-bold",title:"Close",onClick:function(){return te({type:"",message:""})}})}),Object(u.jsx)(r.F,{className:"h-10 w-10"}),Object(u.jsxs)("div",{className:"alert-content ml-4",children:[Object(u.jsx)("div",{className:"alert-title font-semibold text-lg",children:"success"===ee.type?"Success":"Error"}),Object(u.jsx)("div",{className:"alert-description text-sm",children:ee.message})]})]}),Object(u.jsxs)("div",{className:"w-full bg-white text-right p-2 border border-gray-300 rounded mb-10",children:[Object(u.jsx)("button",{className:"btn btn-blue",onClick:function(){W(c.Add_Role_Access),z&&I(z),O(""),R(""),S("none")},disabled:!z,children:"New Role"}),Object(u.jsx)("div",{className:"overflow-x-auto w-full mt-2",children:Object(u.jsx)(m.a,{columns:[{columnTitle:"#",alignText:"left"},{columnTitle:"User Types",alignText:"left"},{columnTitle:"Level",alignText:"left"},{columnTitle:"",alignText:"center"}],rows:function(){var e=pe(t.accessRoles).map((function(e,t){return Object(u.jsxs)("tr",{className:"accordion border-b border-grey-light ".concat(p===e.system_user_role_id&&"bg-gray-100"),children:[Object(u.jsx)("td",{className:"px-3 py-3 text-left",children:t+1}),Object(u.jsx)("td",{className:"text-gray-800 text-base font-medium text-left px-3",children:e.role}),Object(u.jsx)("td",{className:"text-gray-800 text-base text-left px-3",children:je(e)}),Object(u.jsx)("td",{className:"text-right",children:Object(u.jsxs)("div",{className:"inline-flex",children:[Object(u.jsxs)("button",{className:"btn bg-gray-300 text-gray-900 hover:bg-gray-600 hover:text-white inline-flex mr-1 focus:outline-none",onClick:function(){oe(!0),O(e.system_user_role_id),xe(e),R(e.role),S(e.district_required?"district":e.school_required?"school":e.room_required?"room":"none"),I(ue(e.access))},disabled:p===e.system_user_role_id,children:[Object(u.jsx)(j.b,{className:"h-5 w-5 mr-1"}),Object(u.jsx)("span",{children:"Access"})]}),Object(u.jsxs)("button",{className:"btn bg-blue-500 text-white hover:bg-blue-700 inline-flex mr-1 focus:outline-none",onClick:function(){O(e.system_user_role_id),R(e.role),te({type:"",message:""}),W(c.Update_Role_Access),I(ue(e.access))},disabled:p===e.system_user_role_id&&V!==c.Close_Modal,children:[Object(u.jsx)(r.D,{className:"h-5 w-5 mr-1"}),Object(u.jsx)("span",{children:"Edit"})]})]})})]},t)}));return e.length>=1?e:Object(u.jsx)("tr",{className:"accordion border-b border-grey-light hover:bg-gray-100",children:Object(u.jsx)("td",{className:"text-gray-500 text-sm font-medium text-center px-3",colSpan:3,children:"No Data Found"})})},pagination:!0,search:!0,searchBG:"bg-white",thColor:"blue"})})]}),V!==c.Close_Modal&&Object(u.jsx)(b.d,{backDrop:!0,theme:b.c.default,close:function(){he(),W(c.Close_Modal)},displayClose:!0,backDropClose:!1,title:Object(u.jsxs)("div",{className:"bg-white text-gray-500 font-bold text-2xl",children:[V===c.Add_Role_Access?"Create New ":"Update ","Role"]}),widthSizeClass:b.b.extraLarge,padding:{title:!0,body:!1,footer:!1},children:Object(u.jsxs)("div",{className:"h-full bg-gray-100 py-1",children:[ee&&""!==ee.type&&Object(u.jsxs)("div",{className:"alert-".concat(ee.type," flex flex-row items-center relative mx-3"),children:[Object(u.jsx)("span",{className:"absolute top-0 bottom-0 right-0 px-4 py-3",children:Object(u.jsx)(r.x,{className:"h-5 w-5 text-gray-700 hover:font-bold",title:"Close",onClick:function(){return te({type:"",message:""})}})}),Object(u.jsx)(r.F,{className:"h-10 w-10"}),Object(u.jsxs)("div",{className:"alert-content ml-4",children:[Object(u.jsx)("div",{className:"alert-title font-semibold text-lg",children:"success"===ee.type?"Success":"Error"}),Object(u.jsx)("div",{className:"alert-description text-sm",children:ee.message})]})]}),Object(u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 justify-between gap-3",children:[Object(u.jsxs)("div",{className:"bg-white shadow my-3 ml-3 py-2 rounded",children:[Object(u.jsxs)("div",{className:"flex row items-center p-3 mb-2 gap-2 cursor-pointer ".concat(D.stepOne?"text-gray-800 bg-gray-100":"text-blue-800 bg-blue-100 border-blue-800 border-l-4"),children:[Object(u.jsx)("div",{className:"w-10 h-10 bg-white border-2 border-gary-200 rounded-full text-lg text-white flex items-center",children:Object(u.jsx)("span",{className:"text-grey-darker text-center w-full text-gray-700",children:"1"})}),Object(u.jsxs)("div",{className:"flex flex-col font-semibold text-xl",children:["Basic Information",Object(u.jsx)("span",{className:"font-normal text-sm",children:"Input Role Title & a required field"})]})]}),Object(u.jsxs)("div",{className:"flex row items-center p-3 mb-2 gap-2 cursor-pointer ".concat(D.stepOne&&!D.stepTwo?"text-blue-800 bg-blue-100 border-blue-800 border-l-4":"text-gray-800 bg-gray-100"),children:[Object(u.jsx)("div",{className:"w-10 h-10 bg-white border-2 border-gary-200 rounded-full text-lg text-white flex items-center",children:Object(u.jsx)("span",{className:"text-grey-darker text-center w-full text-gray-700",children:"2"})}),Object(u.jsxs)("div",{className:"flex flex-col font-semibold text-xl",children:["Access Permission",Object(u.jsx)("span",{className:"font-normal text-sm",children:"Give permission to new role"})]})]})]}),Object(u.jsx)("div",{className:"md:col-span-2 col-span-1 bg-white shadow my-3 mr-3 py-2 rounded",children:D.stepOne?L&&Object(u.jsx)(g,{handleSubmit:fe,roleTitle:k,setAccessToRole:I,accessToRole:L,error:Q,setError:X,loadingRequest:le}):Object(u.jsx)(h,{handleSubmit:fe,setRoleTitle:R,roleTitle:k,setOpenModal:W,openModal:V,setRequirement:S,roleRequirement:A,error:Q,setError:X})})]})]})}),ie&&Object(u.jsx)(b.d,{backDrop:!0,theme:b.c.default,close:function(){oe(!1),O(""),xe(null),R(""),S("none"),I(void 0)},displayClose:!0,backDropClose:!1,title:Object(u.jsxs)("div",{className:"bg-white text-gray-500 font-bold text-2xl",children:[k," Role"]}),widthSizeClass:b.b.large,padding:{title:!0,body:!1,footer:!1},children:Object(u.jsxs)("div",{className:"h-full bg-gray-100 py-1",children:[Object(u.jsxs)("div",{className:"my-3 flex justify-between items-start px-2",children:[Object(u.jsxs)("div",{children:[Object(u.jsx)("div",{className:"flex flex-col",children:Object(u.jsxs)("select",{className:"rounded px-2 py-2 w-full bg-white focus:outline-none border-gray-400 border-2",onChange:function(e){return function(e){var s=t.accessRoles.filter((function(t){return t.system_user_role_id===e}))[0];oe(!0),O(s.system_user_role_id),xe(s),R(s.role),S(s.district_required?"district":s.school_required?"school":s.room_required?"room":"none"),I(ue(s.access))}(e.target.value)},value:p,disabled:le,children:[Object(u.jsx)("option",{value:"",children:"Document Category"}),pe(t.accessRoles).map((function(e,t){return Object(u.jsx)("option",{value:e.system_user_role_id,children:e.role},t+e.system_user_role_id)}))]})}),(null===be||void 0===be?void 0:be.district_required)&&Object(u.jsxs)("div",{className:"flex items-center text-lg gap-1",children:[Object(u.jsx)("span",{className:"text-gray-600",children:"District: "}),Object(u.jsx)("h1",{className:"font-medium text-gray-900",children:"Required"})]}),(null===be||void 0===be?void 0:be.school_required)&&Object(u.jsxs)("div",{className:"flex items-center text-lg gap-1",children:[Object(u.jsx)("span",{className:"text-gray-600",children:"School: "}),Object(u.jsx)("h1",{className:"font-medium text-gray-900",children:"Required"})]}),(null===be||void 0===be?void 0:be.room_required)&&Object(u.jsxs)("div",{className:"flex items-center text-lg gap-1",children:[Object(u.jsx)("span",{className:"text-gray-600",children:"Room: "}),Object(u.jsx)("h1",{className:"font-medium text-gray-900",children:"Required"})]})]}),Object(u.jsxs)("button",{className:"btn bg-blue-500 text-white hover:bg-blue-700 inline-flex mr-1",onClick:function(){W(c.Update_Role_Access),oe(!1),E({stepOne:!0,stepTwo:!1})},disabled:V!==c.Close_Modal,children:[Object(u.jsx)(r.D,{className:"h-5 w-5 mr-1"}),Object(u.jsx)("span",{children:"Edit"})]})]}),Object(u.jsx)(m.a,{columns:[{columnTitle:"Access Name",alignText:"left",padding:"p-3"},{columnTitle:"Create",alignText:"left"},{columnTitle:"View",alignText:"left"},{columnTitle:"Update",alignText:"left"},{columnTitle:"Delete",alignText:"left"}],rows:function(){var e=t.accessRoles.filter((function(e){return e.system_user_role_id===p}))[0].access.map((function(e,t){return Object(u.jsxs)("tr",{className:"accordion border-b border-grey-light hover:bg-gray-100",children:[Object(u.jsx)("td",{className:"text-gray-800 text-xl font-medium text-left px-3 py-2",children:e.task}),Object(u.jsx)("td",{className:"px-2",children:Object(u.jsxs)("div",{className:"inline-flex items-center text-xl ".concat(e.permitted.create?"text-green-700":"text-red-700"),children:[e.permitted.create?Object(u.jsx)(j.a,{}):Object(u.jsx)(r.O,{}),e.permitted.create?" Yes":"No"]})}),Object(u.jsx)("td",{className:"px-2",children:Object(u.jsxs)("div",{className:"inline-flex items-center text-xl ".concat(e.permitted.view?"text-green-700":"text-red-700"),children:[e.permitted.view?Object(u.jsx)(j.a,{}):Object(u.jsx)(r.O,{}),e.permitted.view?" Yes":"No"]})}),Object(u.jsx)("td",{className:"px-2",children:Object(u.jsxs)("div",{className:"inline-flex items-center text-xl ".concat(e.permitted.update?"text-green-700":"text-red-700"),children:[e.permitted.update?Object(u.jsx)(j.a,{}):Object(u.jsx)(r.O,{}),e.permitted.update?" Yes":"No"]})}),Object(u.jsx)("td",{className:"px-2",children:Object(u.jsxs)("div",{className:"inline-flex items-center text-xl ".concat(e.permitted.delete?"text-green-700":"text-red-700"),children:[e.permitted.delete?Object(u.jsx)(j.a,{}):Object(u.jsx)(r.O,{}),e.permitted.delete?" Yes":"No"]})})]},t)}));return e.length>=1?e:Object(u.jsx)("tr",{className:"accordion border-b border-grey-light hover:bg-gray-100",children:Object(u.jsx)("td",{className:"text-gray-500 text-sm font-medium text-center px-3",colSpan:4,children:"No Tasks assigned to this Role"})})},pagination:!1,search:!0,searchBG:"bg-gray-100",thColor:"gray",tableId:"tableAccessForm"})]})})]})})),k=s(190),R=s(180);!function(e){e.All_Roles="All Roles",e.Active_Roles="Active Roles",e.Blocked_Roles="Blocked Roles"}(w||(w={}));var T=Object(n.b)((function(e){return{access:e.access}}),{fetchAccessRoles:x.b})((function(e){var t=e.access,s=e.fetchAccessRoles,c=Object(a.useState)({allRole:0,activeRole:0,blockedRole:0}),n=Object(l.a)(c,2),i=n[0],o=n[1],d=Object(a.useState)(w.All_Roles),m=Object(l.a)(d,2),b=m[0],x=m[1],j=Object(a.useState)(),h=Object(l.a)(j,2),f=h[0],p=h[1],g=Object(a.useState)(!0),O=Object(l.a)(g,2),v=O[0],y=O[1];Object(a.useEffect)((function(){t.accessRoles.length||s(),t.accessRoles.length&&(o({allRole:t.accessRoles.length,activeRole:t.accessRoles.filter((function(e){return e.status})).length,blockedRole:t.accessRoles.filter((function(e){return!e.status})).length}),y(!1))}),[t.accessRoles,s]);return!0===v?Object(u.jsx)("div",{className:"text-center mt-7 font-bold text-4xl text-gray-400 animate-pulse",children:"Loading roles..."}):Object(u.jsxs)(a.Fragment,{children:[Object(u.jsxs)(k.b,{children:[Object(u.jsx)("span",{className:"text-sm mt-2",children:"Filter by Status"}),Object(u.jsx)("section",{className:"mt-1",onClick:function(){return x(w.All_Roles)},children:Object(u.jsx)(k.a,{title:"All Role",count:i.allRole,active:b===w.All_Roles})}),Object(u.jsx)("section",{className:"mt-1",onClick:function(){return x(w.Active_Roles)},children:Object(u.jsx)(k.a,{title:"Active Role",count:i.activeRole,active:b===w.Active_Roles})}),Object(u.jsx)("section",{className:"mt-1",onClick:function(){return x(w.Blocked_Roles)},children:Object(u.jsx)(k.a,{title:"Disabled Role",count:i.blockedRole,active:b===w.Blocked_Roles})})]}),Object(u.jsx)("div",{className:"w-full my-5 px-1",children:Object(u.jsxs)("div",{className:"flex flex-row items-center",children:[Object(u.jsx)(r.Y,{className:"text-blue-700 w-28 h-28"}),Object(u.jsxs)("div",{className:"flex flex-col",children:[Object(u.jsx)("h1",{className:"text-3xl font-semibold",children:"System Roles Management"}),Object(u.jsxs)("div",{className:"flex flex-row items-center mx-2 md:gap-3 gap-2",children:[Object(u.jsxs)("div",{className:"flex flex-col mt-1",children:[Object(u.jsx)("span",{className:"text-gray-600 text-base",children:"All Role(s)"}),Object(u.jsx)("span",{className:"text-gray-600 text-3xl font-bold",children:Object(R.g)(i.allRole)})]}),b!==w.Blocked_Roles&&Object(u.jsxs)("div",{className:"flex flex-col mt-1",children:[Object(u.jsx)("span",{className:"text-gray-600 text-base",children:"Active Role(s)"}),Object(u.jsx)("span",{className:"text-gray-600 text-3xl font-bold",children:Object(R.g)(i.activeRole)})]}),b!==w.Active_Roles&&Object(u.jsxs)("div",{className:"flex flex-col mt-1",children:[Object(u.jsx)("span",{className:"text-gray-600 text-base",children:"Blocked Role(s)"}),Object(u.jsx)("span",{className:"text-gray-600 text-3xl font-bold",children:Object(R.g)(i.blockedRole)})]})]})]})]})}),f&&""!==f.type&&Object(u.jsxs)("div",{className:"alert-".concat(f.type," flex flex-row items-center relative my-2"),children:[Object(u.jsx)("span",{className:"absolute top-0 bottom-0 right-0 px-4 py-3",children:Object(u.jsx)(r.x,{className:"h-5 w-5 text-gray-700 hover:font-bold",title:"Close",onClick:function(){return p({type:"",message:""})}})}),Object(u.jsx)(r.F,{className:"h-10 w-10"}),Object(u.jsxs)("div",{className:"alert-content ml-4",children:[Object(u.jsx)("div",{className:"alert-title font-semibold text-lg",children:"success"===f.type?"Success":"Error"}),Object(u.jsx)("div",{className:"alert-description text-sm",children:f.message})]})]}),Object(u.jsx)("div",{className:"p-2 overflow-x-auto",children:b===w.Blocked_Roles?Object(u.jsx)(_,{filterStatus:!1}):b===w.Active_Roles?Object(u.jsx)(_,{filterStatus:!0}):Object(u.jsx)(_,{filterStatus:"all"})})]})}))}}]);
//# sourceMappingURL=35.f05df9ab.chunk.js.map